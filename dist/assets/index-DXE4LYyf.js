(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function Ob(d){return d&&d.__esModule&&Object.prototype.hasOwnProperty.call(d,"default")?d.default:d}var g1={exports:{}},ym={},y1={exports:{}},nn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BS;function nP(){if(BS)return nn;BS=1;var d=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),s=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;function c(Z){return Z===null||typeof Z!="object"?null:(Z=p&&Z[p]||Z["@@iterator"],typeof Z=="function"?Z:null)}var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,y={};function v(Z,ce,B){this.props=Z,this.context=ce,this.refs=y,this.updater=B||f}v.prototype.isReactComponent={},v.prototype.setState=function(Z,ce){if(typeof Z!="object"&&typeof Z!="function"&&Z!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Z,ce,"setState")},v.prototype.forceUpdate=function(Z){this.updater.enqueueForceUpdate(this,Z,"forceUpdate")};function g(){}g.prototype=v.prototype;function x(Z,ce,B){this.props=Z,this.context=ce,this.refs=y,this.updater=B||f}var b=x.prototype=new g;b.constructor=x,m(b,v.prototype),b.isPureReactComponent=!0;var w=Array.isArray,T=Object.prototype.hasOwnProperty,R={current:null},C={key:!0,ref:!0,__self:!0,__source:!0};function P(Z,ce,B){var U,K={},re=null,ae=null;if(ce!=null)for(U in ce.ref!==void 0&&(ae=ce.ref),ce.key!==void 0&&(re=""+ce.key),ce)T.call(ce,U)&&!C.hasOwnProperty(U)&&(K[U]=ce[U]);var pe=arguments.length-2;if(pe===1)K.children=B;else if(1<pe){for(var ye=Array(pe),Re=0;Re<pe;Re++)ye[Re]=arguments[Re+2];K.children=ye}if(Z&&Z.defaultProps)for(U in pe=Z.defaultProps,pe)K[U]===void 0&&(K[U]=pe[U]);return{$$typeof:d,type:Z,key:re,ref:ae,props:K,_owner:R.current}}function I(Z,ce){return{$$typeof:d,type:Z.type,key:ce,ref:Z.ref,props:Z.props,_owner:Z._owner}}function D(Z){return typeof Z=="object"&&Z!==null&&Z.$$typeof===d}function j(Z){var ce={"=":"=0",":":"=2"};return"$"+Z.replace(/[=:]/g,function(B){return ce[B]})}var N=/\/+/g;function O(Z,ce){return typeof Z=="object"&&Z!==null&&Z.key!=null?j(""+Z.key):ce.toString(36)}function W(Z,ce,B,U,K){var re=typeof Z;(re==="undefined"||re==="boolean")&&(Z=null);var ae=!1;if(Z===null)ae=!0;else switch(re){case"string":case"number":ae=!0;break;case"object":switch(Z.$$typeof){case d:case t:ae=!0}}if(ae)return ae=Z,K=K(ae),Z=U===""?"."+O(ae,0):U,w(K)?(B="",Z!=null&&(B=Z.replace(N,"$&/")+"/"),W(K,ce,B,"",function(Re){return Re})):K!=null&&(D(K)&&(K=I(K,B+(!K.key||ae&&ae.key===K.key?"":(""+K.key).replace(N,"$&/")+"/")+Z)),ce.push(K)),1;if(ae=0,U=U===""?".":U+":",w(Z))for(var pe=0;pe<Z.length;pe++){re=Z[pe];var ye=U+O(re,pe);ae+=W(re,ce,B,ye,K)}else if(ye=c(Z),typeof ye=="function")for(Z=ye.call(Z),pe=0;!(re=Z.next()).done;)re=re.value,ye=U+O(re,pe++),ae+=W(re,ce,B,ye,K);else if(re==="object")throw ce=String(Z),Error("Objects are not valid as a React child (found: "+(ce==="[object Object]"?"object with keys {"+Object.keys(Z).join(", ")+"}":ce)+"). If you meant to render a collection of children, use an array instead.");return ae}function X(Z,ce,B){if(Z==null)return Z;var U=[],K=0;return W(Z,U,"","",function(re){return ce.call(B,re,K++)}),U}function J(Z){if(Z._status===-1){var ce=Z._result;ce=ce(),ce.then(function(B){(Z._status===0||Z._status===-1)&&(Z._status=1,Z._result=B)},function(B){(Z._status===0||Z._status===-1)&&(Z._status=2,Z._result=B)}),Z._status===-1&&(Z._status=0,Z._result=ce)}if(Z._status===1)return Z._result.default;throw Z._result}var ee={current:null},V={transition:null},q={ReactCurrentDispatcher:ee,ReactCurrentBatchConfig:V,ReactCurrentOwner:R};function Y(){throw Error("act(...) is not supported in production builds of React.")}return nn.Children={map:X,forEach:function(Z,ce,B){X(Z,function(){ce.apply(this,arguments)},B)},count:function(Z){var ce=0;return X(Z,function(){ce++}),ce},toArray:function(Z){return X(Z,function(ce){return ce})||[]},only:function(Z){if(!D(Z))throw Error("React.Children.only expected to receive a single React element child.");return Z}},nn.Component=v,nn.Fragment=n,nn.Profiler=i,nn.PureComponent=x,nn.StrictMode=r,nn.Suspense=l,nn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=q,nn.act=Y,nn.cloneElement=function(Z,ce,B){if(Z==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+Z+".");var U=m({},Z.props),K=Z.key,re=Z.ref,ae=Z._owner;if(ce!=null){if(ce.ref!==void 0&&(re=ce.ref,ae=R.current),ce.key!==void 0&&(K=""+ce.key),Z.type&&Z.type.defaultProps)var pe=Z.type.defaultProps;for(ye in ce)T.call(ce,ye)&&!C.hasOwnProperty(ye)&&(U[ye]=ce[ye]===void 0&&pe!==void 0?pe[ye]:ce[ye])}var ye=arguments.length-2;if(ye===1)U.children=B;else if(1<ye){pe=Array(ye);for(var Re=0;Re<ye;Re++)pe[Re]=arguments[Re+2];U.children=pe}return{$$typeof:d,type:Z.type,key:K,ref:re,props:U,_owner:ae}},nn.createContext=function(Z){return Z={$$typeof:s,_currentValue:Z,_currentValue2:Z,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},Z.Provider={$$typeof:o,_context:Z},Z.Consumer=Z},nn.createElement=P,nn.createFactory=function(Z){var ce=P.bind(null,Z);return ce.type=Z,ce},nn.createRef=function(){return{current:null}},nn.forwardRef=function(Z){return{$$typeof:a,render:Z}},nn.isValidElement=D,nn.lazy=function(Z){return{$$typeof:h,_payload:{_status:-1,_result:Z},_init:J}},nn.memo=function(Z,ce){return{$$typeof:u,type:Z,compare:ce===void 0?null:ce}},nn.startTransition=function(Z){var ce=V.transition;V.transition={};try{Z()}finally{V.transition=ce}},nn.unstable_act=Y,nn.useCallback=function(Z,ce){return ee.current.useCallback(Z,ce)},nn.useContext=function(Z){return ee.current.useContext(Z)},nn.useDebugValue=function(){},nn.useDeferredValue=function(Z){return ee.current.useDeferredValue(Z)},nn.useEffect=function(Z,ce){return ee.current.useEffect(Z,ce)},nn.useId=function(){return ee.current.useId()},nn.useImperativeHandle=function(Z,ce,B){return ee.current.useImperativeHandle(Z,ce,B)},nn.useInsertionEffect=function(Z,ce){return ee.current.useInsertionEffect(Z,ce)},nn.useLayoutEffect=function(Z,ce){return ee.current.useLayoutEffect(Z,ce)},nn.useMemo=function(Z,ce){return ee.current.useMemo(Z,ce)},nn.useReducer=function(Z,ce,B){return ee.current.useReducer(Z,ce,B)},nn.useRef=function(Z){return ee.current.useRef(Z)},nn.useState=function(Z){return ee.current.useState(Z)},nn.useSyncExternalStore=function(Z,ce,B){return ee.current.useSyncExternalStore(Z,ce,B)},nn.useTransition=function(){return ee.current.useTransition()},nn.version="18.3.1",nn}var kS;function s_(){return kS||(kS=1,y1.exports=nP()),y1.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OS;function iP(){if(OS)return ym;OS=1;var d=s_(),t=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=d.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function s(a,l,u){var h,p={},c=null,f=null;u!==void 0&&(c=""+u),l.key!==void 0&&(c=""+l.key),l.ref!==void 0&&(f=l.ref);for(h in l)r.call(l,h)&&!o.hasOwnProperty(h)&&(p[h]=l[h]);if(a&&a.defaultProps)for(h in l=a.defaultProps,l)p[h]===void 0&&(p[h]=l[h]);return{$$typeof:t,type:a,key:c,ref:f,props:p,_owner:i.current}}return ym.Fragment=n,ym.jsx=s,ym.jsxs=s,ym}var FS;function sP(){return FS||(FS=1,g1.exports=iP()),g1.exports}var Zt=sP(),Ot=s_();const Vx=Ob(Ot);var Dy={},v1={exports:{}},To={},_1={exports:{}},x1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NS;function oP(){return NS||(NS=1,function(d){function t(V,q){var Y=V.length;V.push(q);e:for(;0<Y;){var Z=Y-1>>>1,ce=V[Z];if(0<i(ce,q))V[Z]=q,V[Y]=ce,Y=Z;else break e}}function n(V){return V.length===0?null:V[0]}function r(V){if(V.length===0)return null;var q=V[0],Y=V.pop();if(Y!==q){V[0]=Y;e:for(var Z=0,ce=V.length,B=ce>>>1;Z<B;){var U=2*(Z+1)-1,K=V[U],re=U+1,ae=V[re];if(0>i(K,Y))re<ce&&0>i(ae,K)?(V[Z]=ae,V[re]=Y,Z=re):(V[Z]=K,V[U]=Y,Z=U);else if(re<ce&&0>i(ae,Y))V[Z]=ae,V[re]=Y,Z=re;else break e}}return q}function i(V,q){var Y=V.sortIndex-q.sortIndex;return Y!==0?Y:V.id-q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;d.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();d.unstable_now=function(){return s.now()-a}}var l=[],u=[],h=1,p=null,c=3,f=!1,m=!1,y=!1,v=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(V){for(var q=n(u);q!==null;){if(q.callback===null)r(u);else if(q.startTime<=V)r(u),q.sortIndex=q.expirationTime,t(l,q);else break;q=n(u)}}function w(V){if(y=!1,b(V),!m)if(n(l)!==null)m=!0,J(T);else{var q=n(u);q!==null&&ee(w,q.startTime-V)}}function T(V,q){m=!1,y&&(y=!1,g(P),P=-1),f=!0;var Y=c;try{for(b(q),p=n(l);p!==null&&(!(p.expirationTime>q)||V&&!j());){var Z=p.callback;if(typeof Z=="function"){p.callback=null,c=p.priorityLevel;var ce=Z(p.expirationTime<=q);q=d.unstable_now(),typeof ce=="function"?p.callback=ce:p===n(l)&&r(l),b(q)}else r(l);p=n(l)}if(p!==null)var B=!0;else{var U=n(u);U!==null&&ee(w,U.startTime-q),B=!1}return B}finally{p=null,c=Y,f=!1}}var R=!1,C=null,P=-1,I=5,D=-1;function j(){return!(d.unstable_now()-D<I)}function N(){if(C!==null){var V=d.unstable_now();D=V;var q=!0;try{q=C(!0,V)}finally{q?O():(R=!1,C=null)}}else R=!1}var O;if(typeof x=="function")O=function(){x(N)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,X=W.port2;W.port1.onmessage=N,O=function(){X.postMessage(null)}}else O=function(){v(N,0)};function J(V){C=V,R||(R=!0,O())}function ee(V,q){P=v(function(){V(d.unstable_now())},q)}d.unstable_IdlePriority=5,d.unstable_ImmediatePriority=1,d.unstable_LowPriority=4,d.unstable_NormalPriority=3,d.unstable_Profiling=null,d.unstable_UserBlockingPriority=2,d.unstable_cancelCallback=function(V){V.callback=null},d.unstable_continueExecution=function(){m||f||(m=!0,J(T))},d.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<V?Math.floor(1e3/V):5},d.unstable_getCurrentPriorityLevel=function(){return c},d.unstable_getFirstCallbackNode=function(){return n(l)},d.unstable_next=function(V){switch(c){case 1:case 2:case 3:var q=3;break;default:q=c}var Y=c;c=q;try{return V()}finally{c=Y}},d.unstable_pauseExecution=function(){},d.unstable_requestPaint=function(){},d.unstable_runWithPriority=function(V,q){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var Y=c;c=V;try{return q()}finally{c=Y}},d.unstable_scheduleCallback=function(V,q,Y){var Z=d.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?Z+Y:Z):Y=Z,V){case 1:var ce=-1;break;case 2:ce=250;break;case 5:ce=1073741823;break;case 4:ce=1e4;break;default:ce=5e3}return ce=Y+ce,V={id:h++,callback:q,priorityLevel:V,startTime:Y,expirationTime:ce,sortIndex:-1},Y>Z?(V.sortIndex=Y,t(u,V),n(l)===null&&V===n(u)&&(y?(g(P),P=-1):y=!0,ee(w,Y-Z))):(V.sortIndex=ce,t(l,V),m||f||(m=!0,J(T))),V},d.unstable_shouldYield=j,d.unstable_wrapCallback=function(V){var q=c;return function(){var Y=c;c=q;try{return V.apply(this,arguments)}finally{c=Y}}}}(x1)),x1}var US;function aP(){return US||(US=1,_1.exports=oP()),_1.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GS;function lP(){if(GS)return To;GS=1;var d=s_(),t=aP();function n(_){for(var S="https://reactjs.org/docs/error-decoder.html?invariant="+_,L=1;L<arguments.length;L++)S+="&args[]="+encodeURIComponent(arguments[L]);return"Minified React error #"+_+"; visit "+S+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function o(_,S){s(_,S),s(_+"Capture",S)}function s(_,S){for(i[_]=S,_=0;_<S.length;_++)r.add(S[_])}var a=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),l=Object.prototype.hasOwnProperty,u=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h={},p={};function c(_){return l.call(p,_)?!0:l.call(h,_)?!1:u.test(_)?p[_]=!0:(h[_]=!0,!1)}function f(_,S,L,H){if(L!==null&&L.type===0)return!1;switch(typeof S){case"function":case"symbol":return!0;case"boolean":return H?!1:L!==null?!L.acceptsBooleans:(_=_.toLowerCase().slice(0,5),_!=="data-"&&_!=="aria-");default:return!1}}function m(_,S,L,H){if(S===null||typeof S>"u"||f(_,S,L,H))return!0;if(H)return!1;if(L!==null)switch(L.type){case 3:return!S;case 4:return S===!1;case 5:return isNaN(S);case 6:return isNaN(S)||1>S}return!1}function y(_,S,L,H,te,oe,Ee){this.acceptsBooleans=S===2||S===3||S===4,this.attributeName=H,this.attributeNamespace=te,this.mustUseProperty=L,this.propertyName=_,this.type=S,this.sanitizeURL=oe,this.removeEmptyString=Ee}var v={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(_){v[_]=new y(_,0,!1,_,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(_){var S=_[0];v[S]=new y(S,1,!1,_[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(_){v[_]=new y(_,2,!1,_.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(_){v[_]=new y(_,2,!1,_,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(_){v[_]=new y(_,3,!1,_.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(_){v[_]=new y(_,3,!0,_,null,!1,!1)}),["capture","download"].forEach(function(_){v[_]=new y(_,4,!1,_,null,!1,!1)}),["cols","rows","size","span"].forEach(function(_){v[_]=new y(_,6,!1,_,null,!1,!1)}),["rowSpan","start"].forEach(function(_){v[_]=new y(_,5,!1,_.toLowerCase(),null,!1,!1)});var g=/[\-:]([a-z])/g;function x(_){return _[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(_){var S=_.replace(g,x);v[S]=new y(S,1,!1,_,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(_){var S=_.replace(g,x);v[S]=new y(S,1,!1,_,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(_){var S=_.replace(g,x);v[S]=new y(S,1,!1,_,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(_){v[_]=new y(_,1,!1,_.toLowerCase(),null,!1,!1)}),v.xlinkHref=new y("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(_){v[_]=new y(_,1,!1,_.toLowerCase(),null,!0,!0)});function b(_,S,L,H){var te=v.hasOwnProperty(S)?v[S]:null;(te!==null?te.type!==0:H||!(2<S.length)||S[0]!=="o"&&S[0]!=="O"||S[1]!=="n"&&S[1]!=="N")&&(m(S,L,te,H)&&(L=null),H||te===null?c(S)&&(L===null?_.removeAttribute(S):_.setAttribute(S,""+L)):te.mustUseProperty?_[te.propertyName]=L===null?te.type===3?!1:"":L:(S=te.attributeName,H=te.attributeNamespace,L===null?_.removeAttribute(S):(te=te.type,L=te===3||te===4&&L===!0?"":""+L,H?_.setAttributeNS(H,S,L):_.setAttribute(S,L))))}var w=d.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,T=Symbol.for("react.element"),R=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),P=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),D=Symbol.for("react.provider"),j=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),O=Symbol.for("react.suspense"),W=Symbol.for("react.suspense_list"),X=Symbol.for("react.memo"),J=Symbol.for("react.lazy"),ee=Symbol.for("react.offscreen"),V=Symbol.iterator;function q(_){return _===null||typeof _!="object"?null:(_=V&&_[V]||_["@@iterator"],typeof _=="function"?_:null)}var Y=Object.assign,Z;function ce(_){if(Z===void 0)try{throw Error()}catch(L){var S=L.stack.trim().match(/\n( *(at )?)/);Z=S&&S[1]||""}return`
`+Z+_}var B=!1;function U(_,S){if(!_||B)return"";B=!0;var L=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(S)if(S=function(){throw Error()},Object.defineProperty(S.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(S,[])}catch(_t){var H=_t}Reflect.construct(_,[],S)}else{try{S.call()}catch(_t){H=_t}_.call(S.prototype)}else{try{throw Error()}catch(_t){H=_t}_()}}catch(_t){if(_t&&H&&typeof _t.stack=="string"){for(var te=_t.stack.split(`
`),oe=H.stack.split(`
`),Ee=te.length-1,Ve=oe.length-1;1<=Ee&&0<=Ve&&te[Ee]!==oe[Ve];)Ve--;for(;1<=Ee&&0<=Ve;Ee--,Ve--)if(te[Ee]!==oe[Ve]){if(Ee!==1||Ve!==1)do if(Ee--,Ve--,0>Ve||te[Ee]!==oe[Ve]){var tt=`
`+te[Ee].replace(" at new "," at ");return _.displayName&&tt.includes("<anonymous>")&&(tt=tt.replace("<anonymous>",_.displayName)),tt}while(1<=Ee&&0<=Ve);break}}}finally{B=!1,Error.prepareStackTrace=L}return(_=_?_.displayName||_.name:"")?ce(_):""}function K(_){switch(_.tag){case 5:return ce(_.type);case 16:return ce("Lazy");case 13:return ce("Suspense");case 19:return ce("SuspenseList");case 0:case 2:case 15:return _=U(_.type,!1),_;case 11:return _=U(_.type.render,!1),_;case 1:return _=U(_.type,!0),_;default:return""}}function re(_){if(_==null)return null;if(typeof _=="function")return _.displayName||_.name||null;if(typeof _=="string")return _;switch(_){case C:return"Fragment";case R:return"Portal";case I:return"Profiler";case P:return"StrictMode";case O:return"Suspense";case W:return"SuspenseList"}if(typeof _=="object")switch(_.$$typeof){case j:return(_.displayName||"Context")+".Consumer";case D:return(_._context.displayName||"Context")+".Provider";case N:var S=_.render;return _=_.displayName,_||(_=S.displayName||S.name||"",_=_!==""?"ForwardRef("+_+")":"ForwardRef"),_;case X:return S=_.displayName||null,S!==null?S:re(_.type)||"Memo";case J:S=_._payload,_=_._init;try{return re(_(S))}catch{}}return null}function ae(_){var S=_.type;switch(_.tag){case 24:return"Cache";case 9:return(S.displayName||"Context")+".Consumer";case 10:return(S._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return _=S.render,_=_.displayName||_.name||"",S.displayName||(_!==""?"ForwardRef("+_+")":"ForwardRef");case 7:return"Fragment";case 5:return S;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return re(S);case 8:return S===P?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof S=="function")return S.displayName||S.name||null;if(typeof S=="string")return S}return null}function pe(_){switch(typeof _){case"boolean":case"number":case"string":case"undefined":return _;case"object":return _;default:return""}}function ye(_){var S=_.type;return(_=_.nodeName)&&_.toLowerCase()==="input"&&(S==="checkbox"||S==="radio")}function Re(_){var S=ye(_)?"checked":"value",L=Object.getOwnPropertyDescriptor(_.constructor.prototype,S),H=""+_[S];if(!_.hasOwnProperty(S)&&typeof L<"u"&&typeof L.get=="function"&&typeof L.set=="function"){var te=L.get,oe=L.set;return Object.defineProperty(_,S,{configurable:!0,get:function(){return te.call(this)},set:function(Ee){H=""+Ee,oe.call(this,Ee)}}),Object.defineProperty(_,S,{enumerable:L.enumerable}),{getValue:function(){return H},setValue:function(Ee){H=""+Ee},stopTracking:function(){_._valueTracker=null,delete _[S]}}}}function Me(_){_._valueTracker||(_._valueTracker=Re(_))}function xe(_){if(!_)return!1;var S=_._valueTracker;if(!S)return!0;var L=S.getValue(),H="";return _&&(H=ye(_)?_.checked?"true":"false":_.value),_=H,_!==L?(S.setValue(_),!0):!1}function ve(_){if(_=_||(typeof document<"u"?document:void 0),typeof _>"u")return null;try{return _.activeElement||_.body}catch{return _.body}}function ne(_,S){var L=S.checked;return Y({},S,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:L??_._wrapperState.initialChecked})}function Te(_,S){var L=S.defaultValue==null?"":S.defaultValue,H=S.checked!=null?S.checked:S.defaultChecked;L=pe(S.value!=null?S.value:L),_._wrapperState={initialChecked:H,initialValue:L,controlled:S.type==="checkbox"||S.type==="radio"?S.checked!=null:S.value!=null}}function Pe(_,S){S=S.checked,S!=null&&b(_,"checked",S,!1)}function Ae(_,S){Pe(_,S);var L=pe(S.value),H=S.type;if(L!=null)H==="number"?(L===0&&_.value===""||_.value!=L)&&(_.value=""+L):_.value!==""+L&&(_.value=""+L);else if(H==="submit"||H==="reset"){_.removeAttribute("value");return}S.hasOwnProperty("value")?Ue(_,S.type,L):S.hasOwnProperty("defaultValue")&&Ue(_,S.type,pe(S.defaultValue)),S.checked==null&&S.defaultChecked!=null&&(_.defaultChecked=!!S.defaultChecked)}function je(_,S,L){if(S.hasOwnProperty("value")||S.hasOwnProperty("defaultValue")){var H=S.type;if(!(H!=="submit"&&H!=="reset"||S.value!==void 0&&S.value!==null))return;S=""+_._wrapperState.initialValue,L||S===_.value||(_.value=S),_.defaultValue=S}L=_.name,L!==""&&(_.name=""),_.defaultChecked=!!_._wrapperState.initialChecked,L!==""&&(_.name=L)}function Ue(_,S,L){(S!=="number"||ve(_.ownerDocument)!==_)&&(L==null?_.defaultValue=""+_._wrapperState.initialValue:_.defaultValue!==""+L&&(_.defaultValue=""+L))}var Ge=Array.isArray;function _e(_,S,L,H){if(_=_.options,S){S={};for(var te=0;te<L.length;te++)S["$"+L[te]]=!0;for(L=0;L<_.length;L++)te=S.hasOwnProperty("$"+_[L].value),_[L].selected!==te&&(_[L].selected=te),te&&H&&(_[L].defaultSelected=!0)}else{for(L=""+pe(L),S=null,te=0;te<_.length;te++){if(_[te].value===L){_[te].selected=!0,H&&(_[te].defaultSelected=!0);return}S!==null||_[te].disabled||(S=_[te])}S!==null&&(S.selected=!0)}}function fe(_,S){if(S.dangerouslySetInnerHTML!=null)throw Error(n(91));return Y({},S,{value:void 0,defaultValue:void 0,children:""+_._wrapperState.initialValue})}function We(_,S){var L=S.value;if(L==null){if(L=S.children,S=S.defaultValue,L!=null){if(S!=null)throw Error(n(92));if(Ge(L)){if(1<L.length)throw Error(n(93));L=L[0]}S=L}S==null&&(S=""),L=S}_._wrapperState={initialValue:pe(L)}}function Ke(_,S){var L=pe(S.value),H=pe(S.defaultValue);L!=null&&(L=""+L,L!==_.value&&(_.value=L),S.defaultValue==null&&_.defaultValue!==L&&(_.defaultValue=L)),H!=null&&(_.defaultValue=""+H)}function $e(_){var S=_.textContent;S===_._wrapperState.initialValue&&S!==""&&S!==null&&(_.value=S)}function et(_){switch(_){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ht(_,S){return _==null||_==="http://www.w3.org/1999/xhtml"?et(S):_==="http://www.w3.org/2000/svg"&&S==="foreignObject"?"http://www.w3.org/1999/xhtml":_}var Be,rt=function(_){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(S,L,H,te){MSApp.execUnsafeLocalFunction(function(){return _(S,L,H,te)})}:_}(function(_,S){if(_.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in _)_.innerHTML=S;else{for(Be=Be||document.createElement("div"),Be.innerHTML="<svg>"+S.valueOf().toString()+"</svg>",S=Be.firstChild;_.firstChild;)_.removeChild(_.firstChild);for(;S.firstChild;)_.appendChild(S.firstChild)}});function Ye(_,S){if(S){var L=_.firstChild;if(L&&L===_.lastChild&&L.nodeType===3){L.nodeValue=S;return}}_.textContent=S}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ge=["Webkit","ms","Moz","O"];Object.keys(de).forEach(function(_){ge.forEach(function(S){S=S+_.charAt(0).toUpperCase()+_.substring(1),de[S]=de[_]})});function ue(_,S,L){return S==null||typeof S=="boolean"||S===""?"":L||typeof S!="number"||S===0||de.hasOwnProperty(_)&&de[_]?(""+S).trim():S+"px"}function Se(_,S){_=_.style;for(var L in S)if(S.hasOwnProperty(L)){var H=L.indexOf("--")===0,te=ue(L,S[L],H);L==="float"&&(L="cssFloat"),H?_.setProperty(L,te):_[L]=te}}var De=Y({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function be(_,S){if(S){if(De[_]&&(S.children!=null||S.dangerouslySetInnerHTML!=null))throw Error(n(137,_));if(S.dangerouslySetInnerHTML!=null){if(S.children!=null)throw Error(n(60));if(typeof S.dangerouslySetInnerHTML!="object"||!("__html"in S.dangerouslySetInnerHTML))throw Error(n(61))}if(S.style!=null&&typeof S.style!="object")throw Error(n(62))}}function ke(_,S){if(_.indexOf("-")===-1)return typeof S.is=="string";switch(_){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ot=null;function Ce(_){return _=_.target||_.srcElement||window,_.correspondingUseElement&&(_=_.correspondingUseElement),_.nodeType===3?_.parentNode:_}var it=null,Xe=null,ut=null;function bt(_){if(_=Va(_)){if(typeof it!="function")throw Error(n(280));var S=_.stateNode;S&&(S=ih(S),it(_.stateNode,_.type,S))}}function vt(_){Xe?ut?ut.push(_):ut=[_]:Xe=_}function Rt(){if(Xe){var _=Xe,S=ut;if(ut=Xe=null,bt(_),S)for(_=0;_<S.length;_++)bt(S[_])}}function Dt(_,S){return _(S)}function yr(){}var Bt=!1;function Ut(_,S,L){if(Bt)return _(S,L);Bt=!0;try{return Dt(_,S,L)}finally{Bt=!1,(Xe!==null||ut!==null)&&(yr(),Rt())}}function Yt(_,S){var L=_.stateNode;if(L===null)return null;var H=ih(L);if(H===null)return null;L=H[S];e:switch(S){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(H=!H.disabled)||(_=_.type,H=!(_==="button"||_==="input"||_==="select"||_==="textarea")),_=!H;break e;default:_=!1}if(_)return null;if(L&&typeof L!="function")throw Error(n(231,S,typeof L));return L}var Pt=!1;if(a)try{var Wt={};Object.defineProperty(Wt,"passive",{get:function(){Pt=!0}}),window.addEventListener("test",Wt,Wt),window.removeEventListener("test",Wt,Wt)}catch{Pt=!1}function Jt(_,S,L,H,te,oe,Ee,Ve,tt){var _t=Array.prototype.slice.call(arguments,3);try{S.apply(L,_t)}catch(kt){this.onError(kt)}}var $t=!1,br=null,cr=!1,en=null,Pn={onError:function(_){$t=!0,br=_}};function an(_,S,L,H,te,oe,Ee,Ve,tt){$t=!1,br=null,Jt.apply(Pn,arguments)}function un(_,S,L,H,te,oe,Ee,Ve,tt){if(an.apply(this,arguments),$t){if($t){var _t=br;$t=!1,br=null}else throw Error(n(198));cr||(cr=!0,en=_t)}}function jr(_){var S=_,L=_;if(_.alternate)for(;S.return;)S=S.return;else{_=S;do S=_,S.flags&4098&&(L=S.return),_=S.return;while(_)}return S.tag===3?L:null}function Jn(_){if(_.tag===13){var S=_.memoizedState;if(S===null&&(_=_.alternate,_!==null&&(S=_.memoizedState)),S!==null)return S.dehydrated}return null}function Fe(_){if(jr(_)!==_)throw Error(n(188))}function Tt(_){var S=_.alternate;if(!S){if(S=jr(_),S===null)throw Error(n(188));return S!==_?null:_}for(var L=_,H=S;;){var te=L.return;if(te===null)break;var oe=te.alternate;if(oe===null){if(H=te.return,H!==null){L=H;continue}break}if(te.child===oe.child){for(oe=te.child;oe;){if(oe===L)return Fe(te),_;if(oe===H)return Fe(te),S;oe=oe.sibling}throw Error(n(188))}if(L.return!==H.return)L=te,H=oe;else{for(var Ee=!1,Ve=te.child;Ve;){if(Ve===L){Ee=!0,L=te,H=oe;break}if(Ve===H){Ee=!0,H=te,L=oe;break}Ve=Ve.sibling}if(!Ee){for(Ve=oe.child;Ve;){if(Ve===L){Ee=!0,L=oe,H=te;break}if(Ve===H){Ee=!0,H=oe,L=te;break}Ve=Ve.sibling}if(!Ee)throw Error(n(189))}}if(L.alternate!==H)throw Error(n(190))}if(L.tag!==3)throw Error(n(188));return L.stateNode.current===L?_:S}function Gt(_){return _=Tt(_),_!==null?At(_):null}function At(_){if(_.tag===5||_.tag===6)return _;for(_=_.child;_!==null;){var S=At(_);if(S!==null)return S;_=_.sibling}return null}var mr=t.unstable_scheduleCallback,me=t.unstable_cancelCallback,Qe=t.unstable_shouldYield,qe=t.unstable_requestPaint,Ze=t.unstable_now,Ne=t.unstable_getCurrentPriorityLevel,St=t.unstable_ImmediatePriority,jt=t.unstable_UserBlockingPriority,Ft=t.unstable_NormalPriority,Ht=t.unstable_LowPriority,Qt=t.unstable_IdlePriority,Kt=null,It=null;function Xt(_){if(It&&typeof It.onCommitFiberRoot=="function")try{It.onCommitFiberRoot(Kt,_,void 0,(_.current.flags&128)===128)}catch{}}var Sr=Math.clz32?Math.clz32:Pr,Rr=Math.log,Lr=Math.LN2;function Pr(_){return _>>>=0,_===0?32:31-(Rr(_)/Lr|0)|0}var fr=64,Zr=4194304;function Or(_){switch(_&-_){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return _&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return _&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return _}}function ti(_,S){var L=_.pendingLanes;if(L===0)return 0;var H=0,te=_.suspendedLanes,oe=_.pingedLanes,Ee=L&268435455;if(Ee!==0){var Ve=Ee&~te;Ve!==0?H=Or(Ve):(oe&=Ee,oe!==0&&(H=Or(oe)))}else Ee=L&~te,Ee!==0?H=Or(Ee):oe!==0&&(H=Or(oe));if(H===0)return 0;if(S!==0&&S!==H&&!(S&te)&&(te=H&-H,oe=S&-S,te>=oe||te===16&&(oe&4194240)!==0))return S;if(H&4&&(H|=L&16),S=_.entangledLanes,S!==0)for(_=_.entanglements,S&=H;0<S;)L=31-Sr(S),te=1<<L,H|=_[L],S&=~te;return H}function go(_,S){switch(_){case 1:case 2:case 4:return S+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return S+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ri(_,S){for(var L=_.suspendedLanes,H=_.pingedLanes,te=_.expirationTimes,oe=_.pendingLanes;0<oe;){var Ee=31-Sr(oe),Ve=1<<Ee,tt=te[Ee];tt===-1?(!(Ve&L)||Ve&H)&&(te[Ee]=go(Ve,S)):tt<=S&&(_.expiredLanes|=Ve),oe&=~Ve}}function Js(_){return _=_.pendingLanes&-1073741825,_!==0?_:_&1073741824?1073741824:0}function Jr(){var _=fr;return fr<<=1,!(fr&4194240)&&(fr=64),_}function fi(_){for(var S=[],L=0;31>L;L++)S.push(_);return S}function ni(_,S,L){_.pendingLanes|=S,S!==536870912&&(_.suspendedLanes=0,_.pingedLanes=0),_=_.eventTimes,S=31-Sr(S),_[S]=L}function di(_,S){var L=_.pendingLanes&~S;_.pendingLanes=S,_.suspendedLanes=0,_.pingedLanes=0,_.expiredLanes&=S,_.mutableReadLanes&=S,_.entangledLanes&=S,S=_.entanglements;var H=_.eventTimes;for(_=_.expirationTimes;0<L;){var te=31-Sr(L),oe=1<<te;S[te]=0,H[te]=-1,_[te]=-1,L&=~oe}}function Bn(_,S){var L=_.entangledLanes|=S;for(_=_.entanglements;L;){var H=31-Sr(L),te=1<<H;te&S|_[H]&S&&(_[H]|=S),L&=~te}}var Gr=0;function Nn(_){return _&=-_,1<_?4<_?_&268435455?16:536870912:4:1}var _l,Yu,Oa,Xl,qu,Fo=!1,Yl=[],yo=null,Fr=null,vo=null,Fa=new Map,Na=new Map,ha=[],Dp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ii(_,S){switch(_){case"focusin":case"focusout":yo=null;break;case"dragenter":case"dragleave":Fr=null;break;case"mouseover":case"mouseout":vo=null;break;case"pointerover":case"pointerout":Fa.delete(S.pointerId);break;case"gotpointercapture":case"lostpointercapture":Na.delete(S.pointerId)}}function Ua(_,S,L,H,te,oe){return _===null||_.nativeEvent!==oe?(_={blockedOn:S,domEventName:L,eventSystemFlags:H,nativeEvent:oe,targetContainers:[te]},S!==null&&(S=Va(S),S!==null&&Yu(S)),_):(_.eventSystemFlags|=H,S=_.targetContainers,te!==null&&S.indexOf(te)===-1&&S.push(te),_)}function Gd(_,S,L,H,te){switch(S){case"focusin":return yo=Ua(yo,_,S,L,H,te),!0;case"dragenter":return Fr=Ua(Fr,_,S,L,H,te),!0;case"mouseover":return vo=Ua(vo,_,S,L,H,te),!0;case"pointerover":var oe=te.pointerId;return Fa.set(oe,Ua(Fa.get(oe)||null,_,S,L,H,te)),!0;case"gotpointercapture":return oe=te.pointerId,Na.set(oe,Ua(Na.get(oe)||null,_,S,L,H,te)),!0}return!1}function ps(_){var S=Al(_.target);if(S!==null){var L=jr(S);if(L!==null){if(S=L.tag,S===13){if(S=Jn(L),S!==null){_.blockedOn=S,qu(_.priority,function(){Oa(L)});return}}else if(S===3&&L.stateNode.current.memoizedState.isDehydrated){_.blockedOn=L.tag===3?L.stateNode.containerInfo:null;return}}}_.blockedOn=null}function Ps(_){if(_.blockedOn!==null)return!1;for(var S=_.targetContainers;0<S.length;){var L=gs(_.domEventName,_.eventSystemFlags,S[0],_.nativeEvent);if(L===null){L=_.nativeEvent;var H=new L.constructor(L.type,L);ot=H,L.target.dispatchEvent(H),ot=null}else return S=Va(L),S!==null&&Yu(S),_.blockedOn=L,!1;S.shift()}return!0}function No(_,S,L){Ps(_)&&L.delete(S)}function es(){Fo=!1,yo!==null&&Ps(yo)&&(yo=null),Fr!==null&&Ps(Fr)&&(Fr=null),vo!==null&&Ps(vo)&&(vo=null),Fa.forEach(No),Na.forEach(No)}function ms(_,S){_.blockedOn===S&&(_.blockedOn=null,Fo||(Fo=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,es)))}function Uo(_){function S(te){return ms(te,_)}if(0<Yl.length){ms(Yl[0],_);for(var L=1;L<Yl.length;L++){var H=Yl[L];H.blockedOn===_&&(H.blockedOn=null)}}for(yo!==null&&ms(yo,_),Fr!==null&&ms(Fr,_),vo!==null&&ms(vo,_),Fa.forEach(S),Na.forEach(S),L=0;L<ha.length;L++)H=ha[L],H.blockedOn===_&&(H.blockedOn=null);for(;0<ha.length&&(L=ha[0],L.blockedOn===null);)ps(L),L.blockedOn===null&&ha.shift()}var Ui=w.ReactCurrentBatchConfig,si=!0;function Ga(_,S,L,H){var te=Gr,oe=Ui.transition;Ui.transition=null;try{Gr=1,ql(_,S,L,H)}finally{Gr=te,Ui.transition=oe}}function Ju(_,S,L,H){var te=Gr,oe=Ui.transition;Ui.transition=null;try{Gr=4,ql(_,S,L,H)}finally{Gr=te,Ui.transition=oe}}function ql(_,S,L,H){if(si){var te=gs(_,S,L,H);if(te===null)Zd(_,S,H,Jl,L),ii(_,H);else if(Gd(te,_,S,L,H))H.stopPropagation();else if(ii(_,H),S&4&&-1<Dp.indexOf(_)){for(;te!==null;){var oe=Va(te);if(oe!==null&&_l(oe),oe=gs(_,S,L,H),oe===null&&Zd(_,S,H,Jl,L),oe===te)break;te=oe}te!==null&&H.stopPropagation()}else Zd(_,S,H,null,L)}}var Jl=null;function gs(_,S,L,H){if(Jl=null,_=Ce(H),_=Al(_),_!==null)if(S=jr(_),S===null)_=null;else if(L=S.tag,L===13){if(_=Jn(S),_!==null)return _;_=null}else if(L===3){if(S.stateNode.current.memoizedState.isDehydrated)return S.tag===3?S.stateNode.containerInfo:null;_=null}else S!==_&&(_=null);return Jl=_,null}function Qc(_){switch(_){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ne()){case St:return 1;case jt:return 4;case Ft:case Ht:return 16;case Qt:return 536870912;default:return 16}default:return 16}}var Is=null,Kl=null,Gi=null;function xl(){if(Gi)return Gi;var _,S=Kl,L=S.length,H,te="value"in Is?Is.value:Is.textContent,oe=te.length;for(_=0;_<L&&S[_]===te[_];_++);var Ee=L-_;for(H=1;H<=Ee&&S[L-H]===te[oe-H];H++);return Gi=te.slice(_,1<H?1-H:void 0)}function pa(_){var S=_.keyCode;return"charCode"in _?(_=_.charCode,_===0&&S===13&&(_=13)):_=S,_===10&&(_=13),32<=_||_===13?_:0}function _o(){return!0}function Ql(){return!1}function Ri(_){function S(L,H,te,oe,Ee){this._reactName=L,this._targetInst=te,this.type=H,this.nativeEvent=oe,this.target=Ee,this.currentTarget=null;for(var Ve in _)_.hasOwnProperty(Ve)&&(L=_[Ve],this[Ve]=L?L(oe):oe[Ve]);return this.isDefaultPrevented=(oe.defaultPrevented!=null?oe.defaultPrevented:oe.returnValue===!1)?_o:Ql,this.isPropagationStopped=Ql,this}return Y(S.prototype,{preventDefault:function(){this.defaultPrevented=!0;var L=this.nativeEvent;L&&(L.preventDefault?L.preventDefault():typeof L.returnValue!="unknown"&&(L.returnValue=!1),this.isDefaultPrevented=_o)},stopPropagation:function(){var L=this.nativeEvent;L&&(L.stopPropagation?L.stopPropagation():typeof L.cancelBubble!="unknown"&&(L.cancelBubble=!0),this.isPropagationStopped=_o)},persist:function(){},isPersistent:_o}),S}var ma={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(_){return _.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},bl=Ri(ma),ga=Y({},ma,{view:0,detail:0}),ya=Ri(ga),_i,ts,ys,vs=Y({},ga,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_a,button:0,buttons:0,relatedTarget:function(_){return _.relatedTarget===void 0?_.fromElement===_.srcElement?_.toElement:_.fromElement:_.relatedTarget},movementX:function(_){return"movementX"in _?_.movementX:(_!==ys&&(ys&&_.type==="mousemove"?(_i=_.screenX-ys.screenX,ts=_.screenY-ys.screenY):ts=_i=0,ys=_),_i)},movementY:function(_){return"movementY"in _?_.movementY:ts}}),xo=Ri(vs),er=Y({},vs,{dataTransfer:0}),va=Ri(er),Zl=Y({},ga,{relatedTarget:0}),Go=Ri(Zl),Ku=Y({},ma,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=Ri(Ku),Sn=Y({},ma,{clipboardData:function(_){return"clipboardData"in _?_.clipboardData:window.clipboardData}}),Qu=Ri(Sn),Zu=Y({},ma,{data:0}),_s=Ri(Zu),zd={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Vd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Zc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function wl(_){var S=this.nativeEvent;return S.getModifierState?S.getModifierState(_):(_=Zc[_])?!!S[_]:!1}function _a(){return wl}var $u=Y({},ga,{key:function(_){if(_.key){var S=zd[_.key]||_.key;if(S!=="Unidentified")return S}return _.type==="keypress"?(_=pa(_),_===13?"Enter":String.fromCharCode(_)):_.type==="keydown"||_.type==="keyup"?Vd[_.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_a,charCode:function(_){return _.type==="keypress"?pa(_):0},keyCode:function(_){return _.type==="keydown"||_.type==="keyup"?_.keyCode:0},which:function(_){return _.type==="keypress"?pa(_):_.type==="keydown"||_.type==="keyup"?_.keyCode:0}}),$l=Ri($u),fn=Y({},vs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Hi=Ri(fn),E=Y({},ga,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_a}),k=Ri(E),F=Y({},ma,{propertyName:0,elapsedTime:0,pseudoElement:0}),z=Ri(F),$=Y({},vs,{deltaX:function(_){return"deltaX"in _?_.deltaX:"wheelDeltaX"in _?-_.wheelDeltaX:0},deltaY:function(_){return"deltaY"in _?_.deltaY:"wheelDeltaY"in _?-_.wheelDeltaY:"wheelDelta"in _?-_.wheelDelta:0},deltaZ:0,deltaMode:0}),se=Ri($),le=[9,13,27,32],we=a&&"CompositionEvent"in window,Le=null;a&&"documentMode"in document&&(Le=document.documentMode);var Ie=a&&"TextEvent"in window&&!Le,Je=a&&(!we||Le&&8<Le&&11>=Le),at=" ",nt=!1;function He(_,S){switch(_){case"keyup":return le.indexOf(S.keyCode)!==-1;case"keydown":return S.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Et(_){return _=_.detail,typeof _=="object"&&"data"in _?_.data:null}var pt=!1;function xt(_,S){switch(_){case"compositionend":return Et(S);case"keypress":return S.which!==32?null:(nt=!0,at);case"textInput":return _=S.data,_===at&&nt?null:_;default:return null}}function dt(_,S){if(pt)return _==="compositionend"||!we&&He(_,S)?(_=xl(),Gi=Kl=Is=null,pt=!1,_):null;switch(_){case"paste":return null;case"keypress":if(!(S.ctrlKey||S.altKey||S.metaKey)||S.ctrlKey&&S.altKey){if(S.char&&1<S.char.length)return S.char;if(S.which)return String.fromCharCode(S.which)}return null;case"compositionend":return Je&&S.locale!=="ko"?null:S.data;default:return null}}var ft={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ar(_){var S=_&&_.nodeName&&_.nodeName.toLowerCase();return S==="input"?!!ft[_.type]:S==="textarea"}function wr(_,S,L,H){vt(H),S=$d(S,"onChange"),0<S.length&&(L=new bl("onChange","change",null,L,H),_.push({event:L,listeners:S}))}var sr=null,lr=null;function kr(_){tc(_,0)}function tn(_){var S=oi(_);if(xe(S))return _}function Un(_,S){if(_==="change")return S}var In=!1;if(a){var _n;if(a){var Vn="oninput"in document;if(!Vn){var xi=document.createElement("div");xi.setAttribute("oninput","return;"),Vn=typeof xi.oninput=="function"}_n=Vn}else _n=!1;In=_n&&(!document.documentMode||9<document.documentMode)}function Kr(){sr&&(sr.detachEvent("onpropertychange",Mn),lr=sr=null)}function Mn(_){if(_.propertyName==="value"&&tn(lr)){var S=[];wr(S,lr,_,Ce(_)),Ut(kr,S)}}function rn(_,S,L){_==="focusin"?(Kr(),sr=S,lr=L,sr.attachEvent("onpropertychange",Mn)):_==="focusout"&&Kr()}function bi(_){if(_==="selectionchange"||_==="keyup"||_==="keydown")return tn(lr)}function jn(_,S){if(_==="click")return tn(S)}function Hr(_,S){if(_==="input"||_==="change")return tn(S)}function An(_,S){return _===S&&(_!==0||1/_===1/S)||_!==_&&S!==S}var mn=typeof Object.is=="function"?Object.is:An;function Ks(_,S){if(mn(_,S))return!0;if(typeof _!="object"||_===null||typeof S!="object"||S===null)return!1;var L=Object.keys(_),H=Object.keys(S);if(L.length!==H.length)return!1;for(H=0;H<L.length;H++){var te=L[H];if(!l.call(S,te)||!mn(_[te],S[te]))return!1}return!0}function bo(_){for(;_&&_.firstChild;)_=_.firstChild;return _}function rs(_,S){var L=bo(_);_=0;for(var H;L;){if(L.nodeType===3){if(H=_+L.textContent.length,_<=S&&H>=S)return{node:L,offset:S-_};_=H}e:{for(;L;){if(L.nextSibling){L=L.nextSibling;break e}L=L.parentNode}L=void 0}L=bo(L)}}function eu(_,S){return _&&S?_===S?!0:_&&_.nodeType===3?!1:S&&S.nodeType===3?eu(_,S.parentNode):"contains"in _?_.contains(S):_.compareDocumentPosition?!!(_.compareDocumentPosition(S)&16):!1:!1}function qn(){for(var _=window,S=ve();S instanceof _.HTMLIFrameElement;){try{var L=typeof S.contentWindow.location.href=="string"}catch{L=!1}if(L)_=S.contentWindow;else break;S=ve(_.document)}return S}function Pi(_){var S=_&&_.nodeName&&_.nodeName.toLowerCase();return S&&(S==="input"&&(_.type==="text"||_.type==="search"||_.type==="tel"||_.type==="url"||_.type==="password")||S==="textarea"||_.contentEditable==="true")}function Ii(_){var S=qn(),L=_.focusedElem,H=_.selectionRange;if(S!==L&&L&&L.ownerDocument&&eu(L.ownerDocument.documentElement,L)){if(H!==null&&Pi(L)){if(S=H.start,_=H.end,_===void 0&&(_=S),"selectionStart"in L)L.selectionStart=S,L.selectionEnd=Math.min(_,L.value.length);else if(_=(S=L.ownerDocument||document)&&S.defaultView||window,_.getSelection){_=_.getSelection();var te=L.textContent.length,oe=Math.min(H.start,te);H=H.end===void 0?oe:Math.min(H.end,te),!_.extend&&oe>H&&(te=H,H=oe,oe=te),te=rs(L,oe);var Ee=rs(L,H);te&&Ee&&(_.rangeCount!==1||_.anchorNode!==te.node||_.anchorOffset!==te.offset||_.focusNode!==Ee.node||_.focusOffset!==Ee.offset)&&(S=S.createRange(),S.setStart(te.node,te.offset),_.removeAllRanges(),oe>H?(_.addRange(S),_.extend(Ee.node,Ee.offset)):(S.setEnd(Ee.node,Ee.offset),_.addRange(S)))}}for(S=[],_=L;_=_.parentNode;)_.nodeType===1&&S.push({element:_,left:_.scrollLeft,top:_.scrollTop});for(typeof L.focus=="function"&&L.focus(),L=0;L<S.length;L++)_=S[L],_.element.scrollLeft=_.left,_.element.scrollTop=_.top}}var Wd=a&&"documentMode"in document&&11>=document.documentMode,xa=null,tu=null,$c=null,ji=!1;function Xd(_,S,L){var H=L.window===L?L.document:L.nodeType===9?L:L.ownerDocument;ji||xa==null||xa!==ve(H)||(H=xa,"selectionStart"in H&&Pi(H)?H={start:H.selectionStart,end:H.selectionEnd}:(H=(H.ownerDocument&&H.ownerDocument.defaultView||window).getSelection(),H={anchorNode:H.anchorNode,anchorOffset:H.anchorOffset,focusNode:H.focusNode,focusOffset:H.focusOffset}),$c&&Ks($c,H)||($c=H,H=$d(tu,"onSelect"),0<H.length&&(S=new bl("onSelect","select",null,S,L),_.push({event:S,listeners:H}),S.target=xa)))}function ec(_,S){var L={};return L[_.toLowerCase()]=S.toLowerCase(),L["Webkit"+_]="webkit"+S,L["Moz"+_]="moz"+S,L}var Sl={animationend:ec("Animation","AnimationEnd"),animationiteration:ec("Animation","AnimationIteration"),animationstart:ec("Animation","AnimationStart"),transitionend:ec("Transition","TransitionEnd")},Ho={},zo={};a&&(zo=document.createElement("div").style,"AnimationEvent"in window||(delete Sl.animationend.animation,delete Sl.animationiteration.animation,delete Sl.animationstart.animation),"TransitionEvent"in window||delete Sl.transitionend.transition);function ba(_){if(Ho[_])return Ho[_];if(!Sl[_])return _;var S=Sl[_],L;for(L in S)if(S.hasOwnProperty(L)&&L in zo)return Ho[_]=S[L];return _}var ef=ba("animationend"),tf=ba("animationiteration"),Bp=ba("animationstart"),kp=ba("transitionend"),Op=new Map,Fp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ha(_,S){Op.set(_,S),o(S,[_])}for(var Yd=0;Yd<Fp.length;Yd++){var rf=Fp[Yd],nf=rf.toLowerCase(),$g=rf[0].toUpperCase()+rf.slice(1);Ha(nf,"on"+$g)}Ha(ef,"onAnimationEnd"),Ha(tf,"onAnimationIteration"),Ha(Bp,"onAnimationStart"),Ha("dblclick","onDoubleClick"),Ha("focusin","onFocus"),Ha("focusout","onBlur"),Ha(kp,"onTransitionEnd"),s("onMouseEnter",["mouseout","mouseover"]),s("onMouseLeave",["mouseout","mouseover"]),s("onPointerEnter",["pointerout","pointerover"]),s("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ml="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qd=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ml));function Jd(_,S,L){var H=_.type||"unknown-event";_.currentTarget=L,un(H,S,void 0,_),_.currentTarget=null}function tc(_,S){S=(S&4)!==0;for(var L=0;L<_.length;L++){var H=_[L],te=H.event;H=H.listeners;e:{var oe=void 0;if(S)for(var Ee=H.length-1;0<=Ee;Ee--){var Ve=H[Ee],tt=Ve.instance,_t=Ve.currentTarget;if(Ve=Ve.listener,tt!==oe&&te.isPropagationStopped())break e;Jd(te,Ve,_t),oe=tt}else for(Ee=0;Ee<H.length;Ee++){if(Ve=H[Ee],tt=Ve.instance,_t=Ve.currentTarget,Ve=Ve.listener,tt!==oe&&te.isPropagationStopped())break e;Jd(te,Ve,_t),oe=tt}}}if(cr)throw _=en,cr=!1,en=null,_}function kn(_,S){var L=S[iu];L===void 0&&(L=S[iu]=new Set);var H=_+"__bubble";L.has(H)||(Qd(S,_,2,!1),L.add(H))}function Kd(_,S,L){var H=0;S&&(H|=4),Qd(L,_,H,S)}var sf="_reactListening"+Math.random().toString(36).slice(2);function rc(_){if(!_[sf]){_[sf]=!0,r.forEach(function(L){L!=="selectionchange"&&(qd.has(L)||Kd(L,!1,_),Kd(L,!0,_))});var S=_.nodeType===9?_:_.ownerDocument;S===null||S[sf]||(S[sf]=!0,Kd("selectionchange",!1,S))}}function Qd(_,S,L,H){switch(Qc(S)){case 1:var te=Ga;break;case 4:te=Ju;break;default:te=ql}L=te.bind(null,S,L,_),te=void 0,!Pt||S!=="touchstart"&&S!=="touchmove"&&S!=="wheel"||(te=!0),H?te!==void 0?_.addEventListener(S,L,{capture:!0,passive:te}):_.addEventListener(S,L,!0):te!==void 0?_.addEventListener(S,L,{passive:te}):_.addEventListener(S,L,!1)}function Zd(_,S,L,H,te){var oe=H;if(!(S&1)&&!(S&2)&&H!==null)e:for(;;){if(H===null)return;var Ee=H.tag;if(Ee===3||Ee===4){var Ve=H.stateNode.containerInfo;if(Ve===te||Ve.nodeType===8&&Ve.parentNode===te)break;if(Ee===4)for(Ee=H.return;Ee!==null;){var tt=Ee.tag;if((tt===3||tt===4)&&(tt=Ee.stateNode.containerInfo,tt===te||tt.nodeType===8&&tt.parentNode===te))return;Ee=Ee.return}for(;Ve!==null;){if(Ee=Al(Ve),Ee===null)return;if(tt=Ee.tag,tt===5||tt===6){H=oe=Ee;continue e}Ve=Ve.parentNode}}H=H.return}Ut(function(){var _t=oe,kt=Ce(L),Nt=[];e:{var Lt=Op.get(_);if(Lt!==void 0){var or=bl,pr=_;switch(_){case"keypress":if(pa(L)===0)break e;case"keydown":case"keyup":or=$l;break;case"focusin":pr="focus",or=Go;break;case"focusout":pr="blur",or=Go;break;case"beforeblur":case"afterblur":or=Go;break;case"click":if(L.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":or=xo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":or=va;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":or=k;break;case ef:case tf:case Bp:or=Hd;break;case kp:or=z;break;case"scroll":or=ya;break;case"wheel":or=se;break;case"copy":case"cut":case"paste":or=Qu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":or=Hi}var gr=(S&4)!==0,Si=!gr&&_==="scroll",mt=gr?Lt!==null?Lt+"Capture":null:Lt;gr=[];for(var st=_t,gt;st!==null;){gt=st;var Vt=gt.stateNode;if(gt.tag===5&&Vt!==null&&(gt=Vt,mt!==null&&(Vt=Yt(st,mt),Vt!=null&&gr.push(nc(st,Vt,gt)))),Si)break;st=st.return}0<gr.length&&(Lt=new or(Lt,pr,null,L,kt),Nt.push({event:Lt,listeners:gr}))}}if(!(S&7)){e:{if(Lt=_==="mouseover"||_==="pointerover",or=_==="mouseout"||_==="pointerout",Lt&&L!==ot&&(pr=L.relatedTarget||L.fromElement)&&(Al(pr)||pr[Qs]))break e;if((or||Lt)&&(Lt=kt.window===kt?kt:(Lt=kt.ownerDocument)?Lt.defaultView||Lt.parentWindow:window,or?(pr=L.relatedTarget||L.toElement,or=_t,pr=pr?Al(pr):null,pr!==null&&(Si=jr(pr),pr!==Si||pr.tag!==5&&pr.tag!==6)&&(pr=null)):(or=null,pr=_t),or!==pr)){if(gr=xo,Vt="onMouseLeave",mt="onMouseEnter",st="mouse",(_==="pointerout"||_==="pointerover")&&(gr=Hi,Vt="onPointerLeave",mt="onPointerEnter",st="pointer"),Si=or==null?Lt:oi(or),gt=pr==null?Lt:oi(pr),Lt=new gr(Vt,st+"leave",or,L,kt),Lt.target=Si,Lt.relatedTarget=gt,Vt=null,Al(kt)===_t&&(gr=new gr(mt,st+"enter",pr,L,kt),gr.target=gt,gr.relatedTarget=Si,Vt=gr),Si=Vt,or&&pr)t:{for(gr=or,mt=pr,st=0,gt=gr;gt;gt=ru(gt))st++;for(gt=0,Vt=mt;Vt;Vt=ru(Vt))gt++;for(;0<st-gt;)gr=ru(gr),st--;for(;0<gt-st;)mt=ru(mt),gt--;for(;st--;){if(gr===mt||mt!==null&&gr===mt.alternate)break t;gr=ru(gr),mt=ru(mt)}gr=null}else gr=null;or!==null&&ey(Nt,Lt,or,gr,!1),pr!==null&&Si!==null&&ey(Nt,Si,pr,gr,!0)}}e:{if(Lt=_t?oi(_t):window,or=Lt.nodeName&&Lt.nodeName.toLowerCase(),or==="select"||or==="input"&&Lt.type==="file")var xr=Un;else if(ar(Lt))if(In)xr=Hr;else{xr=bi;var Ar=rn}else(or=Lt.nodeName)&&or.toLowerCase()==="input"&&(Lt.type==="checkbox"||Lt.type==="radio")&&(xr=jn);if(xr&&(xr=xr(_,_t))){wr(Nt,xr,L,kt);break e}Ar&&Ar(_,Lt,_t),_==="focusout"&&(Ar=Lt._wrapperState)&&Ar.controlled&&Lt.type==="number"&&Ue(Lt,"number",Lt.value)}switch(Ar=_t?oi(_t):window,_){case"focusin":(ar(Ar)||Ar.contentEditable==="true")&&(xa=Ar,tu=_t,$c=null);break;case"focusout":$c=tu=xa=null;break;case"mousedown":ji=!0;break;case"contextmenu":case"mouseup":case"dragend":ji=!1,Xd(Nt,L,kt);break;case"selectionchange":if(Wd)break;case"keydown":case"keyup":Xd(Nt,L,kt)}var Er;if(we)e:{switch(_){case"compositionstart":var Ir="onCompositionStart";break e;case"compositionend":Ir="onCompositionEnd";break e;case"compositionupdate":Ir="onCompositionUpdate";break e}Ir=void 0}else pt?He(_,L)&&(Ir="onCompositionEnd"):_==="keydown"&&L.keyCode===229&&(Ir="onCompositionStart");Ir&&(Je&&L.locale!=="ko"&&(pt||Ir!=="onCompositionStart"?Ir==="onCompositionEnd"&&pt&&(Er=xl()):(Is=kt,Kl="value"in Is?Is.value:Is.textContent,pt=!0)),Ar=$d(_t,Ir),0<Ar.length&&(Ir=new _s(Ir,_,null,L,kt),Nt.push({event:Ir,listeners:Ar}),Er?Ir.data=Er:(Er=Et(L),Er!==null&&(Ir.data=Er)))),(Er=Ie?xt(_,L):dt(_,L))&&(_t=$d(_t,"onBeforeInput"),0<_t.length&&(kt=new _s("onBeforeInput","beforeinput",null,L,kt),Nt.push({event:kt,listeners:_t}),kt.data=Er))}tc(Nt,S)})}function nc(_,S,L){return{instance:_,listener:S,currentTarget:L}}function $d(_,S){for(var L=S+"Capture",H=[];_!==null;){var te=_,oe=te.stateNode;te.tag===5&&oe!==null&&(te=oe,oe=Yt(_,L),oe!=null&&H.unshift(nc(_,oe,te)),oe=Yt(_,S),oe!=null&&H.push(nc(_,oe,te))),_=_.return}return H}function ru(_){if(_===null)return null;do _=_.return;while(_&&_.tag!==5);return _||null}function ey(_,S,L,H,te){for(var oe=S._reactName,Ee=[];L!==null&&L!==H;){var Ve=L,tt=Ve.alternate,_t=Ve.stateNode;if(tt!==null&&tt===H)break;Ve.tag===5&&_t!==null&&(Ve=_t,te?(tt=Yt(L,oe),tt!=null&&Ee.unshift(nc(L,tt,Ve))):te||(tt=Yt(L,oe),tt!=null&&Ee.push(nc(L,tt,Ve)))),L=L.return}Ee.length!==0&&_.push({event:S,listeners:Ee})}var z_=/\r\n?/g,ty=/\u0000|\uFFFD/g;function Np(_){return(typeof _=="string"?_:""+_).replace(z_,`
`).replace(ty,"")}function of(_,S,L){if(S=Np(S),Np(_)!==S&&L)throw Error(n(425))}function af(){}var ic=null,Up=null;function Gp(_,S){return _==="textarea"||_==="noscript"||typeof S.children=="string"||typeof S.children=="number"||typeof S.dangerouslySetInnerHTML=="object"&&S.dangerouslySetInnerHTML!==null&&S.dangerouslySetInnerHTML.__html!=null}var Hp=typeof setTimeout=="function"?setTimeout:void 0,zp=typeof clearTimeout=="function"?clearTimeout:void 0,eh=typeof Promise=="function"?Promise:void 0,V_=typeof queueMicrotask=="function"?queueMicrotask:typeof eh<"u"?function(_){return eh.resolve(null).then(_).catch(ry)}:Hp;function ry(_){setTimeout(function(){throw _})}function th(_,S){var L=S,H=0;do{var te=L.nextSibling;if(_.removeChild(L),te&&te.nodeType===8)if(L=te.data,L==="/$"){if(H===0){_.removeChild(te),Uo(S);return}H--}else L!=="$"&&L!=="$?"&&L!=="$!"||H++;L=te}while(L);Uo(S)}function za(_){for(;_!=null;_=_.nextSibling){var S=_.nodeType;if(S===1||S===3)break;if(S===8){if(S=_.data,S==="$"||S==="$!"||S==="$?")break;if(S==="/$")return null}}return _}function Vp(_){_=_.previousSibling;for(var S=0;_;){if(_.nodeType===8){var L=_.data;if(L==="$"||L==="$!"||L==="$?"){if(S===0)return _;S--}else L==="/$"&&S++}_=_.previousSibling}return null}var nu=Math.random().toString(36).slice(2),wi="__reactFiber$"+nu,sc="__reactProps$"+nu,Qs="__reactContainer$"+nu,iu="__reactEvents$"+nu,rh="__reactListeners$"+nu,nh="__reactHandles$"+nu;function Al(_){var S=_[wi];if(S)return S;for(var L=_.parentNode;L;){if(S=L[Qs]||L[wi]){if(L=S.alternate,S.child!==null||L!==null&&L.child!==null)for(_=Vp(_);_!==null;){if(L=_[wi])return L;_=Vp(_)}return S}_=L,L=_.parentNode}return null}function Va(_){return _=_[wi]||_[Qs],!_||_.tag!==5&&_.tag!==6&&_.tag!==13&&_.tag!==3?null:_}function oi(_){if(_.tag===5||_.tag===6)return _.stateNode;throw Error(n(33))}function ih(_){return _[sc]||null}var Wp=[],Li=-1;function Kn(_){return{current:_}}function On(_){0>Li||(_.current=Wp[Li],Wp[Li]=null,Li--)}function Ln(_,S){Li++,Wp[Li]=_.current,_.current=S}var Wa={},zi=Kn(Wa),xs=Kn(!1),Xa=Wa;function su(_,S){var L=_.type.contextTypes;if(!L)return Wa;var H=_.stateNode;if(H&&H.__reactInternalMemoizedUnmaskedChildContext===S)return H.__reactInternalMemoizedMaskedChildContext;var te={},oe;for(oe in L)te[oe]=S[oe];return H&&(_=_.stateNode,_.__reactInternalMemoizedUnmaskedChildContext=S,_.__reactInternalMemoizedMaskedChildContext=te),te}function ns(_){return _=_.childContextTypes,_!=null}function lf(){On(xs),On(zi)}function Xp(_,S,L){if(zi.current!==Wa)throw Error(n(168));Ln(zi,S),Ln(xs,L)}function uf(_,S,L){var H=_.stateNode;if(S=S.childContextTypes,typeof H.getChildContext!="function")return L;H=H.getChildContext();for(var te in H)if(!(te in S))throw Error(n(108,ae(_)||"Unknown",te));return Y({},L,H)}function ou(_){return _=(_=_.stateNode)&&_.__reactInternalMemoizedMergedChildContext||Wa,Xa=zi.current,Ln(zi,_),Ln(xs,xs.current),!0}function Yp(_,S,L){var H=_.stateNode;if(!H)throw Error(n(169));L?(_=uf(_,S,Xa),H.__reactInternalMemoizedMergedChildContext=_,On(xs),On(zi),Ln(zi,_)):On(xs),Ln(xs,L)}var Vo=null,cf=!1,sh=!1;function ff(_){Vo===null?Vo=[_]:Vo.push(_)}function ny(_){cf=!0,ff(_)}function wa(){if(!sh&&Vo!==null){sh=!0;var _=0,S=Gr;try{var L=Vo;for(Gr=1;_<L.length;_++){var H=L[_];do H=H(!0);while(H!==null)}Vo=null,cf=!1}catch(te){throw Vo!==null&&(Vo=Vo.slice(_+1)),mr(St,wa),te}finally{Gr=S,sh=!1}}return null}var au=[],js=0,oh=null,ah=0,bs=[],Di=0,lu=null,qt=1,wo="";function Ya(_,S){au[js++]=ah,au[js++]=oh,oh=_,ah=S}function qp(_,S,L){bs[Di++]=qt,bs[Di++]=wo,bs[Di++]=lu,lu=_;var H=qt;_=wo;var te=32-Sr(H)-1;H&=~(1<<te),L+=1;var oe=32-Sr(S)+te;if(30<oe){var Ee=te-te%5;oe=(H&(1<<Ee)-1).toString(32),H>>=Ee,te-=Ee,qt=1<<32-Sr(S)+te|L<<te|H,wo=oe+_}else qt=1<<oe|L<<te|H,wo=_}function Jp(_){_.return!==null&&(Ya(_,1),qp(_,1,0))}function qa(_){for(;_===oh;)oh=au[--js],au[js]=null,ah=au[--js],au[js]=null;for(;_===lu;)lu=bs[--Di],bs[Di]=null,wo=bs[--Di],bs[Di]=null,qt=bs[--Di],bs[Di]=null}var Vi=null,ws=null,Gn=!1,So=null;function Kp(_,S){var L=Ta(5,null,null,0);L.elementType="DELETED",L.stateNode=S,L.return=_,S=_.deletions,S===null?(_.deletions=[L],_.flags|=16):S.push(L)}function Qp(_,S){switch(_.tag){case 5:var L=_.type;return S=S.nodeType!==1||L.toLowerCase()!==S.nodeName.toLowerCase()?null:S,S!==null?(_.stateNode=S,Vi=_,ws=za(S.firstChild),!0):!1;case 6:return S=_.pendingProps===""||S.nodeType!==3?null:S,S!==null?(_.stateNode=S,Vi=_,ws=null,!0):!1;case 13:return S=S.nodeType!==8?null:S,S!==null?(L=lu!==null?{id:qt,overflow:wo}:null,_.memoizedState={dehydrated:S,treeContext:L,retryLane:1073741824},L=Ta(18,null,null,0),L.stateNode=S,L.return=_,_.child=L,Vi=_,ws=null,!0):!1;default:return!1}}function lh(_){return(_.mode&1)!==0&&(_.flags&128)===0}function uh(_){if(Gn){var S=ws;if(S){var L=S;if(!Qp(_,S)){if(lh(_))throw Error(n(418));S=za(L.nextSibling);var H=Vi;S&&Qp(_,S)?Kp(H,L):(_.flags=_.flags&-4097|2,Gn=!1,Vi=_)}}else{if(lh(_))throw Error(n(418));_.flags=_.flags&-4097|2,Gn=!1,Vi=_}}}function ch(_){for(_=_.return;_!==null&&_.tag!==5&&_.tag!==3&&_.tag!==13;)_=_.return;Vi=_}function oc(_){if(_!==Vi)return!1;if(!Gn)return ch(_),Gn=!0,!1;var S;if((S=_.tag!==3)&&!(S=_.tag!==5)&&(S=_.type,S=S!=="head"&&S!=="body"&&!Gp(_.type,_.memoizedProps)),S&&(S=ws)){if(lh(_))throw Zp(),Error(n(418));for(;S;)Kp(_,S),S=za(S.nextSibling)}if(ch(_),_.tag===13){if(_=_.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(n(317));e:{for(_=_.nextSibling,S=0;_;){if(_.nodeType===8){var L=_.data;if(L==="/$"){if(S===0){ws=za(_.nextSibling);break e}S--}else L!=="$"&&L!=="$!"&&L!=="$?"||S++}_=_.nextSibling}ws=null}}else ws=Vi?za(_.stateNode.nextSibling):null;return!0}function Zp(){for(var _=ws;_;)_=za(_.nextSibling)}function El(){ws=Vi=null,Gn=!1}function ac(_){So===null?So=[_]:So.push(_)}var W_=w.ReactCurrentBatchConfig;function df(_,S,L){if(_=L.ref,_!==null&&typeof _!="function"&&typeof _!="object"){if(L._owner){if(L=L._owner,L){if(L.tag!==1)throw Error(n(309));var H=L.stateNode}if(!H)throw Error(n(147,_));var te=H,oe=""+_;return S!==null&&S.ref!==null&&typeof S.ref=="function"&&S.ref._stringRef===oe?S.ref:(S=function(Ee){var Ve=te.refs;Ee===null?delete Ve[oe]:Ve[oe]=Ee},S._stringRef=oe,S)}if(typeof _!="string")throw Error(n(284));if(!L._owner)throw Error(n(290,_))}return _}function hf(_,S){throw _=Object.prototype.toString.call(S),Error(n(31,_==="[object Object]"?"object with keys {"+Object.keys(S).join(", ")+"}":_))}function $p(_){var S=_._init;return S(_._payload)}function em(_){function S(mt,st){if(_){var gt=mt.deletions;gt===null?(mt.deletions=[st],mt.flags|=16):gt.push(st)}}function L(mt,st){if(!_)return null;for(;st!==null;)S(mt,st),st=st.sibling;return null}function H(mt,st){for(mt=new Map;st!==null;)st.key!==null?mt.set(st.key,st):mt.set(st.index,st),st=st.sibling;return mt}function te(mt,st){return mt=vc(mt,st),mt.index=0,mt.sibling=null,mt}function oe(mt,st,gt){return mt.index=gt,_?(gt=mt.alternate,gt!==null?(gt=gt.index,gt<st?(mt.flags|=2,st):gt):(mt.flags|=2,st)):(mt.flags|=1048576,st)}function Ee(mt){return _&&mt.alternate===null&&(mt.flags|=2),mt}function Ve(mt,st,gt,Vt){return st===null||st.tag!==6?(st=c1(gt,mt.mode,Vt),st.return=mt,st):(st=te(st,gt),st.return=mt,st)}function tt(mt,st,gt,Vt){var xr=gt.type;return xr===C?kt(mt,st,gt.props.children,Vt,gt.key):st!==null&&(st.elementType===xr||typeof xr=="object"&&xr!==null&&xr.$$typeof===J&&$p(xr)===st.type)?(Vt=te(st,gt.props),Vt.ref=df(mt,st,gt),Vt.return=mt,Vt):(Vt=Ey(gt.type,gt.key,gt.props,null,mt.mode,Vt),Vt.ref=df(mt,st,gt),Vt.return=mt,Vt)}function _t(mt,st,gt,Vt){return st===null||st.tag!==4||st.stateNode.containerInfo!==gt.containerInfo||st.stateNode.implementation!==gt.implementation?(st=f1(gt,mt.mode,Vt),st.return=mt,st):(st=te(st,gt.children||[]),st.return=mt,st)}function kt(mt,st,gt,Vt,xr){return st===null||st.tag!==7?(st=Pf(gt,mt.mode,Vt,xr),st.return=mt,st):(st=te(st,gt),st.return=mt,st)}function Nt(mt,st,gt){if(typeof st=="string"&&st!==""||typeof st=="number")return st=c1(""+st,mt.mode,gt),st.return=mt,st;if(typeof st=="object"&&st!==null){switch(st.$$typeof){case T:return gt=Ey(st.type,st.key,st.props,null,mt.mode,gt),gt.ref=df(mt,null,st),gt.return=mt,gt;case R:return st=f1(st,mt.mode,gt),st.return=mt,st;case J:var Vt=st._init;return Nt(mt,Vt(st._payload),gt)}if(Ge(st)||q(st))return st=Pf(st,mt.mode,gt,null),st.return=mt,st;hf(mt,st)}return null}function Lt(mt,st,gt,Vt){var xr=st!==null?st.key:null;if(typeof gt=="string"&&gt!==""||typeof gt=="number")return xr!==null?null:Ve(mt,st,""+gt,Vt);if(typeof gt=="object"&&gt!==null){switch(gt.$$typeof){case T:return gt.key===xr?tt(mt,st,gt,Vt):null;case R:return gt.key===xr?_t(mt,st,gt,Vt):null;case J:return xr=gt._init,Lt(mt,st,xr(gt._payload),Vt)}if(Ge(gt)||q(gt))return xr!==null?null:kt(mt,st,gt,Vt,null);hf(mt,gt)}return null}function or(mt,st,gt,Vt,xr){if(typeof Vt=="string"&&Vt!==""||typeof Vt=="number")return mt=mt.get(gt)||null,Ve(st,mt,""+Vt,xr);if(typeof Vt=="object"&&Vt!==null){switch(Vt.$$typeof){case T:return mt=mt.get(Vt.key===null?gt:Vt.key)||null,tt(st,mt,Vt,xr);case R:return mt=mt.get(Vt.key===null?gt:Vt.key)||null,_t(st,mt,Vt,xr);case J:var Ar=Vt._init;return or(mt,st,gt,Ar(Vt._payload),xr)}if(Ge(Vt)||q(Vt))return mt=mt.get(gt)||null,kt(st,mt,Vt,xr,null);hf(st,Vt)}return null}function pr(mt,st,gt,Vt){for(var xr=null,Ar=null,Er=st,Ir=st=0,as=null;Er!==null&&Ir<gt.length;Ir++){Er.index>Ir?(as=Er,Er=null):as=Er.sibling;var En=Lt(mt,Er,gt[Ir],Vt);if(En===null){Er===null&&(Er=as);break}_&&Er&&En.alternate===null&&S(mt,Er),st=oe(En,st,Ir),Ar===null?xr=En:Ar.sibling=En,Ar=En,Er=as}if(Ir===gt.length)return L(mt,Er),Gn&&Ya(mt,Ir),xr;if(Er===null){for(;Ir<gt.length;Ir++)Er=Nt(mt,gt[Ir],Vt),Er!==null&&(st=oe(Er,st,Ir),Ar===null?xr=Er:Ar.sibling=Er,Ar=Er);return Gn&&Ya(mt,Ir),xr}for(Er=H(mt,Er);Ir<gt.length;Ir++)as=or(Er,mt,Ir,gt[Ir],Vt),as!==null&&(_&&as.alternate!==null&&Er.delete(as.key===null?Ir:as.key),st=oe(as,st,Ir),Ar===null?xr=as:Ar.sibling=as,Ar=as);return _&&Er.forEach(function(_c){return S(mt,_c)}),Gn&&Ya(mt,Ir),xr}function gr(mt,st,gt,Vt){var xr=q(gt);if(typeof xr!="function")throw Error(n(150));if(gt=xr.call(gt),gt==null)throw Error(n(151));for(var Ar=xr=null,Er=st,Ir=st=0,as=null,En=gt.next();Er!==null&&!En.done;Ir++,En=gt.next()){Er.index>Ir?(as=Er,Er=null):as=Er.sibling;var _c=Lt(mt,Er,En.value,Vt);if(_c===null){Er===null&&(Er=as);break}_&&Er&&_c.alternate===null&&S(mt,Er),st=oe(_c,st,Ir),Ar===null?xr=_c:Ar.sibling=_c,Ar=_c,Er=as}if(En.done)return L(mt,Er),Gn&&Ya(mt,Ir),xr;if(Er===null){for(;!En.done;Ir++,En=gt.next())En=Nt(mt,En.value,Vt),En!==null&&(st=oe(En,st,Ir),Ar===null?xr=En:Ar.sibling=En,Ar=En);return Gn&&Ya(mt,Ir),xr}for(Er=H(mt,Er);!En.done;Ir++,En=gt.next())En=or(Er,mt,Ir,En.value,Vt),En!==null&&(_&&En.alternate!==null&&Er.delete(En.key===null?Ir:En.key),st=oe(En,st,Ir),Ar===null?xr=En:Ar.sibling=En,Ar=En);return _&&Er.forEach(function(rP){return S(mt,rP)}),Gn&&Ya(mt,Ir),xr}function Si(mt,st,gt,Vt){if(typeof gt=="object"&&gt!==null&&gt.type===C&&gt.key===null&&(gt=gt.props.children),typeof gt=="object"&&gt!==null){switch(gt.$$typeof){case T:e:{for(var xr=gt.key,Ar=st;Ar!==null;){if(Ar.key===xr){if(xr=gt.type,xr===C){if(Ar.tag===7){L(mt,Ar.sibling),st=te(Ar,gt.props.children),st.return=mt,mt=st;break e}}else if(Ar.elementType===xr||typeof xr=="object"&&xr!==null&&xr.$$typeof===J&&$p(xr)===Ar.type){L(mt,Ar.sibling),st=te(Ar,gt.props),st.ref=df(mt,Ar,gt),st.return=mt,mt=st;break e}L(mt,Ar);break}else S(mt,Ar);Ar=Ar.sibling}gt.type===C?(st=Pf(gt.props.children,mt.mode,Vt,gt.key),st.return=mt,mt=st):(Vt=Ey(gt.type,gt.key,gt.props,null,mt.mode,Vt),Vt.ref=df(mt,st,gt),Vt.return=mt,mt=Vt)}return Ee(mt);case R:e:{for(Ar=gt.key;st!==null;){if(st.key===Ar)if(st.tag===4&&st.stateNode.containerInfo===gt.containerInfo&&st.stateNode.implementation===gt.implementation){L(mt,st.sibling),st=te(st,gt.children||[]),st.return=mt,mt=st;break e}else{L(mt,st);break}else S(mt,st);st=st.sibling}st=f1(gt,mt.mode,Vt),st.return=mt,mt=st}return Ee(mt);case J:return Ar=gt._init,Si(mt,st,Ar(gt._payload),Vt)}if(Ge(gt))return pr(mt,st,gt,Vt);if(q(gt))return gr(mt,st,gt,Vt);hf(mt,gt)}return typeof gt=="string"&&gt!==""||typeof gt=="number"?(gt=""+gt,st!==null&&st.tag===6?(L(mt,st.sibling),st=te(st,gt),st.return=mt,mt=st):(L(mt,st),st=c1(gt,mt.mode,Vt),st.return=mt,mt=st),Ee(mt)):L(mt,st)}return Si}var uu=em(!0),pf=em(!1),cu=Kn(null),fu=null,Ja=null,lc=null;function du(){lc=Ja=fu=null}function mf(_){var S=cu.current;On(cu),_._currentValue=S}function gf(_,S,L){for(;_!==null;){var H=_.alternate;if((_.childLanes&S)!==S?(_.childLanes|=S,H!==null&&(H.childLanes|=S)):H!==null&&(H.childLanes&S)!==S&&(H.childLanes|=S),_===L)break;_=_.return}}function Tl(_,S){fu=_,lc=Ja=null,_=_.dependencies,_!==null&&_.firstContext!==null&&(_.lanes&S&&(Xr=!0),_.firstContext=null)}function Zs(_){var S=_._currentValue;if(lc!==_)if(_={context:_,memoizedValue:S,next:null},Ja===null){if(fu===null)throw Error(n(308));Ja=_,fu.dependencies={lanes:0,firstContext:_}}else Ja=Ja.next=_;return S}var Ka=null;function tm(_){Ka===null?Ka=[_]:Ka.push(_)}function yf(_,S,L,H){var te=S.interleaved;return te===null?(L.next=L,tm(S)):(L.next=te.next,te.next=L),S.interleaved=L,Wo(_,H)}function Wo(_,S){_.lanes|=S;var L=_.alternate;for(L!==null&&(L.lanes|=S),L=_,_=_.return;_!==null;)_.childLanes|=S,L=_.alternate,L!==null&&(L.childLanes|=S),L=_,_=_.return;return L.tag===3?L.stateNode:null}var Tn=!1;function zr(_){_.updateQueue={baseState:_.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ai(_,S){_=_.updateQueue,S.updateQueue===_&&(S.updateQueue={baseState:_.baseState,firstBaseUpdate:_.firstBaseUpdate,lastBaseUpdate:_.lastBaseUpdate,shared:_.shared,effects:_.effects})}function Cn(_,S){return{eventTime:_,lane:S,tag:0,payload:null,callback:null,next:null}}function Wn(_,S,L){var H=_.updateQueue;if(H===null)return null;if(H=H.shared,xn&2){var te=H.pending;return te===null?S.next=S:(S.next=te.next,te.next=S),H.pending=S,Wo(_,L)}return te=H.interleaved,te===null?(S.next=S,tm(H)):(S.next=te.next,te.next=S),H.interleaved=S,Wo(_,L)}function is(_,S,L){if(S=S.updateQueue,S!==null&&(S=S.shared,(L&4194240)!==0)){var H=S.lanes;H&=_.pendingLanes,L|=H,S.lanes=L,Bn(_,L)}}function hu(_,S){var L=_.updateQueue,H=_.alternate;if(H!==null&&(H=H.updateQueue,L===H)){var te=null,oe=null;if(L=L.firstBaseUpdate,L!==null){do{var Ee={eventTime:L.eventTime,lane:L.lane,tag:L.tag,payload:L.payload,callback:L.callback,next:null};oe===null?te=oe=Ee:oe=oe.next=Ee,L=L.next}while(L!==null);oe===null?te=oe=S:oe=oe.next=S}else te=oe=S;L={baseState:H.baseState,firstBaseUpdate:te,lastBaseUpdate:oe,shared:H.shared,effects:H.effects},_.updateQueue=L;return}_=L.lastBaseUpdate,_===null?L.firstBaseUpdate=S:_.next=S,L.lastBaseUpdate=S}function Qn(_,S,L,H){var te=_.updateQueue;Tn=!1;var oe=te.firstBaseUpdate,Ee=te.lastBaseUpdate,Ve=te.shared.pending;if(Ve!==null){te.shared.pending=null;var tt=Ve,_t=tt.next;tt.next=null,Ee===null?oe=_t:Ee.next=_t,Ee=tt;var kt=_.alternate;kt!==null&&(kt=kt.updateQueue,Ve=kt.lastBaseUpdate,Ve!==Ee&&(Ve===null?kt.firstBaseUpdate=_t:Ve.next=_t,kt.lastBaseUpdate=tt))}if(oe!==null){var Nt=te.baseState;Ee=0,kt=_t=tt=null,Ve=oe;do{var Lt=Ve.lane,or=Ve.eventTime;if((H&Lt)===Lt){kt!==null&&(kt=kt.next={eventTime:or,lane:0,tag:Ve.tag,payload:Ve.payload,callback:Ve.callback,next:null});e:{var pr=_,gr=Ve;switch(Lt=S,or=L,gr.tag){case 1:if(pr=gr.payload,typeof pr=="function"){Nt=pr.call(or,Nt,Lt);break e}Nt=pr;break e;case 3:pr.flags=pr.flags&-65537|128;case 0:if(pr=gr.payload,Lt=typeof pr=="function"?pr.call(or,Nt,Lt):pr,Lt==null)break e;Nt=Y({},Nt,Lt);break e;case 2:Tn=!0}}Ve.callback!==null&&Ve.lane!==0&&(_.flags|=64,Lt=te.effects,Lt===null?te.effects=[Ve]:Lt.push(Ve))}else or={eventTime:or,lane:Lt,tag:Ve.tag,payload:Ve.payload,callback:Ve.callback,next:null},kt===null?(_t=kt=or,tt=Nt):kt=kt.next=or,Ee|=Lt;if(Ve=Ve.next,Ve===null){if(Ve=te.shared.pending,Ve===null)break;Lt=Ve,Ve=Lt.next,Lt.next=null,te.lastBaseUpdate=Lt,te.shared.pending=null}}while(!0);if(kt===null&&(tt=Nt),te.baseState=tt,te.firstBaseUpdate=_t,te.lastBaseUpdate=kt,S=te.shared.interleaved,S!==null){te=S;do Ee|=te.lane,te=te.next;while(te!==S)}else oe===null&&(te.shared.lanes=0);Ef|=Ee,_.lanes=Ee,_.memoizedState=Nt}}function uc(_,S,L){if(_=S.effects,S.effects=null,_!==null)for(S=0;S<_.length;S++){var H=_[S],te=H.callback;if(te!==null){if(H.callback=null,H=L,typeof te!="function")throw Error(n(191,te));te.call(H)}}}var Sa={},$s=Kn(Sa),pu=Kn(Sa),Qa=Kn(Sa);function hi(_){if(_===Sa)throw Error(n(174));return _}function vf(_,S){switch(Ln(Qa,S),Ln(pu,_),Ln($s,Sa),_=S.nodeType,_){case 9:case 11:S=(S=S.documentElement)?S.namespaceURI:ht(null,"");break;default:_=_===8?S.parentNode:S,S=_.namespaceURI||null,_=_.tagName,S=ht(S,_)}On($s),Ln($s,S)}function Cl(){On($s),On(pu),On(Qa)}function mu(_){hi(Qa.current);var S=hi($s.current),L=ht(S,_.type);S!==L&&(Ln(pu,_),Ln($s,L))}function cc(_){pu.current===_&&(On($s),On(pu))}var Hn=Kn(0);function Xo(_){for(var S=_;S!==null;){if(S.tag===13){var L=S.memoizedState;if(L!==null&&(L=L.dehydrated,L===null||L.data==="$?"||L.data==="$!"))return S}else if(S.tag===19&&S.memoizedProps.revealOrder!==void 0){if(S.flags&128)return S}else if(S.child!==null){S.child.return=S,S=S.child;continue}if(S===_)break;for(;S.sibling===null;){if(S.return===null||S.return===_)return null;S=S.return}S.sibling.return=S.return,S=S.sibling}return null}var fc=[];function Ma(){for(var _=0;_<fc.length;_++)fc[_]._workInProgressVersionPrimary=null;fc.length=0}var gu=w.ReactCurrentDispatcher,yu=w.ReactCurrentBatchConfig,Za=0,Fn=null,Zn=null,gn=null,Yo=!1,ss=!1,Rl=0,Ls=0;function Wi(){throw Error(n(321))}function _f(_,S){if(S===null)return!1;for(var L=0;L<S.length&&L<_.length;L++)if(!mn(_[L],S[L]))return!1;return!0}function xf(_,S,L,H,te,oe){if(Za=oe,Fn=S,S.memoizedState=null,S.updateQueue=null,S.lanes=0,gu.current=_===null||_.memoizedState===null?cy:fy,_=L(H,te),ss){oe=0;do{if(ss=!1,Rl=0,25<=oe)throw Error(n(301));oe+=1,gn=Zn=null,S.updateQueue=null,gu.current=dy,_=L(H,te)}while(ss)}if(gu.current=yh,S=Zn!==null&&Zn.next!==null,Za=0,gn=Zn=Fn=null,Yo=!1,S)throw Error(n(300));return _}function rm(){var _=Rl!==0;return Rl=0,_}function Xi(){var _={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return gn===null?Fn.memoizedState=gn=_:gn=gn.next=_,gn}function eo(){if(Zn===null){var _=Fn.alternate;_=_!==null?_.memoizedState:null}else _=Zn.next;var S=gn===null?Fn.memoizedState:gn.next;if(S!==null)gn=S,Zn=_;else{if(_===null)throw Error(n(310));Zn=_,_={memoizedState:Zn.memoizedState,baseState:Zn.baseState,baseQueue:Zn.baseQueue,queue:Zn.queue,next:null},gn===null?Fn.memoizedState=gn=_:gn=gn.next=_}return gn}function dc(_,S){return typeof S=="function"?S(_):S}function bf(_){var S=eo(),L=S.queue;if(L===null)throw Error(n(311));L.lastRenderedReducer=_;var H=Zn,te=H.baseQueue,oe=L.pending;if(oe!==null){if(te!==null){var Ee=te.next;te.next=oe.next,oe.next=Ee}H.baseQueue=te=oe,L.pending=null}if(te!==null){oe=te.next,H=H.baseState;var Ve=Ee=null,tt=null,_t=oe;do{var kt=_t.lane;if((Za&kt)===kt)tt!==null&&(tt=tt.next={lane:0,action:_t.action,hasEagerState:_t.hasEagerState,eagerState:_t.eagerState,next:null}),H=_t.hasEagerState?_t.eagerState:_(H,_t.action);else{var Nt={lane:kt,action:_t.action,hasEagerState:_t.hasEagerState,eagerState:_t.eagerState,next:null};tt===null?(Ve=tt=Nt,Ee=H):tt=tt.next=Nt,Fn.lanes|=kt,Ef|=kt}_t=_t.next}while(_t!==null&&_t!==oe);tt===null?Ee=H:tt.next=Ve,mn(H,S.memoizedState)||(Xr=!0),S.memoizedState=H,S.baseState=Ee,S.baseQueue=tt,L.lastRenderedState=H}if(_=L.interleaved,_!==null){te=_;do oe=te.lane,Fn.lanes|=oe,Ef|=oe,te=te.next;while(te!==_)}else te===null&&(L.lanes=0);return[S.memoizedState,L.dispatch]}function $a(_){var S=eo(),L=S.queue;if(L===null)throw Error(n(311));L.lastRenderedReducer=_;var H=L.dispatch,te=L.pending,oe=S.memoizedState;if(te!==null){L.pending=null;var Ee=te=te.next;do oe=_(oe,Ee.action),Ee=Ee.next;while(Ee!==te);mn(oe,S.memoizedState)||(Xr=!0),S.memoizedState=oe,S.baseQueue===null&&(S.baseState=oe),L.lastRenderedState=oe}return[oe,H]}function nm(){}function im(_,S){var L=Fn,H=eo(),te=S(),oe=!mn(H.memoizedState,te);if(oe&&(H.memoizedState=te,Xr=!0),H=H.queue,am(iy.bind(null,L,H,_),[_]),H.getSnapshot!==S||oe||gn!==null&&gn.memoizedState.tag&1){if(L.flags|=2048,qo(9,wf.bind(null,L,H,te,S),void 0,null),os===null)throw Error(n(349));Za&30||fh(L,S,te)}return te}function fh(_,S,L){_.flags|=16384,_={getSnapshot:S,value:L},S=Fn.updateQueue,S===null?(S={lastEffect:null,stores:null},Fn.updateQueue=S,S.stores=[_]):(L=S.stores,L===null?S.stores=[_]:L.push(_))}function wf(_,S,L,H){S.value=L,S.getSnapshot=H,sy(S)&&sm(_)}function iy(_,S,L){return L(function(){sy(S)&&sm(_)})}function sy(_){var S=_.getSnapshot;_=_.value;try{var L=S();return!mn(_,L)}catch{return!0}}function sm(_){var S=Wo(_,1);S!==null&&il(S,_,1,-1)}function om(_){var S=Xi();return typeof _=="function"&&(_=_()),S.memoizedState=S.baseState=_,_={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:dc,lastRenderedState:_},S.queue=_,_=_.dispatch=vu.bind(null,Fn,_),[S.memoizedState,_]}function qo(_,S,L,H){return _={tag:_,create:S,destroy:L,deps:H,next:null},S=Fn.updateQueue,S===null?(S={lastEffect:null,stores:null},Fn.updateQueue=S,S.lastEffect=_.next=_):(L=S.lastEffect,L===null?S.lastEffect=_.next=_:(H=L.next,L.next=_,_.next=H,S.lastEffect=_)),_}function oy(){return eo().memoizedState}function Aa(_,S,L,H){var te=Xi();Fn.flags|=_,te.memoizedState=qo(1|S,L,void 0,H===void 0?null:H)}function Sf(_,S,L,H){var te=eo();H=H===void 0?null:H;var oe=void 0;if(Zn!==null){var Ee=Zn.memoizedState;if(oe=Ee.destroy,H!==null&&_f(H,Ee.deps)){te.memoizedState=qo(S,L,oe,H);return}}Fn.flags|=_,te.memoizedState=qo(1|S,L,oe,H)}function Ss(_,S){return Aa(8390656,8,_,S)}function am(_,S){return Sf(2048,8,_,S)}function lm(_,S){return Sf(4,2,_,S)}function ay(_,S){return Sf(4,4,_,S)}function ly(_,S){if(typeof S=="function")return _=_(),S(_),function(){S(null)};if(S!=null)return _=_(),S.current=_,function(){S.current=null}}function um(_,S,L){return L=L!=null?L.concat([_]):null,Sf(4,4,ly.bind(null,S,_),L)}function dh(){}function uy(_,S){var L=eo();S=S===void 0?null:S;var H=L.memoizedState;return H!==null&&S!==null&&_f(S,H[1])?H[0]:(L.memoizedState=[_,S],_)}function to(_,S){var L=eo();S=S===void 0?null:S;var H=L.memoizedState;return H!==null&&S!==null&&_f(S,H[1])?H[0]:(_=_(),L.memoizedState=[_,S],_)}function hh(_,S,L){return Za&21?(mn(L,S)||(L=Jr(),Fn.lanes|=L,Ef|=L,_.baseState=!0),S):(_.baseState&&(_.baseState=!1,Xr=!0),_.memoizedState=L)}function X_(_,S){var L=Gr;Gr=L!==0&&4>L?L:4,_(!0);var H=yu.transition;yu.transition={};try{_(!1),S()}finally{Gr=L,yu.transition=H}}function el(){return eo().memoizedState}function ph(_,S,L){var H=gc(_);if(L={lane:H,action:L,hasEagerState:!1,eagerState:null,next:null},Mf(_))mh(S,L);else if(L=yf(_,S,L,H),L!==null){var te=no();il(L,_,H,te),gh(L,S,H)}}function vu(_,S,L){var H=gc(_),te={lane:H,action:L,hasEagerState:!1,eagerState:null,next:null};if(Mf(_))mh(S,te);else{var oe=_.alternate;if(_.lanes===0&&(oe===null||oe.lanes===0)&&(oe=S.lastRenderedReducer,oe!==null))try{var Ee=S.lastRenderedState,Ve=oe(Ee,L);if(te.hasEagerState=!0,te.eagerState=Ve,mn(Ve,Ee)){var tt=S.interleaved;tt===null?(te.next=te,tm(S)):(te.next=tt.next,tt.next=te),S.interleaved=te;return}}catch{}finally{}L=yf(_,S,te,H),L!==null&&(te=no(),il(L,_,H,te),gh(L,S,H))}}function Mf(_){var S=_.alternate;return _===Fn||S!==null&&S===Fn}function mh(_,S){ss=Yo=!0;var L=_.pending;L===null?S.next=S:(S.next=L.next,L.next=S),_.pending=S}function gh(_,S,L){if(L&4194240){var H=S.lanes;H&=_.pendingLanes,L|=H,S.lanes=L,Bn(_,L)}}var yh={readContext:Zs,useCallback:Wi,useContext:Wi,useEffect:Wi,useImperativeHandle:Wi,useInsertionEffect:Wi,useLayoutEffect:Wi,useMemo:Wi,useReducer:Wi,useRef:Wi,useState:Wi,useDebugValue:Wi,useDeferredValue:Wi,useTransition:Wi,useMutableSource:Wi,useSyncExternalStore:Wi,useId:Wi,unstable_isNewReconciler:!1},cy={readContext:Zs,useCallback:function(_,S){return Xi().memoizedState=[_,S===void 0?null:S],_},useContext:Zs,useEffect:Ss,useImperativeHandle:function(_,S,L){return L=L!=null?L.concat([_]):null,Aa(4194308,4,ly.bind(null,S,_),L)},useLayoutEffect:function(_,S){return Aa(4194308,4,_,S)},useInsertionEffect:function(_,S){return Aa(4,2,_,S)},useMemo:function(_,S){var L=Xi();return S=S===void 0?null:S,_=_(),L.memoizedState=[_,S],_},useReducer:function(_,S,L){var H=Xi();return S=L!==void 0?L(S):S,H.memoizedState=H.baseState=S,_={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_,lastRenderedState:S},H.queue=_,_=_.dispatch=ph.bind(null,Fn,_),[H.memoizedState,_]},useRef:function(_){var S=Xi();return _={current:_},S.memoizedState=_},useState:om,useDebugValue:dh,useDeferredValue:function(_){return Xi().memoizedState=_},useTransition:function(){var _=om(!1),S=_[0];return _=X_.bind(null,_[1]),Xi().memoizedState=_,[S,_]},useMutableSource:function(){},useSyncExternalStore:function(_,S,L){var H=Fn,te=Xi();if(Gn){if(L===void 0)throw Error(n(407));L=L()}else{if(L=S(),os===null)throw Error(n(349));Za&30||fh(H,S,L)}te.memoizedState=L;var oe={value:L,getSnapshot:S};return te.queue=oe,Ss(iy.bind(null,H,oe,_),[_]),H.flags|=2048,qo(9,wf.bind(null,H,oe,L,S),void 0,null),L},useId:function(){var _=Xi(),S=os.identifierPrefix;if(Gn){var L=wo,H=qt;L=(H&~(1<<32-Sr(H)-1)).toString(32)+L,S=":"+S+"R"+L,L=Rl++,0<L&&(S+="H"+L.toString(32)),S+=":"}else L=Ls++,S=":"+S+"r"+L.toString(32)+":";return _.memoizedState=S},unstable_isNewReconciler:!1},fy={readContext:Zs,useCallback:uy,useContext:Zs,useEffect:am,useImperativeHandle:um,useInsertionEffect:lm,useLayoutEffect:ay,useMemo:to,useReducer:bf,useRef:oy,useState:function(){return bf(dc)},useDebugValue:dh,useDeferredValue:function(_){var S=eo();return hh(S,Zn.memoizedState,_)},useTransition:function(){var _=bf(dc)[0],S=eo().memoizedState;return[_,S]},useMutableSource:nm,useSyncExternalStore:im,useId:el,unstable_isNewReconciler:!1},dy={readContext:Zs,useCallback:uy,useContext:Zs,useEffect:am,useImperativeHandle:um,useInsertionEffect:lm,useLayoutEffect:ay,useMemo:to,useReducer:$a,useRef:oy,useState:function(){return $a(dc)},useDebugValue:dh,useDeferredValue:function(_){var S=eo();return Zn===null?S.memoizedState=_:hh(S,Zn.memoizedState,_)},useTransition:function(){var _=$a(dc)[0],S=eo().memoizedState;return[_,S]},useMutableSource:nm,useSyncExternalStore:im,useId:el,unstable_isNewReconciler:!1};function Mo(_,S){if(_&&_.defaultProps){S=Y({},S),_=_.defaultProps;for(var L in _)S[L]===void 0&&(S[L]=_[L]);return S}return S}function Af(_,S,L,H){S=_.memoizedState,L=L(H,S),L=L==null?S:Y({},S,L),_.memoizedState=L,_.lanes===0&&(_.updateQueue.baseState=L)}var vh={isMounted:function(_){return(_=_._reactInternals)?jr(_)===_:!1},enqueueSetState:function(_,S,L){_=_._reactInternals;var H=no(),te=gc(_),oe=Cn(H,te);oe.payload=S,L!=null&&(oe.callback=L),S=Wn(_,oe,te),S!==null&&(il(S,_,te,H),is(S,_,te))},enqueueReplaceState:function(_,S,L){_=_._reactInternals;var H=no(),te=gc(_),oe=Cn(H,te);oe.tag=1,oe.payload=S,L!=null&&(oe.callback=L),S=Wn(_,oe,te),S!==null&&(il(S,_,te,H),is(S,_,te))},enqueueForceUpdate:function(_,S){_=_._reactInternals;var L=no(),H=gc(_),te=Cn(L,H);te.tag=2,S!=null&&(te.callback=S),S=Wn(_,te,H),S!==null&&(il(S,_,H,L),is(S,_,H))}};function hy(_,S,L,H,te,oe,Ee){return _=_.stateNode,typeof _.shouldComponentUpdate=="function"?_.shouldComponentUpdate(H,oe,Ee):S.prototype&&S.prototype.isPureReactComponent?!Ks(L,H)||!Ks(te,oe):!0}function M(_,S,L){var H=!1,te=Wa,oe=S.contextType;return typeof oe=="object"&&oe!==null?oe=Zs(oe):(te=ns(S)?Xa:zi.current,H=S.contextTypes,oe=(H=H!=null)?su(_,te):Wa),S=new S(L,oe),_.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,S.updater=vh,_.stateNode=S,S._reactInternals=_,H&&(_=_.stateNode,_.__reactInternalMemoizedUnmaskedChildContext=te,_.__reactInternalMemoizedMaskedChildContext=oe),S}function A(_,S,L,H){_=S.state,typeof S.componentWillReceiveProps=="function"&&S.componentWillReceiveProps(L,H),typeof S.UNSAFE_componentWillReceiveProps=="function"&&S.UNSAFE_componentWillReceiveProps(L,H),S.state!==_&&vh.enqueueReplaceState(S,S.state,null)}function G(_,S,L,H){var te=_.stateNode;te.props=L,te.state=_.memoizedState,te.refs={},zr(_);var oe=S.contextType;typeof oe=="object"&&oe!==null?te.context=Zs(oe):(oe=ns(S)?Xa:zi.current,te.context=su(_,oe)),te.state=_.memoizedState,oe=S.getDerivedStateFromProps,typeof oe=="function"&&(Af(_,S,oe,L),te.state=_.memoizedState),typeof S.getDerivedStateFromProps=="function"||typeof te.getSnapshotBeforeUpdate=="function"||typeof te.UNSAFE_componentWillMount!="function"&&typeof te.componentWillMount!="function"||(S=te.state,typeof te.componentWillMount=="function"&&te.componentWillMount(),typeof te.UNSAFE_componentWillMount=="function"&&te.UNSAFE_componentWillMount(),S!==te.state&&vh.enqueueReplaceState(te,te.state,null),Qn(_,L,te,H),te.state=_.memoizedState),typeof te.componentDidMount=="function"&&(_.flags|=4194308)}function Q(_,S){try{var L="",H=S;do L+=K(H),H=H.return;while(H);var te=L}catch(oe){te=`
Error generating stack: `+oe.message+`
`+oe.stack}return{value:_,source:S,stack:te,digest:null}}function ie(_,S,L){return{value:_,source:null,stack:L??null,digest:S??null}}function he(_,S){try{console.error(S.value)}catch(L){setTimeout(function(){throw L})}}var ze=typeof WeakMap=="function"?WeakMap:Map;function lt(_,S,L){L=Cn(-1,L),L.tag=3,L.payload={element:null};var H=S.value;return L.callback=function(){xy||(xy=!0,r1=H),he(_,S)},L}function Mt(_,S,L){L=Cn(-1,L),L.tag=3;var H=_.type.getDerivedStateFromError;if(typeof H=="function"){var te=S.value;L.payload=function(){return H(te)},L.callback=function(){he(_,S)}}var oe=_.stateNode;return oe!==null&&typeof oe.componentDidCatch=="function"&&(L.callback=function(){he(_,S),typeof H!="function"&&(pc===null?pc=new Set([this]):pc.add(this));var Ee=S.stack;this.componentDidCatch(S.value,{componentStack:Ee!==null?Ee:""})}),L}function zt(_,S,L){var H=_.pingCache;if(H===null){H=_.pingCache=new ze;var te=new Set;H.set(S,te)}else te=H.get(S),te===void 0&&(te=new Set,H.set(S,te));te.has(L)||(te.add(L),_=XR.bind(null,_,S,L),S.then(_,_))}function ur(_){do{var S;if((S=_.tag===13)&&(S=_.memoizedState,S=S!==null?S.dehydrated!==null:!0),S)return _;_=_.return}while(_!==null);return null}function Dr(_,S,L,H,te){return _.mode&1?(_.flags|=65536,_.lanes=te,_):(_===S?_.flags|=65536:(_.flags|=128,L.flags|=131072,L.flags&=-52805,L.tag===1&&(L.alternate===null?L.tag=17:(S=Cn(-1,1),S.tag=2,Wn(L,S,1))),L.lanes|=1),_)}var Mr=w.ReactCurrentOwner,Xr=!1;function ir(_,S,L,H){S.child=_===null?pf(S,null,L,H):uu(S,_.child,L,H)}function Yi(_,S,L,H,te){L=L.render;var oe=S.ref;return Tl(S,te),H=xf(_,S,L,H,oe,te),L=rm(),_!==null&&!Xr?(S.updateQueue=_.updateQueue,S.flags&=-2053,_.lanes&=~te,_u(_,S,te)):(Gn&&L&&Jp(S),S.flags|=1,ir(_,S,H,te),S.child)}function ro(_,S,L,H,te){if(_===null){var oe=L.type;return typeof oe=="function"&&!u1(oe)&&oe.defaultProps===void 0&&L.compare===null&&L.defaultProps===void 0?(S.tag=15,S.type=oe,yt(_,S,oe,H,te)):(_=Ey(L.type,null,H,S,S.mode,te),_.ref=S.ref,_.return=S,S.child=_)}if(oe=_.child,!(_.lanes&te)){var Ee=oe.memoizedProps;if(L=L.compare,L=L!==null?L:Ks,L(Ee,H)&&_.ref===S.ref)return _u(_,S,te)}return S.flags|=1,_=vc(oe,H),_.ref=S.ref,_.return=S,S.child=_}function yt(_,S,L,H,te){if(_!==null){var oe=_.memoizedProps;if(Ks(oe,H)&&_.ref===S.ref)if(Xr=!1,S.pendingProps=H=oe,(_.lanes&te)!==0)_.flags&131072&&(Xr=!0);else return S.lanes=_.lanes,_u(_,S,te)}return tr(_,S,L,H,te)}function ct(_,S,L){var H=S.pendingProps,te=H.children,oe=_!==null?_.memoizedState:null;if(H.mode==="hidden")if(!(S.mode&1))S.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ln(xh,Jo),Jo|=L;else{if(!(L&1073741824))return _=oe!==null?oe.baseLanes|L:L,S.lanes=S.childLanes=1073741824,S.memoizedState={baseLanes:_,cachePool:null,transitions:null},S.updateQueue=null,Ln(xh,Jo),Jo|=_,null;S.memoizedState={baseLanes:0,cachePool:null,transitions:null},H=oe!==null?oe.baseLanes:L,Ln(xh,Jo),Jo|=H}else oe!==null?(H=oe.baseLanes|L,S.memoizedState=null):H=L,Ln(xh,Jo),Jo|=H;return ir(_,S,te,L),S.child}function wt(_,S){var L=S.ref;(_===null&&L!==null||_!==null&&_.ref!==L)&&(S.flags|=512,S.flags|=2097152)}function tr(_,S,L,H,te){var oe=ns(L)?Xa:zi.current;return oe=su(S,oe),Tl(S,te),L=xf(_,S,L,H,oe,te),H=rm(),_!==null&&!Xr?(S.updateQueue=_.updateQueue,S.flags&=-2053,_.lanes&=~te,_u(_,S,te)):(Gn&&H&&Jp(S),S.flags|=1,ir(_,S,L,te),S.child)}function vr(_,S,L,H,te){if(ns(L)){var oe=!0;ou(S)}else oe=!1;if(Tl(S,te),S.stateNode===null)my(_,S),M(S,L,H),G(S,L,H,te),H=!0;else if(_===null){var Ee=S.stateNode,Ve=S.memoizedProps;Ee.props=Ve;var tt=Ee.context,_t=L.contextType;typeof _t=="object"&&_t!==null?_t=Zs(_t):(_t=ns(L)?Xa:zi.current,_t=su(S,_t));var kt=L.getDerivedStateFromProps,Nt=typeof kt=="function"||typeof Ee.getSnapshotBeforeUpdate=="function";Nt||typeof Ee.UNSAFE_componentWillReceiveProps!="function"&&typeof Ee.componentWillReceiveProps!="function"||(Ve!==H||tt!==_t)&&A(S,Ee,H,_t),Tn=!1;var Lt=S.memoizedState;Ee.state=Lt,Qn(S,H,Ee,te),tt=S.memoizedState,Ve!==H||Lt!==tt||xs.current||Tn?(typeof kt=="function"&&(Af(S,L,kt,H),tt=S.memoizedState),(Ve=Tn||hy(S,L,Ve,H,Lt,tt,_t))?(Nt||typeof Ee.UNSAFE_componentWillMount!="function"&&typeof Ee.componentWillMount!="function"||(typeof Ee.componentWillMount=="function"&&Ee.componentWillMount(),typeof Ee.UNSAFE_componentWillMount=="function"&&Ee.UNSAFE_componentWillMount()),typeof Ee.componentDidMount=="function"&&(S.flags|=4194308)):(typeof Ee.componentDidMount=="function"&&(S.flags|=4194308),S.memoizedProps=H,S.memoizedState=tt),Ee.props=H,Ee.state=tt,Ee.context=_t,H=Ve):(typeof Ee.componentDidMount=="function"&&(S.flags|=4194308),H=!1)}else{Ee=S.stateNode,ai(_,S),Ve=S.memoizedProps,_t=S.type===S.elementType?Ve:Mo(S.type,Ve),Ee.props=_t,Nt=S.pendingProps,Lt=Ee.context,tt=L.contextType,typeof tt=="object"&&tt!==null?tt=Zs(tt):(tt=ns(L)?Xa:zi.current,tt=su(S,tt));var or=L.getDerivedStateFromProps;(kt=typeof or=="function"||typeof Ee.getSnapshotBeforeUpdate=="function")||typeof Ee.UNSAFE_componentWillReceiveProps!="function"&&typeof Ee.componentWillReceiveProps!="function"||(Ve!==Nt||Lt!==tt)&&A(S,Ee,H,tt),Tn=!1,Lt=S.memoizedState,Ee.state=Lt,Qn(S,H,Ee,te);var pr=S.memoizedState;Ve!==Nt||Lt!==pr||xs.current||Tn?(typeof or=="function"&&(Af(S,L,or,H),pr=S.memoizedState),(_t=Tn||hy(S,L,_t,H,Lt,pr,tt)||!1)?(kt||typeof Ee.UNSAFE_componentWillUpdate!="function"&&typeof Ee.componentWillUpdate!="function"||(typeof Ee.componentWillUpdate=="function"&&Ee.componentWillUpdate(H,pr,tt),typeof Ee.UNSAFE_componentWillUpdate=="function"&&Ee.UNSAFE_componentWillUpdate(H,pr,tt)),typeof Ee.componentDidUpdate=="function"&&(S.flags|=4),typeof Ee.getSnapshotBeforeUpdate=="function"&&(S.flags|=1024)):(typeof Ee.componentDidUpdate!="function"||Ve===_.memoizedProps&&Lt===_.memoizedState||(S.flags|=4),typeof Ee.getSnapshotBeforeUpdate!="function"||Ve===_.memoizedProps&&Lt===_.memoizedState||(S.flags|=1024),S.memoizedProps=H,S.memoizedState=pr),Ee.props=H,Ee.state=pr,Ee.context=tt,H=_t):(typeof Ee.componentDidUpdate!="function"||Ve===_.memoizedProps&&Lt===_.memoizedState||(S.flags|=4),typeof Ee.getSnapshotBeforeUpdate!="function"||Ve===_.memoizedProps&&Lt===_.memoizedState||(S.flags|=1024),H=!1)}return Nr(_,S,L,H,oe,te)}function Nr(_,S,L,H,te,oe){wt(_,S);var Ee=(S.flags&128)!==0;if(!H&&!Ee)return te&&Yp(S,L,!1),_u(_,S,oe);H=S.stateNode,Mr.current=S;var Ve=Ee&&typeof L.getDerivedStateFromError!="function"?null:H.render();return S.flags|=1,_!==null&&Ee?(S.child=uu(S,_.child,null,oe),S.child=uu(S,null,Ve,oe)):ir(_,S,Ve,oe),S.memoizedState=H.state,te&&Yp(S,L,!0),S.child}function Br(_){var S=_.stateNode;S.pendingContext?Xp(_,S.pendingContext,S.pendingContext!==S.context):S.context&&Xp(_,S.context,!1),vf(_,S.containerInfo)}function dn(_,S,L,H,te){return El(),ac(te),S.flags|=256,ir(_,S,L,H),S.child}var pi={dehydrated:null,treeContext:null,retryLane:0};function cn(_){return{baseLanes:_,cachePool:null,transitions:null}}function tl(_,S,L){var H=S.pendingProps,te=Hn.current,oe=!1,Ee=(S.flags&128)!==0,Ve;if((Ve=Ee)||(Ve=_!==null&&_.memoizedState===null?!1:(te&2)!==0),Ve?(oe=!0,S.flags&=-129):(_===null||_.memoizedState!==null)&&(te|=1),Ln(Hn,te&1),_===null)return uh(S),_=S.memoizedState,_!==null&&(_=_.dehydrated,_!==null)?(S.mode&1?_.data==="$!"?S.lanes=8:S.lanes=1073741824:S.lanes=1,null):(Ee=H.children,_=H.fallback,oe?(H=S.mode,oe=S.child,Ee={mode:"hidden",children:Ee},!(H&1)&&oe!==null?(oe.childLanes=0,oe.pendingProps=Ee):oe=Ty(Ee,H,0,null),_=Pf(_,H,L,null),oe.return=S,_.return=S,oe.sibling=_,S.child=oe,S.child.memoizedState=cn(L),S.memoizedState=pi,_):cm(S,Ee));if(te=_.memoizedState,te!==null&&(Ve=te.dehydrated,Ve!==null))return DR(_,S,Ee,H,Ve,te,L);if(oe){oe=H.fallback,Ee=S.mode,te=_.child,Ve=te.sibling;var tt={mode:"hidden",children:H.children};return!(Ee&1)&&S.child!==te?(H=S.child,H.childLanes=0,H.pendingProps=tt,S.deletions=null):(H=vc(te,tt),H.subtreeFlags=te.subtreeFlags&14680064),Ve!==null?oe=vc(Ve,oe):(oe=Pf(oe,Ee,L,null),oe.flags|=2),oe.return=S,H.return=S,H.sibling=oe,S.child=H,H=oe,oe=S.child,Ee=_.child.memoizedState,Ee=Ee===null?cn(L):{baseLanes:Ee.baseLanes|L,cachePool:null,transitions:Ee.transitions},oe.memoizedState=Ee,oe.childLanes=_.childLanes&~L,S.memoizedState=pi,H}return oe=_.child,_=oe.sibling,H=vc(oe,{mode:"visible",children:H.children}),!(S.mode&1)&&(H.lanes=L),H.return=S,H.sibling=null,_!==null&&(L=S.deletions,L===null?(S.deletions=[_],S.flags|=16):L.push(_)),S.child=H,S.memoizedState=null,H}function cm(_,S){return S=Ty({mode:"visible",children:S},_.mode,0,null),S.return=_,_.child=S}function py(_,S,L,H){return H!==null&&ac(H),uu(S,_.child,null,L),_=cm(S,S.pendingProps.children),_.flags|=2,S.memoizedState=null,_}function DR(_,S,L,H,te,oe,Ee){if(L)return S.flags&256?(S.flags&=-257,H=ie(Error(n(422))),py(_,S,Ee,H)):S.memoizedState!==null?(S.child=_.child,S.flags|=128,null):(oe=H.fallback,te=S.mode,H=Ty({mode:"visible",children:H.children},te,0,null),oe=Pf(oe,te,Ee,null),oe.flags|=2,H.return=S,oe.return=S,H.sibling=oe,S.child=H,S.mode&1&&uu(S,_.child,null,Ee),S.child.memoizedState=cn(Ee),S.memoizedState=pi,oe);if(!(S.mode&1))return py(_,S,Ee,null);if(te.data==="$!"){if(H=te.nextSibling&&te.nextSibling.dataset,H)var Ve=H.dgst;return H=Ve,oe=Error(n(419)),H=ie(oe,H,void 0),py(_,S,Ee,H)}if(Ve=(Ee&_.childLanes)!==0,Xr||Ve){if(H=os,H!==null){switch(Ee&-Ee){case 4:te=2;break;case 16:te=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:te=32;break;case 536870912:te=268435456;break;default:te=0}te=te&(H.suspendedLanes|Ee)?0:te,te!==0&&te!==oe.retryLane&&(oe.retryLane=te,Wo(_,te),il(H,_,te,-1))}return l1(),H=ie(Error(n(421))),py(_,S,Ee,H)}return te.data==="$?"?(S.flags|=128,S.child=_.child,S=YR.bind(null,_),te._reactRetry=S,null):(_=oe.treeContext,ws=za(te.nextSibling),Vi=S,Gn=!0,So=null,_!==null&&(bs[Di++]=qt,bs[Di++]=wo,bs[Di++]=lu,qt=_.id,wo=_.overflow,lu=S),S=cm(S,H.children),S.flags|=4096,S)}function iS(_,S,L){_.lanes|=S;var H=_.alternate;H!==null&&(H.lanes|=S),gf(_.return,S,L)}function Y_(_,S,L,H,te){var oe=_.memoizedState;oe===null?_.memoizedState={isBackwards:S,rendering:null,renderingStartTime:0,last:H,tail:L,tailMode:te}:(oe.isBackwards=S,oe.rendering=null,oe.renderingStartTime=0,oe.last=H,oe.tail=L,oe.tailMode=te)}function sS(_,S,L){var H=S.pendingProps,te=H.revealOrder,oe=H.tail;if(ir(_,S,H.children,L),H=Hn.current,H&2)H=H&1|2,S.flags|=128;else{if(_!==null&&_.flags&128)e:for(_=S.child;_!==null;){if(_.tag===13)_.memoizedState!==null&&iS(_,L,S);else if(_.tag===19)iS(_,L,S);else if(_.child!==null){_.child.return=_,_=_.child;continue}if(_===S)break e;for(;_.sibling===null;){if(_.return===null||_.return===S)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}H&=1}if(Ln(Hn,H),!(S.mode&1))S.memoizedState=null;else switch(te){case"forwards":for(L=S.child,te=null;L!==null;)_=L.alternate,_!==null&&Xo(_)===null&&(te=L),L=L.sibling;L=te,L===null?(te=S.child,S.child=null):(te=L.sibling,L.sibling=null),Y_(S,!1,te,L,oe);break;case"backwards":for(L=null,te=S.child,S.child=null;te!==null;){if(_=te.alternate,_!==null&&Xo(_)===null){S.child=te;break}_=te.sibling,te.sibling=L,L=te,te=_}Y_(S,!0,L,null,oe);break;case"together":Y_(S,!1,null,null,void 0);break;default:S.memoizedState=null}return S.child}function my(_,S){!(S.mode&1)&&_!==null&&(_.alternate=null,S.alternate=null,S.flags|=2)}function _u(_,S,L){if(_!==null&&(S.dependencies=_.dependencies),Ef|=S.lanes,!(L&S.childLanes))return null;if(_!==null&&S.child!==_.child)throw Error(n(153));if(S.child!==null){for(_=S.child,L=vc(_,_.pendingProps),S.child=L,L.return=S;_.sibling!==null;)_=_.sibling,L=L.sibling=vc(_,_.pendingProps),L.return=S;L.sibling=null}return S.child}function BR(_,S,L){switch(S.tag){case 3:Br(S),El();break;case 5:mu(S);break;case 1:ns(S.type)&&ou(S);break;case 4:vf(S,S.stateNode.containerInfo);break;case 10:var H=S.type._context,te=S.memoizedProps.value;Ln(cu,H._currentValue),H._currentValue=te;break;case 13:if(H=S.memoizedState,H!==null)return H.dehydrated!==null?(Ln(Hn,Hn.current&1),S.flags|=128,null):L&S.child.childLanes?tl(_,S,L):(Ln(Hn,Hn.current&1),_=_u(_,S,L),_!==null?_.sibling:null);Ln(Hn,Hn.current&1);break;case 19:if(H=(L&S.childLanes)!==0,_.flags&128){if(H)return sS(_,S,L);S.flags|=128}if(te=S.memoizedState,te!==null&&(te.rendering=null,te.tail=null,te.lastEffect=null),Ln(Hn,Hn.current),H)break;return null;case 22:case 23:return S.lanes=0,ct(_,S,L)}return _u(_,S,L)}var oS,q_,aS,lS;oS=function(_,S){for(var L=S.child;L!==null;){if(L.tag===5||L.tag===6)_.appendChild(L.stateNode);else if(L.tag!==4&&L.child!==null){L.child.return=L,L=L.child;continue}if(L===S)break;for(;L.sibling===null;){if(L.return===null||L.return===S)return;L=L.return}L.sibling.return=L.return,L=L.sibling}},q_=function(){},aS=function(_,S,L,H){var te=_.memoizedProps;if(te!==H){_=S.stateNode,hi($s.current);var oe=null;switch(L){case"input":te=ne(_,te),H=ne(_,H),oe=[];break;case"select":te=Y({},te,{value:void 0}),H=Y({},H,{value:void 0}),oe=[];break;case"textarea":te=fe(_,te),H=fe(_,H),oe=[];break;default:typeof te.onClick!="function"&&typeof H.onClick=="function"&&(_.onclick=af)}be(L,H);var Ee;L=null;for(_t in te)if(!H.hasOwnProperty(_t)&&te.hasOwnProperty(_t)&&te[_t]!=null)if(_t==="style"){var Ve=te[_t];for(Ee in Ve)Ve.hasOwnProperty(Ee)&&(L||(L={}),L[Ee]="")}else _t!=="dangerouslySetInnerHTML"&&_t!=="children"&&_t!=="suppressContentEditableWarning"&&_t!=="suppressHydrationWarning"&&_t!=="autoFocus"&&(i.hasOwnProperty(_t)?oe||(oe=[]):(oe=oe||[]).push(_t,null));for(_t in H){var tt=H[_t];if(Ve=te!=null?te[_t]:void 0,H.hasOwnProperty(_t)&&tt!==Ve&&(tt!=null||Ve!=null))if(_t==="style")if(Ve){for(Ee in Ve)!Ve.hasOwnProperty(Ee)||tt&&tt.hasOwnProperty(Ee)||(L||(L={}),L[Ee]="");for(Ee in tt)tt.hasOwnProperty(Ee)&&Ve[Ee]!==tt[Ee]&&(L||(L={}),L[Ee]=tt[Ee])}else L||(oe||(oe=[]),oe.push(_t,L)),L=tt;else _t==="dangerouslySetInnerHTML"?(tt=tt?tt.__html:void 0,Ve=Ve?Ve.__html:void 0,tt!=null&&Ve!==tt&&(oe=oe||[]).push(_t,tt)):_t==="children"?typeof tt!="string"&&typeof tt!="number"||(oe=oe||[]).push(_t,""+tt):_t!=="suppressContentEditableWarning"&&_t!=="suppressHydrationWarning"&&(i.hasOwnProperty(_t)?(tt!=null&&_t==="onScroll"&&kn("scroll",_),oe||Ve===tt||(oe=[])):(oe=oe||[]).push(_t,tt))}L&&(oe=oe||[]).push("style",L);var _t=oe;(S.updateQueue=_t)&&(S.flags|=4)}},lS=function(_,S,L,H){L!==H&&(S.flags|=4)};function fm(_,S){if(!Gn)switch(_.tailMode){case"hidden":S=_.tail;for(var L=null;S!==null;)S.alternate!==null&&(L=S),S=S.sibling;L===null?_.tail=null:L.sibling=null;break;case"collapsed":L=_.tail;for(var H=null;L!==null;)L.alternate!==null&&(H=L),L=L.sibling;H===null?S||_.tail===null?_.tail=null:_.tail.sibling=null:H.sibling=null}}function Ds(_){var S=_.alternate!==null&&_.alternate.child===_.child,L=0,H=0;if(S)for(var te=_.child;te!==null;)L|=te.lanes|te.childLanes,H|=te.subtreeFlags&14680064,H|=te.flags&14680064,te.return=_,te=te.sibling;else for(te=_.child;te!==null;)L|=te.lanes|te.childLanes,H|=te.subtreeFlags,H|=te.flags,te.return=_,te=te.sibling;return _.subtreeFlags|=H,_.childLanes=L,S}function kR(_,S,L){var H=S.pendingProps;switch(qa(S),S.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ds(S),null;case 1:return ns(S.type)&&lf(),Ds(S),null;case 3:return H=S.stateNode,Cl(),On(xs),On(zi),Ma(),H.pendingContext&&(H.context=H.pendingContext,H.pendingContext=null),(_===null||_.child===null)&&(oc(S)?S.flags|=4:_===null||_.memoizedState.isDehydrated&&!(S.flags&256)||(S.flags|=1024,So!==null&&(s1(So),So=null))),q_(_,S),Ds(S),null;case 5:cc(S);var te=hi(Qa.current);if(L=S.type,_!==null&&S.stateNode!=null)aS(_,S,L,H,te),_.ref!==S.ref&&(S.flags|=512,S.flags|=2097152);else{if(!H){if(S.stateNode===null)throw Error(n(166));return Ds(S),null}if(_=hi($s.current),oc(S)){H=S.stateNode,L=S.type;var oe=S.memoizedProps;switch(H[wi]=S,H[sc]=oe,_=(S.mode&1)!==0,L){case"dialog":kn("cancel",H),kn("close",H);break;case"iframe":case"object":case"embed":kn("load",H);break;case"video":case"audio":for(te=0;te<Ml.length;te++)kn(Ml[te],H);break;case"source":kn("error",H);break;case"img":case"image":case"link":kn("error",H),kn("load",H);break;case"details":kn("toggle",H);break;case"input":Te(H,oe),kn("invalid",H);break;case"select":H._wrapperState={wasMultiple:!!oe.multiple},kn("invalid",H);break;case"textarea":We(H,oe),kn("invalid",H)}be(L,oe),te=null;for(var Ee in oe)if(oe.hasOwnProperty(Ee)){var Ve=oe[Ee];Ee==="children"?typeof Ve=="string"?H.textContent!==Ve&&(oe.suppressHydrationWarning!==!0&&of(H.textContent,Ve,_),te=["children",Ve]):typeof Ve=="number"&&H.textContent!==""+Ve&&(oe.suppressHydrationWarning!==!0&&of(H.textContent,Ve,_),te=["children",""+Ve]):i.hasOwnProperty(Ee)&&Ve!=null&&Ee==="onScroll"&&kn("scroll",H)}switch(L){case"input":Me(H),je(H,oe,!0);break;case"textarea":Me(H),$e(H);break;case"select":case"option":break;default:typeof oe.onClick=="function"&&(H.onclick=af)}H=te,S.updateQueue=H,H!==null&&(S.flags|=4)}else{Ee=te.nodeType===9?te:te.ownerDocument,_==="http://www.w3.org/1999/xhtml"&&(_=et(L)),_==="http://www.w3.org/1999/xhtml"?L==="script"?(_=Ee.createElement("div"),_.innerHTML="<script><\/script>",_=_.removeChild(_.firstChild)):typeof H.is=="string"?_=Ee.createElement(L,{is:H.is}):(_=Ee.createElement(L),L==="select"&&(Ee=_,H.multiple?Ee.multiple=!0:H.size&&(Ee.size=H.size))):_=Ee.createElementNS(_,L),_[wi]=S,_[sc]=H,oS(_,S,!1,!1),S.stateNode=_;e:{switch(Ee=ke(L,H),L){case"dialog":kn("cancel",_),kn("close",_),te=H;break;case"iframe":case"object":case"embed":kn("load",_),te=H;break;case"video":case"audio":for(te=0;te<Ml.length;te++)kn(Ml[te],_);te=H;break;case"source":kn("error",_),te=H;break;case"img":case"image":case"link":kn("error",_),kn("load",_),te=H;break;case"details":kn("toggle",_),te=H;break;case"input":Te(_,H),te=ne(_,H),kn("invalid",_);break;case"option":te=H;break;case"select":_._wrapperState={wasMultiple:!!H.multiple},te=Y({},H,{value:void 0}),kn("invalid",_);break;case"textarea":We(_,H),te=fe(_,H),kn("invalid",_);break;default:te=H}be(L,te),Ve=te;for(oe in Ve)if(Ve.hasOwnProperty(oe)){var tt=Ve[oe];oe==="style"?Se(_,tt):oe==="dangerouslySetInnerHTML"?(tt=tt?tt.__html:void 0,tt!=null&&rt(_,tt)):oe==="children"?typeof tt=="string"?(L!=="textarea"||tt!=="")&&Ye(_,tt):typeof tt=="number"&&Ye(_,""+tt):oe!=="suppressContentEditableWarning"&&oe!=="suppressHydrationWarning"&&oe!=="autoFocus"&&(i.hasOwnProperty(oe)?tt!=null&&oe==="onScroll"&&kn("scroll",_):tt!=null&&b(_,oe,tt,Ee))}switch(L){case"input":Me(_),je(_,H,!1);break;case"textarea":Me(_),$e(_);break;case"option":H.value!=null&&_.setAttribute("value",""+pe(H.value));break;case"select":_.multiple=!!H.multiple,oe=H.value,oe!=null?_e(_,!!H.multiple,oe,!1):H.defaultValue!=null&&_e(_,!!H.multiple,H.defaultValue,!0);break;default:typeof te.onClick=="function"&&(_.onclick=af)}switch(L){case"button":case"input":case"select":case"textarea":H=!!H.autoFocus;break e;case"img":H=!0;break e;default:H=!1}}H&&(S.flags|=4)}S.ref!==null&&(S.flags|=512,S.flags|=2097152)}return Ds(S),null;case 6:if(_&&S.stateNode!=null)lS(_,S,_.memoizedProps,H);else{if(typeof H!="string"&&S.stateNode===null)throw Error(n(166));if(L=hi(Qa.current),hi($s.current),oc(S)){if(H=S.stateNode,L=S.memoizedProps,H[wi]=S,(oe=H.nodeValue!==L)&&(_=Vi,_!==null))switch(_.tag){case 3:of(H.nodeValue,L,(_.mode&1)!==0);break;case 5:_.memoizedProps.suppressHydrationWarning!==!0&&of(H.nodeValue,L,(_.mode&1)!==0)}oe&&(S.flags|=4)}else H=(L.nodeType===9?L:L.ownerDocument).createTextNode(H),H[wi]=S,S.stateNode=H}return Ds(S),null;case 13:if(On(Hn),H=S.memoizedState,_===null||_.memoizedState!==null&&_.memoizedState.dehydrated!==null){if(Gn&&ws!==null&&S.mode&1&&!(S.flags&128))Zp(),El(),S.flags|=98560,oe=!1;else if(oe=oc(S),H!==null&&H.dehydrated!==null){if(_===null){if(!oe)throw Error(n(318));if(oe=S.memoizedState,oe=oe!==null?oe.dehydrated:null,!oe)throw Error(n(317));oe[wi]=S}else El(),!(S.flags&128)&&(S.memoizedState=null),S.flags|=4;Ds(S),oe=!1}else So!==null&&(s1(So),So=null),oe=!0;if(!oe)return S.flags&65536?S:null}return S.flags&128?(S.lanes=L,S):(H=H!==null,H!==(_!==null&&_.memoizedState!==null)&&H&&(S.child.flags|=8192,S.mode&1&&(_===null||Hn.current&1?qi===0&&(qi=3):l1())),S.updateQueue!==null&&(S.flags|=4),Ds(S),null);case 4:return Cl(),q_(_,S),_===null&&rc(S.stateNode.containerInfo),Ds(S),null;case 10:return mf(S.type._context),Ds(S),null;case 17:return ns(S.type)&&lf(),Ds(S),null;case 19:if(On(Hn),oe=S.memoizedState,oe===null)return Ds(S),null;if(H=(S.flags&128)!==0,Ee=oe.rendering,Ee===null)if(H)fm(oe,!1);else{if(qi!==0||_!==null&&_.flags&128)for(_=S.child;_!==null;){if(Ee=Xo(_),Ee!==null){for(S.flags|=128,fm(oe,!1),H=Ee.updateQueue,H!==null&&(S.updateQueue=H,S.flags|=4),S.subtreeFlags=0,H=L,L=S.child;L!==null;)oe=L,_=H,oe.flags&=14680066,Ee=oe.alternate,Ee===null?(oe.childLanes=0,oe.lanes=_,oe.child=null,oe.subtreeFlags=0,oe.memoizedProps=null,oe.memoizedState=null,oe.updateQueue=null,oe.dependencies=null,oe.stateNode=null):(oe.childLanes=Ee.childLanes,oe.lanes=Ee.lanes,oe.child=Ee.child,oe.subtreeFlags=0,oe.deletions=null,oe.memoizedProps=Ee.memoizedProps,oe.memoizedState=Ee.memoizedState,oe.updateQueue=Ee.updateQueue,oe.type=Ee.type,_=Ee.dependencies,oe.dependencies=_===null?null:{lanes:_.lanes,firstContext:_.firstContext}),L=L.sibling;return Ln(Hn,Hn.current&1|2),S.child}_=_.sibling}oe.tail!==null&&Ze()>bh&&(S.flags|=128,H=!0,fm(oe,!1),S.lanes=4194304)}else{if(!H)if(_=Xo(Ee),_!==null){if(S.flags|=128,H=!0,L=_.updateQueue,L!==null&&(S.updateQueue=L,S.flags|=4),fm(oe,!0),oe.tail===null&&oe.tailMode==="hidden"&&!Ee.alternate&&!Gn)return Ds(S),null}else 2*Ze()-oe.renderingStartTime>bh&&L!==1073741824&&(S.flags|=128,H=!0,fm(oe,!1),S.lanes=4194304);oe.isBackwards?(Ee.sibling=S.child,S.child=Ee):(L=oe.last,L!==null?L.sibling=Ee:S.child=Ee,oe.last=Ee)}return oe.tail!==null?(S=oe.tail,oe.rendering=S,oe.tail=S.sibling,oe.renderingStartTime=Ze(),S.sibling=null,L=Hn.current,Ln(Hn,H?L&1|2:L&1),S):(Ds(S),null);case 22:case 23:return a1(),H=S.memoizedState!==null,_!==null&&_.memoizedState!==null!==H&&(S.flags|=8192),H&&S.mode&1?Jo&1073741824&&(Ds(S),S.subtreeFlags&6&&(S.flags|=8192)):Ds(S),null;case 24:return null;case 25:return null}throw Error(n(156,S.tag))}function OR(_,S){switch(qa(S),S.tag){case 1:return ns(S.type)&&lf(),_=S.flags,_&65536?(S.flags=_&-65537|128,S):null;case 3:return Cl(),On(xs),On(zi),Ma(),_=S.flags,_&65536&&!(_&128)?(S.flags=_&-65537|128,S):null;case 5:return cc(S),null;case 13:if(On(Hn),_=S.memoizedState,_!==null&&_.dehydrated!==null){if(S.alternate===null)throw Error(n(340));El()}return _=S.flags,_&65536?(S.flags=_&-65537|128,S):null;case 19:return On(Hn),null;case 4:return Cl(),null;case 10:return mf(S.type._context),null;case 22:case 23:return a1(),null;case 24:return null;default:return null}}var gy=!1,Bs=!1,FR=typeof WeakSet=="function"?WeakSet:Set,dr=null;function _h(_,S){var L=_.ref;if(L!==null)if(typeof L=="function")try{L(null)}catch(H){mi(_,S,H)}else L.current=null}function J_(_,S,L){try{L()}catch(H){mi(_,S,H)}}var uS=!1;function NR(_,S){if(ic=si,_=qn(),Pi(_)){if("selectionStart"in _)var L={start:_.selectionStart,end:_.selectionEnd};else e:{L=(L=_.ownerDocument)&&L.defaultView||window;var H=L.getSelection&&L.getSelection();if(H&&H.rangeCount!==0){L=H.anchorNode;var te=H.anchorOffset,oe=H.focusNode;H=H.focusOffset;try{L.nodeType,oe.nodeType}catch{L=null;break e}var Ee=0,Ve=-1,tt=-1,_t=0,kt=0,Nt=_,Lt=null;t:for(;;){for(var or;Nt!==L||te!==0&&Nt.nodeType!==3||(Ve=Ee+te),Nt!==oe||H!==0&&Nt.nodeType!==3||(tt=Ee+H),Nt.nodeType===3&&(Ee+=Nt.nodeValue.length),(or=Nt.firstChild)!==null;)Lt=Nt,Nt=or;for(;;){if(Nt===_)break t;if(Lt===L&&++_t===te&&(Ve=Ee),Lt===oe&&++kt===H&&(tt=Ee),(or=Nt.nextSibling)!==null)break;Nt=Lt,Lt=Nt.parentNode}Nt=or}L=Ve===-1||tt===-1?null:{start:Ve,end:tt}}else L=null}L=L||{start:0,end:0}}else L=null;for(Up={focusedElem:_,selectionRange:L},si=!1,dr=S;dr!==null;)if(S=dr,_=S.child,(S.subtreeFlags&1028)!==0&&_!==null)_.return=S,dr=_;else for(;dr!==null;){S=dr;try{var pr=S.alternate;if(S.flags&1024)switch(S.tag){case 0:case 11:case 15:break;case 1:if(pr!==null){var gr=pr.memoizedProps,Si=pr.memoizedState,mt=S.stateNode,st=mt.getSnapshotBeforeUpdate(S.elementType===S.type?gr:Mo(S.type,gr),Si);mt.__reactInternalSnapshotBeforeUpdate=st}break;case 3:var gt=S.stateNode.containerInfo;gt.nodeType===1?gt.textContent="":gt.nodeType===9&&gt.documentElement&&gt.removeChild(gt.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(Vt){mi(S,S.return,Vt)}if(_=S.sibling,_!==null){_.return=S.return,dr=_;break}dr=S.return}return pr=uS,uS=!1,pr}function dm(_,S,L){var H=S.updateQueue;if(H=H!==null?H.lastEffect:null,H!==null){var te=H=H.next;do{if((te.tag&_)===_){var oe=te.destroy;te.destroy=void 0,oe!==void 0&&J_(S,L,oe)}te=te.next}while(te!==H)}}function yy(_,S){if(S=S.updateQueue,S=S!==null?S.lastEffect:null,S!==null){var L=S=S.next;do{if((L.tag&_)===_){var H=L.create;L.destroy=H()}L=L.next}while(L!==S)}}function K_(_){var S=_.ref;if(S!==null){var L=_.stateNode;switch(_.tag){case 5:_=L;break;default:_=L}typeof S=="function"?S(_):S.current=_}}function cS(_){var S=_.alternate;S!==null&&(_.alternate=null,cS(S)),_.child=null,_.deletions=null,_.sibling=null,_.tag===5&&(S=_.stateNode,S!==null&&(delete S[wi],delete S[sc],delete S[iu],delete S[rh],delete S[nh])),_.stateNode=null,_.return=null,_.dependencies=null,_.memoizedProps=null,_.memoizedState=null,_.pendingProps=null,_.stateNode=null,_.updateQueue=null}function fS(_){return _.tag===5||_.tag===3||_.tag===4}function dS(_){e:for(;;){for(;_.sibling===null;){if(_.return===null||fS(_.return))return null;_=_.return}for(_.sibling.return=_.return,_=_.sibling;_.tag!==5&&_.tag!==6&&_.tag!==18;){if(_.flags&2||_.child===null||_.tag===4)continue e;_.child.return=_,_=_.child}if(!(_.flags&2))return _.stateNode}}function Q_(_,S,L){var H=_.tag;if(H===5||H===6)_=_.stateNode,S?L.nodeType===8?L.parentNode.insertBefore(_,S):L.insertBefore(_,S):(L.nodeType===8?(S=L.parentNode,S.insertBefore(_,L)):(S=L,S.appendChild(_)),L=L._reactRootContainer,L!=null||S.onclick!==null||(S.onclick=af));else if(H!==4&&(_=_.child,_!==null))for(Q_(_,S,L),_=_.sibling;_!==null;)Q_(_,S,L),_=_.sibling}function Z_(_,S,L){var H=_.tag;if(H===5||H===6)_=_.stateNode,S?L.insertBefore(_,S):L.appendChild(_);else if(H!==4&&(_=_.child,_!==null))for(Z_(_,S,L),_=_.sibling;_!==null;)Z_(_,S,L),_=_.sibling}var Ms=null,rl=!1;function hc(_,S,L){for(L=L.child;L!==null;)hS(_,S,L),L=L.sibling}function hS(_,S,L){if(It&&typeof It.onCommitFiberUnmount=="function")try{It.onCommitFiberUnmount(Kt,L)}catch{}switch(L.tag){case 5:Bs||_h(L,S);case 6:var H=Ms,te=rl;Ms=null,hc(_,S,L),Ms=H,rl=te,Ms!==null&&(rl?(_=Ms,L=L.stateNode,_.nodeType===8?_.parentNode.removeChild(L):_.removeChild(L)):Ms.removeChild(L.stateNode));break;case 18:Ms!==null&&(rl?(_=Ms,L=L.stateNode,_.nodeType===8?th(_.parentNode,L):_.nodeType===1&&th(_,L),Uo(_)):th(Ms,L.stateNode));break;case 4:H=Ms,te=rl,Ms=L.stateNode.containerInfo,rl=!0,hc(_,S,L),Ms=H,rl=te;break;case 0:case 11:case 14:case 15:if(!Bs&&(H=L.updateQueue,H!==null&&(H=H.lastEffect,H!==null))){te=H=H.next;do{var oe=te,Ee=oe.destroy;oe=oe.tag,Ee!==void 0&&(oe&2||oe&4)&&J_(L,S,Ee),te=te.next}while(te!==H)}hc(_,S,L);break;case 1:if(!Bs&&(_h(L,S),H=L.stateNode,typeof H.componentWillUnmount=="function"))try{H.props=L.memoizedProps,H.state=L.memoizedState,H.componentWillUnmount()}catch(Ve){mi(L,S,Ve)}hc(_,S,L);break;case 21:hc(_,S,L);break;case 22:L.mode&1?(Bs=(H=Bs)||L.memoizedState!==null,hc(_,S,L),Bs=H):hc(_,S,L);break;default:hc(_,S,L)}}function pS(_){var S=_.updateQueue;if(S!==null){_.updateQueue=null;var L=_.stateNode;L===null&&(L=_.stateNode=new FR),S.forEach(function(H){var te=qR.bind(null,_,H);L.has(H)||(L.add(H),H.then(te,te))})}}function nl(_,S){var L=S.deletions;if(L!==null)for(var H=0;H<L.length;H++){var te=L[H];try{var oe=_,Ee=S,Ve=Ee;e:for(;Ve!==null;){switch(Ve.tag){case 5:Ms=Ve.stateNode,rl=!1;break e;case 3:Ms=Ve.stateNode.containerInfo,rl=!0;break e;case 4:Ms=Ve.stateNode.containerInfo,rl=!0;break e}Ve=Ve.return}if(Ms===null)throw Error(n(160));hS(oe,Ee,te),Ms=null,rl=!1;var tt=te.alternate;tt!==null&&(tt.return=null),te.return=null}catch(_t){mi(te,S,_t)}}if(S.subtreeFlags&12854)for(S=S.child;S!==null;)mS(S,_),S=S.sibling}function mS(_,S){var L=_.alternate,H=_.flags;switch(_.tag){case 0:case 11:case 14:case 15:if(nl(S,_),Pl(_),H&4){try{dm(3,_,_.return),yy(3,_)}catch(gr){mi(_,_.return,gr)}try{dm(5,_,_.return)}catch(gr){mi(_,_.return,gr)}}break;case 1:nl(S,_),Pl(_),H&512&&L!==null&&_h(L,L.return);break;case 5:if(nl(S,_),Pl(_),H&512&&L!==null&&_h(L,L.return),_.flags&32){var te=_.stateNode;try{Ye(te,"")}catch(gr){mi(_,_.return,gr)}}if(H&4&&(te=_.stateNode,te!=null)){var oe=_.memoizedProps,Ee=L!==null?L.memoizedProps:oe,Ve=_.type,tt=_.updateQueue;if(_.updateQueue=null,tt!==null)try{Ve==="input"&&oe.type==="radio"&&oe.name!=null&&Pe(te,oe),ke(Ve,Ee);var _t=ke(Ve,oe);for(Ee=0;Ee<tt.length;Ee+=2){var kt=tt[Ee],Nt=tt[Ee+1];kt==="style"?Se(te,Nt):kt==="dangerouslySetInnerHTML"?rt(te,Nt):kt==="children"?Ye(te,Nt):b(te,kt,Nt,_t)}switch(Ve){case"input":Ae(te,oe);break;case"textarea":Ke(te,oe);break;case"select":var Lt=te._wrapperState.wasMultiple;te._wrapperState.wasMultiple=!!oe.multiple;var or=oe.value;or!=null?_e(te,!!oe.multiple,or,!1):Lt!==!!oe.multiple&&(oe.defaultValue!=null?_e(te,!!oe.multiple,oe.defaultValue,!0):_e(te,!!oe.multiple,oe.multiple?[]:"",!1))}te[sc]=oe}catch(gr){mi(_,_.return,gr)}}break;case 6:if(nl(S,_),Pl(_),H&4){if(_.stateNode===null)throw Error(n(162));te=_.stateNode,oe=_.memoizedProps;try{te.nodeValue=oe}catch(gr){mi(_,_.return,gr)}}break;case 3:if(nl(S,_),Pl(_),H&4&&L!==null&&L.memoizedState.isDehydrated)try{Uo(S.containerInfo)}catch(gr){mi(_,_.return,gr)}break;case 4:nl(S,_),Pl(_);break;case 13:nl(S,_),Pl(_),te=_.child,te.flags&8192&&(oe=te.memoizedState!==null,te.stateNode.isHidden=oe,!oe||te.alternate!==null&&te.alternate.memoizedState!==null||(t1=Ze())),H&4&&pS(_);break;case 22:if(kt=L!==null&&L.memoizedState!==null,_.mode&1?(Bs=(_t=Bs)||kt,nl(S,_),Bs=_t):nl(S,_),Pl(_),H&8192){if(_t=_.memoizedState!==null,(_.stateNode.isHidden=_t)&&!kt&&_.mode&1)for(dr=_,kt=_.child;kt!==null;){for(Nt=dr=kt;dr!==null;){switch(Lt=dr,or=Lt.child,Lt.tag){case 0:case 11:case 14:case 15:dm(4,Lt,Lt.return);break;case 1:_h(Lt,Lt.return);var pr=Lt.stateNode;if(typeof pr.componentWillUnmount=="function"){H=Lt,L=Lt.return;try{S=H,pr.props=S.memoizedProps,pr.state=S.memoizedState,pr.componentWillUnmount()}catch(gr){mi(H,L,gr)}}break;case 5:_h(Lt,Lt.return);break;case 22:if(Lt.memoizedState!==null){vS(Nt);continue}}or!==null?(or.return=Lt,dr=or):vS(Nt)}kt=kt.sibling}e:for(kt=null,Nt=_;;){if(Nt.tag===5){if(kt===null){kt=Nt;try{te=Nt.stateNode,_t?(oe=te.style,typeof oe.setProperty=="function"?oe.setProperty("display","none","important"):oe.display="none"):(Ve=Nt.stateNode,tt=Nt.memoizedProps.style,Ee=tt!=null&&tt.hasOwnProperty("display")?tt.display:null,Ve.style.display=ue("display",Ee))}catch(gr){mi(_,_.return,gr)}}}else if(Nt.tag===6){if(kt===null)try{Nt.stateNode.nodeValue=_t?"":Nt.memoizedProps}catch(gr){mi(_,_.return,gr)}}else if((Nt.tag!==22&&Nt.tag!==23||Nt.memoizedState===null||Nt===_)&&Nt.child!==null){Nt.child.return=Nt,Nt=Nt.child;continue}if(Nt===_)break e;for(;Nt.sibling===null;){if(Nt.return===null||Nt.return===_)break e;kt===Nt&&(kt=null),Nt=Nt.return}kt===Nt&&(kt=null),Nt.sibling.return=Nt.return,Nt=Nt.sibling}}break;case 19:nl(S,_),Pl(_),H&4&&pS(_);break;case 21:break;default:nl(S,_),Pl(_)}}function Pl(_){var S=_.flags;if(S&2){try{e:{for(var L=_.return;L!==null;){if(fS(L)){var H=L;break e}L=L.return}throw Error(n(160))}switch(H.tag){case 5:var te=H.stateNode;H.flags&32&&(Ye(te,""),H.flags&=-33);var oe=dS(_);Z_(_,oe,te);break;case 3:case 4:var Ee=H.stateNode.containerInfo,Ve=dS(_);Q_(_,Ve,Ee);break;default:throw Error(n(161))}}catch(tt){mi(_,_.return,tt)}_.flags&=-3}S&4096&&(_.flags&=-4097)}function UR(_,S,L){dr=_,gS(_)}function gS(_,S,L){for(var H=(_.mode&1)!==0;dr!==null;){var te=dr,oe=te.child;if(te.tag===22&&H){var Ee=te.memoizedState!==null||gy;if(!Ee){var Ve=te.alternate,tt=Ve!==null&&Ve.memoizedState!==null||Bs;Ve=gy;var _t=Bs;if(gy=Ee,(Bs=tt)&&!_t)for(dr=te;dr!==null;)Ee=dr,tt=Ee.child,Ee.tag===22&&Ee.memoizedState!==null?_S(te):tt!==null?(tt.return=Ee,dr=tt):_S(te);for(;oe!==null;)dr=oe,gS(oe),oe=oe.sibling;dr=te,gy=Ve,Bs=_t}yS(_)}else te.subtreeFlags&8772&&oe!==null?(oe.return=te,dr=oe):yS(_)}}function yS(_){for(;dr!==null;){var S=dr;if(S.flags&8772){var L=S.alternate;try{if(S.flags&8772)switch(S.tag){case 0:case 11:case 15:Bs||yy(5,S);break;case 1:var H=S.stateNode;if(S.flags&4&&!Bs)if(L===null)H.componentDidMount();else{var te=S.elementType===S.type?L.memoizedProps:Mo(S.type,L.memoizedProps);H.componentDidUpdate(te,L.memoizedState,H.__reactInternalSnapshotBeforeUpdate)}var oe=S.updateQueue;oe!==null&&uc(S,oe,H);break;case 3:var Ee=S.updateQueue;if(Ee!==null){if(L=null,S.child!==null)switch(S.child.tag){case 5:L=S.child.stateNode;break;case 1:L=S.child.stateNode}uc(S,Ee,L)}break;case 5:var Ve=S.stateNode;if(L===null&&S.flags&4){L=Ve;var tt=S.memoizedProps;switch(S.type){case"button":case"input":case"select":case"textarea":tt.autoFocus&&L.focus();break;case"img":tt.src&&(L.src=tt.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(S.memoizedState===null){var _t=S.alternate;if(_t!==null){var kt=_t.memoizedState;if(kt!==null){var Nt=kt.dehydrated;Nt!==null&&Uo(Nt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Bs||S.flags&512&&K_(S)}catch(Lt){mi(S,S.return,Lt)}}if(S===_){dr=null;break}if(L=S.sibling,L!==null){L.return=S.return,dr=L;break}dr=S.return}}function vS(_){for(;dr!==null;){var S=dr;if(S===_){dr=null;break}var L=S.sibling;if(L!==null){L.return=S.return,dr=L;break}dr=S.return}}function _S(_){for(;dr!==null;){var S=dr;try{switch(S.tag){case 0:case 11:case 15:var L=S.return;try{yy(4,S)}catch(tt){mi(S,L,tt)}break;case 1:var H=S.stateNode;if(typeof H.componentDidMount=="function"){var te=S.return;try{H.componentDidMount()}catch(tt){mi(S,te,tt)}}var oe=S.return;try{K_(S)}catch(tt){mi(S,oe,tt)}break;case 5:var Ee=S.return;try{K_(S)}catch(tt){mi(S,Ee,tt)}}}catch(tt){mi(S,S.return,tt)}if(S===_){dr=null;break}var Ve=S.sibling;if(Ve!==null){Ve.return=S.return,dr=Ve;break}dr=S.return}}var GR=Math.ceil,vy=w.ReactCurrentDispatcher,$_=w.ReactCurrentOwner,Ea=w.ReactCurrentBatchConfig,xn=0,os=null,Bi=null,As=0,Jo=0,xh=Kn(0),qi=0,hm=null,Ef=0,_y=0,e1=0,pm=null,Ao=null,t1=0,bh=1/0,xu=null,xy=!1,r1=null,pc=null,by=!1,mc=null,wy=0,mm=0,n1=null,Sy=-1,My=0;function no(){return xn&6?Ze():Sy!==-1?Sy:Sy=Ze()}function gc(_){return _.mode&1?xn&2&&As!==0?As&-As:W_.transition!==null?(My===0&&(My=Jr()),My):(_=Gr,_!==0||(_=window.event,_=_===void 0?16:Qc(_.type)),_):1}function il(_,S,L,H){if(50<mm)throw mm=0,n1=null,Error(n(185));ni(_,L,H),(!(xn&2)||_!==os)&&(_===os&&(!(xn&2)&&(_y|=L),qi===4&&yc(_,As)),Eo(_,H),L===1&&xn===0&&!(S.mode&1)&&(bh=Ze()+500,cf&&wa()))}function Eo(_,S){var L=_.callbackNode;ri(_,S);var H=ti(_,_===os?As:0);if(H===0)L!==null&&me(L),_.callbackNode=null,_.callbackPriority=0;else if(S=H&-H,_.callbackPriority!==S){if(L!=null&&me(L),S===1)_.tag===0?ny(bS.bind(null,_)):ff(bS.bind(null,_)),V_(function(){!(xn&6)&&wa()}),L=null;else{switch(Nn(H)){case 1:L=St;break;case 4:L=jt;break;case 16:L=Ft;break;case 536870912:L=Qt;break;default:L=Ft}L=RS(L,xS.bind(null,_))}_.callbackPriority=S,_.callbackNode=L}}function xS(_,S){if(Sy=-1,My=0,xn&6)throw Error(n(327));var L=_.callbackNode;if(wh()&&_.callbackNode!==L)return null;var H=ti(_,_===os?As:0);if(H===0)return null;if(H&30||H&_.expiredLanes||S)S=Ay(_,H);else{S=H;var te=xn;xn|=2;var oe=SS();(os!==_||As!==S)&&(xu=null,bh=Ze()+500,Cf(_,S));do try{VR();break}catch(Ve){wS(_,Ve)}while(!0);du(),vy.current=oe,xn=te,Bi!==null?S=0:(os=null,As=0,S=qi)}if(S!==0){if(S===2&&(te=Js(_),te!==0&&(H=te,S=i1(_,te))),S===1)throw L=hm,Cf(_,0),yc(_,H),Eo(_,Ze()),L;if(S===6)yc(_,H);else{if(te=_.current.alternate,!(H&30)&&!HR(te)&&(S=Ay(_,H),S===2&&(oe=Js(_),oe!==0&&(H=oe,S=i1(_,oe))),S===1))throw L=hm,Cf(_,0),yc(_,H),Eo(_,Ze()),L;switch(_.finishedWork=te,_.finishedLanes=H,S){case 0:case 1:throw Error(n(345));case 2:Rf(_,Ao,xu);break;case 3:if(yc(_,H),(H&130023424)===H&&(S=t1+500-Ze(),10<S)){if(ti(_,0)!==0)break;if(te=_.suspendedLanes,(te&H)!==H){no(),_.pingedLanes|=_.suspendedLanes&te;break}_.timeoutHandle=Hp(Rf.bind(null,_,Ao,xu),S);break}Rf(_,Ao,xu);break;case 4:if(yc(_,H),(H&4194240)===H)break;for(S=_.eventTimes,te=-1;0<H;){var Ee=31-Sr(H);oe=1<<Ee,Ee=S[Ee],Ee>te&&(te=Ee),H&=~oe}if(H=te,H=Ze()-H,H=(120>H?120:480>H?480:1080>H?1080:1920>H?1920:3e3>H?3e3:4320>H?4320:1960*GR(H/1960))-H,10<H){_.timeoutHandle=Hp(Rf.bind(null,_,Ao,xu),H);break}Rf(_,Ao,xu);break;case 5:Rf(_,Ao,xu);break;default:throw Error(n(329))}}}return Eo(_,Ze()),_.callbackNode===L?xS.bind(null,_):null}function i1(_,S){var L=pm;return _.current.memoizedState.isDehydrated&&(Cf(_,S).flags|=256),_=Ay(_,S),_!==2&&(S=Ao,Ao=L,S!==null&&s1(S)),_}function s1(_){Ao===null?Ao=_:Ao.push.apply(Ao,_)}function HR(_){for(var S=_;;){if(S.flags&16384){var L=S.updateQueue;if(L!==null&&(L=L.stores,L!==null))for(var H=0;H<L.length;H++){var te=L[H],oe=te.getSnapshot;te=te.value;try{if(!mn(oe(),te))return!1}catch{return!1}}}if(L=S.child,S.subtreeFlags&16384&&L!==null)L.return=S,S=L;else{if(S===_)break;for(;S.sibling===null;){if(S.return===null||S.return===_)return!0;S=S.return}S.sibling.return=S.return,S=S.sibling}}return!0}function yc(_,S){for(S&=~e1,S&=~_y,_.suspendedLanes|=S,_.pingedLanes&=~S,_=_.expirationTimes;0<S;){var L=31-Sr(S),H=1<<L;_[L]=-1,S&=~H}}function bS(_){if(xn&6)throw Error(n(327));wh();var S=ti(_,0);if(!(S&1))return Eo(_,Ze()),null;var L=Ay(_,S);if(_.tag!==0&&L===2){var H=Js(_);H!==0&&(S=H,L=i1(_,H))}if(L===1)throw L=hm,Cf(_,0),yc(_,S),Eo(_,Ze()),L;if(L===6)throw Error(n(345));return _.finishedWork=_.current.alternate,_.finishedLanes=S,Rf(_,Ao,xu),Eo(_,Ze()),null}function o1(_,S){var L=xn;xn|=1;try{return _(S)}finally{xn=L,xn===0&&(bh=Ze()+500,cf&&wa())}}function Tf(_){mc!==null&&mc.tag===0&&!(xn&6)&&wh();var S=xn;xn|=1;var L=Ea.transition,H=Gr;try{if(Ea.transition=null,Gr=1,_)return _()}finally{Gr=H,Ea.transition=L,xn=S,!(xn&6)&&wa()}}function a1(){Jo=xh.current,On(xh)}function Cf(_,S){_.finishedWork=null,_.finishedLanes=0;var L=_.timeoutHandle;if(L!==-1&&(_.timeoutHandle=-1,zp(L)),Bi!==null)for(L=Bi.return;L!==null;){var H=L;switch(qa(H),H.tag){case 1:H=H.type.childContextTypes,H!=null&&lf();break;case 3:Cl(),On(xs),On(zi),Ma();break;case 5:cc(H);break;case 4:Cl();break;case 13:On(Hn);break;case 19:On(Hn);break;case 10:mf(H.type._context);break;case 22:case 23:a1()}L=L.return}if(os=_,Bi=_=vc(_.current,null),As=Jo=S,qi=0,hm=null,e1=_y=Ef=0,Ao=pm=null,Ka!==null){for(S=0;S<Ka.length;S++)if(L=Ka[S],H=L.interleaved,H!==null){L.interleaved=null;var te=H.next,oe=L.pending;if(oe!==null){var Ee=oe.next;oe.next=te,H.next=Ee}L.pending=H}Ka=null}return _}function wS(_,S){do{var L=Bi;try{if(du(),gu.current=yh,Yo){for(var H=Fn.memoizedState;H!==null;){var te=H.queue;te!==null&&(te.pending=null),H=H.next}Yo=!1}if(Za=0,gn=Zn=Fn=null,ss=!1,Rl=0,$_.current=null,L===null||L.return===null){qi=1,hm=S,Bi=null;break}e:{var oe=_,Ee=L.return,Ve=L,tt=S;if(S=As,Ve.flags|=32768,tt!==null&&typeof tt=="object"&&typeof tt.then=="function"){var _t=tt,kt=Ve,Nt=kt.tag;if(!(kt.mode&1)&&(Nt===0||Nt===11||Nt===15)){var Lt=kt.alternate;Lt?(kt.updateQueue=Lt.updateQueue,kt.memoizedState=Lt.memoizedState,kt.lanes=Lt.lanes):(kt.updateQueue=null,kt.memoizedState=null)}var or=ur(Ee);if(or!==null){or.flags&=-257,Dr(or,Ee,Ve,oe,S),or.mode&1&&zt(oe,_t,S),S=or,tt=_t;var pr=S.updateQueue;if(pr===null){var gr=new Set;gr.add(tt),S.updateQueue=gr}else pr.add(tt);break e}else{if(!(S&1)){zt(oe,_t,S),l1();break e}tt=Error(n(426))}}else if(Gn&&Ve.mode&1){var Si=ur(Ee);if(Si!==null){!(Si.flags&65536)&&(Si.flags|=256),Dr(Si,Ee,Ve,oe,S),ac(Q(tt,Ve));break e}}oe=tt=Q(tt,Ve),qi!==4&&(qi=2),pm===null?pm=[oe]:pm.push(oe),oe=Ee;do{switch(oe.tag){case 3:oe.flags|=65536,S&=-S,oe.lanes|=S;var mt=lt(oe,tt,S);hu(oe,mt);break e;case 1:Ve=tt;var st=oe.type,gt=oe.stateNode;if(!(oe.flags&128)&&(typeof st.getDerivedStateFromError=="function"||gt!==null&&typeof gt.componentDidCatch=="function"&&(pc===null||!pc.has(gt)))){oe.flags|=65536,S&=-S,oe.lanes|=S;var Vt=Mt(oe,Ve,S);hu(oe,Vt);break e}}oe=oe.return}while(oe!==null)}AS(L)}catch(xr){S=xr,Bi===L&&L!==null&&(Bi=L=L.return);continue}break}while(!0)}function SS(){var _=vy.current;return vy.current=yh,_===null?yh:_}function l1(){(qi===0||qi===3||qi===2)&&(qi=4),os===null||!(Ef&268435455)&&!(_y&268435455)||yc(os,As)}function Ay(_,S){var L=xn;xn|=2;var H=SS();(os!==_||As!==S)&&(xu=null,Cf(_,S));do try{zR();break}catch(te){wS(_,te)}while(!0);if(du(),xn=L,vy.current=H,Bi!==null)throw Error(n(261));return os=null,As=0,qi}function zR(){for(;Bi!==null;)MS(Bi)}function VR(){for(;Bi!==null&&!Qe();)MS(Bi)}function MS(_){var S=CS(_.alternate,_,Jo);_.memoizedProps=_.pendingProps,S===null?AS(_):Bi=S,$_.current=null}function AS(_){var S=_;do{var L=S.alternate;if(_=S.return,S.flags&32768){if(L=OR(L,S),L!==null){L.flags&=32767,Bi=L;return}if(_!==null)_.flags|=32768,_.subtreeFlags=0,_.deletions=null;else{qi=6,Bi=null;return}}else if(L=kR(L,S,Jo),L!==null){Bi=L;return}if(S=S.sibling,S!==null){Bi=S;return}Bi=S=_}while(S!==null);qi===0&&(qi=5)}function Rf(_,S,L){var H=Gr,te=Ea.transition;try{Ea.transition=null,Gr=1,WR(_,S,L,H)}finally{Ea.transition=te,Gr=H}return null}function WR(_,S,L,H){do wh();while(mc!==null);if(xn&6)throw Error(n(327));L=_.finishedWork;var te=_.finishedLanes;if(L===null)return null;if(_.finishedWork=null,_.finishedLanes=0,L===_.current)throw Error(n(177));_.callbackNode=null,_.callbackPriority=0;var oe=L.lanes|L.childLanes;if(di(_,oe),_===os&&(Bi=os=null,As=0),!(L.subtreeFlags&2064)&&!(L.flags&2064)||by||(by=!0,RS(Ft,function(){return wh(),null})),oe=(L.flags&15990)!==0,L.subtreeFlags&15990||oe){oe=Ea.transition,Ea.transition=null;var Ee=Gr;Gr=1;var Ve=xn;xn|=4,$_.current=null,NR(_,L),mS(L,_),Ii(Up),si=!!ic,Up=ic=null,_.current=L,UR(L),qe(),xn=Ve,Gr=Ee,Ea.transition=oe}else _.current=L;if(by&&(by=!1,mc=_,wy=te),oe=_.pendingLanes,oe===0&&(pc=null),Xt(L.stateNode),Eo(_,Ze()),S!==null)for(H=_.onRecoverableError,L=0;L<S.length;L++)te=S[L],H(te.value,{componentStack:te.stack,digest:te.digest});if(xy)throw xy=!1,_=r1,r1=null,_;return wy&1&&_.tag!==0&&wh(),oe=_.pendingLanes,oe&1?_===n1?mm++:(mm=0,n1=_):mm=0,wa(),null}function wh(){if(mc!==null){var _=Nn(wy),S=Ea.transition,L=Gr;try{if(Ea.transition=null,Gr=16>_?16:_,mc===null)var H=!1;else{if(_=mc,mc=null,wy=0,xn&6)throw Error(n(331));var te=xn;for(xn|=4,dr=_.current;dr!==null;){var oe=dr,Ee=oe.child;if(dr.flags&16){var Ve=oe.deletions;if(Ve!==null){for(var tt=0;tt<Ve.length;tt++){var _t=Ve[tt];for(dr=_t;dr!==null;){var kt=dr;switch(kt.tag){case 0:case 11:case 15:dm(8,kt,oe)}var Nt=kt.child;if(Nt!==null)Nt.return=kt,dr=Nt;else for(;dr!==null;){kt=dr;var Lt=kt.sibling,or=kt.return;if(cS(kt),kt===_t){dr=null;break}if(Lt!==null){Lt.return=or,dr=Lt;break}dr=or}}}var pr=oe.alternate;if(pr!==null){var gr=pr.child;if(gr!==null){pr.child=null;do{var Si=gr.sibling;gr.sibling=null,gr=Si}while(gr!==null)}}dr=oe}}if(oe.subtreeFlags&2064&&Ee!==null)Ee.return=oe,dr=Ee;else e:for(;dr!==null;){if(oe=dr,oe.flags&2048)switch(oe.tag){case 0:case 11:case 15:dm(9,oe,oe.return)}var mt=oe.sibling;if(mt!==null){mt.return=oe.return,dr=mt;break e}dr=oe.return}}var st=_.current;for(dr=st;dr!==null;){Ee=dr;var gt=Ee.child;if(Ee.subtreeFlags&2064&&gt!==null)gt.return=Ee,dr=gt;else e:for(Ee=st;dr!==null;){if(Ve=dr,Ve.flags&2048)try{switch(Ve.tag){case 0:case 11:case 15:yy(9,Ve)}}catch(xr){mi(Ve,Ve.return,xr)}if(Ve===Ee){dr=null;break e}var Vt=Ve.sibling;if(Vt!==null){Vt.return=Ve.return,dr=Vt;break e}dr=Ve.return}}if(xn=te,wa(),It&&typeof It.onPostCommitFiberRoot=="function")try{It.onPostCommitFiberRoot(Kt,_)}catch{}H=!0}return H}finally{Gr=L,Ea.transition=S}}return!1}function ES(_,S,L){S=Q(L,S),S=lt(_,S,1),_=Wn(_,S,1),S=no(),_!==null&&(ni(_,1,S),Eo(_,S))}function mi(_,S,L){if(_.tag===3)ES(_,_,L);else for(;S!==null;){if(S.tag===3){ES(S,_,L);break}else if(S.tag===1){var H=S.stateNode;if(typeof S.type.getDerivedStateFromError=="function"||typeof H.componentDidCatch=="function"&&(pc===null||!pc.has(H))){_=Q(L,_),_=Mt(S,_,1),S=Wn(S,_,1),_=no(),S!==null&&(ni(S,1,_),Eo(S,_));break}}S=S.return}}function XR(_,S,L){var H=_.pingCache;H!==null&&H.delete(S),S=no(),_.pingedLanes|=_.suspendedLanes&L,os===_&&(As&L)===L&&(qi===4||qi===3&&(As&130023424)===As&&500>Ze()-t1?Cf(_,0):e1|=L),Eo(_,S)}function TS(_,S){S===0&&(_.mode&1?(S=Zr,Zr<<=1,!(Zr&130023424)&&(Zr=4194304)):S=1);var L=no();_=Wo(_,S),_!==null&&(ni(_,S,L),Eo(_,L))}function YR(_){var S=_.memoizedState,L=0;S!==null&&(L=S.retryLane),TS(_,L)}function qR(_,S){var L=0;switch(_.tag){case 13:var H=_.stateNode,te=_.memoizedState;te!==null&&(L=te.retryLane);break;case 19:H=_.stateNode;break;default:throw Error(n(314))}H!==null&&H.delete(S),TS(_,L)}var CS;CS=function(_,S,L){if(_!==null)if(_.memoizedProps!==S.pendingProps||xs.current)Xr=!0;else{if(!(_.lanes&L)&&!(S.flags&128))return Xr=!1,BR(_,S,L);Xr=!!(_.flags&131072)}else Xr=!1,Gn&&S.flags&1048576&&qp(S,ah,S.index);switch(S.lanes=0,S.tag){case 2:var H=S.type;my(_,S),_=S.pendingProps;var te=su(S,zi.current);Tl(S,L),te=xf(null,S,H,_,te,L);var oe=rm();return S.flags|=1,typeof te=="object"&&te!==null&&typeof te.render=="function"&&te.$$typeof===void 0?(S.tag=1,S.memoizedState=null,S.updateQueue=null,ns(H)?(oe=!0,ou(S)):oe=!1,S.memoizedState=te.state!==null&&te.state!==void 0?te.state:null,zr(S),te.updater=vh,S.stateNode=te,te._reactInternals=S,G(S,H,_,L),S=Nr(null,S,H,!0,oe,L)):(S.tag=0,Gn&&oe&&Jp(S),ir(null,S,te,L),S=S.child),S;case 16:H=S.elementType;e:{switch(my(_,S),_=S.pendingProps,te=H._init,H=te(H._payload),S.type=H,te=S.tag=KR(H),_=Mo(H,_),te){case 0:S=tr(null,S,H,_,L);break e;case 1:S=vr(null,S,H,_,L);break e;case 11:S=Yi(null,S,H,_,L);break e;case 14:S=ro(null,S,H,Mo(H.type,_),L);break e}throw Error(n(306,H,""))}return S;case 0:return H=S.type,te=S.pendingProps,te=S.elementType===H?te:Mo(H,te),tr(_,S,H,te,L);case 1:return H=S.type,te=S.pendingProps,te=S.elementType===H?te:Mo(H,te),vr(_,S,H,te,L);case 3:e:{if(Br(S),_===null)throw Error(n(387));H=S.pendingProps,oe=S.memoizedState,te=oe.element,ai(_,S),Qn(S,H,null,L);var Ee=S.memoizedState;if(H=Ee.element,oe.isDehydrated)if(oe={element:H,isDehydrated:!1,cache:Ee.cache,pendingSuspenseBoundaries:Ee.pendingSuspenseBoundaries,transitions:Ee.transitions},S.updateQueue.baseState=oe,S.memoizedState=oe,S.flags&256){te=Q(Error(n(423)),S),S=dn(_,S,H,L,te);break e}else if(H!==te){te=Q(Error(n(424)),S),S=dn(_,S,H,L,te);break e}else for(ws=za(S.stateNode.containerInfo.firstChild),Vi=S,Gn=!0,So=null,L=pf(S,null,H,L),S.child=L;L;)L.flags=L.flags&-3|4096,L=L.sibling;else{if(El(),H===te){S=_u(_,S,L);break e}ir(_,S,H,L)}S=S.child}return S;case 5:return mu(S),_===null&&uh(S),H=S.type,te=S.pendingProps,oe=_!==null?_.memoizedProps:null,Ee=te.children,Gp(H,te)?Ee=null:oe!==null&&Gp(H,oe)&&(S.flags|=32),wt(_,S),ir(_,S,Ee,L),S.child;case 6:return _===null&&uh(S),null;case 13:return tl(_,S,L);case 4:return vf(S,S.stateNode.containerInfo),H=S.pendingProps,_===null?S.child=uu(S,null,H,L):ir(_,S,H,L),S.child;case 11:return H=S.type,te=S.pendingProps,te=S.elementType===H?te:Mo(H,te),Yi(_,S,H,te,L);case 7:return ir(_,S,S.pendingProps,L),S.child;case 8:return ir(_,S,S.pendingProps.children,L),S.child;case 12:return ir(_,S,S.pendingProps.children,L),S.child;case 10:e:{if(H=S.type._context,te=S.pendingProps,oe=S.memoizedProps,Ee=te.value,Ln(cu,H._currentValue),H._currentValue=Ee,oe!==null)if(mn(oe.value,Ee)){if(oe.children===te.children&&!xs.current){S=_u(_,S,L);break e}}else for(oe=S.child,oe!==null&&(oe.return=S);oe!==null;){var Ve=oe.dependencies;if(Ve!==null){Ee=oe.child;for(var tt=Ve.firstContext;tt!==null;){if(tt.context===H){if(oe.tag===1){tt=Cn(-1,L&-L),tt.tag=2;var _t=oe.updateQueue;if(_t!==null){_t=_t.shared;var kt=_t.pending;kt===null?tt.next=tt:(tt.next=kt.next,kt.next=tt),_t.pending=tt}}oe.lanes|=L,tt=oe.alternate,tt!==null&&(tt.lanes|=L),gf(oe.return,L,S),Ve.lanes|=L;break}tt=tt.next}}else if(oe.tag===10)Ee=oe.type===S.type?null:oe.child;else if(oe.tag===18){if(Ee=oe.return,Ee===null)throw Error(n(341));Ee.lanes|=L,Ve=Ee.alternate,Ve!==null&&(Ve.lanes|=L),gf(Ee,L,S),Ee=oe.sibling}else Ee=oe.child;if(Ee!==null)Ee.return=oe;else for(Ee=oe;Ee!==null;){if(Ee===S){Ee=null;break}if(oe=Ee.sibling,oe!==null){oe.return=Ee.return,Ee=oe;break}Ee=Ee.return}oe=Ee}ir(_,S,te.children,L),S=S.child}return S;case 9:return te=S.type,H=S.pendingProps.children,Tl(S,L),te=Zs(te),H=H(te),S.flags|=1,ir(_,S,H,L),S.child;case 14:return H=S.type,te=Mo(H,S.pendingProps),te=Mo(H.type,te),ro(_,S,H,te,L);case 15:return yt(_,S,S.type,S.pendingProps,L);case 17:return H=S.type,te=S.pendingProps,te=S.elementType===H?te:Mo(H,te),my(_,S),S.tag=1,ns(H)?(_=!0,ou(S)):_=!1,Tl(S,L),M(S,H,te),G(S,H,te,L),Nr(null,S,H,!0,_,L);case 19:return sS(_,S,L);case 22:return ct(_,S,L)}throw Error(n(156,S.tag))};function RS(_,S){return mr(_,S)}function JR(_,S,L,H){this.tag=_,this.key=L,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=S,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=H,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ta(_,S,L,H){return new JR(_,S,L,H)}function u1(_){return _=_.prototype,!(!_||!_.isReactComponent)}function KR(_){if(typeof _=="function")return u1(_)?1:0;if(_!=null){if(_=_.$$typeof,_===N)return 11;if(_===X)return 14}return 2}function vc(_,S){var L=_.alternate;return L===null?(L=Ta(_.tag,S,_.key,_.mode),L.elementType=_.elementType,L.type=_.type,L.stateNode=_.stateNode,L.alternate=_,_.alternate=L):(L.pendingProps=S,L.type=_.type,L.flags=0,L.subtreeFlags=0,L.deletions=null),L.flags=_.flags&14680064,L.childLanes=_.childLanes,L.lanes=_.lanes,L.child=_.child,L.memoizedProps=_.memoizedProps,L.memoizedState=_.memoizedState,L.updateQueue=_.updateQueue,S=_.dependencies,L.dependencies=S===null?null:{lanes:S.lanes,firstContext:S.firstContext},L.sibling=_.sibling,L.index=_.index,L.ref=_.ref,L}function Ey(_,S,L,H,te,oe){var Ee=2;if(H=_,typeof _=="function")u1(_)&&(Ee=1);else if(typeof _=="string")Ee=5;else e:switch(_){case C:return Pf(L.children,te,oe,S);case P:Ee=8,te|=8;break;case I:return _=Ta(12,L,S,te|2),_.elementType=I,_.lanes=oe,_;case O:return _=Ta(13,L,S,te),_.elementType=O,_.lanes=oe,_;case W:return _=Ta(19,L,S,te),_.elementType=W,_.lanes=oe,_;case ee:return Ty(L,te,oe,S);default:if(typeof _=="object"&&_!==null)switch(_.$$typeof){case D:Ee=10;break e;case j:Ee=9;break e;case N:Ee=11;break e;case X:Ee=14;break e;case J:Ee=16,H=null;break e}throw Error(n(130,_==null?_:typeof _,""))}return S=Ta(Ee,L,S,te),S.elementType=_,S.type=H,S.lanes=oe,S}function Pf(_,S,L,H){return _=Ta(7,_,H,S),_.lanes=L,_}function Ty(_,S,L,H){return _=Ta(22,_,H,S),_.elementType=ee,_.lanes=L,_.stateNode={isHidden:!1},_}function c1(_,S,L){return _=Ta(6,_,null,S),_.lanes=L,_}function f1(_,S,L){return S=Ta(4,_.children!==null?_.children:[],_.key,S),S.lanes=L,S.stateNode={containerInfo:_.containerInfo,pendingChildren:null,implementation:_.implementation},S}function QR(_,S,L,H,te){this.tag=S,this.containerInfo=_,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=fi(0),this.expirationTimes=fi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fi(0),this.identifierPrefix=H,this.onRecoverableError=te,this.mutableSourceEagerHydrationData=null}function d1(_,S,L,H,te,oe,Ee,Ve,tt){return _=new QR(_,S,L,Ve,tt),S===1?(S=1,oe===!0&&(S|=8)):S=0,oe=Ta(3,null,null,S),_.current=oe,oe.stateNode=_,oe.memoizedState={element:H,isDehydrated:L,cache:null,transitions:null,pendingSuspenseBoundaries:null},zr(oe),_}function ZR(_,S,L){var H=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:R,key:H==null?null:""+H,children:_,containerInfo:S,implementation:L}}function PS(_){if(!_)return Wa;_=_._reactInternals;e:{if(jr(_)!==_||_.tag!==1)throw Error(n(170));var S=_;do{switch(S.tag){case 3:S=S.stateNode.context;break e;case 1:if(ns(S.type)){S=S.stateNode.__reactInternalMemoizedMergedChildContext;break e}}S=S.return}while(S!==null);throw Error(n(171))}if(_.tag===1){var L=_.type;if(ns(L))return uf(_,L,S)}return S}function IS(_,S,L,H,te,oe,Ee,Ve,tt){return _=d1(L,H,!0,_,te,oe,Ee,Ve,tt),_.context=PS(null),L=_.current,H=no(),te=gc(L),oe=Cn(H,te),oe.callback=S??null,Wn(L,oe,te),_.current.lanes=te,ni(_,te,H),Eo(_,H),_}function Cy(_,S,L,H){var te=S.current,oe=no(),Ee=gc(te);return L=PS(L),S.context===null?S.context=L:S.pendingContext=L,S=Cn(oe,Ee),S.payload={element:_},H=H===void 0?null:H,H!==null&&(S.callback=H),_=Wn(te,S,Ee),_!==null&&(il(_,te,Ee,oe),is(_,te,Ee)),Ee}function Ry(_){if(_=_.current,!_.child)return null;switch(_.child.tag){case 5:return _.child.stateNode;default:return _.child.stateNode}}function jS(_,S){if(_=_.memoizedState,_!==null&&_.dehydrated!==null){var L=_.retryLane;_.retryLane=L!==0&&L<S?L:S}}function h1(_,S){jS(_,S),(_=_.alternate)&&jS(_,S)}var LS=typeof reportError=="function"?reportError:function(_){console.error(_)};function p1(_){this._internalRoot=_}Py.prototype.render=p1.prototype.render=function(_){var S=this._internalRoot;if(S===null)throw Error(n(409));Cy(_,S,null,null)},Py.prototype.unmount=p1.prototype.unmount=function(){var _=this._internalRoot;if(_!==null){this._internalRoot=null;var S=_.containerInfo;Tf(function(){Cy(null,_,null,null)}),S[Qs]=null}};function Py(_){this._internalRoot=_}Py.prototype.unstable_scheduleHydration=function(_){if(_){var S=Xl();_={blockedOn:null,target:_,priority:S};for(var L=0;L<ha.length&&S!==0&&S<ha[L].priority;L++);ha.splice(L,0,_),L===0&&ps(_)}};function m1(_){return!(!_||_.nodeType!==1&&_.nodeType!==9&&_.nodeType!==11)}function Iy(_){return!(!_||_.nodeType!==1&&_.nodeType!==9&&_.nodeType!==11&&(_.nodeType!==8||_.nodeValue!==" react-mount-point-unstable "))}function DS(){}function $R(_,S,L,H,te){if(te){if(typeof H=="function"){var oe=H;H=function(){var _t=Ry(Ee);oe.call(_t)}}var Ee=IS(S,H,_,0,null,!1,!1,"",DS);return _._reactRootContainer=Ee,_[Qs]=Ee.current,rc(_.nodeType===8?_.parentNode:_),Tf(),Ee}for(;te=_.lastChild;)_.removeChild(te);if(typeof H=="function"){var Ve=H;H=function(){var _t=Ry(tt);Ve.call(_t)}}var tt=d1(_,0,!1,null,null,!1,!1,"",DS);return _._reactRootContainer=tt,_[Qs]=tt.current,rc(_.nodeType===8?_.parentNode:_),Tf(function(){Cy(S,tt,L,H)}),tt}function jy(_,S,L,H,te){var oe=L._reactRootContainer;if(oe){var Ee=oe;if(typeof te=="function"){var Ve=te;te=function(){var tt=Ry(Ee);Ve.call(tt)}}Cy(S,Ee,_,te)}else Ee=$R(L,S,_,te,H);return Ry(Ee)}_l=function(_){switch(_.tag){case 3:var S=_.stateNode;if(S.current.memoizedState.isDehydrated){var L=Or(S.pendingLanes);L!==0&&(Bn(S,L|1),Eo(S,Ze()),!(xn&6)&&(bh=Ze()+500,wa()))}break;case 13:Tf(function(){var H=Wo(_,1);if(H!==null){var te=no();il(H,_,1,te)}}),h1(_,1)}},Yu=function(_){if(_.tag===13){var S=Wo(_,134217728);if(S!==null){var L=no();il(S,_,134217728,L)}h1(_,134217728)}},Oa=function(_){if(_.tag===13){var S=gc(_),L=Wo(_,S);if(L!==null){var H=no();il(L,_,S,H)}h1(_,S)}},Xl=function(){return Gr},qu=function(_,S){var L=Gr;try{return Gr=_,S()}finally{Gr=L}},it=function(_,S,L){switch(S){case"input":if(Ae(_,L),S=L.name,L.type==="radio"&&S!=null){for(L=_;L.parentNode;)L=L.parentNode;for(L=L.querySelectorAll("input[name="+JSON.stringify(""+S)+'][type="radio"]'),S=0;S<L.length;S++){var H=L[S];if(H!==_&&H.form===_.form){var te=ih(H);if(!te)throw Error(n(90));xe(H),Ae(H,te)}}}break;case"textarea":Ke(_,L);break;case"select":S=L.value,S!=null&&_e(_,!!L.multiple,S,!1)}},Dt=o1,yr=Tf;var eP={usingClientEntryPoint:!1,Events:[Va,oi,ih,vt,Rt,o1]},gm={findFiberByHostInstance:Al,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},tP={bundleType:gm.bundleType,version:gm.version,rendererPackageName:gm.rendererPackageName,rendererConfig:gm.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(_){return _=Gt(_),_===null?null:_.stateNode},findFiberByHostInstance:gm.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ly=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ly.isDisabled&&Ly.supportsFiber)try{Kt=Ly.inject(tP),It=Ly}catch{}}return To.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eP,To.createPortal=function(_,S){var L=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m1(S))throw Error(n(200));return ZR(_,S,null,L)},To.createRoot=function(_,S){if(!m1(_))throw Error(n(299));var L=!1,H="",te=LS;return S!=null&&(S.unstable_strictMode===!0&&(L=!0),S.identifierPrefix!==void 0&&(H=S.identifierPrefix),S.onRecoverableError!==void 0&&(te=S.onRecoverableError)),S=d1(_,1,!1,null,null,L,!1,H,te),_[Qs]=S.current,rc(_.nodeType===8?_.parentNode:_),new p1(S)},To.findDOMNode=function(_){if(_==null)return null;if(_.nodeType===1)return _;var S=_._reactInternals;if(S===void 0)throw typeof _.render=="function"?Error(n(188)):(_=Object.keys(_).join(","),Error(n(268,_)));return _=Gt(S),_=_===null?null:_.stateNode,_},To.flushSync=function(_){return Tf(_)},To.hydrate=function(_,S,L){if(!Iy(S))throw Error(n(200));return jy(null,_,S,!0,L)},To.hydrateRoot=function(_,S,L){if(!m1(_))throw Error(n(405));var H=L!=null&&L.hydratedSources||null,te=!1,oe="",Ee=LS;if(L!=null&&(L.unstable_strictMode===!0&&(te=!0),L.identifierPrefix!==void 0&&(oe=L.identifierPrefix),L.onRecoverableError!==void 0&&(Ee=L.onRecoverableError)),S=IS(S,null,_,1,L??null,te,!1,oe,Ee),_[Qs]=S.current,rc(_),H)for(_=0;_<H.length;_++)L=H[_],te=L._getVersion,te=te(L._source),S.mutableSourceEagerHydrationData==null?S.mutableSourceEagerHydrationData=[L,te]:S.mutableSourceEagerHydrationData.push(L,te);return new Py(S)},To.render=function(_,S,L){if(!Iy(S))throw Error(n(200));return jy(null,_,S,!1,L)},To.unmountComponentAtNode=function(_){if(!Iy(_))throw Error(n(40));return _._reactRootContainer?(Tf(function(){jy(null,null,_,!1,function(){_._reactRootContainer=null,_[Qs]=null})}),!0):!1},To.unstable_batchedUpdates=o1,To.unstable_renderSubtreeIntoContainer=function(_,S,L,H){if(!Iy(L))throw Error(n(200));if(_==null||_._reactInternals===void 0)throw Error(n(38));return jy(_,S,L,!1,H)},To.version="18.3.1-next-f1338f8080-20240426",To}var HS;function uP(){if(HS)return v1.exports;HS=1;function d(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(d)}catch(t){console.error(t)}}return d(),v1.exports=lP(),v1.exports}var zS;function cP(){if(zS)return Dy;zS=1;var d=uP();return Dy.createRoot=d.createRoot,Dy.hydrateRoot=d.hydrateRoot,Dy}var fP=cP();const dP=Ob(fP),hP={Date:!0,RegExp:!0,String:!0,Number:!0};function zA(d,t,n={cyclesFix:!0},r=[]){var i,o;let s=[];const a=Array.isArray(d);for(const u in d){const h=d[u],p=a?+u:u;if(!(u in t)){s.push({type:"REMOVE",path:[p],oldValue:d[u]});continue}const c=t[u],f=typeof h=="object"&&typeof c=="object"&&Array.isArray(h)===Array.isArray(c);if(h&&c&&f&&!hP[(o=(i=Object.getPrototypeOf(h))==null?void 0:i.constructor)==null?void 0:o.name]&&(!n.cyclesFix||!r.includes(h))){const m=zA(h,c,n,n.cyclesFix?r.concat([h]):[]);s.push.apply(s,m.map(y=>(y.path.unshift(p),y)))}else h!==c&&!(Number.isNaN(h)&&Number.isNaN(c))&&!(f&&(isNaN(h)?h+""==c+"":+h==+c))&&s.push({path:[p],type:"CHANGE",value:c,oldValue:h})}const l=Array.isArray(t);for(const u in t)u in d||s.push({type:"CREATE",path:[l?+u:u],value:t[u]});return s}function pP(d,t){return zA(d,t).length===0}var By=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function mP(d){return d&&d.__esModule&&Object.prototype.hasOwnProperty.call(d,"default")?d.default:d}var VA={exports:{}},vm={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VS;function gP(){if(VS)return vm;VS=1;var d=Vx,t=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=d.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function s(a,l,u){var h,p={},c=null,f=null;u!==void 0&&(c=""+u),l.key!==void 0&&(c=""+l.key),l.ref!==void 0&&(f=l.ref);for(h in l)r.call(l,h)&&!o.hasOwnProperty(h)&&(p[h]=l[h]);if(a&&a.defaultProps)for(h in l=a.defaultProps,l)p[h]===void 0&&(p[h]=l[h]);return{$$typeof:t,type:a,key:c,ref:f,props:p,_owner:i.current}}return vm.Fragment=n,vm.jsx=s,vm.jsxs=s,vm}VA.exports=gP();var Y0=VA.exports;const yP="react-p5-wrapper";function ky(d){throw new Error('Could not dynamically require "'+d+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var WA={exports:{}};/*! p5.js v1.9.4 May 21, 2024 */(function(d,t){(function(n){d.exports=n()})(function(){var n;return function r(i,o,s){function a(h,p){if(!o[h]){if(!i[h]){var c=typeof ky=="function"&&ky;if(!p&&c)return c(h,!0);if(l)return l(h,!0);throw(p=new Error("Cannot find module '"+h+"'")).code="MODULE_NOT_FOUND",p}c=o[h]={exports:{}},i[h][0].call(c.exports,function(f){return a(i[h][1][f]||f)},c,c.exports,r,i,o,s)}return o[h].exports}for(var l=typeof ky=="function"&&ky,u=0;u<s.length;u++)a(s[u]);return a}({1:[function(r,i,o){o.byteLength=function(y){var y=c(y),m=y[0],y=y[1];return 3*(m+y)/4-y},o.toByteArray=function(f){var m,y,g=c(f),v=g[0],g=g[1],x=new l(function(T,R){return 3*(T+R)/4-R}(v,g)),b=0,w=0<g?v-4:v;for(y=0;y<w;y+=4)m=a[f.charCodeAt(y)]<<18|a[f.charCodeAt(y+1)]<<12|a[f.charCodeAt(y+2)]<<6|a[f.charCodeAt(y+3)],x[b++]=m>>16&255,x[b++]=m>>8&255,x[b++]=255&m;return g===2&&(m=a[f.charCodeAt(y)]<<2|a[f.charCodeAt(y+1)]>>4,x[b++]=255&m),g===1&&(m=a[f.charCodeAt(y)]<<10|a[f.charCodeAt(y+1)]<<4|a[f.charCodeAt(y+2)]>>2,x[b++]=m>>8&255,x[b++]=255&m),x},o.fromByteArray=function(f){for(var m,y=f.length,v=y%3,g=[],x=0,b=y-v;x<b;x+=16383)g.push(function(w,T,R){for(var C,P=[],I=T;I<R;I+=3)C=(w[I]<<16&16711680)+(w[I+1]<<8&65280)+(255&w[I+2]),P.push(function(D){return s[D>>18&63]+s[D>>12&63]+s[D>>6&63]+s[63&D]}(C));return P.join("")}(f,x,b<x+16383?b:x+16383));return v==1?(m=f[y-1],g.push(s[m>>2]+s[m<<4&63]+"==")):v==2&&(m=(f[y-2]<<8)+f[y-1],g.push(s[m>>10]+s[m>>4&63]+s[m<<2&63]+"=")),g.join("")};for(var s=[],a=[],l=typeof Uint8Array<"u"?Uint8Array:Array,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h=0,p=u.length;h<p;++h)s[h]=u[h],a[u.charCodeAt(h)]=h;function c(f){var m=f.length;if(0<m%4)throw new Error("Invalid string. Length must be a multiple of 4");return f=f.indexOf("="),m=(f=f===-1?m:f)===m?0:4-f%4,[f,m]}a[45]=62,a[95]=63},{}],2:[function(r,i,o){},{}],3:[function(r,i,o){},{}],4:[function(r,i,o){(function(c){var a=r("base64-js"),l=r("ieee754"),u=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null,h=(o.Buffer=c,o.SlowBuffer=function(B){return+B!=B&&(B=0),c.alloc(+B)},o.INSPECT_MAX_BYTES=50,2147483647);function p(B){if(h<B)throw new RangeError('The value "'+B+'" is invalid for option "size"');return B=new Uint8Array(B),Object.setPrototypeOf(B,c.prototype),B}function c(B,U,K){if(typeof B!="number")return f(B,U,K);if(typeof U=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return y(B)}function f(B,U,K){if(typeof B=="string"){var re=B,ae=U;if(c.isEncoding(ae=typeof ae=="string"&&ae!==""?ae:"utf8"))return pe=0|x(re,ae),ye=p(pe),ye=(re=ye.write(re,ae))!==pe?ye.slice(0,re):ye;throw new TypeError("Unknown encoding: "+ae)}if(ArrayBuffer.isView(B))return v(B);if(B!=null){if(Y(B,ArrayBuffer)||B&&Y(B.buffer,ArrayBuffer)){var pe=B,re=U,ye=K;if(re<0||pe.byteLength<re)throw new RangeError('"offset" is outside of buffer bounds');if(pe.byteLength<re+(ye||0))throw new RangeError('"length" is outside of buffer bounds');return pe=re===void 0&&ye===void 0?new Uint8Array(pe):ye===void 0?new Uint8Array(pe,re):new Uint8Array(pe,re,ye),Object.setPrototypeOf(pe,c.prototype),pe}if(typeof B=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');if(ae=B.valueOf&&B.valueOf(),ae!=null&&ae!==B)return c.from(ae,U,K);var Re=function(Me){{var xe,ve;if(c.isBuffer(Me))return xe=0|g(Me.length),(ve=p(xe)).length!==0&&Me.copy(ve,0,0,xe),ve}if(Me.length!==void 0)return typeof Me.length!="number"||Z(Me.length)?p(0):v(Me);if(Me.type==="Buffer"&&Array.isArray(Me.data))return v(Me.data)}(B);if(Re)return Re;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof B[Symbol.toPrimitive]=="function")return c.from(B[Symbol.toPrimitive]("string"),U,K)}throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof B)}function m(B){if(typeof B!="number")throw new TypeError('"size" argument must be of type number');if(B<0)throw new RangeError('The value "'+B+'" is invalid for option "size"')}function y(B){return m(B),p(B<0?0:0|g(B))}function v(B){for(var U=B.length<0?0:0|g(B.length),K=p(U),re=0;re<U;re+=1)K[re]=255&B[re];return K}function g(B){if(h<=B)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+h.toString(16)+" bytes");return 0|B}function x(B,U){if(c.isBuffer(B))return B.length;if(ArrayBuffer.isView(B)||Y(B,ArrayBuffer))return B.byteLength;if(typeof B!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof B);var K=B.length,re=2<arguments.length&&arguments[2]===!0;if(!re&&K===0)return 0;for(var ae=!1;;)switch(U){case"ascii":case"latin1":case"binary":return K;case"utf8":case"utf-8":return ee(B).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*K;case"hex":return K>>>1;case"base64":return V(B).length;default:if(ae)return re?-1:ee(B).length;U=(""+U).toLowerCase(),ae=!0}}function b(B,U,K){var re,ae=!1;if((U=U===void 0||U<0?0:U)>this.length||(K=K===void 0||K>this.length?this.length:K)<=0||(K>>>=0)<=(U>>>=0))return"";for(B=B||"utf8";;)switch(B){case"hex":var pe=this,je=U,ye=K,ve=pe.length;(!ye||ye<0||ve<ye)&&(ye=ve);for(var Re="",Me=je=!je||je<0?0:je;Me<ye;++Me)Re+=ce[pe[Me]];return Re;case"utf8":case"utf-8":return I(this,U,K);case"ascii":var xe=this,ve=U,ne=K,Te="";ne=Math.min(xe.length,ne);for(var Pe=ve;Pe<ne;++Pe)Te+=String.fromCharCode(127&xe[Pe]);return Te;case"latin1":case"binary":var Ae=this,je=U,Ue=K,Ge="";Ue=Math.min(Ae.length,Ue);for(var _e=je;_e<Ue;++_e)Ge+=String.fromCharCode(Ae[_e]);return Ge;case"base64":return fe=this,re=K,(We=U)===0&&re===fe.length?a.fromByteArray(fe):a.fromByteArray(fe.slice(We,re));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":for(var fe=U,We=K,Ke=this.slice(fe,We),$e="",et=0;et<Ke.length;et+=2)$e+=String.fromCharCode(Ke[et]+256*Ke[et+1]);return $e;default:if(ae)throw new TypeError("Unknown encoding: "+B);B=(B+"").toLowerCase(),ae=!0}}function w(B,U,K){var re=B[U];B[U]=B[K],B[K]=re}function T(B,U,K,re,ae){if(B.length===0)return-1;if(typeof K=="string"?(re=K,K=0):2147483647<K?K=2147483647:K<-2147483648&&(K=-2147483648),(K=(K=Z(K=+K)?ae?0:B.length-1:K)<0?B.length+K:K)>=B.length){if(ae)return-1;K=B.length-1}else if(K<0){if(!ae)return-1;K=0}if(typeof U=="string"&&(U=c.from(U,re)),c.isBuffer(U))return U.length===0?-1:R(B,U,K,re,ae);if(typeof U=="number")return U&=255,typeof Uint8Array.prototype.indexOf=="function"?(ae?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(B,U,K):R(B,[U],K,re,ae);throw new TypeError("val must be string, number or Buffer")}function R(B,U,K,re,ae){var pe=1,ye=B.length,Re=U.length;if(re!==void 0&&((re=String(re).toLowerCase())==="ucs2"||re==="ucs-2"||re==="utf16le"||re==="utf-16le")){if(B.length<2||U.length<2)return-1;ye/=pe=2,Re/=2,K/=2}function Me(Pe,Ae){return pe===1?Pe[Ae]:Pe.readUInt16BE(Ae*pe)}if(ae)for(var xe=-1,ve=K;ve<ye;ve++)if(Me(B,ve)===Me(U,xe===-1?0:ve-xe)){if(ve-(xe=xe===-1?ve:xe)+1===Re)return xe*pe}else xe!==-1&&(ve-=ve-xe),xe=-1;else for(ve=K=ye<K+Re?ye-Re:K;0<=ve;ve--){for(var ne=!0,Te=0;Te<Re;Te++)if(Me(B,ve+Te)!==Me(U,Te)){ne=!1;break}if(ne)return ve}return-1}function C(B,U,K,re){return q(function(ae){for(var pe=[],ye=0;ye<ae.length;++ye)pe.push(255&ae.charCodeAt(ye));return pe}(U),B,K,re)}function P(B,U,K,re){return q(function(ae,pe){for(var ye,Re,Me=[],xe=0;xe<ae.length&&!((pe-=2)<0);++xe)Re=ae.charCodeAt(xe),ye=Re>>8,Re=Re%256,Me.push(Re),Me.push(ye);return Me}(U,B.length-K),B,K,re)}function I(B,U,K){K=Math.min(B.length,K);for(var re=[],ae=U;ae<K;){var pe,ye,Re,Me,xe=B[ae],ve=null,ne=239<xe?4:223<xe?3:191<xe?2:1;if(ae+ne<=K)switch(ne){case 1:xe<128&&(ve=xe);break;case 2:(192&(pe=B[ae+1]))==128&&127<(Me=(31&xe)<<6|63&pe)&&(ve=Me);break;case 3:pe=B[ae+1],ye=B[ae+2],(192&pe)==128&&(192&ye)==128&&2047<(Me=(15&xe)<<12|(63&pe)<<6|63&ye)&&(Me<55296||57343<Me)&&(ve=Me);break;case 4:pe=B[ae+1],ye=B[ae+2],Re=B[ae+3],(192&pe)==128&&(192&ye)==128&&(192&Re)==128&&65535<(Me=(15&xe)<<18|(63&pe)<<12|(63&ye)<<6|63&Re)&&Me<1114112&&(ve=Me)}ve===null?(ve=65533,ne=1):65535<ve&&(ve-=65536,re.push(ve>>>10&1023|55296),ve=56320|1023&ve),re.push(ve),ae+=ne}var Te=re,Pe=Te.length;if(Pe<=D)return String.fromCharCode.apply(String,Te);for(var Ae="",je=0;je<Pe;)Ae+=String.fromCharCode.apply(String,Te.slice(je,je+=D));return Ae}o.kMaxLength=h,(c.TYPED_ARRAY_SUPPORT=function(){try{var B=new Uint8Array(1),U={foo:function(){return 42}};return Object.setPrototypeOf(U,Uint8Array.prototype),Object.setPrototypeOf(B,U),B.foo()===42}catch{return!1}}())||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}}),typeof Symbol<"u"&&Symbol.species!=null&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),c.poolSize=8192,c.from=f,Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array),c.alloc=function(B,U,K){return U=U,K=K,m(B=B),!(B<=0)&&U!==void 0?typeof K=="string"?p(B).fill(U,K):p(B).fill(U):p(B)},c.allocUnsafe=y,c.allocUnsafeSlow=y,c.isBuffer=function(B){return B!=null&&B._isBuffer===!0&&B!==c.prototype},c.compare=function(B,U){if(Y(B,Uint8Array)&&(B=c.from(B,B.offset,B.byteLength)),Y(U,Uint8Array)&&(U=c.from(U,U.offset,U.byteLength)),!c.isBuffer(B)||!c.isBuffer(U))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(B===U)return 0;for(var K=B.length,re=U.length,ae=0,pe=Math.min(K,re);ae<pe;++ae)if(B[ae]!==U[ae]){K=B[ae],re=U[ae];break}return K<re?-1:re<K?1:0},c.isEncoding=function(B){switch(String(B).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(B,U){if(!Array.isArray(B))throw new TypeError('"list" argument must be an Array of Buffers');if(B.length===0)return c.alloc(0);if(U===void 0)for(ae=U=0;ae<B.length;++ae)U+=B[ae].length;for(var K=c.allocUnsafe(U),re=0,ae=0;ae<B.length;++ae){var pe=B[ae];if(Y(pe,Uint8Array)&&(pe=c.from(pe)),!c.isBuffer(pe))throw new TypeError('"list" argument must be an Array of Buffers');pe.copy(K,re),re+=pe.length}return K},c.byteLength=x,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var B=this.length;if(B%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var U=0;U<B;U+=2)w(this,U,U+1);return this},c.prototype.swap32=function(){var B=this.length;if(B%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var U=0;U<B;U+=4)w(this,U,U+3),w(this,U+1,U+2);return this},c.prototype.swap64=function(){var B=this.length;if(B%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var U=0;U<B;U+=8)w(this,U,U+7),w(this,U+1,U+6),w(this,U+2,U+5),w(this,U+3,U+4);return this},c.prototype.toLocaleString=c.prototype.toString=function(){var B=this.length;return B===0?"":arguments.length===0?I(this,0,B):b.apply(this,arguments)},c.prototype.equals=function(B){if(c.isBuffer(B))return this===B||c.compare(this,B)===0;throw new TypeError("Argument must be a Buffer")},c.prototype.inspect=function(){var U="",B=o.INSPECT_MAX_BYTES,U=this.toString("hex",0,B).replace(/(.{2})/g,"$1 ").trim();return this.length>B&&(U+=" ... "),"<Buffer "+U+">"},u&&(c.prototype[u]=c.prototype.inspect),c.prototype.compare=function(B,U,K,re,ae){if(Y(B,Uint8Array)&&(B=c.from(B,B.offset,B.byteLength)),!c.isBuffer(B))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof B);if(K===void 0&&(K=B?B.length:0),re===void 0&&(re=0),ae===void 0&&(ae=this.length),(U=U===void 0?0:U)<0||K>B.length||re<0||ae>this.length)throw new RangeError("out of range index");if(ae<=re&&K<=U)return 0;if(ae<=re)return-1;if(K<=U)return 1;if(this===B)return 0;for(var pe=(ae>>>=0)-(re>>>=0),ye=(K>>>=0)-(U>>>=0),Re=Math.min(pe,ye),Me=this.slice(re,ae),xe=B.slice(U,K),ve=0;ve<Re;++ve)if(Me[ve]!==xe[ve]){pe=Me[ve],ye=xe[ve];break}return pe<ye?-1:ye<pe?1:0},c.prototype.includes=function(B,U,K){return this.indexOf(B,U,K)!==-1},c.prototype.indexOf=function(B,U,K){return T(this,B,U,K,!0)},c.prototype.lastIndexOf=function(B,U,K){return T(this,B,U,K,!1)},c.prototype.write=function(B,U,K,re){if(U===void 0)re="utf8",K=this.length,U=0;else if(K===void 0&&typeof U=="string")re=U,K=this.length,U=0;else{if(!isFinite(U))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");U>>>=0,isFinite(K)?(K>>>=0,re===void 0&&(re="utf8")):(re=K,K=void 0)}var ae=this.length-U;if((K===void 0||ae<K)&&(K=ae),0<B.length&&(K<0||U<0)||U>this.length)throw new RangeError("Attempt to write outside buffer bounds");re=re||"utf8";for(var pe,ye,Re,Me=!1;;)switch(re){case"hex":var xe=this,ve=B,ne=U,Te=K,Pe=(ne=Number(ne)||0,xe.length-ne);(!Te||Pe<(Te=Number(Te)))&&(Te=Pe),(Pe=ve.length)/2<Te&&(Te=Pe/2);for(var Ae=0;Ae<Te;++Ae){var je=parseInt(ve.substr(2*Ae,2),16);if(Z(je))return Ae;xe[ne+Ae]=je}return Ae;case"utf8":case"utf-8":return Pe=U,Re=K,q(ee(B,(ye=this).length-Pe),ye,Pe,Re);case"ascii":return C(this,B,U,K);case"latin1":case"binary":return C(this,B,U,K);case"base64":return ye=this,Re=U,pe=K,q(V(B),ye,Re,pe);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,B,U,K);default:if(Me)throw new TypeError("Unknown encoding: "+re);re=(""+re).toLowerCase(),Me=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var D=4096;function j(B,U,K){if(B%1!=0||B<0)throw new RangeError("offset is not uint");if(K<B+U)throw new RangeError("Trying to access beyond buffer length")}function N(B,U,K,re,ae,pe){if(!c.isBuffer(B))throw new TypeError('"buffer" argument must be a Buffer instance');if(ae<U||U<pe)throw new RangeError('"value" argument is out of bounds');if(K+re>B.length)throw new RangeError("Index out of range")}function O(B,U,K,re){if(K+re>B.length)throw new RangeError("Index out of range");if(K<0)throw new RangeError("Index out of range")}function W(B,U,K,re,ae){return U=+U,K>>>=0,ae||O(B,0,K,4),l.write(B,U,K,re,23,4),K+4}function X(B,U,K,re,ae){return U=+U,K>>>=0,ae||O(B,0,K,8),l.write(B,U,K,re,52,8),K+8}c.prototype.slice=function(B,U){var K=this.length,K=((B=~~B)<0?(B+=K)<0&&(B=0):K<B&&(B=K),(U=U===void 0?K:~~U)<0?(U+=K)<0&&(U=0):K<U&&(U=K),U<B&&(U=B),this.subarray(B,U));return Object.setPrototypeOf(K,c.prototype),K},c.prototype.readUIntLE=function(B,U,K){B>>>=0,U>>>=0,K||j(B,U,this.length);for(var re=this[B],ae=1,pe=0;++pe<U&&(ae*=256);)re+=this[B+pe]*ae;return re},c.prototype.readUIntBE=function(B,U,K){B>>>=0,U>>>=0,K||j(B,U,this.length);for(var re=this[B+--U],ae=1;0<U&&(ae*=256);)re+=this[B+--U]*ae;return re},c.prototype.readUInt8=function(B,U){return B>>>=0,U||j(B,1,this.length),this[B]},c.prototype.readUInt16LE=function(B,U){return B>>>=0,U||j(B,2,this.length),this[B]|this[B+1]<<8},c.prototype.readUInt16BE=function(B,U){return B>>>=0,U||j(B,2,this.length),this[B]<<8|this[B+1]},c.prototype.readUInt32LE=function(B,U){return B>>>=0,U||j(B,4,this.length),(this[B]|this[B+1]<<8|this[B+2]<<16)+16777216*this[B+3]},c.prototype.readUInt32BE=function(B,U){return B>>>=0,U||j(B,4,this.length),16777216*this[B]+(this[B+1]<<16|this[B+2]<<8|this[B+3])},c.prototype.readIntLE=function(B,U,K){B>>>=0,U>>>=0,K||j(B,U,this.length);for(var re=this[B],ae=1,pe=0;++pe<U&&(ae*=256);)re+=this[B+pe]*ae;return(ae*=128)<=re&&(re-=Math.pow(2,8*U)),re},c.prototype.readIntBE=function(B,U,K){B>>>=0,U>>>=0,K||j(B,U,this.length);for(var re=U,ae=1,pe=this[B+--re];0<re&&(ae*=256);)pe+=this[B+--re]*ae;return(ae*=128)<=pe&&(pe-=Math.pow(2,8*U)),pe},c.prototype.readInt8=function(B,U){return B>>>=0,U||j(B,1,this.length),128&this[B]?-1*(255-this[B]+1):this[B]},c.prototype.readInt16LE=function(B,U){return B>>>=0,U||j(B,2,this.length),U=this[B]|this[B+1]<<8,32768&U?4294901760|U:U},c.prototype.readInt16BE=function(B,U){return B>>>=0,U||j(B,2,this.length),U=this[B+1]|this[B]<<8,32768&U?4294901760|U:U},c.prototype.readInt32LE=function(B,U){return B>>>=0,U||j(B,4,this.length),this[B]|this[B+1]<<8|this[B+2]<<16|this[B+3]<<24},c.prototype.readInt32BE=function(B,U){return B>>>=0,U||j(B,4,this.length),this[B]<<24|this[B+1]<<16|this[B+2]<<8|this[B+3]},c.prototype.readFloatLE=function(B,U){return B>>>=0,U||j(B,4,this.length),l.read(this,B,!0,23,4)},c.prototype.readFloatBE=function(B,U){return B>>>=0,U||j(B,4,this.length),l.read(this,B,!1,23,4)},c.prototype.readDoubleLE=function(B,U){return B>>>=0,U||j(B,8,this.length),l.read(this,B,!0,52,8)},c.prototype.readDoubleBE=function(B,U){return B>>>=0,U||j(B,8,this.length),l.read(this,B,!1,52,8)},c.prototype.writeUIntLE=function(B,U,K,re){B=+B,U>>>=0,K>>>=0,re||N(this,B,U,K,Math.pow(2,8*K)-1,0);var ae=1,pe=0;for(this[U]=255&B;++pe<K&&(ae*=256);)this[U+pe]=B/ae&255;return U+K},c.prototype.writeUIntBE=function(B,U,K,re){B=+B,U>>>=0,K>>>=0,re||N(this,B,U,K,Math.pow(2,8*K)-1,0);var ae=K-1,pe=1;for(this[U+ae]=255&B;0<=--ae&&(pe*=256);)this[U+ae]=B/pe&255;return U+K},c.prototype.writeUInt8=function(B,U,K){return B=+B,U>>>=0,K||N(this,B,U,1,255,0),this[U]=255&B,U+1},c.prototype.writeUInt16LE=function(B,U,K){return B=+B,U>>>=0,K||N(this,B,U,2,65535,0),this[U]=255&B,this[U+1]=B>>>8,U+2},c.prototype.writeUInt16BE=function(B,U,K){return B=+B,U>>>=0,K||N(this,B,U,2,65535,0),this[U]=B>>>8,this[U+1]=255&B,U+2},c.prototype.writeUInt32LE=function(B,U,K){return B=+B,U>>>=0,K||N(this,B,U,4,4294967295,0),this[U+3]=B>>>24,this[U+2]=B>>>16,this[U+1]=B>>>8,this[U]=255&B,U+4},c.prototype.writeUInt32BE=function(B,U,K){return B=+B,U>>>=0,K||N(this,B,U,4,4294967295,0),this[U]=B>>>24,this[U+1]=B>>>16,this[U+2]=B>>>8,this[U+3]=255&B,U+4},c.prototype.writeIntLE=function(B,U,K,re){B=+B,U>>>=0,re||N(this,B,U,K,(re=Math.pow(2,8*K-1))-1,-re);var ae=0,pe=1,ye=0;for(this[U]=255&B;++ae<K&&(pe*=256);)B<0&&ye===0&&this[U+ae-1]!==0&&(ye=1),this[U+ae]=(B/pe>>0)-ye&255;return U+K},c.prototype.writeIntBE=function(B,U,K,re){B=+B,U>>>=0,re||N(this,B,U,K,(re=Math.pow(2,8*K-1))-1,-re);var ae=K-1,pe=1,ye=0;for(this[U+ae]=255&B;0<=--ae&&(pe*=256);)B<0&&ye===0&&this[U+ae+1]!==0&&(ye=1),this[U+ae]=(B/pe>>0)-ye&255;return U+K},c.prototype.writeInt8=function(B,U,K){return B=+B,U>>>=0,K||N(this,B,U,1,127,-128),this[U]=255&(B=B<0?255+B+1:B),U+1},c.prototype.writeInt16LE=function(B,U,K){return B=+B,U>>>=0,K||N(this,B,U,2,32767,-32768),this[U]=255&B,this[U+1]=B>>>8,U+2},c.prototype.writeInt16BE=function(B,U,K){return B=+B,U>>>=0,K||N(this,B,U,2,32767,-32768),this[U]=B>>>8,this[U+1]=255&B,U+2},c.prototype.writeInt32LE=function(B,U,K){return B=+B,U>>>=0,K||N(this,B,U,4,2147483647,-2147483648),this[U]=255&B,this[U+1]=B>>>8,this[U+2]=B>>>16,this[U+3]=B>>>24,U+4},c.prototype.writeInt32BE=function(B,U,K){return B=+B,U>>>=0,K||N(this,B,U,4,2147483647,-2147483648),this[U]=(B=B<0?4294967295+B+1:B)>>>24,this[U+1]=B>>>16,this[U+2]=B>>>8,this[U+3]=255&B,U+4},c.prototype.writeFloatLE=function(B,U,K){return W(this,B,U,!0,K)},c.prototype.writeFloatBE=function(B,U,K){return W(this,B,U,!1,K)},c.prototype.writeDoubleLE=function(B,U,K){return X(this,B,U,!0,K)},c.prototype.writeDoubleBE=function(B,U,K){return X(this,B,U,!1,K)},c.prototype.copy=function(B,U,K,re){if(!c.isBuffer(B))throw new TypeError("argument should be a Buffer");if(K=K||0,re||re===0||(re=this.length),U>=B.length&&(U=B.length),(re=0<re&&re<K?K:re)===K||B.length===0||this.length===0)return 0;if((U=U||0)<0)throw new RangeError("targetStart out of bounds");if(K<0||K>=this.length)throw new RangeError("Index out of range");if(re<0)throw new RangeError("sourceEnd out of bounds");re>this.length&&(re=this.length);var ae=(re=B.length-U<re-K?B.length-U+K:re)-K;if(this===B&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(U,K,re);else if(this===B&&K<U&&U<re)for(var pe=ae-1;0<=pe;--pe)B[pe+U]=this[pe+K];else Uint8Array.prototype.set.call(B,this.subarray(K,re),U);return ae},c.prototype.fill=function(B,U,K,re){if(typeof B=="string"){if(typeof U=="string"?(re=U,U=0,K=this.length):typeof K=="string"&&(re=K,K=this.length),re!==void 0&&typeof re!="string")throw new TypeError("encoding must be a string");if(typeof re=="string"&&!c.isEncoding(re))throw new TypeError("Unknown encoding: "+re);var ae;B.length===1&&(ae=B.charCodeAt(0),(re==="utf8"&&ae<128||re==="latin1")&&(B=ae))}else typeof B=="number"?B&=255:typeof B=="boolean"&&(B=Number(B));if(U<0||this.length<U||this.length<K)throw new RangeError("Out of range index");var pe;if(!(K<=U))if(U>>>=0,K=K===void 0?this.length:K>>>0,typeof(B=B||0)=="number")for(pe=U;pe<K;++pe)this[pe]=B;else{var ye=c.isBuffer(B)?B:c.from(B,re),Re=ye.length;if(Re===0)throw new TypeError('The value "'+B+'" is invalid for argument "value"');for(pe=0;pe<K-U;++pe)this[pe+U]=ye[pe%Re]}return this};var J=/[^+/0-9A-Za-z-_]/g;function ee(B,U){U=U||1/0;for(var K,re=B.length,ae=null,pe=[],ye=0;ye<re;++ye){if(55295<(K=B.charCodeAt(ye))&&K<57344){if(!ae){if(56319<K){-1<(U-=3)&&pe.push(239,191,189);continue}if(ye+1===re){-1<(U-=3)&&pe.push(239,191,189);continue}ae=K;continue}if(K<56320){-1<(U-=3)&&pe.push(239,191,189),ae=K;continue}K=65536+(ae-55296<<10|K-56320)}else ae&&-1<(U-=3)&&pe.push(239,191,189);if(ae=null,K<128){if(--U<0)break;pe.push(K)}else if(K<2048){if((U-=2)<0)break;pe.push(K>>6|192,63&K|128)}else if(K<65536){if((U-=3)<0)break;pe.push(K>>12|224,K>>6&63|128,63&K|128)}else{if(!(K<1114112))throw new Error("Invalid code point");if((U-=4)<0)break;pe.push(K>>18|240,K>>12&63|128,K>>6&63|128,63&K|128)}}return pe}function V(B){return a.toByteArray(function(U){if((U=(U=U.split("=")[0]).trim().replace(J,"")).length<2)return"";for(;U.length%4!=0;)U+="=";return U}(B))}function q(B,U,K,re){for(var ae=0;ae<re&&!(ae+K>=U.length||ae>=B.length);++ae)U[ae+K]=B[ae];return ae}function Y(B,U){return B instanceof U||B!=null&&B.constructor!=null&&B.constructor.name!=null&&B.constructor.name===U.name}function Z(B){return B!=B}var ce=function(){for(var B="0123456789abcdef",U=new Array(256),K=0;K<16;++K)for(var re=16*K,ae=0;ae<16;++ae)U[re+ae]=B[K]+B[ae];return U}()}).call(this,r("buffer").Buffer)},{"base64-js":1,buffer:4,ieee754:251}],5:[function(r,i,o){i.exports=function(s){if(typeof s!="function")throw TypeError(String(s)+" is not a function");return s}},{}],6:[function(r,i,o){var s=r("../internals/is-object");i.exports=function(a){if(s(a)||a===null)return a;throw TypeError("Can't set "+String(a)+" as a prototype")}},{"../internals/is-object":75}],7:[function(l,i,o){var s=l("../internals/well-known-symbol"),a=l("../internals/object-create"),l=l("../internals/object-define-property"),u=s("unscopables"),h=Array.prototype;h[u]==null&&l.f(h,u,{configurable:!0,value:a(null)}),i.exports=function(p){h[u][p]=!0}},{"../internals/object-create":91,"../internals/object-define-property":93,"../internals/well-known-symbol":149}],8:[function(r,i,o){var s=r("../internals/string-multibyte").charAt;i.exports=function(a,l,u){return l+(u?s(a,l).length:1)}},{"../internals/string-multibyte":124}],9:[function(r,i,o){i.exports=function(s,a,l){if(s instanceof a)return s;throw TypeError("Incorrect "+(l?l+" ":"")+"invocation")}},{}],10:[function(r,i,o){var s=r("../internals/is-object");i.exports=function(a){if(s(a))return a;throw TypeError(String(a)+" is not an object")}},{"../internals/is-object":75}],11:[function(r,i,o){i.exports=typeof ArrayBuffer<"u"&&typeof DataView<"u"},{}],12:[function(O,i,o){function s(X){return p(X)&&c(W,f(X))}var a,l=O("../internals/array-buffer-native"),u=O("../internals/descriptors"),h=O("../internals/global"),p=O("../internals/is-object"),c=O("../internals/has"),f=O("../internals/classof"),m=O("../internals/create-non-enumerable-property"),y=O("../internals/redefine"),v=O("../internals/object-define-property").f,g=O("../internals/object-get-prototype-of"),x=O("../internals/object-set-prototype-of"),D=O("../internals/well-known-symbol"),O=O("../internals/uid"),b=h.Int8Array,w=b&&b.prototype,T=h.Uint8ClampedArray,T=T&&T.prototype,R=b&&g(b),C=w&&g(w),P=Object.prototype,I=P.isPrototypeOf,D=D("toStringTag"),j=O("TYPED_ARRAY_TAG"),N=l&&!!x&&f(h.opera)!=="Opera",O=!1,W={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8};for(a in W)h[a]||(N=!1);if((!N||typeof R!="function"||R===Function.prototype)&&(R=function(){throw TypeError("Incorrect invocation")},N))for(a in W)h[a]&&x(h[a],R);if((!N||!C||C===P)&&(C=R.prototype,N))for(a in W)h[a]&&x(h[a].prototype,C);if(N&&g(T)!==C&&x(T,C),u&&!c(C,D))for(a in O=!0,v(C,D,{get:function(){return p(this)?this[j]:void 0}}),W)h[a]&&m(h[a],j,a);i.exports={NATIVE_ARRAY_BUFFER_VIEWS:N,TYPED_ARRAY_TAG:O&&j,aTypedArray:function(X){if(s(X))return X;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(X){if(x){if(I.call(R,X))return X}else for(var J in W)if(c(W,a)&&(J=h[J],J&&(X===J||I.call(J,X))))return X;throw TypeError("Target is not a typed array constructor")},exportTypedArrayMethod:function(X,J,ee){if(u){if(ee)for(var V in W)V=h[V],V&&c(V.prototype,X)&&delete V.prototype[X];C[X]&&!ee||y(C,X,!ee&&N&&w[X]||J)}},exportTypedArrayStaticMethod:function(X,J,ee){var V,q;if(u){if(x){if(ee)for(V in W)(q=h[V])&&c(q,X)&&delete q[X];if(R[X]&&!ee)return;try{return y(R,X,!ee&&N&&b[X]||J)}catch{}}for(V in W)!(q=h[V])||q[X]&&!ee||y(q,X,J)}},isView:function(X){return X=f(X),X==="DataView"||c(W,X)},isTypedArray:s,TypedArray:R,TypedArrayPrototype:C}},{"../internals/array-buffer-native":11,"../internals/classof":29,"../internals/create-non-enumerable-property":38,"../internals/descriptors":43,"../internals/global":60,"../internals/has":61,"../internals/is-object":75,"../internals/object-define-property":93,"../internals/object-get-prototype-of":98,"../internals/object-set-prototype-of":102,"../internals/redefine":109,"../internals/uid":146,"../internals/well-known-symbol":149}],13:[function(K,i,o){function s(ne){return[255&ne]}function a(ne){return[255&ne,ne>>8&255]}function l(ne){return[255&ne,ne>>8&255,ne>>16&255,ne>>24&255]}function u(ne){return ne[3]<<24|ne[2]<<16|ne[1]<<8|ne[0]}function h(ne){return pe(ne,23,4)}function p(ne){return pe(ne,52,8)}function c(ne,Te){O(ne[Y],Te,{get:function(){return J(this)[Te]}})}function f(Ge,Te,Ue,Ae){if(Ue=P(Ue),Ge=J(Ge),Ue+Te>Ge.byteLength)throw ae(Z);var je=J(Ge.buffer).bytes,Ue=Ue+Ge.byteOffset,Ge=je.slice(Ue,Ue+Te);return Ae?Ge:Ge.reverse()}function m(ne,Te,Pe,Ae,je,Ue){if(Pe=P(Pe),ne=J(ne),Pe+Te>ne.byteLength)throw ae(Z);for(var Ge=J(ne.buffer).bytes,_e=Pe+ne.byteOffset,fe=Ae(+je),We=0;We<Te;We++)Ge[_e+We]=fe[Ue?We:Te-We-1]}var y=K("../internals/global"),v=K("../internals/descriptors"),g=K("../internals/array-buffer-native"),x=K("../internals/create-non-enumerable-property"),b=K("../internals/redefine-all"),w=K("../internals/fails"),T=K("../internals/an-instance"),R=K("../internals/to-integer"),C=K("../internals/to-length"),P=K("../internals/to-index"),I=K("../internals/ieee754"),D=K("../internals/object-get-prototype-of"),j=K("../internals/object-set-prototype-of"),N=K("../internals/object-get-own-property-names").f,O=K("../internals/object-define-property").f,W=K("../internals/array-fill"),X=K("../internals/set-to-string-tag"),K=K("../internals/internal-state"),J=K.get,ee=K.set,V="ArrayBuffer",q="DataView",Y="prototype",Z="Wrong index",ce=y[V],B=ce,U=y[q],K=U&&U[Y],re=Object.prototype,ae=y.RangeError,pe=I.pack,ye=I.unpack;if(g){if(!w(function(){ce(1)})||!w(function(){new ce(-1)})||w(function(){return new ce,new ce(1.5),new ce(NaN),ce.name!=V})){for(var Re,y=(B=function(Pe){return T(this,B),new ce(P(Pe))})[Y]=ce[Y],Me=N(ce),xe=0;Me.length>xe;)(Re=Me[xe++])in B||x(B,Re,ce[Re]);y.constructor=B}j&&D(K)!==re&&j(K,re);var I=new U(new B(2)),ve=K.setInt8;I.setInt8(0,2147483648),I.setInt8(1,2147483649),!I.getInt8(0)&&I.getInt8(1)||b(K,{setInt8:function(Te,Pe){ve.call(this,Te,Pe<<24>>24)},setUint8:function(Te,Pe){ve.call(this,Te,Pe<<24>>24)}},{unsafe:!0})}else B=function(ne){T(this,B,V),ne=P(ne),ee(this,{bytes:W.call(new Array(ne),0),byteLength:ne}),v||(this.byteLength=ne)},U=function(ne,je,Pe){T(this,U,q),T(ne,B,q);var Ae=J(ne).byteLength,je=R(je);if(je<0||Ae<je)throw ae("Wrong offset");if(Ae<je+(Pe=Pe===void 0?Ae-je:C(Pe)))throw ae("Wrong length");ee(this,{buffer:ne,byteLength:Pe,byteOffset:je}),v||(this.buffer=ne,this.byteLength=Pe,this.byteOffset=je)},v&&(c(B,"byteLength"),c(U,"buffer"),c(U,"byteLength"),c(U,"byteOffset")),b(U[Y],{getInt8:function(ne){return f(this,1,ne)[0]<<24>>24},getUint8:function(ne){return f(this,1,ne)[0]},getInt16:function(ne){return ne=f(this,2,ne,1<arguments.length?arguments[1]:void 0),(ne[1]<<8|ne[0])<<16>>16},getUint16:function(ne){return ne=f(this,2,ne,1<arguments.length?arguments[1]:void 0),ne[1]<<8|ne[0]},getInt32:function(ne){return u(f(this,4,ne,1<arguments.length?arguments[1]:void 0))},getUint32:function(ne){return u(f(this,4,ne,1<arguments.length?arguments[1]:void 0))>>>0},getFloat32:function(ne){return ye(f(this,4,ne,1<arguments.length?arguments[1]:void 0),23)},getFloat64:function(ne){return ye(f(this,8,ne,1<arguments.length?arguments[1]:void 0),52)},setInt8:function(ne,Te){m(this,1,ne,s,Te)},setUint8:function(ne,Te){m(this,1,ne,s,Te)},setInt16:function(ne,Te){m(this,2,ne,a,Te,2<arguments.length?arguments[2]:void 0)},setUint16:function(ne,Te){m(this,2,ne,a,Te,2<arguments.length?arguments[2]:void 0)},setInt32:function(ne,Te){m(this,4,ne,l,Te,2<arguments.length?arguments[2]:void 0)},setUint32:function(ne,Te){m(this,4,ne,l,Te,2<arguments.length?arguments[2]:void 0)},setFloat32:function(ne,Te){m(this,4,ne,h,Te,2<arguments.length?arguments[2]:void 0)},setFloat64:function(ne,Te){m(this,8,ne,p,Te,2<arguments.length?arguments[2]:void 0)}});X(B,V),X(U,q),i.exports={ArrayBuffer:B,DataView:U}},{"../internals/an-instance":9,"../internals/array-buffer-native":11,"../internals/array-fill":15,"../internals/create-non-enumerable-property":38,"../internals/descriptors":43,"../internals/fails":51,"../internals/global":60,"../internals/ieee754":66,"../internals/internal-state":71,"../internals/object-define-property":93,"../internals/object-get-own-property-names":96,"../internals/object-get-prototype-of":98,"../internals/object-set-prototype-of":102,"../internals/redefine-all":108,"../internals/set-to-string-tag":118,"../internals/to-index":134,"../internals/to-integer":136,"../internals/to-length":137}],14:[function(r,i,o){var s=r("../internals/to-object"),a=r("../internals/to-absolute-index"),l=r("../internals/to-length"),u=Math.min;i.exports=[].copyWithin||function(v,p){var c=s(this),f=l(c.length),m=a(v,f),y=a(p,f),v=2<arguments.length?arguments[2]:void 0,g=u((v===void 0?f:a(v,f))-y,f-m),x=1;for(y<m&&m<y+g&&(x=-1,y+=g-1,m+=g-1);0<g--;)y in c?c[m]=c[y]:delete c[m],m+=x,y+=x;return c}},{"../internals/to-absolute-index":133,"../internals/to-length":137,"../internals/to-object":138}],15:[function(r,i,o){var s=r("../internals/to-object"),a=r("../internals/to-absolute-index"),l=r("../internals/to-length");i.exports=function(u){for(var h=s(this),p=l(h.length),f=arguments.length,c=a(1<f?arguments[1]:void 0,p),f=2<f?arguments[2]:void 0,m=f===void 0?p:a(f,p);c<m;)h[c++]=u;return h}},{"../internals/to-absolute-index":133,"../internals/to-length":137,"../internals/to-object":138}],16:[function(l,i,o){var s=l("../internals/array-iteration").forEach,a=l("../internals/array-method-is-strict"),l=l("../internals/array-method-uses-to-length"),a=a("forEach"),l=l("forEach");i.exports=a&&l?[].forEach:function(u){return s(this,u,1<arguments.length?arguments[1]:void 0)}},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23}],17:[function(r,i,o){var s=r("../internals/function-bind-context"),a=r("../internals/to-object"),l=r("../internals/call-with-safe-iteration-closing"),u=r("../internals/is-array-iterator-method"),h=r("../internals/to-length"),p=r("../internals/create-property"),c=r("../internals/get-iterator-method");i.exports=function(T){var m,y,v,g,x,b,w=a(T),T=typeof this=="function"?this:Array,R=arguments.length,C=1<R?arguments[1]:void 0,P=C!==void 0,I=c(w),D=0;if(P&&(C=s(C,2<R?arguments[2]:void 0,2)),I==null||T==Array&&u(I))for(y=new T(m=h(w.length));D<m;D++)b=P?C(w[D],D):w[D],p(y,D,b);else for(x=(g=I.call(w)).next,y=new T;!(v=x.call(g)).done;D++)b=P?l(g,C,[v.value,D],!0):v.value,p(y,D,b);return y.length=D,y}},{"../internals/call-with-safe-iteration-closing":26,"../internals/create-property":40,"../internals/function-bind-context":55,"../internals/get-iterator-method":58,"../internals/is-array-iterator-method":72,"../internals/to-length":137,"../internals/to-object":138}],18:[function(r,i,o){function s(h){return function(p,c,f){var m,y=a(p),v=l(y.length),g=u(f,v);if(h&&c!=c){for(;g<v;)if((m=y[g++])!=m)return!0}else for(;g<v;g++)if((h||g in y)&&y[g]===c)return h||g||0;return!h&&-1}}var a=r("../internals/to-indexed-object"),l=r("../internals/to-length"),u=r("../internals/to-absolute-index");i.exports={includes:s(!0),indexOf:s(!1)}},{"../internals/to-absolute-index":133,"../internals/to-indexed-object":135,"../internals/to-length":137}],19:[function(r,i,o){function s(f){var m=f==1,y=f==2,v=f==3,g=f==4,x=f==6,b=f==5||x;return function(w,T,R,C){for(var P,I,D=u(w),j=l(D),N=a(T,R,3),O=h(j.length),W=0,T=C||p,X=m?T(w,O):y?T(w,0):void 0;W<O;W++)if((b||W in j)&&(I=N(P=j[W],W,D),f)){if(m)X[W]=I;else if(I)switch(f){case 3:return!0;case 5:return P;case 6:return W;case 2:c.call(X,P)}else if(g)return!1}return x?-1:v||g?g:X}}var a=r("../internals/function-bind-context"),l=r("../internals/indexed-object"),u=r("../internals/to-object"),h=r("../internals/to-length"),p=r("../internals/array-species-create"),c=[].push;i.exports={forEach:s(0),map:s(1),filter:s(2),some:s(3),every:s(4),find:s(5),findIndex:s(6)}},{"../internals/array-species-create":25,"../internals/function-bind-context":55,"../internals/indexed-object":67,"../internals/to-length":137,"../internals/to-object":138}],20:[function(f,i,o){var s=f("../internals/to-indexed-object"),a=f("../internals/to-integer"),l=f("../internals/to-length"),c=f("../internals/array-method-is-strict"),f=f("../internals/array-method-uses-to-length"),u=Math.min,h=[].lastIndexOf,p=!!h&&1/[1].lastIndexOf(1,-0)<0,c=c("lastIndexOf"),f=f("indexOf",{ACCESSORS:!0,1:0});i.exports=p||!c||!f?function(m){if(p)return h.apply(this,arguments)||0;var y=s(this),v=l(y.length),g=v-1;for((g=1<arguments.length?u(g,a(arguments[1])):g)<0&&(g=v+g);0<=g;g--)if(g in y&&y[g]===m)return g||0;return-1}:h},{"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/to-indexed-object":135,"../internals/to-integer":136,"../internals/to-length":137}],21:[function(r,i,o){var s=r("../internals/fails"),a=r("../internals/well-known-symbol"),l=r("../internals/engine-v8-version"),u=a("species");i.exports=function(h){return 51<=l||!s(function(){var p=[];return(p.constructor={})[u]=function(){return{foo:1}},p[h](Boolean).foo!==1})}},{"../internals/engine-v8-version":48,"../internals/fails":51,"../internals/well-known-symbol":149}],22:[function(r,i,o){var s=r("../internals/fails");i.exports=function(a,l){var u=[][a];return!!u&&s(function(){u.call(null,l||function(){throw 1},1)})}},{"../internals/fails":51}],23:[function(r,i,o){function s(c){throw c}var a=r("../internals/descriptors"),l=r("../internals/fails"),u=r("../internals/has"),h=Object.defineProperty,p={};i.exports=function(c,f){var m,y,v,g;return u(p,c)?p[c]:(m=[][c],y=!!u(f=f||{},"ACCESSORS")&&f.ACCESSORS,v=u(f,0)?f[0]:s,g=u(f,1)?f[1]:void 0,p[c]=!!m&&!l(function(){if(y&&!a)return!0;var x={length:-1};y?h(x,1,{enumerable:!0,get:s}):x[1]=1,m.call(x,v,g)}))}},{"../internals/descriptors":43,"../internals/fails":51,"../internals/has":61}],24:[function(r,i,o){function s(p){return function(c,f,m,y){a(f);var v=l(c),g=u(v),x=h(v.length),b=p?x-1:0,w=p?-1:1;if(m<2)for(;;){if(b in g){y=g[b],b+=w;break}if(b+=w,p?b<0:x<=b)throw TypeError("Reduce of empty array with no initial value")}for(;p?0<=b:b<x;b+=w)b in g&&(y=f(y,g[b],b,v));return y}}var a=r("../internals/a-function"),l=r("../internals/to-object"),u=r("../internals/indexed-object"),h=r("../internals/to-length");i.exports={left:s(!1),right:s(!0)}},{"../internals/a-function":5,"../internals/indexed-object":67,"../internals/to-length":137,"../internals/to-object":138}],25:[function(r,i,o){var s=r("../internals/is-object"),a=r("../internals/is-array"),l=r("../internals/well-known-symbol")("species");i.exports=function(u,h){var p;return new((p=a(u)&&(typeof(p=u.constructor)=="function"&&(p===Array||a(p.prototype))||s(p)&&(p=p[l])===null)?void 0:p)===void 0?Array:p)(h===0?0:h)}},{"../internals/is-array":73,"../internals/is-object":75,"../internals/well-known-symbol":149}],26:[function(r,i,o){var s=r("../internals/an-object");i.exports=function(a,l,u,h){try{return h?l(s(u)[0],u[1]):l(u)}catch(p){throw h=a.return,h!==void 0&&s(h.call(a)),p}}},{"../internals/an-object":10}],27:[function(r,i,o){var s=r("../internals/well-known-symbol")("iterator"),a=!1;try{var l=0,u={next:function(){return{done:!!l++}},return:function(){a=!0}};u[s]=function(){return this},Array.from(u,function(){throw 2})}catch{}i.exports=function(h,p){if(!p&&!a)return!1;var c=!1;try{var f={};f[s]=function(){return{next:function(){return{done:c=!0}}}},h(f)}catch{}return c}},{"../internals/well-known-symbol":149}],28:[function(r,i,o){var s={}.toString;i.exports=function(a){return s.call(a).slice(8,-1)}},{}],29:[function(r,i,o){var s=r("../internals/to-string-tag-support"),a=r("../internals/classof-raw"),l=r("../internals/well-known-symbol")("toStringTag"),u=a(function(){return arguments}())=="Arguments";i.exports=s?a:function(h){var p;return h===void 0?"Undefined":h===null?"Null":typeof(p=function(c,f){try{return c[f]}catch{}}(h=Object(h),l))=="string"?p:u?a(h):(p=a(h))=="Object"&&typeof h.callee=="function"?"Arguments":p}},{"../internals/classof-raw":28,"../internals/to-string-tag-support":142,"../internals/well-known-symbol":149}],30:[function(v,i,o){var s=v("../internals/object-define-property").f,a=v("../internals/object-create"),l=v("../internals/redefine-all"),u=v("../internals/function-bind-context"),h=v("../internals/an-instance"),p=v("../internals/iterate"),c=v("../internals/define-iterator"),f=v("../internals/set-species"),m=v("../internals/descriptors"),y=v("../internals/internal-metadata").fastKey,v=v("../internals/internal-state"),g=v.set,x=v.getterFor;i.exports={getConstructor:function(b,w,T,R){function C(j,N,O){var W,X=D(j),J=P(j,N);return J?J.value=O:(X.last=J={index:W=y(N,!0),key:N,value:O,previous:N=X.last,next:void 0,removed:!1},X.first||(X.first=J),N&&(N.next=J),m?X.size++:j.size++,W!=="F"&&(X.index[W]=J)),j}function P(W,N){var O,W=D(W),X=y(N);if(X!=="F")return W.index[X];for(O=W.first;O;O=O.next)if(O.key==N)return O}var I=b(function(j,N){h(j,I,w),g(j,{type:w,index:a(null),first:void 0,last:void 0,size:0}),m||(j.size=0),N!=null&&p(N,j[R],j,T)}),D=x(w);return l(I.prototype,{clear:function(){for(var j=D(this),N=j.index,O=j.first;O;)O.removed=!0,O.previous&&(O.previous=O.previous.next=void 0),delete N[O.index],O=O.next;j.first=j.last=void 0,m?j.size=0:this.size=0},delete:function(X){var N,O,W=D(this),X=P(this,X);return X&&(N=X.next,O=X.previous,delete W.index[X.index],X.removed=!0,O&&(O.next=N),N&&(N.previous=O),W.first==X&&(W.first=N),W.last==X&&(W.last=O),m?W.size--:this.size--),!!X},forEach:function(j){for(var N,O=D(this),W=u(j,1<arguments.length?arguments[1]:void 0,3);N=N?N.next:O.first;)for(W(N.value,N.key,this);N&&N.removed;)N=N.previous},has:function(j){return!!P(this,j)}}),l(I.prototype,T?{get:function(j){return j=P(this,j),j&&j.value},set:function(j,N){return C(this,j===0?0:j,N)}}:{add:function(j){return C(this,j=j===0?0:j,j)}}),m&&s(I.prototype,"size",{get:function(){return D(this).size}}),I},setStrong:function(b,w,T){var R=w+" Iterator",C=x(w),P=x(R);c(b,w,function(I,D){g(this,{type:R,target:I,state:C(I),kind:D,last:void 0})},function(){for(var I=P(this),D=I.kind,j=I.last;j&&j.removed;)j=j.previous;return I.target&&(I.last=j=j?j.next:I.state.first)?D=="keys"?{value:j.key,done:!1}:D=="values"?{value:j.value,done:!1}:{value:[j.key,j.value],done:!1}:{value:I.target=void 0,done:!0}},T?"entries":"values",!T,!0),f(w)}}},{"../internals/an-instance":9,"../internals/define-iterator":41,"../internals/descriptors":43,"../internals/function-bind-context":55,"../internals/internal-metadata":70,"../internals/internal-state":71,"../internals/iterate":78,"../internals/object-create":91,"../internals/object-define-property":93,"../internals/redefine-all":108,"../internals/set-species":117}],31:[function(g,i,o){function s(C){return C.frozen||(C.frozen=new a)}function a(){this.entries=[]}function l(C,P){return w(C.entries,function(I){return I[0]===P})}var u=g("../internals/redefine-all"),h=g("../internals/internal-metadata").getWeakData,p=g("../internals/an-object"),c=g("../internals/is-object"),f=g("../internals/an-instance"),m=g("../internals/iterate"),y=g("../internals/array-iteration"),v=g("../internals/has"),g=g("../internals/internal-state"),x=g.set,b=g.getterFor,w=y.find,T=y.findIndex,R=0;a.prototype={get:function(C){if(C=l(this,C),C)return C[1]},has:function(C){return!!l(this,C)},set:function(C,P){var I=l(this,C);I?I[1]=P:this.entries.push([C,P])},delete:function(C){var P=T(this.entries,function(I){return I[0]===C});return~P&&this.entries.splice(P,1),!!~P}},i.exports={getConstructor:function(C,P,I,D){function j(W,X,J){var ee=O(W),V=h(p(X),!0);return V===!0?s(ee).set(X,J):V[ee.id]=J,W}var N=C(function(W,X){f(W,N,P),x(W,{type:P,id:R++,frozen:void 0}),X!=null&&m(X,W[D],W,I)}),O=b(P);return u(N.prototype,{delete:function(W){var X,J=O(this);return!!c(W)&&((X=h(W))===!0?s(J).delete(W):X&&v(X,J.id)&&delete X[J.id])},has:function(W){var X,J=O(this);return!!c(W)&&((X=h(W))===!0?s(J).has(W):X&&v(X,J.id))}}),u(N.prototype,I?{get:function(W){var X,J=O(this);if(c(W))return(X=h(W))===!0?s(J).get(W):X?X[J.id]:void 0},set:function(W,X){return j(this,W,X)}}:{add:function(W){return j(this,W,!0)}}),N}}},{"../internals/an-instance":9,"../internals/an-object":10,"../internals/array-iteration":19,"../internals/has":61,"../internals/internal-metadata":70,"../internals/internal-state":71,"../internals/is-object":75,"../internals/iterate":78,"../internals/redefine-all":108}],32:[function(r,i,o){var s=r("../internals/export"),a=r("../internals/global"),l=r("../internals/is-forced"),u=r("../internals/redefine"),h=r("../internals/internal-metadata"),p=r("../internals/iterate"),c=r("../internals/an-instance"),f=r("../internals/is-object"),m=r("../internals/fails"),y=r("../internals/check-correctness-of-iteration"),v=r("../internals/set-to-string-tag"),g=r("../internals/inherit-if-required");i.exports=function(x,b,w){function T(V){var q=X[V];u(X,V,V=="add"?function(Y){return q.call(this,Y===0?0:Y),this}:V=="delete"?function(Y){return!(N&&!f(Y))&&q.call(this,Y===0?0:Y)}:V=="get"?function(Y){return N&&!f(Y)?void 0:q.call(this,Y===0?0:Y)}:V=="has"?function(Y){return!(N&&!f(Y))&&q.call(this,Y===0?0:Y)}:function(Y,Z){return q.call(this,Y===0?0:Y,Z),this})}var R,C,P,I,D,j=x.indexOf("Map")!==-1,N=x.indexOf("Weak")!==-1,O=j?"set":"add",W=a[x],X=W&&W.prototype,J=W,ee={};return l(x,typeof W!="function"||!(N||X.forEach&&!m(function(){new W().entries().next()})))?(J=w.getConstructor(b,x,j,O),h.REQUIRED=!0):l(x,!0)&&(C=(R=new J)[O](N?{}:-0,1)!=R,P=m(function(){R.has(1)}),I=y(function(V){new W(V)}),D=!N&&m(function(){for(var V=new W,q=5;q--;)V[O](q,q);return!V.has(-0)}),I||(((J=b(function(V,q){return c(V,J,x),V=g(new W,V,J),q!=null&&p(q,V[O],V,j),V})).prototype=X).constructor=J),(P||D)&&(T("delete"),T("has"),j&&T("get")),(D||C)&&T(O),N&&X.clear&&delete X.clear),ee[x]=J,s({global:!0,forced:J!=W},ee),v(J,x),N||w.setStrong(J,x,j),J}},{"../internals/an-instance":9,"../internals/check-correctness-of-iteration":27,"../internals/export":50,"../internals/fails":51,"../internals/global":60,"../internals/inherit-if-required":68,"../internals/internal-metadata":70,"../internals/is-forced":74,"../internals/is-object":75,"../internals/iterate":78,"../internals/redefine":109,"../internals/set-to-string-tag":118}],33:[function(r,i,o){var s=r("../internals/has"),a=r("../internals/own-keys"),l=r("../internals/object-get-own-property-descriptor"),u=r("../internals/object-define-property");i.exports=function(h,p){for(var c=a(p),f=u.f,m=l.f,y=0;y<c.length;y++){var v=c[y];s(h,v)||f(h,v,m(p,v))}}},{"../internals/has":61,"../internals/object-define-property":93,"../internals/object-get-own-property-descriptor":94,"../internals/own-keys":104}],34:[function(r,i,o){var s=r("../internals/well-known-symbol")("match");i.exports=function(a){var l=/./;try{"/./"[a](l)}catch{try{return l[s]=!1,"/./"[a](l)}catch{}}return!1}},{"../internals/well-known-symbol":149}],35:[function(r,i,o){r=r("../internals/fails"),i.exports=!r(function(){function s(){}return s.prototype.constructor=null,Object.getPrototypeOf(new s)!==s.prototype})},{"../internals/fails":51}],36:[function(r,i,o){var s=r("../internals/require-object-coercible"),a=/"/g;i.exports=function(c,u,h,p){var c=String(s(c)),f="<"+u;return h!==""&&(f+=" "+h+'="'+String(p).replace(a,"&quot;")+'"'),f+">"+c+"</"+u+">"}},{"../internals/require-object-coercible":114}],37:[function(r,i,o){function s(){return this}var a=r("../internals/iterators-core").IteratorPrototype,l=r("../internals/object-create"),u=r("../internals/create-property-descriptor"),h=r("../internals/set-to-string-tag"),p=r("../internals/iterators");i.exports=function(c,f,m){return f+=" Iterator",c.prototype=l(a,{next:u(1,m)}),h(c,f,!1,!0),p[f]=s,c}},{"../internals/create-property-descriptor":39,"../internals/iterators":80,"../internals/iterators-core":79,"../internals/object-create":91,"../internals/set-to-string-tag":118}],38:[function(r,i,o){var s=r("../internals/descriptors"),a=r("../internals/object-define-property"),l=r("../internals/create-property-descriptor");i.exports=s?function(u,h,p){return a.f(u,h,l(1,p))}:function(u,h,p){return u[h]=p,u}},{"../internals/create-property-descriptor":39,"../internals/descriptors":43,"../internals/object-define-property":93}],39:[function(r,i,o){i.exports=function(s,a){return{enumerable:!(1&s),configurable:!(2&s),writable:!(4&s),value:a}}},{}],40:[function(r,i,o){var s=r("../internals/to-primitive"),a=r("../internals/object-define-property"),l=r("../internals/create-property-descriptor");i.exports=function(u,h,p){h=s(h),h in u?a.f(u,h,l(0,p)):u[h]=p}},{"../internals/create-property-descriptor":39,"../internals/object-define-property":93,"../internals/to-primitive":141}],41:[function(g,i,o){function s(){return this}var a=g("../internals/export"),l=g("../internals/create-iterator-constructor"),u=g("../internals/object-get-prototype-of"),h=g("../internals/object-set-prototype-of"),p=g("../internals/set-to-string-tag"),c=g("../internals/create-non-enumerable-property"),f=g("../internals/redefine"),m=g("../internals/well-known-symbol"),y=g("../internals/is-pure"),v=g("../internals/iterators"),g=g("../internals/iterators-core"),x=g.IteratorPrototype,b=g.BUGGY_SAFARI_ITERATORS,w=m("iterator"),T="values",R="entries";i.exports=function(C,P,I,ee,j,N,O){l(I,P,ee);function W(B){if(B===j&&Z)return Z;if(!b&&B in q)return q[B];switch(B){case"keys":case T:case R:return function(){return new I(this,B)}}return function(){return new I(this)}}var X,J,ee=P+" Iterator",V=!1,q=C.prototype,Y=q[w]||q["@@iterator"]||j&&q[j],Z=!b&&Y||W(j),ce=P=="Array"&&q.entries||Y;if(ce&&(ce=u(ce.call(new C)),x!==Object.prototype&&ce.next&&(y||u(ce)===x||(h?h(ce,x):typeof ce[w]!="function"&&c(ce,w,s)),p(ce,ee,!0,!0),y&&(v[ee]=s))),j==T&&Y&&Y.name!==T&&(V=!0,Z=function(){return Y.call(this)}),y&&!O||q[w]===Z||c(q,w,Z),v[P]=Z,j)if(X={values:W(T),keys:N?Z:W("keys"),entries:W(R)},O)for(J in X)!b&&!V&&J in q||f(q,J,X[J]);else a({target:P,proto:!0,forced:b||V},X);return X}},{"../internals/create-iterator-constructor":37,"../internals/create-non-enumerable-property":38,"../internals/export":50,"../internals/is-pure":76,"../internals/iterators":80,"../internals/iterators-core":79,"../internals/object-get-prototype-of":98,"../internals/object-set-prototype-of":102,"../internals/redefine":109,"../internals/set-to-string-tag":118,"../internals/well-known-symbol":149}],42:[function(r,i,o){var s=r("../internals/path"),a=r("../internals/has"),l=r("../internals/well-known-symbol-wrapped"),u=r("../internals/object-define-property").f;i.exports=function(h){var p=s.Symbol||(s.Symbol={});a(p,h)||u(p,h,{value:l.f(h)})}},{"../internals/has":61,"../internals/object-define-property":93,"../internals/path":105,"../internals/well-known-symbol-wrapped":148}],43:[function(r,i,o){r=r("../internals/fails"),i.exports=!r(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},{"../internals/fails":51}],44:[function(a,i,o){var s=a("../internals/global"),a=a("../internals/is-object"),l=s.document,u=a(l)&&a(l.createElement);i.exports=function(h){return u?l.createElement(h):{}}},{"../internals/global":60,"../internals/is-object":75}],45:[function(r,i,o){i.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},{}],46:[function(r,i,o){r=r("../internals/engine-user-agent"),i.exports=/(iphone|ipod|ipad).*applewebkit/i.test(r)},{"../internals/engine-user-agent":47}],47:[function(r,i,o){r=r("../internals/get-built-in"),i.exports=r("navigator","userAgent")||""},{"../internals/get-built-in":57}],48:[function(l,i,o){var s,a,u=l("../internals/global"),l=l("../internals/engine-user-agent"),u=u.process,u=u&&u.versions,u=u&&u.v8;u?a=(s=u.split("."))[0]+s[1]:l&&(!(s=l.match(/Edge\/(\d+)/))||74<=s[1])&&(s=l.match(/Chrome\/(\d+)/))&&(a=s[1]),i.exports=a&&+a},{"../internals/engine-user-agent":47,"../internals/global":60}],49:[function(r,i,o){i.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},{}],50:[function(r,i,o){var s=r("../internals/global"),a=r("../internals/object-get-own-property-descriptor").f,l=r("../internals/create-non-enumerable-property"),u=r("../internals/redefine"),h=r("../internals/set-global"),p=r("../internals/copy-constructor-properties"),c=r("../internals/is-forced");i.exports=function(f,m){var y,v,g,x=f.target,b=f.global,w=f.stat,T=b?s:w?s[x]||h(x,{}):(s[x]||{}).prototype;if(T)for(y in m){if(v=m[y],g=f.noTargetGet?(g=a(T,y))&&g.value:T[y],!c(b?y:x+(w?".":"#")+y,f.forced)&&g!==void 0){if(typeof v==typeof g)continue;p(v,g)}(f.sham||g&&g.sham)&&l(v,"sham",!0),u(T,y,v,f)}}},{"../internals/copy-constructor-properties":33,"../internals/create-non-enumerable-property":38,"../internals/global":60,"../internals/is-forced":74,"../internals/object-get-own-property-descriptor":94,"../internals/redefine":109,"../internals/set-global":116}],51:[function(r,i,o){i.exports=function(s){try{return!!s()}catch{return!0}}},{}],52:[function(m,i,o){m("../modules/es.regexp.exec");var s=m("../internals/redefine"),a=m("../internals/fails"),l=m("../internals/well-known-symbol"),u=m("../internals/regexp-exec"),h=m("../internals/create-non-enumerable-property"),p=l("species"),c=!a(function(){var g=/./;return g.exec=function(){var x=[];return x.groups={a:"7"},x},"".replace(g,"$<a>")!=="7"}),f="a".replace(/./,"$0")==="$0",m=l("replace"),y=!!/./[m]&&/./[m]("a","$0")==="",v=!a(function(){var x=/(?:)/,g=x.exec,x=(x.exec=function(){return g.apply(this,arguments)},"ab".split(x));return x.length!==2||x[0]!=="a"||x[1]!=="b"});i.exports=function(g,x,b,w){var T,R,C=l(g),P=!a(function(){var D={};return D[C]=function(){return 7},""[g](D)!=7}),I=P&&!a(function(){var D=!1,j=/a/;return g==="split"&&((j={constructor:{}}).constructor[p]=function(){return j},j.flags="",j[C]=/./[C]),j.exec=function(){return D=!0,null},j[C](""),!D});P&&I&&(g!=="replace"||c&&f&&!y)&&(g!=="split"||v)||(T=/./[C],b=(I=b(C,""[g],function(D,j,N,O,W){return j.exec===u?P&&!W?{done:!0,value:T.call(j,N,O)}:{done:!0,value:D.call(N,j,O)}:{done:!1}},{REPLACE_KEEPS_$0:f,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:y}))[0],R=I[1],s(String.prototype,g,b),s(RegExp.prototype,C,x==2?function(D,j){return R.call(D,this,j)}:function(D){return R.call(D,this)})),w&&h(RegExp.prototype[C],"sham",!0)}},{"../internals/create-non-enumerable-property":38,"../internals/fails":51,"../internals/redefine":109,"../internals/regexp-exec":111,"../internals/well-known-symbol":149,"../modules/es.regexp.exec":192}],53:[function(r,i,o){function s(h,p,c,f,m,y,v,g){for(var x,b=m,w=0,T=!!v&&u(v,g,3);w<f;){if(w in c){if(x=T?T(c[w],w,p):c[w],0<y&&a(x))b=s(h,p,x,l(x.length),b,y-1)-1;else{if(9007199254740991<=b)throw TypeError("Exceed the acceptable array length");h[b]=x}b++}w++}return b}var a=r("../internals/is-array"),l=r("../internals/to-length"),u=r("../internals/function-bind-context");i.exports=s},{"../internals/function-bind-context":55,"../internals/is-array":73,"../internals/to-length":137}],54:[function(r,i,o){r=r("../internals/fails"),i.exports=!r(function(){return Object.isExtensible(Object.preventExtensions({}))})},{"../internals/fails":51}],55:[function(r,i,o){var s=r("../internals/a-function");i.exports=function(a,l,u){if(s(a),l===void 0)return a;switch(u){case 0:return function(){return a.call(l)};case 1:return function(h){return a.call(l,h)};case 2:return function(h,p){return a.call(l,h,p)};case 3:return function(h,p,c){return a.call(l,h,p,c)}}return function(){return a.apply(l,arguments)}}},{"../internals/a-function":5}],56:[function(r,i,o){var s=r("../internals/a-function"),a=r("../internals/is-object"),l=[].slice,u={};i.exports=Function.bind||function(h){var p=s(this),c=l.call(arguments,1),f=function(){var m=c.concat(l.call(arguments));if(this instanceof f){var y=p,v=m.length,g=m;if(!(v in u)){for(var x=[],b=0;b<v;b++)x[b]="a["+b+"]";u[v]=Function("C,a","return new C("+x.join(",")+")")}return u[v](y,g)}return p.apply(h,m)};return a(p.prototype)&&(f.prototype=p.prototype),f}},{"../internals/a-function":5,"../internals/is-object":75}],57:[function(r,i,o){function s(u){return typeof u=="function"?u:void 0}var a=r("../internals/path"),l=r("../internals/global");i.exports=function(u,h){return arguments.length<2?s(a[u])||s(l[u]):a[u]&&a[u][h]||l[u]&&l[u][h]}},{"../internals/global":60,"../internals/path":105}],58:[function(r,i,o){var s=r("../internals/classof"),a=r("../internals/iterators"),l=r("../internals/well-known-symbol")("iterator");i.exports=function(u){if(u!=null)return u[l]||u["@@iterator"]||a[s(u)]}},{"../internals/classof":29,"../internals/iterators":80,"../internals/well-known-symbol":149}],59:[function(r,i,o){var s=r("../internals/an-object"),a=r("../internals/get-iterator-method");i.exports=function(l){var u=a(l);if(typeof u!="function")throw TypeError(String(l)+" is not iterable");return s(u.call(l))}},{"../internals/an-object":10,"../internals/get-iterator-method":58}],60:[function(r,i,o){(function(s){function a(l){return l&&l.Math==Math&&l}i.exports=a(typeof globalThis=="object"&&globalThis)||a(typeof window=="object"&&window)||a(typeof self=="object"&&self)||a(typeof s=="object"&&s)||Function("return this")()}).call(this,typeof By<"u"?By:typeof self<"u"?self:typeof window<"u"?window:{})},{}],61:[function(r,i,o){var s={}.hasOwnProperty;i.exports=function(a,l){return s.call(a,l)}},{}],62:[function(r,i,o){i.exports={}},{}],63:[function(r,i,o){var s=r("../internals/global");i.exports=function(a,l){var u=s.console;u&&u.error&&(arguments.length===1?u.error(a):u.error(a,l))}},{"../internals/global":60}],64:[function(r,i,o){r=r("../internals/get-built-in"),i.exports=r("document","documentElement")},{"../internals/get-built-in":57}],65:[function(r,i,o){var s=r("../internals/descriptors"),a=r("../internals/fails"),l=r("../internals/document-create-element");i.exports=!s&&!a(function(){return Object.defineProperty(l("div"),"a",{get:function(){return 7}}).a!=7})},{"../internals/descriptors":43,"../internals/document-create-element":44,"../internals/fails":51}],66:[function(r,i,o){var s=Math.abs,a=Math.pow,l=Math.floor,u=Math.log,h=Math.LN2;i.exports={pack:function(p,c,b){var m,y,v,g=new Array(b),x=8*b-c-1,b=(1<<x)-1,w=b>>1,T=c===23?a(2,-24)-a(2,-77):0,R=p<0||p===0&&1/p<0?1:0,C=0;for((p=s(p))!=p||p===1/0?(y=p!=p?1:0,m=b):(m=l(u(p)/h),p*(v=a(2,-m))<1&&(m--,v*=2),2<=(p+=1<=m+w?T/v:T*a(2,1-w))*v&&(m++,v/=2),b<=m+w?(y=0,m=b):1<=m+w?(y=(p*v-1)*a(2,c),m+=w):(y=p*a(2,w-1)*a(2,c),m=0));8<=c;g[C++]=255&y,y/=256,c-=8);for(m=m<<c|y,x+=c;0<x;g[C++]=255&m,m/=256,x-=8);return g[--C]|=128*R,g},unpack:function(p,c){var f,m=p.length,b=8*m-c-1,y=(1<<b)-1,v=y>>1,g=b-7,x=m-1,b=p[x--],w=127&b;for(b>>=7;0<g;w=256*w+p[x],x--,g-=8);for(f=w&(1<<-g)-1,w>>=-g,g+=c;0<g;f=256*f+p[x],x--,g-=8);if(w===0)w=1-v;else{if(w===y)return f?NaN:b?-1/0:1/0;f+=a(2,c),w-=v}return(b?-1:1)*f*a(2,w-c)}}},{}],67:[function(r,i,o){var s=r("../internals/fails"),a=r("../internals/classof-raw"),l="".split;i.exports=s(function(){return!Object("z").propertyIsEnumerable(0)})?function(u){return a(u)=="String"?l.call(u,""):Object(u)}:Object},{"../internals/classof-raw":28,"../internals/fails":51}],68:[function(r,i,o){var s=r("../internals/is-object"),a=r("../internals/object-set-prototype-of");i.exports=function(l,u,h){return a&&typeof(u=u.constructor)=="function"&&u!==h&&s(u=u.prototype)&&u!==h.prototype&&a(l,u),l}},{"../internals/is-object":75,"../internals/object-set-prototype-of":102}],69:[function(s,i,o){var s=s("../internals/shared-store"),a=Function.toString;typeof s.inspectSource!="function"&&(s.inspectSource=function(l){return a.call(l)}),i.exports=s.inspectSource},{"../internals/shared-store":120}],70:[function(r,i,o){function s(g){h(g,f,{value:{objectID:"O"+ ++m,weakData:{}}})}var a=r("../internals/hidden-keys"),l=r("../internals/is-object"),u=r("../internals/has"),h=r("../internals/object-define-property").f,p=r("../internals/uid"),c=r("../internals/freezing"),f=p("meta"),m=0,y=Object.isExtensible||function(){return!0},v=i.exports={REQUIRED:!1,fastKey:function(g,x){if(!l(g))return typeof g=="symbol"?g:(typeof g=="string"?"S":"P")+g;if(!u(g,f)){if(!y(g))return"F";if(!x)return"E";s(g)}return g[f].objectID},getWeakData:function(g,x){if(!u(g,f)){if(!y(g))return!0;if(!x)return!1;s(g)}return g[f].weakData},onFreeze:function(g){return c&&v.REQUIRED&&y(g)&&!u(g,f)&&s(g),g}};a[f]=!0},{"../internals/freezing":54,"../internals/has":61,"../internals/hidden-keys":62,"../internals/is-object":75,"../internals/object-define-property":93,"../internals/uid":146}],71:[function(b,i,o){var s,a,l,u,h,p,c,f,m=b("../internals/native-weak-map"),w=b("../internals/global"),y=b("../internals/is-object"),v=b("../internals/create-non-enumerable-property"),g=b("../internals/has"),x=b("../internals/shared-key"),b=b("../internals/hidden-keys"),w=w.WeakMap;c=m?(s=new w,a=s.get,l=s.has,u=s.set,h=function(T,R){return u.call(s,T,R),R},p=function(T){return a.call(s,T)||{}},function(T){return l.call(s,T)}):(b[f=x("state")]=!0,h=function(T,R){return v(T,f,R),R},p=function(T){return g(T,f)?T[f]:{}},function(T){return g(T,f)}),i.exports={set:h,get:p,has:c,enforce:function(T){return c(T)?p(T):h(T,{})},getterFor:function(T){return function(R){if(y(R)&&(R=p(R)).type===T)return R;throw TypeError("Incompatible receiver, "+T+" required")}}}},{"../internals/create-non-enumerable-property":38,"../internals/global":60,"../internals/has":61,"../internals/hidden-keys":62,"../internals/is-object":75,"../internals/native-weak-map":86,"../internals/shared-key":119}],72:[function(r,i,o){var s=r("../internals/well-known-symbol"),a=r("../internals/iterators"),l=s("iterator"),u=Array.prototype;i.exports=function(h){return h!==void 0&&(a.Array===h||u[l]===h)}},{"../internals/iterators":80,"../internals/well-known-symbol":149}],73:[function(r,i,o){var s=r("../internals/classof-raw");i.exports=Array.isArray||function(a){return s(a)=="Array"}},{"../internals/classof-raw":28}],74:[function(r,i,o){function s(f,m){return(f=h[u(f)])==c||f!=p&&(typeof m=="function"?a(m):!!m)}var a=r("../internals/fails"),l=/#|\.prototype\./,u=s.normalize=function(f){return String(f).replace(l,".").toLowerCase()},h=s.data={},p=s.NATIVE="N",c=s.POLYFILL="P";i.exports=s},{"../internals/fails":51}],75:[function(r,i,o){i.exports=function(s){return typeof s=="object"?s!==null:typeof s=="function"}},{}],76:[function(r,i,o){i.exports=!1},{}],77:[function(r,i,o){var s=r("../internals/is-object"),a=r("../internals/classof-raw"),l=r("../internals/well-known-symbol")("match");i.exports=function(u){var h;return s(u)&&((h=u[l])!==void 0?!!h:a(u)=="RegExp")}},{"../internals/classof-raw":28,"../internals/is-object":75,"../internals/well-known-symbol":149}],78:[function(r,i,o){function s(f,m){this.stopped=f,this.result=m}var a=r("../internals/an-object"),l=r("../internals/is-array-iterator-method"),u=r("../internals/to-length"),h=r("../internals/function-bind-context"),p=r("../internals/get-iterator-method"),c=r("../internals/call-with-safe-iteration-closing");(i.exports=function(f,m,y,v,g){var x,b,w,T,R,C,P=h(m,y,v?2:1);if(g)x=f;else{if(typeof(m=p(f))!="function")throw TypeError("Target is not iterable");if(l(m)){for(b=0,w=u(f.length);b<w;b++)if((T=v?P(a(C=f[b])[0],C[1]):P(f[b]))&&T instanceof s)return T;return new s(!1)}x=m.call(f)}for(R=x.next;!(C=R.call(x)).done;)if(typeof(T=c(x,P,C.value,v))=="object"&&T&&T instanceof s)return T;return new s(!1)}).stop=function(f){return new s(!0,f)}},{"../internals/an-object":10,"../internals/call-with-safe-iteration-closing":26,"../internals/function-bind-context":55,"../internals/get-iterator-method":58,"../internals/is-array-iterator-method":72,"../internals/to-length":137}],79:[function(p,i,o){var s,a,l=p("../internals/object-get-prototype-of"),u=p("../internals/create-non-enumerable-property"),h=p("../internals/has"),c=p("../internals/well-known-symbol"),p=p("../internals/is-pure"),c=c("iterator"),f=!1;[].keys&&("next"in(a=[].keys())?(l=l(l(a)))!==Object.prototype&&(s=l):f=!0),s==null&&(s={}),p||h(s,c)||u(s,c,function(){return this}),i.exports={IteratorPrototype:s,BUGGY_SAFARI_ITERATORS:f}},{"../internals/create-non-enumerable-property":38,"../internals/has":61,"../internals/is-pure":76,"../internals/object-get-prototype-of":98,"../internals/well-known-symbol":149}],80:[function(r,i,o){i.exports={}},{}],81:[function(r,i,o){i.exports=Math.sign||function(s){return(s=+s)==0||s!=s?s:s<0?-1:1}},{}],82:[function(v,i,o){var s,a,l,u,h,p,c,f,m=v("../internals/global"),R=v("../internals/object-get-own-property-descriptor").f,T=v("../internals/classof-raw"),y=v("../internals/task").set,v=v("../internals/engine-is-ios"),g=m.MutationObserver||m.WebKitMutationObserver,x=m.process,b=m.Promise,w=T(x)=="process",T=R(m,"queueMicrotask"),R=T&&T.value;R||(s=function(){var C,P;for(w&&(C=x.domain)&&C.exit();a;){P=a.fn,a=a.next;try{P()}catch(I){throw a?u():l=void 0,I}}l=void 0,C&&C.enter()},u=w?function(){x.nextTick(s)}:g&&!v?(h=!0,p=document.createTextNode(""),new g(s).observe(p,{characterData:!0}),function(){p.data=h=!h}):b&&b.resolve?(c=b.resolve(void 0),f=c.then,function(){f.call(c,s)}):function(){y.call(m,s)}),i.exports=R||function(C){C={fn:C,next:void 0},l&&(l.next=C),a||(a=C,u()),l=C}},{"../internals/classof-raw":28,"../internals/engine-is-ios":46,"../internals/global":60,"../internals/object-get-own-property-descriptor":94,"../internals/task":131}],83:[function(r,i,o){r=r("../internals/global"),i.exports=r.Promise},{"../internals/global":60}],84:[function(r,i,o){r=r("../internals/fails"),i.exports=!!Object.getOwnPropertySymbols&&!r(function(){return!String(Symbol())})},{"../internals/fails":51}],85:[function(r,i,o){var s=r("../internals/fails"),a=r("../internals/well-known-symbol"),l=r("../internals/is-pure"),u=a("iterator");i.exports=!s(function(){var h=new URL("b?a=1&b=2&c=3","http://a"),p=h.searchParams,c="";return h.pathname="c%20d",p.forEach(function(f,m){p.delete("b"),c+=m+f}),l&&!h.toJSON||!p.sort||h.href!=="http://a/c%20d?a=1&c=3"||p.get("c")!=="3"||String(new URLSearchParams("?a=1"))!=="a=1"||!p[u]||new URL("https://a@b").username!=="a"||new URLSearchParams(new URLSearchParams("a=b")).get("a")!=="b"||new URL("http://").host!=="xn--e1aybc"||new URL("http://a#").hash!=="#%D0%B1"||c!=="a1c3"||new URL("http://x",void 0).host!=="x"})},{"../internals/fails":51,"../internals/is-pure":76,"../internals/well-known-symbol":149}],86:[function(s,i,o){var a=s("../internals/global"),s=s("../internals/inspect-source"),a=a.WeakMap;i.exports=typeof a=="function"&&/native code/.test(s(a))},{"../internals/global":60,"../internals/inspect-source":69}],87:[function(r,i,o){function s(l){var u,h;this.promise=new l(function(p,c){if(u!==void 0||h!==void 0)throw TypeError("Bad Promise constructor");u=p,h=c}),this.resolve=a(u),this.reject=a(h)}var a=r("../internals/a-function");i.exports.f=function(l){return new s(l)}},{"../internals/a-function":5}],88:[function(r,i,o){var s=r("../internals/is-regexp");i.exports=function(a){if(s(a))throw TypeError("The method doesn't accept regular expressions");return a}},{"../internals/is-regexp":77}],89:[function(r,i,o){var s=r("../internals/global").isFinite;i.exports=Number.isFinite||function(a){return typeof a=="number"&&s(a)}},{"../internals/global":60}],90:[function(r,i,o){var s=r("../internals/descriptors"),a=r("../internals/fails"),l=r("../internals/object-keys"),u=r("../internals/object-get-own-property-symbols"),h=r("../internals/object-property-is-enumerable"),p=r("../internals/to-object"),c=r("../internals/indexed-object"),f=Object.assign,m=Object.defineProperty;i.exports=!f||a(function(){var y,v,g,x;return!(!s||f({b:1},f(m({},"a",{enumerable:!0,get:function(){m(this,"b",{value:3,enumerable:!1})}}),{b:2})).b===1)||(v={},x="abcdefghijklmnopqrst",(y={})[g=Symbol()]=7,x.split("").forEach(function(b){v[b]=b}),f({},y)[g]!=7||l(f({},v)).join("")!=x)})?function(y,v){for(var g=p(y),x=arguments.length,b=1,w=u.f,T=h.f;b<x;)for(var R,C=c(arguments[b++]),P=w?l(C).concat(w(C)):l(C),I=P.length,D=0;D<I;)R=P[D++],s&&!T.call(C,R)||(g[R]=C[R]);return g}:f},{"../internals/descriptors":43,"../internals/fails":51,"../internals/indexed-object":67,"../internals/object-get-own-property-symbols":97,"../internals/object-keys":100,"../internals/object-property-is-enumerable":101,"../internals/to-object":138}],91:[function(m,i,o){function s(){}var a,l=m("../internals/an-object"),u=m("../internals/object-define-properties"),h=m("../internals/enum-bug-keys"),p=m("../internals/hidden-keys"),c=m("../internals/html"),f=m("../internals/document-create-element"),m=m("../internals/shared-key"),y="prototype",v="script",g=m("IE_PROTO"),x=function(w){return"<"+v+">"+w+"</"+v+">"},b=function(){try{a=document.domain&&new ActiveXObject("htmlfile")}catch{}b=a?((w=a).write(x("")),w.close(),T=w.parentWindow.Object,w=null,T):(w=f("iframe"),T="java"+v+":",w.style.display="none",c.appendChild(w),w.src=String(T),(T=w.contentWindow.document).open(),T.write(x("document.F=Object")),T.close(),T.F);for(var w,T,R=h.length;R--;)delete b[y][h[R]];return b()};p[g]=!0,i.exports=Object.create||function(w,T){var R;return w!==null?(s[y]=l(w),R=new s,s[y]=null,R[g]=w):R=b(),T===void 0?R:u(R,T)}},{"../internals/an-object":10,"../internals/document-create-element":44,"../internals/enum-bug-keys":49,"../internals/hidden-keys":62,"../internals/html":64,"../internals/object-define-properties":92,"../internals/shared-key":119}],92:[function(r,i,o){var s=r("../internals/descriptors"),a=r("../internals/object-define-property"),l=r("../internals/an-object"),u=r("../internals/object-keys");i.exports=s?Object.defineProperties:function(h,p){l(h);for(var c,f=u(p),m=f.length,y=0;y<m;)a.f(h,c=f[y++],p[c]);return h}},{"../internals/an-object":10,"../internals/descriptors":43,"../internals/object-define-property":93,"../internals/object-keys":100}],93:[function(r,i,o){var s=r("../internals/descriptors"),a=r("../internals/ie8-dom-define"),l=r("../internals/an-object"),u=r("../internals/to-primitive"),h=Object.defineProperty;o.f=s?h:function(p,c,f){if(l(p),c=u(c,!0),l(f),a)try{return h(p,c,f)}catch{}if("get"in f||"set"in f)throw TypeError("Accessors not supported");return"value"in f&&(p[c]=f.value),p}},{"../internals/an-object":10,"../internals/descriptors":43,"../internals/ie8-dom-define":65,"../internals/to-primitive":141}],94:[function(r,i,o){var s=r("../internals/descriptors"),a=r("../internals/object-property-is-enumerable"),l=r("../internals/create-property-descriptor"),u=r("../internals/to-indexed-object"),h=r("../internals/to-primitive"),p=r("../internals/has"),c=r("../internals/ie8-dom-define"),f=Object.getOwnPropertyDescriptor;o.f=s?f:function(m,y){if(m=u(m),y=h(y,!0),c)try{return f(m,y)}catch{}if(p(m,y))return l(!a.f.call(m,y),m[y])}},{"../internals/create-property-descriptor":39,"../internals/descriptors":43,"../internals/has":61,"../internals/ie8-dom-define":65,"../internals/object-property-is-enumerable":101,"../internals/to-indexed-object":135,"../internals/to-primitive":141}],95:[function(r,i,o){var s=r("../internals/to-indexed-object"),a=r("../internals/object-get-own-property-names").f,l={}.toString,u=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];i.exports.f=function(h){if(!u||l.call(h)!="[object Window]")return a(s(h));try{return a(h)}catch{return u.slice()}}},{"../internals/object-get-own-property-names":96,"../internals/to-indexed-object":135}],96:[function(r,i,o){var s=r("../internals/object-keys-internal"),a=r("../internals/enum-bug-keys").concat("length","prototype");o.f=Object.getOwnPropertyNames||function(l){return s(l,a)}},{"../internals/enum-bug-keys":49,"../internals/object-keys-internal":99}],97:[function(r,i,o){o.f=Object.getOwnPropertySymbols},{}],98:[function(u,i,o){var s=u("../internals/has"),a=u("../internals/to-object"),l=u("../internals/shared-key"),u=u("../internals/correct-prototype-getter"),h=l("IE_PROTO"),p=Object.prototype;i.exports=u?Object.getPrototypeOf:function(c){return c=a(c),s(c,h)?c[h]:typeof c.constructor=="function"&&c instanceof c.constructor?c.constructor.prototype:c instanceof Object?p:null}},{"../internals/correct-prototype-getter":35,"../internals/has":61,"../internals/shared-key":119,"../internals/to-object":138}],99:[function(r,i,o){var s=r("../internals/has"),a=r("../internals/to-indexed-object"),l=r("../internals/array-includes").indexOf,u=r("../internals/hidden-keys");i.exports=function(h,p){var c,f=a(h),m=0,y=[];for(c in f)!s(u,c)&&s(f,c)&&y.push(c);for(;p.length>m;)!s(f,c=p[m++])||~l(y,c)||y.push(c);return y}},{"../internals/array-includes":18,"../internals/has":61,"../internals/hidden-keys":62,"../internals/to-indexed-object":135}],100:[function(r,i,o){var s=r("../internals/object-keys-internal"),a=r("../internals/enum-bug-keys");i.exports=Object.keys||function(l){return s(l,a)}},{"../internals/enum-bug-keys":49,"../internals/object-keys-internal":99}],101:[function(r,i,o){var s={}.propertyIsEnumerable,a=Object.getOwnPropertyDescriptor,l=a&&!s.call({1:2},1);o.f=l?function(u){return u=a(this,u),!!u&&u.enumerable}:s},{}],102:[function(r,i,o){var s=r("../internals/an-object"),a=r("../internals/a-possible-prototype");i.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var l,u=!1,h={};try{(l=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(h,[]),u=h instanceof Array}catch{}return function(p,c){return s(p),a(c),u?l.call(p,c):p.__proto__=c,p}}():void 0)},{"../internals/a-possible-prototype":6,"../internals/an-object":10}],103:[function(r,i,o){var s=r("../internals/to-string-tag-support"),a=r("../internals/classof");i.exports=s?{}.toString:function(){return"[object "+a(this)+"]"}},{"../internals/classof":29,"../internals/to-string-tag-support":142}],104:[function(r,i,o){var s=r("../internals/get-built-in"),a=r("../internals/object-get-own-property-names"),l=r("../internals/object-get-own-property-symbols"),u=r("../internals/an-object");i.exports=s("Reflect","ownKeys")||function(h){var p=a.f(u(h)),c=l.f;return c?p.concat(c(h)):p}},{"../internals/an-object":10,"../internals/get-built-in":57,"../internals/object-get-own-property-names":96,"../internals/object-get-own-property-symbols":97}],105:[function(r,i,o){r=r("../internals/global"),i.exports=r},{"../internals/global":60}],106:[function(r,i,o){i.exports=function(s){try{return{error:!1,value:s()}}catch(a){return{error:!0,value:a}}}},{}],107:[function(r,i,o){var s=r("../internals/an-object"),a=r("../internals/is-object"),l=r("../internals/new-promise-capability");i.exports=function(u,h){return s(u),a(h)&&h.constructor===u?h:((0,(u=l.f(u)).resolve)(h),u.promise)}},{"../internals/an-object":10,"../internals/is-object":75,"../internals/new-promise-capability":87}],108:[function(r,i,o){var s=r("../internals/redefine");i.exports=function(a,l,u){for(var h in l)s(a,h,l[h],u);return a}},{"../internals/redefine":109}],109:[function(p,i,o){var s=p("../internals/global"),a=p("../internals/create-non-enumerable-property"),l=p("../internals/has"),u=p("../internals/set-global"),h=p("../internals/inspect-source"),p=p("../internals/internal-state"),c=p.get,f=p.enforce,m=String(String).split("String");(i.exports=function(y,v,g,T){var b=!!T&&!!T.unsafe,w=!!T&&!!T.enumerable,T=!!T&&!!T.noTargetGet;typeof g=="function"&&(typeof v!="string"||l(g,"name")||a(g,"name",v),f(g).source=m.join(typeof v=="string"?v:"")),y===s?w?y[v]=g:u(v,g):(b?!T&&y[v]&&(w=!0):delete y[v],w?y[v]=g:a(y,v,g))})(Function.prototype,"toString",function(){return typeof this=="function"&&c(this).source||h(this)})},{"../internals/create-non-enumerable-property":38,"../internals/global":60,"../internals/has":61,"../internals/inspect-source":69,"../internals/internal-state":71,"../internals/set-global":116}],110:[function(r,i,o){var s=r("./classof-raw"),a=r("./regexp-exec");i.exports=function(l,u){var h=l.exec;if(typeof h=="function"){if(h=h.call(l,u),typeof h!="object")throw TypeError("RegExp exec method returned something other than an Object or null");return h}if(s(l)!=="RegExp")throw TypeError("RegExp#exec called on incompatible receiver");return a.call(l,u)}},{"./classof-raw":28,"./regexp-exec":111}],111:[function(u,i,o){var s,a,l=u("./regexp-flags"),u=u("./regexp-sticky-helpers"),h=RegExp.prototype.exec,p=String.prototype.replace,c=h,f=(s=/a/,a=/b*/g,h.call(s,"a"),h.call(a,"a"),s.lastIndex!==0||a.lastIndex!==0),m=u.UNSUPPORTED_Y||u.BROKEN_CARET,y=/()??/.exec("")[1]!==void 0;i.exports=c=f||y||m?function(v){var g,x,b,w,T=this,R=m&&T.sticky,C=l.call(T),P=T.source,I=0,D=v;return R&&((C=C.replace("y","")).indexOf("g")===-1&&(C+="g"),D=String(v).slice(T.lastIndex),0<T.lastIndex&&(!T.multiline||T.multiline&&v[T.lastIndex-1]!==`
`)&&(P="(?: "+P+")",D=" "+D,I++),x=new RegExp("^(?:"+P+")",C)),y&&(x=new RegExp("^"+P+"$(?!\\s)",C)),f&&(g=T.lastIndex),b=h.call(R?x:T,D),R?b?(b.input=b.input.slice(I),b[0]=b[0].slice(I),b.index=T.lastIndex,T.lastIndex+=b[0].length):T.lastIndex=0:f&&b&&(T.lastIndex=T.global?b.index+b[0].length:g),y&&b&&1<b.length&&p.call(b[0],x,function(){for(w=1;w<arguments.length-2;w++)arguments[w]===void 0&&(b[w]=void 0)}),b}:c},{"./regexp-flags":112,"./regexp-sticky-helpers":113}],112:[function(r,i,o){var s=r("../internals/an-object");i.exports=function(){var a=s(this),l="";return a.global&&(l+="g"),a.ignoreCase&&(l+="i"),a.multiline&&(l+="m"),a.dotAll&&(l+="s"),a.unicode&&(l+="u"),a.sticky&&(l+="y"),l}},{"../internals/an-object":10}],113:[function(r,i,o){r=r("./fails");function s(a,l){return RegExp(a,l)}o.UNSUPPORTED_Y=r(function(){var a=s("a","y");return a.lastIndex=2,a.exec("abcd")!=null}),o.BROKEN_CARET=r(function(){var a=s("^r","gy");return a.lastIndex=2,a.exec("str")!=null})},{"./fails":51}],114:[function(r,i,o){i.exports=function(s){if(s==null)throw TypeError("Can't call method on "+s);return s}},{}],115:[function(r,i,o){i.exports=Object.is||function(s,a){return s===a?s!==0||1/s==1/a:s!=s&&a!=a}},{}],116:[function(r,i,o){var s=r("../internals/global"),a=r("../internals/create-non-enumerable-property");i.exports=function(l,u){try{a(s,l,u)}catch{s[l]=u}return u}},{"../internals/create-non-enumerable-property":38,"../internals/global":60}],117:[function(r,i,o){var s=r("../internals/get-built-in"),a=r("../internals/object-define-property"),l=r("../internals/well-known-symbol"),u=r("../internals/descriptors"),h=l("species");i.exports=function(c){var c=s(c),f=a.f;u&&c&&!c[h]&&f(c,h,{configurable:!0,get:function(){return this}})}},{"../internals/descriptors":43,"../internals/get-built-in":57,"../internals/object-define-property":93,"../internals/well-known-symbol":149}],118:[function(r,i,o){var s=r("../internals/object-define-property").f,a=r("../internals/has"),l=r("../internals/well-known-symbol")("toStringTag");i.exports=function(u,h,p){u&&!a(u=p?u:u.prototype,l)&&s(u,l,{configurable:!0,value:h})}},{"../internals/has":61,"../internals/object-define-property":93,"../internals/well-known-symbol":149}],119:[function(r,i,o){var s=r("../internals/shared"),a=r("../internals/uid"),l=s("keys");i.exports=function(u){return l[u]||(l[u]=a(u))}},{"../internals/shared":121,"../internals/uid":146}],120:[function(s,i,o){var l=s("../internals/global"),s=s("../internals/set-global"),a="__core-js_shared__",l=l[a]||s(a,{});i.exports=l},{"../internals/global":60,"../internals/set-global":116}],121:[function(r,i,o){var s=r("../internals/is-pure"),a=r("../internals/shared-store");(i.exports=function(l,u){return a[l]||(a[l]=u!==void 0?u:{})})("versions",[]).push({version:"3.6.5",mode:s?"pure":"global",copyright:" 2020 Denis Pushkarev (zloirock.ru)"})},{"../internals/is-pure":76,"../internals/shared-store":120}],122:[function(r,i,o){var s=r("../internals/an-object"),a=r("../internals/a-function"),l=r("../internals/well-known-symbol")("species");i.exports=function(p,h){var p=s(p).constructor;return p===void 0||(p=s(p)[l])==null?h:a(p)}},{"../internals/a-function":5,"../internals/an-object":10,"../internals/well-known-symbol":149}],123:[function(r,i,o){var s=r("../internals/fails");i.exports=function(a){return s(function(){var l=""[a]('"');return l!==l.toLowerCase()||3<l.split('"').length})}},{"../internals/fails":51}],124:[function(r,i,o){function s(u){return function(f,m){var c,f=String(l(f)),m=a(m),y=f.length;return m<0||y<=m?u?"":void 0:(c=f.charCodeAt(m))<55296||56319<c||m+1===y||(y=f.charCodeAt(m+1))<56320||57343<y?u?f.charAt(m):c:u?f.slice(m,m+2):y-56320+(c-55296<<10)+65536}}var a=r("../internals/to-integer"),l=r("../internals/require-object-coercible");i.exports={codeAt:s(!1),charAt:s(!0)}},{"../internals/require-object-coercible":114,"../internals/to-integer":136}],125:[function(r,i,o){r=r("../internals/engine-user-agent"),i.exports=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(r)},{"../internals/engine-user-agent":47}],126:[function(r,i,o){function s(p){return function(y,x,g){var y=String(u(y)),v=y.length,g=g===void 0?" ":String(g),x=a(x);return x<=v||g==""?y:((v=l.call(g,h((x=x-v)/g.length))).length>x&&(v=v.slice(0,x)),p?y+v:v+y)}}var a=r("../internals/to-length"),l=r("../internals/string-repeat"),u=r("../internals/require-object-coercible"),h=Math.ceil;i.exports={start:s(!1),end:s(!0)}},{"../internals/require-object-coercible":114,"../internals/string-repeat":128,"../internals/to-length":137}],127:[function(r,i,o){function s(b){return b+22+75*(b<26)}function a(b){var w,T=[],R=(b=function(Y){for(var Z=[],ce=0,B=Y.length;ce<B;){var U,K=Y.charCodeAt(ce++);55296<=K&&K<=56319&&ce<B?(64512&(U=Y.charCodeAt(ce++)))==56320?Z.push(((1023&K)<<10)+(1023&U)+65536):(Z.push(K),ce--):Z.push(K)}return Z}(b)).length,C=128,P=0,I=72;for(O=0;O<b.length;O++)(w=b[O])<128&&T.push(x(w));var D=T.length,j=D;for(D&&T.push("-");j<R;){for(var N=l,O=0;O<b.length;O++)C<=(w=b[O])&&w<N&&(N=w);var W=j+1;if(N-C>g((l-P)/W))throw RangeError(y);for(P+=(N-C)*W,C=N,O=0;O<b.length;O++){if((w=b[O])<C&&++P>l)throw RangeError(y);if(w==C){for(var X=P,J=u;;J+=u){var ee=J<=I?1:I+h<=J?h:J-I;if(X<ee)break;var V=X-ee,q=u-ee;T.push(x(s(ee+V%q))),X=g(V/q)}T.push(x(s(X))),I=function(Y,Z,ce){var B=0;for(Y=ce?g(Y/c):Y>>1,Y+=g(Y/Z);v*h>>1<Y;B+=u)Y=g(Y/v);return g(B+(v+1)*Y/(Y+p))}(P,W,j==D),P=0,++j}}++P,++C}return T.join("")}var l=2147483647,u=36,h=26,p=38,c=700,f=/[^\0-\u007E]/,m=/[.\u3002\uFF0E\uFF61]/g,y="Overflow: input needs wider integers to process",v=u-1,g=Math.floor,x=String.fromCharCode;i.exports=function(b){for(var w,T=[],R=b.toLowerCase().replace(m,".").split("."),C=0;C<R.length;C++)w=R[C],T.push(f.test(w)?"xn--"+a(w):w);return T.join(".")}},{}],128:[function(r,i,o){var s=r("../internals/to-integer"),a=r("../internals/require-object-coercible");i.exports="".repeat||function(l){var u=String(a(this)),h="",p=s(l);if(p<0||p==1/0)throw RangeError("Wrong number of repetitions");for(;0<p;(p>>>=1)&&(u+=u))1&p&&(h+=u);return h}},{"../internals/require-object-coercible":114,"../internals/to-integer":136}],129:[function(r,i,o){var s=r("../internals/fails"),a=r("../internals/whitespaces");i.exports=function(l){return s(function(){return!!a[l]()||""[l]()!=""||a[l].name!==l})}},{"../internals/fails":51,"../internals/whitespaces":150}],130:[function(l,i,o){function s(p){return function(c){return c=String(a(c)),1&p&&(c=c.replace(u,"")),c=2&p?c.replace(h,""):c}}var a=l("../internals/require-object-coercible"),l="["+l("../internals/whitespaces")+"]",u=RegExp("^"+l+l+"*"),h=RegExp(l+l+"*$");i.exports={start:s(1),end:s(2),trim:s(3)}},{"../internals/require-object-coercible":114,"../internals/whitespaces":150}],131:[function(v,i,o){function s(j){return function(){D(j)}}function a(j){D(j.data)}function l(j){h.postMessage(j+"",g.protocol+"//"+g.host)}var u,h=v("../internals/global"),p=v("../internals/fails"),c=v("../internals/classof-raw"),f=v("../internals/function-bind-context"),m=v("../internals/html"),y=v("../internals/document-create-element"),v=v("../internals/engine-is-ios"),g=h.location,x=h.setImmediate,b=h.clearImmediate,w=h.process,T=h.MessageChannel,R=h.Dispatch,C=0,P={},I="onreadystatechange",D=function(j){var N;P.hasOwnProperty(j)&&(N=P[j],delete P[j],N())};x&&b||(x=function(j){for(var N=[],O=1;O<arguments.length;)N.push(arguments[O++]);return P[++C]=function(){(typeof j=="function"?j:Function(j)).apply(void 0,N)},u(C),C},b=function(j){delete P[j]},c(w)=="process"?u=function(j){w.nextTick(s(j))}:R&&R.now?u=function(j){R.now(s(j))}:T&&!v?(v=(c=new T).port2,c.port1.onmessage=a,u=f(v.postMessage,v,1)):!h.addEventListener||typeof postMessage!="function"||h.importScripts||p(l)||g.protocol==="file:"?u=I in y("script")?function(j){m.appendChild(y("script"))[I]=function(){m.removeChild(this),D(j)}}:function(j){setTimeout(s(j),0)}:(u=l,h.addEventListener("message",a,!1))),i.exports={set:x,clear:b}},{"../internals/classof-raw":28,"../internals/document-create-element":44,"../internals/engine-is-ios":46,"../internals/fails":51,"../internals/function-bind-context":55,"../internals/global":60,"../internals/html":64}],132:[function(r,i,o){var s=r("../internals/classof-raw");i.exports=function(a){if(typeof a!="number"&&s(a)!="Number")throw TypeError("Incorrect invocation");return+a}},{"../internals/classof-raw":28}],133:[function(r,i,o){var s=r("../internals/to-integer"),a=Math.max,l=Math.min;i.exports=function(u,h){return u=s(u),u<0?a(u+h,0):l(u,h)}},{"../internals/to-integer":136}],134:[function(r,i,o){var s=r("../internals/to-integer"),a=r("../internals/to-length");i.exports=function(u){if(u===void 0)return 0;var u=s(u),h=a(u);if(u!==h)throw RangeError("Wrong length or index");return h}},{"../internals/to-integer":136,"../internals/to-length":137}],135:[function(r,i,o){var s=r("../internals/indexed-object"),a=r("../internals/require-object-coercible");i.exports=function(l){return s(a(l))}},{"../internals/indexed-object":67,"../internals/require-object-coercible":114}],136:[function(r,i,o){var s=Math.ceil,a=Math.floor;i.exports=function(l){return isNaN(l=+l)?0:(0<l?a:s)(l)}},{}],137:[function(r,i,o){var s=r("../internals/to-integer"),a=Math.min;i.exports=function(l){return 0<l?a(s(l),9007199254740991):0}},{"../internals/to-integer":136}],138:[function(r,i,o){var s=r("../internals/require-object-coercible");i.exports=function(a){return Object(s(a))}},{"../internals/require-object-coercible":114}],139:[function(r,i,o){var s=r("../internals/to-positive-integer");i.exports=function(a,l){if(a=s(a),a%l)throw RangeError("Wrong offset");return a}},{"../internals/to-positive-integer":140}],140:[function(r,i,o){var s=r("../internals/to-integer");i.exports=function(a){if(a=s(a),a<0)throw RangeError("The argument can't be less than 0");return a}},{"../internals/to-integer":136}],141:[function(r,i,o){var s=r("../internals/is-object");i.exports=function(a,l){if(!s(a))return a;var u,h;if(l&&typeof(u=a.toString)=="function"&&!s(h=u.call(a))||typeof(u=a.valueOf)=="function"&&!s(h=u.call(a))||!l&&typeof(u=a.toString)=="function"&&!s(h=u.call(a)))return h;throw TypeError("Can't convert object to primitive value")}},{"../internals/is-object":75}],142:[function(r,i,o){var s={};s[r("../internals/well-known-symbol")("toStringTag")]="z",i.exports=String(s)==="[object z]"},{"../internals/well-known-symbol":149}],143:[function(r,i,o){function s(je,Ue){for(var Ge=0,_e=Ue.length,fe=new(ne(je))(_e);Ge<_e;)fe[Ge]=Ue[Ge++];return fe}function a(je,Ue){U(je,Ue,{get:function(){return ce(this)[Ue]}})}function l(je){return je instanceof pe||(je=D(je))=="ArrayBuffer"||je=="SharedArrayBuffer"}function u(je,Ue){return Te(je)&&typeof Ue!="symbol"&&Ue in je&&String(+Ue)==String(Ue)}function h(je,Ue){return u(je,Ue=P(Ue,!0))?b(2,je[Ue]):K(je,Ue)}function p(je,Ue,Ge){return!(u(je,Ue=P(Ue,!0))&&j(Ge)&&I(Ge,"value"))||I(Ge,"get")||I(Ge,"set")||Ge.configurable||I(Ge,"writable")&&!Ge.writable||I(Ge,"enumerable")&&!Ge.enumerable?U(je,Ue,Ge):(je[Ue]=Ge.value,je)}var c=r("../internals/export"),f=r("../internals/global"),m=r("../internals/descriptors"),y=r("../internals/typed-array-constructors-require-wrappers"),v=r("../internals/array-buffer-view-core"),g=r("../internals/array-buffer"),x=r("../internals/an-instance"),b=r("../internals/create-property-descriptor"),w=r("../internals/create-non-enumerable-property"),T=r("../internals/to-length"),R=r("../internals/to-index"),C=r("../internals/to-offset"),P=r("../internals/to-primitive"),I=r("../internals/has"),D=r("../internals/classof"),j=r("../internals/is-object"),N=r("../internals/object-create"),O=r("../internals/object-set-prototype-of"),W=r("../internals/object-get-own-property-names").f,X=r("../internals/typed-array-from"),J=r("../internals/array-iteration").forEach,ee=r("../internals/set-species"),V=r("../internals/object-define-property"),q=r("../internals/object-get-own-property-descriptor"),Y=r("../internals/internal-state"),Z=r("../internals/inherit-if-required"),ce=Y.get,B=Y.set,U=V.f,K=q.f,re=Math.round,ae=f.RangeError,pe=g.ArrayBuffer,ye=g.DataView,Re=v.NATIVE_ARRAY_BUFFER_VIEWS,Me=v.TYPED_ARRAY_TAG,xe=v.TypedArray,ve=v.TypedArrayPrototype,ne=v.aTypedArrayConstructor,Te=v.isTypedArray,Pe="BYTES_PER_ELEMENT",Ae="Wrong length";m?(Re||(q.f=h,V.f=p,a(ve,"buffer"),a(ve,"byteOffset"),a(ve,"byteLength"),a(ve,"length")),c({target:"Object",stat:!0,forced:!Re},{getOwnPropertyDescriptor:h,defineProperty:p}),i.exports=function(Be,Ue,Ge){function _e(Ye,de){U(Ye,de,{get:function(){var ge=this,ue=de;return(ge=ce(ge)).view[Ke](ue*fe+ge.byteOffset,!0)},set:function(ge){var ue=this,Se=de;ue=ce(ue),Ge&&(ge=(ge=re(ge))<0?0:255<ge?255:255&ge),ue.view[$e](Se*fe+ue.byteOffset,ge,!0)},enumerable:!0})}var fe=Be.match(/\d+$/)[0]/8,We=Be+(Ge?"Clamped":"")+"Array",Ke="get"+Be,$e="set"+Be,et=f[We],ht=et,Be=ht&&ht.prototype,rt={};Re?y&&(ht=Ue(function(Ye,de,ge,ue){return x(Ye,ht,We),Z(j(de)?l(de)?ue!==void 0?new et(de,C(ge,fe),ue):ge!==void 0?new et(de,C(ge,fe)):new et(de):Te(de)?s(ht,de):X.call(ht,de):new et(R(de)),Ye,ht)}),O&&O(ht,xe),J(W(et),function(Ye){Ye in ht||w(ht,Ye,et[Ye])}),ht.prototype=Be):(ht=Ue(function(Ye,de,ge,ue){x(Ye,ht,We);var Se,De,be=0,ke=0;if(j(de)){if(!l(de))return Te(de)?s(ht,de):X.call(ht,de);var ot=de,ke=C(ge,fe),ge=de.byteLength;if(ue===void 0){if(ge%fe||(Se=ge-ke)<0)throw ae(Ae)}else if(ge<(Se=T(ue)*fe)+ke)throw ae(Ae);De=Se/fe}else De=R(de),ot=new pe(Se=De*fe);for(B(Ye,{buffer:ot,byteOffset:ke,byteLength:Se,length:De,view:new ye(ot)});be<De;)_e(Ye,be++)}),O&&O(ht,xe),Be=ht.prototype=N(ve)),Be.constructor!==ht&&w(Be,"constructor",ht),Me&&w(Be,Me,We),rt[We]=ht,c({global:!0,forced:ht!=et,sham:!Re},rt),Pe in ht||w(ht,Pe,fe),Pe in Be||w(Be,Pe,fe),ee(We)}):i.exports=function(){}},{"../internals/an-instance":9,"../internals/array-buffer":13,"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/classof":29,"../internals/create-non-enumerable-property":38,"../internals/create-property-descriptor":39,"../internals/descriptors":43,"../internals/export":50,"../internals/global":60,"../internals/has":61,"../internals/inherit-if-required":68,"../internals/internal-state":71,"../internals/is-object":75,"../internals/object-create":91,"../internals/object-define-property":93,"../internals/object-get-own-property-descriptor":94,"../internals/object-get-own-property-names":96,"../internals/object-set-prototype-of":102,"../internals/set-species":117,"../internals/to-index":134,"../internals/to-length":137,"../internals/to-offset":139,"../internals/to-primitive":141,"../internals/typed-array-constructors-require-wrappers":144,"../internals/typed-array-from":145}],144:[function(u,i,o){var s=u("../internals/global"),a=u("../internals/fails"),l=u("../internals/check-correctness-of-iteration"),u=u("../internals/array-buffer-view-core").NATIVE_ARRAY_BUFFER_VIEWS,h=s.ArrayBuffer,p=s.Int8Array;i.exports=!u||!a(function(){p(1)})||!a(function(){new p(-1)})||!l(function(c){new p,new p(null),new p(1.5),new p(c)},!0)||a(function(){return new p(new h(2),1,void 0).length!==1})},{"../internals/array-buffer-view-core":12,"../internals/check-correctness-of-iteration":27,"../internals/fails":51,"../internals/global":60}],145:[function(r,i,o){var s=r("../internals/to-object"),a=r("../internals/to-length"),l=r("../internals/get-iterator-method"),u=r("../internals/is-array-iterator-method"),h=r("../internals/function-bind-context"),p=r("../internals/array-buffer-view-core").aTypedArrayConstructor;i.exports=function(c){var f,m,y,v,g,x,b=s(c),w=arguments.length,T=1<w?arguments[1]:void 0,R=T!==void 0,C=l(b);if(C!=null&&!u(C))for(x=(g=C.call(b)).next,b=[];!(v=x.call(g)).done;)b.push(v.value);for(R&&2<w&&(T=h(T,arguments[2],2)),m=a(b.length),y=new(p(this))(m),f=0;f<m;f++)y[f]=R?T(b[f],f):b[f];return y}},{"../internals/array-buffer-view-core":12,"../internals/function-bind-context":55,"../internals/get-iterator-method":58,"../internals/is-array-iterator-method":72,"../internals/to-length":137,"../internals/to-object":138}],146:[function(r,i,o){var s=0,a=Math.random();i.exports=function(l){return"Symbol("+String(l===void 0?"":l)+")_"+(++s+a).toString(36)}},{}],147:[function(r,i,o){r=r("../internals/native-symbol"),i.exports=r&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},{"../internals/native-symbol":84}],148:[function(r,i,o){r=r("../internals/well-known-symbol"),o.f=r},{"../internals/well-known-symbol":149}],149:[function(p,i,o){var s=p("../internals/global"),a=p("../internals/shared"),l=p("../internals/has"),u=p("../internals/uid"),h=p("../internals/native-symbol"),p=p("../internals/use-symbol-as-uid"),c=a("wks"),f=s.Symbol,m=p?f:f&&f.withoutSetter||u;i.exports=function(y){return l(c,y)||(h&&l(f,y)?c[y]=f[y]:c[y]=m("Symbol."+y)),c[y]}},{"../internals/global":60,"../internals/has":61,"../internals/native-symbol":84,"../internals/shared":121,"../internals/uid":146,"../internals/use-symbol-as-uid":147}],150:[function(r,i,o){i.exports=`	
\v\f\r \u2028\u2029\uFEFF`},{}],151:[function(l,i,o){var s=l("../internals/export"),a=l("../internals/global"),h=l("../internals/array-buffer"),l=l("../internals/set-species"),u="ArrayBuffer",h=h[u];s({global:!0,forced:a[u]!==h},{ArrayBuffer:h}),l(u)},{"../internals/array-buffer":13,"../internals/export":50,"../internals/global":60,"../internals/set-species":117}],152:[function(b,i,o){var s=b("../internals/export"),a=b("../internals/fails"),l=b("../internals/is-array"),u=b("../internals/is-object"),h=b("../internals/to-object"),p=b("../internals/to-length"),c=b("../internals/create-property"),f=b("../internals/array-species-create"),m=b("../internals/array-method-has-species-support"),x=b("../internals/well-known-symbol"),b=b("../internals/engine-v8-version"),y=x("isConcatSpreadable"),v=9007199254740991,g="Maximum allowed index exceeded",x=51<=b||!a(function(){var w=[];return w[y]=!1,w.concat()[0]!==w}),b=m("concat");s({target:"Array",proto:!0,forced:!x||!b},{concat:function(w){for(var T,R,C,P,I,D=h(this),j=f(D,0),N=0,O=-1,W=arguments.length;O<W;O++)if(I=void 0,!u(P=C=O===-1?D:arguments[O])||((I=P[y])!==void 0?!I:!l(P))){if(v<=N)throw TypeError(g);c(j,N++,C)}else{if(R=p(C.length),v<N+R)throw TypeError(g);for(T=0;T<R;T++,N++)T in C&&c(j,N,C[T])}return j.length=N,j}})},{"../internals/array-method-has-species-support":21,"../internals/array-species-create":25,"../internals/create-property":40,"../internals/engine-v8-version":48,"../internals/export":50,"../internals/fails":51,"../internals/is-array":73,"../internals/is-object":75,"../internals/to-length":137,"../internals/to-object":138,"../internals/well-known-symbol":149}],153:[function(l,i,o){var s=l("../internals/export"),a=l("../internals/array-copy-within"),l=l("../internals/add-to-unscopables");s({target:"Array",proto:!0},{copyWithin:a}),l("copyWithin")},{"../internals/add-to-unscopables":7,"../internals/array-copy-within":14,"../internals/export":50}],154:[function(u,i,o){var s=u("../internals/export"),a=u("../internals/array-iteration").every,l=u("../internals/array-method-is-strict"),u=u("../internals/array-method-uses-to-length"),l=l("every"),u=u("every");s({target:"Array",proto:!0,forced:!l||!u},{every:function(h){return a(this,h,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":50}],155:[function(l,i,o){var s=l("../internals/export"),a=l("../internals/array-fill"),l=l("../internals/add-to-unscopables");s({target:"Array",proto:!0},{fill:a}),l("fill")},{"../internals/add-to-unscopables":7,"../internals/array-fill":15,"../internals/export":50}],156:[function(u,i,o){var s=u("../internals/export"),a=u("../internals/array-iteration").filter,l=u("../internals/array-method-has-species-support"),u=u("../internals/array-method-uses-to-length"),l=l("filter"),u=u("filter");s({target:"Array",proto:!0,forced:!l||!u},{filter:function(h){return a(this,h,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/export":50}],157:[function(p,i,o){var s=p("../internals/export"),a=p("../internals/array-iteration").findIndex,l=p("../internals/add-to-unscopables"),p=p("../internals/array-method-uses-to-length"),u="findIndex",h=!0,p=p(u);u in[]&&Array(1)[u](function(){h=!1}),s({target:"Array",proto:!0,forced:h||!p},{findIndex:function(c){return a(this,c,1<arguments.length?arguments[1]:void 0)}}),l(u)},{"../internals/add-to-unscopables":7,"../internals/array-iteration":19,"../internals/array-method-uses-to-length":23,"../internals/export":50}],158:[function(r,i,o){var s=r("../internals/export"),a=r("../internals/flatten-into-array"),l=r("../internals/to-object"),u=r("../internals/to-length"),h=r("../internals/a-function"),p=r("../internals/array-species-create");s({target:"Array",proto:!0},{flatMap:function(c){var f,m=l(this),y=u(m.length);return h(c),(f=p(m,0)).length=a(f,m,m,y,0,1,c,1<arguments.length?arguments[1]:void 0),f}})},{"../internals/a-function":5,"../internals/array-species-create":25,"../internals/export":50,"../internals/flatten-into-array":53,"../internals/to-length":137,"../internals/to-object":138}],159:[function(r,i,o){var s=r("../internals/export"),a=r("../internals/flatten-into-array"),l=r("../internals/to-object"),u=r("../internals/to-length"),h=r("../internals/to-integer"),p=r("../internals/array-species-create");s({target:"Array",proto:!0},{flat:function(){var c=arguments.length?arguments[0]:void 0,f=l(this),m=u(f.length),y=p(f,0);return y.length=a(y,f,f,m,0,c===void 0?1:h(c)),y}})},{"../internals/array-species-create":25,"../internals/export":50,"../internals/flatten-into-array":53,"../internals/to-integer":136,"../internals/to-length":137,"../internals/to-object":138}],160:[function(a,i,o){var s=a("../internals/export"),a=a("../internals/array-for-each");s({target:"Array",proto:!0,forced:[].forEach!=a},{forEach:a})},{"../internals/array-for-each":16,"../internals/export":50}],161:[function(r,i,o){var s=r("../internals/export"),a=r("../internals/array-from");s({target:"Array",stat:!0,forced:!r("../internals/check-correctness-of-iteration")(function(l){Array.from(l)})},{from:a})},{"../internals/array-from":17,"../internals/check-correctness-of-iteration":27,"../internals/export":50}],162:[function(r,i,o){var s=r("../internals/export"),a=r("../internals/array-includes").includes,l=r("../internals/add-to-unscopables");s({target:"Array",proto:!0,forced:!r("../internals/array-method-uses-to-length")("indexOf",{ACCESSORS:!0,1:0})},{includes:function(u){return a(this,u,1<arguments.length?arguments[1]:void 0)}}),l("includes")},{"../internals/add-to-unscopables":7,"../internals/array-includes":18,"../internals/array-method-uses-to-length":23,"../internals/export":50}],163:[function(p,i,o){var s=p("../internals/export"),a=p("../internals/array-includes").indexOf,h=p("../internals/array-method-is-strict"),p=p("../internals/array-method-uses-to-length"),l=[].indexOf,u=!!l&&1/[1].indexOf(1,-0)<0,h=h("indexOf"),p=p("indexOf",{ACCESSORS:!0,1:0});s({target:"Array",proto:!0,forced:u||!h||!p},{indexOf:function(c){return u?l.apply(this,arguments)||0:a(this,c,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-includes":18,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":50}],164:[function(h,i,o){var s=h("../internals/to-indexed-object"),a=h("../internals/add-to-unscopables"),l=h("../internals/iterators"),u=h("../internals/internal-state"),h=h("../internals/define-iterator"),p="Array Iterator",c=u.set,f=u.getterFor(p);i.exports=h(Array,"Array",function(m,y){c(this,{type:p,target:s(m),index:0,kind:y})},function(){var m=f(this),y=m.target,v=m.kind,g=m.index++;return!y||g>=y.length?{value:m.target=void 0,done:!0}:v=="keys"?{value:g,done:!1}:v=="values"?{value:y[g],done:!1}:{value:[g,y[g]],done:!1}},"values"),l.Arguments=l.Array,a("keys"),a("values"),a("entries")},{"../internals/add-to-unscopables":7,"../internals/define-iterator":41,"../internals/internal-state":71,"../internals/iterators":80,"../internals/to-indexed-object":135}],165:[function(h,i,o){var s=h("../internals/export"),u=h("../internals/indexed-object"),a=h("../internals/to-indexed-object"),h=h("../internals/array-method-is-strict"),l=[].join,u=u!=Object,h=h("join",",");s({target:"Array",proto:!0,forced:u||!h},{join:function(p){return l.call(a(this),p===void 0?",":p)}})},{"../internals/array-method-is-strict":22,"../internals/export":50,"../internals/indexed-object":67,"../internals/to-indexed-object":135}],166:[function(a,i,o){var s=a("../internals/export"),a=a("../internals/array-last-index-of");s({target:"Array",proto:!0,forced:a!==[].lastIndexOf},{lastIndexOf:a})},{"../internals/array-last-index-of":20,"../internals/export":50}],167:[function(u,i,o){var s=u("../internals/export"),a=u("../internals/array-iteration").map,l=u("../internals/array-method-has-species-support"),u=u("../internals/array-method-uses-to-length"),l=l("map"),u=u("map");s({target:"Array",proto:!0,forced:!l||!u},{map:function(h){return a(this,h,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/export":50}],168:[function(y,i,o){var s=y("../internals/export"),a=y("../internals/is-object"),l=y("../internals/is-array"),u=y("../internals/to-absolute-index"),h=y("../internals/to-length"),p=y("../internals/to-indexed-object"),c=y("../internals/create-property"),f=y("../internals/well-known-symbol"),m=y("../internals/array-method-has-species-support"),y=y("../internals/array-method-uses-to-length"),m=m("slice"),y=y("slice",{ACCESSORS:!0,0:0,1:2}),v=f("species"),g=[].slice,x=Math.max;s({target:"Array",proto:!0,forced:!m||!y},{slice:function(b,w){var T,R,C,P=p(this),I=h(P.length),D=u(b,I),j=u(w===void 0?I:w,I);if(l(P)&&((T=typeof(T=P.constructor)=="function"&&(T===Array||l(T.prototype))||a(T)&&(T=T[v])===null?void 0:T)===Array||T===void 0))return g.call(P,D,j);for(R=new(T===void 0?Array:T)(x(j-D,0)),C=0;D<j;D++,C++)D in P&&c(R,C,P[D]);return R.length=C,R}})},{"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/create-property":40,"../internals/export":50,"../internals/is-array":73,"../internals/is-object":75,"../internals/to-absolute-index":133,"../internals/to-indexed-object":135,"../internals/to-length":137,"../internals/well-known-symbol":149}],169:[function(u,i,o){var s=u("../internals/export"),a=u("../internals/array-iteration").some,l=u("../internals/array-method-is-strict"),u=u("../internals/array-method-uses-to-length"),l=l("some"),u=u("some");s({target:"Array",proto:!0,forced:!l||!u},{some:function(h){return a(this,h,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":50}],170:[function(m,i,o){var s=m("../internals/export"),a=m("../internals/to-absolute-index"),l=m("../internals/to-integer"),u=m("../internals/to-length"),h=m("../internals/to-object"),p=m("../internals/array-species-create"),c=m("../internals/create-property"),f=m("../internals/array-method-has-species-support"),m=m("../internals/array-method-uses-to-length"),f=f("splice"),m=m("splice",{ACCESSORS:!0,0:0,1:2}),y=Math.max,v=Math.min;s({target:"Array",proto:!0,forced:!f||!m},{splice:function(N,x){var b,w,T,R,C,P,I=h(this),D=u(I.length),j=a(N,D),N=arguments.length;if(N===0?b=w=0:w=N===1?(b=0,D-j):(b=N-2,v(y(l(x),0),D-j)),9007199254740991<D+b-w)throw TypeError("Maximum allowed length exceeded");for(T=p(I,w),R=0;R<w;R++)(C=j+R)in I&&c(T,R,I[C]);if(b<(T.length=w)){for(R=j;R<D-w;R++)P=R+b,(C=R+w)in I?I[P]=I[C]:delete I[P];for(R=D;D-w+b<R;R--)delete I[R-1]}else if(w<b)for(R=D-w;j<R;R--)P=R+b-1,(C=R+w-1)in I?I[P]=I[C]:delete I[P];for(R=0;R<b;R++)I[R+j]=arguments[R+2];return I.length=D-w+b,T}})},{"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/array-species-create":25,"../internals/create-property":40,"../internals/export":50,"../internals/to-absolute-index":133,"../internals/to-integer":136,"../internals/to-length":137,"../internals/to-object":138}],171:[function(r,i,o){r("../internals/add-to-unscopables")("flatMap")},{"../internals/add-to-unscopables":7}],172:[function(r,i,o){r("../internals/add-to-unscopables")("flat")},{"../internals/add-to-unscopables":7}],173:[function(a,i,o){var s=a("../internals/descriptors"),a=a("../internals/object-define-property").f,l=Function.prototype,u=l.toString,h=/^\s*function ([^ (]*)/;!s||"name"in l||a(l,"name",{configurable:!0,get:function(){try{return u.call(this).match(h)[1]}catch{return""}}})},{"../internals/descriptors":43,"../internals/object-define-property":93}],174:[function(a,i,o){var s=a("../internals/collection"),a=a("../internals/collection-strong");i.exports=s("Map",function(l){return function(){return l(this,arguments.length?arguments[0]:void 0)}},a)},{"../internals/collection":32,"../internals/collection-strong":30}],175:[function(s,i,o){var s=s("../internals/export"),a=Math.hypot,l=Math.abs,u=Math.sqrt;s({target:"Math",stat:!0,forced:!!a&&a(1/0,NaN)!==1/0},{hypot:function(h,p){for(var c,f,m=0,y=0,v=arguments.length,g=0;y<v;)g<(c=l(arguments[y++]))?(m=m*(f=g/c)*f+1,g=c):m+=0<c?(f=c/g)*f:c;return g===1/0?1/0:g*u(m)}})},{"../internals/export":50}],176:[function(s,i,o){var s=s("../internals/export"),a=Math.log,l=Math.LN2;s({target:"Math",stat:!0},{log2:function(u){return a(u)/l}})},{"../internals/export":50}],177:[function(r,i,o){r("../internals/export")({target:"Math",stat:!0},{sign:r("../internals/math-sign")})},{"../internals/export":50,"../internals/math-sign":81}],178:[function(r,i,o){function s(O){var W,X,J,ee,V,q,Y,Z=m(O,!1);if(typeof Z=="string"&&2<Z.length){if((O=(Z=w(Z)).charCodeAt(0))===43||O===45){if((W=Z.charCodeAt(2))===88||W===120)return NaN}else if(O===48){switch(Z.charCodeAt(1)){case 66:case 98:X=2,J=49;break;case 79:case 111:X=8,J=55;break;default:return+Z}for(V=(ee=Z.slice(2)).length,q=0;q<V;q++)if((Y=ee.charCodeAt(q))<48||J<Y)return NaN;return parseInt(ee,X)}}return+Z}var a=r("../internals/descriptors"),l=r("../internals/global"),u=r("../internals/is-forced"),h=r("../internals/redefine"),p=r("../internals/has"),c=r("../internals/classof-raw"),f=r("../internals/inherit-if-required"),m=r("../internals/to-primitive"),y=r("../internals/fails"),v=r("../internals/object-create"),g=r("../internals/object-get-own-property-names").f,x=r("../internals/object-get-own-property-descriptor").f,b=r("../internals/object-define-property").f,w=r("../internals/string-trim").trim,T="Number",R=l[T],C=R.prototype,P=c(v(C))==T;if(u(T,!R(" 0o1")||!R("0b1")||R("+0x1"))){for(var I,D=function(W){var W=arguments.length<1?0:W,X=this;return X instanceof D&&(P?y(function(){C.valueOf.call(X)}):c(X)!=T)?f(new R(s(W)),X,D):s(W)},j=a?g(R):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),N=0;j.length>N;N++)p(R,I=j[N])&&!p(D,I)&&b(D,I,x(R,I));(D.prototype=C).constructor=D,h(l,T,D)}},{"../internals/classof-raw":28,"../internals/descriptors":43,"../internals/fails":51,"../internals/global":60,"../internals/has":61,"../internals/inherit-if-required":68,"../internals/is-forced":74,"../internals/object-create":91,"../internals/object-define-property":93,"../internals/object-get-own-property-descriptor":94,"../internals/object-get-own-property-names":96,"../internals/redefine":109,"../internals/string-trim":130,"../internals/to-primitive":141}],179:[function(r,i,o){r("../internals/export")({target:"Number",stat:!0},{isFinite:r("../internals/number-is-finite")})},{"../internals/export":50,"../internals/number-is-finite":89}],180:[function(p,i,o){function s(m,y,v){return y===0?v:y%2==1?s(m,y-1,v*m):s(m*m,y/2,v)}var a=p("../internals/export"),l=p("../internals/to-integer"),u=p("../internals/this-number-value"),h=p("../internals/string-repeat"),p=p("../internals/fails"),c=1 .toFixed,f=Math.floor;a({target:"Number",proto:!0,forced:c&&(8e-5.toFixed(3)!=="0.000"||.9.toFixed(0)!=="1"||1.255.toFixed(2)!=="1.25"||0xde0b6b3a7640080.toFixed(0)!=="1000000000000000128")||!p(function(){c.call({})})},{toFixed:function(T){function y(I,D){for(var j=-1,N=D;++j<6;)N+=I*R[j],R[j]=N%1e7,N=f(N/1e7)}function v(I){for(var D=6,j=0;0<=--D;)j+=R[D],R[D]=f(j/I),j=j%I*1e7}function g(){for(var I,D=6,j="";0<=--D;)j===""&&D!==0&&R[D]===0||(I=String(R[D]),j=j===""?I:j+h.call("0",7-I.length)+I);return j}var x,b,w=u(this),T=l(T),R=[0,0,0,0,0,0],C="",P="0";if(T<0||20<T)throw RangeError("Incorrect fraction digits");if(w!=w)return"NaN";if(w<=-1e21||1e21<=w)return String(w);if(w<0&&(C="-",w=-w),1e-21<w)if(w=(x=function(I){for(var D=0,j=I;4096<=j;)D+=12,j/=4096;for(;2<=j;)D+=1,j/=2;return D}(w*s(2,69,1))-69)<0?w*s(2,-x,1):w/s(2,x,1),w*=4503599627370496,0<(x=52-x)){for(y(0,w),b=T;7<=b;)y(1e7,0),b-=7;for(y(s(10,b,1),0),b=x-1;23<=b;)v(1<<23),b-=23;v(1<<b),y(1,1),v(2),P=g()}else y(0,w),y(1<<-x,0),P=g()+h.call("0",T);return P=0<T?C+((w=P.length)<=T?"0."+h.call("0",T-w)+P:P.slice(0,w-T)+"."+P.slice(w-T)):C+P}})},{"../internals/export":50,"../internals/fails":51,"../internals/string-repeat":128,"../internals/this-number-value":132,"../internals/to-integer":136}],181:[function(a,i,o){var s=a("../internals/export"),a=a("../internals/object-assign");s({target:"Object",stat:!0,forced:Object.assign!==a},{assign:a})},{"../internals/export":50,"../internals/object-assign":90}],182:[function(r,i,o){var s=r("../internals/export"),a=r("../internals/iterate"),l=r("../internals/create-property");s({target:"Object",stat:!0},{fromEntries:function(u){var h={};return a(u,function(p,c){l(h,p,c)},void 0,!0),h}})},{"../internals/create-property":40,"../internals/export":50,"../internals/iterate":78}],183:[function(u,i,o){var s=u("../internals/export"),h=u("../internals/fails"),a=u("../internals/to-indexed-object"),l=u("../internals/object-get-own-property-descriptor").f,u=u("../internals/descriptors"),h=h(function(){l(1)});s({target:"Object",stat:!0,forced:!u||h,sham:!u},{getOwnPropertyDescriptor:function(p,c){return l(a(p),c)}})},{"../internals/descriptors":43,"../internals/export":50,"../internals/fails":51,"../internals/object-get-own-property-descriptor":94,"../internals/to-indexed-object":135}],184:[function(l,i,o){var s=l("../internals/export"),a=l("../internals/fails"),l=l("../internals/object-get-own-property-names-external").f;s({target:"Object",stat:!0,forced:a(function(){return!Object.getOwnPropertyNames(1)})},{getOwnPropertyNames:l})},{"../internals/export":50,"../internals/fails":51,"../internals/object-get-own-property-names-external":95}],185:[function(h,i,o){var s=h("../internals/export"),a=h("../internals/fails"),l=h("../internals/to-object"),u=h("../internals/object-get-prototype-of"),h=h("../internals/correct-prototype-getter");s({target:"Object",stat:!0,forced:a(function(){u(1)}),sham:!h},{getPrototypeOf:function(p){return u(l(p))}})},{"../internals/correct-prototype-getter":35,"../internals/export":50,"../internals/fails":51,"../internals/object-get-prototype-of":98,"../internals/to-object":138}],186:[function(r,i,o){var s=r("../internals/export"),a=r("../internals/to-object"),l=r("../internals/object-keys");s({target:"Object",stat:!0,forced:r("../internals/fails")(function(){l(1)})},{keys:function(u){return l(a(u))}})},{"../internals/export":50,"../internals/fails":51,"../internals/object-keys":100,"../internals/to-object":138}],187:[function(l,i,o){var s=l("../internals/to-string-tag-support"),a=l("../internals/redefine"),l=l("../internals/object-to-string");s||a(Object.prototype,"toString",l,{unsafe:!0})},{"../internals/object-to-string":103,"../internals/redefine":109,"../internals/to-string-tag-support":142}],188:[function(Ge,i,o){var s,a,l,u,h=Ge("../internals/export"),p=Ge("../internals/is-pure"),c=Ge("../internals/global"),f=Ge("../internals/get-built-in"),m=Ge("../internals/native-promise-constructor"),y=Ge("../internals/redefine"),v=Ge("../internals/redefine-all"),g=Ge("../internals/set-to-string-tag"),x=Ge("../internals/set-species"),b=Ge("../internals/is-object"),w=Ge("../internals/a-function"),T=Ge("../internals/an-instance"),R=Ge("../internals/classof-raw"),C=Ge("../internals/inspect-source"),P=Ge("../internals/iterate"),I=Ge("../internals/check-correctness-of-iteration"),D=Ge("../internals/species-constructor"),j=Ge("../internals/task").set,N=Ge("../internals/microtask"),O=Ge("../internals/promise-resolve"),W=Ge("../internals/host-report-errors"),X=Ge("../internals/new-promise-capability"),J=Ge("../internals/perform"),ee=Ge("../internals/internal-state"),V=Ge("../internals/is-forced"),_e=Ge("../internals/well-known-symbol"),q=Ge("../internals/engine-v8-version"),Y=_e("species"),Z="Promise",ce=ee.get,B=ee.set,U=ee.getterFor(Z),K=m,re=c.TypeError,ae=c.document,pe=c.process,ye=f("fetch"),Re=X.f,Me=Re,xe=R(pe)=="process",ve=!!(ae&&ae.createEvent&&c.dispatchEvent),ne="unhandledrejection",Te="rejectionhandled",Pe=1,Ae=2,je=1,Ue=2,Ge=V(Z,function(){var rt,Ye;return C(K)===String(K)&&(q===66||!xe&&typeof PromiseRejectionEvent!="function")?!0:!(!p||K.prototype.finally)||!(51<=q&&/native code/.test(K))&&(Ye=function(de){de(function(){},function(){})},((rt=K.resolve(1)).constructor={})[Y]=Ye,!(rt.then(function(){})instanceof Ye))}),_e=Ge||!I(function(rt){K.all(rt).catch(function(){})}),fe=function(rt){var Ye;return!(!b(rt)||typeof(Ye=rt.then)!="function")&&Ye},We=function(rt,Ye,de){var ge;Ye.notified||(Ye.notified=!0,ge=Ye.reactions,N(function(){for(var ue,Se,De=Ye.value,be=Ye.state==Pe,ke=0;ge.length>ke;){var ot,Ce,it,Xe=ge[ke++],ut=be?Xe.ok:Xe.fail,bt=Xe.resolve,vt=Xe.reject,Rt=Xe.domain;try{ut?(be||(Ye.rejection===Ue&&function(Dt,yr){j.call(c,function(){xe?pe.emit("rejectionHandled",Dt):Ke(Te,Dt,yr.value)})}(rt,Ye),Ye.rejection=je),ut===!0?ot=De:(Rt&&Rt.enter(),ot=ut(De),Rt&&(Rt.exit(),it=!0)),ot===Xe.promise?vt(re("Promise-chain cycle")):(Ce=fe(ot))?Ce.call(ot,bt,vt):bt(ot)):vt(De)}catch(Dt){Rt&&!it&&Rt.exit(),vt(Dt)}}Ye.reactions=[],Ye.notified=!1,de&&!Ye.rejection&&(ue=rt,Se=Ye,j.call(c,function(){var Dt=Se.value,yr=$e(Se);if(yr&&(yr=J(function(){xe?pe.emit("unhandledRejection",Dt,ue):Ke(ne,ue,Dt)}),Se.rejection=xe||$e(Se)?Ue:je,yr.error))throw yr.value}))}))},Ke=function(rt,Ye,de){var ge;ve?((ge=ae.createEvent("Event")).promise=Ye,ge.reason=de,ge.initEvent(rt,!1,!0),c.dispatchEvent(ge)):ge={promise:Ye,reason:de},(Ye=c["on"+rt])?Ye(ge):rt===ne&&W("Unhandled promise rejection",de)},$e=function(rt){return rt.rejection!==je&&!rt.parent},et=function(rt,Ye,de,ge){return function(ue){rt(Ye,de,ue,ge)}},ht=function(rt,Ye,de,ge){Ye.done||(Ye.done=!0,(Ye=ge||Ye).value=de,Ye.state=Ae,We(rt,Ye,!0))},Be=function(rt,Ye,de,ge){if(!Ye.done){Ye.done=!0,ge&&(Ye=ge);try{if(rt===de)throw re("Promise can't be resolved itself");var ue=fe(de);ue?N(function(){var Se={done:!1};try{ue.call(de,et(Be,rt,Se,Ye),et(ht,rt,Se,Ye))}catch(De){ht(rt,Se,De,Ye)}}):(Ye.value=de,Ye.state=Pe,We(rt,Ye,!1))}catch(Se){ht(rt,{done:!1},Se,Ye)}}};Ge&&(K=function(rt){T(this,K,Z),w(rt),s.call(this);var Ye=ce(this);try{rt(et(Be,this,Ye),et(ht,this,Ye))}catch(de){ht(this,Ye,de)}},(s=function(rt){B(this,{type:Z,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=v(K.prototype,{then:function(rt,Ye){var de=U(this),ge=Re(D(this,K));return ge.ok=typeof rt!="function"||rt,ge.fail=typeof Ye=="function"&&Ye,ge.domain=xe?pe.domain:void 0,de.parent=!0,de.reactions.push(ge),de.state!=0&&We(this,de,!1),ge.promise},catch:function(rt){return this.then(void 0,rt)}}),a=function(){var rt=new s,Ye=ce(rt);this.promise=rt,this.resolve=et(Be,rt,Ye),this.reject=et(ht,rt,Ye)},X.f=Re=function(rt){return rt===K||rt===l?new a:Me(rt)},p||typeof m!="function"||(u=m.prototype.then,y(m.prototype,"then",function(rt,Ye){var de=this;return new K(function(ge,ue){u.call(de,ge,ue)}).then(rt,Ye)},{unsafe:!0}),typeof ye=="function"&&h({global:!0,enumerable:!0,forced:!0},{fetch:function(rt){return O(K,ye.apply(c,arguments))}}))),h({global:!0,wrap:!0,forced:Ge},{Promise:K}),g(K,Z,!1,!0),x(Z),l=f(Z),h({target:Z,stat:!0,forced:Ge},{reject:function(rt){var Ye=Re(this);return Ye.reject.call(void 0,rt),Ye.promise}}),h({target:Z,stat:!0,forced:p||Ge},{resolve:function(rt){return O(p&&this===l?K:this,rt)}}),h({target:Z,stat:!0,forced:_e},{all:function(rt){var Ye=this,de=Re(Ye),ge=de.resolve,ue=de.reject,Se=J(function(){var De=w(Ye.resolve),be=[],ke=0,ot=1;P(rt,function(Ce){var it=ke++,Xe=!1;be.push(void 0),ot++,De.call(Ye,Ce).then(function(ut){Xe||(Xe=!0,be[it]=ut,--ot||ge(be))},ue)}),--ot||ge(be)});return Se.error&&ue(Se.value),de.promise},race:function(rt){var Ye=this,de=Re(Ye),ge=de.reject,ue=J(function(){var Se=w(Ye.resolve);P(rt,function(De){Se.call(Ye,De).then(de.resolve,ge)})});return ue.error&&ge(ue.value),de.promise}})},{"../internals/a-function":5,"../internals/an-instance":9,"../internals/check-correctness-of-iteration":27,"../internals/classof-raw":28,"../internals/engine-v8-version":48,"../internals/export":50,"../internals/get-built-in":57,"../internals/global":60,"../internals/host-report-errors":63,"../internals/inspect-source":69,"../internals/internal-state":71,"../internals/is-forced":74,"../internals/is-object":75,"../internals/is-pure":76,"../internals/iterate":78,"../internals/microtask":82,"../internals/native-promise-constructor":83,"../internals/new-promise-capability":87,"../internals/perform":106,"../internals/promise-resolve":107,"../internals/redefine":109,"../internals/redefine-all":108,"../internals/set-species":117,"../internals/set-to-string-tag":118,"../internals/species-constructor":122,"../internals/task":131,"../internals/well-known-symbol":149}],189:[function(c,i,o){var s=c("../internals/export"),v=c("../internals/get-built-in"),a=c("../internals/a-function"),l=c("../internals/an-object"),u=c("../internals/is-object"),h=c("../internals/object-create"),p=c("../internals/function-bind"),c=c("../internals/fails"),f=v("Reflect","construct"),m=c(function(){function g(){}return!(f(function(){},[],g)instanceof g)}),y=!c(function(){f(function(){})}),v=m||y;s({target:"Reflect",stat:!0,forced:v,sham:v},{construct:function(g,x){a(g),l(x);var b=arguments.length<3?g:a(arguments[2]);if(y&&!m)return f(g,x,b);if(g==b){switch(x.length){case 0:return new g;case 1:return new g(x[0]);case 2:return new g(x[0],x[1]);case 3:return new g(x[0],x[1],x[2]);case 4:return new g(x[0],x[1],x[2],x[3])}var w=[null];return w.push.apply(w,x),new(p.apply(g,w))}return w=b.prototype,b=h(u(w)?w:Object.prototype),w=Function.apply.call(g,b,x),u(w)?w:b}})},{"../internals/a-function":5,"../internals/an-object":10,"../internals/export":50,"../internals/fails":51,"../internals/function-bind":56,"../internals/get-built-in":57,"../internals/is-object":75,"../internals/object-create":91}],190:[function(r,i,o){var s=r("../internals/export"),a=r("../internals/is-object"),l=r("../internals/an-object"),u=r("../internals/has"),h=r("../internals/object-get-own-property-descriptor"),p=r("../internals/object-get-prototype-of");s({target:"Reflect",stat:!0},{get:function c(f,m){var y,v=arguments.length<3?f:arguments[2];return l(f)===v?f[m]:(y=h.f(f,m))?u(y,"value")?y.value:y.get===void 0?void 0:y.get.call(v):a(y=p(f))?c(y,m,v):void 0}})},{"../internals/an-object":10,"../internals/export":50,"../internals/has":61,"../internals/is-object":75,"../internals/object-get-own-property-descriptor":94,"../internals/object-get-prototype-of":98}],191:[function(r,i,o){var s=r("../internals/descriptors"),a=r("../internals/global"),l=r("../internals/is-forced"),u=r("../internals/inherit-if-required"),h=r("../internals/object-define-property").f,p=r("../internals/object-get-own-property-names").f,c=r("../internals/is-regexp"),f=r("../internals/regexp-flags"),m=r("../internals/regexp-sticky-helpers"),y=r("../internals/redefine"),v=r("../internals/fails"),g=r("../internals/internal-state").set,x=r("../internals/set-species"),b=r("../internals/well-known-symbol")("match"),w=a.RegExp,T=w.prototype,R=/a/g,C=/a/g,P=new w(R)!==R,I=m.UNSUPPORTED_Y;if(s&&l("RegExp",!P||I||v(function(){return C[b]=!1,w(R)!=R||w(C)==C||w(R,"i")!="/a/i"}))){for(var D=function(O,W){var X,J=this instanceof D,ee=c(O),V=W===void 0;return!J&&ee&&O.constructor===D&&V?O:(P?ee&&!V&&(O=O.source):O instanceof D&&(V&&(W=f.call(O)),O=O.source),I&&(X=!!W&&-1<W.indexOf("y"))&&(W=W.replace(/y/g,"")),ee=u(P?new w(O,W):w(O,W),J?this:T,D),I&&X&&g(ee,{sticky:X}),ee)},j=p(w),N=0;j.length>N;)(function(O){O in D||h(D,O,{configurable:!0,get:function(){return w[O]},set:function(W){w[O]=W}})})(j[N++]);(T.constructor=D).prototype=T,y(a,"RegExp",D)}x("RegExp")},{"../internals/descriptors":43,"../internals/fails":51,"../internals/global":60,"../internals/inherit-if-required":68,"../internals/internal-state":71,"../internals/is-forced":74,"../internals/is-regexp":77,"../internals/object-define-property":93,"../internals/object-get-own-property-names":96,"../internals/redefine":109,"../internals/regexp-flags":112,"../internals/regexp-sticky-helpers":113,"../internals/set-species":117,"../internals/well-known-symbol":149}],192:[function(a,i,o){var s=a("../internals/export"),a=a("../internals/regexp-exec");s({target:"RegExp",proto:!0,forced:/./.exec!==a},{exec:a})},{"../internals/export":50,"../internals/regexp-exec":111}],193:[function(u,i,o){var s=u("../internals/redefine"),a=u("../internals/an-object"),c=u("../internals/fails"),l=u("../internals/regexp-flags"),u="toString",h=RegExp.prototype,p=h[u],c=c(function(){return p.call({source:"a",flags:"b"})!="/a/b"}),f=p.name!=u;(c||f)&&s(RegExp.prototype,u,function(){var m=a(this),y=String(m.source),v=m.flags;return"/"+y+"/"+String(v===void 0&&m instanceof RegExp&&!("flags"in h)?l.call(m):v)},{unsafe:!0})},{"../internals/an-object":10,"../internals/fails":51,"../internals/redefine":109,"../internals/regexp-flags":112}],194:[function(a,i,o){var s=a("../internals/collection"),a=a("../internals/collection-strong");i.exports=s("Set",function(l){return function(){return l(this,arguments.length?arguments[0]:void 0)}},a)},{"../internals/collection":32,"../internals/collection-strong":30}],195:[function(p,i,o){var s=p("../internals/export"),a=p("../internals/object-get-own-property-descriptor").f,l=p("../internals/to-length"),u=p("../internals/not-a-regexp"),h=p("../internals/require-object-coercible"),m=p("../internals/correct-is-regexp-logic"),p=p("../internals/is-pure"),c="".endsWith,f=Math.min,m=m("endsWith");s({target:"String",proto:!0,forced:!!(p||m||!(s=a(String.prototype,"endsWith"))||s.writable)&&!m},{endsWith:function(y){var v=String(h(this)),g=(u(y),1<arguments.length?arguments[1]:void 0),x=l(v.length),g=g===void 0?x:f(l(g),x),x=String(y);return c?c.call(v,x,g):v.slice(g-x.length,g)===x}})},{"../internals/correct-is-regexp-logic":34,"../internals/export":50,"../internals/is-pure":76,"../internals/not-a-regexp":88,"../internals/object-get-own-property-descriptor":94,"../internals/require-object-coercible":114,"../internals/to-length":137}],196:[function(r,i,o){var s=r("../internals/export"),a=r("../internals/not-a-regexp"),l=r("../internals/require-object-coercible");s({target:"String",proto:!0,forced:!r("../internals/correct-is-regexp-logic")("includes")},{includes:function(u){return!!~String(l(this)).indexOf(a(u),1<arguments.length?arguments[1]:void 0)}})},{"../internals/correct-is-regexp-logic":34,"../internals/export":50,"../internals/not-a-regexp":88,"../internals/require-object-coercible":114}],197:[function(l,i,o){var s=l("../internals/string-multibyte").charAt,a=l("../internals/internal-state"),l=l("../internals/define-iterator"),u="String Iterator",h=a.set,p=a.getterFor(u);l(String,"String",function(c){h(this,{type:u,string:String(c),index:0})},function(){var c=p(this),f=c.string,m=c.index;return m>=f.length?{value:void 0,done:!0}:(f=s(f,m),c.index+=f.length,{value:f,done:!1})})},{"../internals/define-iterator":41,"../internals/internal-state":71,"../internals/string-multibyte":124}],198:[function(r,i,o){var s=r("../internals/fix-regexp-well-known-symbol-logic"),a=r("../internals/an-object"),l=r("../internals/to-length"),u=r("../internals/require-object-coercible"),h=r("../internals/advance-string-index"),p=r("../internals/regexp-exec-abstract");s("match",1,function(c,f,m){return[function(y){var v=u(this),g=y==null?void 0:y[c];return g!==void 0?g.call(y,v):new RegExp(y)[c](String(v))},function(y){var v=m(f,y,this);if(v.done)return v.value;var g=a(y),x=String(this);if(!g.global)return p(g,x);for(var b=g.unicode,w=[],T=g.lastIndex=0;(R=p(g,x))!==null;){var R=String(R[0]);(w[T]=R)===""&&(g.lastIndex=h(x,l(g.lastIndex),b)),T++}return T===0?null:w}]})},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/regexp-exec-abstract":110,"../internals/require-object-coercible":114,"../internals/to-length":137}],199:[function(r,i,o){var s=r("../internals/export"),a=r("../internals/string-pad").start;s({target:"String",proto:!0,forced:r("../internals/string-pad-webkit-bug")},{padStart:function(l){return a(this,l,1<arguments.length?arguments[1]:void 0)}})},{"../internals/export":50,"../internals/string-pad":126,"../internals/string-pad-webkit-bug":125}],200:[function(r,i,o){r("../internals/export")({target:"String",proto:!0},{repeat:r("../internals/string-repeat")})},{"../internals/export":50,"../internals/string-repeat":128}],201:[function(r,i,o){var s=r("../internals/fix-regexp-well-known-symbol-logic"),a=r("../internals/an-object"),l=r("../internals/to-object"),u=r("../internals/to-length"),h=r("../internals/to-integer"),p=r("../internals/require-object-coercible"),c=r("../internals/advance-string-index"),f=r("../internals/regexp-exec-abstract"),m=Math.max,y=Math.min,v=Math.floor,g=/\$([$&'`]|\d\d?|<[^>]*>)/g,x=/\$([$&'`]|\d\d?)/g;s("replace",2,function(b,w,T,R){var C=R.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,P=R.REPLACE_KEEPS_$0,I=C?"$":"$0";return[function(D,j){var N=p(this),O=D==null?void 0:D[b];return O!==void 0?O.call(D,N,j):w.call(String(N),D,j)},function(D,j){if(!C&&P||typeof j=="string"&&j.indexOf(I)===-1){var N=T(w,D,this,j);if(N.done)return N.value}for(var O,W=a(D),X=String(this),J=typeof j=="function",ee=(J||(j=String(j)),W.global),V=(ee&&(O=W.unicode,W.lastIndex=0),[]);(B=f(W,X))!==null&&(V.push(B),ee);)String(B[0])===""&&(W.lastIndex=c(X,u(W.lastIndex),O));for(var q,Y="",Z=0,ce=0;ce<V.length;ce++){for(var B=V[ce],U=String(B[0]),K=m(y(h(B.index),X.length),0),re=[],ae=1;ae<B.length;ae++)re.push((q=B[ae])===void 0?q:String(q));var pe=B.groups,ye=J?(ye=[U].concat(re,K,X),pe!==void 0&&ye.push(pe),String(j.apply(void 0,ye))):function(Re,Me,xe,ve,ne,Te){var Pe=xe+Re.length,Ae=ve.length,je=x;return ne!==void 0&&(ne=l(ne),je=g),w.call(Te,je,function(Ue,Ge){var _e;switch(Ge.charAt(0)){case"$":return"$";case"&":return Re;case"`":return Me.slice(0,xe);case"'":return Me.slice(Pe);case"<":_e=ne[Ge.slice(1,-1)];break;default:var fe,We=+Ge;if(We==0)return Ue;if(Ae<We)return(fe=v(We/10))!==0&&fe<=Ae?ve[fe-1]===void 0?Ge.charAt(1):ve[fe-1]+Ge.charAt(1):Ue;_e=ve[We-1]}return _e===void 0?"":_e})}(U,X,K,re,pe,j);Z<=K&&(Y+=X.slice(Z,K)+ye,Z=K+U.length)}return Y+X.slice(Z)}]})},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/regexp-exec-abstract":110,"../internals/require-object-coercible":114,"../internals/to-integer":136,"../internals/to-length":137,"../internals/to-object":138}],202:[function(r,i,o){var s=r("../internals/fix-regexp-well-known-symbol-logic"),a=r("../internals/an-object"),l=r("../internals/require-object-coercible"),u=r("../internals/same-value"),h=r("../internals/regexp-exec-abstract");s("search",1,function(p,c,f){return[function(m){var y=l(this),v=m==null?void 0:m[p];return v!==void 0?v.call(m,y):new RegExp(m)[p](String(y))},function(m){var y,v=f(c,m,this);return v.done?v.value:(v=a(m),m=String(this),y=v.lastIndex,u(y,0)||(v.lastIndex=0),m=h(v,m),u(v.lastIndex,y)||(v.lastIndex=y),m===null?-1:m.index)}]})},{"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/regexp-exec-abstract":110,"../internals/require-object-coercible":114,"../internals/same-value":115}],203:[function(y,i,o){var s=y("../internals/fix-regexp-well-known-symbol-logic"),a=y("../internals/is-regexp"),l=y("../internals/an-object"),u=y("../internals/require-object-coercible"),h=y("../internals/species-constructor"),p=y("../internals/advance-string-index"),c=y("../internals/to-length"),f=y("../internals/regexp-exec-abstract"),m=y("../internals/regexp-exec"),y=y("../internals/fails"),v=[].push,g=Math.min,x=4294967295,b=!y(function(){return!RegExp(x,"y")});s("split",2,function(w,T,R){var C="abbc".split(/(b)*/)[1]=="c"||"test".split(/(?:)/,-1).length!=4||"ab".split(/(?:ab)*/).length!=2||".".split(/(.?)(.?)/).length!=4||1<".".split(/()()/).length||"".split(/.?/).length?function(P,I){var D=String(u(this)),j=I===void 0?x:I>>>0;if(j==0)return[];if(P===void 0)return[D];if(!a(P))return T.call(D,P,j);for(var N,O,W,X=[],I=(P.ignoreCase?"i":"")+(P.multiline?"m":"")+(P.unicode?"u":"")+(P.sticky?"y":""),J=0,ee=new RegExp(P.source,I+"g");(N=m.call(ee,D))&&!(J<(O=ee.lastIndex)&&(X.push(D.slice(J,N.index)),1<N.length&&N.index<D.length&&v.apply(X,N.slice(1)),W=N[0].length,J=O,X.length>=j));)ee.lastIndex===N.index&&ee.lastIndex++;return J===D.length?!W&&ee.test("")||X.push(""):X.push(D.slice(J)),X.length>j?X.slice(0,j):X}:"0".split(void 0,0).length?function(P,I){return P===void 0&&I===0?[]:T.call(this,P,I)}:T;return[function(P,I){var D=u(this),j=P==null?void 0:P[w];return j!==void 0?j.call(P,D,I):C.call(String(D),P,I)},function(N,I){var D=R(C,N,this,I,C!==T);if(D.done)return D.value;var D=l(N),j=String(this),N=h(D,RegExp),O=D.unicode,W=(D.ignoreCase?"i":"")+(D.multiline?"m":"")+(D.unicode?"u":"")+(b?"y":"g"),X=new N(b?D:"^(?:"+D.source+")",W),J=I===void 0?x:I>>>0;if(J==0)return[];if(j.length===0)return f(X,j)===null?[j]:[];for(var ee=0,V=0,q=[];V<j.length;){X.lastIndex=b?V:0;var Y,Z=f(X,b?j:j.slice(V));if(Z===null||(Y=g(c(X.lastIndex+(b?0:V)),j.length))===ee)V=p(j,V,O);else{if(q.push(j.slice(ee,V)),q.length===J)return q;for(var ce=1;ce<=Z.length-1;ce++)if(q.push(Z[ce]),q.length===J)return q;V=ee=Y}}return q.push(j.slice(ee)),q}]},!b)},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fails":51,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/is-regexp":77,"../internals/regexp-exec":111,"../internals/regexp-exec-abstract":110,"../internals/require-object-coercible":114,"../internals/species-constructor":122,"../internals/to-length":137}],204:[function(p,i,o){var s=p("../internals/export"),a=p("../internals/object-get-own-property-descriptor").f,l=p("../internals/to-length"),u=p("../internals/not-a-regexp"),h=p("../internals/require-object-coercible"),m=p("../internals/correct-is-regexp-logic"),p=p("../internals/is-pure"),c="".startsWith,f=Math.min,m=m("startsWith");s({target:"String",proto:!0,forced:!!(p||m||!(s=a(String.prototype,"startsWith"))||s.writable)&&!m},{startsWith:function(x){var v=String(h(this)),g=(u(x),l(f(1<arguments.length?arguments[1]:void 0,v.length))),x=String(x);return c?c.call(v,x,g):v.slice(g,g+x.length)===x}})},{"../internals/correct-is-regexp-logic":34,"../internals/export":50,"../internals/is-pure":76,"../internals/not-a-regexp":88,"../internals/object-get-own-property-descriptor":94,"../internals/require-object-coercible":114,"../internals/to-length":137}],205:[function(r,i,o){var s=r("../internals/export"),a=r("../internals/create-html");s({target:"String",proto:!0,forced:r("../internals/string-html-forced")("sub")},{sub:function(){return a(this,"sub","","")}})},{"../internals/create-html":36,"../internals/export":50,"../internals/string-html-forced":123}],206:[function(r,i,o){var s=r("../internals/export"),a=r("../internals/string-trim").trim;s({target:"String",proto:!0,forced:r("../internals/string-trim-forced")("trim")},{trim:function(){return a(this)}})},{"../internals/export":50,"../internals/string-trim":130,"../internals/string-trim-forced":129}],207:[function(g,i,o){var s,a,l,u,h,p=g("../internals/export"),c=g("../internals/descriptors"),f=g("../internals/global"),m=g("../internals/has"),y=g("../internals/is-object"),v=g("../internals/object-define-property").f,g=g("../internals/copy-constructor-properties"),x=f.Symbol;!c||typeof x!="function"||"description"in x.prototype&&x().description===void 0||(s={},g(a=function(){var b=arguments.length<1||arguments[0]===void 0?void 0:String(arguments[0]),w=this instanceof a?new x(b):b===void 0?x():x(b);return b===""&&(s[w]=!0),w},x),(f=a.prototype=x.prototype).constructor=a,l=f.toString,u=String(x("test"))=="Symbol(test)",h=/^Symbol\((.*)\)[^)]+$/,v(f,"description",{configurable:!0,get:function(){var b=y(this)?this.valueOf():this,w=l.call(b);return m(s,b)?"":(b=u?w.slice(7,-1):w.replace(h,"$1"))===""?void 0:b}}),p({global:!0,forced:!0},{Symbol:a}))},{"../internals/copy-constructor-properties":33,"../internals/descriptors":43,"../internals/export":50,"../internals/global":60,"../internals/has":61,"../internals/is-object":75,"../internals/object-define-property":93}],208:[function(r,i,o){r("../internals/define-well-known-symbol")("iterator")},{"../internals/define-well-known-symbol":42}],209:[function(Me,i,o){function s(ue,Se){var De=_e[ue]=D(Te[Re]);return xe(De,{type:ye,tag:ue,description:Se}),m||(De.description=Se),De}function a(ue,be){T(ue);var De=C(be),be=j(De).concat(ge(De));return ae(be,function(ke){m&&!de.call(De,ke)||Ye(ue,ke,De[ke])}),ue}function l(be,ke){var De,be=C(be),ke=P(ke,!0);if(be!==ne||!x(_e,ke)||x(fe,ke))return!(De=Ae(be,ke))||!x(_e,ke)||x(be,pe)&&be[pe][ke]||(De.enumerable=!0),De}function u(Se){var Se=Ue(C(Se)),De=[];return ae(Se,function(be){x(_e,be)||x(Z,be)||De.push(be)}),De}var h=Me("../internals/export"),p=Me("../internals/global"),c=Me("../internals/get-built-in"),f=Me("../internals/is-pure"),m=Me("../internals/descriptors"),y=Me("../internals/native-symbol"),v=Me("../internals/use-symbol-as-uid"),g=Me("../internals/fails"),x=Me("../internals/has"),b=Me("../internals/is-array"),w=Me("../internals/is-object"),T=Me("../internals/an-object"),R=Me("../internals/to-object"),C=Me("../internals/to-indexed-object"),P=Me("../internals/to-primitive"),I=Me("../internals/create-property-descriptor"),D=Me("../internals/object-create"),j=Me("../internals/object-keys"),N=Me("../internals/object-get-own-property-names"),O=Me("../internals/object-get-own-property-names-external"),W=Me("../internals/object-get-own-property-symbols"),X=Me("../internals/object-get-own-property-descriptor"),J=Me("../internals/object-define-property"),ee=Me("../internals/object-property-is-enumerable"),V=Me("../internals/create-non-enumerable-property"),q=Me("../internals/redefine"),Y=Me("../internals/shared"),$e=Me("../internals/shared-key"),Z=Me("../internals/hidden-keys"),ce=Me("../internals/uid"),B=Me("../internals/well-known-symbol"),U=Me("../internals/well-known-symbol-wrapped"),K=Me("../internals/define-well-known-symbol"),re=Me("../internals/set-to-string-tag"),et=Me("../internals/internal-state"),ae=Me("../internals/array-iteration").forEach,pe=$e("hidden"),ye="Symbol",Re="prototype",Me=B("toPrimitive"),xe=et.set,ve=et.getterFor(ye),ne=Object[Re],Te=p.Symbol,Pe=c("JSON","stringify"),Ae=X.f,je=J.f,Ue=O.f,Ge=ee.f,_e=Y("symbols"),fe=Y("op-symbols"),We=Y("string-to-symbol-registry"),Ke=Y("symbol-to-string-registry"),$e=Y("wks"),et=p.QObject,ht=!et||!et[Re]||!et[Re].findChild,Be=m&&g(function(){return D(je({},"a",{get:function(){return je(this,"a",{value:7}).a}})).a!=7})?function(ue,Se,De){var be=Ae(ne,Se);be&&delete ne[Se],je(ue,Se,De),be&&ue!==ne&&je(ne,Se,be)}:je,rt=v?function(ue){return typeof ue=="symbol"}:function(ue){return Object(ue)instanceof Te},Ye=function(ue,Se,De){return ue===ne&&Ye(fe,Se,De),T(ue),Se=P(Se,!0),T(De),(x(_e,Se)?(De.enumerable?(x(ue,pe)&&ue[pe][Se]&&(ue[pe][Se]=!1),De=D(De,{enumerable:I(0,!1)})):(x(ue,pe)||je(ue,pe,I(1,{})),ue[pe][Se]=!0),Be):je)(ue,Se,De)},de=function(Se){var Se=P(Se,!0),De=Ge.call(this,Se);return!(this===ne&&x(_e,Se)&&!x(fe,Se))&&(!(De||!x(this,Se)||!x(_e,Se)||x(this,pe)&&this[pe][Se])||De)},ge=function(De){var Se=De===ne,De=Ue(Se?fe:C(De)),be=[];return ae(De,function(ke){!x(_e,ke)||Se&&!x(ne,ke)||be.push(_e[ke])}),be};y||(q((Te=function(){if(this instanceof Te)throw TypeError("Symbol is not a constructor");var ue=arguments.length&&arguments[0]!==void 0?String(arguments[0]):void 0,Se=ce(ue),De=function(be){this===ne&&De.call(fe,be),x(this,pe)&&x(this[pe],Se)&&(this[pe][Se]=!1),Be(this,Se,I(1,be))};return m&&ht&&Be(ne,Se,{configurable:!0,set:De}),s(Se,ue)})[Re],"toString",function(){return ve(this).tag}),q(Te,"withoutSetter",function(ue){return s(ce(ue),ue)}),ee.f=de,J.f=Ye,X.f=l,N.f=O.f=u,W.f=ge,U.f=function(ue){return s(B(ue),ue)},m&&(je(Te[Re],"description",{configurable:!0,get:function(){return ve(this).description}}),f||q(ne,"propertyIsEnumerable",de,{unsafe:!0}))),h({global:!0,wrap:!0,forced:!y,sham:!y},{Symbol:Te}),ae(j($e),function(ue){K(ue)}),h({target:ye,stat:!0,forced:!y},{for:function(De){var Se,De=String(De);return x(We,De)?We[De]:(Se=Te(De),We[De]=Se,Ke[Se]=De,Se)},keyFor:function(ue){if(!rt(ue))throw TypeError(ue+" is not a symbol");if(x(Ke,ue))return Ke[ue]},useSetter:function(){ht=!0},useSimple:function(){ht=!1}}),h({target:"Object",stat:!0,forced:!y,sham:!m},{create:function(ue,Se){return Se===void 0?D(ue):a(D(ue),Se)},defineProperty:Ye,defineProperties:a,getOwnPropertyDescriptor:l}),h({target:"Object",stat:!0,forced:!y},{getOwnPropertyNames:u,getOwnPropertySymbols:ge}),h({target:"Object",stat:!0,forced:g(function(){W.f(1)})},{getOwnPropertySymbols:function(ue){return W.f(R(ue))}}),Pe&&h({target:"JSON",stat:!0,forced:!y||g(function(){var ue=Te();return Pe([ue])!="[null]"||Pe({a:ue})!="{}"||Pe(Object(ue))!="{}"})},{stringify:function(ue,Se,De){for(var be,ke=[ue],ot=1;ot<arguments.length;)ke.push(arguments[ot++]);if((w(be=Se)||ue!==void 0)&&!rt(ue))return b(Se)||(Se=function(Ce,it){if(typeof be=="function"&&(it=be.call(this,Ce,it)),!rt(it))return it}),ke[1]=Se,Pe.apply(null,ke)}}),Te[Re][Me]||V(Te[Re],Me,Te[Re].valueOf),re(Te,ye),Z[pe]=!0},{"../internals/an-object":10,"../internals/array-iteration":19,"../internals/create-non-enumerable-property":38,"../internals/create-property-descriptor":39,"../internals/define-well-known-symbol":42,"../internals/descriptors":43,"../internals/export":50,"../internals/fails":51,"../internals/get-built-in":57,"../internals/global":60,"../internals/has":61,"../internals/hidden-keys":62,"../internals/internal-state":71,"../internals/is-array":73,"../internals/is-object":75,"../internals/is-pure":76,"../internals/native-symbol":84,"../internals/object-create":91,"../internals/object-define-property":93,"../internals/object-get-own-property-descriptor":94,"../internals/object-get-own-property-names":96,"../internals/object-get-own-property-names-external":95,"../internals/object-get-own-property-symbols":97,"../internals/object-keys":100,"../internals/object-property-is-enumerable":101,"../internals/redefine":109,"../internals/set-to-string-tag":118,"../internals/shared":121,"../internals/shared-key":119,"../internals/to-indexed-object":135,"../internals/to-object":138,"../internals/to-primitive":141,"../internals/uid":146,"../internals/use-symbol-as-uid":147,"../internals/well-known-symbol":149,"../internals/well-known-symbol-wrapped":148}],210:[function(r,i,o){var s=r("../internals/array-buffer-view-core"),a=r("../internals/array-copy-within"),l=s.aTypedArray;(0,s.exportTypedArrayMethod)("copyWithin",function(u,h){return a.call(l(this),u,h,2<arguments.length?arguments[2]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-copy-within":14}],211:[function(r,i,o){var s=r("../internals/array-buffer-view-core"),a=r("../internals/array-iteration").every,l=s.aTypedArray;(0,s.exportTypedArrayMethod)("every",function(u){return a(l(this),u,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],212:[function(r,i,o){var s=r("../internals/array-buffer-view-core"),a=r("../internals/array-fill"),l=s.aTypedArray;(0,s.exportTypedArrayMethod)("fill",function(u){return a.apply(l(this),arguments)})},{"../internals/array-buffer-view-core":12,"../internals/array-fill":15}],213:[function(r,i,o){var s=r("../internals/array-buffer-view-core"),a=r("../internals/array-iteration").filter,l=r("../internals/species-constructor"),u=s.aTypedArray,h=s.aTypedArrayConstructor;(0,s.exportTypedArrayMethod)("filter",function(p){for(var c=a(u(this),p,1<arguments.length?arguments[1]:void 0),p=l(this,this.constructor),f=0,m=c.length,y=new(h(p))(m);f<m;)y[f]=c[f++];return y})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/species-constructor":122}],214:[function(r,i,o){var s=r("../internals/array-buffer-view-core"),a=r("../internals/array-iteration").findIndex,l=s.aTypedArray;(0,s.exportTypedArrayMethod)("findIndex",function(u){return a(l(this),u,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],215:[function(r,i,o){var s=r("../internals/array-buffer-view-core"),a=r("../internals/array-iteration").find,l=s.aTypedArray;(0,s.exportTypedArrayMethod)("find",function(u){return a(l(this),u,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],216:[function(r,i,o){r("../internals/typed-array-constructor")("Float32",function(s){return function(a,l,u){return s(this,a,l,u)}})},{"../internals/typed-array-constructor":143}],217:[function(r,i,o){r("../internals/typed-array-constructor")("Float64",function(s){return function(a,l,u){return s(this,a,l,u)}})},{"../internals/typed-array-constructor":143}],218:[function(r,i,o){var s=r("../internals/array-buffer-view-core"),a=r("../internals/array-iteration").forEach,l=s.aTypedArray;(0,s.exportTypedArrayMethod)("forEach",function(u){a(l(this),u,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],219:[function(r,i,o){var s=r("../internals/array-buffer-view-core"),a=r("../internals/array-includes").includes,l=s.aTypedArray;(0,s.exportTypedArrayMethod)("includes",function(u){return a(l(this),u,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-includes":18}],220:[function(r,i,o){var s=r("../internals/array-buffer-view-core"),a=r("../internals/array-includes").indexOf,l=s.aTypedArray;(0,s.exportTypedArrayMethod)("indexOf",function(u){return a(l(this),u,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-includes":18}],221:[function(r,i,o){r("../internals/typed-array-constructor")("Int16",function(s){return function(a,l,u){return s(this,a,l,u)}})},{"../internals/typed-array-constructor":143}],222:[function(r,i,o){r("../internals/typed-array-constructor")("Int32",function(s){return function(a,l,u){return s(this,a,l,u)}})},{"../internals/typed-array-constructor":143}],223:[function(a,i,o){function s(){return l.call(p(this))}var m=a("../internals/global"),f=a("../internals/array-buffer-view-core"),c=a("../modules/es.array.iterator"),a=a("../internals/well-known-symbol")("iterator"),m=m.Uint8Array,l=c.values,u=c.keys,h=c.entries,p=f.aTypedArray,c=f.exportTypedArrayMethod,f=m&&m.prototype[a],m=!!f&&(f.name=="values"||f.name==null);c("entries",function(){return h.call(p(this))}),c("keys",function(){return u.call(p(this))}),c("values",s,!m),c(a,s,!m)},{"../internals/array-buffer-view-core":12,"../internals/global":60,"../internals/well-known-symbol":149,"../modules/es.array.iterator":164}],224:[function(a,i,o){var a=a("../internals/array-buffer-view-core"),s=a.aTypedArray,a=a.exportTypedArrayMethod,l=[].join;a("join",function(u){return l.apply(s(this),arguments)})},{"../internals/array-buffer-view-core":12}],225:[function(r,i,o){var s=r("../internals/array-buffer-view-core"),a=r("../internals/array-last-index-of"),l=s.aTypedArray;(0,s.exportTypedArrayMethod)("lastIndexOf",function(u){return a.apply(l(this),arguments)})},{"../internals/array-buffer-view-core":12,"../internals/array-last-index-of":20}],226:[function(r,i,o){var s=r("../internals/array-buffer-view-core"),a=r("../internals/array-iteration").map,l=r("../internals/species-constructor"),u=s.aTypedArray,h=s.aTypedArrayConstructor;(0,s.exportTypedArrayMethod)("map",function(p){return a(u(this),p,1<arguments.length?arguments[1]:void 0,function(c,f){return new(h(l(c,c.constructor)))(f)})})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/species-constructor":122}],227:[function(r,i,o){var s=r("../internals/array-buffer-view-core"),a=r("../internals/array-reduce").right,l=s.aTypedArray;(0,s.exportTypedArrayMethod)("reduceRight",function(u){return a(l(this),u,arguments.length,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-reduce":24}],228:[function(r,i,o){var s=r("../internals/array-buffer-view-core"),a=r("../internals/array-reduce").left,l=s.aTypedArray;(0,s.exportTypedArrayMethod)("reduce",function(u){return a(l(this),u,arguments.length,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-reduce":24}],229:[function(a,i,o){var a=a("../internals/array-buffer-view-core"),s=a.aTypedArray,a=a.exportTypedArrayMethod,l=Math.floor;a("reverse",function(){for(var u,h=s(this).length,p=l(h/2),c=0;c<p;)u=this[c],this[c++]=this[--h],this[h]=u;return this})},{"../internals/array-buffer-view-core":12}],230:[function(h,i,o){var s=h("../internals/array-buffer-view-core"),a=h("../internals/to-length"),l=h("../internals/to-offset"),u=h("../internals/to-object"),h=h("../internals/fails"),p=s.aTypedArray;(0,s.exportTypedArrayMethod)("set",function(c){p(this);var f=l(1<arguments.length?arguments[1]:void 0,1),m=this.length,y=u(c),v=a(y.length),g=0;if(m<v+f)throw RangeError("Wrong length");for(;g<v;)this[f+g]=y[g++]},h(function(){new Int8Array(1).set({})}))},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/to-length":137,"../internals/to-object":138,"../internals/to-offset":139}],231:[function(a,i,o){var h=a("../internals/array-buffer-view-core"),s=a("../internals/species-constructor"),a=a("../internals/fails"),l=h.aTypedArray,u=h.aTypedArrayConstructor,h=h.exportTypedArrayMethod,p=[].slice;h("slice",function(c,f){for(var m=p.call(l(this),c,f),c=s(this,this.constructor),y=0,v=m.length,g=new(u(c))(v);y<v;)g[y]=m[y++];return g},a(function(){new Int8Array(1).slice()}))},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/species-constructor":122}],232:[function(r,i,o){var s=r("../internals/array-buffer-view-core"),a=r("../internals/array-iteration").some,l=s.aTypedArray;(0,s.exportTypedArrayMethod)("some",function(u){return a(l(this),u,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],233:[function(a,i,o){var a=a("../internals/array-buffer-view-core"),s=a.aTypedArray,a=a.exportTypedArrayMethod,l=[].sort;a("sort",function(u){return l.call(s(this),u)})},{"../internals/array-buffer-view-core":12}],234:[function(r,i,o){var s=r("../internals/array-buffer-view-core"),a=r("../internals/to-length"),l=r("../internals/to-absolute-index"),u=r("../internals/species-constructor"),h=s.aTypedArray;(0,s.exportTypedArrayMethod)("subarray",function(y,c){var f=h(this),m=f.length,y=l(y,m);return new(u(f,f.constructor))(f.buffer,f.byteOffset+y*f.BYTES_PER_ELEMENT,a((c===void 0?m:l(c,m))-y))})},{"../internals/array-buffer-view-core":12,"../internals/species-constructor":122,"../internals/to-absolute-index":133,"../internals/to-length":137}],235:[function(a,i,o){var h=a("../internals/global"),s=a("../internals/array-buffer-view-core"),a=a("../internals/fails"),l=h.Int8Array,u=s.aTypedArray,h=s.exportTypedArrayMethod,p=[].toLocaleString,c=[].slice,f=!!l&&a(function(){p.call(new l(1))});h("toLocaleString",function(){return p.apply(f?c.call(u(this)):u(this),arguments)},a(function(){return[1,2].toLocaleString()!=new l([1,2]).toLocaleString()})||!a(function(){l.prototype.toLocaleString.call([1,2])}))},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/global":60}],236:[function(a,i,o){var s=a("../internals/array-buffer-view-core").exportTypedArrayMethod,h=a("../internals/fails"),a=a("../internals/global").Uint8Array,a=a&&a.prototype||{},l=[].toString,u=[].join,h=(h(function(){l.call({})})&&(l=function(){return u.call(this)}),a.toString!=l);s("toString",l,h)},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/global":60}],237:[function(r,i,o){r("../internals/typed-array-constructor")("Uint16",function(s){return function(a,l,u){return s(this,a,l,u)}})},{"../internals/typed-array-constructor":143}],238:[function(r,i,o){r("../internals/typed-array-constructor")("Uint32",function(s){return function(a,l,u){return s(this,a,l,u)}})},{"../internals/typed-array-constructor":143}],239:[function(r,i,o){r("../internals/typed-array-constructor")("Uint8",function(s){return function(a,l,u){return s(this,a,l,u)}})},{"../internals/typed-array-constructor":143}],240:[function(r,i,o){r("../internals/typed-array-constructor")("Uint8",function(s){return function(a,l,u){return s(this,a,l,u)}},!0)},{"../internals/typed-array-constructor":143}],241:[function(x,T,o){function s(R){return function(){return R(this,arguments.length?arguments[0]:void 0)}}var a,l,u,h,p,b=x("../internals/global"),c=x("../internals/redefine-all"),f=x("../internals/internal-metadata"),m=x("../internals/collection"),y=x("../internals/collection-weak"),v=x("../internals/is-object"),g=x("../internals/internal-state").enforce,x=x("../internals/native-weak-map"),b=!b.ActiveXObject&&"ActiveXObject"in b,w=Object.isExtensible,T=T.exports=m("WeakMap",s,y);x&&b&&(a=y.getConstructor(s,"WeakMap",!0),f.REQUIRED=!0,m=T.prototype,l=m.delete,u=m.has,h=m.get,p=m.set,c(m,{delete:function(R){var C;return v(R)&&!w(R)?((C=g(this)).frozen||(C.frozen=new a),l.call(this,R)||C.frozen.delete(R)):l.call(this,R)},has:function(R){var C;return v(R)&&!w(R)?((C=g(this)).frozen||(C.frozen=new a),u.call(this,R)||C.frozen.has(R)):u.call(this,R)},get:function(R){var C;return!v(R)||w(R)||((C=g(this)).frozen||(C.frozen=new a),u.call(this,R))?h.call(this,R):C.frozen.get(R)},set:function(R,C){var P;return!v(R)||w(R)||((P=g(this)).frozen||(P.frozen=new a),u.call(this,R))?p.call(this,R,C):P.frozen.set(R,C),this}}))},{"../internals/collection":32,"../internals/collection-weak":31,"../internals/global":60,"../internals/internal-metadata":70,"../internals/internal-state":71,"../internals/is-object":75,"../internals/native-weak-map":86,"../internals/redefine-all":108}],242:[function(r,i,o){var s,a=r("../internals/global"),l=r("../internals/dom-iterables"),u=r("../internals/array-for-each"),h=r("../internals/create-non-enumerable-property");for(s in l){var p=a[s],p=p&&p.prototype;if(p&&p.forEach!==u)try{h(p,"forEach",u)}catch{p.forEach=u}}},{"../internals/array-for-each":16,"../internals/create-non-enumerable-property":38,"../internals/dom-iterables":45,"../internals/global":60}],243:[function(p,i,o){var s,a=p("../internals/global"),l=p("../internals/dom-iterables"),u=p("../modules/es.array.iterator"),h=p("../internals/create-non-enumerable-property"),p=p("../internals/well-known-symbol"),c=p("iterator"),f=p("toStringTag"),m=u.values;for(s in l){var y=a[s],v=y&&y.prototype;if(v){if(v[c]!==m)try{h(v,c,m)}catch{v[c]=m}if(v[f]||h(v,f,s),l[s]){for(var g in u)if(v[g]!==u[g])try{h(v,g,u[g])}catch{v[g]=u[g]}}}}},{"../internals/create-non-enumerable-property":38,"../internals/dom-iterables":45,"../internals/global":60,"../internals/well-known-symbol":149,"../modules/es.array.iterator":164}],244:[function(pe,i,o){pe("../modules/es.array.iterator");function s(ye){try{return decodeURIComponent(ye)}catch{return ye}}function a(ye){return K[ye]}function l(ye){return encodeURIComponent(ye).replace(U,a)}function u(ye){this.entries.length=0,re(this.entries,ye)}function h(ye,Re){if(ye<Re)throw TypeError("Not enough arguments")}function p(){b(this,p,J);var ye,Re,Me,xe,ve,ne,Te,Pe,Ae=0<arguments.length?arguments[0]:void 0,je=[];if(V(this,{type:J,entries:je,updateURL:function(){},updateSearchParams:u}),Ae!==void 0)if(P(Ae))if(typeof(ye=N(Ae))=="function")for(Me=(Re=ye.call(Ae)).next;!(xe=Me.call(Re)).done;){if((ne=(ve=(xe=j(C(xe.value))).next).call(xe)).done||(Te=ve.call(xe)).done||!ve.call(xe).done)throw TypeError("Expected sequence with length 2");je.push({key:ne.value+"",value:Te.value+""})}else for(Pe in Ae)w(Ae,Pe)&&je.push({key:Pe,value:Ae[Pe]+""});else re(je,typeof Ae=="string"?Ae.charAt(0)==="?"?Ae.slice(1):Ae:Ae+"")}var c=pe("../internals/export"),X=pe("../internals/get-built-in"),f=pe("../internals/native-url"),m=pe("../internals/redefine"),y=pe("../internals/redefine-all"),v=pe("../internals/set-to-string-tag"),g=pe("../internals/create-iterator-constructor"),x=pe("../internals/internal-state"),b=pe("../internals/an-instance"),w=pe("../internals/has"),T=pe("../internals/function-bind-context"),R=pe("../internals/classof"),C=pe("../internals/an-object"),P=pe("../internals/is-object"),I=pe("../internals/object-create"),D=pe("../internals/create-property-descriptor"),j=pe("../internals/get-iterator"),N=pe("../internals/get-iterator-method"),pe=pe("../internals/well-known-symbol"),O=X("fetch"),W=X("Headers"),X=pe("iterator"),J="URLSearchParams",ee=J+"Iterator",V=x.set,q=x.getterFor(J),Y=x.getterFor(ee),Z=/\+/g,ce=Array(4),B=function(ye){var Re,Me=ye.replace(Z," "),xe=4;try{return decodeURIComponent(Me)}catch{for(;xe;)Me=Me.replace((Re=xe--,ce[Re-1]||(ce[Re-1]=RegExp("((?:%[\\da-f]{2}){"+Re+"})","gi"))),s);return Me}},U=/[!'()~]|%20/g,K={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},re=function(ye,Re){if(Re)for(var Me,xe=Re.split("&"),ve=0;ve<xe.length;)(Me=xe[ve++]).length&&(Me=Me.split("="),ye.push({key:B(Me.shift()),value:B(Me.join("="))}))},ae=g(function(ye,Re){V(this,{type:ee,iterator:j(q(ye).entries),kind:Re})},"Iterator",function(){var Re=Y(this),ye=Re.kind,Re=Re.iterator.next(),Me=Re.value;return Re.done||(Re.value=ye==="keys"?Me.key:ye==="values"?Me.value:[Me.key,Me.value]),Re}),pe=p.prototype;y(pe,{append:function(ye,Re){h(arguments.length,2);var Me=q(this);Me.entries.push({key:ye+"",value:Re+""}),Me.updateURL()},delete:function(ye){h(arguments.length,1);for(var Re=q(this),Me=Re.entries,xe=ye+"",ve=0;ve<Me.length;)Me[ve].key===xe?Me.splice(ve,1):ve++;Re.updateURL()},get:function(ye){h(arguments.length,1);for(var Re=q(this).entries,Me=ye+"",xe=0;xe<Re.length;xe++)if(Re[xe].key===Me)return Re[xe].value;return null},getAll:function(ye){h(arguments.length,1);for(var Re=q(this).entries,Me=ye+"",xe=[],ve=0;ve<Re.length;ve++)Re[ve].key===Me&&xe.push(Re[ve].value);return xe},has:function(ye){h(arguments.length,1);for(var Re=q(this).entries,Me=ye+"",xe=0;xe<Re.length;)if(Re[xe++].key===Me)return!0;return!1},set:function(ye,Re){h(arguments.length,1);for(var Me,xe=q(this),ve=xe.entries,ne=!1,Te=ye+"",Pe=Re+"",Ae=0;Ae<ve.length;Ae++)(Me=ve[Ae]).key===Te&&(ne?ve.splice(Ae--,1):(ne=!0,Me.value=Pe));ne||ve.push({key:Te,value:Pe}),xe.updateURL()},sort:function(){for(var ye,Re,Me=q(this),xe=Me.entries,ve=xe.slice(),ne=xe.length=0;ne<ve.length;ne++){for(ye=ve[ne],Re=0;Re<ne;Re++)if(xe[Re].key>ye.key){xe.splice(Re,0,ye);break}Re===ne&&xe.push(ye)}Me.updateURL()},forEach:function(ye){for(var Re,Me=q(this).entries,xe=T(ye,1<arguments.length?arguments[1]:void 0,3),ve=0;ve<Me.length;)xe((Re=Me[ve++]).value,Re.key,this)},keys:function(){return new ae(this,"keys")},values:function(){return new ae(this,"values")},entries:function(){return new ae(this,"entries")}},{enumerable:!0}),m(pe,X,pe.entries),m(pe,"toString",function(){for(var ye,Re=q(this).entries,Me=[],xe=0;xe<Re.length;)ye=Re[xe++],Me.push(l(ye.key)+"="+l(ye.value));return Me.join("&")},{enumerable:!0}),v(p,J),c({global:!0,forced:!f},{URLSearchParams:p}),f||typeof O!="function"||typeof W!="function"||c({global:!0,enumerable:!0,forced:!0},{fetch:function(ve){var Re,Me,xe,ve=[ve];return 1<arguments.length&&(P(Re=arguments[1])&&(Me=Re.body,R(Me)===J&&((xe=Re.headers?new W(Re.headers):new W).has("content-type")||xe.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),Re=I(Re,{body:D(0,String(Me)),headers:D(0,xe)}))),ve.push(Re)),O.apply(this,ve)}}),i.exports={URLSearchParams:p,getState:q}},{"../internals/an-instance":9,"../internals/an-object":10,"../internals/classof":29,"../internals/create-iterator-constructor":37,"../internals/create-property-descriptor":39,"../internals/export":50,"../internals/function-bind-context":55,"../internals/get-built-in":57,"../internals/get-iterator":59,"../internals/get-iterator-method":58,"../internals/has":61,"../internals/internal-state":71,"../internals/is-object":75,"../internals/native-url":85,"../internals/object-create":91,"../internals/redefine":109,"../internals/redefine-all":108,"../internals/set-to-string-tag":118,"../internals/well-known-symbol":149,"../modules/es.array.iterator":164}],245:[function(j,i,o){j("../modules/es.string.iterator");function s(Fe){var Tt,Gt,At,mr;if(typeof Fe=="number"){for(Tt=[],Gt=0;Gt<4;Gt++)Tt.unshift(Fe%256),Fe=ee(Fe/256);return Tt.join(".")}if(typeof Fe!="object")return Fe;for(Tt="",At=Te(Fe),Gt=0;Gt<8;Gt++)mr&&Fe[Gt]===0||(mr=mr&&!1,At===Gt?(Tt+=Gt?":":"::",mr=!0):(Tt+=Fe[Gt].toString(16),Gt<7&&(Tt+=":")));return"["+Tt+"]"}function a(Fe){return!Fe.host||Fe.cannotBeABaseURL||Fe.scheme=="file"}function l(Fe,Tt,Gt,At){var mr,me,Qe,qe=Gt||rt,Ze=0,Ne="",St=!1,jt=!1,Ft=!1;for(Gt||(Fe.scheme="",Fe.username="",Fe.password="",Fe.host=null,Fe.port=null,Fe.path=[],Fe.query=null,Fe.fragment=null,Fe.cannotBeABaseURL=!1,Tt=Tt.replace(xe,"")),Tt=Tt.replace(ve,""),mr=R(Tt);Ze<=mr.length;){switch(me=mr[Ze],qe){case rt:if(!me||!B.test(me)){if(Gt)return Y;qe=de;continue}Ne+=me.toLowerCase(),qe=Ye;break;case Ye:if(me&&(U.test(me)||me=="+"||me=="-"||me=="."))Ne+=me.toLowerCase();else{if(me!=":"){if(Gt)return Y;Ne="",qe=de,Ze=0;continue}if(Gt&&(fe(Fe)!=w(_e,Ne)||Ne=="file"&&(We(Fe)||Fe.port!==null)||Fe.scheme=="file"&&!Fe.host))return;if(Fe.scheme=Ne,Gt)return void(fe(Fe)&&_e[Fe.scheme]==Fe.port&&(Fe.port=null));Ne="",Fe.scheme=="file"?qe=ut:fe(Fe)&&At&&At.scheme==Fe.scheme?qe=ge:fe(Fe)?qe=be:mr[Ze+1]=="/"?(qe=ue,Ze++):(Fe.cannotBeABaseURL=!0,Fe.path.push(""),qe=yr)}break;case de:if(!At||At.cannotBeABaseURL&&me!="#")return Y;if(At.cannotBeABaseURL&&me=="#"){Fe.scheme=At.scheme,Fe.path=At.path.slice(),Fe.query=At.query,Fe.fragment="",Fe.cannotBeABaseURL=!0,qe=Ut;break}qe=At.scheme=="file"?ut:Se;continue;case ge:if(me!="/"||mr[Ze+1]!="/"){qe=Se;continue}qe=ke,Ze++;break;case ue:if(me=="/"){qe=ot;break}qe=Dt;continue;case Se:if(Fe.scheme=At.scheme,me==p)Fe.username=At.username,Fe.password=At.password,Fe.host=At.host,Fe.port=At.port,Fe.path=At.path.slice(),Fe.query=At.query;else if(me=="/"||me=="\\"&&fe(Fe))qe=De;else if(me=="?")Fe.username=At.username,Fe.password=At.password,Fe.host=At.host,Fe.port=At.port,Fe.path=At.path.slice(),Fe.query="",qe=Bt;else{if(me!="#"){Fe.username=At.username,Fe.password=At.password,Fe.host=At.host,Fe.port=At.port,Fe.path=At.path.slice(),Fe.path.pop(),qe=Dt;continue}Fe.username=At.username,Fe.password=At.password,Fe.host=At.host,Fe.port=At.port,Fe.path=At.path.slice(),Fe.query=At.query,Fe.fragment="",qe=Ut}break;case De:if(!fe(Fe)||me!="/"&&me!="\\"){if(me!="/"){Fe.username=At.username,Fe.password=At.password,Fe.host=At.host,Fe.port=At.port,qe=Dt;continue}qe=ot}else qe=ke;break;case be:if(qe=ke,me!="/"||Ne.charAt(Ze+1)!="/")continue;Ze++;break;case ke:if(me=="/"||me=="\\")break;qe=ot;continue;case ot:if(me=="@"){St&&(Ne="%40"+Ne);for(var St=!0,Ht=R(Ne),Qt=0;Qt<Ht.length;Qt++){var Kt=Ht[Qt];Kt!=":"||Ft?(Kt=Ge(Kt,Ue),Ft?Fe.password+=Kt:Fe.username+=Kt):Ft=!0}Ne=""}else if(me==p||me=="/"||me=="?"||me=="#"||me=="\\"&&fe(Fe)){if(St&&Ne=="")return q;Ze-=R(Ne).length+1,Ne="",qe=Ce}else Ne+=me;break;case Ce:case it:if(Gt&&Fe.scheme=="file"){qe=vt;continue}if(me!=":"||jt){if(me==p||me=="/"||me=="?"||me=="#"||me=="\\"&&fe(Fe)){if(fe(Fe)&&Ne=="")return Z;if(Gt&&Ne==""&&(We(Fe)||Fe.port!==null))return;if(Qe=ne(Fe,Ne))return Qe;if(Ne="",qe=Rt,Gt)return;continue}me=="["?jt=!0:me=="]"&&(jt=!1),Ne+=me}else{if(Ne=="")return Z;if(Qe=ne(Fe,Ne))return Qe;if(Ne="",qe=Xe,Gt==it)return}break;case Xe:if(!K.test(me)){if(me==p||me=="/"||me=="?"||me=="#"||me=="\\"&&fe(Fe)||Gt){if(Ne!=""){var It=parseInt(Ne,10);if(65535<It)return ce;Fe.port=fe(Fe)&&It===_e[Fe.scheme]?null:It,Ne=""}if(Gt)return;qe=Rt;continue}return ce}Ne+=me;break;case ut:if(Fe.scheme="file",me=="/"||me=="\\")qe=bt;else{if(!At||At.scheme!="file"){qe=Dt;continue}if(me==p)Fe.host=At.host,Fe.path=At.path.slice(),Fe.query=At.query;else if(me=="?")Fe.host=At.host,Fe.path=At.path.slice(),Fe.query="",qe=Bt;else{if(me!="#"){$e(mr.slice(Ze).join(""))||(Fe.host=At.host,Fe.path=At.path.slice(),et(Fe)),qe=Dt;continue}Fe.host=At.host,Fe.path=At.path.slice(),Fe.query=At.query,Fe.fragment="",qe=Ut}}break;case bt:if(me=="/"||me=="\\"){qe=vt;break}At&&At.scheme=="file"&&!$e(mr.slice(Ze).join(""))&&(Ke(At.path[0],!0)?Fe.path.push(At.path[0]):Fe.host=At.host),qe=Dt;continue;case vt:if(me==p||me=="/"||me=="\\"||me=="?"||me=="#"){if(!Gt&&Ke(Ne))qe=Dt;else{if(Ne==""){if(Fe.host="",Gt)return}else{if(Qe=ne(Fe,Ne))return Qe;if(Fe.host=="localhost"&&(Fe.host=""),Gt)return;Ne=""}qe=Rt}continue}Ne+=me;break;case Rt:if(fe(Fe)){if(qe=Dt,me!="/"&&me!="\\")continue}else if(Gt||me!="?")if(Gt||me!="#"){if(me!=p&&(qe=Dt,me!="/"))continue}else Fe.fragment="",qe=Ut;else Fe.query="",qe=Bt;break;case Dt:if(me==p||me=="/"||me=="\\"&&fe(Fe)||!Gt&&(me=="?"||me=="#")){if(Be(Ne)?(et(Fe),me=="/"||me=="\\"&&fe(Fe)||Fe.path.push("")):ht(Ne)?me=="/"||me=="\\"&&fe(Fe)||Fe.path.push(""):(Fe.scheme=="file"&&!Fe.path.length&&Ke(Ne)&&(Fe.host&&(Fe.host=""),Ne=Ne.charAt(0)+":"),Fe.path.push(Ne)),Ne="",Fe.scheme=="file"&&(me==p||me=="?"||me=="#"))for(;1<Fe.path.length&&Fe.path[0]==="";)Fe.path.shift();me=="?"?(Fe.query="",qe=Bt):me=="#"&&(Fe.fragment="",qe=Ut)}else Ne+=Ge(me,je);break;case yr:me=="?"?(Fe.query="",qe=Bt):me=="#"?(Fe.fragment="",qe=Ut):me!=p&&(Fe.path[0]+=Ge(me,Pe));break;case Bt:Gt||me!="#"?me!=p&&(me=="'"&&fe(Fe)?Fe.query+="%27":Fe.query+=me=="#"?"%23":Ge(me,Pe)):(Fe.fragment="",qe=Ut);break;case Ut:me!=p&&(Fe.fragment+=Ge(me,Ae))}Ze++}}function u(me){var Tt,Gt,At=b(this,u,"URL"),mr=1<arguments.length?arguments[1]:void 0,me=String(me),Qe=X(At,{type:"URL"});if(mr!==void 0){if(mr instanceof u)Tt=J(mr);else if(Gt=l(Tt={},String(mr)))throw TypeError(Gt)}if(Gt=l(Qe,me,null,Tt))throw TypeError(Gt);var qe=Qe.searchParams=new O;(mr=W(qe)).updateSearchParams(Qe.query),mr.updateURL=function(){Qe.query=String(qe)||null},y||(At.href=Pt.call(At),At.origin=Wt.call(At),At.protocol=Jt.call(At),At.username=$t.call(At),At.password=br.call(At),At.host=cr.call(At),At.hostname=en.call(At),At.port=Pn.call(At),At.pathname=an.call(At),At.search=un.call(At),At.searchParams=jr.call(At),At.hash=Jn.call(At))}function h(Fe,Tt){return{get:Fe,set:Tt,configurable:!0,enumerable:!0}}var p,c,f,m=j("../internals/export"),y=j("../internals/descriptors"),v=j("../internals/native-url"),Yt=j("../internals/global"),g=j("../internals/object-define-properties"),x=j("../internals/redefine"),b=j("../internals/an-instance"),w=j("../internals/has"),T=j("../internals/object-assign"),R=j("../internals/array-from"),C=j("../internals/string-multibyte").codeAt,P=j("../internals/string-punycode-to-ascii"),I=j("../internals/set-to-string-tag"),D=j("../modules/web.url-search-params"),j=j("../internals/internal-state"),N=Yt.URL,O=D.URLSearchParams,W=D.getState,X=j.set,J=j.getterFor("URL"),ee=Math.floor,V=Math.pow,q="Invalid authority",Y="Invalid scheme",Z="Invalid host",ce="Invalid port",B=/[A-Za-z]/,U=/[\d+-.A-Za-z]/,K=/\d/,re=/^(0x|0X)/,ae=/^[0-7]+$/,pe=/^\d+$/,ye=/^[\dA-Fa-f]+$/,Re=/[\u0000\u0009\u000A\u000D #%/:?@[\\]]/,Me=/[\u0000\u0009\u000A\u000D #/:?@[\\]]/,xe=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,ve=/[\u0009\u000A\u000D]/g,ne=function(Fe,Tt){var Gt,At,mr;if(Tt.charAt(0)=="[")return Tt.charAt(Tt.length-1)=="]"&&(Gt=function(me){var Qe=[0,0,0,0,0,0,0,0],qe=0,Ze=null,Ne=0,St,jt,Ft,Ht,Qt,Kt,It,Xt=function(){return me.charAt(Ne)};if(Xt()==":"){if(me.charAt(1)!=":")return;Ne+=2,qe++,Ze=qe}for(;Xt();){if(qe==8)return;if(Xt()==":"){if(Ze!==null)return;Ne++,qe++,Ze=qe;continue}for(St=jt=0;jt<4&&ye.test(Xt());)St=St*16+parseInt(Xt(),16),Ne++,jt++;if(Xt()=="."){if(jt==0||(Ne-=jt,qe>6))return;for(Ft=0;Xt();){if(Ht=null,Ft>0)if(Xt()=="."&&Ft<4)Ne++;else return;if(!K.test(Xt()))return;for(;K.test(Xt());){if(Qt=parseInt(Xt(),10),Ht===null)Ht=Qt;else{if(Ht==0)return;Ht=Ht*10+Qt}if(Ht>255)return;Ne++}Qe[qe]=Qe[qe]*256+Ht,Ft++,(Ft==2||Ft==4)&&qe++}if(Ft!=4)return;break}else if(Xt()==":"){if(Ne++,!Xt())return}else if(Xt())return;Qe[qe++]=St}if(Ze!==null)for(Kt=qe-Ze,qe=7;qe!=0&&Kt>0;)It=Qe[qe],Qe[qe--]=Qe[Ze+Kt-1],Qe[Ze+--Kt]=It;else if(qe!=8)return;return Qe}(Tt.slice(1,-1)))?void(Fe.host=Gt):Z;if(fe(Fe))return Tt=P(Tt),Re.test(Tt)||(Gt=function(me){var Qe=me.split("."),qe,Ze,Ne,St,jt,Ft,Ht;if(Qe.length&&Qe[Qe.length-1]==""&&Qe.pop(),(qe=Qe.length)>4)return me;for(Ze=[],Ne=0;Ne<qe;Ne++){if(St=Qe[Ne],St=="")return me;if(jt=10,St.length>1&&St.charAt(0)=="0"&&(jt=re.test(St)?16:8,St=St.slice(jt==8?1:2)),St==="")Ft=0;else{if(!(jt==10?pe:jt==8?ae:ye).test(St))return me;Ft=parseInt(St,jt)}Ze.push(Ft)}for(Ne=0;Ne<qe;Ne++)if(Ft=Ze[Ne],Ne==qe-1){if(Ft>=V(256,5-qe))return null}else if(Ft>255)return null;for(Ht=Ze.pop(),Ne=0;Ne<Ze.length;Ne++)Ht+=Ze[Ne]*V(256,3-Ne);return Ht}(Tt))===null?Z:void(Fe.host=Gt);if(Me.test(Tt))return Z;for(Gt="",At=R(Tt),mr=0;mr<At.length;mr++)Gt+=Ge(At[mr],Pe);Fe.host=Gt},Te=function(Fe){for(var Tt=null,Gt=1,At=null,mr=0,me=0;me<8;me++)Fe[me]!==0?(Gt<mr&&(Tt=At,Gt=mr),At=null,mr=0):(At===null&&(At=me),++mr);return Gt<mr&&(Tt=At,Gt=mr),Tt},Pe={},Ae=T({},Pe,{" ":1,'"':1,"<":1,">":1,"`":1}),je=T({},Ae,{"#":1,"?":1,"{":1,"}":1}),Ue=T({},je,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),Ge=function(Fe,Tt){var Gt=C(Fe,0);return 32<Gt&&Gt<127&&!w(Tt,Fe)?Fe:encodeURIComponent(Fe)},_e={ftp:21,file:null,http:80,https:443,ws:80,wss:443},fe=function(Fe){return w(_e,Fe.scheme)},We=function(Fe){return Fe.username!=""||Fe.password!=""},Ke=function(Fe,Tt){return Fe.length==2&&B.test(Fe.charAt(0))&&((Fe=Fe.charAt(1))==":"||!Tt&&Fe=="|")},$e=function(Fe){return 1<Fe.length&&Ke(Fe.slice(0,2))&&(Fe.length==2||(Fe=Fe.charAt(2))==="/"||Fe==="\\"||Fe==="?"||Fe==="#")},et=function(Fe){var Tt=Fe.path,Gt=Tt.length;!Gt||Fe.scheme=="file"&&Gt==1&&Ke(Tt[0],!0)||Tt.pop()},ht=function(Fe){return Fe==="."||Fe.toLowerCase()==="%2e"},Be=function(Fe){return(Fe=Fe.toLowerCase())===".."||Fe==="%2e."||Fe===".%2e"||Fe==="%2e%2e"},rt={},Ye={},de={},ge={},ue={},Se={},De={},be={},ke={},ot={},Ce={},it={},Xe={},ut={},bt={},vt={},Rt={},Dt={},yr={},Bt={},Ut={},Yt=u.prototype,Pt=function(){var Fe=J(this),Tt=Fe.scheme,Gt=Fe.username,At=Fe.password,mr=Fe.host,me=Fe.port,Qe=Fe.path,qe=Fe.query,Ze=Fe.fragment,Ne=Tt+":";return mr!==null?(Ne+="//",We(Fe)&&(Ne+=Gt+(At?":"+At:"")+"@"),Ne+=s(mr),me!==null&&(Ne+=":"+me)):Tt=="file"&&(Ne+="//"),Ne+=Fe.cannotBeABaseURL?Qe[0]:Qe.length?"/"+Qe.join("/"):"",qe!==null&&(Ne+="?"+qe),Ze!==null&&(Ne+="#"+Ze),Ne},Wt=function(){var Fe=J(this),Tt=Fe.scheme,Gt=Fe.port;if(Tt=="blob")try{return new URL(Tt.path[0]).origin}catch{return"null"}return Tt!="file"&&fe(Fe)?Tt+"://"+s(Fe.host)+(Gt!==null?":"+Gt:""):"null"},Jt=function(){return J(this).scheme+":"},$t=function(){return J(this).username},br=function(){return J(this).password},cr=function(){var Tt=J(this),Fe=Tt.host,Tt=Tt.port;return Fe===null?"":Tt===null?s(Fe):s(Fe)+":"+Tt},en=function(){var Fe=J(this).host;return Fe===null?"":s(Fe)},Pn=function(){var Fe=J(this).port;return Fe===null?"":String(Fe)},an=function(){var Fe=J(this),Tt=Fe.path;return Fe.cannotBeABaseURL?Tt[0]:Tt.length?"/"+Tt.join("/"):""},un=function(){var Fe=J(this).query;return Fe?"?"+Fe:""},jr=function(){return J(this).searchParams},Jn=function(){var Fe=J(this).fragment;return Fe?"#"+Fe:""};y&&g(Yt,{href:h(Pt,function(Gt){var Tt=J(this),Gt=String(Gt),Gt=l(Tt,Gt);if(Gt)throw TypeError(Gt);W(Tt.searchParams).updateSearchParams(Tt.query)}),origin:h(Wt),protocol:h(Jt,function(Fe){var Tt=J(this);l(Tt,String(Fe)+":",rt)}),username:h($t,function(Fe){var Tt=J(this),Gt=R(String(Fe));if(!a(Tt)){Tt.username="";for(var At=0;At<Gt.length;At++)Tt.username+=Ge(Gt[At],Ue)}}),password:h(br,function(Fe){var Tt=J(this),Gt=R(String(Fe));if(!a(Tt)){Tt.password="";for(var At=0;At<Gt.length;At++)Tt.password+=Ge(Gt[At],Ue)}}),host:h(cr,function(Fe){var Tt=J(this);Tt.cannotBeABaseURL||l(Tt,String(Fe),Ce)}),hostname:h(en,function(Fe){var Tt=J(this);Tt.cannotBeABaseURL||l(Tt,String(Fe),it)}),port:h(Pn,function(Fe){var Tt=J(this);a(Tt)||((Fe=String(Fe))==""?Tt.port=null:l(Tt,Fe,Xe))}),pathname:h(an,function(Fe){var Tt=J(this);Tt.cannotBeABaseURL||(Tt.path=[],l(Tt,Fe+"",Rt))}),search:h(un,function(Fe){var Tt=J(this);(Fe=String(Fe))==""?Tt.query=null:(Fe.charAt(0)=="?"&&(Fe=Fe.slice(1)),Tt.query="",l(Tt,Fe,Bt)),W(Tt.searchParams).updateSearchParams(Tt.query)}),searchParams:h(jr),hash:h(Jn,function(Fe){var Tt=J(this);(Fe=String(Fe))==""?Tt.fragment=null:(Fe.charAt(0)=="#"&&(Fe=Fe.slice(1)),Tt.fragment="",l(Tt,Fe,Ut))})}),x(Yt,"toJSON",function(){return Pt.call(this)},{enumerable:!0}),x(Yt,"toString",function(){return Pt.call(this)},{enumerable:!0}),N&&(c=N.createObjectURL,f=N.revokeObjectURL,c&&x(u,"createObjectURL",function(Fe){return c.apply(N,arguments)}),f&&x(u,"revokeObjectURL",function(Fe){return f.apply(N,arguments)})),I(u,"URL"),m({global:!0,forced:!v,sham:!y},{URL:u})},{"../internals/an-instance":9,"../internals/array-from":17,"../internals/descriptors":43,"../internals/export":50,"../internals/global":60,"../internals/has":61,"../internals/internal-state":71,"../internals/native-url":85,"../internals/object-assign":90,"../internals/object-define-properties":92,"../internals/redefine":109,"../internals/set-to-string-tag":118,"../internals/string-multibyte":124,"../internals/string-punycode-to-ascii":127,"../modules/es.string.iterator":197,"../modules/web.url-search-params":244}],246:[function(r,i,o){i.exports=r("./").polyfill()},{"./":247}],247:[function(r,i,o){(function(s,a){var l,u;l=this,u=function(){function h(ne){return typeof ne=="function"}var p=Array.isArray||function(ne){return Object.prototype.toString.call(ne)==="[object Array]"},c=0,f=void 0,m=void 0,y=function(ne,Te){T[c]=ne,T[c+1]=Te,(c+=2)===2&&(m?m(R):O())},v=typeof window<"u"?window:void 0,g=v||{},g=g.MutationObserver||g.WebKitMutationObserver,x=typeof self>"u"&&s!==void 0&&{}.toString.call(s)==="[object process]",b=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function w(){var ne=setTimeout;return function(){return ne(R,1)}}var T=new Array(1e3);function R(){for(var ne=0;ne<c;ne+=2)(0,T[ne])(T[ne+1]),T[ne]=void 0,T[ne+1]=void 0;c=0}function C(){try{var ne=Function("return this")().require("vertx");return(f=ne.runOnLoop||ne.runOnContext)!==void 0?function(){f(R)}:w()}catch{return w()}}var P,I,D,O=void 0;function j(ne,Te){var Pe,Ae=this,je=new this.constructor(X),Ue=(je[W]===void 0&&ye(je),Ae._state);return Ue?(Pe=arguments[Ue-1],y(function(){return ae(Ue,je,Pe,Ae._result)})):K(Ae,je,ne,Te),je}function N(ne){var Te;return ne&&typeof ne=="object"&&ne.constructor===this?ne:(Z(Te=new this(X),ne),Te)}var O=x?function(){return s.nextTick(R)}:g?(I=0,x=new g(R),D=document.createTextNode(""),x.observe(D,{characterData:!0}),function(){D.data=I=++I%2}):b?((P=new MessageChannel).port1.onmessage=R,function(){return P.port2.postMessage(0)}):(v===void 0&&typeof r=="function"?C:w)(),W=Math.random().toString(36).substring(2);function X(){}var J=void 0,ee=1,V=2;function q(ne,Te,Pe){y(function(Ae){var je=!1,Ue=function(Ge,_e,fe,We){try{Ge.call(_e,fe,We)}catch(Ke){return Ke}}(Pe,Te,function(Ge){je||(je=!0,(Te!==Ge?Z:B)(Ae,Ge))},function(Ge){je||(je=!0,U(Ae,Ge))},Ae._label);!je&&Ue&&(je=!0,U(Ae,Ue))},ne)}function Y(ne,Te,Pe){var Ae,je;Te.constructor===ne.constructor&&Pe===j&&Te.constructor.resolve===N?(Ae=ne,(je=Te)._state===ee?B(Ae,je._result):je._state===V?U(Ae,je._result):K(je,void 0,function(Ue){return Z(Ae,Ue)},function(Ue){return U(Ae,Ue)})):Pe!==void 0&&h(Pe)?q(ne,Te,Pe):B(ne,Te)}function Z(ne,Te){if(ne===Te)U(ne,new TypeError("You cannot resolve a promise with itself"));else if(Pe=typeof Te,Te===null||Pe!="object"&&Pe!="function")B(ne,Te);else{Pe=void 0;try{Pe=Te.then}catch(Ae){return void U(ne,Ae)}Y(ne,Te,Pe)}var Pe}function ce(ne){ne._onerror&&ne._onerror(ne._result),re(ne)}function B(ne,Te){ne._state===J&&(ne._result=Te,ne._state=ee,ne._subscribers.length!==0&&y(re,ne))}function U(ne,Te){ne._state===J&&(ne._state=V,ne._result=Te,y(ce,ne))}function K(ne,Te,Pe,Ae){var je=ne._subscribers,Ue=je.length;ne._onerror=null,je[Ue]=Te,je[Ue+ee]=Pe,je[Ue+V]=Ae,Ue===0&&ne._state&&y(re,ne)}function re(ne){var Te=ne._subscribers,Pe=ne._state;if(Te.length!==0){for(var Ae,je=void 0,Ue=ne._result,Ge=0;Ge<Te.length;Ge+=3)Ae=Te[Ge],je=Te[Ge+Pe],Ae?ae(Pe,Ae,je,Ue):je(Ue);ne._subscribers.length=0}}function ae(ne,Te,Pe,Ae){var je=h(Pe),Ue=void 0,Ge=void 0,_e=!0;if(je){try{Ue=Pe(Ae)}catch(fe){_e=!1,Ge=fe}if(Te===Ue)return void U(Te,new TypeError("A promises callback cannot return that same promise."))}else Ue=Ae;Te._state===J&&(je&&_e?Z(Te,Ue):_e===!1?U(Te,Ge):ne===ee?B(Te,Ue):ne===V&&U(Te,Ue))}var pe=0;function ye(ne){ne[W]=pe++,ne._state=void 0,ne._result=void 0,ne._subscribers=[]}Me.prototype._enumerate=function(ne){for(var Te=0;this._state===J&&Te<ne.length;Te++)this._eachEntry(ne[Te],Te)},Me.prototype._eachEntry=function(ne,Te){var Pe=this._instanceConstructor,Ae=Pe.resolve;if(Ae===N){var je,Ue=void 0,Ge=void 0,_e=!1;try{Ue=ne.then}catch(fe){_e=!0,Ge=fe}Ue===j&&ne._state!==J?this._settledAt(ne._state,Te,ne._result):typeof Ue!="function"?(this._remaining--,this._result[Te]=ne):Pe===xe?(je=new Pe(X),_e?U(je,Ge):Y(je,ne,Ue),this._willSettleAt(je,Te)):this._willSettleAt(new Pe(function(fe){return fe(ne)}),Te)}else this._willSettleAt(Ae(ne),Te)},Me.prototype._settledAt=function(ne,Te,Pe){var Ae=this.promise;Ae._state===J&&(this._remaining--,ne===V?U(Ae,Pe):this._result[Te]=Pe),this._remaining===0&&B(Ae,this._result)},Me.prototype._willSettleAt=function(ne,Te){var Pe=this;K(ne,void 0,function(Ae){return Pe._settledAt(ee,Te,Ae)},function(Ae){return Pe._settledAt(V,Te,Ae)})};var Re=Me;function Me(ne,Te){this._instanceConstructor=ne,this.promise=new ne(X),this.promise[W]||ye(this.promise),p(Te)?(this.length=Te.length,this._remaining=Te.length,this._result=new Array(this.length),this.length!==0&&(this.length=this.length||0,this._enumerate(Te),this._remaining!==0)||B(this.promise,this._result)):U(this.promise,new Error("Array Methods must be provided an Array"))}ve.prototype.catch=function(ne){return this.then(null,ne)},ve.prototype.finally=function(ne){var Te=this.constructor;return h(ne)?this.then(function(Pe){return Te.resolve(ne()).then(function(){return Pe})},function(Pe){return Te.resolve(ne()).then(function(){throw Pe})}):this.then(ne,ne)};var xe=ve;function ve(ne){if(this[W]=pe++,this._result=this._state=void 0,this._subscribers=[],X!==ne){if(typeof ne!="function")throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof ve))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");var Te=this;try{ne(function(Pe){Z(Te,Pe)},function(Pe){U(Te,Pe)})}catch(Pe){U(Te,Pe)}}}return xe.prototype.then=j,xe.all=function(ne){return new Re(this,ne).promise},xe.race=function(ne){var Te=this;return p(ne)?new Te(function(Pe,Ae){for(var je=ne.length,Ue=0;Ue<je;Ue++)Te.resolve(ne[Ue]).then(Pe,Ae)}):new Te(function(Pe,Ae){return Ae(new TypeError("You must pass an array to race."))})},xe.resolve=N,xe.reject=function(ne){var Te=new this(X);return U(Te,ne),Te},xe._setScheduler=function(ne){m=ne},xe._setAsap=function(ne){y=ne},xe._asap=y,xe.polyfill=function(){var ne=void 0;if(a!==void 0)ne=a;else if(typeof self<"u")ne=self;else try{ne=Function("return this")()}catch{throw new Error("polyfill failed because global object is unavailable in this environment")}var Te=ne.Promise;if(Te){var Pe=null;try{Pe=Object.prototype.toString.call(Te.resolve())}catch{}if(Pe==="[object Promise]"&&!Te.cast)return}ne.Promise=xe},xe.Promise=xe},typeof o=="object"&&i!==void 0?i.exports=u():l.ES6Promise=u()}).call(this,r("_process"),typeof By<"u"?By:typeof self<"u"?self:typeof window<"u"?window:{})},{_process:256}],248:[function(r,i,o){var s,a;s=this,a=function(l,u){var h=5e3,p="callback";function c(m){try{delete window[m]}catch{window[m]=void 0}}function f(m){m=document.getElementById(m),m&&document.getElementsByTagName("head")[0].removeChild(m)}u.exports=function(m){var y=arguments.length<=1||arguments[1]===void 0?{}:arguments[1],v=m,g=y.timeout||h,x=y.jsonpCallback||p,b=void 0;return new Promise(function(w,T){var R=y.jsonpCallbackFunction||"jsonp_"+Date.now()+"_"+Math.ceil(1e5*Math.random()),C=x+"_"+R,P=(window[R]=function(I){w({ok:!0,json:function(){return Promise.resolve(I)}}),b&&clearTimeout(b),f(C),c(R)},v+=v.indexOf("?")===-1?"?":"&",document.createElement("script"));P.setAttribute("src",""+v+x+"="+R),y.charset&&P.setAttribute("charset",y.charset),P.id=C,document.getElementsByTagName("head")[0].appendChild(P),b=setTimeout(function(){T(new Error("JSONP request to "+m+" timed out")),c(R),f(C),window[R]=function(){c(R)}},g),P.onerror=function(){T(new Error("JSONP request to "+m+" failed")),c(R),f(C),b&&clearTimeout(b)}})}},o!==void 0&&i!==void 0?a(0,i):(a(a={exports:{}},a),s.fetchJsonp=a.exports)},{}],249:[function(r,i,o){var s=function(a){var l,u,h,p,c,f,m,y,v,g,x;if(!(a===void 0||typeof navigator<"u"&&/MSIE [1-9]\./.test(navigator.userAgent)))return x=a.document,l=function(){return a.URL||a.webkitURL||a},u=x.createElementNS("http://www.w3.org/1999/xhtml","a"),h="download"in u,p=/constructor/i.test(a.HTMLElement)||a.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent),f=function(b){(a.setImmediate||a.setTimeout)(function(){throw b},0)},m=4e4,y=function(b){setTimeout(function(){typeof b=="string"?l().revokeObjectURL(b):b.remove()},m)},v=function(b){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(b.type)?new Blob(["\uFEFF",b],{type:b.type}):b},x=(g=function(b,w,I){I||(b=v(b));var R,C,P=this,I=b.type==="application/octet-stream",D=function(){for(var j=P,N="writestart progress write writeend".split(" "),O=void 0,W=(N=[].concat(N)).length;W--;){var X=j["on"+N[W]];if(typeof X=="function")try{X.call(j,O||j)}catch(J){f(J)}}};P.readyState=P.INIT,h?(R=l().createObjectURL(b),setTimeout(function(){var j,N;u.href=R,u.download=w,j=u,N=new MouseEvent("click"),j.dispatchEvent(N),D(),y(R),P.readyState=P.DONE})):(c||I&&p)&&a.FileReader?((C=new FileReader).onloadend=function(){var j=c?C.result:C.result.replace(/^data:[^;]*;/,"data:attachment/file;");a.open(j,"_blank")||(a.location.href=j),j=void 0,P.readyState=P.DONE,D()},C.readAsDataURL(b),P.readyState=P.INIT):(R=R||l().createObjectURL(b),!I&&a.open(R,"_blank")||(a.location.href=R),P.readyState=P.DONE,D(),y(R))}).prototype,typeof navigator<"u"&&navigator.msSaveOrOpenBlob?function(b,w,T){return w=w||b.name||"download",T||(b=v(b)),navigator.msSaveOrOpenBlob(b,w)}:(x.abort=function(){},x.readyState=x.INIT=0,x.WRITING=1,x.DONE=2,x.error=x.onwritestart=x.onprogress=x.onwrite=x.onabort=x.onerror=x.onwriteend=null,function(b,w,T){return new g(b,w||b.name||"download",T)})}(typeof self<"u"&&self||typeof window<"u"&&window||this.content);i!==void 0&&i.exports?i.exports.saveAs=s:n!=null},{}],250:[function(r,i,o){var s,a=Object.defineProperty,l=(a(o,"__esModule",{value:!0}),o),u={GIFEncoder:()=>D,applyPalette:()=>function(J,ee,V="rgb565"){if(!J||!J.buffer)throw new Error("quantize() expected RGBA Uint8Array data");if(!(J instanceof Uint8Array||J instanceof Uint8ClampedArray))throw new Error("quantize() expected RGBA Uint8Array data");if(256<ee.length)throw new Error("applyPalette() only works with 256 colors or less");const q=new Uint32Array(J.buffer),Y=q.length,Z=V==="rgb444"?4096:65536,ce=new Uint8Array(Y),B=new Array(Z);if(V==="rgba4444")for(let ve=0;ve<Y;ve++){var ae=q[ve],U=ae>>24&255,K=ae>>16&255,re=ae>>8&255,ae=255&ae,pe=y(ae,re,K,U),pe=pe in B?B[pe]:B[pe]=function(ne,Te,Pe,Ae,je){let Ue=0,Ge=1e100;for(let Ke=0;Ke<je.length;Ke++){var _e,fe=je[Ke],We=C(fe[3]-Ae);We>Ge||(_e=fe[0],(We+=C(_e-ne))>Ge||(_e=fe[1],(We+=C(_e-Te))>Ge||(_e=fe[2],(We+=C(_e-Pe))>Ge||(Ge=We,Ue=Ke))))}return Ue}(ae,re,K,U,ee);ce[ve]=pe}else{const ve=V==="rgb444"?v:m;for(let ne=0;ne<Y;ne++){var Me=q[ne],ye=Me>>16&255,Re=Me>>8&255,Me=255&Me,xe=ve(Me,Re,ye),xe=xe in B?B[xe]:B[xe]=function(Te,Pe,Ae,je){let Ue=0,Ge=1e100;for(let Ke=0;Ke<je.length;Ke++){var _e,fe=je[Ke],We=C(fe[0]-Te);We>Ge||(_e=fe[1],(We+=C(_e-Pe))>Ge||(_e=fe[2],(We+=C(_e-Ae))>Ge||(Ge=We,Ue=Ke)))}return Ue}(Me,Re,ye,ee);ce[ne]=xe}}return ce},default:()=>X,nearestColor:()=>function(J,ee,V=T){return J[P(J,ee,V)]},nearestColorIndex:()=>P,nearestColorIndexWithDistance:()=>I,prequantize:()=>function(J,{roundRGB:ee=5,roundAlpha:V=10,oneBitAlpha:q=null}={}){const Y=new Uint32Array(J.buffer);for(let K=0;K<Y.length;K++){var U=Y[K];let re=U>>24&255;var Z,ce=U>>16&255,B=U>>8&255,U=255&U;re=R(re,V),q&&(Z=typeof q=="number"?q:127,re=re<=Z?0:255),U=R(U,ee),B=R(B,ee),ce=R(ce,ee),Y[K]=re<<24|ce<<16|B<<8|U<<0}},quantize:()=>function(J,ee,V={}){var{format:q="rgb565",clearAlpha:Y=!0,clearAlphaColor:Z=0,clearAlphaThreshold:ce=0,oneBitAlpha:B=!1}=V;if(!J||!J.buffer)throw new Error("quantize() expected RGBA Uint8Array data");if(!(J instanceof Uint8Array||J instanceof Uint8ClampedArray))throw new Error("quantize() expected RGBA Uint8Array data");J=new Uint32Array(J.buffer);let U=V.useSqrt!==!1;const K=q==="rgba4444",re=function($e,et){const ht=et==="rgb444"?4096:65536,Be=new Array(ht),rt=$e.length;if(et==="rgba4444")for(let bt=0;bt<rt;++bt){var ue=$e[bt],Ye=ue>>24&255,de=ue>>16&255,ge=ue>>8&255,ue=255&ue,Se=y(ue,ge,de,Ye);let vt=Se in Be?Be[Se]:Be[Se]=w();vt.rc+=ue,vt.gc+=ge,vt.bc+=de,vt.ac+=Ye,vt.cnt++}else if(et==="rgb444")for(let bt=0;bt<rt;++bt){var ke=$e[bt],De=ke>>16&255,be=ke>>8&255,ke=255&ke,ot=v(ke,be,De);let vt=ot in Be?Be[ot]:Be[ot]=w();vt.rc+=ke,vt.gc+=be,vt.bc+=De,vt.cnt++}else for(let bt=0;bt<rt;++bt){var Xe=$e[bt],Ce=Xe>>16&255,it=Xe>>8&255,Xe=255&Xe,ut=m(Xe,it,Ce);let vt=ut in Be?Be[ut]:Be[ut]=w();vt.rc+=Xe,vt.gc+=it,vt.bc+=Ce,vt.cnt++}return Be}(J,q),ae=re.length,pe=ae-1,ye=new Uint32Array(ae+1);for(var Re=0,Me=0;Me<ae;++Me){const $e=re[Me];$e!=null&&(fe=1/$e.cnt,K&&($e.ac*=fe),$e.rc*=fe,$e.gc*=fe,$e.bc*=fe,re[Re++]=$e)}x(ee)/Re<.022&&(U=!1);for(var xe,ve,ne,Me=0;Me<Re-1;++Me)re[Me].fw=Me+1,re[Me+1].bk=Me,U&&(re[Me].cnt=Math.sqrt(re[Me].cnt));for(U&&(re[Me].cnt=Math.sqrt(re[Me].cnt)),Me=0;Me<Re;++Me){b(re,Me);var Te=re[Me].err;for(ve=++ye[0];1<ve&&(ne=ve>>1,!(re[xe=ye[ne]].err<=Te));ve=ne)ye[ve]=xe;ye[ve]=Me}var Pe,Ae=Re-ee;for(Me=0;Me<Ae;){for(;;){var je=ye[1];if((Pe=re[je]).tm>=Pe.mtm&&re[Pe.nn].mtm<=Pe.tm)break;for(Pe.mtm==pe?je=ye[1]=ye[ye[0]--]:(b(re,je),Pe.tm=Me),Te=re[je].err,ve=1;(ne=ve+ve)<=ye[0]&&(ne<ye[0]&&re[ye[ne]].err>re[ye[ne+1]].err&&ne++,!(Te<=re[xe=ye[ne]].err));ve=ne)ye[ve]=xe;ye[ve]=je}var Ue=re[Pe.nn],Ge=Pe.cnt,_e=Ue.cnt,fe=1/(Ge+_e);K&&(Pe.ac=fe*(Ge*Pe.ac+_e*Ue.ac)),Pe.rc=fe*(Ge*Pe.rc+_e*Ue.rc),Pe.gc=fe*(Ge*Pe.gc+_e*Ue.gc),Pe.bc=fe*(Ge*Pe.bc+_e*Ue.bc),Pe.cnt+=Ue.cnt,Pe.mtm=++Me,re[Ue.bk].fw=Ue.fw,re[Ue.fw].bk=Ue.bk,Ue.mtm=pe}let We=[];for(Me=0;;0){let $e=g(Math.round(re[Me].rc),0,255),et=g(Math.round(re[Me].gc),0,255),ht=g(Math.round(re[Me].bc),0,255),Be=255;K&&(Be=g(Math.round(re[Me].ac),0,255),B&&(Ke=typeof B=="number"?B:127,Be=Be<=Ke?0:255),Y&&Be<=ce&&($e=et=ht=Z,Be=0));var Ke=K?[$e,et,ht,Be]:[$e,et,ht];if(function(rt,Ye){for(let ue=0;ue<rt.length;ue++){var ge=rt[ue],de=ge[0]===Ye[0]&&ge[1]===Ye[1]&&ge[2]===Ye[2],ge=!(4<=ge.length&&4<=Ye.length)||ge[3]===Ye[3];if(de&&ge)return!0}return!1}(We,Ke)||We.push(Ke),(Me=re[Me].fw)==0)break}return We},snapColorsToPalette:()=>function(J,ee,V=5){if(J.length&&ee.length){var q=J.map(U=>U.slice(0,3)),Y=V*V,Z=J[0].length;for(let U=0;U<ee.length;U++){let K=ee[U];K=K.length<Z?[K[0],K[1],K[2],255]:K.length>Z?K.slice(0,3):K.slice();var B=I(q,K.slice(0,3),T),ce=B[0],B=B[1];0<B&&B<=Y&&(J[ce]=K)}}}};for(s in u)a(l,s,{get:u[s],enumerable:!0});var h={signature:"GIF",version:"89a",trailer:59,extensionIntroducer:33,applicationExtensionLabel:255,graphicControlExtensionLabel:249,imageSeparator:44,signatureSize:3,versionSize:3,globalColorTableFlagMask:128,colorResolutionMask:112,sortFlagMask:8,globalColorTableSizeMask:7,applicationIdentifierSize:8,applicationAuthCodeSize:3,disposalMethodMask:28,userInputFlagMask:2,transparentColorFlagMask:1,localColorTableFlagMask:128,interlaceFlagMask:64,idSortFlagMask:32,localColorTableSizeMask:7};function p(J=256){let ee=0,V=new Uint8Array(J);return{get buffer(){return V.buffer},reset(){ee=0},bytesView(){return V.subarray(0,ee)},bytes(){return V.slice(0,ee)},writeByte(Y){q(ee+1),V[ee]=Y,ee++},writeBytes(Y,Z=0,ce=Y.length){q(ee+ce);for(let B=0;B<ce;B++)V[ee++]=Y[B+Z]},writeBytesView(Y,Z=0,ce=Y.byteLength){q(ee+ce),V.set(Y.subarray(Z,Z+ce),ee),ee+=ce}};function q(Y){var Z=V.length;if(!(Y<=Z)){Y=Math.max(Y,Z*(Z<1048576?2:1.125)>>>0),Z!=0&&(Y=Math.max(Y,256));const ce=V;V=new Uint8Array(Y),0<ee&&V.set(ce.subarray(0,ee),0)}}}var c=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],f=function(J,ee,V,K,Y=p(512),Z=new Uint8Array(256),ce=new Int32Array(5003),B=new Int32Array(5003)){var U=ce.length,K=Math.max(2,K);Z.fill(0),B.fill(0),ce.fill(-1);let re=0,ae=0;var pe=K+1;const ye=pe;let Re=!1,Me=ye,xe=(1<<Me)-1;var ve=1<<pe-1;const ne=1+ve;let Te=2+ve,Pe=0,Ae=V[0],je=0;for(let Ke=U;Ke<65536;Ke*=2)++je;je=8-je,Y.writeByte(K),We(ve);var Ue=V.length;for(let Ke=1;Ke<Ue;Ke++)e:{var Ge=V[Ke],_e=(Ge<<12)+Ae;let $e=Ge<<je^Ae;if(ce[$e]===_e)Ae=B[$e];else{for(var fe=$e===0?1:U-$e;0<=ce[$e];)if(($e-=fe)<0&&($e+=U),ce[$e]===_e){Ae=B[$e];break e}We(Ae),Ae=Ge,Te<4096?(B[$e]=Te++,ce[$e]=_e):(ce.fill(-1),Te=2+ve,Re=!0,We(ve))}}return We(Ae),We(ne),Y.writeByte(0),Y.bytesView();function We(Ke){for(re&=c[ae],0<ae?re|=Ke<<ae:re=Ke,ae+=Me;8<=ae;)Z[Pe++]=255&re,254<=Pe&&(Y.writeByte(Pe),Y.writeBytesView(Z,0,Pe),Pe=0),re>>=8,ae-=8;if((Te>xe||Re)&&(Re?(Me=ye,xe=(1<<Me)-1,Re=!1):(++Me,xe=Me===12?1<<Me:(1<<Me)-1)),Ke==ne){for(;0<ae;)Z[Pe++]=255&re,254<=Pe&&(Y.writeByte(Pe),Y.writeBytesView(Z,0,Pe),Pe=0),re>>=8,ae-=8;0<Pe&&(Y.writeByte(Pe),Y.writeBytesView(Z,0,Pe),Pe=0)}}};function m(J,ee,V){return J<<8&63488|ee<<2&992|V>>3}function y(J,ee,V,q){return J>>4|240&ee|(240&V)<<4|(240&q)<<8}function v(J,ee,V){return J>>4<<8|240&ee|V>>4}function g(J,ee,V){return J<ee?ee:V<J?V:J}function x(J){return J*J}function b(J,ee,V){var q=0,Y=1e100;const Z=J[ee];for(var ce=Z.cnt,B=Z.ac,U=Z.rc,K=Z.gc,re=Z.bc,ae=Z.fw;ae!=0;ae=J[ae].fw){var pe,ye=J[ae],Re=ye.cnt,Re=ce*Re/(ce+Re);Y<=Re||(pe=0,Y<=(pe+=Re*x(ye.rc-U))||Y<=(pe+=Re*x(ye.gc-K))||Y<=(pe+=Re*x(ye.bc-re))||(Y=pe,q=ae))}Z.err=Y,Z.nn=q}function w(){return{ac:0,rc:0,gc:0,bc:0,cnt:0,nn:0,fw:0,bk:0,tm:0,mtm:0,err:0}}function T(J,ee){for(var V=0,q=0;q<J.length;q++){var Y=J[q]-ee[q];V+=Y*Y}return V}function R(J,ee){return 1<ee?Math.round(J/ee)*ee:J}function C(J){return J*J}function P(J,ee,V=T){let q=1/0,Y=-1;for(let ce=0;ce<J.length;ce++){var Z=V(ee,J[ce]);Z<q&&(q=Z,Y=ce)}return Y}function I(J,ee,V=T){let q=1/0,Y=-1;for(let ce=0;ce<J.length;ce++){var Z=V(ee,J[ce]);Z<q&&(q=Z,Y=ce)}return[Y,q]}function D(J={}){const{initialCapacity:ee=4096,auto:V=!0}=J,q=p(ee),Y=new Uint8Array(256),Z=new Int32Array(5003),ce=new Int32Array(5003);let B=!1;return{reset(){q.reset(),B=!1},finish(){q.writeByte(h.trailer)},bytes(){return q.bytes()},bytesView(){return q.bytesView()},get buffer(){return q.buffer},get stream(){return q},writeHeader:U,writeFrame(K,re,ae,Ae={}){var{transparent:ye=!1,transparentIndex:Re=0,delay:fe=0,palette:Me=null,repeat:Ue=0,colorDepth:xe=8,dispose:ve=-1}=Ae;let ne=!1;if(V?B||(ne=!0,U(),B=!0):ne=!!Ae.first,re=Math.max(0,Math.floor(re)),ae=Math.max(0,Math.floor(ae)),ne){if(!Me)throw new Error("First frame must include a { palette } option");var[Ae,Ge,Pe,_e,je=8]=[q,re,ae,Me,xe];_e=W(_e.length)-1,je=128|je-1<<4|_e,N(Ae,Ge),N(Ae,Pe),Ae.writeBytes([je,0,0]),j(q,Me),0<=Ue&&(_e=q,Ge=Ue,_e.writeByte(33),_e.writeByte(255),_e.writeByte(11),O(_e,"NETSCAPE2.0"),_e.writeByte(3),_e.writeByte(1),N(_e,Ge),_e.writeByte(0))}var Te,Pe=Math.round(fe/10),Ae=q,je=ve,Ue=Pe,Ge=ye,_e=Re,fe=(Ae.writeByte(33),Ae.writeByte(249),Ae.writeByte(4),_e<0&&(_e=0,Ge=!1),Ge=Ge?(Te=1,2):Te=0,0<=je&&(Ge=7&je),Ge<<=2,Ae.writeByte(0|Ge|Te),N(Ae,Ue),Ae.writeByte(_e||0),Ae.writeByte(0),!!Me&&!ne);ve=q,ye=re,Re=ae,Te=fe?Me:null,ve.writeByte(44),N(ve,0),N(ve,0),N(ve,ye),N(ve,Re),Te?(ye=W(Te.length)-1,ve.writeByte(128|ye)):ve.writeByte(0),fe&&j(q,Me),[Ue,Ae,Re,ye,ve=8,fe,Me,K]=[q,K,re,ae,xe,Y,Z,ce],f(Re,ye,Ae,ve,Ue,fe,Me,K)}};function U(){O(q,"GIF89a")}}function j(J,ee){var V=1<<W(ee.length);for(let q=0;q<V;q++){let Y=[0,0,0];q<ee.length&&(Y=ee[q]),J.writeByte(Y[0]),J.writeByte(Y[1]),J.writeByte(Y[2])}}function N(J,ee){J.writeByte(255&ee),J.writeByte(ee>>8&255)}function O(J,ee){for(var V=0;V<ee.length;V++)J.writeByte(ee.charCodeAt(V))}function W(J){return Math.max(Math.ceil(Math.log2(J)),1)}var X=D},{}],251:[function(r,i,o){o.read=function(s,a,l,u,b){var p,c,f=8*b-u-1,m=(1<<f)-1,y=m>>1,v=-7,g=l?b-1:0,x=l?-1:1,b=s[a+g];for(g+=x,p=b&(1<<-v)-1,b>>=-v,v+=f;0<v;p=256*p+s[a+g],g+=x,v-=8);for(c=p&(1<<-v)-1,p>>=-v,v+=u;0<v;c=256*c+s[a+g],g+=x,v-=8);if(p===0)p=1-y;else{if(p===m)return c?NaN:1/0*(b?-1:1);c+=Math.pow(2,u),p-=y}return(b?-1:1)*c*Math.pow(2,p-u)},o.write=function(s,a,l,u,h,w){var c,f,m=8*w-h-1,y=(1<<m)-1,v=y>>1,g=h===23?Math.pow(2,-24)-Math.pow(2,-77):0,x=u?0:w-1,b=u?1:-1,w=a<0||a===0&&1/a<0?1:0;for(a=Math.abs(a),isNaN(a)||a===1/0?(f=isNaN(a)?1:0,c=y):(c=Math.floor(Math.log(a)/Math.LN2),a*(u=Math.pow(2,-c))<1&&(c--,u*=2),2<=(a+=1<=c+v?g/u:g*Math.pow(2,1-v))*u&&(c++,u/=2),y<=c+v?(f=0,c=y):1<=c+v?(f=(a*u-1)*Math.pow(2,h),c+=v):(f=a*Math.pow(2,v-1)*Math.pow(2,h),c=0));8<=h;s[l+x]=255&f,x+=b,f/=256,h-=8);for(c=c<<h|f,m+=h;0<m;s[l+x]=255&c,x+=b,c/=256,m-=8);s[l+x-b]|=128*w}},{}],252:[function(r,i,o){var s;function a(de,ge){return de.b===ge.b&&de.a===ge.a}function l(de,ge){return de.b<ge.b||de.b===ge.b&&de.a<=ge.a}function u(de,ge,ue){var Se=ge.b-de.b,De=ue.b-ge.b;return 0<Se+De?Se<De?ge.a-de.a+Se/(Se+De)*(de.a-ue.a):ge.a-ue.a+De/(Se+De)*(ue.a-de.a):0}function h(de,ge,ue){var Se=ge.b-de.b,De=ue.b-ge.b;return 0<Se+De?(ge.a-ue.a)*Se+(ge.a-de.a)*De:0}function p(de,ge){return de.a<ge.a||de.a===ge.a&&de.b<=ge.b}function c(de,ge,ue){var Se=ge.a-de.a,De=ue.a-ge.a;return 0<Se+De?Se<De?ge.b-de.b+Se/(Se+De)*(de.b-ue.b):ge.b-ue.b+De/(Se+De)*(ue.b-de.b):0}function f(de,ge,ue){var Se=ge.a-de.a,De=ue.a-ge.a;return 0<Se+De?(ge.b-ue.b)*Se+(ge.b-de.b)*De:0}function m(de,ge,ue,Se){return(de=de<0?0:de)<=(ue=ue<0?0:ue)?ue===0?(ge+Se)/2:ge+de/(de+ue)*(Se-ge):Se+ue/(de+ue)*(ge-Se)}function y(de){var ge=w(de.b);return R(ge,de.c),R(ge.b,de.c),C(ge,de.a),ge}function v(de,ge){var ue=!1,Se=!1;de!==ge&&(ge.a!==de.a&&(Se=!0,I(ge.a,de.a)),ge.d!==de.d&&(ue=!0,D(ge.d,de.d)),T(ge,de),Se||(R(ge,de.a),de.a.c=de),ue||(C(ge,de.d),de.d.a=de))}function g(de){var ge=de.b,ue=!1;de.d!==de.b.d&&(ue=!0,D(de.d,de.b.d)),de.c===de?I(de.a,null):(de.b.d.a=de.b.e,de.a.c=de.c,T(de,de.b.e),ue||C(de,de.d)),ge.c===ge?(I(ge.a,null),D(ge.d,null)):(de.d.a=ge.b.e,ge.a.c=ge.c,T(ge,ge.b.e)),P(de)}function x(de){var ge=w(de),ue=ge.b;return T(ge,de.e),ge.a=de.b.a,R(ue,ge.a),ge.d=ue.d=de.d,ge=ge.b,T(de.b,de.b.b.e),T(de.b,ge),de.b.a=ge.a,ge.b.a.c=ge.b,ge.b.d=de.b.d,ge.f=de.f,ge.b.f=de.b.f,ge}function b(de,ge){var ue=!1,Se=w(de),De=Se.b;return ge.d!==de.d&&(ue=!0,D(ge.d,de.d)),T(Se,de.e),T(De,ge),Se.a=de.b.a,De.a=ge.a,Se.d=De.d=de.d,de.d.a=De,ue||C(Se,de.d),Se}function w(de){var ge=new Pe,ue=new Pe,Se=de.b.h;return(((ue.h=Se).b.h=ge).h=de).b.h=ue,ge.b=ue,((ge.c=ge).e=ue).b=ge,(ue.c=ue).e=ge}function T(de,ge){var ue=de.c,Se=ge.c;ue.b.e=ge,(Se.b.e=de).c=Se,ge.c=ue}function R(de,ge){var ue=ge.f,Se=new je(ge,ue);for(ue.e=Se,ue=(ge.f=Se).c=de;ue.a=Se,(ue=ue.c)!==de;);}function C(de,ge){var ue=ge.d,Se=new Te(ge,ue);for(ue.b=Se,(ge.d=Se).a=de,Se.c=ge.c,ue=de;ue.d=Se,(ue=ue.e)!==de;);}function P(de){var ge=de.h;de=de.b.h,(ge.b.h=de).b.h=ge}function I(de,ge){for(var ue=de.c,Se=ue;Se.a=ge,(Se=Se.c)!==ue;);ue=de.f,((Se=de.e).f=ue).e=Se}function D(de,ge){for(var ue=de.a,Se=ue;Se.d=ge,(Se=Se.e)!==ue;);ue=de.d,((Se=de.b).d=ue).b=Se}function j(de){var ge=0;return Math.abs(de[1])>Math.abs(de[0])&&(ge=1),ge=Math.abs(de[2])>Math.abs(de[ge])?2:ge}function N(de,ge){de.f+=ge.f,de.b.f+=ge.b.f}function O(de,ge,ue){return de=de.a,ge=ge.a,ue=ue.a,ge.b.a===de?ue.b.a===de?l(ge.a,ue.a)?h(ue.b.a,ge.a,ue.a)<=0:0<=h(ge.b.a,ue.a,ge.a):h(ue.b.a,de,ue.a)<=0:ue.b.a===de?0<=h(ge.b.a,de,ge.a):(ge=u(ge.b.a,de,ge.a),(de=u(ue.b.a,de,ue.a))<=ge)}function W(de){de.a.i=null;var ge=de.e;ge.a.c=ge.c,ge.c.a=ge.a,de.e=null}function X(de,ge){g(de.a),de.c=!1,(de.a=ge).i=de}function J(de){for(var ge=de.a.a;(de=Ye(de)).a.a===ge;);return de.c&&(X(de,ge=b(rt(de).a.b,de.a.e)),de=Ye(de)),de}function ee(de,ge,ue){var Se=new Be;return Se.a=ue,Se.e=Re(de.f,ge.e,Se),ue.i=Se}function V(de,ge){switch(de.s){case 100130:return(1&ge)!=0;case 100131:return ge!==0;case 100132:return 0<ge;case 100133:return ge<0;case 100134:return 2<=ge||ge<=-2}return!1}function q(de){var ge=de.a,ue=ge.d;ue.c=de.d,ue.a=ge,W(de)}function Y(de,ge,ue){for(ge=(de=ge).a;de!==ue;){de.c=!1;var Se=rt(de),De=Se.a;if(De.a!==ge.a){if(!Se.c){q(de);break}X(Se,De=b(ge.c.b,De.b))}ge.c!==De&&(v(De.b.e,De),v(ge,De)),q(de),ge=Se.a,de=Se}return ge}function Z(de,ge,ue,Se,De,be){for(var ke=!0;ee(de,ge,ue.b),(ue=ue.c)!==Se;);for(De===null&&(De=rt(ge).a.b.c);(ue=(Se=rt(ge)).a.b).a===De.a;)ue.c!==De&&(v(ue.b.e,ue),v(De.b.e,ue)),Se.f=ge.f-ue.f,Se.d=V(de,Se.f),ge.b=!0,!ke&&K(de,ge)&&(N(ue,De),W(ge),g(De)),ke=!1,ge=Se,De=ue;ge.b=!0,be&&ae(de,ge)}function ce(de,ge,ue,Se,De){var be=[ge.g[0],ge.g[1],ge.g[2]];ge.d=null,ge.d=de.o&&de.o(be,ue,Se,de.c)||null,ge.d===null&&(De?de.n||(ne(de,100156),de.n=!0):ge.d=ue[0])}function B(de,ge,ue){var Se=[null,null,null,null];Se[0]=ge.a.d,Se[1]=ue.a.d,ce(de,ge.a,Se,[.5,.5,0,0],!1),v(ge,ue)}function U(de,ge,ue,Se,De){var be=Math.abs(ge.b-de.b)+Math.abs(ge.a-de.a),ke=Math.abs(ue.b-de.b)+Math.abs(ue.a-de.a),ot=De+1;Se[De]=.5*ke/(be+ke),Se[ot]=.5*be/(be+ke),de.g[0]+=Se[De]*ge.g[0]+Se[ot]*ue.g[0],de.g[1]+=Se[De]*ge.g[1]+Se[ot]*ue.g[1],de.g[2]+=Se[De]*ge.g[2]+Se[ot]*ue.g[2]}function K(de,ge){var ue=rt(ge),Se=ge.a,De=ue.a;if(l(Se.a,De.a)){if(0<h(De.b.a,Se.a,De.a))return;if(a(Se.a,De.a)){if(Se.a!==De.a){var ue=de.e,be=Se.a.h;if(0<=be){var ke=(ue=ue.b).d,ot=ue.e,Ce=ue.c,it=Ce[be];ke[it]=ke[ue.a],(Ce[ke[it]]=it)<=--ue.a&&(it<=1||l(ot[ke[it>>1]],ot[ke[it]])?et:ht)(ue,it),ot[be]=null,Ce[be]=ue.b,ue.b=be}else for(ue.c[-(be+1)]=null;0<ue.a&&ue.c[ue.d[ue.a-1]]===null;)--ue.a;B(de,De.b.e,Se)}}else x(De.b),v(Se,De.b.e),ge.b=ue.b=!0}else{if(h(Se.b.a,De.a,Se.a)<0)return;Ye(ge).b=ge.b=!0,x(Se.b),v(De.b.e,Se)}return 1}function re(de,ge){var ue=rt(ge),Se=ge.a,De=ue.a,be=Se.a,ke=De.a,ot=Se.b.a,Ce=De.b.a,it=new je;if(h(ot,de.a,be),h(Ce,de.a,ke),!(be===ke||Math.min(be.a,ot.a)>Math.max(ke.a,Ce.a))){if(l(be,ke)){if(0<h(Ce,be,ke))return}else if(h(ot,ke,be)<0)return;var Xe,ut,bt=ot,vt=be,Rt=Ce,Dt=ke;if(l(bt,vt)||(Xe=bt,bt=vt,vt=Xe),l(Rt,Dt)||(Xe=Rt,Rt=Dt,Dt=Xe),l(bt,Rt)||(Xe=bt,bt=Rt,Rt=Xe,Xe=vt,vt=Dt,Dt=Xe),l(Rt,vt)?l(vt,Dt)?((Xe=u(bt,Rt,vt))+(ut=u(Rt,vt,Dt))<0&&(Xe=-Xe,ut=-ut),it.b=m(Xe,Rt.b,ut,vt.b)):((Xe=h(bt,Rt,vt))+(ut=-h(bt,Dt,vt))<0&&(Xe=-Xe,ut=-ut),it.b=m(Xe,Rt.b,ut,Dt.b)):it.b=(Rt.b+vt.b)/2,p(bt,vt)||(Xe=bt,bt=vt,vt=Xe),p(Rt,Dt)||(Xe=Rt,Rt=Dt,Dt=Xe),p(bt,Rt)||(Xe=bt,bt=Rt,Rt=Xe,Xe=vt,vt=Dt,Dt=Xe),p(Rt,vt)?p(vt,Dt)?((Xe=c(bt,Rt,vt))+(ut=c(Rt,vt,Dt))<0&&(Xe=-Xe,ut=-ut),it.a=m(Xe,Rt.a,ut,vt.a)):((Xe=f(bt,Rt,vt))+(ut=-f(bt,Dt,vt))<0&&(Xe=-Xe,ut=-ut),it.a=m(Xe,Rt.a,ut,Dt.a)):it.a=(Rt.a+vt.a)/2,l(it,de.a)&&(it.b=de.a.b,it.a=de.a.a),bt=l(be,ke)?be:ke,l(bt,it)&&(it.b=bt.b,it.a=bt.a),a(it,be)||a(it,ke))return K(de,ge),0;if(!a(ot,de.a)&&0<=h(ot,de.a,it)||!a(Ce,de.a)&&h(Ce,de.a,it)<=0){if(Ce===de.a)x(Se.b),v(De.b,Se),Se=rt(ge=J(ge)).a,Y(de,rt(ge),ue),Z(de,ge,Se.b.e,Se,Se,!0);else{if(ot!==de.a)return 0<=h(ot,de.a,it)&&(Ye(ge).b=ge.b=!0,x(Se.b),Se.a.b=de.a.b,Se.a.a=de.a.a),void(h(Ce,de.a,it)<=0&&(ge.b=ue.b=!0,x(De.b),De.a.b=de.a.b,De.a.a=de.a.a));for(x(De.b),v(Se.e,De.b.e),ke=(be=ue=ge).a.b.a;(be=Ye(be)).a.b.a===ke;);be=rt(ge=be).a.b.c,ue.a=De.b.e,Z(de,ge,(De=Y(de,ue,null)).c,Se.b.c,be,!0)}return 1}x(Se.b),x(De.b),v(De.b.e,Se),Se.a.b=it.b,Se.a.a=it.a,Se.a.h=Ge(de.e,Se.a),Se=Se.a,De=[0,0,0,0],it=[be.d,ot.d,ke.d,Ce.d],Se.g[0]=Se.g[1]=Se.g[2]=0,U(Se,be,ot,De,0),U(Se,ke,Ce,De,2),ce(de,Se,it,De,!0),Ye(ge).b=ge.b=ue.b=!0}}function ae(de,ge){for(var ue=rt(ge);;){for(;ue.b;)ue=rt(ge=ue);if(!ge.b&&((ge=Ye(ue=ge))===null||!ge.b))break;ge.b=!1;var Se=ge.a,De=ue.a;if(be=Se.b.a!==De.b.a)e:{var be,ke=rt(be=ge),ot=be.a,Ce=ke.a,it=void 0;if(l(ot.b.a,Ce.b.a)){if(h(ot.b.a,Ce.b.a,ot.a)<0){be=!1;break e}Ye(be).b=be.b=!0,it=x(ot),v(Ce.b,it),it.d.c=be.d}else{if(0<h(Ce.b.a,ot.b.a,Ce.a)){be=!1;break e}be.b=ke.b=!0,it=x(Ce),v(ot.e,Ce.b),it.b.d.c=be.d}be=!0}if(be&&(ue.c?(W(ue),g(De),De=(ue=rt(ge)).a):ge.c&&(W(ge),g(Se),Se=(ge=Ye(ue)).a)),Se.a!==De.a){if(Se.b.a===De.b.a||ge.c||ue.c||Se.b.a!==de.a&&De.b.a!==de.a)K(de,ge);else if(re(de,ge))break}Se.a===De.a&&Se.b.a===De.b.a&&(N(De,Se),W(ge),g(Se),ge=Ye(ue))}}function pe(de,ge){var ue=new Be,Se=y(de.b);Se.a.b=4e150,Se.a.a=ge,Se.b.a.b=-4e150,Se.b.a.a=ge,de.a=Se.b.a,ue.a=Se,ue.f=0,ue.d=!1,ue.c=!1,ue.h=!0,ue.b=!1,Se=Re(Se=de.f,Se.a,ue),ue.e=Se}function ye(de){this.a=new Me,this.b=de,this.c=O}function Re(de,ge,ue){for(;(ge=ge.c).b!==null&&!de.c(de.b,ge.b,ue););return de=new Me(ue,ge.a,ge),ge.a.c=de,ge.a=de}function Me(de,ge,ue){this.b=de||null,this.a=ge||this,this.c=ue||this}function xe(){this.d=0,this.p=this.b=this.q=null,this.j=[0,0,0],this.s=100130,this.n=!1,this.o=this.a=this.e=this.f=null,this.m=!1,this.c=this.r=this.i=this.k=this.l=this.h=null}function ve(de,ge){if(de.d!==ge)for(;de.d!==ge;)if(de.d<ge)switch(de.d){case 0:ne(de,100151),de.u(null);break;case 1:ne(de,100152),de.t()}else switch(de.d){case 2:ne(de,100154),de.v();break;case 1:ne(de,100153),de.w()}}function ne(de,ge){de.p&&de.p(ge,de.c)}function Te(de,ge){this.b=de||this,this.d=ge||this,this.a=null,this.c=!1}function Pe(){(this.h=this).i=this.d=this.a=this.e=this.c=this.b=null,this.f=0}function Ae(){this.c=new je,this.a=new Te,this.b=new Pe,this.d=new Pe,this.b.b=this.d,this.d.b=this.b}function je(de,ge){this.e=de||this,this.f=ge||this,this.d=this.c=null,this.g=[0,0,0],this.h=this.a=this.b=0}function Ue(){this.c=[],this.d=null,this.a=0,this.e=!1,this.b=new fe}function Ge(de,ge){var ue,Se,De;return de.e?(2*(Se=++(ue=de.b).a)>ue.f&&(ue.f*=2,ue.c=We(ue.c,ue.f+1)),ue.b===0?De=Se:(De=ue.b,ue.b=ue.c[ue.b]),ue.e[De]=ge,ue.c[De]=Se,ue.d[Se]=De,ue.h&&ht(ue,Se),De):(ue=de.a++,de.c[ue]=ge,-(ue+1))}function _e(de){if(de.a===0)return $e(de.b);var ge=de.c[de.d[de.a-1]];if(de.b.a!==0&&l(Ke(de.b),ge))return $e(de.b);for(;--de.a,0<de.a&&de.c[de.d[de.a-1]]===null;);return ge}function fe(){this.d=We([0],33),this.e=[null,null],this.c=[0,0],this.a=0,this.f=32,this.b=0,this.h=!1,this.d[1]=1}function We(de,ge){for(var ue=Array(ge),Se=0;Se<de.length;Se++)ue[Se]=de[Se];for(;Se<ge;Se++)ue[Se]=0;return ue}function Ke(de){return de.e[de.d[1]]}function $e(de){var ge=de.d,ue=de.e,Se=de.c,De=ge[1],be=ue[De];return 0<de.a&&(ge[1]=ge[de.a],Se[ge[1]]=1,ue[De]=null,Se[De]=de.b,de.b=De,0<--de.a&&et(de,1)),be}function et(de,ge){for(var ue=de.d,Se=de.e,De=de.c,be=ge,ke=ue[be];;){var ot=be<<1,Ce=(ot<de.a&&l(Se[ue[ot+1]],Se[ue[ot]])&&(ot+=1),ue[ot]);if(ot>de.a||l(Se[ke],Se[Ce])){De[ue[be]=ke]=be;break}De[ue[be]=Ce]=be,be=ot}}function ht(de,ge){for(var ue=de.d,Se=de.e,De=de.c,be=ge,ke=ue[be];;){var ot=be>>1,Ce=ue[ot];if(ot==0||l(Se[Ce],Se[ke])){De[ue[be]=ke]=be;break}De[ue[be]=Ce]=be,be=ot}}function Be(){this.e=this.a=null,this.f=0,this.c=this.b=this.h=this.d=!1}function rt(de){return de.e.c.b}function Ye(de){return de.e.a.b}(s=xe.prototype).x=function(){ve(this,0)},s.B=function(de,ge){switch(de){case 100142:return;case 100140:switch(ge){case 100130:case 100131:case 100132:case 100133:case 100134:return void(this.s=ge)}break;case 100141:return void(this.m=!!ge);default:return void ne(this,100900)}ne(this,100901)},s.y=function(de){switch(de){case 100142:return 0;case 100140:return this.s;case 100141:return this.m;default:ne(this,100900)}return!1},s.A=function(de,ge,ue){this.j[0]=de,this.j[1]=ge,this.j[2]=ue},s.z=function(de,ge){var ue=ge||null;switch(de){case 100100:case 100106:this.h=ue;break;case 100104:case 100110:this.l=ue;break;case 100101:case 100107:this.k=ue;break;case 100102:case 100108:this.i=ue;break;case 100103:case 100109:this.p=ue;break;case 100105:case 100111:this.o=ue;break;case 100112:this.r=ue;break;default:ne(this,100900)}},s.C=function(de,ge){var ue=!1,Se=[0,0,0];ve(this,2);for(var De=0;De<3;++De){var be=de[De];be<-1e150&&(be=-1e150,ue=!0),1e150<be&&(be=1e150,ue=!0),Se[De]=be}ue&&ne(this,100155),(ue=this.q)===null?v(ue=y(this.b),ue.b):(x(ue),ue=ue.e),ue.a.d=ge,ue.a.g[0]=Se[0],ue.a.g[1]=Se[1],ue.a.g[2]=Se[2],ue.f=1,ue.b.f=-1,this.q=ue},s.u=function(de){ve(this,0),this.d=1,this.b=new Ae,this.c=de},s.t=function(){ve(this,1),this.d=2,this.q=null},s.v=function(){ve(this,2),this.d=1},s.w=function(){ve(this,1),this.d=0;var de,ge,ue=this.j[0],Se=this.j[1],De=this.j[2],be=!1,ke=[ue,Se,De];if(ue===0&&Se===0&&De===0){for(var Se=[-2e150,-2e150,-2e150],ot=[2e150,2e150,2e150],De=[],Ce=[],ue=(be=this.b.c).e;ue!==be;ue=ue.e)for(var it=0;it<3;++it){var Xe=ue.g[it];Xe<ot[it]&&(ot[it]=Xe,Ce[it]=ue),Xe>Se[it]&&(Se[it]=Xe,De[it]=ue)}if(Se[1]-ot[1]>Se[ue=0]-ot[0]&&(ue=1),ot[ue=Se[2]-ot[2]>Se[ue]-ot[ue]?2:ue]>=Se[ue])ke[0]=0,ke[1]=0,ke[2]=1;else{for(ot=Ce[ue],De=De[ue],Ce=[Se=0,0,0],ot=[ot.g[0]-De.g[0],ot.g[1]-De.g[1],ot.g[2]-De.g[2]],it=[0,0,0],ue=be.e;ue!==be;ue=ue.e)it[0]=ue.g[0]-De.g[0],it[1]=ue.g[1]-De.g[1],it[2]=ue.g[2]-De.g[2],Ce[0]=ot[1]*it[2]-ot[2]*it[1],Ce[1]=ot[2]*it[0]-ot[0]*it[2],Ce[2]=ot[0]*it[1]-ot[1]*it[0],Se<(Xe=Ce[0]*Ce[0]+Ce[1]*Ce[1]+Ce[2]*Ce[2])&&(Se=Xe,ke[0]=Ce[0],ke[1]=Ce[1],ke[2]=Ce[2]);Se<=0&&(ke[0]=ke[1]=ke[2]=0,ke[j(ot)]=1)}be=!0}for(Ce=j(ke),ue=this.b.c,Se=(Ce+1)%3,De=(Ce+2)%3,Ce=0<ke[Ce]?1:-1,ke=ue.e;ke!==ue;ke=ke.e)ke.b=ke.g[Se],ke.a=Ce*ke.g[De];if(be){for(ke=0,ue=(be=this.b.a).b;ue!==be;ue=ue.b)if(!((Se=ue.a).f<=0))for(;ke+=(Se.a.b-Se.b.a.b)*(Se.a.a+Se.b.a.a),(Se=Se.e)!==ue.a;);if(ke<0)for(be=(ke=this.b.c).e;be!==ke;be=be.e)be.a=-be.a}for(this.n=!1,ke=this.b.b,ue=ke.h;ue!==ke;ue=be)be=ue.h,Se=ue.e,a(ue.a,ue.b.a)&&ue.e.e!==ue&&(B(this,Se,ue),g(ue),Se=(ue=Se).e),Se.e===ue&&(Se!==ue&&(Se!==be&&Se!==be.b||(be=be.h),g(Se)),ue!==be&&ue!==be.b||(be=be.h),g(ue));for(this.e=ke=new Ue,be=this.b.c,ue=be.e;ue!==be;ue=ue.e)ue.h=Ge(ke,ue);var ut=ke;ut.d=[];for(var bt=0;bt<ut.a;bt++)ut.d[bt]=bt;ut.d.sort(function(Dt){return function(yr,Bt){return l(Dt[yr],Dt[Bt])?1:-1}}(ut.c)),ut.e=!0;for(var vt=ut.b,Rt=vt.a;1<=Rt;--Rt)et(vt,Rt);for(vt.h=!0,this.f=new ye(this),pe(this,-4e150),pe(this,4e150);(ke=_e(this.e))!==null;){for(;;){e:if((ue=this.e).a===0)be=Ke(ue.b);else if(be=ue.c[ue.d[ue.a-1]],ue.b.a!==0&&l(ue=Ke(ue.b),be)){be=ue;break e}if(be===null||!a(be,ke))break;be=_e(this.e),B(this,ke.c,be.c)}(function Dt(yr,Bt){for(var Ut,Yt=(yr.a=Bt).c;Yt.i===null;)if((Yt=Yt.c)===Bt.c){var Yt=yr,Pt=Bt;(br=new Be).a=Pt.c.b;for(var cr=(Wt=Yt.f).a;(cr=cr.a).b!==null&&!Wt.c(Wt.b,br,cr.b););var Wt,Jt,$t=rt(Wt=cr.b),br=Wt.a,cr=$t.a;return void(h(br.b.a,Pt,br.a)===0?a((br=Wt.a).a,Pt)||a(br.b.a,Pt)||(x(br.b),Wt.c&&(g(br.c),Wt.c=!1),v(Pt.c,br),Dt(Yt,Pt)):(Jt=l(cr.b.a,br.b.a)?Wt:$t,$t=void 0,Wt.d||Jt.c?($t=Jt===Wt?b(Pt.c.b,br.e):b(cr.b.c.b,Pt.c).b,Jt.c?X(Jt,$t):((Wt=ee(br=Yt,Wt,$t)).f=Ye(Wt).f+Wt.a.f,Wt.d=V(br,Wt.f)),Dt(Yt,Pt)):Z(Yt,Wt,Pt.c,Pt.c,null,!0)))}Wt=(br=rt(Yt=J(Yt.i))).a,(br=Y(yr,br,null)).c===Wt?(br=(Wt=br).c,cr=rt(Yt),$t=Yt.a,Jt=cr.a,Ut=!1,$t.b.a!==Jt.b.a&&re(yr,Yt),a($t.a,yr.a)&&(v(br.b.e,$t),br=rt(Yt=J(Yt)).a,Y(yr,rt(Yt),cr),Ut=!0),a(Jt.a,yr.a)&&(v(Wt,Jt.b.e),Wt=Y(yr,cr,null),Ut=!0),Ut?Z(yr,Yt,Wt.c,br,br,!0):(Pt=l(Jt.a,$t.a)?Jt.b.e:$t,Z(yr,Yt,Pt=b(Wt.c.b,Pt),Pt.c,Pt.c,!1),Pt.b.i.c=!0,ae(yr,Yt))):Z(yr,Yt,br.c,Wt,Wt,!0)})(this,ke)}for(this.a=this.f.a.a.b.a.a,ke=0;(be=this.f.a.a.b)!==null;)be.h||++ke,W(be);for(this.f=null,(ke=this.e).b=null,ke.d=null,this.e=ke.c=null,ke=this.b,ue=ke.a.b;ue!==ke.a;ue=be)be=ue.b,(ue=ue.a).e.e===ue&&(N(ue.c,ue),g(ue));if(!this.n){if(ke=this.b,this.m)for(ue=ke.b.h;ue!==ke.b;ue=be)be=ue.h,ue.b.d.c!==ue.d.c?ue.f=ue.d.c?1:-1:g(ue);else for(ue=ke.a.b;ue!==ke.a;ue=be)if(be=ue.b,ue.c){for(ue=ue.a;l(ue.b.a,ue.a);ue=ue.c.b);for(;l(ue.a,ue.b.a);ue=ue.e);for(Se=ue.c.b,De=void 0;ue.e!==Se;)if(l(ue.b.a,Se.a)){for(;Se.e!==ue&&(l((ge=Se.e).b.a,ge.a)||h(Se.a,Se.b.a,Se.e.b.a)<=0);)Se=(De=b(Se.e,Se)).b;Se=Se.c.b}else{for(;Se.e!==ue&&(l((de=ue.c.b).a,de.b.a)||0<=h(ue.b.a,ue.a,ue.c.b.a));)ue=(De=b(ue,ue.c.b)).b;ue=ue.e}for(;Se.e.e!==ue;)De=b(Se.e,Se),Se=De.b}if(this.h||this.i||this.k||this.l)if(this.m){for(be=(ke=this.b).a.b;be!==ke.a;be=be.b)if(be.c){for(this.h&&this.h(2,this.c),ue=be.a;this.k&&this.k(ue.a.d,this.c),(ue=ue.e)!==be.a;);this.i&&this.i(this.c)}}else{for(ke=this.b,be=!!this.l,ue=!1,Se=-1,De=ke.a.d;De!==ke.a;De=De.d)if(De.c)for(ue||(this.h&&this.h(4,this.c),ue=!0),Ce=De.a;be&&(ot=Ce.b.d.c?0:1,Se!==ot&&(Se=ot,this.l&&this.l(!!Se,this.c))),this.k&&this.k(Ce.a.d,this.c),(Ce=Ce.e)!==De.a;);ue&&this.i&&this.i(this.c)}if(this.r){for(ke=this.b,ue=ke.a.b;ue!==ke.a;ue=be)if(be=ue.b,!ue.c){for(De=(Se=ue.a).e,Ce=void 0;De=(Ce=De).e,(Ce.d=null)===Ce.b.d&&(Ce.c===Ce?I(Ce.a,null):(Ce.a.c=Ce.c,T(Ce,Ce.b.e)),(ot=Ce.b).c===ot?I(ot.a,null):(ot.a.c=ot.c,T(ot,ot.b.e)),P(Ce)),Ce!==Se;);Se=ue.d,((ue=ue.b).d=Se).b=ue}return this.r(this.b),void(this.c=this.b=null)}}this.b=this.c=null},this.libtess={GluTesselator:xe,windingRule:{GLU_TESS_WINDING_ODD:100130,GLU_TESS_WINDING_NONZERO:100131,GLU_TESS_WINDING_POSITIVE:100132,GLU_TESS_WINDING_NEGATIVE:100133,GLU_TESS_WINDING_ABS_GEQ_TWO:100134},primitiveType:{GL_LINE_LOOP:2,GL_TRIANGLES:4,GL_TRIANGLE_STRIP:5,GL_TRIANGLE_FAN:6},errorType:{GLU_TESS_MISSING_BEGIN_POLYGON:100151,GLU_TESS_MISSING_END_POLYGON:100153,GLU_TESS_MISSING_BEGIN_CONTOUR:100152,GLU_TESS_MISSING_END_CONTOUR:100154,GLU_TESS_COORD_TOO_LARGE:100155,GLU_TESS_NEED_COMBINE_CALLBACK:100156},gluEnum:{GLU_TESS_MESH:100112,GLU_TESS_TOLERANCE:100142,GLU_TESS_WINDING_RULE:100140,GLU_TESS_BOUNDARY_ONLY:100141,GLU_INVALID_ENUM:100900,GLU_INVALID_VALUE:100901,GLU_TESS_BEGIN:100100,GLU_TESS_VERTEX:100101,GLU_TESS_END:100102,GLU_TESS_ERROR:100103,GLU_TESS_EDGE_FLAG:100104,GLU_TESS_COMBINE:100105,GLU_TESS_BEGIN_DATA:100106,GLU_TESS_VERTEX_DATA:100107,GLU_TESS_END_DATA:100108,GLU_TESS_ERROR_DATA:100109,GLU_TESS_EDGE_FLAG_DATA:100110,GLU_TESS_COMBINE_DATA:100111}},xe.prototype.gluDeleteTess=xe.prototype.x,xe.prototype.gluTessProperty=xe.prototype.B,xe.prototype.gluGetTessProperty=xe.prototype.y,xe.prototype.gluTessNormal=xe.prototype.A,xe.prototype.gluTessCallback=xe.prototype.z,xe.prototype.gluTessVertex=xe.prototype.C,xe.prototype.gluTessBeginPolygon=xe.prototype.u,xe.prototype.gluTessBeginContour=xe.prototype.t,xe.prototype.gluTessEndContour=xe.prototype.v,xe.prototype.gluTessEndPolygon=xe.prototype.w,i!==void 0&&(i.exports=this.libtess)},{}],253:[function(r,i,o){function s(l,u,h,p){var c=0,f=(p=p===void 0?{}:p).loop===void 0?null:p.loop,m=p.palette===void 0?null:p.palette;if(u<=0||h<=0||65535<u||65535<h)throw new Error("Width/Height invalid.");function y(C){if(C=C.length,C<2||256<C||C&C-1)throw new Error("Invalid code/color length, must be power of 2 and 2 .. 256.");return C}l[c++]=71,l[c++]=73,l[c++]=70,l[c++]=56,l[c++]=57,l[c++]=97;var v=0,g=0;if(m!==null){for(var x=y(m);x>>=1;)++v;if(x=1<<v,--v,p.background!==void 0){if(x<=(g=p.background))throw new Error("Background index out of range.");if(g===0)throw new Error("Background index explicitly passed as 0.")}}if(l[c++]=255&u,l[c++]=u>>8&255,l[c++]=255&h,l[c++]=h>>8&255,l[c++]=(m!==null?128:0)|v,l[c++]=g,l[c++]=0,m!==null)for(var b=0,w=m.length;b<w;++b){var T=m[b];l[c++]=T>>16&255,l[c++]=T>>8&255,l[c++]=255&T}if(f!==null){if(f<0||65535<f)throw new Error("Loop count invalid.");l[c++]=33,l[c++]=255,l[c++]=11,l[c++]=78,l[c++]=69,l[c++]=84,l[c++]=83,l[c++]=67,l[c++]=65,l[c++]=80,l[c++]=69,l[c++]=50,l[c++]=46,l[c++]=48,l[c++]=3,l[c++]=1,l[c++]=255&f,l[c++]=f>>8&255,l[c++]=0}var R=!1;this.addFrame=function(C,P,I,D,j,N){if(R===!0&&(--c,R=!1),N=N===void 0?{}:N,C<0||P<0||65535<C||65535<P)throw new Error("x/y invalid.");if(I<=0||D<=0||65535<I||65535<D)throw new Error("Width/Height invalid.");if(j.length<I*D)throw new Error("Not enough pixels for the frame size.");var O=!0,W=N.palette;if(W==null&&(O=!1,W=m),W==null)throw new Error("Must supply either a local or global palette.");for(var J=y(W),X=0;J>>=1;)++X;var J=1<<X,ee=N.delay===void 0?0:N.delay,V=N.disposal===void 0?0:N.disposal;if(V<0||3<V)throw new Error("Disposal out of range.");var q=!1,Y=0;if(N.transparent!==void 0&&N.transparent!==null&&(q=!0,(Y=N.transparent)<0||J<=Y))throw new Error("Transparent color index.");if(V===0&&!q&&ee===0||(l[c++]=33,l[c++]=249,l[c++]=4,l[c++]=V<<2|(q===!0?1:0),l[c++]=255&ee,l[c++]=ee>>8&255,l[c++]=Y,l[c++]=0),l[c++]=44,l[c++]=255&C,l[c++]=C>>8&255,l[c++]=255&P,l[c++]=P>>8&255,l[c++]=255&I,l[c++]=I>>8&255,l[c++]=255&D,l[c++]=D>>8&255,l[c++]=O===!0?128|X-1:0,O===!0)for(var Z=0,ce=W.length;Z<ce;++Z){var B=W[Z];l[c++]=B>>16&255,l[c++]=B>>8&255,l[c++]=255&B}return c=function(U,K,re,ae){U[K++]=re;var pe=K++,ye=1<<re,Re=ye-1,Me=1+ye,xe=1+Me,ve=re+1,ne=0,Te=0;function Pe($e){for(;$e<=ne;)U[K++]=255&Te,Te>>=8,ne-=8,K===pe+256&&(U[pe]=255,pe=K++)}function Ae($e){Te|=$e<<ne,ne+=ve,Pe(8)}var je=ae[0]&Re,Ue={};Ae(ye);for(var Ge=1,_e=ae.length;Ge<_e;++Ge){var fe=ae[Ge]&Re,We=je<<8|fe,Ke=Ue[We];if(Ke===void 0){for(Te|=je<<ne,ne+=ve;8<=ne;)U[K++]=255&Te,Te>>=8,ne-=8,K===pe+256&&(U[pe]=255,pe=K++);xe===4096?(Ae(ye),xe=1+Me,ve=re+1,Ue={}):(1<<ve<=xe&&++ve,Ue[We]=xe++),je=fe}else je=Ke}return Ae(je),Ae(Me),Pe(1),pe+1===K?U[pe]=0:(U[pe]=K-pe-1,U[K++]=0),K}(l,c,X<2?2:X,j)},this.end=function(){return R===!1&&(l[c++]=59,R=!0),c},this.getOutputBuffer=function(){return l},this.setOutputBuffer=function(C){l=C},this.getOutputBufferPosition=function(){return c},this.setOutputBufferPosition=function(C){c=C}}function a(l,u,h,p){for(var c=l[u++],f=1<<c,m=1+f,y=1+m,v=c+1,g=(1<<v)-1,x=0,b=0,w=0,T=l[u++],R=new Int32Array(4096),C=null;;){for(;x<16&&T!==0;)b|=l[u++]<<x,x+=8,T===1?T=l[u++]:--T;if(x<v)break;var P=b&g;if(b>>=v,x-=v,P==f)y=1+m,g=(1<<(v=c+1))-1,C=null;else{if(P==m)break;for(var I=P<y?P:C,D=0,j=I;f<j;)j=R[j]>>8,++D;var N=j;if(p<w+D+(I!==P?1:0))return void console.log("Warning, gif stream longer than expected.");h[w++]=N;var O=w+=D;for(I!==P&&(h[w++]=N),j=I;D--;)j=R[j],h[--O]=255&j,j>>=8;C!==null&&y<4096&&(R[y++]=C<<8|N,g+1<=y&&v<12&&(++v,g=g<<1|1)),C=P}}w!==p&&console.log("Warning, gif stream shorter than expected.")}try{o.GifWriter=s,o.GifReader=function(l){var u=0;if(l[u++]!==71||l[u++]!==73||l[u++]!==70||l[u++]!==56||(l[u++]+1&253)!=56||l[u++]!==97)throw new Error("Invalid GIF 87a/89a header.");var h=l[u++]|l[u++]<<8,p=l[u++]|l[u++]<<8,c=l[u++],f=1<<1+(7&c),m=(l[u++],l[u++],null),y=null,v=(c>>7&&(m=u,u+=3*(y=f)),!0),g=[],x=0,b=null,w=0,T=null;for(this.width=h,this.height=p;v&&u<l.length;)switch(l[u++]){case 33:switch(l[u++]){case 255:if(l[u]!==11||l[u+1]==78&&l[u+2]==69&&l[u+3]==84&&l[u+4]==83&&l[u+5]==67&&l[u+6]==65&&l[u+7]==80&&l[u+8]==69&&l[u+9]==50&&l[u+10]==46&&l[u+11]==48&&l[u+12]==3&&l[u+13]==1&&l[u+16]==0)u+=14,T=l[u++]|l[u++]<<8,u++;else for(u+=12;;){if(!(0<=(C=l[u++])))throw Error("Invalid block size");if(C===0)break;u+=C}break;case 249:if(l[u++]!==4||l[u+4]!==0)throw new Error("Invalid graphics extension block.");var R=l[u++],x=l[u++]|l[u++]<<8,b=l[u++];!(1&R)&&(b=null),w=R>>2&7,u++;break;case 254:for(;;){if(!(0<=(C=l[u++])))throw Error("Invalid block size");if(C===0)break;u+=C}break;default:throw new Error("Unknown graphic control label: 0x"+l[u-1].toString(16))}break;case 44:var C,P=l[u++]|l[u++]<<8,I=l[u++]|l[u++]<<8,D=l[u++]|l[u++]<<8,j=l[u++]|l[u++]<<8,ee=l[u++],N=ee>>6&1,O=1<<1+(7&ee),W=m,X=y,J=!1,ee=(ee>>7&&(J=!0,W=u,u+=3*(X=O)),u);for(u++;;){if(!(0<=(C=l[u++])))throw Error("Invalid block size");if(C===0)break;u+=C}g.push({x:P,y:I,width:D,height:j,has_local_palette:J,palette_offset:W,palette_size:X,data_offset:ee,data_length:u-ee,transparent_index:b,interlaced:!!N,delay:x,disposal:w});break;case 59:v=!1;break;default:throw new Error("Unknown gif block: 0x"+l[u-1].toString(16))}this.numFrames=function(){return g.length},this.loopCount=function(){return T},this.frameInfo=function(V){if(V<0||V>=g.length)throw new Error("Frame index out of range.");return g[V]},this.decodeAndBlitFrameBGRA=function(V,q){for(var V=this.frameInfo(V),Y=V.width*V.height,Z=new Uint8Array(Y),ce=(a(l,V.data_offset,Z,Y),V.palette_offset),B=V.transparent_index,U=(B===null&&(B=256),V.width),K=h-U,re=U,ae=4*(V.y*h+V.x),pe=4*((V.y+V.height)*h+V.x),ye=ae,Re=4*K,Me=(V.interlaced===!0&&(Re+=4*h*7),8),xe=0,ve=Z.length;xe<ve;++xe){var ne,Te,Pe=Z[xe];re===0&&(re=U,pe<=(ye+=Re)&&(Re=4*K+4*h*(Me-1),ye=ae+(U+K)*(Me<<1),Me>>=1)),Pe===B?ye+=4:(ne=l[ce+3*Pe],Te=l[ce+3*Pe+1],Pe=l[ce+3*Pe+2],q[ye++]=Pe,q[ye++]=Te,q[ye++]=ne,q[ye++]=255),--re}},this.decodeAndBlitFrameRGBA=function(V,q){for(var V=this.frameInfo(V),Y=V.width*V.height,Z=new Uint8Array(Y),ce=(a(l,V.data_offset,Z,Y),V.palette_offset),B=V.transparent_index,U=(B===null&&(B=256),V.width),K=h-U,re=U,ae=4*(V.y*h+V.x),pe=4*((V.y+V.height)*h+V.x),ye=ae,Re=4*K,Me=(V.interlaced===!0&&(Re+=4*h*7),8),xe=0,ve=Z.length;xe<ve;++xe){var ne,Te,Pe=Z[xe];re===0&&(re=U,pe<=(ye+=Re)&&(Re=4*K+4*h*(Me-1),ye=ae+(U+K)*(Me<<1),Me>>=1)),Pe===B?ye+=4:(ne=l[ce+3*Pe],Te=l[ce+3*Pe+1],Pe=l[ce+3*Pe+2],q[ye++]=ne,q[ye++]=Te,q[ye++]=Pe,q[ye++]=255),--re}}}}catch{}},{}],254:[function(r,i,o){(function(s){var a,l;a=this,l=function(u){function h($){if(this==null)throw TypeError();var k,F=String(this),z=F.length,$=$?Number($):0;if(!(($=$!=$?0:$)<0||z<=$))return 55296<=(k=F.charCodeAt($))&&k<=56319&&$+1<z&&56320<=(z=F.charCodeAt($+1))&&z<=57343?1024*(k-55296)+z-56320+65536:k}String.prototype.codePointAt||((p=function(){try{var E={},k=Object.defineProperty,F=k(E,E,E)&&k}catch{}return F}())?p(String.prototype,"codePointAt",{value:h,configurable:!0,writable:!0}):String.prototype.codePointAt=h);var p,c=0,f=-3;function m(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}function y(E,k){this.source=E,this.sourceIndex=0,this.tag=0,this.bitcount=0,this.dest=k,this.destLen=0,this.ltree=new m,this.dtree=new m}var v=new m,g=new m,x=new Uint8Array(30),b=new Uint16Array(30),w=new Uint8Array(30),T=new Uint16Array(30),R=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),C=new m,P=new Uint8Array(320);function I(E,k,F,z){for(var $,se=0;se<F;++se)E[se]=0;for(se=0;se<30-F;++se)E[se+F]=se/F|0;for($=z,se=0;se<30;++se)k[se]=$,$+=1<<E[se]}var D=new Uint16Array(16);function j(E,k,F,z){for(var $,se=0;se<16;++se)E.table[se]=0;for(se=0;se<z;++se)E.table[k[F+se]]++;for(se=$=E.table[0]=0;se<16;++se)D[se]=$,$+=E.table[se];for(se=0;se<z;++se)k[F+se]&&(E.trans[D[k[F+se]]++]=se)}function N(E,k,F){if(!k)return F;for(;E.bitcount<24;)E.tag|=E.source[E.sourceIndex++]<<E.bitcount,E.bitcount+=8;var z=E.tag&65535>>>16-k;return E.tag>>>=k,E.bitcount-=k,z+F}function O(E,k){for(;E.bitcount<24;)E.tag|=E.source[E.sourceIndex++]<<E.bitcount,E.bitcount+=8;for(var F=0,z=0,$=0,se=E.tag;z=2*z+(1&se),se>>>=1,F+=k.table[++$],0<=(z-=k.table[$]););return E.tag=se,E.bitcount-=$,k.trans[F+z]}function W(E,k,F){for(;;){var z=O(E,k);if(z===256)return c;if(z<256)E.dest[E.destLen++]=z;else for(var $,se=N(E,x[z-=257],b[z]),z=O(E,F),le=$=E.destLen-N(E,w[z],T[z]);le<$+se;++le)E.dest[E.destLen++]=E.dest[le]}}for(var X=v,J=g,ee=0;ee<7;++ee)X.table[ee]=0;for(X.table[7]=24,X.table[8]=152,X.table[9]=112,ee=0;ee<24;++ee)X.trans[ee]=256+ee;for(ee=0;ee<144;++ee)X.trans[24+ee]=ee;for(ee=0;ee<8;++ee)X.trans[168+ee]=280+ee;for(ee=0;ee<112;++ee)X.trans[176+ee]=144+ee;for(ee=0;ee<5;++ee)J.table[ee]=0;for(J.table[5]=32,ee=0;ee<32;++ee)J.trans[ee]=ee;I(x,b,4,3),I(w,T,2,1),x[28]=0,b[28]=258;var V=function(E,k){var F,z,$,se=new y(E,k);do{switch($=void 0,(z=se).bitcount--||(z.tag=z.source[z.sourceIndex++],z.bitcount=7),$=1&z.tag,z.tag>>>=1,z=$,N(se,2,0)){case 0:F=function(ft){for(var ar,wr;8<ft.bitcount;)ft.sourceIndex--,ft.bitcount-=8;if((ar=256*ft.source[ft.sourceIndex+1]+ft.source[ft.sourceIndex])!==(65535&~(256*ft.source[ft.sourceIndex+3]+ft.source[ft.sourceIndex+2])))return f;for(ft.sourceIndex+=4,wr=ar;wr;--wr)ft.dest[ft.destLen++]=ft.source[ft.sourceIndex++];return ft.bitcount=0,c}(se);break;case 1:F=W(se,v,g);break;case 2:xt=pt=Et=dt=le=He=nt=at=Je=Ie=Le=we=void 0;for(var le,we=se,Le=se.ltree,Ie=se.dtree,Je=N(we,5,257),at=N(we,5,1),nt=N(we,4,4),He=0;He<19;++He)P[He]=0;for(He=0;He<nt;++He){var Et=N(we,3,0);P[R[He]]=Et}for(j(C,P,0,19),le=0;le<Je+at;){var pt=O(we,C);switch(pt){case 16:for(var xt=P[le-1],dt=N(we,2,3);dt;--dt)P[le++]=xt;break;case 17:for(dt=N(we,3,3);dt;--dt)P[le++]=0;break;case 18:for(dt=N(we,7,11);dt;--dt)P[le++]=0;break;default:P[le++]=pt}}j(Le,P,0,Je),j(Ie,P,Je,at),F=W(se,se.ltree,se.dtree);break;default:F=f}if(F!==c)throw new Error("Data error")}while(!z);return se.destLen<se.dest.length?typeof se.dest.slice=="function"?se.dest.slice(0,se.destLen):se.dest.subarray(0,se.destLen):se.dest};function q(E,k,F,z,$){return Math.pow(1-$,3)*E+3*Math.pow(1-$,2)*$*k+3*(1-$)*Math.pow($,2)*F+Math.pow($,3)*z}function Y(){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN}function Z(){this.commands=[],this.fill="black",this.stroke=null,this.strokeWidth=1}function ce(E){throw new Error(E)}function B(E,k){E||ce(k)}Y.prototype.isEmpty=function(){return isNaN(this.x1)||isNaN(this.y1)||isNaN(this.x2)||isNaN(this.y2)},Y.prototype.addPoint=function(E,k){typeof E=="number"&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=E,this.x2=E),E<this.x1&&(this.x1=E),E>this.x2&&(this.x2=E)),typeof k=="number"&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=k,this.y2=k),k<this.y1&&(this.y1=k),k>this.y2&&(this.y2=k))},Y.prototype.addX=function(E){this.addPoint(E,null)},Y.prototype.addY=function(E){this.addPoint(null,E)},Y.prototype.addBezier=function(E,k,F,z,$,se,le,we){var Le=[E,k],Ie=[F,z],Je=[$,se],at=[le,we];this.addPoint(E,k),this.addPoint(le,we);for(var nt=0;nt<=1;nt++){var He,Et=6*Le[nt]-12*Ie[nt]+6*Je[nt],pt=-3*Le[nt]+9*Ie[nt]-9*Je[nt]+3*at[nt],xt=3*Ie[nt]-3*Le[nt];pt==0?Et==0||0<(He=-xt/Et)&&He<1&&(nt===0&&this.addX(q(Le[nt],Ie[nt],Je[nt],at[nt],He)),nt===1&&this.addY(q(Le[nt],Ie[nt],Je[nt],at[nt],He))):(He=Math.pow(Et,2)-4*xt*pt)<0||(0<(xt=(-Et+Math.sqrt(He))/(2*pt))&&xt<1&&(nt===0&&this.addX(q(Le[nt],Ie[nt],Je[nt],at[nt],xt)),nt===1&&this.addY(q(Le[nt],Ie[nt],Je[nt],at[nt],xt))),0<(xt=(-Et-Math.sqrt(He))/(2*pt))&&xt<1&&(nt===0&&this.addX(q(Le[nt],Ie[nt],Je[nt],at[nt],xt)),nt===1&&this.addY(q(Le[nt],Ie[nt],Je[nt],at[nt],xt))))}},Y.prototype.addQuad=function(E,k,F,z,$,se){F=E+2/3*(F-E),z=k+2/3*(z-k),this.addBezier(E,k,F,z,F+1/3*($-E),z+1/3*(se-k),$,se)},Z.prototype.moveTo=function(E,k){this.commands.push({type:"M",x:E,y:k})},Z.prototype.lineTo=function(E,k){this.commands.push({type:"L",x:E,y:k})},Z.prototype.curveTo=Z.prototype.bezierCurveTo=function(E,k,F,z,$,se){this.commands.push({type:"C",x1:E,y1:k,x2:F,y2:z,x:$,y:se})},Z.prototype.quadTo=Z.prototype.quadraticCurveTo=function(E,k,F,z){this.commands.push({type:"Q",x1:E,y1:k,x:F,y:z})},Z.prototype.close=Z.prototype.closePath=function(){this.commands.push({type:"Z"})},Z.prototype.extend=function(E){var k;if(E.commands)E=E.commands;else if(E instanceof Y)return k=E,this.moveTo(k.x1,k.y1),this.lineTo(k.x2,k.y1),this.lineTo(k.x2,k.y2),this.lineTo(k.x1,k.y2),void this.close();Array.prototype.push.apply(this.commands,E)},Z.prototype.getBoundingBox=function(){for(var E=new Y,k=0,F=0,z=0,$=0,se=0;se<this.commands.length;se++){var le=this.commands[se];switch(le.type){case"M":E.addPoint(le.x,le.y),k=z=le.x,F=$=le.y;break;case"L":E.addPoint(le.x,le.y),z=le.x,$=le.y;break;case"Q":E.addQuad(z,$,le.x1,le.y1,le.x,le.y),z=le.x,$=le.y;break;case"C":E.addBezier(z,$,le.x1,le.y1,le.x2,le.y2,le.x,le.y),z=le.x,$=le.y;break;case"Z":z=k,$=F;break;default:throw new Error("Unexpected path command "+le.type)}}return E.isEmpty()&&E.addPoint(0,0),E},Z.prototype.draw=function(E){E.beginPath();for(var k=0;k<this.commands.length;k+=1){var F=this.commands[k];F.type==="M"?E.moveTo(F.x,F.y):F.type==="L"?E.lineTo(F.x,F.y):F.type==="C"?E.bezierCurveTo(F.x1,F.y1,F.x2,F.y2,F.x,F.y):F.type==="Q"?E.quadraticCurveTo(F.x1,F.y1,F.x,F.y):F.type==="Z"&&E.closePath()}this.fill&&(E.fillStyle=this.fill,E.fill()),this.stroke&&(E.strokeStyle=this.stroke,E.lineWidth=this.strokeWidth,E.stroke())},Z.prototype.toPathData=function(E){function k(){for(var se=arguments,le="",we=0;we<arguments.length;we+=1){var Le=se[we];0<=Le&&0<we&&(le+=" "),le+=(Le=Le,Math.round(Le)===Le?""+Math.round(Le):Le.toFixed(E))}return le}E=E!==void 0?E:2;for(var F="",z=0;z<this.commands.length;z+=1){var $=this.commands[z];$.type==="M"?F+="M"+k($.x,$.y):$.type==="L"?F+="L"+k($.x,$.y):$.type==="C"?F+="C"+k($.x1,$.y1,$.x2,$.y2,$.x,$.y):$.type==="Q"?F+="Q"+k($.x1,$.y1,$.x,$.y):$.type==="Z"&&(F+="Z")}return F},Z.prototype.toSVG=function(E){var k=(k='<path d="')+this.toPathData(E)+'"';return this.fill&&this.fill!=="black"&&(this.fill===null?k+=' fill="none"':k+=' fill="'+this.fill+'"'),this.stroke&&(k+=' stroke="'+this.stroke+'" stroke-width="'+this.strokeWidth+'"'),k+="/>"},Z.prototype.toDOMElement=function(k){var k=this.toPathData(k),F=document.createElementNS("http://www.w3.org/2000/svg","path");return F.setAttribute("d",k),F};var U={fail:ce,argument:B,assert:B},K={},re={},ae={};function pe(E){return function(){return E}}re.BYTE=function(E){return U.argument(0<=E&&E<=255,"Byte value should be between 0 and 255."),[E]},ae.BYTE=pe(1),re.CHAR=function(E){return[E.charCodeAt(0)]},ae.CHAR=pe(1),re.CHARARRAY=function(E){for(var k=[],F=0;F<E.length;F+=1)k[F]=E.charCodeAt(F);return k},ae.CHARARRAY=function(E){return E.length},re.USHORT=function(E){return[E>>8&255,255&E]},ae.USHORT=pe(2),re.SHORT=function(E){return[(E=32768<=E?-(65536-E):E)>>8&255,255&E]},ae.SHORT=pe(2),re.UINT24=function(E){return[E>>16&255,E>>8&255,255&E]},ae.UINT24=pe(3),re.ULONG=function(E){return[E>>24&255,E>>16&255,E>>8&255,255&E]},ae.ULONG=pe(4),re.LONG=function(E){return[(E=2147483648<=E?-(4294967296-E):E)>>24&255,E>>16&255,E>>8&255,255&E]},ae.LONG=pe(4),re.FIXED=re.ULONG,ae.FIXED=ae.ULONG,re.FWORD=re.SHORT,ae.FWORD=ae.SHORT,re.UFWORD=re.USHORT,ae.UFWORD=ae.USHORT,re.LONGDATETIME=function(E){return[0,0,0,0,E>>24&255,E>>16&255,E>>8&255,255&E]},ae.LONGDATETIME=pe(8),re.TAG=function(E){return U.argument(E.length===4,"Tag should be exactly 4 ASCII characters."),[E.charCodeAt(0),E.charCodeAt(1),E.charCodeAt(2),E.charCodeAt(3)]},ae.TAG=pe(4),re.Card8=re.BYTE,ae.Card8=ae.BYTE,re.Card16=re.USHORT,ae.Card16=ae.USHORT,re.OffSize=re.BYTE,ae.OffSize=ae.BYTE,re.SID=re.USHORT,ae.SID=ae.USHORT,re.NUMBER=function(E){return-107<=E&&E<=107?[E+139]:108<=E&&E<=1131?[247+((E-=108)>>8),255&E]:-1131<=E&&E<=-108?[251+((E=-E-108)>>8),255&E]:-32768<=E&&E<=32767?re.NUMBER16(E):re.NUMBER32(E)},ae.NUMBER=function(E){return re.NUMBER(E).length},re.NUMBER16=function(E){return[28,E>>8&255,255&E]},ae.NUMBER16=pe(3),re.NUMBER32=function(E){return[29,E>>24&255,E>>16&255,E>>8&255,255&E]},ae.NUMBER32=pe(5),re.REAL=function(E){for(var k=E.toString(),F=/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/.exec(k),z=(F&&(F=parseFloat("1e"+((F[2]?+F[2]:0)+F[1].length)),k=(Math.round(E*F)/F).toString()),""),$=0,se=k.length;$<se;$+=1){var le=k[$];z+=le==="e"?k[++$]==="-"?"c":"b":le==="."?"a":le==="-"?"e":le}for(var we=[30],Le=0,Ie=(z+=1&z.length?"f":"ff").length;Le<Ie;Le+=2)we.push(parseInt(z.substr(Le,2),16));return we},ae.REAL=function(E){return re.REAL(E).length},re.NAME=re.CHARARRAY,ae.NAME=ae.CHARARRAY,re.STRING=re.CHARARRAY,ae.STRING=ae.CHARARRAY,K.UTF8=function(E,k,F){for(var z=[],$=F,se=0;se<$;se++,k+=1)z[se]=E.getUint8(k);return String.fromCharCode.apply(null,z)},K.UTF16=function(E,k,F){for(var z=[],$=F/2,se=0;se<$;se++,k+=2)z[se]=E.getUint16(k);return String.fromCharCode.apply(null,z)},re.UTF16=function(E){for(var k=[],F=0;F<E.length;F+=1){var z=E.charCodeAt(F);k[k.length]=z>>8&255,k[k.length]=255&z}return k},ae.UTF16=function(E){return 2*E.length};var ye,Re={"x-mac-croatian":"","x-mac-cyrillic":"","x-mac-gaelic":"","x-mac-greek":"","x-mac-icelandic":"","x-mac-inuit":"","x-mac-ce":"",macintosh:"","x-mac-romanian":"","x-mac-turkish":""},Me=(K.MACSTRING=function(E,k,F,z){var $=Re[z];if($!==void 0){for(var se="",le=0;le<F;le++){var we=E.getUint8(k+le);se+=we<=127?String.fromCharCode(we):$[127&we]}return se}},typeof WeakMap=="function"&&new WeakMap);function xe(E){return-128<=E&&E<=127}re.MACSTRING=function(E,k){var F=function(le){if(!ye)for(var we in ye={},Re)ye[we]=new String(we);var Le=ye[le];if(Le!==void 0){if(Me){var Ie=Me.get(Le);if(Ie!==void 0)return Ie}var Je=Re[le];if(Je!==void 0){for(var at={},nt=0;nt<Je.length;nt++)at[Je.charCodeAt(nt)]=nt+128;return Me&&Me.set(Le,at),at}}}(k);if(F!==void 0){for(var z=[],$=0;$<E.length;$++){var se=E.charCodeAt($);if(128<=se&&(se=F[se])===void 0)return;z[$]=se}return z}},ae.MACSTRING=function(E,k){return E=re.MACSTRING(E,k),E!==void 0?E.length:0},re.VARDELTAS=function(E){for(var z=0,k=[];z<E.length;)var F=E[z],z=(F===0?function($,se,le){for(var we=0,Le=$.length;se<Le&&we<64&&$[se]===0;)++se,++we;return le.push(128|we-1),se}:-128<=F&&F<=127?function($,se,le){for(var we=0,Le=$.length,Ie=se;Ie<Le&&we<64;){var Je=$[Ie];if(!xe(Je)||Je===0&&Ie+1<Le&&$[Ie+1]===0)break;++Ie,++we}le.push(we-1);for(var at=se;at<Ie;++at)le.push($[at]+256&255);return Ie}:function($,se,le){for(var we=0,Le=$.length,Ie=se;Ie<Le&&we<64;){var Je=$[Ie];if(Je===0||xe(Je)&&Ie+1<Le&&xe($[Ie+1]))break;++Ie,++we}le.push(64|we-1);for(var at=se;at<Ie;++at){var nt=$[at];le.push(nt+65536>>8&255,nt+256&255)}return Ie})(E,z,k);return k},re.INDEX=function(E){for(var k=1,F=[k],z=[],$=0;$<E.length;$+=1){var se=re.OBJECT(E[$]);Array.prototype.push.apply(z,se),k+=se.length,F.push(k)}if(z.length===0)return[0,0];for(var le=[],we=1+Math.floor(Math.log(k)/Math.log(2))/8|0,Le=[void 0,re.BYTE,re.USHORT,re.UINT24,re.ULONG][we],Ie=0;Ie<F.length;Ie+=1){var Je=Le(F[Ie]);Array.prototype.push.apply(le,Je)}return Array.prototype.concat(re.Card16(E.length),re.OffSize(we),le,z)},ae.INDEX=function(E){return re.INDEX(E).length},re.DICT=function(E){for(var k=[],F=Object.keys(E),z=F.length,$=0;$<z;$+=1){var se=parseInt(F[$],0),le=E[se];k=(k=k.concat(re.OPERAND(le.value,le.type))).concat(re.OPERATOR(se))}return k},ae.DICT=function(E){return re.DICT(E).length},re.OPERATOR=function(E){return E<1200?[E]:[12,E-1200]},re.OPERAND=function(E,k){var F=[];if(Array.isArray(k))for(var z=0;z<k.length;z+=1)U.argument(E.length===k.length,"Not enough arguments given for type"+k),F=F.concat(re.OPERAND(E[z],k[z]));else if(k==="SID")F=F.concat(re.NUMBER(E));else if(k==="offset")F=F.concat(re.NUMBER32(E));else if(k==="number")F=F.concat(re.NUMBER(E));else{if(k!=="real")throw new Error("Unknown operand type "+k);F=F.concat(re.REAL(E))}return F},re.OP=re.BYTE,ae.OP=ae.BYTE;var ve=typeof WeakMap=="function"&&new WeakMap;function ne(E,k,F){for(var z=0;z<k.length;z+=1){var $=k[z];this[$.name]=$.value}if(this.tableName=E,this.fields=k,F)for(var se=Object.keys(F),le=0;le<se.length;le+=1){var we=se[le],Le=F[we];this[we]!==void 0&&(this[we]=Le)}}function Te(E,k,F){F===void 0&&(F=k.length);var z=new Array(k.length+1);z[0]={name:E+"Count",type:"USHORT",value:F};for(var $=0;$<k.length;$++)z[$+1]={name:E+$,type:"USHORT",value:k[$]};return z}function Pe(E,k,F){var z=k.length,$=new Array(z+1);$[0]={name:E+"Count",type:"USHORT",value:z};for(var se=0;se<z;se++)$[se+1]={name:E+se,type:"TABLE",value:F(k[se],se)};return $}function Ae(E,k,F){var z=k.length,$=[];$[0]={name:E+"Count",type:"USHORT",value:z};for(var se=0;se<z;se++)$=$.concat(F(k[se],se));return $}function je(E){E.format===1?ne.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:1}].concat(Te("glyph",E.glyphs))):U.assert(!1,"Can't create coverage table format 2 yet.")}function Ue(E){ne.call(this,"scriptListTable",Ae("scriptRecord",E,function(k,F){var z=k.script,$=z.defaultLangSys;return U.assert(!!$,"Unable to write GSUB: script "+k.tag+" has no default language system."),[{name:"scriptTag"+F,type:"TAG",value:k.tag},{name:"script"+F,type:"TABLE",value:new ne("scriptTable",[{name:"defaultLangSys",type:"TABLE",value:new ne("defaultLangSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:$.reqFeatureIndex}].concat(Te("featureIndex",$.featureIndexes)))}].concat(Ae("langSys",z.langSysRecords,function(se,le){var we=se.langSys;return[{name:"langSysTag"+le,type:"TAG",value:se.tag},{name:"langSys"+le,type:"TABLE",value:new ne("langSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:we.reqFeatureIndex}].concat(Te("featureIndex",we.featureIndexes)))}]})))}]}))}function Ge(E){ne.call(this,"featureListTable",Ae("featureRecord",E,function(k,F){var z=k.feature;return[{name:"featureTag"+F,type:"TAG",value:k.tag},{name:"feature"+F,type:"TABLE",value:new ne("featureTable",[{name:"featureParams",type:"USHORT",value:z.featureParams}].concat(Te("lookupListIndex",z.lookupListIndexes)))}]}))}function _e(E,k){ne.call(this,"lookupListTable",Pe("lookup",E,function(F){var z=k[F.lookupType];return U.assert(!!z,"Unable to write GSUB lookup type "+F.lookupType+" tables."),new ne("lookupTable",[{name:"lookupType",type:"USHORT",value:F.lookupType},{name:"lookupFlag",type:"USHORT",value:F.lookupFlag}].concat(Pe("subtable",F.subtables,z)))}))}re.CHARSTRING=function(E){if(ve){var k=ve.get(E);if(k!==void 0)return k}for(var se=[],F=E.length,z=0;z<F;z+=1)var $=E[z],se=se.concat(re[$.type]($.value));return ve&&ve.set(E,se),se},ae.CHARSTRING=function(E){return re.CHARSTRING(E).length},re.OBJECT=function(E){var k=re[E.type];return U.argument(k!==void 0,"No encoding function for type "+E.type),k(E.value)},ae.OBJECT=function(E){var k=ae[E.type];return U.argument(k!==void 0,"No sizeOf function for type "+E.type),k(E.value)},re.TABLE=function(E){for(var k=[],F=E.fields.length,z=[],$=[],se=0;se<F;se+=1){var le=E.fields[se],Le=re[le.type],we=(U.argument(Le!==void 0,"No encoding function for field type "+le.type+" ("+le.name+")"),E[le.name]),Le=Le(we=we===void 0?le.value:we);le.type==="TABLE"?($.push(k.length),k=k.concat([0,0]),z.push(Le)):k=k.concat(Le)}for(var Ie=0;Ie<z.length;Ie+=1){var Je=$[Ie],at=k.length;U.argument(at<65536,"Table "+E.tableName+" too big."),k[Je]=at>>8,k[Je+1]=255&at,k=k.concat(z[Ie])}return k},ae.TABLE=function(E){for(var k=0,F=E.fields.length,z=0;z<F;z+=1){var $=E.fields[z],se=ae[$.type],le=(U.argument(se!==void 0,"No sizeOf function for field type "+$.type+" ("+$.name+")"),E[$.name]);k+=se(le=le===void 0?$.value:le),$.type==="TABLE"&&(k+=2)}return k},re.RECORD=re.TABLE,ae.RECORD=ae.TABLE,re.LITERAL=function(E){return E},ae.LITERAL=function(E){return E.length},ne.prototype.encode=function(){return re.TABLE(this)},ne.prototype.sizeOf=function(){return ae.TABLE(this)};var fe={Table:ne,Record:ne,Coverage:(je.prototype=Object.create(ne.prototype)).constructor=je,ScriptList:(Ue.prototype=Object.create(ne.prototype)).constructor=Ue,FeatureList:(Ge.prototype=Object.create(ne.prototype)).constructor=Ge,LookupList:(_e.prototype=Object.create(ne.prototype)).constructor=_e,ushortList:Te,tableList:Pe,recordList:Ae};function We(E,k){return E.getUint8(k)}function Ke(E,k){return E.getUint16(k,!1)}function $e(E,k){return E.getUint32(k,!1)}function et(E,k){return E.getInt16(k,!1)+E.getUint16(k+2,!1)/65535}var ht={byte:1,uShort:2,short:2,uLong:4,fixed:4,longDateTime:8,tag:4};function Be(E,k){this.data=E,this.offset=k,this.relativeOffset=0}Be.prototype.parseByte=function(){var E=this.data.getUint8(this.offset+this.relativeOffset);return this.relativeOffset+=1,E},Be.prototype.parseChar=function(){var E=this.data.getInt8(this.offset+this.relativeOffset);return this.relativeOffset+=1,E},Be.prototype.parseCard8=Be.prototype.parseByte,Be.prototype.parseCard16=Be.prototype.parseUShort=function(){var E=this.data.getUint16(this.offset+this.relativeOffset);return this.relativeOffset+=2,E},Be.prototype.parseSID=Be.prototype.parseUShort,Be.prototype.parseOffset16=Be.prototype.parseUShort,Be.prototype.parseShort=function(){var E=this.data.getInt16(this.offset+this.relativeOffset);return this.relativeOffset+=2,E},Be.prototype.parseF2Dot14=function(){var E=this.data.getInt16(this.offset+this.relativeOffset)/16384;return this.relativeOffset+=2,E},Be.prototype.parseOffset32=Be.prototype.parseULong=function(){var E=$e(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,E},Be.prototype.parseFixed=function(){var E=et(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,E},Be.prototype.parseString=function(E){var k=this.data,F=this.offset+this.relativeOffset,z="";this.relativeOffset+=E;for(var $=0;$<E;$++)z+=String.fromCharCode(k.getUint8(F+$));return z},Be.prototype.parseTag=function(){return this.parseString(4)},Be.prototype.parseLongDateTime=function(){var E=$e(this.data,this.offset+this.relativeOffset+4);return E-=2082844800,this.relativeOffset+=8,E},Be.prototype.parseVersion=function(E){var k=Ke(this.data,this.offset+this.relativeOffset),F=Ke(this.data,this.offset+this.relativeOffset+2);return this.relativeOffset+=4,k+F/(E=E===void 0?4096:E)/10},Be.prototype.skip=function(E,k){this.relativeOffset+=ht[E]*(k=k===void 0?1:k)},Be.prototype.parseULongList=function(E){E===void 0&&(E=this.parseULong());for(var k=new Array(E),F=this.data,z=this.offset+this.relativeOffset,$=0;$<E;$++)k[$]=F.getUint32(z),z+=4;return this.relativeOffset+=4*E,k},Be.prototype.parseOffset16List=Be.prototype.parseUShortList=function(E){E===void 0&&(E=this.parseUShort());for(var k=new Array(E),F=this.data,z=this.offset+this.relativeOffset,$=0;$<E;$++)k[$]=F.getUint16(z),z+=2;return this.relativeOffset+=2*E,k},Be.prototype.parseShortList=function(E){for(var k=new Array(E),F=this.data,z=this.offset+this.relativeOffset,$=0;$<E;$++)k[$]=F.getInt16(z),z+=2;return this.relativeOffset+=2*E,k},Be.prototype.parseByteList=function(E){for(var k=new Array(E),F=this.data,z=this.offset+this.relativeOffset,$=0;$<E;$++)k[$]=F.getUint8(z++);return this.relativeOffset+=E,k},Be.prototype.parseList=function(E,k){k||(k=E,E=this.parseUShort());for(var F=new Array(E),z=0;z<E;z++)F[z]=k.call(this);return F},Be.prototype.parseList32=function(E,k){k||(k=E,E=this.parseULong());for(var F=new Array(E),z=0;z<E;z++)F[z]=k.call(this);return F},Be.prototype.parseRecordList=function(E,k){k||(k=E,E=this.parseUShort());for(var F=new Array(E),z=Object.keys(k),$=0;$<E;$++){for(var se={},le=0;le<z.length;le++){var we=z[le],Le=k[we];se[we]=Le.call(this)}F[$]=se}return F},Be.prototype.parseRecordList32=function(E,k){k||(k=E,E=this.parseULong());for(var F=new Array(E),z=Object.keys(k),$=0;$<E;$++){for(var se={},le=0;le<z.length;le++){var we=z[le],Le=k[we];se[we]=Le.call(this)}F[$]=se}return F},Be.prototype.parseStruct=function(E){if(typeof E=="function")return E.call(this);for(var k=Object.keys(E),F={},z=0;z<k.length;z++){var $=k[z],se=E[$];F[$]=se.call(this)}return F},Be.prototype.parseValueRecord=function(E){var k;if((E=E===void 0?this.parseUShort():E)!==0)return k={},1&E&&(k.xPlacement=this.parseShort()),2&E&&(k.yPlacement=this.parseShort()),4&E&&(k.xAdvance=this.parseShort()),8&E&&(k.yAdvance=this.parseShort()),16&E&&(k.xPlaDevice=void 0,this.parseShort()),32&E&&(k.yPlaDevice=void 0,this.parseShort()),64&E&&(k.xAdvDevice=void 0,this.parseShort()),128&E&&(k.yAdvDevice=void 0,this.parseShort()),k},Be.prototype.parseValueRecordList=function(){for(var E=this.parseUShort(),k=this.parseUShort(),F=new Array(k),z=0;z<k;z++)F[z]=this.parseValueRecord(E);return F},Be.prototype.parsePointer=function(E){var k=this.parseOffset16();if(0<k)return new Be(this.data,this.offset+k).parseStruct(E)},Be.prototype.parsePointer32=function(E){var k=this.parseOffset32();if(0<k)return new Be(this.data,this.offset+k).parseStruct(E)},Be.prototype.parseListOfLists=function(E){for(var k=this.parseOffset16List(),F=k.length,z=this.relativeOffset,$=new Array(F),se=0;se<F;se++){var le=k[se];if(le===0)$[se]=void 0;else if(this.relativeOffset=le,E){for(var we=this.parseOffset16List(),Le=new Array(we.length),Ie=0;Ie<we.length;Ie++)this.relativeOffset=le+we[Ie],Le[Ie]=E.call(this);$[se]=Le}else $[se]=this.parseUShortList()}return this.relativeOffset=z,$},Be.prototype.parseCoverage=function(){var E=this.offset+this.relativeOffset,k=this.parseUShort(),F=this.parseUShort();if(k===1)return{format:1,glyphs:this.parseUShortList(F)};if(k!==2)throw new Error("0x"+E.toString(16)+": Coverage format must be 1 or 2.");for(var z=new Array(F),$=0;$<F;$++)z[$]={start:this.parseUShort(),end:this.parseUShort(),index:this.parseUShort()};return{format:2,ranges:z}},Be.prototype.parseClassDef=function(){var E=this.offset+this.relativeOffset,k=this.parseUShort();if(k===1)return{format:1,startGlyph:this.parseUShort(),classes:this.parseUShortList()};if(k===2)return{format:2,ranges:this.parseRecordList({start:Be.uShort,end:Be.uShort,classId:Be.uShort})};throw new Error("0x"+E.toString(16)+": ClassDef format must be 1 or 2.")},Be.list=function(E,k){return function(){return this.parseList(E,k)}},Be.list32=function(E,k){return function(){return this.parseList32(E,k)}},Be.recordList=function(E,k){return function(){return this.parseRecordList(E,k)}},Be.recordList32=function(E,k){return function(){return this.parseRecordList32(E,k)}},Be.pointer=function(E){return function(){return this.parsePointer(E)}},Be.pointer32=function(E){return function(){return this.parsePointer32(E)}},Be.tag=Be.prototype.parseTag,Be.byte=Be.prototype.parseByte,Be.uShort=Be.offset16=Be.prototype.parseUShort,Be.uShortList=Be.prototype.parseUShortList,Be.uLong=Be.offset32=Be.prototype.parseULong,Be.uLongList=Be.prototype.parseULongList,Be.struct=Be.prototype.parseStruct,Be.coverage=Be.prototype.parseCoverage,Be.classDef=Be.prototype.parseClassDef;var rt={reserved:Be.uShort,reqFeatureIndex:Be.uShort,featureIndexes:Be.uShortList},Ye=(Be.prototype.parseScriptList=function(){return this.parsePointer(Be.recordList({tag:Be.tag,script:Be.pointer({defaultLangSys:Be.pointer(rt),langSysRecords:Be.recordList({tag:Be.tag,langSys:Be.pointer(rt)})})}))||[]},Be.prototype.parseFeatureList=function(){return this.parsePointer(Be.recordList({tag:Be.tag,feature:Be.pointer({featureParams:Be.offset16,lookupListIndexes:Be.uShortList})}))||[]},Be.prototype.parseLookupList=function(E){return this.parsePointer(Be.list(Be.pointer(function(){var k=this.parseUShort(),F=(U.argument(1<=k&&k<=9,"GPOS/GSUB lookup type "+k+" unknown."),this.parseUShort()),z=16&F;return{lookupType:k,lookupFlag:F,subtables:this.parseList(Be.pointer(E[k])),markFilteringSet:z?this.parseUShort():void 0}})))||[]},Be.prototype.parseFeatureVariationsList=function(){return this.parsePointer32(function(){var E=this.parseUShort(),k=this.parseUShort();return U.argument(E===1&&k<1,"GPOS/GSUB feature variations table unknown."),this.parseRecordList32({conditionSetOffset:Be.offset32,featureTableSubstitutionOffset:Be.offset32})})||[]},{getByte:We,getCard8:We,getUShort:Ke,getCard16:Ke,getShort:function(E,k){return E.getInt16(k,!1)},getULong:$e,getFixed:et,getTag:function(E,k){for(var F="",z=k;z<k+4;z+=1)F+=String.fromCharCode(E.getInt8(z));return F},getOffset:function(E,k,F){for(var z=0,$=0;$<F;$+=1)z=(z<<=8)+E.getUint8(k+$);return z},getBytes:function(E,k,F){for(var z=[],$=k;$<F;$+=1)z.push(E.getUint8($));return z},bytesToString:function(E){for(var k="",F=0;F<E.length;F+=1)k+=String.fromCharCode(E[F]);return k},Parser:Be}),de={parse:function(E,k){for(var F={},z=(F.version=Ye.getUShort(E,k),U.argument(F.version===0,"cmap table version should be 0."),F.numTables=Ye.getUShort(E,k+2),-1),$=F.numTables-1;0<=$;--$){var se=Ye.getUShort(E,k+4+8*$),le=Ye.getUShort(E,k+4+8*$+2);if(se===3&&(le===0||le===1||le===10)||se===0&&(le===0||le===1||le===2||le===3||le===4)){z=Ye.getULong(E,k+4+8*$+4);break}}if(z===-1)throw new Error("No valid cmap sub-tables found.");var we=new Ye.Parser(E,k+z);if(F.format=we.parseUShort(),F.format===12){var Le,Ie=F,Je=we;Je.parseUShort(),Ie.length=Je.parseULong(),Ie.language=Je.parseULong(),Ie.groupCount=Le=Je.parseULong(),Ie.glyphIndexMap={};for(var at=0;at<Le;at+=1)for(var nt=Je.parseULong(),He=Je.parseULong(),Et=Je.parseULong(),pt=nt;pt<=He;pt+=1)Ie.glyphIndexMap[pt]=Et,Et++}else{if(F.format!==4)throw new Error("Only format 4 and 12 cmap tables are supported (found format "+F.format+").");var xt=F,dt=E,ft=k,ar=z;xt.length=we.parseUShort(),xt.language=we.parseUShort(),xt.segCount=wr=we.parseUShort()>>1,we.skip("uShort",3),xt.glyphIndexMap={};for(var wr,sr=new Ye.Parser(dt,ft+ar+14),lr=new Ye.Parser(dt,ft+ar+16+2*wr),kr=new Ye.Parser(dt,ft+ar+16+4*wr),tn=new Ye.Parser(dt,ft+ar+16+6*wr),Un=ft+ar+16+8*wr,In=0;In<wr-1;In+=1)for(var _n=void 0,Vn=sr.parseUShort(),xi=lr.parseUShort(),Kr=kr.parseShort(),Mn=tn.parseUShort(),rn=xi;rn<=Vn;rn+=1)Mn!==0?(Un=(Un=tn.offset+tn.relativeOffset-2)+Mn+2*(rn-xi),(_n=Ye.getUShort(dt,Un))!==0&&(_n=_n+Kr&65535)):_n=rn+Kr&65535,xt.glyphIndexMap[rn]=_n}return F},make:function(E){for(var k=!0,F=E.length-1;0<F;--F)if(65535<E.get(F).unicode){console.log("Adding CMAP format 12 (needed!)"),k=!1;break}var z,$,se=[{name:"version",type:"USHORT",value:0},{name:"numTables",type:"USHORT",value:k?1:2},{name:"platformID",type:"USHORT",value:3},{name:"encodingID",type:"USHORT",value:1},{name:"offset",type:"ULONG",value:k?12:20}],le=(se=(se=k?se:se.concat([{name:"cmap12PlatformID",type:"USHORT",value:3},{name:"cmap12EncodingID",type:"USHORT",value:10},{name:"cmap12Offset",type:"ULONG",value:0}])).concat([{name:"format",type:"USHORT",value:4},{name:"cmap4Length",type:"USHORT",value:0},{name:"language",type:"USHORT",value:0},{name:"segCountX2",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]),new fe.Table("cmap",se));for(le.segments=[],F=0;F<E.length;F+=1){for(var we=E.get(F),Le=0;Le<we.unicodes.length;Le+=1)z=we.unicodes[Le],$=F,le.segments.push({end:z,start:z,delta:-(z-$),offset:0,glyphIndex:$});le.segments=le.segments.sort(function(ft,ar){return ft.start-ar.start})}le.segments.push({end:65535,start:65535,delta:1,offset:0});var Ie=le.segments.length,Je=0,at=[],nt=[],He=[],Et=[],pt=[],xt=[];for(F=0;F<Ie;F+=1){var dt=le.segments[F];dt.end<=65535&&dt.start<=65535?(at=at.concat({name:"end_"+F,type:"USHORT",value:dt.end}),nt=nt.concat({name:"start_"+F,type:"USHORT",value:dt.start}),He=He.concat({name:"idDelta_"+F,type:"SHORT",value:dt.delta}),Et=Et.concat({name:"idRangeOffset_"+F,type:"USHORT",value:dt.offset}),dt.glyphId!==void 0&&(pt=pt.concat({name:"glyph_"+F,type:"USHORT",value:dt.glyphId}))):Je+=1,k||dt.glyphIndex===void 0||(xt=(xt=(xt=xt.concat({name:"cmap12Start_"+F,type:"ULONG",value:dt.start})).concat({name:"cmap12End_"+F,type:"ULONG",value:dt.end})).concat({name:"cmap12Glyph_"+F,type:"ULONG",value:dt.glyphIndex}))}return le.segCountX2=2*(Ie-Je),le.searchRange=2*Math.pow(2,Math.floor(Math.log(Ie-Je)/Math.log(2))),le.entrySelector=Math.log(le.searchRange/2)/Math.log(2),le.rangeShift=le.segCountX2-le.searchRange,le.fields=le.fields.concat(at),le.fields.push({name:"reservedPad",type:"USHORT",value:0}),le.fields=le.fields.concat(nt),le.fields=le.fields.concat(He),le.fields=le.fields.concat(Et),le.fields=le.fields.concat(pt),le.cmap4Length=14+2*at.length+2+2*nt.length+2*He.length+2*Et.length+2*pt.length,k||(se=16+4*xt.length,le.cmap12Offset=20+le.cmap4Length,le.fields=le.fields.concat([{name:"cmap12Format",type:"USHORT",value:12},{name:"cmap12Reserved",type:"USHORT",value:0},{name:"cmap12Length",type:"ULONG",value:se},{name:"cmap12Language",type:"ULONG",value:0},{name:"cmap12nGroups",type:"ULONG",value:xt.length/3}]),le.fields=le.fields.concat(xt)),le}},ge=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","266 ff","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"],ue=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls"],Se=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],De=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];function be(E){this.font=E}function ke(E){this.cmap=E}function ot(E,k){this.encoding=E,this.charset=k}function Ce(E){switch(E.version){case 1:this.names=De.slice();break;case 2:this.names=new Array(E.numberOfGlyphs);for(var k=0;k<E.numberOfGlyphs;k++)E.glyphNameIndex[k]<De.length?this.names[k]=De[E.glyphNameIndex[k]]:this.names[k]=E.names[E.glyphNameIndex[k]-De.length];break;case 2.5:this.names=new Array(E.numberOfGlyphs);for(var F=0;F<E.numberOfGlyphs;F++)this.names[F]=De[F+E.glyphNameIndex[F]];break;default:this.names=[]}}be.prototype.charToGlyphIndex=function(E){var k=E.codePointAt(0),F=this.font.glyphs;if(F){for(var z=0;z<F.length;z+=1)for(var $=F.get(z),se=0;se<$.unicodes.length;se+=1)if($.unicodes[se]===k)return z}return null},ke.prototype.charToGlyphIndex=function(E){return this.cmap.glyphIndexMap[E.codePointAt(0)]||0},ot.prototype.charToGlyphIndex=function(E){return E=E.codePointAt(0),E=this.encoding[E],this.charset.indexOf(E)},Ce.prototype.nameToGlyphIndex=function(E){return this.names.indexOf(E)},Ce.prototype.glyphIndexToName=function(E){return this.names[E]};var it={line:function(E,k,F,z,$){E.beginPath(),E.moveTo(k,F),E.lineTo(z,$),E.stroke()}};function Xe(E){this.bindConstructorValues(E)}function ut(E,k,F){Object.defineProperty(E,k,{get:function(){return E.path,E[F]},set:function(z){E[F]=z},enumerable:!0,configurable:!0})}function bt(E,k){if(this.font=E,this.glyphs={},Array.isArray(k))for(var F=0;F<k.length;F++)this.glyphs[F]=k[F];this.length=k&&k.length||0}Xe.prototype.bindConstructorValues=function(E){var k;this.index=E.index||0,this.name=E.name||null,this.unicode=E.unicode||void 0,this.unicodes=E.unicodes||E.unicode!==void 0?[E.unicode]:[],E.xMin&&(this.xMin=E.xMin),E.yMin&&(this.yMin=E.yMin),E.xMax&&(this.xMax=E.xMax),E.yMax&&(this.yMax=E.yMax),E.advanceWidth&&(this.advanceWidth=E.advanceWidth),Object.defineProperty(this,"path",(E=E.path,k=E||new Z,{configurable:!0,get:function(){return k=typeof k=="function"?k():k},set:function(F){k=F}}))},Xe.prototype.addUnicode=function(E){this.unicodes.length===0&&(this.unicode=E),this.unicodes.push(E)},Xe.prototype.getBoundingBox=function(){return this.path.getBoundingBox()},Xe.prototype.getPath=function(E,k,F,z,$){E=E!==void 0?E:0,k=k!==void 0?k:0,F=F!==void 0?F:72;for(var se,le,we=(z=z||{}).xScale,Le=z.yScale,Ie=((se=z.hinting&&$&&$.hinting?this.path&&$.hinting.exec(this,F):se)?(le=$.hinting.getCommands(se),E=Math.round(E),k=Math.round(k),we=Le=1):(le=this.path.commands,z=1/this.path.unitsPerEm*F,we===void 0&&(we=z),Le===void 0&&(Le=z)),new Z),Je=0;Je<le.length;Je+=1){var at=le[Je];at.type==="M"?Ie.moveTo(E+at.x*we,k+-at.y*Le):at.type==="L"?Ie.lineTo(E+at.x*we,k+-at.y*Le):at.type==="Q"?Ie.quadraticCurveTo(E+at.x1*we,k+-at.y1*Le,E+at.x*we,k+-at.y*Le):at.type==="C"?Ie.curveTo(E+at.x1*we,k+-at.y1*Le,E+at.x2*we,k+-at.y2*Le,E+at.x*we,k+-at.y*Le):at.type==="Z"&&Ie.closePath()}return Ie},Xe.prototype.getContours=function(){if(this.points===void 0)return[];for(var E=[],k=[],F=0;F<this.points.length;F+=1){var z=this.points[F];k.push(z),z.lastPointOfContour&&(E.push(k),k=[])}return U.argument(k.length===0,"There are still points left in the current contour."),E},Xe.prototype.getMetrics=function(){for(var E=this.path.commands,k=[],F=[],z=0;z<E.length;z+=1){var $=E[z];$.type!=="Z"&&(k.push($.x),F.push($.y)),$.type!=="Q"&&$.type!=="C"||(k.push($.x1),F.push($.y1)),$.type==="C"&&(k.push($.x2),F.push($.y2))}var se={xMin:Math.min.apply(null,k),yMin:Math.min.apply(null,F),xMax:Math.max.apply(null,k),yMax:Math.max.apply(null,F),leftSideBearing:this.leftSideBearing};return isFinite(se.xMin)||(se.xMin=0),isFinite(se.xMax)||(se.xMax=this.advanceWidth),isFinite(se.yMin)||(se.yMin=0),isFinite(se.yMax)||(se.yMax=0),se.rightSideBearing=this.advanceWidth-se.leftSideBearing-(se.xMax-se.xMin),se},Xe.prototype.draw=function(E,k,F,z,$){this.getPath(k,F,z,$).draw(E)},Xe.prototype.drawPoints=function(E,k,F,z){function $(Je,at,nt,He){var Et=2*Math.PI;E.beginPath();for(var pt=0;pt<Je.length;pt+=1)E.moveTo(at+Je[pt].x*He,nt+Je[pt].y*He),E.arc(at+Je[pt].x*He,nt+Je[pt].y*He,2,0,Et,!1);E.closePath(),E.fill()}k=k!==void 0?k:0,F=F!==void 0?F:0;for(var z=1/this.path.unitsPerEm*(z=z!==void 0?z:24),se=[],le=[],we=this.path,Le=0;Le<we.commands.length;Le+=1){var Ie=we.commands[Le];Ie.x!==void 0&&se.push({x:Ie.x,y:-Ie.y}),Ie.x1!==void 0&&le.push({x:Ie.x1,y:-Ie.y1}),Ie.x2!==void 0&&le.push({x:Ie.x2,y:-Ie.y2})}E.fillStyle="blue",$(se,k,F,z),E.fillStyle="red",$(le,k,F,z)},Xe.prototype.drawMetrics=function(E,k,F,z){k=k!==void 0?k:0,F=F!==void 0?F:0,z=1/this.path.unitsPerEm*(z=z!==void 0?z:24),E.lineWidth=1,E.strokeStyle="black",it.line(E,k,-1e4,k,1e4),it.line(E,-1e4,F,1e4,F);var $=this.xMin||0,se=this.yMin||0,le=this.xMax||0,we=this.yMax||0,Le=this.advanceWidth||0;E.strokeStyle="blue",it.line(E,k+$*z,-1e4,k+$*z,1e4),it.line(E,k+le*z,-1e4,k+le*z,1e4),it.line(E,-1e4,F+-se*z,1e4,F+-se*z),it.line(E,-1e4,F+-we*z,1e4,F+-we*z),E.strokeStyle="green",it.line(E,k+Le*z,-1e4,k+Le*z,1e4)},bt.prototype.get=function(E){return typeof this.glyphs[E]=="function"&&(this.glyphs[E]=this.glyphs[E]()),this.glyphs[E]},bt.prototype.push=function(E,k){this.glyphs[E]=k,this.length++};var vt={GlyphSet:bt,glyphLoader:function(E,k){return new Xe({index:k,font:E})},ttfGlyphLoader:function(E,k,F,z,$,se){return function(){var le=new Xe({index:k,font:E});return le.path=function(){F(le,z,$);var we=se(E.glyphs,le);return we.unitsPerEm=E.unitsPerEm,we},ut(le,"xMin","_xMin"),ut(le,"xMax","_xMax"),ut(le,"yMin","_yMin"),ut(le,"yMax","_yMax"),le}},cffGlyphLoader:function(E,k,F,z){return function(){var $=new Xe({index:k,font:E});return $.path=function(){var se=F(E,$,z);return se.unitsPerEm=E.unitsPerEm,se},$}}};function Rt(E){return E=E.length<1240?107:E.length<33900?1131:32768,E}function Dt(E,k,F){var z,$=[],se=[],le=Ye.getCard16(E,k);if(le!==0){for(var we=Ye.getByte(E,k+2),Le=k+(le+1)*we+2,Ie=k+3,Je=0;Je<le+1;Je+=1)$.push(Ye.getOffset(E,Ie,we)),Ie+=we;z=Le+$[le]}else z=k+2;for(var at=0;at<$.length-1;at+=1){var nt=Ye.getBytes(E,Le+$[at],Le+$[at+1]);F&&(nt=F(nt)),se.push(nt)}return{objects:se,startOffset:k,endOffset:z}}function yr(E,k){if(k===28)return E.parseByte()<<8|E.parseByte();if(k===29)return E.parseByte()<<24|E.parseByte()<<16|E.parseByte()<<8|E.parseByte();if(k===30){for(var F=E,z="",$=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];;){var le=F.parseByte(),se=le>>4,le=15&le;if(se==15||(z+=$[se],le==15))break;z+=$[le]}return parseFloat(z)}if(32<=k&&k<=246)return k-139;if(247<=k&&k<=250)return 256*(k-247)+E.parseByte()+108;if(251<=k&&k<=254)return 256*-(k-251)-E.parseByte()-108;throw new Error("Invalid b0 "+k)}function Bt(E,k,F){var z=new Ye.Parser(E,k=k!==void 0?k:0),$=[],se=[];for(F=F!==void 0?F:E.length;z.relativeOffset<F;){var le=z.parseByte();le<=21?(le===12&&(le=1200+z.parseByte()),$.push([le,se]),se=[]):se.push(yr(z,le))}for(var we=$,Le={},Ie=0;Ie<we.length;Ie+=1){var Je=we[Ie][0],at=we[Ie][1],nt=void 0,nt=at.length===1?at[0]:at;if(Le.hasOwnProperty(Je)&&!isNaN(Le[Je]))throw new Error("Object "+Le+" already has key "+Je);Le[Je]=nt}return Le}function Ut(E,k){return k=k<=390?ge[k]:E[k-391]}function Yt(E,k,F){for(var z,$={},se=0;se<k.length;se+=1){var le=k[se];if(Array.isArray(le.type)){var we=[];we.length=le.type.length;for(var Le=0;Le<le.type.length;Le++)(z=E[le.op]!==void 0?E[le.op][Le]:void 0)===void 0&&(z=le.value!==void 0&&le.value[Le]!==void 0?le.value[Le]:null),le.type[Le]==="SID"&&(z=Ut(F,z)),we[Le]=z;$[le.name]=we}else(z=E[le.op])===void 0&&(z=le.value!==void 0?le.value:null),le.type==="SID"&&(z=Ut(F,z)),$[le.name]=z}return $}var Pt=[{name:"version",op:0,type:"SID"},{name:"notice",op:1,type:"SID"},{name:"copyright",op:1200,type:"SID"},{name:"fullName",op:2,type:"SID"},{name:"familyName",op:3,type:"SID"},{name:"weight",op:4,type:"SID"},{name:"isFixedPitch",op:1201,type:"number",value:0},{name:"italicAngle",op:1202,type:"number",value:0},{name:"underlinePosition",op:1203,type:"number",value:-100},{name:"underlineThickness",op:1204,type:"number",value:50},{name:"paintType",op:1205,type:"number",value:0},{name:"charstringType",op:1206,type:"number",value:2},{name:"fontMatrix",op:1207,type:["real","real","real","real","real","real"],value:[.001,0,0,.001,0,0]},{name:"uniqueId",op:13,type:"number"},{name:"fontBBox",op:5,type:["number","number","number","number"],value:[0,0,0,0]},{name:"strokeWidth",op:1208,type:"number",value:0},{name:"xuid",op:14,type:[],value:null},{name:"charset",op:15,type:"offset",value:0},{name:"encoding",op:16,type:"offset",value:0},{name:"charStrings",op:17,type:"offset",value:0},{name:"private",op:18,type:["number","offset"],value:[0,0]},{name:"ros",op:1230,type:["SID","SID","number"]},{name:"cidFontVersion",op:1231,type:"number",value:0},{name:"cidFontRevision",op:1232,type:"number",value:0},{name:"cidFontType",op:1233,type:"number",value:0},{name:"cidCount",op:1234,type:"number",value:8720},{name:"uidBase",op:1235,type:"number"},{name:"fdArray",op:1236,type:"offset"},{name:"fdSelect",op:1237,type:"offset"},{name:"fontName",op:1238,type:"SID"}],Wt=[{name:"subrs",op:19,type:"offset",value:0},{name:"defaultWidthX",op:20,type:"number",value:0},{name:"nominalWidthX",op:21,type:"number",value:0}];function Jt(E,k,F,z){return Yt(Bt(E,k,F),Wt,z)}function $t(E,k,F,z){for(var $=[],se=0;se<F.length;se+=1){var le=new DataView(new Uint8Array(F[se]).buffer),le=(we=z,Yt(Bt(le,0,le.byteLength),Pt,we)),we=(le._subrs=[],le._subrsBias=0,le.private[0]),Le=le.private[1];we!==0&&Le!==0&&(we=Jt(E,Le+k,we,z),le._defaultWidthX=we.defaultWidthX,le._nominalWidthX=we.nominalWidthX,we.subrs!==0&&(Le=Dt(E,Le+we.subrs+k),le._subrs=Le.objects,le._subrsBias=Rt(le._subrs)),le._privateDict=we),$.push(le)}return $}function br(E,k,F){var z,$,se,le,we,Le,Ie,Je,at,nt=new Z,He=[],Et=0,pt=!1,xt=!1,dt=0,ft=0,ar=(at=(E.isCIDFont?(we=E.tables.cff.topDict._fdSelect[k.index],we=E.tables.cff.topDict._fdArray[we],Le=we._subrs,Ie=we._subrsBias,Je=we._defaultWidthX,we):(Le=E.tables.cff.topDict._subrs,Ie=E.tables.cff.topDict._subrsBias,Je=E.tables.cff.topDict._defaultWidthX,E.tables.cff.topDict))._nominalWidthX,Je);function wr(lr,kr){xt&&nt.closePath(),nt.moveTo(lr,kr),xt=!0}function sr(){He.length%2==0||pt||(ar=He.shift()+at),Et+=He.length>>1,He.length=0,pt=!0}return function lr(kr){for(var tn,Un,In,_n,Vn,xi,Kr,Mn,rn,bi,jn,Hr,An=0;An<kr.length;){var mn=kr[An];switch(An+=1,mn){case 1:case 3:sr();break;case 4:1<He.length&&!pt&&(ar=He.shift()+at,pt=!0),ft+=He.pop(),wr(dt,ft);break;case 5:for(;0<He.length;)dt+=He.shift(),ft+=He.shift(),nt.lineTo(dt,ft);break;case 6:for(;0<He.length&&(dt+=He.shift(),nt.lineTo(dt,ft),He.length!==0);)ft+=He.shift(),nt.lineTo(dt,ft);break;case 7:for(;0<He.length&&(ft+=He.shift(),nt.lineTo(dt,ft),He.length!==0);)dt+=He.shift(),nt.lineTo(dt,ft);break;case 8:for(;0<He.length;)z=dt+He.shift(),$=ft+He.shift(),se=z+He.shift(),le=$+He.shift(),dt=se+He.shift(),ft=le+He.shift(),nt.curveTo(z,$,se,le,dt,ft);break;case 10:Vn=He.pop()+Ie,(xi=Le[Vn])&&lr(xi);break;case 11:return;case 12:switch(mn=kr[An],An+=1,mn){case 35:z=dt+He.shift(),$=ft+He.shift(),se=z+He.shift(),le=$+He.shift(),Kr=se+He.shift(),Mn=le+He.shift(),rn=Kr+He.shift(),bi=Mn+He.shift(),jn=rn+He.shift(),Hr=bi+He.shift(),dt=jn+He.shift(),ft=Hr+He.shift(),He.shift(),nt.curveTo(z,$,se,le,Kr,Mn),nt.curveTo(rn,bi,jn,Hr,dt,ft);break;case 34:z=dt+He.shift(),$=ft,se=z+He.shift(),le=$+He.shift(),Kr=se+He.shift(),Mn=le,rn=Kr+He.shift(),bi=le,jn=rn+He.shift(),Hr=ft,dt=jn+He.shift(),nt.curveTo(z,$,se,le,Kr,Mn),nt.curveTo(rn,bi,jn,Hr,dt,ft);break;case 36:z=dt+He.shift(),$=ft+He.shift(),se=z+He.shift(),le=$+He.shift(),Kr=se+He.shift(),Mn=le,rn=Kr+He.shift(),bi=le,jn=rn+He.shift(),Hr=bi+He.shift(),dt=jn+He.shift(),nt.curveTo(z,$,se,le,Kr,Mn),nt.curveTo(rn,bi,jn,Hr,dt,ft);break;case 37:z=dt+He.shift(),$=ft+He.shift(),se=z+He.shift(),le=$+He.shift(),Kr=se+He.shift(),Mn=le+He.shift(),rn=Kr+He.shift(),bi=Mn+He.shift(),jn=rn+He.shift(),Hr=bi+He.shift(),Math.abs(jn-dt)>Math.abs(Hr-ft)?dt=jn+He.shift():ft=Hr+He.shift(),nt.curveTo(z,$,se,le,Kr,Mn),nt.curveTo(rn,bi,jn,Hr,dt,ft);break;default:console.log("Glyph "+k.index+": unknown operator 1200"+mn),He.length=0}break;case 14:0<He.length&&!pt&&(ar=He.shift()+at,pt=!0),xt&&(nt.closePath(),xt=!1);break;case 18:sr();break;case 19:case 20:sr(),An+=Et+7>>3;break;case 21:2<He.length&&!pt&&(ar=He.shift()+at,pt=!0),ft+=He.pop(),wr(dt+=He.pop(),ft);break;case 22:1<He.length&&!pt&&(ar=He.shift()+at,pt=!0),wr(dt+=He.pop(),ft);break;case 23:sr();break;case 24:for(;2<He.length;)z=dt+He.shift(),$=ft+He.shift(),se=z+He.shift(),le=$+He.shift(),dt=se+He.shift(),ft=le+He.shift(),nt.curveTo(z,$,se,le,dt,ft);dt+=He.shift(),ft+=He.shift(),nt.lineTo(dt,ft);break;case 25:for(;6<He.length;)dt+=He.shift(),ft+=He.shift(),nt.lineTo(dt,ft);z=dt+He.shift(),$=ft+He.shift(),se=z+He.shift(),le=$+He.shift(),dt=se+He.shift(),ft=le+He.shift(),nt.curveTo(z,$,se,le,dt,ft);break;case 26:for(He.length%2&&(dt+=He.shift());0<He.length;)z=dt,$=ft+He.shift(),se=z+He.shift(),le=$+He.shift(),dt=se,ft=le+He.shift(),nt.curveTo(z,$,se,le,dt,ft);break;case 27:for(He.length%2&&(ft+=He.shift());0<He.length;)z=dt+He.shift(),$=ft,se=z+He.shift(),le=$+He.shift(),dt=se+He.shift(),ft=le,nt.curveTo(z,$,se,le,dt,ft);break;case 28:tn=kr[An],Un=kr[An+1],He.push((tn<<24|Un<<16)>>16),An+=2;break;case 29:Vn=He.pop()+E.gsubrsBias,(xi=E.gsubrs[Vn])&&lr(xi);break;case 30:for(;0<He.length&&(z=dt,$=ft+He.shift(),se=z+He.shift(),le=$+He.shift(),dt=se+He.shift(),ft=le+(He.length===1?He.shift():0),nt.curveTo(z,$,se,le,dt,ft),He.length!==0);)z=dt+He.shift(),$=ft,se=z+He.shift(),le=$+He.shift(),ft=le+He.shift(),dt=se+(He.length===1?He.shift():0),nt.curveTo(z,$,se,le,dt,ft);break;case 31:for(;0<He.length&&(z=dt+He.shift(),$=ft,se=z+He.shift(),le=$+He.shift(),ft=le+He.shift(),dt=se+(He.length===1?He.shift():0),nt.curveTo(z,$,se,le,dt,ft),He.length!==0);)z=dt,$=ft+He.shift(),se=z+He.shift(),le=$+He.shift(),dt=se+He.shift(),ft=le+(He.length===1?He.shift():0),nt.curveTo(z,$,se,le,dt,ft);break;default:mn<32?console.log("Glyph "+k.index+": unknown operator "+mn):mn<247?He.push(mn-139):mn<251?(tn=kr[An],An+=1,He.push(256*(mn-247)+tn+108)):mn<255?(tn=kr[An],An+=1,He.push(256*-(mn-251)-tn-108)):(tn=kr[An],Un=kr[An+1],In=kr[An+2],_n=kr[An+3],An+=4,He.push((tn<<24|Un<<16|In<<8|_n)/65536))}}}(F),k.advanceWidth=ar,nt}function cr(E,k){var F,z=ge.indexOf(E);return 0<=z&&(F=z),0<=(z=k.indexOf(E))?F=z+ge.length:(F=ge.length+k.length,k.push(E)),F}function en(E,k,F){for(var z={},$=0;$<E.length;$+=1){var se=E[$],le=k[se.name];le===void 0||function we(Le,Ie){if(Le===Ie)return 1;if(Array.isArray(Le)&&Array.isArray(Ie)&&Le.length===Ie.length){for(var Je=0;Je<Le.length;Je+=1)if(!we(Le[Je],Ie[Je]))return;return 1}}(le,se.value)||(se.type==="SID"&&(le=cr(le,F)),z[se.op]={name:se.name,type:se.type,value:le})}return z}function Pn(E,k){var F=new fe.Record("Top DICT",[{name:"dict",type:"DICT",value:{}}]);return F.dict=en(Pt,E,k),F}function an(E){var k=new fe.Record("Top DICT INDEX",[{name:"topDicts",type:"INDEX",value:[]}]);return k.topDicts=[{name:"topDict_0",type:"TABLE",value:E}],k}function un(E){for(var k=new fe.Record("CharStrings INDEX",[{name:"charStrings",type:"INDEX",value:[]}]),F=0;F<E.length;F+=1){var z=E.get(F),$=function(se){for(var le=[],we=se.path,Le=(le.push({name:"width",type:"NUMBER",value:se.advanceWidth}),0),Ie=0,Je=0;Je<we.commands.length;Je+=1){var at,nt,He,Et,pt=void 0,xt=void 0,dt=we.commands[Je];(dt=dt.type==="Q"?{type:"C",x:dt.x,y:dt.y,x1:1/3*Le+2/3*dt.x1,y1:1/3*Ie+2/3*dt.y1,x2:1/3*dt.x+2/3*dt.x1,y2:1/3*dt.y+2/3*dt.y1}:dt).type==="M"?(pt=Math.round(dt.x-Le),xt=Math.round(dt.y-Ie),le.push({name:"dx",type:"NUMBER",value:pt}),le.push({name:"dy",type:"NUMBER",value:xt}),le.push({name:"rmoveto",type:"OP",value:21}),Le=Math.round(dt.x),Ie=Math.round(dt.y)):dt.type==="L"?(pt=Math.round(dt.x-Le),xt=Math.round(dt.y-Ie),le.push({name:"dx",type:"NUMBER",value:pt}),le.push({name:"dy",type:"NUMBER",value:xt}),le.push({name:"rlineto",type:"OP",value:5}),Le=Math.round(dt.x),Ie=Math.round(dt.y)):dt.type==="C"&&(at=Math.round(dt.x1-Le),nt=Math.round(dt.y1-Ie),He=Math.round(dt.x2-dt.x1),Et=Math.round(dt.y2-dt.y1),pt=Math.round(dt.x-dt.x2),xt=Math.round(dt.y-dt.y2),le.push({name:"dx1",type:"NUMBER",value:at}),le.push({name:"dy1",type:"NUMBER",value:nt}),le.push({name:"dx2",type:"NUMBER",value:He}),le.push({name:"dy2",type:"NUMBER",value:Et}),le.push({name:"dx",type:"NUMBER",value:pt}),le.push({name:"dy",type:"NUMBER",value:xt}),le.push({name:"rrcurveto",type:"OP",value:8}),Le=Math.round(dt.x),Ie=Math.round(dt.y))}return le.push({name:"endchar",type:"OP",value:14}),le}(z);k.charStrings.push({name:z.name,type:"CHARSTRING",value:$})}return k}var jr={parse:function(E,k,F){F.tables.cff={},we=E,z=k,($={}).formatMajor=Ye.getCard8(we,z),$.formatMinor=Ye.getCard8(we,z+1),$.size=Ye.getCard8(we,z+2),$.offsetSize=Ye.getCard8(we,z+3),$.startOffset=z,$.endOffset=z+4;var we=Dt(E,$.endOffset,Ye.bytesToString),z=Dt(E,we.endOffset),$=Dt(E,z.endOffset,Ye.bytesToString),we=Dt(E,$.endOffset);if(F.gsubrs=we.objects,F.gsubrsBias=Rt(F.gsubrs),(we=$t(E,k,z.objects,$.objects)).length!==1)throw new Error("CFF table has too many fonts in 'FontSet' - count of fonts NameIndex.length = "+we.length);if(z=we[0],(F.tables.cff.topDict=z)._privateDict&&(F.defaultWidthX=z._privateDict.defaultWidthX,F.nominalWidthX=z._privateDict.nominalWidthX),z.ros[0]!==void 0&&z.ros[1]!==void 0&&(F.isCIDFont=!0),F.isCIDFont){var we=z.fdArray,se=z.fdSelect;if(we===0||se===0)throw new Error("Font is marked as a CID font, but FDArray and/or FDSelect information is missing");we=$t(E,k,Dt(E,we+=k).objects,$.objects),z._fdArray=we,z._fdSelect=function(nt,He,Et,pt){var xt,dt=[],ft=new Ye.Parser(nt,He);if((nt=ft.parseCard8())===0)for(var ar=0;ar<Et;ar++){if(pt<=(xt=ft.parseCard8()))throw new Error("CFF table CID Font FDSelect has bad FD index value "+xt+" (FD count "+pt+")");dt.push(xt)}else{if(nt!==3)throw new Error("CFF Table CID Font FDSelect table has unsupported format "+nt);var wr,sr=ft.parseCard16(),lr=ft.parseCard16();if(lr!==0)throw new Error("CFF Table CID Font FDSelect format 3 range has bad initial GID "+lr);for(var kr=0;kr<sr;kr++){if(xt=ft.parseCard8(),wr=ft.parseCard16(),pt<=xt)throw new Error("CFF table CID Font FDSelect has bad FD index value "+xt+" (FD count "+pt+")");if(Et<wr)throw new Error("CFF Table CID Font FDSelect format 3 range has bad GID "+wr);for(;lr<wr;lr++)dt.push(xt);lr=wr}if(wr!==Et)throw new Error("CFF Table CID Font FDSelect format 3 range has bad final GID "+wr)}return dt}(E,se+=k,F.numGlyphs,we.length)}var se=k+z.private[1],we=Jt(E,se,z.private[0],$.objects),le=(F.defaultWidthX=we.defaultWidthX,F.nominalWidthX=we.nominalWidthX,we.subrs!==0?(se=Dt(E,se+we.subrs),F.subrs=se.objects,F.subrsBias=Rt(F.subrs)):(F.subrs=[],F.subrsBias=0),Dt(E,k+z.charStrings)),we=(F.nGlyphs=le.objects.length,function(Je,at,nt,He){var Et=new Ye.Parser(Je,at),pt=(--nt,[".notdef"]);if((Je=Et.parseCard8())===0)for(var xt=0;xt<nt;xt+=1)dt=Et.parseSID(),pt.push(Ut(He,dt));else if(Je===1)for(;pt.length<=nt;)for(var dt=Et.parseSID(),ft=Et.parseCard8(),ar=0;ar<=ft;ar+=1)pt.push(Ut(He,dt)),dt+=1;else{if(Je!==2)throw new Error("Unknown charset format "+Je);for(;pt.length<=nt;){dt=Et.parseSID(),ft=Et.parseCard16();for(var wr=0;wr<=ft;wr+=1)pt.push(Ut(He,dt)),dt+=1}}return pt}(E,k+z.charset,F.nGlyphs,$.objects));z.encoding===0?F.cffEncoding=new ot(ue,we):z.encoding===1?F.cffEncoding=new ot(Se,we):F.cffEncoding=function(Je,at,nt){var He={},Et=new Ye.Parser(Je,at);if((Je=Et.parseCard8())===0)for(var pt=Et.parseCard8(),xt=0;xt<pt;xt+=1)He[ft=Et.parseCard8()]=xt;else{if(Je!==1)throw new Error("Unknown encoding format "+Je);for(var dt=Et.parseCard8(),ft=1,ar=0;ar<dt;ar+=1)for(var wr=Et.parseCard8(),sr=Et.parseCard8(),lr=wr;lr<=wr+sr;lr+=1)He[lr]=ft,ft+=1}return new ot(He,nt)}(E,k+z.encoding,we),F.encoding=F.encoding||F.cffEncoding,F.glyphs=new vt.GlyphSet(F);for(var Le=0;Le<F.nGlyphs;Le+=1){var Ie=le.objects[Le];F.glyphs.push(Le,vt.cffGlyphLoader(F,Le,br,Ie))}},make:function(E,Je){for(var F,z=new fe.Table("CFF ",[{name:"header",type:"RECORD"},{name:"nameIndex",type:"RECORD"},{name:"topDictIndex",type:"RECORD"},{name:"stringIndex",type:"RECORD"},{name:"globalSubrIndex",type:"RECORD"},{name:"charsets",type:"RECORD"},{name:"charStringsIndex",type:"RECORD"},{name:"privateDict",type:"RECORD"}]),$=1/Je.unitsPerEm,$={version:Je.version,fullName:Je.fullName,familyName:Je.familyName,weight:Je.weightName,fontBBox:Je.fontBBox||[0,0,0,0],fontMatrix:[$,0,0,$,0,0],charset:999,encoding:0,charStrings:999,private:[0,999]},se=[],le=1;le<E.length;le+=1)F=E.get(le),se.push(F.name);var we,Le,Ie=[],Je=(z.header=new fe.Record("Header",[{name:"major",type:"Card8",value:1},{name:"minor",type:"Card8",value:0},{name:"hdrSize",type:"Card8",value:4},{name:"major",type:"Card8",value:1}]),z.nameIndex=function(nt){var He=new fe.Record("Name INDEX",[{name:"names",type:"INDEX",value:[]}]);He.names=[];for(var Et=0;Et<nt.length;Et+=1)He.names.push({name:"name_"+Et,type:"NAME",value:nt[Et]});return He}([Je.postScriptName]),Pn($,Ie)),at=(z.topDictIndex=an(Je),z.globalSubrIndex=new fe.Record("Global Subr INDEX",[{name:"subrs",type:"INDEX",value:[]}]),z.charsets=function(nt,He){for(var Et=new fe.Record("Charsets",[{name:"format",type:"Card8",value:0}]),pt=0;pt<nt.length;pt+=1){var xt=cr(nt[pt],He);Et.fields.push({name:"glyph_"+pt,type:"SID",value:xt})}return Et}(se,Ie),z.charStringsIndex=un(E),z.privateDict=(at={},we=Ie,(Le=new fe.Record("Private DICT",[{name:"dict",type:"DICT",value:{}}])).dict=en(Wt,at,we),Le),z.stringIndex=function(nt){var He=new fe.Record("String INDEX",[{name:"strings",type:"INDEX",value:[]}]);He.strings=[];for(var Et=0;Et<nt.length;Et+=1)He.strings.push({name:"string_"+Et,type:"STRING",value:nt[Et]});return He}(Ie),z.header.sizeOf()+z.nameIndex.sizeOf()+z.topDictIndex.sizeOf()+z.stringIndex.sizeOf()+z.globalSubrIndex.sizeOf());return $.charset=at,$.encoding=0,$.charStrings=$.charset+z.charsets.sizeOf(),$.private[1]=$.charStrings+z.charStringsIndex.sizeOf(),Je=Pn($,Ie),z.topDictIndex=an(Je),z}},Jn={parse:function(z,k){var F={},z=new Ye.Parser(z,k);return F.version=z.parseVersion(),F.fontRevision=Math.round(1e3*z.parseFixed())/1e3,F.checkSumAdjustment=z.parseULong(),F.magicNumber=z.parseULong(),U.argument(F.magicNumber===1594834165,"Font header has wrong magic number."),F.flags=z.parseUShort(),F.unitsPerEm=z.parseUShort(),F.created=z.parseLongDateTime(),F.modified=z.parseLongDateTime(),F.xMin=z.parseShort(),F.yMin=z.parseShort(),F.xMax=z.parseShort(),F.yMax=z.parseShort(),F.macStyle=z.parseUShort(),F.lowestRecPPEM=z.parseUShort(),F.fontDirectionHint=z.parseShort(),F.indexToLocFormat=z.parseShort(),F.glyphDataFormat=z.parseShort(),F},make:function(E){var k=Math.round(new Date().getTime()/1e3)+2082844800,F=k;return E.createdTimestamp&&(F=E.createdTimestamp+2082844800),new fe.Table("head",[{name:"version",type:"FIXED",value:65536},{name:"fontRevision",type:"FIXED",value:65536},{name:"checkSumAdjustment",type:"ULONG",value:0},{name:"magicNumber",type:"ULONG",value:1594834165},{name:"flags",type:"USHORT",value:0},{name:"unitsPerEm",type:"USHORT",value:1e3},{name:"created",type:"LONGDATETIME",value:F},{name:"modified",type:"LONGDATETIME",value:k},{name:"xMin",type:"SHORT",value:0},{name:"yMin",type:"SHORT",value:0},{name:"xMax",type:"SHORT",value:0},{name:"yMax",type:"SHORT",value:0},{name:"macStyle",type:"USHORT",value:0},{name:"lowestRecPPEM",type:"USHORT",value:0},{name:"fontDirectionHint",type:"SHORT",value:2},{name:"indexToLocFormat",type:"SHORT",value:0},{name:"glyphDataFormat",type:"SHORT",value:0}],E)}},Fe={parse:function(z,k){var F={},z=new Ye.Parser(z,k);return F.version=z.parseVersion(),F.ascender=z.parseShort(),F.descender=z.parseShort(),F.lineGap=z.parseShort(),F.advanceWidthMax=z.parseUShort(),F.minLeftSideBearing=z.parseShort(),F.minRightSideBearing=z.parseShort(),F.xMaxExtent=z.parseShort(),F.caretSlopeRise=z.parseShort(),F.caretSlopeRun=z.parseShort(),F.caretOffset=z.parseShort(),z.relativeOffset+=8,F.metricDataFormat=z.parseShort(),F.numberOfHMetrics=z.parseUShort(),F},make:function(E){return new fe.Table("hhea",[{name:"version",type:"FIXED",value:65536},{name:"ascender",type:"FWORD",value:0},{name:"descender",type:"FWORD",value:0},{name:"lineGap",type:"FWORD",value:0},{name:"advanceWidthMax",type:"UFWORD",value:0},{name:"minLeftSideBearing",type:"FWORD",value:0},{name:"minRightSideBearing",type:"FWORD",value:0},{name:"xMaxExtent",type:"FWORD",value:0},{name:"caretSlopeRise",type:"SHORT",value:1},{name:"caretSlopeRun",type:"SHORT",value:0},{name:"caretOffset",type:"SHORT",value:0},{name:"reserved1",type:"SHORT",value:0},{name:"reserved2",type:"SHORT",value:0},{name:"reserved3",type:"SHORT",value:0},{name:"reserved4",type:"SHORT",value:0},{name:"metricDataFormat",type:"SHORT",value:0},{name:"numberOfHMetrics",type:"USHORT",value:0}],E)}},Tt={parse:function(E,k,F,z,$){for(var se,le,we=new Ye.Parser(E,k),Le=0;Le<z;Le+=1){Le<F&&(se=we.parseUShort(),le=we.parseShort());var Ie=$.get(Le);Ie.advanceWidth=se,Ie.leftSideBearing=le}},make:function(E){for(var k=new fe.Table("hmtx",[]),F=0;F<E.length;F+=1){var $=E.get(F),z=$.advanceWidth||0,$=$.leftSideBearing||0;k.fields.push({name:"advanceWidth_"+F,type:"USHORT",value:z}),k.fields.push({name:"leftSideBearing_"+F,type:"SHORT",value:$})}return k}},Gt={make:function(E){for(var k=new fe.Table("ltag",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"numTags",type:"ULONG",value:E.length}]),F="",z=12+4*E.length,$=0;$<E.length;++$){var se=F.indexOf(E[$]);se<0&&(se=F.length,F+=E[$]),k.fields.push({name:"offset "+$,type:"USHORT",value:z+se}),k.fields.push({name:"length "+$,type:"USHORT",value:E[$].length})}return k.fields.push({name:"stringPool",type:"CHARARRAY",value:F}),k},parse:function(E,k){for(var F=new Ye.Parser(E,k),z=F.parseULong(),$=(U.argument(z===1,"Unsupported ltag table version."),F.skip("uLong",1),F.parseULong()),se=[],le=0;le<$;le++){for(var we="",Le=k+F.parseUShort(),Ie=F.parseUShort(),Je=Le;Je<Le+Ie;++Je)we+=String.fromCharCode(E.getInt8(Je));se.push(we)}return se}},At={parse:function(z,k){var F={},z=new Ye.Parser(z,k);return F.version=z.parseVersion(),F.numGlyphs=z.parseUShort(),F.version===1&&(F.maxPoints=z.parseUShort(),F.maxContours=z.parseUShort(),F.maxCompositePoints=z.parseUShort(),F.maxCompositeContours=z.parseUShort(),F.maxZones=z.parseUShort(),F.maxTwilightPoints=z.parseUShort(),F.maxStorage=z.parseUShort(),F.maxFunctionDefs=z.parseUShort(),F.maxInstructionDefs=z.parseUShort(),F.maxStackElements=z.parseUShort(),F.maxSizeOfInstructions=z.parseUShort(),F.maxComponentElements=z.parseUShort(),F.maxComponentDepth=z.parseUShort()),F},make:function(E){return new fe.Table("maxp",[{name:"version",type:"FIXED",value:20480},{name:"numGlyphs",type:"USHORT",value:E}])}},mr=["copyright","fontFamily","fontSubfamily","uniqueID","fullName","version","postScriptName","trademark","manufacturer","designer","description","manufacturerURL","designerURL","license","licenseURL","reserved","preferredFamily","preferredSubfamily","compatibleFullName","sampleText","postScriptFindFontName","wwsFamily","wwsSubfamily"],me={0:"en",1:"fr",2:"de",3:"it",4:"nl",5:"sv",6:"es",7:"da",8:"pt",9:"no",10:"he",11:"ja",12:"ar",13:"fi",14:"el",15:"is",16:"mt",17:"tr",18:"hr",19:"zh-Hant",20:"ur",21:"hi",22:"th",23:"ko",24:"lt",25:"pl",26:"hu",27:"es",28:"lv",29:"se",30:"fo",31:"fa",32:"ru",33:"zh",34:"nl-BE",35:"ga",36:"sq",37:"ro",38:"cz",39:"sk",40:"si",41:"yi",42:"sr",43:"mk",44:"bg",45:"uk",46:"be",47:"uz",48:"kk",49:"az-Cyrl",50:"az-Arab",51:"hy",52:"ka",53:"mo",54:"ky",55:"tg",56:"tk",57:"mn-CN",58:"mn",59:"ps",60:"ks",61:"ku",62:"sd",63:"bo",64:"ne",65:"sa",66:"mr",67:"bn",68:"as",69:"gu",70:"pa",71:"or",72:"ml",73:"kn",74:"ta",75:"te",76:"si",77:"my",78:"km",79:"lo",80:"vi",81:"id",82:"tl",83:"ms",84:"ms-Arab",85:"am",86:"ti",87:"om",88:"so",89:"sw",90:"rw",91:"rn",92:"ny",93:"mg",94:"eo",128:"cy",129:"eu",130:"ca",131:"la",132:"qu",133:"gn",134:"ay",135:"tt",136:"ug",137:"dz",138:"jv",139:"su",140:"gl",141:"af",142:"br",143:"iu",144:"gd",145:"gv",146:"ga",147:"to",148:"el-polyton",149:"kl",150:"az",151:"nn"},Qe={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:5,11:1,12:4,13:0,14:6,15:0,16:0,17:0,18:0,19:2,20:4,21:9,22:21,23:3,24:29,25:29,26:29,27:29,28:29,29:0,30:0,31:4,32:7,33:25,34:0,35:0,36:0,37:0,38:29,39:29,40:0,41:5,42:7,43:7,44:7,45:7,46:7,47:7,48:7,49:7,50:4,51:24,52:23,53:7,54:7,55:7,56:7,57:27,58:7,59:4,60:4,61:4,62:4,63:26,64:9,65:9,66:9,67:13,68:13,69:11,70:10,71:12,72:17,73:16,74:14,75:15,76:18,77:19,78:20,79:22,80:30,81:0,82:0,83:0,84:4,85:28,86:28,87:28,88:0,89:0,90:0,91:0,92:0,93:0,94:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:7,136:4,137:26,138:0,139:0,140:0,141:0,142:0,143:28,144:0,145:0,146:0,147:0,148:6,149:0,150:0,151:0},qe={1078:"af",1052:"sq",1156:"gsw",1118:"am",5121:"ar-DZ",15361:"ar-BH",3073:"ar",2049:"ar-IQ",11265:"ar-JO",13313:"ar-KW",12289:"ar-LB",4097:"ar-LY",6145:"ary",8193:"ar-OM",16385:"ar-QA",1025:"ar-SA",10241:"ar-SY",7169:"aeb",14337:"ar-AE",9217:"ar-YE",1067:"hy",1101:"as",2092:"az-Cyrl",1068:"az",1133:"ba",1069:"eu",1059:"be",2117:"bn",1093:"bn-IN",8218:"bs-Cyrl",5146:"bs",1150:"br",1026:"bg",1027:"ca",3076:"zh-HK",5124:"zh-MO",2052:"zh",4100:"zh-SG",1028:"zh-TW",1155:"co",1050:"hr",4122:"hr-BA",1029:"cs",1030:"da",1164:"prs",1125:"dv",2067:"nl-BE",1043:"nl",3081:"en-AU",10249:"en-BZ",4105:"en-CA",9225:"en-029",16393:"en-IN",6153:"en-IE",8201:"en-JM",17417:"en-MY",5129:"en-NZ",13321:"en-PH",18441:"en-SG",7177:"en-ZA",11273:"en-TT",2057:"en-GB",1033:"en",12297:"en-ZW",1061:"et",1080:"fo",1124:"fil",1035:"fi",2060:"fr-BE",3084:"fr-CA",1036:"fr",5132:"fr-LU",6156:"fr-MC",4108:"fr-CH",1122:"fy",1110:"gl",1079:"ka",3079:"de-AT",1031:"de",5127:"de-LI",4103:"de-LU",2055:"de-CH",1032:"el",1135:"kl",1095:"gu",1128:"ha",1037:"he",1081:"hi",1038:"hu",1039:"is",1136:"ig",1057:"id",1117:"iu",2141:"iu-Latn",2108:"ga",1076:"xh",1077:"zu",1040:"it",2064:"it-CH",1041:"ja",1099:"kn",1087:"kk",1107:"km",1158:"quc",1159:"rw",1089:"sw",1111:"kok",1042:"ko",1088:"ky",1108:"lo",1062:"lv",1063:"lt",2094:"dsb",1134:"lb",1071:"mk",2110:"ms-BN",1086:"ms",1100:"ml",1082:"mt",1153:"mi",1146:"arn",1102:"mr",1148:"moh",1104:"mn",2128:"mn-CN",1121:"ne",1044:"nb",2068:"nn",1154:"oc",1096:"or",1123:"ps",1045:"pl",1046:"pt",2070:"pt-PT",1094:"pa",1131:"qu-BO",2155:"qu-EC",3179:"qu",1048:"ro",1047:"rm",1049:"ru",9275:"smn",4155:"smj-NO",5179:"smj",3131:"se-FI",1083:"se",2107:"se-SE",8251:"sms",6203:"sma-NO",7227:"sms",1103:"sa",7194:"sr-Cyrl-BA",3098:"sr",6170:"sr-Latn-BA",2074:"sr-Latn",1132:"nso",1074:"tn",1115:"si",1051:"sk",1060:"sl",11274:"es-AR",16394:"es-BO",13322:"es-CL",9226:"es-CO",5130:"es-CR",7178:"es-DO",12298:"es-EC",17418:"es-SV",4106:"es-GT",18442:"es-HN",2058:"es-MX",19466:"es-NI",6154:"es-PA",15370:"es-PY",10250:"es-PE",20490:"es-PR",3082:"es",1034:"es",21514:"es-US",14346:"es-UY",8202:"es-VE",2077:"sv-FI",1053:"sv",1114:"syr",1064:"tg",2143:"tzm",1097:"ta",1092:"tt",1098:"te",1054:"th",1105:"bo",1055:"tr",1090:"tk",1152:"ug",1058:"uk",1070:"hsb",1056:"ur",2115:"uz-Cyrl",1091:"uz",1066:"vi",1106:"cy",1160:"wo",1157:"sah",1144:"ii",1130:"yo"},Ze="utf-16",Ne={0:"macintosh",1:"x-mac-japanese",2:"x-mac-chinesetrad",3:"x-mac-korean",6:"x-mac-greek",7:"x-mac-cyrillic",9:"x-mac-devanagai",10:"x-mac-gurmukhi",11:"x-mac-gujarati",12:"x-mac-oriya",13:"x-mac-bengali",14:"x-mac-tamil",15:"x-mac-telugu",16:"x-mac-kannada",17:"x-mac-malayalam",18:"x-mac-sinhalese",19:"x-mac-burmese",20:"x-mac-khmer",21:"x-mac-thai",22:"x-mac-lao",23:"x-mac-georgian",24:"x-mac-armenian",25:"x-mac-chinesesimp",26:"x-mac-tibetan",27:"x-mac-mongolian",28:"x-mac-ethiopic",29:"x-mac-ce",30:"x-mac-vietnamese",31:"x-mac-extarabic"},St={15:"x-mac-icelandic",17:"x-mac-turkish",18:"x-mac-croatian",24:"x-mac-ce",25:"x-mac-ce",26:"x-mac-ce",27:"x-mac-ce",28:"x-mac-ce",30:"x-mac-icelandic",37:"x-mac-romanian",38:"x-mac-ce",39:"x-mac-ce",40:"x-mac-ce",143:"x-mac-inuit",146:"x-mac-gaelic"};function jt(E,k,F){switch(E){case 0:return Ze;case 1:return St[F]||Ne[k];case 3:if(k===1||k===10)return Ze}}function Ft(E){var k,F={};for(k in E)F[E[k]]=parseInt(k);return F}function Ht(E,k,F,z,$,se){return new fe.Record("NameRecord",[{name:"platformID",type:"USHORT",value:E},{name:"encodingID",type:"USHORT",value:k},{name:"languageID",type:"USHORT",value:F},{name:"nameID",type:"USHORT",value:z},{name:"length",type:"USHORT",value:$},{name:"offset",type:"USHORT",value:se}])}function Qt(E,k){if((F=function(se,le){var we=se.length,Le=le.length-we+1;e:for(var Ie=0;Ie<Le;Ie++)for(;Ie<Le;Ie++){for(var Je=0;Je<we;Je++)if(le[Ie+Je]!==se[Je])continue e;return Ie}return-1}(E,k))<0)for(var F=k.length,z=0,$=E.length;z<$;++z)k.push(E[z]);return F}var Kt={parse:function(E,k,F){for(var z={},$=new Ye.Parser(E,k),k=$.parseUShort(),se=$.parseUShort(),le=$.offset+$.parseUShort(),we=0;we<se;we++){var Et=$.parseUShort(),Le=$.parseUShort(),Ie=$.parseUShort(),Je=$.parseUShort(),Je=mr[Je]||Je,at=$.parseUShort(),nt=$.parseUShort(),He=function(xt,dt,ft){switch(xt){case 0:if(dt===65535)return"und";if(ft)return ft[dt];break;case 1:return me[dt];case 3:return qe[dt]}}(Et,Ie,F),Et=jt(Et,Le,Ie);Et!==void 0&&He!==void 0&&(Le=void 0,(Le=Et===Ze?K.UTF16(E,le+nt,at):K.MACSTRING(E,le+nt,at,Et))&&((Ie=(Ie=z[Je])===void 0?z[Je]={}:Ie)[He]=Le))}return k===1&&$.parseUShort(),z},make:function(E,k){var F,z=[],$={},se=Ft(mr);for(F in E){var le=se[F];if(le===void 0&&(le=F),nt=parseInt(le),isNaN(nt))throw new Error('Name table entry "'+F+'" does not exist, see nameTableNames for complete list.');$[nt]=E[F],z.push(nt)}for(var we=Ft(me),Le=Ft(qe),Ie=[],Je=[],at=0;at<z.length;at++){var nt,He,Et=$[nt=z[at]];for(He in Et){var pt=Et[He],wr=1,xt=we[He],dt=Qe[xt],ft=jt(wr,dt,xt),ft=re.MACSTRING(pt,ft),ar=(ft===void 0&&(wr=0,(xt=k.indexOf(He))<0&&(xt=k.length,k.push(He)),dt=4,ft=re.UTF16(pt)),Qt(ft,Je)),wr=(Ie.push(Ht(wr,dt,xt,nt,ft.length,ar)),Le[He]);wr!==void 0&&(xt=Qt(dt=re.UTF16(pt),Je),Ie.push(Ht(3,1,wr,nt,dt.length,xt)))}}Ie.sort(function(kr,tn){return kr.platformID-tn.platformID||kr.encodingID-tn.encodingID||kr.languageID-tn.languageID||kr.nameID-tn.nameID});for(var sr=new fe.Table("name",[{name:"format",type:"USHORT",value:0},{name:"count",type:"USHORT",value:Ie.length},{name:"stringOffset",type:"USHORT",value:6+12*Ie.length}]),lr=0;lr<Ie.length;lr++)sr.fields.push({name:"record_"+lr,type:"RECORD",value:Ie[lr]});return sr.fields.push({name:"strings",type:"LITERAL",value:Je}),sr}},It=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}],Xt={parse:function(E,k){var F={},z=new Ye.Parser(E,k);F.version=z.parseUShort(),F.xAvgCharWidth=z.parseShort(),F.usWeightClass=z.parseUShort(),F.usWidthClass=z.parseUShort(),F.fsType=z.parseUShort(),F.ySubscriptXSize=z.parseShort(),F.ySubscriptYSize=z.parseShort(),F.ySubscriptXOffset=z.parseShort(),F.ySubscriptYOffset=z.parseShort(),F.ySuperscriptXSize=z.parseShort(),F.ySuperscriptYSize=z.parseShort(),F.ySuperscriptXOffset=z.parseShort(),F.ySuperscriptYOffset=z.parseShort(),F.yStrikeoutSize=z.parseShort(),F.yStrikeoutPosition=z.parseShort(),F.sFamilyClass=z.parseShort(),F.panose=[];for(var $=0;$<10;$++)F.panose[$]=z.parseByte();return F.ulUnicodeRange1=z.parseULong(),F.ulUnicodeRange2=z.parseULong(),F.ulUnicodeRange3=z.parseULong(),F.ulUnicodeRange4=z.parseULong(),F.achVendID=String.fromCharCode(z.parseByte(),z.parseByte(),z.parseByte(),z.parseByte()),F.fsSelection=z.parseUShort(),F.usFirstCharIndex=z.parseUShort(),F.usLastCharIndex=z.parseUShort(),F.sTypoAscender=z.parseShort(),F.sTypoDescender=z.parseShort(),F.sTypoLineGap=z.parseShort(),F.usWinAscent=z.parseUShort(),F.usWinDescent=z.parseUShort(),1<=F.version&&(F.ulCodePageRange1=z.parseULong(),F.ulCodePageRange2=z.parseULong()),2<=F.version&&(F.sxHeight=z.parseShort(),F.sCapHeight=z.parseShort(),F.usDefaultChar=z.parseUShort(),F.usBreakChar=z.parseUShort(),F.usMaxContent=z.parseUShort()),F},make:function(E){return new fe.Table("OS/2",[{name:"version",type:"USHORT",value:3},{name:"xAvgCharWidth",type:"SHORT",value:0},{name:"usWeightClass",type:"USHORT",value:0},{name:"usWidthClass",type:"USHORT",value:0},{name:"fsType",type:"USHORT",value:0},{name:"ySubscriptXSize",type:"SHORT",value:650},{name:"ySubscriptYSize",type:"SHORT",value:699},{name:"ySubscriptXOffset",type:"SHORT",value:0},{name:"ySubscriptYOffset",type:"SHORT",value:140},{name:"ySuperscriptXSize",type:"SHORT",value:650},{name:"ySuperscriptYSize",type:"SHORT",value:699},{name:"ySuperscriptXOffset",type:"SHORT",value:0},{name:"ySuperscriptYOffset",type:"SHORT",value:479},{name:"yStrikeoutSize",type:"SHORT",value:49},{name:"yStrikeoutPosition",type:"SHORT",value:258},{name:"sFamilyClass",type:"SHORT",value:0},{name:"bFamilyType",type:"BYTE",value:0},{name:"bSerifStyle",type:"BYTE",value:0},{name:"bWeight",type:"BYTE",value:0},{name:"bProportion",type:"BYTE",value:0},{name:"bContrast",type:"BYTE",value:0},{name:"bStrokeVariation",type:"BYTE",value:0},{name:"bArmStyle",type:"BYTE",value:0},{name:"bLetterform",type:"BYTE",value:0},{name:"bMidline",type:"BYTE",value:0},{name:"bXHeight",type:"BYTE",value:0},{name:"ulUnicodeRange1",type:"ULONG",value:0},{name:"ulUnicodeRange2",type:"ULONG",value:0},{name:"ulUnicodeRange3",type:"ULONG",value:0},{name:"ulUnicodeRange4",type:"ULONG",value:0},{name:"achVendID",type:"CHARARRAY",value:"XXXX"},{name:"fsSelection",type:"USHORT",value:0},{name:"usFirstCharIndex",type:"USHORT",value:0},{name:"usLastCharIndex",type:"USHORT",value:0},{name:"sTypoAscender",type:"SHORT",value:0},{name:"sTypoDescender",type:"SHORT",value:0},{name:"sTypoLineGap",type:"SHORT",value:0},{name:"usWinAscent",type:"USHORT",value:0},{name:"usWinDescent",type:"USHORT",value:0},{name:"ulCodePageRange1",type:"ULONG",value:0},{name:"ulCodePageRange2",type:"ULONG",value:0},{name:"sxHeight",type:"SHORT",value:0},{name:"sCapHeight",type:"SHORT",value:0},{name:"usDefaultChar",type:"USHORT",value:0},{name:"usBreakChar",type:"USHORT",value:0},{name:"usMaxContext",type:"USHORT",value:0}],E)},unicodeRanges:It,getUnicodeRange:function(E){for(var k=0;k<It.length;k+=1){var F=It[k];if(E>=F.begin&&E<F.end)return k}return-1}},Sr={parse:function(E,k){var F={},z=new Ye.Parser(E,k);switch(F.version=z.parseVersion(),F.italicAngle=z.parseFixed(),F.underlinePosition=z.parseShort(),F.underlineThickness=z.parseShort(),F.isFixedPitch=z.parseULong(),F.minMemType42=z.parseULong(),F.maxMemType42=z.parseULong(),F.minMemType1=z.parseULong(),F.maxMemType1=z.parseULong(),F.version){case 1:F.names=De.slice();break;case 2:F.numberOfGlyphs=z.parseUShort(),F.glyphNameIndex=new Array(F.numberOfGlyphs);for(var $=0;$<F.numberOfGlyphs;$++)F.glyphNameIndex[$]=z.parseUShort();F.names=[];for(var se,le=0;le<F.numberOfGlyphs;le++)F.glyphNameIndex[le]>=De.length&&(se=z.parseChar(),F.names.push(z.parseString(se)));break;case 2.5:F.numberOfGlyphs=z.parseUShort(),F.offset=new Array(F.numberOfGlyphs);for(var we=0;we<F.numberOfGlyphs;we++)F.offset[we]=z.parseChar()}return F},make:function(){return new fe.Table("post",[{name:"version",type:"FIXED",value:196608},{name:"italicAngle",type:"FIXED",value:0},{name:"underlinePosition",type:"FWORD",value:0},{name:"underlineThickness",type:"FWORD",value:0},{name:"isFixedPitch",type:"ULONG",value:0},{name:"minMemType42",type:"ULONG",value:0},{name:"maxMemType42",type:"ULONG",value:0},{name:"minMemType1",type:"ULONG",value:0},{name:"maxMemType1",type:"ULONG",value:0}])}},Rr=new Array(9),Lr=(Rr[1]=function(){var E=this.offset+this.relativeOffset,k=this.parseUShort();return k===1?{substFormat:1,coverage:this.parsePointer(Be.coverage),deltaGlyphId:this.parseUShort()}:k===2?{substFormat:2,coverage:this.parsePointer(Be.coverage),substitute:this.parseOffset16List()}:void U.assert(!1,"0x"+E.toString(16)+": lookup type 1 format must be 1 or 2.")},Rr[2]=function(){var E=this.parseUShort();return U.argument(E===1,"GSUB Multiple Substitution Subtable identifier-format must be 1"),{substFormat:E,coverage:this.parsePointer(Be.coverage),sequences:this.parseListOfLists()}},Rr[3]=function(){var E=this.parseUShort();return U.argument(E===1,"GSUB Alternate Substitution Subtable identifier-format must be 1"),{substFormat:E,coverage:this.parsePointer(Be.coverage),alternateSets:this.parseListOfLists()}},Rr[4]=function(){var E=this.parseUShort();return U.argument(E===1,"GSUB ligature table identifier-format must be 1"),{substFormat:E,coverage:this.parsePointer(Be.coverage),ligatureSets:this.parseListOfLists(function(){return{ligGlyph:this.parseUShort(),components:this.parseUShortList(this.parseUShort()-1)}})}},{sequenceIndex:Be.uShort,lookupListIndex:Be.uShort});Rr[5]=function(){var E,k,F=this.offset+this.relativeOffset,z=this.parseUShort();return z===1?{substFormat:z,coverage:this.parsePointer(Be.coverage),ruleSets:this.parseListOfLists(function(){var $=this.parseUShort(),se=this.parseUShort();return{input:this.parseUShortList($-1),lookupRecords:this.parseRecordList(se,Lr)}})}:z===2?{substFormat:z,coverage:this.parsePointer(Be.coverage),classDef:this.parsePointer(Be.classDef),classSets:this.parseListOfLists(function(){var $=this.parseUShort(),se=this.parseUShort();return{classes:this.parseUShortList($-1),lookupRecords:this.parseRecordList(se,Lr)}})}:z===3?(E=this.parseUShort(),k=this.parseUShort(),{substFormat:z,coverages:this.parseList(E,Be.pointer(Be.coverage)),lookupRecords:this.parseRecordList(k,Lr)}):void U.assert(!1,"0x"+F.toString(16)+": lookup type 5 format must be 1, 2 or 3.")},Rr[6]=function(){var E=this.offset+this.relativeOffset,k=this.parseUShort();return k===1?{substFormat:1,coverage:this.parsePointer(Be.coverage),chainRuleSets:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(Lr)}})}:k===2?{substFormat:2,coverage:this.parsePointer(Be.coverage),backtrackClassDef:this.parsePointer(Be.classDef),inputClassDef:this.parsePointer(Be.classDef),lookaheadClassDef:this.parsePointer(Be.classDef),chainClassSet:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(Lr)}})}:k===3?{substFormat:3,backtrackCoverage:this.parseList(Be.pointer(Be.coverage)),inputCoverage:this.parseList(Be.pointer(Be.coverage)),lookaheadCoverage:this.parseList(Be.pointer(Be.coverage)),lookupRecords:this.parseRecordList(Lr)}:void U.assert(!1,"0x"+E.toString(16)+": lookup type 6 format must be 1, 2 or 3.")},Rr[7]=function(){var E=this.parseUShort(),E=(U.argument(E===1,"GSUB Extension Substitution subtable identifier-format must be 1"),this.parseUShort()),k=new Be(this.data,this.offset+this.parseULong());return{substFormat:1,lookupType:E,extension:Rr[E].call(k)}},Rr[8]=function(){var E=this.parseUShort();return U.argument(E===1,"GSUB Reverse Chaining Contextual Single Substitution Subtable identifier-format must be 1"),{substFormat:E,coverage:this.parsePointer(Be.coverage),backtrackCoverage:this.parseList(Be.pointer(Be.coverage)),lookaheadCoverage:this.parseList(Be.pointer(Be.coverage)),substitutes:this.parseUShortList()}};var Pr=new Array(9);Pr[1]=function(E){return E.substFormat===1?new fe.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new fe.Coverage(E.coverage)},{name:"deltaGlyphID",type:"USHORT",value:E.deltaGlyphId}]):new fe.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:2},{name:"coverage",type:"TABLE",value:new fe.Coverage(E.coverage)}].concat(fe.ushortList("substitute",E.substitute)))},Pr[3]=function(E){return U.assert(E.substFormat===1,"Lookup type 3 substFormat must be 1."),new fe.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new fe.Coverage(E.coverage)}].concat(fe.tableList("altSet",E.alternateSets,function(k){return new fe.Table("alternateSetTable",fe.ushortList("alternate",k))})))},Pr[4]=function(E){return U.assert(E.substFormat===1,"Lookup type 4 substFormat must be 1."),new fe.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new fe.Coverage(E.coverage)}].concat(fe.tableList("ligSet",E.ligatureSets,function(k){return new fe.Table("ligatureSetTable",fe.tableList("ligature",k,function(F){return new fe.Table("ligatureTable",[{name:"ligGlyph",type:"USHORT",value:F.ligGlyph}].concat(fe.ushortList("component",F.components,F.components.length+1)))}))})))};var fr={parse:function(E,k){return k=(E=new Be(E,k=k||0)).parseVersion(1),U.argument(k===1||k===1.1,"Unsupported GSUB table version."),k===1?{version:k,scripts:E.parseScriptList(),features:E.parseFeatureList(),lookups:E.parseLookupList(Rr)}:{version:k,scripts:E.parseScriptList(),features:E.parseFeatureList(),lookups:E.parseLookupList(Rr),variations:E.parseFeatureVariationsList()}},make:function(E){return new fe.Table("GSUB",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new fe.ScriptList(E.scripts)},{name:"features",type:"TABLE",value:new fe.FeatureList(E.features)},{name:"lookups",type:"TABLE",value:new fe.LookupList(E.lookups,Pr)}])}},Zr={parse:function(E,k){for(var F=new Ye.Parser(E,k),z=F.parseULong(),$=(U.argument(z===1,"Unsupported META table version."),F.parseULong(),F.parseULong(),F.parseULong()),se={},le=0;le<$;le++){var we=F.parseTag(),Ie=F.parseULong(),Le=F.parseULong(),Ie=K.UTF8(E,k+Ie,Le);se[we]=Ie}return se},make:function(E){var k,F=Object.keys(E).length,z="",$=16+12*F,se=new fe.Table("meta",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"offset",type:"ULONG",value:$},{name:"numTags",type:"ULONG",value:F}]);for(k in E){var le=z.length;z+=E[k],se.fields.push({name:"tag "+k,type:"TAG",value:k}),se.fields.push({name:"offset "+k,type:"ULONG",value:$+le}),se.fields.push({name:"length "+k,type:"ULONG",value:E[k].length})}return se.fields.push({name:"stringPool",type:"CHARARRAY",value:z}),se}};function Or(E){return Math.log(E)/Math.log(2)|0}function ti(E){for(;E.length%4!=0;)E.push(0);for(var k=0,F=0;F<E.length;F+=4)k+=(E[F]<<24)+(E[F+1]<<16)+(E[F+2]<<8)+E[F+3];return k%=Math.pow(2,32)}function go(E,k,F,z){return new fe.Record("Table Record",[{name:"tag",type:"TAG",value:E!==void 0?E:""},{name:"checkSum",type:"ULONG",value:k!==void 0?k:0},{name:"offset",type:"ULONG",value:F!==void 0?F:0},{name:"length",type:"ULONG",value:z!==void 0?z:0}])}function ri(E){for(var k=new fe.Table("sfnt",[{name:"version",type:"TAG",value:"OTTO"},{name:"numTables",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]),F=(k.tables=E,k.numTables=E.length,Math.pow(2,Or(k.numTables))),z=(k.searchRange=16*F,k.entrySelector=Or(F),k.rangeShift=16*k.numTables-k.searchRange,[]),$=[],se=k.sizeOf()+go().sizeOf()*k.numTables;se%4!=0;)se+=1,$.push({name:"padding",type:"BYTE",value:0});for(var le=0;le<E.length;le+=1){var we=E[le],Le=(U.argument(we.tableName.length===4,"Table name"+we.tableName+" is invalid."),we.sizeOf()),Ie=go(we.tableName,ti(we.encode()),se,Le);for(z.push({name:Ie.tag+" Table Record",type:"RECORD",value:Ie}),$.push({name:we.tableName+" table",type:"RECORD",value:we}),se+=Le,U.argument(!isNaN(se),"Something went wrong calculating the offset.");se%4!=0;)se+=1,$.push({name:"padding",type:"BYTE",value:0})}return z.sort(function(Je,at){return Je.value.tag>at.value.tag?1:-1}),k.fields=k.fields.concat(z),k.fields=k.fields.concat($),k}function Js(E,k,F){for(var z=0;z<k.length;z+=1){var $=E.charToGlyphIndex(k[z]);if(0<$)return E.glyphs.get($).getMetrics()}return F}var Jr={make:ri,fontToTable:function(E){for(var k,F=[],z=[],$=[],se=[],le=[],we=[],Le=[],Ie=0,Je=0,at=0,nt=0,He=0,Et=0;Et<E.glyphs.length;Et+=1){var pt=E.glyphs.get(Et),xt=0|pt.unicode;if(isNaN(pt.advanceWidth))throw new Error("Glyph "+pt.name+" ("+Et+"): advanceWidth is not a number.");(xt<k||k===void 0)&&0<xt&&(k=xt),Ie<xt&&(Ie=xt);var xt=Xt.getUnicodeRange(xt);if(xt<32)Je|=1<<xt;else if(xt<64)at|=1<<xt-32;else if(xt<96)nt|=1<<xt-64;else{if(!(xt<123))throw new Error("Unicode ranges bits > 123 are reserved for internal usage");He|=1<<xt-96}pt.name!==".notdef"&&(xt=pt.getMetrics(),F.push(xt.xMin),z.push(xt.yMin),$.push(xt.xMax),se.push(xt.yMax),we.push(xt.leftSideBearing),Le.push(xt.rightSideBearing),le.push(pt.advanceWidth))}var dt,ft={xMin:Math.min.apply(null,F),yMin:Math.min.apply(null,z),xMax:Math.max.apply(null,$),yMax:Math.max.apply(null,se),advanceWidthMax:Math.max.apply(null,le),advanceWidthAvg:function(mn){for(var Ks=0,bo=0;bo<mn.length;bo+=1)Ks+=mn[bo];return Ks/mn.length}(le),minLeftSideBearing:Math.min.apply(null,we),maxLeftSideBearing:Math.max.apply(null,we),minRightSideBearing:Math.min.apply(null,Le)},ar=(ft.ascender=E.ascender,ft.descender=E.descender,Jn.make({flags:3,unitsPerEm:E.unitsPerEm,xMin:ft.xMin,yMin:ft.yMin,xMax:ft.xMax,yMax:ft.yMax,lowestRecPPEM:3,createdTimestamp:E.createdTimestamp})),wr=Fe.make({ascender:ft.ascender,descender:ft.descender,advanceWidthMax:ft.advanceWidthMax,minLeftSideBearing:ft.minLeftSideBearing,minRightSideBearing:ft.minRightSideBearing,xMaxExtent:ft.maxLeftSideBearing+(ft.xMax-ft.xMin),numberOfHMetrics:E.glyphs.length}),sr=At.make(E.glyphs.length),lr=Xt.make({xAvgCharWidth:Math.round(ft.advanceWidthAvg),usWeightClass:E.tables.os2.usWeightClass,usWidthClass:E.tables.os2.usWidthClass,usFirstCharIndex:k,usLastCharIndex:Ie,ulUnicodeRange1:Je,ulUnicodeRange2:at,ulUnicodeRange3:nt,ulUnicodeRange4:He,fsSelection:E.tables.os2.fsSelection,sTypoAscender:ft.ascender,sTypoDescender:ft.descender,sTypoLineGap:0,usWinAscent:ft.yMax,usWinDescent:Math.abs(ft.yMin),ulCodePageRange1:1,sxHeight:Js(E,"xyvw",{yMax:Math.round(ft.ascender/2)}).yMax,sCapHeight:Js(E,"HIKLEFJMNTZBDPRAGOQSUVWXY",ft).yMax,usDefaultChar:E.hasChar(" ")?32:0,usBreakChar:E.hasChar(" ")?32:0}),kr=Tt.make(E.glyphs),tn=de.make(E.glyphs),Mn=E.getEnglishName("fontFamily"),rn=E.getEnglishName("fontSubfamily"),Kr=Mn+" "+rn,Un=(Un=E.getEnglishName("postScriptName"))||Mn.replace(/\s/g,"")+"-"+rn,In={};for(dt in E.names)In[dt]=E.names[dt];In.uniqueID||(In.uniqueID={en:E.getEnglishName("manufacturer")+":"+Kr}),In.postScriptName||(In.postScriptName={en:Un}),In.preferredFamily||(In.preferredFamily=E.names.fontFamily),In.preferredSubfamily||(In.preferredSubfamily=E.names.fontSubfamily);var Vn=[],_n=Kt.make(In,Vn),Vn=0<Vn.length?Gt.make(Vn):void 0,xi=Sr.make(),Kr=jr.make(E.glyphs,{version:E.getEnglishName("version"),fullName:Kr,familyName:Mn,weightName:rn,postScriptName:Un,unitsPerEm:E.unitsPerEm,fontBBox:[0,ft.yMin,ft.ascender,ft.advanceWidthMax]}),Mn=E.metas&&0<Object.keys(E.metas).length?Zr.make(E.metas):void 0,rn=[ar,wr,sr,lr,_n,tn,xi,Kr,kr];Vn&&rn.push(Vn),E.tables.gsub&&rn.push(fr.make(E.tables.gsub)),Mn&&rn.push(Mn);for(var bi=ti((Un=ri(rn)).encode()),jn=Un.fields,Hr=!1,An=0;An<jn.length;An+=1)if(jn[An].name==="head table"){jn[An].value.checkSumAdjustment=2981146554-bi,Hr=!0;break}if(Hr)return Un;throw new Error("Could not find head table with checkSum to adjust.")},computeCheckSum:ti};function fi(E,k){for(var F=0,z=E.length-1;F<=z;){var $=F+z>>>1,se=E[$].tag;if(se===k)return $;se<k?F=1+$:z=$-1}return-F-1}function ni(E,k){for(var F=0,z=E.length-1;F<=z;){var $=F+z>>>1,se=E[$];if(se===k)return $;se<k?F=1+$:z=$-1}return-F-1}function di(E,k){for(var F=0,z=E.length-1;F<=z;){var $,se=F+z>>>1,le=($=E[se]).start;if(le===k)return $;le<k?F=1+se:z=se-1}if(0<F)return k>($=E[F-1]).end?0:$}function Bn(E,k){this.font=E,this.tableName=k}function Gr(E){Bn.call(this,E,"gpos")}function Nn(E){Bn.call(this,E,"gsub")}function _l(E,k,F){for(var z=E.subtables,$=0;$<z.length;$++){var se=z[$];if(se.substFormat===k)return se}if(F)return z.push(F),F}function Yu(E){for(var k=new ArrayBuffer(E.length),F=new Uint8Array(k),z=0;z<E.length;++z)F[z]=E[z];return k}function Oa(E,k){if(!E)throw k}function Xl(E,k,F,z,$){var se=0<(k&z)?(se=E.parseByte(),F+(se=k&$?se:-se)):0<(k&$)?F:F+E.parseShort();return se}function qu(E,k,F){var z,$=new Ye.Parser(k,F);if(E.numberOfContours=$.parseShort(),E._xMin=$.parseShort(),E._yMin=$.parseShort(),E._xMax=$.parseShort(),E._yMax=$.parseShort(),0<E.numberOfContours){for(var se=E.endPointIndices=[],le=0;le<E.numberOfContours;le+=1)se.push($.parseUShort());E.instructionLength=$.parseUShort(),E.instructions=[];for(var we=0;we<E.instructionLength;we+=1)E.instructions.push($.parseByte());for(var Le=se[se.length-1]+1,Ie=[],Je=0;Je<Le;Je+=1)if(z=$.parseByte(),Ie.push(z),0<(8&z))for(var at=$.parseByte(),nt=0;nt<at;nt+=1)Ie.push(z),Je+=1;if(U.argument(Ie.length===Le,"Bad flags."),0<se.length){var He,Et=[];if(0<Le){for(var pt=0;pt<Le;pt+=1)z=Ie[pt],(He={}).onCurve=!!(1&z),He.lastPointOfContour=0<=se.indexOf(pt),Et.push(He);for(var xt=0,dt=0;dt<Le;dt+=1)z=Ie[dt],(He=Et[dt]).x=Xl($,z,xt,2,16),xt=He.x;for(var ft=0,ar=0;ar<Le;ar+=1)z=Ie[ar],(He=Et[ar]).y=Xl($,z,ft,4,32),ft=He.y}E.points=Et}else E.points=[]}else if(E.numberOfContours===0)E.points=[];else{E.isComposite=!0,E.points=[],E.components=[];for(var wr=!0;wr;){Ie=$.parseUShort();var sr={glyphIndex:$.parseUShort(),xScale:1,scale01:0,scale10:0,yScale:1,dx:0,dy:0};0<(1&Ie)?0<(2&Ie)?(sr.dx=$.parseShort(),sr.dy=$.parseShort()):sr.matchedPoints=[$.parseUShort(),$.parseUShort()]:0<(2&Ie)?(sr.dx=$.parseChar(),sr.dy=$.parseChar()):sr.matchedPoints=[$.parseByte(),$.parseByte()],0<(8&Ie)?sr.xScale=sr.yScale=$.parseF2Dot14():0<(64&Ie)?(sr.xScale=$.parseF2Dot14(),sr.yScale=$.parseF2Dot14()):0<(128&Ie)&&(sr.xScale=$.parseF2Dot14(),sr.scale01=$.parseF2Dot14(),sr.scale10=$.parseF2Dot14(),sr.yScale=$.parseF2Dot14()),E.components.push(sr),wr=!!(32&Ie)}if(256&Ie){E.instructionLength=$.parseUShort(),E.instructions=[];for(var lr=0;lr<E.instructionLength;lr+=1)E.instructions.push($.parseByte())}}}function Fo(E,k){for(var F=[],z=0;z<E.length;z+=1){var $=E[z],$={x:k.xScale*$.x+k.scale01*$.y+k.dx,y:k.scale10*$.x+k.yScale*$.y+k.dy,onCurve:$.onCurve,lastPointOfContour:$.lastPointOfContour};F.push($)}return F}function Yl(E){var k=new Z;if(E)for(var F=function(at){for(var nt=[],He=[],Et=0;Et<at.length;Et+=1){var pt=at[Et];He.push(pt),pt.lastPointOfContour&&(nt.push(He),He=[])}return U.argument(He.length===0,"There are still points left in the current contour."),nt}(E),z=0;z<F.length;++z){var $,se=F[z],le=se[se.length-1],we=se[0];le.onCurve?k.moveTo(le.x,le.y):we.onCurve?k.moveTo(we.x,we.y):($={x:.5*(le.x+we.x),y:.5*(le.y+we.y)},k.moveTo($.x,$.y));for(var Le=0;Le<se.length;++Le){var Ie,Je=le,le=we,we=se[(Le+1)%se.length];le.onCurve?k.lineTo(le.x,le.y):(Ie=we,Je.onCurve||(le.x,Je.x,le.y,Je.y),we.onCurve||(Ie={x:.5*(le.x+we.x),y:.5*(le.y+we.y)}),k.quadraticCurveTo(le.x,le.y,Ie.x,Ie.y))}k.closePath()}return k}function yo(E,k){if(k.isComposite)for(var F=0;F<k.components.length;F+=1){var z=k.components[F],$=E.get(z.glyphIndex);if($.getPath(),$.points){var se=void 0;if(z.matchedPoints===void 0)se=Fo($.points,z);else{if(z.matchedPoints[0]>k.points.length-1||z.matchedPoints[1]>$.points.length-1)throw Error("Matched points out of range in "+k.name);var le=k.points[z.matchedPoints[0]],we=$.points[z.matchedPoints[1]],z={xScale:z.xScale,scale01:z.scale01,scale10:z.scale10,yScale:z.yScale,dx:0,dy:0},we=Fo([we],z)[0];z.dx=le.x-we.x,z.dy=le.y-we.y,se=Fo($.points,z)}k.points=k.points.concat(se)}}return Yl(k.points)}(Gr.prototype=Bn.prototype={searchTag:fi,binSearch:ni,getTable:function(E){var k=this.font.tables[this.tableName];return k=!k&&E?this.font.tables[this.tableName]=this.createDefaultTable():k},getScriptNames:function(){var E=this.getTable();return E?E.scripts.map(function(k){return k.tag}):[]},getDefaultScriptName:function(){var E=this.getTable();if(E){for(var k=!1,F=0;F<E.scripts.length;F++){var z=E.scripts[F].tag;if(z==="DFLT")return z;z==="latn"&&(k=!0)}return k?"latn":void 0}},getScriptTable:function(E,k){var F,z=this.getTable(k);if(z)return F=z.scripts,0<=(z=fi(z.scripts,E=E||"DFLT"))?F[z].script:k?(F.splice(-1-z,0,k={tag:E,script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}),k.script):void 0},getLangSysTable:function($,k,F){var z,$=this.getScriptTable($,F);if($)return k&&k!=="dflt"&&k!=="DFLT"?0<=(z=fi($.langSysRecords,k))?$.langSysRecords[z].langSys:F?($.langSysRecords.splice(-1-z,0,F={tag:k,langSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]}}),F.langSys):void 0:$.defaultLangSys},getFeatureTable:function(E,k,F,z){if(E=this.getLangSysTable(E,k,z),E){for(var $,se=E.featureIndexes,le=this.font.tables[this.tableName].features,we=0;we<se.length;we++)if(($=le[se[we]]).tag===F)return $.feature;if(z)return k=le.length,U.assert(k===0||F>=le[k-1].tag,"Features must be added in alphabetical order."),le.push($={tag:F,feature:{params:0,lookupListIndexes:[]}}),se.push(k),$.feature}},getLookupTables:function(se,k,F,z,$){var se=this.getFeatureTable(se,k,F,$),le=[];if(se){for(var we,Le=se.lookupListIndexes,Ie=this.font.tables[this.tableName].lookups,Je=0;Je<Le.length;Je++)(we=Ie[Le[Je]]).lookupType===z&&le.push(we);if(le.length===0&&$)return k=Ie.length,Ie.push(we={lookupType:z,lookupFlag:0,subtables:[],markFilteringSet:void 0}),Le.push(k),[we]}return le},getGlyphClass:function(E,k){switch(E.format){case 1:return E.startGlyph<=k&&k<E.startGlyph+E.classes.length?E.classes[k-E.startGlyph]:0;case 2:var F=di(E.ranges,k);return F?F.classId:0}},getCoverageIndex:function(E,k){switch(E.format){case 1:var F=ni(E.glyphs,k);return 0<=F?F:-1;case 2:return F=di(E.ranges,k),F?F.index+k-F.start:-1}},expandCoverage:function(E){if(E.format===1)return E.glyphs;for(var k=[],F=E.ranges,z=0;z<F.length;z++)for(var $=F[z],se=$.start,le=$.end,we=se;we<=le;we++)k.push(we);return k}}).init=function(){var E=this.getDefaultScriptName();this.defaultKerningTables=this.getKerningTables(E)},Gr.prototype.getKerningValue=function(E,k,F){for(var z=0;z<E.length;z++)for(var $=E[z].subtables,se=0;se<$.length;se++){var le=$[se],we=this.getCoverageIndex(le.coverage,k);if(!(we<0))switch(le.posFormat){case 1:for(var Le=le.pairSets[we],Ie=0;Ie<Le.length;Ie++){var Je=Le[Ie];if(Je.secondGlyph===F)return Je.value1&&Je.value1.xAdvance||0}break;case 2:var nt=this.getGlyphClass(le.classDef1,k),at=this.getGlyphClass(le.classDef2,F),nt=le.classRecords[nt][at];return nt.value1&&nt.value1.xAdvance||0}}return 0},Gr.prototype.getKerningTables=function(E,k){if(this.font.tables.gpos)return this.getLookupTables(E,k,"kern",2)},(Nn.prototype=Bn.prototype).createDefaultTable=function(){return{version:1,scripts:[{tag:"DFLT",script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}],features:[],lookups:[]}},Nn.prototype.getSingle=function(E,k,F){for(var z=[],$=this.getLookupTables(k,F,E,1),se=0;se<$.length;se++)for(var le=$[se].subtables,we=0;we<le.length;we++){var Le=le[we],Ie=this.expandCoverage(Le.coverage),Je=void 0;if(Le.substFormat===1)for(var at=Le.deltaGlyphId,Je=0;Je<Ie.length;Je++){var nt=Ie[Je];z.push({sub:nt,by:nt+at})}else{var He=Le.substitute;for(Je=0;Je<Ie.length;Je++)z.push({sub:Ie[Je],by:He[Je]})}}return z},Nn.prototype.getAlternates=function(E,k,F){for(var z=[],$=this.getLookupTables(k,F,E,3),se=0;se<$.length;se++)for(var le=$[se].subtables,we=0;we<le.length;we++)for(var Le=le[we],Ie=this.expandCoverage(Le.coverage),Je=Le.alternateSets,at=0;at<Ie.length;at++)z.push({sub:Ie[at],by:Je[at]});return z},Nn.prototype.getLigatures=function(E,k,F){for(var z=[],$=this.getLookupTables(k,F,E,4),se=0;se<$.length;se++)for(var le=$[se].subtables,we=0;we<le.length;we++)for(var Le=le[we],Ie=this.expandCoverage(Le.coverage),Je=Le.ligatureSets,at=0;at<Ie.length;at++)for(var nt=Ie[at],He=Je[at],Et=0;Et<He.length;Et++){var pt=He[Et];z.push({sub:[nt].concat(pt.components),by:pt.ligGlyph})}return z},Nn.prototype.addSingle=function(E,k,F,z){F=_l(this.getLookupTables(F,z,E,1,!0)[0],2,{substFormat:2,coverage:{format:1,glyphs:[]},substitute:[]}),U.assert(F.coverage.format===1,"Ligature: unable to modify coverage table format "+F.coverage.format),z=k.sub,E=this.binSearch(F.coverage.glyphs,z),E<0&&(F.coverage.glyphs.splice(E=-1-E,0,z),F.substitute.splice(E,0,0)),F.substitute[E]=k.by},Nn.prototype.addAlternate=function(E,k,F,z){F=_l(this.getLookupTables(F,z,E,3,!0)[0],1,{substFormat:1,coverage:{format:1,glyphs:[]},alternateSets:[]}),U.assert(F.coverage.format===1,"Ligature: unable to modify coverage table format "+F.coverage.format),z=k.sub,E=this.binSearch(F.coverage.glyphs,z),E<0&&(F.coverage.glyphs.splice(E=-1-E,0,z),F.alternateSets.splice(E,0,0)),F.alternateSets[E]=k.by},Nn.prototype.addLigature=function(se,Le,we,$){var we=this.getLookupTables(we,$,se,4,!0)[0],$=we.subtables[0],se=($||(we.subtables[0]=$={substFormat:1,coverage:{format:1,glyphs:[]},ligatureSets:[]}),U.assert($.coverage.format===1,"Ligature: unable to modify coverage table format "+$.coverage.format),Le.sub[0]),le=Le.sub.slice(1),we={ligGlyph:Le.by,components:le},Le=this.binSearch($.coverage.glyphs,se);if(0<=Le){for(var Ie=$.ligatureSets[Le],Je=0;Je<Ie.length;Je++)if(function(at,nt){var He=at.length;if(He===nt.length){for(var Et=0;Et<He;Et++)if(at[Et]!==nt[Et])return;return 1}}(Ie[Je].components,le))return;Ie.push(we)}else $.coverage.glyphs.splice(Le=-1-Le,0,se),$.ligatureSets.splice(Le,0,[we])},Nn.prototype.getFeature=function(E,k,F){if(/ss\d\d/.test(E))return this.getSingle(E,k,F);switch(E){case"aalt":case"salt":return this.getSingle(E,k,F).concat(this.getAlternates(E,k,F));case"dlig":case"liga":case"rlig":return this.getLigatures(E,k,F)}},Nn.prototype.add=function(E,k,F,z){if(/ss\d\d/.test(E))return this.addSingle(E,k,F,z);switch(E){case"aalt":case"salt":return typeof k.by=="number"?this.addSingle(E,k,F,z):this.addAlternate(E,k,F,z);case"dlig":case"liga":case"rlig":return this.addLigature(E,k,F,z)}};var Fr={getPath:Yl,parse:function(E,k,F,z){for(var $=new vt.GlyphSet(z),se=0;se<F.length-1;se+=1){var le=F[se];le!==F[se+1]?$.push(se,vt.ttfGlyphLoader(z,se,qu,E,k+le,yo)):$.push(se,vt.glyphLoader(z,se))}return $}};function vo(E){this.font=E,this.getCommands=function(k){return Fr.getPath(k).commands},this._fpgmState=this._prepState=void 0,this._errorState=0}function Fa(E){return E}function Na(E){return Math.sign(E)*Math.round(Math.abs(E))}function ha(E){return Math.sign(E)*Math.round(Math.abs(2*E))/2}function Dp(E){return Math.sign(E)*(Math.round(Math.abs(E)+.5)-.5)}function ii(E){return Math.sign(E)*Math.ceil(Math.abs(E))}function Ua(E){return Math.sign(E)*Math.floor(Math.abs(E))}function Gd(E){var k=this.srPeriod,F=this.srPhase,z=1;return E<0&&(E=-E,z=-1),E+=this.srThreshold-F,E=Math.trunc(E/k)*k,(E+=F)<0?F*z:E*z}var ps={x:1,y:0,axis:"x",distance:function(E,k,F,z){return(F?E.xo:E.x)-(z?k.xo:k.x)},interpolate:function(E,k,F,z){var $,se,le,we,Le,Ie,Je;if(!z||z===this)return $=E.xo-k.xo,se=E.xo-F.xo,Le=k.x-k.xo,Ie=F.x-F.xo,(Je=(le=Math.abs($))+(we=Math.abs(se)))===0?void(E.x=E.xo+(Le+Ie)/2):void(E.x=E.xo+(Le*we+Ie*le)/Je);$=z.distance(E,k,!0,!0),se=z.distance(E,F,!0,!0),Le=z.distance(k,k,!1,!0),Ie=z.distance(F,F,!1,!0),(Je=(le=Math.abs($))+(we=Math.abs(se)))===0?ps.setRelative(E,E,(Le+Ie)/2,z,!0):ps.setRelative(E,E,(Le*we+Ie*le)/Je,z,!0)},normalSlope:Number.NEGATIVE_INFINITY,setRelative:function(E,k,F,z,$){var se,le;z&&z!==this?(se=$?k.xo:k.x,le=$?k.yo:k.y,se+=F*z.x,le+=F*z.y,E.x=se+(E.y-le)/z.normalSlope):E.x=($?k.xo:k.x)+F},slope:0,touch:function(E){E.xTouched=!0},touched:function(E){return E.xTouched},untouch:function(E){E.xTouched=!1}},Ps={x:0,y:1,axis:"y",distance:function(E,k,F,z){return(F?E.yo:E.y)-(z?k.yo:k.y)},interpolate:function(E,k,F,z){var $,se,le,we,Le,Ie,Je;if(!z||z===this)return $=E.yo-k.yo,se=E.yo-F.yo,Le=k.y-k.yo,Ie=F.y-F.yo,(Je=(le=Math.abs($))+(we=Math.abs(se)))===0?void(E.y=E.yo+(Le+Ie)/2):void(E.y=E.yo+(Le*we+Ie*le)/Je);$=z.distance(E,k,!0,!0),se=z.distance(E,F,!0,!0),Le=z.distance(k,k,!1,!0),Ie=z.distance(F,F,!1,!0),(Je=(le=Math.abs($))+(we=Math.abs(se)))===0?Ps.setRelative(E,E,(Le+Ie)/2,z,!0):Ps.setRelative(E,E,(Le*we+Ie*le)/Je,z,!0)},normalSlope:0,setRelative:function(E,k,F,z,$){var se,le;z&&z!==this?(se=$?k.xo:k.x,le=$?k.yo:k.y,se+=F*z.x,le+=F*z.y,E.y=le+z.normalSlope*(E.x-se)):E.y=($?k.yo:k.y)+F},slope:Number.POSITIVE_INFINITY,touch:function(E){E.yTouched=!0},touched:function(E){return E.yTouched},untouch:function(E){E.yTouched=!1}};function No(E,k){this.x=E,this.y=k,this.axis=void 0,this.slope=k/E,this.normalSlope=-E/k,Object.freeze(this)}function es(E,k){var F=Math.sqrt(E*E+k*k);return k/=F,(E/=F)===1&&k===0?ps:E===0&&k===1?Ps:new No(E,k)}function ms(E,k,F,z){this.x=this.xo=Math.round(64*E)/64,this.y=this.yo=Math.round(64*k)/64,this.lastPointOfContour=F,this.onCurve=z,this.prevPointOnContour=void 0,this.nextPointOnContour=void 0,this.xTouched=!1,this.yTouched=!1,Object.preventExtensions(this)}Object.freeze(ps),Object.freeze(Ps),No.prototype.distance=function(E,k,F,z){return this.x*ps.distance(E,k,F,z)+this.y*Ps.distance(E,k,F,z)},No.prototype.interpolate=function(E,$,se,z){var le=z.distance(E,$,!0,!0),we=z.distance(E,se,!0,!0),$=z.distance($,$,!1,!0),se=z.distance(se,se,!1,!0),le=Math.abs(le),we=Math.abs(we),Le=le+we;Le===0?this.setRelative(E,E,($+se)/2,z,!0):this.setRelative(E,E,($*we+se*le)/Le,z,!0)},No.prototype.setRelative=function(E,se,Le,Ie,we){var le=we?se.xo:se.x,we=we?se.yo:se.y,se=le+Le*(Ie=Ie||this).x,le=we+Le*Ie.y,we=Ie.normalSlope,Le=this.slope,Ie=E.x,Je=E.y;E.x=(Le*Ie-we*se+le-Je)/(Le-we),E.y=Le*(E.x-Ie)+Je},No.prototype.touch=function(E){E.xTouched=!0,E.yTouched=!0},ms.prototype.nextTouched=function(E){for(var k=this.nextPointOnContour;!E.touched(k)&&k!==this;)k=k.nextPointOnContour;return k},ms.prototype.prevTouched=function(E){for(var k=this.prevPointOnContour;!E.touched(k)&&k!==this;)k=k.prevPointOnContour;return k};var Uo=Object.freeze(new ms(0,0)),Ui={cvCutIn:17/16,deltaBase:9,deltaShift:.125,loop:1,minDis:1,autoFlip:!0};function si(E,k){switch(this.env=E,this.stack=[],this.prog=k,E){case"glyf":this.zp0=this.zp1=this.zp2=1,this.rp0=this.rp1=this.rp2=0;case"prep":this.fv=this.pv=this.dpv=ps,this.round=Na}}function Ga(E){for(var k=E.tZone=new Array(E.gZone.length),F=0;F<k.length;F++)k[F]=new ms(0,0)}function Ju(E,k){var F,z=E.prog,$=E.ip,se=1;do if((F=z[++$])===88)se++;else if(F===89)se--;else if(F===64)$+=z[$+1]+1;else if(F===65)$+=2*z[$+1]+1;else if(176<=F&&F<=183)$+=F-176+1;else if(184<=F&&F<=191)$+=2*(F-184+1);else if(k&&se===1&&F===27)break;while(0<se);E.ip=$}function ql(E,k){u.DEBUG&&console.log(k.step,"SVTCA["+E.axis+"]"),k.fv=k.pv=k.dpv=E}function Jl(E,k){u.DEBUG&&console.log(k.step,"SPVTCA["+E.axis+"]"),k.pv=k.dpv=E}function gs(E,k){u.DEBUG&&console.log(k.step,"SFVTCA["+E.axis+"]"),k.fv=E}function Qc(E,k){var F,$=k.stack,z=$.pop(),$=$.pop(),se=k.z2[z],le=k.z1[$];u.DEBUG&&console.log("SPVTL["+E+"]",z,$),z=E?(F=se.y-le.y,le.x-se.x):(F=le.x-se.x,le.y-se.y),k.pv=k.dpv=es(F,z)}function Is(E,k){var F,$=k.stack,z=$.pop(),$=$.pop(),se=k.z2[z],le=k.z1[$];u.DEBUG&&console.log("SFVTL["+E+"]",z,$),z=E?(F=se.y-le.y,le.x-se.x):(F=le.x-se.x,le.y-se.y),k.fv=es(F,z)}function Kl(E){u.DEBUG&&console.log(E.step,"POP[]"),E.stack.pop()}function Gi(E,k){var F=k.stack.pop(),z=k.z0[F],$=k.fv,se=k.pv,le=(u.DEBUG&&console.log(k.step,"MDAP["+E+"]",F),se.distance(z,Uo));E&&(le=k.round(le)),$.setRelative(z,Uo,le,se),$.touch(z),k.rp0=k.rp1=F}function xl(E,k){var F,z,$,se=k.z2,le=se.length-2;u.DEBUG&&console.log(k.step,"IUP["+E.axis+"]");for(var we=0;we<le;we++)F=se[we],E.touched(F)||(z=F.prevTouched(E))!==F&&(z===($=F.nextTouched(E))&&E.setRelative(F,F,E.distance(z,z,!1,!0),E,!0),E.interpolate(F,z,$,E))}function pa(E,k){for(var F=k.stack,z=E?k.rp1:k.rp2,$=(E?k.z0:k.z1)[z],se=k.fv,le=k.pv,we=k.loop,Le=k.z2;we--;){var Ie=F.pop(),Je=Le[Ie],at=le.distance($,$,!1,!0);se.setRelative(Je,Je,at,le),se.touch(Je),u.DEBUG&&console.log(k.step,(1<k.loop?"loop "+(k.loop-we)+": ":"")+"SHP["+(E?"rp1":"rp2")+"]",Ie)}k.loop=1}function _o(E,k){for(var F=k.stack,le=E?k.rp1:k.rp2,z=(E?k.z0:k.z1)[le],$=k.fv,se=k.pv,le=F.pop(),we=k.z2[k.contours[le]],Le=we,Ie=(u.DEBUG&&console.log(k.step,"SHC["+E+"]",le),se.distance(z,z,!1,!0));Le!==z&&$.setRelative(Le,Le,Ie,se),(Le=Le.nextPointOnContour)!==we;);}function Ql(E,k){var F,z,we=k.stack,$=E?k.rp1:k.rp2,$=(E?k.z0:k.z1)[$],se=k.fv,le=k.pv,we=we.pop();switch(u.DEBUG&&console.log(k.step,"SHZ["+E+"]",we),we){case 0:F=k.tZone;break;case 1:F=k.gZone;break;default:throw new Error("Invalid zone")}for(var Le=le.distance($,$,!1,!0),Ie=F.length-2,Je=0;Je<Ie;Je++)z=F[Je],se.setRelative(z,z,Le,le)}function Ri(E,k){var z=k.stack,F=z.pop()/64,z=z.pop(),$=k.z1[z],se=k.z0[k.rp0],le=k.fv,we=k.pv;le.setRelative($,se,F,we),le.touch($),u.DEBUG&&console.log(k.step,"MSIRP["+E+"]",F,z),k.rp1=k.rp0,k.rp2=z,E&&(k.rp0=z)}function ma(E,k){var F=k.stack,we=F.pop(),F=F.pop(),z=k.z0[F],$=k.fv,se=k.pv,le=k.cvt[we],we=(u.DEBUG&&console.log(k.step,"MIAP["+E+"]",we,"(",le,")",F),se.distance(z,Uo));E&&(Math.abs(we-le)<k.cvCutIn&&(we=le),we=k.round(we)),$.setRelative(z,Uo,we,se),k.zp0===0&&(z.xo=z.x,z.yo=z.y),$.touch(z),k.rp0=k.rp1=F}function bl(E,k){var F=k.stack,z=F.pop(),$=k.z2[z];u.DEBUG&&console.log(k.step,"GC["+E+"]",z),F.push(64*k.dpv.distance($,Uo,E,!1))}function ga(E,k){var z=k.stack,F=z.pop(),z=z.pop(),$=k.z1[F],se=k.z0[z],se=k.dpv.distance(se,$,E,E);u.DEBUG&&console.log(k.step,"MD["+E+"]",F,z,"->",se),k.stack.push(Math.round(64*se))}function ya(E,k){var F=k.stack,z=F.pop(),$=k.fv,se=k.pv,le=k.ppem,we=k.deltaBase+16*(E-1),Le=k.deltaShift,Ie=k.z0;u.DEBUG&&console.log(k.step,"DELTAP["+E+"]",z,F);for(var Je=0;Je<z;Je++){var at=F.pop(),nt=F.pop();we+((240&nt)>>4)===le&&(0<=(nt=(15&nt)-8)&&nt++,u.DEBUG&&console.log(k.step,"DELTAPFIX",at,"by",nt*Le),at=Ie[at],$.setRelative(at,at,nt*Le,se))}}function _i(E,k){var F=k.stack,z=F.pop();u.DEBUG&&console.log(k.step,"ROUND[]"),F.push(64*k.round(z/64))}function ts(E,k){var F=k.stack,z=F.pop(),$=k.ppem,se=k.deltaBase+16*(E-1),le=k.deltaShift;u.DEBUG&&console.log(k.step,"DELTAC["+E+"]",z,F);for(var we=0;we<z;we++){var Le=F.pop(),Ie=F.pop();se+((240&Ie)>>4)===$&&(0<=(Ie=(15&Ie)-8)&&Ie++,Ie=Ie*le,u.DEBUG&&console.log(k.step,"DELTACFIX",Le,"by",Ie),k.cvt[Le]+=Ie)}}function ys(E,k){var F,$=k.stack,z=$.pop(),$=$.pop(),se=k.z2[z],le=k.z1[$];u.DEBUG&&console.log(k.step,"SDPVTL["+E+"]",z,$),z=E?(F=se.y-le.y,le.x-se.x):(F=le.x-se.x,le.y-se.y),k.dpv=es(F,z)}function vs(E,k){var F=k.stack,z=k.prog,$=k.ip;u.DEBUG&&console.log(k.step,"PUSHB["+E+"]");for(var se=0;se<E;se++)F.push(z[++$]);k.ip=$}function xo(E,k){var F=k.ip,z=k.prog,$=k.stack;u.DEBUG&&console.log(k.ip,"PUSHW["+E+"]");for(var se=0;se<E;se++){var le=z[++F]<<8|z[++F];32768&le&&(le=-(1+(65535^le))),$.push(le)}k.ip=F}function er(E,k,F,z,$,se){var le,we,Ie=se.stack,Le=E&&Ie.pop(),Ie=Ie.pop(),Je=se.rp0,Je=se.z0[Je],at=se.z1[Ie],nt=se.minDis,He=se.fv,Et=se.dpv,pt=le=Et.distance(at,Je,!0,!0),xt=0<=pt?1:-1;pt=Math.abs(pt),E&&(we=se.cvt[Le],z&&Math.abs(pt-we)<se.cvCutIn&&(pt=we)),F&&pt<nt&&(pt=nt),z&&(pt=se.round(pt)),He.setRelative(at,Je,xt*pt,Et),He.touch(at),u.DEBUG&&console.log(se.step,(E?"MIRP[":"MDRP[")+(k?"M":"m")+(F?">":"_")+(z?"R":"_")+($===0?"Gr":$===1?"Bl":$===2?"Wh":"")+"]",E?Le+"("+se.cvt[Le]+","+we+")":"",Ie,"(d =",le,"->",xt*pt,")"),se.rp1=se.rp0,se.rp2=Ie,k&&(se.rp0=Ie)}vo.prototype.exec=function(E,k){if(typeof k!="number")throw new Error("Point size is not a number!");if(!(2<this._errorState)){var F=this.font,z=this._prepState;if(!z||z.ppem!==k){var $=this._fpgmState;if(!$){si.prototype=Ui,($=this._fpgmState=new si("fpgm",F.tables.fpgm)).funcs=[],$.font=F,u.DEBUG&&(console.log("---EXEC FPGM---"),$.step=-1);try{Go($)}catch(Ie){return console.log("Hinting error in FPGM:"+Ie),void(this._errorState=3)}}si.prototype=$,(z=this._prepState=new si("prep",F.tables.prep)).ppem=k;var se=F.tables.cvt;if(se)for(var le=z.cvt=new Array(se.length),we=k/F.unitsPerEm,Le=0;Le<se.length;Le++)le[Le]=se[Le]*we;else z.cvt=[];u.DEBUG&&(console.log("---EXEC PREP---"),z.step=-1);try{Go(z)}catch(Ie){this._errorState<2&&console.log("Hinting error in PREP:"+Ie),this._errorState=2}}if(!(1<this._errorState))try{return va(E,z)}catch(Ie){this._errorState<1&&(console.log("Hinting error:"+Ie),console.log("Note: further hinting errors are silenced")),this._errorState=1}}};var va=function(E,k){var F=k.ppem/k.font.unitsPerEm,z=F,$=E.components;if(si.prototype=k,$){for(var se=k.font,le=[],we=[],Le=0;Le<$.length;Le++){var Ie=$[Le],Je=se.glyphs.get(Ie.glyphIndex),at=new si("glyf",Je.instructions);u.DEBUG&&(console.log("---EXEC COMP "+Le+"---"),at.step=-1),Zl(Je,at,F,z);for(var nt=Math.round(Ie.dx*F),He=Math.round(Ie.dy*z),Et=at.gZone,pt=at.contours,xt=0;xt<Et.length;xt++){var dt=Et[xt];dt.xTouched=dt.yTouched=!1,dt.xo=dt.x=dt.x+nt,dt.yo=dt.y=dt.y+He}var ft=le.length;le.push.apply(le,Et);for(var ar=0;ar<pt.length;ar++)we.push(pt[ar]+ft)}E.instructions&&!at.inhibitGridFit&&((at=new si("glyf",E.instructions)).gZone=at.z0=at.z1=at.z2=le,at.contours=we,le.push(new ms(0,0),new ms(Math.round(E.advanceWidth*F),0)),u.DEBUG&&(console.log("---EXEC COMPOSITE---"),at.step=-1),Go(at),le.length-=2)}else at=new si("glyf",E.instructions),u.DEBUG&&(console.log("---EXEC GLYPH---"),at.step=-1),Zl(E,at,F,z),le=at.gZone;return le},Zl=function(E,k,F,z){for(var $,se,le,we=E.points||[],Le=we.length,Ie=k.gZone=k.z0=k.z1=k.z2=[],Je=k.contours=[],at=0;at<Le;at++)$=we[at],Ie[at]=new ms($.x*F,$.y*z,$.lastPointOfContour,$.onCurve);for(var nt=0;nt<Le;nt++)$=Ie[nt],se||(se=$,Je.push(nt)),$.lastPointOfContour?(($.nextPointOnContour=se).prevPointOnContour=$,se=void 0):(le=Ie[nt+1],($.nextPointOnContour=le).prevPointOnContour=$);if(!k.inhibitGridFit){if(u.DEBUG){console.log("PROCESSING GLYPH",k.stack);for(var He=0;He<Le;He++)console.log(He,Ie[He].x,Ie[He].y)}if(Ie.push(new ms(0,0),new ms(Math.round(E.advanceWidth*F),0)),Go(k),Ie.length-=2,u.DEBUG){console.log("FINISHED GLYPH",k.stack);for(var Et=0;Et<Le;Et++)console.log(Et,Ie[Et].x,Ie[Et].y)}}},Go=function(E){var k=E.prog;if(k){var F,z=k.length;for(E.ip=0;E.ip<z;E.ip++){if(u.DEBUG&&E.step++,!(F=Ku[k[E.ip]]))throw new Error("unknown instruction: 0x"+Number(k[E.ip]).toString(16));F(E)}}},Ku=[ql.bind(void 0,Ps),ql.bind(void 0,ps),Jl.bind(void 0,Ps),Jl.bind(void 0,ps),gs.bind(void 0,Ps),gs.bind(void 0,ps),Qc.bind(void 0,0),Qc.bind(void 0,1),Is.bind(void 0,0),Is.bind(void 0,1),function(E){var k=(F=E.stack).pop(),F=F.pop();u.DEBUG&&console.log(E.step,"SPVFS[]",k,F),E.pv=E.dpv=es(F,k)},function(E){var k=(F=E.stack).pop(),F=F.pop();u.DEBUG&&console.log(E.step,"SPVFS[]",k,F),E.fv=es(F,k)},function(E){var k=E.stack,F=E.pv;u.DEBUG&&console.log(E.step,"GPV[]"),k.push(16384*F.x),k.push(16384*F.y)},function(E){var k=E.stack,F=E.fv;u.DEBUG&&console.log(E.step,"GFV[]"),k.push(16384*F.x),k.push(16384*F.y)},function(E){E.fv=E.pv,u.DEBUG&&console.log(E.step,"SFVTPV[]")},function(k){var F=(le=k.stack).pop(),z=le.pop(),$=le.pop(),se=le.pop(),le=le.pop(),Le=k.z0,Je=k.z1,we=Le[F],Le=Le[z],Ie=Je[$],Je=Je[se],k=k.z2[le],F=(u.DEBUG&&console.log("ISECT[], ",F,z,$,se,le),we.x),z=we.y,$=Le.x,se=Le.y,le=Ie.x,we=Ie.y,Le=Je.x,Ie=Je.y,Je=(F-$)*(we-Ie)-(z-se)*(le-Le),at=F*se-z*$,nt=le*Ie-we*Le;k.x=(at*(le-Le)-nt*(F-$))/Je,k.y=(at*(we-Ie)-nt*(z-se))/Je},function(E){E.rp0=E.stack.pop(),u.DEBUG&&console.log(E.step,"SRP0[]",E.rp0)},function(E){E.rp1=E.stack.pop(),u.DEBUG&&console.log(E.step,"SRP1[]",E.rp1)},function(E){E.rp2=E.stack.pop(),u.DEBUG&&console.log(E.step,"SRP2[]",E.rp2)},function(E){var k=E.stack.pop();switch(u.DEBUG&&console.log(E.step,"SZP0[]",k),E.zp0=k){case 0:E.tZone||Ga(E),E.z0=E.tZone;break;case 1:E.z0=E.gZone;break;default:throw new Error("Invalid zone pointer")}},function(E){var k=E.stack.pop();switch(u.DEBUG&&console.log(E.step,"SZP1[]",k),E.zp1=k){case 0:E.tZone||Ga(E),E.z1=E.tZone;break;case 1:E.z1=E.gZone;break;default:throw new Error("Invalid zone pointer")}},function(E){var k=E.stack.pop();switch(u.DEBUG&&console.log(E.step,"SZP2[]",k),E.zp2=k){case 0:E.tZone||Ga(E),E.z2=E.tZone;break;case 1:E.z2=E.gZone;break;default:throw new Error("Invalid zone pointer")}},function(E){var k=E.stack.pop();switch(u.DEBUG&&console.log(E.step,"SZPS[]",k),E.zp0=E.zp1=E.zp2=k){case 0:E.tZone||Ga(E),E.z0=E.z1=E.z2=E.tZone;break;case 1:E.z0=E.z1=E.z2=E.gZone;break;default:throw new Error("Invalid zone pointer")}},function(E){E.loop=E.stack.pop(),u.DEBUG&&console.log(E.step,"SLOOP[]",E.loop)},function(E){u.DEBUG&&console.log(E.step,"RTG[]"),E.round=Na},function(E){u.DEBUG&&console.log(E.step,"RTHG[]"),E.round=Dp},function(E){var k=E.stack.pop();u.DEBUG&&console.log(E.step,"SMD[]",k),E.minDis=k/64},function(E){u.DEBUG&&console.log(E.step,"ELSE[]"),Ju(E,!1)},function(E){var k=E.stack.pop();u.DEBUG&&console.log(E.step,"JMPR[]",k),E.ip+=k-1},function(E){var k=E.stack.pop();u.DEBUG&&console.log(E.step,"SCVTCI[]",k),E.cvCutIn=k/64},void 0,void 0,function(E){var k=E.stack;u.DEBUG&&console.log(E.step,"DUP[]"),k.push(k[k.length-1])},Kl,function(E){u.DEBUG&&console.log(E.step,"CLEAR[]"),E.stack.length=0},function(E){var k=E.stack,F=k.pop(),z=k.pop();u.DEBUG&&console.log(E.step,"SWAP[]"),k.push(F),k.push(z)},function(E){var k=E.stack;u.DEBUG&&console.log(E.step,"DEPTH[]"),k.push(k.length)},function(E){var k=E.stack,F=k.pop();u.DEBUG&&console.log(E.step,"CINDEX[]",F),k.push(k[k.length-F])},function(E){var k=E.stack,F=k.pop();u.DEBUG&&console.log(E.step,"MINDEX[]",F),k.push(k.splice(k.length-F,1)[0])},void 0,void 0,void 0,function(E){var k=(z=E.stack).pop(),F=z.pop(),z=(u.DEBUG&&console.log(E.step,"LOOPCALL[]",k,F),E.ip),$=E.prog;E.prog=E.funcs[k];for(var se=0;se<F;se++)Go(E),u.DEBUG&&console.log(++E.step,se+1<F?"next loopcall":"done loopcall",se);E.ip=z,E.prog=$},function(E){var k=E.stack.pop(),F=(u.DEBUG&&console.log(E.step,"CALL[]",k),E.ip),z=E.prog;E.prog=E.funcs[k],Go(E),E.ip=F,E.prog=z,u.DEBUG&&console.log(++E.step,"returning from",k)},function(E){if(E.env!=="fpgm")throw new Error("FDEF not allowed here");var z=E.stack,k=E.prog,F=E.ip,z=z.pop(),$=F;for(u.DEBUG&&console.log(E.step,"FDEF[]",z);k[++F]!==45;);E.ip=F,E.funcs[z]=k.slice($+1,F)},void 0,Gi.bind(void 0,0),Gi.bind(void 0,1),xl.bind(void 0,Ps),xl.bind(void 0,ps),pa.bind(void 0,0),pa.bind(void 0,1),_o.bind(void 0,0),_o.bind(void 0,1),Ql.bind(void 0,0),Ql.bind(void 0,1),function(E){for(var k=E.stack,F=E.loop,z=E.fv,$=k.pop()/64,se=E.z2;F--;){var le=k.pop(),we=se[le];u.DEBUG&&console.log(E.step,(1<E.loop?"loop "+(E.loop-F)+": ":"")+"SHPIX[]",le,$),z.setRelative(we,we,$),z.touch(we)}E.loop=1},function(E){for(var k=E.stack,F=E.rp1,z=E.rp2,$=E.loop,se=E.z0[F],le=E.z1[z],we=E.fv,Le=E.dpv,Ie=E.z2;$--;){var Je=k.pop(),at=Ie[Je];u.DEBUG&&console.log(E.step,(1<E.loop?"loop "+(E.loop-$)+": ":"")+"IP[]",Je,F,"<->",z),we.interpolate(at,se,le,Le),we.touch(at)}E.loop=1},Ri.bind(void 0,0),Ri.bind(void 0,1),function(E){for(var k=E.stack,F=E.rp0,z=E.z0[F],$=E.loop,se=E.fv,le=E.pv,we=E.z1;$--;){var Le=k.pop(),Ie=we[Le];u.DEBUG&&console.log(E.step,(1<E.loop?"loop "+(E.loop-$)+": ":"")+"ALIGNRP[]",Le),se.setRelative(Ie,z,0,le),se.touch(Ie)}E.loop=1},function(E){u.DEBUG&&console.log(E.step,"RTDG[]"),E.round=ha},ma.bind(void 0,0),ma.bind(void 0,1),function(E){var k=E.prog,F=E.ip,z=E.stack,$=k[++F];u.DEBUG&&console.log(E.step,"NPUSHB[]",$);for(var se=0;se<$;se++)z.push(k[++F]);E.ip=F},function(E){var k=E.ip,F=E.prog,z=E.stack,$=F[++k];u.DEBUG&&console.log(E.step,"NPUSHW[]",$);for(var se=0;se<$;se++){var le=F[++k]<<8|F[++k];32768&le&&(le=-(1+(65535^le))),z.push(le)}E.ip=k},function(E){var z=E.stack,k=(k=E.store)||(E.store=[]),F=z.pop(),z=z.pop();u.DEBUG&&console.log(E.step,"WS",F,z),k[z]=F},function($){var k=$.stack,F=$.store,z=k.pop(),$=(u.DEBUG&&console.log($.step,"RS",z),F&&F[z]||0);k.push($)},function(E){var k=(F=E.stack).pop(),F=F.pop();u.DEBUG&&console.log(E.step,"WCVTP",k,F),E.cvt[F]=k/64},function(E){var k=E.stack,F=k.pop();u.DEBUG&&console.log(E.step,"RCVT",F),k.push(64*E.cvt[F])},bl.bind(void 0,0),bl.bind(void 0,1),void 0,ga.bind(void 0,0),ga.bind(void 0,1),function(E){u.DEBUG&&console.log(E.step,"MPPEM[]"),E.stack.push(E.ppem)},void 0,function(E){u.DEBUG&&console.log(E.step,"FLIPON[]"),E.autoFlip=!0},void 0,void 0,function(E){var k=E.stack,F=k.pop(),z=k.pop();u.DEBUG&&console.log(E.step,"LT[]",F,z),k.push(z<F?1:0)},function(E){var k=E.stack,F=k.pop(),z=k.pop();u.DEBUG&&console.log(E.step,"LTEQ[]",F,z),k.push(z<=F?1:0)},function(E){var k=E.stack,F=k.pop(),z=k.pop();u.DEBUG&&console.log(E.step,"GT[]",F,z),k.push(F<z?1:0)},function(E){var k=E.stack,F=k.pop(),z=k.pop();u.DEBUG&&console.log(E.step,"GTEQ[]",F,z),k.push(F<=z?1:0)},function(E){var k=E.stack,F=k.pop(),z=k.pop();u.DEBUG&&console.log(E.step,"EQ[]",F,z),k.push(F===z?1:0)},function(E){var k=E.stack,F=k.pop(),z=k.pop();u.DEBUG&&console.log(E.step,"NEQ[]",F,z),k.push(F!==z?1:0)},function(E){var k=E.stack,F=k.pop();u.DEBUG&&console.log(E.step,"ODD[]",F),k.push(Math.trunc(F)%2?1:0)},function(E){var k=E.stack,F=k.pop();u.DEBUG&&console.log(E.step,"EVEN[]",F),k.push(Math.trunc(F)%2?0:1)},function(E){var k=E.stack.pop();u.DEBUG&&console.log(E.step,"IF[]",k),k||(Ju(E,!0),u.DEBUG&&console.log(E.step,"EIF[]"))},function(E){u.DEBUG&&console.log(E.step,"EIF[]")},function(E){var k=E.stack,F=k.pop(),z=k.pop();u.DEBUG&&console.log(E.step,"AND[]",F,z),k.push(F&&z?1:0)},function(E){var k=E.stack,F=k.pop(),z=k.pop();u.DEBUG&&console.log(E.step,"OR[]",F,z),k.push(F||z?1:0)},function(E){var k=E.stack,F=k.pop();u.DEBUG&&console.log(E.step,"NOT[]",F),k.push(F?0:1)},ya.bind(void 0,1),function(E){var k=E.stack.pop();u.DEBUG&&console.log(E.step,"SDB[]",k),E.deltaBase=k},function(E){var k=E.stack.pop();u.DEBUG&&console.log(E.step,"SDS[]",k),E.deltaShift=Math.pow(.5,k)},function(E){var k=E.stack,F=k.pop(),z=k.pop();u.DEBUG&&console.log(E.step,"ADD[]",F,z),k.push(z+F)},function(E){var k=E.stack,F=k.pop(),z=k.pop();u.DEBUG&&console.log(E.step,"SUB[]",F,z),k.push(z-F)},function(E){var k=E.stack,F=k.pop(),z=k.pop();u.DEBUG&&console.log(E.step,"DIV[]",F,z),k.push(64*z/F)},function(E){var k=E.stack,F=k.pop(),z=k.pop();u.DEBUG&&console.log(E.step,"MUL[]",F,z),k.push(z*F/64)},function(E){var k=E.stack,F=k.pop();u.DEBUG&&console.log(E.step,"ABS[]",F),k.push(Math.abs(F))},function(E){var k=E.stack,F=k.pop();u.DEBUG&&console.log(E.step,"NEG[]",F),k.push(-F)},function(E){var k=E.stack,F=k.pop();u.DEBUG&&console.log(E.step,"FLOOR[]",F),k.push(64*Math.floor(F/64))},function(E){var k=E.stack,F=k.pop();u.DEBUG&&console.log(E.step,"CEILING[]",F),k.push(64*Math.ceil(F/64))},_i.bind(void 0,0),_i.bind(void 0,1),_i.bind(void 0,2),_i.bind(void 0,3),void 0,void 0,void 0,void 0,function(E){var k=(F=E.stack).pop(),F=F.pop();u.DEBUG&&console.log(E.step,"WCVTF[]",k,F),E.cvt[F]=k*E.ppem/E.font.unitsPerEm},ya.bind(void 0,2),ya.bind(void 0,3),ts.bind(void 0,1),ts.bind(void 0,2),ts.bind(void 0,3),function(E){var k,F=E.stack.pop();switch(u.DEBUG&&console.log(E.step,"SROUND[]",F),E.round=Gd,192&F){case 0:k=.5;break;case 64:k=1;break;case 128:k=2;break;default:throw new Error("invalid SROUND value")}switch(E.srPeriod=k,48&F){case 0:E.srPhase=0;break;case 16:E.srPhase=.25*k;break;case 32:E.srPhase=.5*k;break;case 48:E.srPhase=.75*k;break;default:throw new Error("invalid SROUND value")}E.srThreshold=(F&=15)===0?0:(F/8-.5)*k},function(E){var k,F=E.stack.pop();switch(u.DEBUG&&console.log(E.step,"S45ROUND[]",F),E.round=Gd,192&F){case 0:k=Math.sqrt(2)/2;break;case 64:k=Math.sqrt(2);break;case 128:k=2*Math.sqrt(2);break;default:throw new Error("invalid S45ROUND value")}switch(E.srPeriod=k,48&F){case 0:E.srPhase=0;break;case 16:E.srPhase=.25*k;break;case 32:E.srPhase=.5*k;break;case 48:E.srPhase=.75*k;break;default:throw new Error("invalid S45ROUND value")}E.srThreshold=(F&=15)===0?0:(F/8-.5)*k},void 0,void 0,function(E){u.DEBUG&&console.log(E.step,"ROFF[]"),E.round=Fa},void 0,function(E){u.DEBUG&&console.log(E.step,"RUTG[]"),E.round=ii},function(E){u.DEBUG&&console.log(E.step,"RDTG[]"),E.round=Ua},Kl,Kl,void 0,void 0,void 0,void 0,void 0,function(E){var k=E.stack.pop();u.DEBUG&&console.log(E.step,"SCANCTRL[]",k)},ys.bind(void 0,0),ys.bind(void 0,1),function(E){var k=E.stack,F=k.pop(),z=0;u.DEBUG&&console.log(E.step,"GETINFO[]",F),1&F&&(z=35),32&F&&(z|=4096),k.push(z)},void 0,function(E){var k=E.stack,F=k.pop(),z=k.pop(),$=k.pop();u.DEBUG&&console.log(E.step,"ROLL[]"),k.push(z),k.push(F),k.push($)},function(E){var k=E.stack,F=k.pop(),z=k.pop();u.DEBUG&&console.log(E.step,"MAX[]",F,z),k.push(Math.max(z,F))},function(E){var k=E.stack,F=k.pop(),z=k.pop();u.DEBUG&&console.log(E.step,"MIN[]",F,z),k.push(Math.min(z,F))},function(E){var k=E.stack.pop();u.DEBUG&&console.log(E.step,"SCANTYPE[]",k)},function(E){var k=E.stack.pop(),F=E.stack.pop();switch(u.DEBUG&&console.log(E.step,"INSTCTRL[]",k,F),k){case 1:return void(E.inhibitGridFit=!!F);case 2:return void(E.ignoreCvt=!!F);default:throw new Error("invalid INSTCTRL[] selector")}},void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,vs.bind(void 0,1),vs.bind(void 0,2),vs.bind(void 0,3),vs.bind(void 0,4),vs.bind(void 0,5),vs.bind(void 0,6),vs.bind(void 0,7),vs.bind(void 0,8),xo.bind(void 0,1),xo.bind(void 0,2),xo.bind(void 0,3),xo.bind(void 0,4),xo.bind(void 0,5),xo.bind(void 0,6),xo.bind(void 0,7),xo.bind(void 0,8),er.bind(void 0,0,0,0,0,0),er.bind(void 0,0,0,0,0,1),er.bind(void 0,0,0,0,0,2),er.bind(void 0,0,0,0,0,3),er.bind(void 0,0,0,0,1,0),er.bind(void 0,0,0,0,1,1),er.bind(void 0,0,0,0,1,2),er.bind(void 0,0,0,0,1,3),er.bind(void 0,0,0,1,0,0),er.bind(void 0,0,0,1,0,1),er.bind(void 0,0,0,1,0,2),er.bind(void 0,0,0,1,0,3),er.bind(void 0,0,0,1,1,0),er.bind(void 0,0,0,1,1,1),er.bind(void 0,0,0,1,1,2),er.bind(void 0,0,0,1,1,3),er.bind(void 0,0,1,0,0,0),er.bind(void 0,0,1,0,0,1),er.bind(void 0,0,1,0,0,2),er.bind(void 0,0,1,0,0,3),er.bind(void 0,0,1,0,1,0),er.bind(void 0,0,1,0,1,1),er.bind(void 0,0,1,0,1,2),er.bind(void 0,0,1,0,1,3),er.bind(void 0,0,1,1,0,0),er.bind(void 0,0,1,1,0,1),er.bind(void 0,0,1,1,0,2),er.bind(void 0,0,1,1,0,3),er.bind(void 0,0,1,1,1,0),er.bind(void 0,0,1,1,1,1),er.bind(void 0,0,1,1,1,2),er.bind(void 0,0,1,1,1,3),er.bind(void 0,1,0,0,0,0),er.bind(void 0,1,0,0,0,1),er.bind(void 0,1,0,0,0,2),er.bind(void 0,1,0,0,0,3),er.bind(void 0,1,0,0,1,0),er.bind(void 0,1,0,0,1,1),er.bind(void 0,1,0,0,1,2),er.bind(void 0,1,0,0,1,3),er.bind(void 0,1,0,1,0,0),er.bind(void 0,1,0,1,0,1),er.bind(void 0,1,0,1,0,2),er.bind(void 0,1,0,1,0,3),er.bind(void 0,1,0,1,1,0),er.bind(void 0,1,0,1,1,1),er.bind(void 0,1,0,1,1,2),er.bind(void 0,1,0,1,1,3),er.bind(void 0,1,1,0,0,0),er.bind(void 0,1,1,0,0,1),er.bind(void 0,1,1,0,0,2),er.bind(void 0,1,1,0,0,3),er.bind(void 0,1,1,0,1,0),er.bind(void 0,1,1,0,1,1),er.bind(void 0,1,1,0,1,2),er.bind(void 0,1,1,0,1,3),er.bind(void 0,1,1,1,0,0),er.bind(void 0,1,1,1,0,1),er.bind(void 0,1,1,1,0,2),er.bind(void 0,1,1,1,0,3),er.bind(void 0,1,1,1,1,0),er.bind(void 0,1,1,1,1,1),er.bind(void 0,1,1,1,1,2),er.bind(void 0,1,1,1,1,3)],Hd=Array.from||function(E){return E.match(/[\uD800-\uDBFF][\uDC00-\uDFFF]?|[^\uD800-\uDFFF]|./g)||[]};function Sn(E){(E=E||{}).empty||(Oa(E.familyName,"When creating a new Font object, familyName is required."),Oa(E.styleName,"When creating a new Font object, styleName is required."),Oa(E.unitsPerEm,"When creating a new Font object, unitsPerEm is required."),Oa(E.ascender,"When creating a new Font object, ascender is required."),Oa(E.descender,"When creating a new Font object, descender is required."),Oa(E.descender<0,"Descender should be negative (e.g. -512)."),this.names={fontFamily:{en:E.familyName||" "},fontSubfamily:{en:E.styleName||" "},fullName:{en:E.fullName||E.familyName+" "+E.styleName},postScriptName:{en:E.postScriptName||(E.familyName+E.styleName).replace(/\s/g,"")},designer:{en:E.designer||" "},designerURL:{en:E.designerURL||" "},manufacturer:{en:E.manufacturer||" "},manufacturerURL:{en:E.manufacturerURL||" "},license:{en:E.license||" "},licenseURL:{en:E.licenseURL||" "},version:{en:E.version||"Version 0.1"},description:{en:E.description||" "},copyright:{en:E.copyright||" "},trademark:{en:E.trademark||" "}},this.unitsPerEm=E.unitsPerEm||1e3,this.ascender=E.ascender,this.descender=E.descender,this.createdTimestamp=E.createdTimestamp,this.tables={os2:{usWeightClass:E.weightClass||this.usWeightClasses.MEDIUM,usWidthClass:E.widthClass||this.usWidthClasses.MEDIUM,fsSelection:E.fsSelection||this.fsSelectionValues.REGULAR}}),this.supported=!0,this.glyphs=new vt.GlyphSet(this,E.glyphs||[]),this.encoding=new be(this),this.position=new Gr(this),this.substitution=new Nn(this),this.tables=this.tables||{},Object.defineProperty(this,"hinting",{get:function(){return this._hinting||(this.outlinesFormat==="truetype"?this._hinting=new vo(this):void 0)}})}function Qu(E,k){var F,z=JSON.stringify(E),$=256;for(F in k){var se=parseInt(F);if(se&&!(se<256)){if(JSON.stringify(k[F])===z)return se;$<=se&&($=se+1)}}return k[$]=E,$}Sn.prototype.hasChar=function(E){return this.encoding.charToGlyphIndex(E)!==null},Sn.prototype.charToGlyphIndex=function(E){return this.encoding.charToGlyphIndex(E)},Sn.prototype.charToGlyph=function(E){return E=this.charToGlyphIndex(E),this.glyphs.get(E)||this.glyphs.get(0)},Sn.prototype.stringToGlyphs=function(E,k){k=k||this.defaultRenderOptions;for(var F=Hd(E),z=[],$=0;$<F.length;$+=1){var se=F[$];z.push(this.charToGlyphIndex(se))}var le=z.length;if(k.features){var E=k.script||this.substitution.getDefaultScriptName(),we=[];k.features.liga&&(we=we.concat(this.substitution.getFeature("liga",E,k.language))),k.features.rlig&&(we=we.concat(this.substitution.getFeature("rlig",E,k.language)));for(var Le=0;Le<le;Le+=1)for(var Ie=0;Ie<we.length;Ie++){for(var Je=we[Ie],at=Je.sub,nt=at.length,He=0;He<nt&&at[He]===z[Le+He];)He++;He===nt&&(z.splice(Le,nt,Je.by),le=le-nt+1)}}for(var Et=new Array(le),pt=this.glyphs.get(0),xt=0;xt<le;xt+=1)Et[xt]=this.glyphs.get(z[xt])||pt;return Et},Sn.prototype.nameToGlyphIndex=function(E){return this.glyphNames.nameToGlyphIndex(E)},Sn.prototype.nameToGlyph=function(E){return E=this.nameToGlyphIndex(E),this.glyphs.get(E)||this.glyphs.get(0)},Sn.prototype.glyphIndexToName=function(E){return this.glyphNames.glyphIndexToName?this.glyphNames.glyphIndexToName(E):""},Sn.prototype.getKerningValue=function(E,k){E=E.index||E,k=k.index||k;var F=this.position.defaultKerningTables;return F?this.position.getKerningValue(F,E,k):this.kerningPairs[E+","+k]||0},Sn.prototype.defaultRenderOptions={kerning:!0,features:{liga:!0,rlig:!0}},Sn.prototype.forEachGlyph=function(E,k,F,z,$,se){k=k!==void 0?k:0,F=F!==void 0?F:0,$=$||this.defaultRenderOptions;var le,we=1/this.unitsPerEm*(z=z!==void 0?z:72),Le=this.stringToGlyphs(E,$);$.kerning&&(E=$.script||this.position.getDefaultScriptName(),le=this.position.getKerningTables(E,$.language));for(var Ie=0;Ie<Le.length;Ie+=1){var Je=Le[Ie];se.call(this,Je,k,F,z,$),Je.advanceWidth&&(k+=Je.advanceWidth*we),$.kerning&&Ie<Le.length-1&&(k+=(le?this.position.getKerningValue(le,Je.index,Le[Ie+1].index):this.getKerningValue(Je,Le[Ie+1]))*we),$.letterSpacing?k+=$.letterSpacing*z:$.tracking&&(k+=$.tracking/1e3*z)}return k},Sn.prototype.getPath=function(E,k,F,z,$){var se=new Z;return this.forEachGlyph(E,k,F,z,$,function(le,we,Le,Ie){le=le.getPath(we,Le,Ie,$,this),se.extend(le)}),se},Sn.prototype.getPaths=function(E,k,F,z,$){var se=[];return this.forEachGlyph(E,k,F,z,$,function(le,we,Le,Ie){le=le.getPath(we,Le,Ie,$,this),se.push(le)}),se},Sn.prototype.getAdvanceWidth=function(E,k,F){return this.forEachGlyph(E,0,0,k,F,function(){})},Sn.prototype.draw=function(E,k,F,z,$,se){this.getPath(k,F,z,$,se).draw(E)},Sn.prototype.drawPoints=function(E,k,F,z,$,se){this.forEachGlyph(k,F,z,$,se,function(le,we,Le,Ie){le.drawPoints(E,we,Le,Ie)})},Sn.prototype.drawMetrics=function(E,k,F,z,$,se){this.forEachGlyph(k,F,z,$,se,function(le,we,Le,Ie){le.drawMetrics(E,we,Le,Ie)})},Sn.prototype.getEnglishName=function(E){if(E=this.names[E],E)return E.en},Sn.prototype.validate=function(){var E=this;function k(F){F=E.getEnglishName(F),F&&F.trim().length}k("fontFamily"),k("weightName"),k("manufacturer"),k("copyright"),k("version"),this.unitsPerEm},Sn.prototype.toTables=function(){return Jr.fontToTable(this)},Sn.prototype.toBuffer=function(){return console.warn("Font.toBuffer is deprecated. Use Font.toArrayBuffer instead."),this.toArrayBuffer()},Sn.prototype.toArrayBuffer=function(){for(var E=this.toTables().encode(),k=new ArrayBuffer(E.length),F=new Uint8Array(k),z=0;z<E.length;z++)F[z]=E[z];return k},Sn.prototype.download=function(E){var k=this.getEnglishName("fontFamily"),F=this.getEnglishName("fontSubfamily"),z=(E=E||k.replace(/\s/g,"")+"-"+F+".otf",this.toArrayBuffer());typeof window<"u"?(window.requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem,window.requestFileSystem(window.TEMPORARY,z.byteLength,function($){$.root.getFile(E,{create:!0},function(se){se.createWriter(function(le){var we=new DataView(z),we=new Blob([we],{type:"font/opentype"});le.write(we),le.addEventListener("writeend",function(){location.href=se.toURL()},!1)})})},function($){throw new Error($.name+": "+$.message)})):(k=r("fs"),F=function($){for(var se=new s($.byteLength),le=new Uint8Array($),we=0;we<se.length;++we)se[we]=le[we];return se}(z),k.writeFileSync(E,F))},Sn.prototype.fsSelectionValues={ITALIC:1,UNDERSCORE:2,NEGATIVE:4,OUTLINED:8,STRIKEOUT:16,BOLD:32,REGULAR:64,USER_TYPO_METRICS:128,WWS:256,OBLIQUE:512},Sn.prototype.usWidthClasses={ULTRA_CONDENSED:1,EXTRA_CONDENSED:2,CONDENSED:3,SEMI_CONDENSED:4,MEDIUM:5,SEMI_EXPANDED:6,EXPANDED:7,EXTRA_EXPANDED:8,ULTRA_EXPANDED:9},Sn.prototype.usWeightClasses={THIN:100,EXTRA_LIGHT:200,LIGHT:300,NORMAL:400,MEDIUM:500,SEMI_BOLD:600,BOLD:700,EXTRA_BOLD:800,BLACK:900};var Zu={make:function(E,k){var F=new fe.Table("fvar",[{name:"version",type:"ULONG",value:65536},{name:"offsetToData",type:"USHORT",value:0},{name:"countSizePairs",type:"USHORT",value:2},{name:"axisCount",type:"USHORT",value:E.axes.length},{name:"axisSize",type:"USHORT",value:20},{name:"instanceCount",type:"USHORT",value:E.instances.length},{name:"instanceSize",type:"USHORT",value:4+4*E.axes.length}]);F.offsetToData=F.sizeOf();for(var z,$,se,le=0;le<E.axes.length;le++)F.fields=F.fields.concat((z=le,$=E.axes[le],se=k,se=Qu($.name,k),[{name:"tag_"+z,type:"TAG",value:$.tag},{name:"minValue_"+z,type:"FIXED",value:$.minValue<<16},{name:"defaultValue_"+z,type:"FIXED",value:$.defaultValue<<16},{name:"maxValue_"+z,type:"FIXED",value:$.maxValue<<16},{name:"flags_"+z,type:"USHORT",value:0},{name:"nameID_"+z,type:"USHORT",value:se}]));for(var we=0;we<E.instances.length;we++)F.fields=F.fields.concat(function(Le,Ie,Je,at){for(var nt=[{name:"nameID_"+Le,type:"USHORT",value:Qu(Ie.name,at)},{name:"flags_"+Le,type:"USHORT",value:0}],He=0;He<Je.length;++He){var Et=Je[He].tag;nt.push({name:"axis_"+Le+" "+Et,type:"FIXED",value:Ie.coordinates[Et]<<16})}return nt}(we,E.instances[we],E.axes,k));return F},parse:function(E,k,F){for(var z,$,se,le,we=new Ye.Parser(E,k),Le=we.parseULong(),Ie=(U.argument(Le===65536,"Unsupported fvar table version."),we.parseOffset16()),Je=(we.skip("uShort",1),we.parseUShort()),at=we.parseUShort(),nt=we.parseUShort(),He=we.parseUShort(),Et=[],pt=0;pt<Je;pt++)Et.push((z=E,$=k+Ie+pt*at,se=F,le={},z=new Ye.Parser(z,$),le.tag=z.parseTag(),le.minValue=z.parseFixed(),le.defaultValue=z.parseFixed(),le.maxValue=z.parseFixed(),z.skip("uShort",1),le.name=se[z.parseUShort()]||{},le));for(var xt=[],dt=k+Ie+Je*at,ft=0;ft<nt;ft++)xt.push(function(ar,wr,sr,lr){var kr={},tn=new Ye.Parser(ar,wr);kr.name=lr[tn.parseUShort()]||{},tn.skip("uShort",1),kr.coordinates={};for(var Un=0;Un<sr.length;++Un)kr.coordinates[sr[Un].tag]=tn.parseFixed();return kr}(E,dt+ft*He,Et,F));return{axes:Et,instances:xt}}},_s=new Array(10);_s[1]=function(){var E=this.offset+this.relativeOffset,k=this.parseUShort();return k===1?{posFormat:1,coverage:this.parsePointer(Be.coverage),value:this.parseValueRecord()}:k===2?{posFormat:2,coverage:this.parsePointer(Be.coverage),values:this.parseValueRecordList()}:void U.assert(!1,"0x"+E.toString(16)+": GPOS lookup type 1 format must be 1 or 2.")},_s[2]=function(){var E,k,F,z,se=this.offset+this.relativeOffset,$=this.parseUShort(),se=(U.assert($===1||$===2,"0x"+se.toString(16)+": GPOS lookup type 2 format must be 1 or 2."),this.parsePointer(Be.coverage)),le=this.parseUShort(),we=this.parseUShort();return $===1?{posFormat:$,coverage:se,valueFormat1:le,valueFormat2:we,pairSets:this.parseList(Be.pointer(Be.list(function(){return{secondGlyph:this.parseUShort(),value1:this.parseValueRecord(le),value2:this.parseValueRecord(we)}})))}:$===2?(E=this.parsePointer(Be.classDef),k=this.parsePointer(Be.classDef),F=this.parseUShort(),z=this.parseUShort(),{posFormat:$,coverage:se,valueFormat1:le,valueFormat2:we,classDef1:E,classDef2:k,class1Count:F,class2Count:z,classRecords:this.parseList(F,Be.list(z,function(){return{value1:this.parseValueRecord(le),value2:this.parseValueRecord(we)}}))}):void 0},_s[3]=function(){return{error:"GPOS Lookup 3 not supported"}},_s[4]=function(){return{error:"GPOS Lookup 4 not supported"}},_s[5]=function(){return{error:"GPOS Lookup 5 not supported"}},_s[6]=function(){return{error:"GPOS Lookup 6 not supported"}},_s[7]=function(){return{error:"GPOS Lookup 7 not supported"}},_s[8]=function(){return{error:"GPOS Lookup 8 not supported"}},_s[9]=function(){return{error:"GPOS Lookup 9 not supported"}};var zd=new Array(10),Vd={parse:function(E,k){return k=(E=new Be(E,k=k||0)).parseVersion(1),U.argument(k===1||k===1.1,"Unsupported GPOS table version "+k),k===1?{version:k,scripts:E.parseScriptList(),features:E.parseFeatureList(),lookups:E.parseLookupList(_s)}:{version:k,scripts:E.parseScriptList(),features:E.parseFeatureList(),lookups:E.parseLookupList(_s),variations:E.parseFeatureVariationsList()}},make:function(E){return new fe.Table("GPOS",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new fe.ScriptList(E.scripts)},{name:"features",type:"TABLE",value:new fe.FeatureList(E.features)},{name:"lookups",type:"TABLE",value:new fe.LookupList(E.lookups,zd)}])}},Zc={parse:function(E,k){if(E=new Ye.Parser(E,k),(k=E.parseUShort())===0){var F=E,z={},at=(F.skip("uShort"),F.parseUShort()),$=(U.argument(at===0,"Unsupported kern sub-table version."),F.skip("uShort",2),F.parseUShort());F.skip("uShort",3);for(var se=0;se<$;se+=1){var le=F.parseUShort(),we=F.parseUShort(),Le=F.parseShort();z[le+","+we]=Le}return z}if(k!==1)throw new Error("Unsupported kern table version ("+k+").");var Ie=E,Je={},at=(Ie.skip("uShort"),1<Ie.parseULong()&&console.warn("Only the first kern subtable is supported."),Ie.skip("uLong"),255&Ie.parseUShort());if(Ie.skip("uShort"),at==0){var nt=Ie.parseUShort();Ie.skip("uShort",3);for(var He=0;He<nt;He+=1){var Et=Ie.parseUShort(),pt=Ie.parseUShort(),xt=Ie.parseShort();Je[Et+","+pt]=xt}}return Je}},wl={parse:function(E,k,F,z){for(var $=new Ye.Parser(E,k),se=z?$.parseUShort:$.parseULong,le=[],we=0;we<F+1;we+=1){var Le=se.call($);z&&(Le*=2),le.push(Le)}return le}};function _a(E,k){r("fs").readFile(E,function(F,z){if(F)return k(F.message);k(null,Yu(z))})}function $u(E,k){var F=new XMLHttpRequest;F.open("get",E,!0),F.responseType="arraybuffer",F.onload=function(){return F.response?k(null,F.response):k("Font could not be loaded: "+F.statusText)},F.onerror=function(){k("Font could not be loaded")},F.send()}function $l(E,k){for(var F=[],z=12,$=0;$<k;$+=1){var se=Ye.getTag(E,z),le=Ye.getULong(E,z+4),we=Ye.getULong(E,z+8),Le=Ye.getULong(E,z+12);F.push({tag:se,checksum:le,offset:we,length:Le,compression:!1}),z+=16}return F}function fn(F,k){if(k.compression!=="WOFF")return{data:F,offset:k.offset};var F=new Uint8Array(F.buffer,k.offset+2,k.compressedLength-2),z=new Uint8Array(k.length);if(V(F,z),z.byteLength!==k.length)throw new Error("Decompression error: "+k.tag+" decompressed length doesn't match recorded length");return{data:new DataView(z.buffer,0),offset:0}}function Hi(ft){var k,F,z,$,se,le,we,Le,Ie,Je,at,nt,He,Et,pt=new Sn({empty:!0}),xt=new DataView(ft,0),dt=[],ft=Ye.getTag(xt,0);if(ft==="\0\0\0"||ft==="true"||ft==="typ1")pt.outlinesFormat="truetype",dt=$l(xt,z=Ye.getUShort(xt,4));else if(ft==="OTTO")pt.outlinesFormat="cff",dt=$l(xt,z=Ye.getUShort(xt,4));else{if(ft!=="wOFF")throw new Error("Unsupported OpenType signature "+ft);var ar=Ye.getTag(xt,4);if(ar==="\0\0\0")pt.outlinesFormat="truetype";else{if(ar!=="OTTO")throw new Error("Unsupported OpenType flavor "+ft);pt.outlinesFormat="cff"}dt=function(Mn,rn){for(var bi=[],jn=44,Hr=0;Hr<rn;Hr+=1){var An=Ye.getTag(Mn,jn),mn=Ye.getULong(Mn,jn+4),Ks=Ye.getULong(Mn,jn+8),bo=Ye.getULong(Mn,jn+12),rs=void 0,rs=Ks<bo&&"WOFF";bi.push({tag:An,offset:mn,compression:rs,compressedLength:Ks,length:bo}),jn+=20}return bi}(xt,z=Ye.getUShort(xt,12))}for(var wr=0;wr<z;wr+=1){var sr=dt[wr],lr=void 0;switch(sr.tag){case"cmap":lr=fn(xt,sr),pt.tables.cmap=de.parse(lr.data,lr.offset),pt.encoding=new ke(pt.tables.cmap);break;case"cvt ":lr=fn(xt,sr),Et=new Ye.Parser(lr.data,lr.offset),pt.tables.cvt=Et.parseShortList(sr.length/2);break;case"fvar":se=sr;break;case"fpgm":lr=fn(xt,sr),Et=new Ye.Parser(lr.data,lr.offset),pt.tables.fpgm=Et.parseByteList(sr.length);break;case"head":lr=fn(xt,sr),pt.tables.head=Jn.parse(lr.data,lr.offset),pt.unitsPerEm=pt.tables.head.unitsPerEm,k=pt.tables.head.indexToLocFormat;break;case"hhea":lr=fn(xt,sr),pt.tables.hhea=Fe.parse(lr.data,lr.offset),pt.ascender=pt.tables.hhea.ascender,pt.descender=pt.tables.hhea.descender,pt.numberOfHMetrics=pt.tables.hhea.numberOfHMetrics;break;case"hmtx":Ie=sr;break;case"ltag":lr=fn(xt,sr),F=Gt.parse(lr.data,lr.offset);break;case"maxp":lr=fn(xt,sr),pt.tables.maxp=At.parse(lr.data,lr.offset),pt.numGlyphs=pt.tables.maxp.numGlyphs;break;case"name":nt=sr;break;case"OS/2":lr=fn(xt,sr),pt.tables.os2=Xt.parse(lr.data,lr.offset);break;case"post":lr=fn(xt,sr),pt.tables.post=Sr.parse(lr.data,lr.offset),pt.glyphNames=new Ce(pt.tables.post);break;case"prep":lr=fn(xt,sr),Et=new Ye.Parser(lr.data,lr.offset),pt.tables.prep=Et.parseByteList(sr.length);break;case"glyf":le=sr;break;case"loca":at=sr;break;case"CFF ":$=sr;break;case"kern":Je=sr;break;case"GPOS":we=sr;break;case"GSUB":Le=sr;break;case"meta":He=sr}}if(ar=fn(xt,nt),pt.tables.name=Kt.parse(ar.data,ar.offset,F),pt.names=pt.tables.name,le&&at)ft=k===0,ar=fn(xt,at),ar=wl.parse(ar.data,ar.offset,pt.numGlyphs,ft),ft=fn(xt,le),pt.glyphs=Fr.parse(ft.data,ft.offset,ar,pt);else{if(!$)throw new Error("Font doesn't contain TrueType or CFF outlines.");ft=fn(xt,$),jr.parse(ft.data,ft.offset,pt)}for(var ar=fn(xt,Ie),kr=(Tt.parse(ar.data,ar.offset,pt.numberOfHMetrics,pt.numGlyphs,pt.glyphs),pt),tn=kr.tables.cmap.glyphIndexMap,Un=Object.keys(tn),In=0;In<Un.length;In+=1){var _n,Vn=Un[In],xi=tn[Vn];(_n=kr.glyphs.get(xi)).addUnicode(parseInt(Vn))}for(var Kr=0;Kr<kr.glyphs.length;Kr+=1)_n=kr.glyphs.get(Kr),kr.cffEncoding?kr.isCIDFont?_n.name="gid"+Kr:_n.name=kr.cffEncoding.charset[Kr]:kr.glyphNames.names&&(_n.name=kr.glyphNames.glyphIndexToName(Kr));return Je?(ft=fn(xt,Je),pt.kerningPairs=Zc.parse(ft.data,ft.offset)):pt.kerningPairs={},we&&(ar=fn(xt,we),pt.tables.gpos=Vd.parse(ar.data,ar.offset),pt.position.init()),Le&&(ft=fn(xt,Le),pt.tables.gsub=fr.parse(ft.data,ft.offset)),se&&(ar=fn(xt,se),pt.tables.fvar=Zu.parse(ar.data,ar.offset,pt.names)),He&&(ft=fn(xt,He),pt.tables.meta=Zr.parse(ft.data,ft.offset),pt.metas=pt.tables.meta),pt}u.Font=Sn,u.Glyph=Xe,u.Path=Z,u.BoundingBox=Y,u._parse=Ye,u.parse=Hi,u.load=function(E,k){(typeof window>"u"?_a:$u)(E,function(F,z){if(F)return k(F);var $;try{$=Hi(z)}catch(se){return k(se,null)}return k(null,$)})},u.loadSync=function(E){return Hi(Yu(r("fs").readFileSync(E)))},Object.defineProperty(u,"__esModule",{value:!0})},l(typeof o=="object"&&i!==void 0?o:a.opentype={})}).call(this,r("buffer").Buffer)},{buffer:4,fs:2}],255:[function(r,i,o){(function(s){function a(h,p){for(var c=0,f=h.length-1;0<=f;f--){var m=h[f];m==="."?h.splice(f,1):m===".."?(h.splice(f,1),c++):c&&(h.splice(f,1),c--)}if(p)for(;c--;)h.unshift("..");return h}function l(h,p){if(h.filter)return h.filter(p);for(var c=[],f=0;f<h.length;f++)p(h[f],f,h)&&c.push(h[f]);return c}o.resolve=function(){for(var h="",p=!1,c=arguments.length-1;-1<=c&&!p;c--){var f=0<=c?arguments[c]:s.cwd();if(typeof f!="string")throw new TypeError("Arguments to path.resolve must be strings");f&&(h=f+"/"+h,p=f.charAt(0)==="/")}return(p?"/":"")+(h=a(l(h.split("/"),function(m){return!!m}),!p).join("/"))||"."},o.normalize=function(h){var p=o.isAbsolute(h),c=u(h,-1)==="/";return(h=(h=a(l(h.split("/"),function(f){return!!f}),!p).join("/"))||p?h:".")&&c&&(h+="/"),(p?"/":"")+h},o.isAbsolute=function(h){return h.charAt(0)==="/"},o.join=function(){var h=Array.prototype.slice.call(arguments,0);return o.normalize(l(h,function(p,c){if(typeof p!="string")throw new TypeError("Arguments to path.join must be strings");return p}).join("/"))},o.relative=function(h,p){function c(b){for(var w=0;w<b.length&&b[w]==="";w++);for(var T=b.length-1;0<=T&&b[T]==="";T--);return T<w?[]:b.slice(w,T-w+1)}h=o.resolve(h).substr(1),p=o.resolve(p).substr(1);for(var f=c(h.split("/")),m=c(p.split("/")),y=Math.min(f.length,m.length),v=y,g=0;g<y;g++)if(f[g]!==m[g]){v=g;break}for(var x=[],g=v;g<f.length;g++)x.push("..");return(x=x.concat(m.slice(v))).join("/")},o.sep="/",o.delimiter=":",o.dirname=function(h){if(typeof h!="string"&&(h+=""),h.length===0)return".";for(var p=h.charCodeAt(0)===47,c=-1,f=!0,m=h.length-1;1<=m;--m)if(h.charCodeAt(m)===47){if(!f){c=m;break}}else f=!1;return c===-1?p?"/":".":p&&c===1?"/":h.slice(0,c)},o.basename=function(h,p){return h=function(c){typeof c!="string"&&(c+="");for(var f=0,m=-1,y=!0,v=c.length-1;0<=v;--v)if(c.charCodeAt(v)===47){if(!y){f=v+1;break}}else m===-1&&(y=!1,m=v+1);return m===-1?"":c.slice(f,m)}(h),h=p&&h.substr(-1*p.length)===p?h.substr(0,h.length-p.length):h},o.extname=function(h){typeof h!="string"&&(h+="");for(var p=-1,c=0,f=-1,m=!0,y=0,v=h.length-1;0<=v;--v){var g=h.charCodeAt(v);if(g===47){if(m)continue;c=v+1;break}f===-1&&(m=!1,f=v+1),g===46?p===-1?p=v:y!==1&&(y=1):p!==-1&&(y=-1)}return p===-1||f===-1||y===0||y===1&&p===f-1&&p===c+1?"":h.slice(p,f)};var u="ab".substr(-1)==="b"?function(h,p,c){return h.substr(p,c)}:function(h,p,c){return p<0&&(p=h.length+p),h.substr(p,c)}}).call(this,r("_process"))},{_process:256}],256:[function(r,l,o){var s,a,l=l.exports={};function u(){throw new Error("setTimeout has not been defined")}function h(){throw new Error("clearTimeout has not been defined")}try{s=typeof setTimeout=="function"?setTimeout:u}catch{s=u}try{a=typeof clearTimeout=="function"?clearTimeout:h}catch{a=h}function p(w){if(s===setTimeout)return setTimeout(w,0);if((s===u||!s)&&setTimeout)return(s=setTimeout)(w,0);try{return s(w,0)}catch{try{return s.call(null,w,0)}catch{return s.call(this,w,0)}}}var c,f=[],m=!1,y=-1;function v(){m&&c&&(m=!1,c.length?f=c.concat(f):y=-1,f.length&&g())}function g(){if(!m){for(var w=p(v),T=(m=!0,f.length);T;){for(c=f,f=[];++y<T;)c&&c[y].run();y=-1,T=f.length}c=null,m=!1,function(R){if(a===clearTimeout)return clearTimeout(R);if((a===h||!a)&&clearTimeout)return(a=clearTimeout)(R);try{a(R)}catch{try{return a.call(null,R)}catch{return a.call(this,R)}}}(w)}}function x(w,T){this.fun=w,this.array=T}function b(){}l.nextTick=function(w){var T=new Array(arguments.length-1);if(1<arguments.length)for(var R=1;R<arguments.length;R++)T[R-1]=arguments[R];f.push(new x(w,T)),f.length!==1||m||p(g)},x.prototype.run=function(){this.fun.apply(null,this.array)},l.title="browser",l.browser=!0,l.env={},l.argv=[],l.version="",l.versions={},l.on=b,l.addListener=b,l.once=b,l.off=b,l.removeListener=b,l.removeAllListeners=b,l.emit=b,l.prependListener=b,l.prependOnceListener=b,l.listeners=function(w){return[]},l.binding=function(w){throw new Error("process.binding is not supported")},l.cwd=function(){return"/"},l.chdir=function(w){throw new Error("process.chdir is not supported")},l.umask=function(){return 0}},{}],257:[function(r,i,o){i=function(s){var a,l=Object.prototype,u=l.hasOwnProperty,C=typeof Symbol=="function"?Symbol:{},h=C.iterator||"@@iterator",p=C.asyncIterator||"@@asyncIterator",c=C.toStringTag||"@@toStringTag";function f(ee,K,q,re){var Z,ce,B,U,K=K&&K.prototype instanceof w?K:w,K=Object.create(K.prototype),re=new W(re||[]);return K._invoke=(Z=ee,ce=q,B=re,U=y,function(ae,pe){if(U===g)throw new Error("Generator is already running");if(U===x){if(ae==="throw")throw pe;return J()}for(B.method=ae,B.arg=pe;;){var ye=B.delegate;if(ye&&(ye=function Re(Me,xe){var ve=Me.iterator[xe.method];if(ve===a){if(xe.delegate=null,xe.method==="throw"){if(Me.iterator.return&&(xe.method="return",xe.arg=a,Re(Me,xe),xe.method==="throw"))return b;xe.method="throw",xe.arg=new TypeError("The iterator does not provide a 'throw' method")}return b}if(ve=m(ve,Me.iterator,xe.arg),ve.type==="throw")return xe.method="throw",xe.arg=ve.arg,xe.delegate=null,b;if(ve=ve.arg,!ve)return xe.method="throw",xe.arg=new TypeError("iterator result is not an object"),xe.delegate=null,b;{if(!ve.done)return ve;xe[Me.resultName]=ve.value,xe.next=Me.nextLoc,xe.method!=="return"&&(xe.method="next",xe.arg=a)}return xe.delegate=null,b}(ye,B),ye)){if(ye===b)continue;return ye}if(B.method==="next")B.sent=B._sent=B.arg;else if(B.method==="throw"){if(U===y)throw U=x,B.arg;B.dispatchException(B.arg)}else B.method==="return"&&B.abrupt("return",B.arg);if(U=g,ye=m(Z,ce,B),ye.type==="normal"){if(U=B.done?x:v,ye.arg!==b)return{value:ye.arg,done:B.done}}else ye.type==="throw"&&(U=x,B.method="throw",B.arg=ye.arg)}}),K}function m(ee,V,q){try{return{type:"normal",arg:ee.call(V,q)}}catch(Y){return{type:"throw",arg:Y}}}s.wrap=f;var y="suspendedStart",v="suspendedYield",g="executing",x="completed",b={};function w(){}function T(){}function R(){}var C={},P=(C[h]=function(){return this},Object.getPrototypeOf),P=P&&P(P(X([]))),I=(P&&P!==l&&u.call(P,h)&&(C=P),R.prototype=w.prototype=Object.create(C));function D(ee){["next","throw","return"].forEach(function(V){ee[V]=function(q){return this._invoke(V,q)}})}function j(ee){var V;this._invoke=function(q,Y){function Z(){return new Promise(function(ce,B){(function U(Re,re,ae,pe){var ye,Re=m(ee[Re],ee,re);if(Re.type!=="throw")return(re=(ye=Re.arg).value)&&typeof re=="object"&&u.call(re,"__await")?Promise.resolve(re.__await).then(function(Me){U("next",Me,ae,pe)},function(Me){U("throw",Me,ae,pe)}):Promise.resolve(re).then(function(Me){ye.value=Me,ae(ye)},function(Me){return U("throw",Me,ae,pe)});pe(Re.arg)})(q,Y,ce,B)})}return V=V?V.then(Z,Z):Z()}}function N(ee){var V={tryLoc:ee[0]};1 in ee&&(V.catchLoc=ee[1]),2 in ee&&(V.finallyLoc=ee[2],V.afterLoc=ee[3]),this.tryEntries.push(V)}function O(ee){var V=ee.completion||{};V.type="normal",delete V.arg,ee.completion=V}function W(ee){this.tryEntries=[{tryLoc:"root"}],ee.forEach(N,this),this.reset(!0)}function X(ee){if(ee){var V,q=ee[h];if(q)return q.call(ee);if(typeof ee.next=="function")return ee;if(!isNaN(ee.length))return V=-1,(q=function Y(){for(;++V<ee.length;)if(u.call(ee,V))return Y.value=ee[V],Y.done=!1,Y;return Y.value=a,Y.done=!0,Y}).next=q}return{next:J}}function J(){return{value:a,done:!0}}return(T.prototype=I.constructor=R).constructor=T,R[c]=T.displayName="GeneratorFunction",s.isGeneratorFunction=function(ee){return ee=typeof ee=="function"&&ee.constructor,!!ee&&(ee===T||(ee.displayName||ee.name)==="GeneratorFunction")},s.mark=function(ee){return Object.setPrototypeOf?Object.setPrototypeOf(ee,R):(ee.__proto__=R,c in ee||(ee[c]="GeneratorFunction")),ee.prototype=Object.create(I),ee},s.awrap=function(ee){return{__await:ee}},D(j.prototype),j.prototype[p]=function(){return this},s.AsyncIterator=j,s.async=function(ee,V,q,Y){var Z=new j(f(ee,V,q,Y));return s.isGeneratorFunction(V)?Z:Z.next().then(function(ce){return ce.done?ce.value:Z.next()})},D(I),I[c]="Generator",I[h]=function(){return this},I.toString=function(){return"[object Generator]"},s.keys=function(ee){var V,q=[];for(V in ee)q.push(V);return q.reverse(),function Y(){for(;q.length;){var Z=q.pop();if(Z in ee)return Y.value=Z,Y.done=!1,Y}return Y.done=!0,Y}},s.values=X,W.prototype={constructor:W,reset:function(ee){if(this.prev=0,this.next=0,this.sent=this._sent=a,this.done=!1,this.delegate=null,this.method="next",this.arg=a,this.tryEntries.forEach(O),!ee)for(var V in this)V.charAt(0)==="t"&&u.call(this,V)&&!isNaN(+V.slice(1))&&(this[V]=a)},stop:function(){this.done=!0;var ee=this.tryEntries[0].completion;if(ee.type==="throw")throw ee.arg;return this.rval},dispatchException:function(ee){if(this.done)throw ee;var V=this;function q(K,re){return ce.type="throw",ce.arg=ee,V.next=K,re&&(V.method="next",V.arg=a),!!re}for(var Y=this.tryEntries.length-1;0<=Y;--Y){var Z=this.tryEntries[Y],ce=Z.completion;if(Z.tryLoc==="root")return q("end");if(Z.tryLoc<=this.prev){var B=u.call(Z,"catchLoc"),U=u.call(Z,"finallyLoc");if(B&&U){if(this.prev<Z.catchLoc)return q(Z.catchLoc,!0);if(this.prev<Z.finallyLoc)return q(Z.finallyLoc)}else if(B){if(this.prev<Z.catchLoc)return q(Z.catchLoc,!0)}else{if(!U)throw new Error("try statement without catch or finally");if(this.prev<Z.finallyLoc)return q(Z.finallyLoc)}}}},abrupt:function(ee,V){for(var q=this.tryEntries.length-1;0<=q;--q){var Y=this.tryEntries[q];if(Y.tryLoc<=this.prev&&u.call(Y,"finallyLoc")&&this.prev<Y.finallyLoc){var Z=Y;break}}var ce=(Z=Z&&(ee==="break"||ee==="continue")&&Z.tryLoc<=V&&V<=Z.finallyLoc?null:Z)?Z.completion:{};return ce.type=ee,ce.arg=V,Z?(this.method="next",this.next=Z.finallyLoc,b):this.complete(ce)},complete:function(ee,V){if(ee.type==="throw")throw ee.arg;return ee.type==="break"||ee.type==="continue"?this.next=ee.arg:ee.type==="return"?(this.rval=this.arg=ee.arg,this.method="return",this.next="end"):ee.type==="normal"&&V&&(this.next=V),b},finish:function(ee){for(var V=this.tryEntries.length-1;0<=V;--V){var q=this.tryEntries[V];if(q.finallyLoc===ee)return this.complete(q.completion,q.afterLoc),O(q),b}},catch:function(ee){for(var V=this.tryEntries.length-1;0<=V;--V){var q,Y,Z=this.tryEntries[V];if(Z.tryLoc===ee)return(q=Z.completion).type==="throw"&&(Y=q.arg,O(Z)),Y}throw new Error("illegal catch attempt")},delegateYield:function(ee,V,q){return this.delegate={iterator:X(ee),resultName:V,nextLoc:q},this.method==="next"&&(this.arg=a),b}},s}(typeof i=="object"?i.exports:{});try{regeneratorRuntime=i}catch{Function("r","regeneratorRuntime = r")(i)}},{}],258:[function(r,i,o){(function(s){var a,l,u,h,p,c,f,m,y,v;function g(O){if(typeof O!="string"&&(O=String(O)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(O))throw new TypeError("Invalid character in header field name");return O.toLowerCase()}function x(O){return O=typeof O!="string"?String(O):O}function b(O){var W={next:function(){var X=O.shift();return{done:X===void 0,value:X}}};return l&&(W[Symbol.iterator]=function(){return W}),W}function w(O){this.map={},O instanceof w?O.forEach(function(W,X){this.append(X,W)},this):Array.isArray(O)?O.forEach(function(W){this.append(W[0],W[1])},this):O&&Object.getOwnPropertyNames(O).forEach(function(W){this.append(W,O[W])},this)}function T(O){if(O.bodyUsed)return Promise.reject(new TypeError("Already read"));O.bodyUsed=!0}function R(O){return new Promise(function(W,X){O.onload=function(){W(O.result)},O.onerror=function(){X(O.error)}})}function C(O){var W=new FileReader,X=R(W);return W.readAsArrayBuffer(O),X}function P(O){var W;return O.slice?O.slice(0):((W=new Uint8Array(O.byteLength)).set(new Uint8Array(O)),W.buffer)}function I(){return this.bodyUsed=!1,this._initBody=function(O){if(this._bodyInit=O)if(typeof O=="string")this._bodyText=O;else if(u&&Blob.prototype.isPrototypeOf(O))this._bodyBlob=O;else if(h&&FormData.prototype.isPrototypeOf(O))this._bodyFormData=O;else if(a&&URLSearchParams.prototype.isPrototypeOf(O))this._bodyText=O.toString();else if(p&&u&&f(O))this._bodyArrayBuffer=P(O.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!p||!ArrayBuffer.prototype.isPrototypeOf(O)&&!m(O))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=P(O)}else this._bodyText="";this.headers.get("content-type")||(typeof O=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):a&&URLSearchParams.prototype.isPrototypeOf(O)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},u&&(this.blob=function(){var O=T(this);if(O)return O;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?T(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(C)}),this.text=function(){var O,W,X=T(this);if(X)return X;if(this._bodyBlob)return X=this._bodyBlob,O=new FileReader,W=R(O),O.readAsText(X),W;if(this._bodyArrayBuffer)return Promise.resolve(function(J){for(var ee=new Uint8Array(J),V=new Array(ee.length),q=0;q<ee.length;q++)V[q]=String.fromCharCode(ee[q]);return V.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},h&&(this.formData=function(){return this.text().then(j)}),this.json=function(){return this.text().then(JSON.parse)},this}function D(O,W){var X,J=(W=W||{}).body;if(O instanceof D){if(O.bodyUsed)throw new TypeError("Already read");this.url=O.url,this.credentials=O.credentials,W.headers||(this.headers=new w(O.headers)),this.method=O.method,this.mode=O.mode,J||O._bodyInit==null||(J=O._bodyInit,O.bodyUsed=!0)}else this.url=String(O);if(this.credentials=W.credentials||this.credentials||"omit",!W.headers&&this.headers||(this.headers=new w(W.headers)),this.method=(O=W.method||this.method||"GET",X=O.toUpperCase(),-1<y.indexOf(X)?X:O),this.mode=W.mode||this.mode||null,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&J)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(J)}function j(O){var W=new FormData;return O.trim().split("&").forEach(function(X){var J;X&&(J=(X=X.split("=")).shift().replace(/\+/g," "),X=X.join("=").replace(/\+/g," "),W.append(decodeURIComponent(J),decodeURIComponent(X)))}),W}function N(O,W){W=W||{},this.type="default",this.status=W.status===void 0?200:W.status,this.ok=200<=this.status&&this.status<300,this.statusText="statusText"in W?W.statusText:"OK",this.headers=new w(W.headers),this.url=W.url||"",this._initBody(O)}s.fetch||(a="URLSearchParams"in s,l="Symbol"in s&&"iterator"in Symbol,u="FileReader"in s&&"Blob"in s&&function(){try{return new Blob,!0}catch{return!1}}(),h="FormData"in s,(p="ArrayBuffer"in s)&&(c=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],f=function(O){return O&&DataView.prototype.isPrototypeOf(O)},m=ArrayBuffer.isView||function(O){return O&&-1<c.indexOf(Object.prototype.toString.call(O))}),w.prototype.append=function(O,W){O=g(O),W=x(W);var X=this.map[O];this.map[O]=X?X+","+W:W},w.prototype.delete=function(O){delete this.map[g(O)]},w.prototype.get=function(O){return O=g(O),this.has(O)?this.map[O]:null},w.prototype.has=function(O){return this.map.hasOwnProperty(g(O))},w.prototype.set=function(O,W){this.map[g(O)]=x(W)},w.prototype.forEach=function(O,W){for(var X in this.map)this.map.hasOwnProperty(X)&&O.call(W,this.map[X],X,this)},w.prototype.keys=function(){var O=[];return this.forEach(function(W,X){O.push(X)}),b(O)},w.prototype.values=function(){var O=[];return this.forEach(function(W){O.push(W)}),b(O)},w.prototype.entries=function(){var O=[];return this.forEach(function(W,X){O.push([X,W])}),b(O)},l&&(w.prototype[Symbol.iterator]=w.prototype.entries),y=["DELETE","GET","HEAD","OPTIONS","POST","PUT"],D.prototype.clone=function(){return new D(this,{body:this._bodyInit})},I.call(D.prototype),I.call(N.prototype),N.prototype.clone=function(){return new N(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new w(this.headers),url:this.url})},N.error=function(){var O=new N(null,{status:0,statusText:""});return O.type="error",O},v=[301,302,303,307,308],N.redirect=function(O,W){if(v.indexOf(W)===-1)throw new RangeError("Invalid status code");return new N(null,{status:W,headers:{location:O}})},s.Headers=w,s.Request=D,s.Response=N,s.fetch=function(O,W){return new Promise(function(X,J){var ee=new D(O,W),V=new XMLHttpRequest;V.onload=function(){var q,Y={status:V.status,statusText:V.statusText,headers:(Y=V.getAllResponseHeaders()||"",q=new w,Y.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(B){var B=B.split(":"),U=B.shift().trim();U&&(B=B.join(":").trim(),q.append(U,B))}),q)},Z=(Y.url="responseURL"in V?V.responseURL:Y.headers.get("X-Request-URL"),"response"in V?V.response:V.responseText);X(new N(Z,Y))},V.onerror=function(){J(new TypeError("Network request failed"))},V.ontimeout=function(){J(new TypeError("Network request failed"))},V.open(ee.method,ee.url,!0),ee.credentials==="include"?V.withCredentials=!0:ee.credentials==="omit"&&(V.withCredentials=!1),"responseType"in V&&u&&(V.responseType="blob"),ee.headers.forEach(function(q,Y){V.setRequestHeader(Y,q)}),V.send(ee._bodyInit===void 0?null:ee._bodyInit)})},s.fetch.polyfill=!0)})(typeof self<"u"?self:this)},{}],259:[function(r,i,o){r("core-js/modules/es.function.name"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.split"),r("core-js/modules/es.function.name"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.split"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var s,a=u(r("../core/main")),l=u(r("../color/color_conversion"));function u(c){return c&&c.__esModule?c:{default:c}}var h=[{h:0,s:0,b:.8275,name:"gray"},{h:0,s:0,b:.8627,name:"gray"},{h:0,s:0,b:.7529,name:"gray"},{h:.0167,s:.1176,b:1,name:"light pink"}],p=[{h:0,s:0,b:0,name:"black"},{h:0,s:0,b:.5,name:"gray"},{h:0,s:0,b:1,name:"white"},{h:0,s:.5,b:.5,name:"dark maroon"},{h:0,s:.5,b:1,name:"salmon pink"},{h:0,s:1,b:0,name:"black"},{h:0,s:1,b:.5,name:"dark red"},{h:0,s:1,b:1,name:"red"},{h:5,s:0,b:1,name:"very light peach"},{h:5,s:.5,b:.5,name:"brown"},{h:5,s:.5,b:1,name:"peach"},{h:5,s:1,b:.5,name:"brick red"},{h:5,s:1,b:1,name:"crimson"},{h:10,s:0,b:1,name:"light peach"},{h:10,s:.5,b:.5,name:"brown"},{h:10,s:.5,b:1,name:"light orange"},{h:10,s:1,b:.5,name:"brown"},{h:10,s:1,b:1,name:"orange"},{h:15,s:0,b:1,name:"very light yellow"},{h:15,s:.5,b:.5,name:"olive green"},{h:15,s:.5,b:1,name:"light yellow"},{h:15,s:1,b:0,name:"dark olive green"},{h:15,s:1,b:.5,name:"olive green"},{h:15,s:1,b:1,name:"yellow"},{h:20,s:0,b:1,name:"very light yellow"},{h:20,s:.5,b:.5,name:"olive green"},{h:20,s:.5,b:1,name:"light yellow green"},{h:20,s:1,b:0,name:"dark olive green"},{h:20,s:1,b:.5,name:"dark yellow green"},{h:20,s:1,b:1,name:"yellow green"},{h:25,s:.5,b:.5,name:"dark yellow green"},{h:25,s:.5,b:1,name:"light green"},{h:25,s:1,b:.5,name:"dark green"},{h:25,s:1,b:1,name:"green"},{h:30,s:.5,b:1,name:"light green"},{h:30,s:1,b:.5,name:"dark green"},{h:30,s:1,b:1,name:"green"},{h:35,s:0,b:.5,name:"light green"},{h:35,s:0,b:1,name:"very light green"},{h:35,s:.5,b:.5,name:"dark green"},{h:35,s:.5,b:1,name:"light green"},{h:35,s:1,b:0,name:"very dark green"},{h:35,s:1,b:.5,name:"dark green"},{h:35,s:1,b:1,name:"green"},{h:40,s:0,b:1,name:"very light green"},{h:40,s:.5,b:.5,name:"dark green"},{h:40,s:.5,b:1,name:"light green"},{h:40,s:1,b:.5,name:"dark green"},{h:40,s:1,b:1,name:"green"},{h:45,s:.5,b:1,name:"light turquoise"},{h:45,s:1,b:.5,name:"dark turquoise"},{h:45,s:1,b:1,name:"turquoise"},{h:50,s:0,b:1,name:"light sky blue"},{h:50,s:.5,b:.5,name:"dark cyan"},{h:50,s:.5,b:1,name:"light cyan"},{h:50,s:1,b:.5,name:"dark cyan"},{h:50,s:1,b:1,name:"cyan"},{h:55,s:0,b:1,name:"light sky blue"},{h:55,s:.5,b:1,name:"light sky blue"},{h:55,s:1,b:.5,name:"dark blue"},{h:55,s:1,b:1,name:"sky blue"},{h:60,s:0,b:.5,name:"gray"},{h:60,s:0,b:1,name:"very light blue"},{h:60,s:.5,b:.5,name:"blue"},{h:60,s:.5,b:1,name:"light blue"},{h:60,s:1,b:.5,name:"navy blue"},{h:60,s:1,b:1,name:"blue"},{h:65,s:0,b:1,name:"lavender"},{h:65,s:.5,b:.5,name:"navy blue"},{h:65,s:.5,b:1,name:"light purple"},{h:65,s:1,b:.5,name:"dark navy blue"},{h:65,s:1,b:1,name:"blue"},{h:70,s:0,b:1,name:"lavender"},{h:70,s:.5,b:.5,name:"navy blue"},{h:70,s:.5,b:1,name:"lavender blue"},{h:70,s:1,b:.5,name:"dark navy blue"},{h:70,s:1,b:1,name:"blue"},{h:75,s:.5,b:1,name:"lavender"},{h:75,s:1,b:.5,name:"dark purple"},{h:75,s:1,b:1,name:"purple"},{h:80,s:.5,b:1,name:"pinkish purple"},{h:80,s:1,b:.5,name:"dark purple"},{h:80,s:1,b:1,name:"purple"},{h:85,s:0,b:1,name:"light pink"},{h:85,s:.5,b:.5,name:"purple"},{h:85,s:.5,b:1,name:"light fuchsia"},{h:85,s:1,b:.5,name:"dark fuchsia"},{h:85,s:1,b:1,name:"fuchsia"},{h:90,s:.5,b:.5,name:"dark fuchsia"},{h:90,s:.5,b:1,name:"hot pink"},{h:90,s:1,b:.5,name:"dark fuchsia"},{h:90,s:1,b:1,name:"fuchsia"},{h:95,s:0,b:1,name:"pink"},{h:95,s:.5,b:1,name:"light pink"},{h:95,s:1,b:.5,name:"dark magenta"},{h:95,s:1,b:1,name:"magenta"}];a.default.prototype._rgbColorName=function(y){var f,m,y=l.default._rgbaToHSBA(y),v=[(s=y)[0],y[1],y[2]];v[0]!==0&&(v[0]=Math.round(100*v[0]),(y=v[0].toString().split(""))[m=y.length-1]=parseInt(y[m]),y[m]<2.5?y[m]=0:2.5<=y[m]&&y[m]<7.5&&(y[m]=5),y.length===2?(y[0]=parseInt(y[0]),7.5<=y[m]&&(y[m]=0,y[0]=y[0]+1),v[0]=10*y[0]+y[1]):7.5<=y[m]?v[0]=10:v[0]=y[m]),v[2]=v[2]/255;for(var g=v.length-1;1<=g;g--)v[g]<=.25?v[g]=0:.25<v[g]&&v[g]<.75?v[g]=.5:v[g]=1;if(v[0]===0&&v[1]===0&&v[2]===1){for(var x=2;0<=x;x--)s[x]=Math.round(1e4*s[x])/1e4;for(var b=0;b<h.length;b++){if(h[b].h===s[0]&&h[b].s===s[1]&&h[b].b===s[2]){f=h[b].name;break}f="white"}}else for(var w=0;w<p.length;w++)if(p[w].h===v[0]&&p[w].s===v[1]&&p[w].b===v[2]){f=p[w].name;break}return f},r=a.default,o.default=r},{"../color/color_conversion":265,"../core/main":280,"core-js/modules/es.function.name":173,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.split":203}],260:[function(r,i,o){r("core-js/modules/es.array.concat"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.ends-with"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.ends-with"),r("core-js/modules/es.string.replace"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var s=(r=r("../core/main"))&&r.__esModule?r:{default:r},a="_Description",l="_fallbackDesc",u="_fallbackTable",h="_Label",p="_labelDesc",c="_labelTable";function f(m){if(m==="label"||m==="fallback")throw new Error("description should not be LABEL or FALLBACK");return m.endsWith(".")||m.endsWith(";")||m.endsWith(",")||m.endsWith("?")||m.endsWith("!")||(m+="."),m}s.default.prototype.describe=function(m,y){var v;s.default._validateParameters("describe",arguments),typeof m=="string"&&(v=this.canvas.id,m=f(m),this.dummyDOM||(this.dummyDOM=document.getElementById(v).parentNode),this.descriptions||(this.descriptions={}),this.descriptions.fallback?this.descriptions.fallback.innerHTML!==m&&(this.descriptions.fallback.innerHTML=m):this._describeHTML("fallback",m),y===this.LABEL&&(this.descriptions.label?this.descriptions.label.innerHTML!==m&&(this.descriptions.label.innerHTML=m):this._describeHTML("label",m)))},s.default.prototype.describeElement=function(m,y,v){var g,x;s.default._validateParameters("describeElement",arguments),typeof y=="string"&&typeof m=="string"&&(g=this.canvas.id,y=f(y),x=function(b){if(b==="label"||b==="fallback")throw new Error("element name should not be LABEL or FALLBACK");return b.endsWith(".")||b.endsWith(";")||b.endsWith(",")?b=b.replace(/.$/,":"):b.endsWith(":")||(b+=":"),b}(m),m=m.replace(/[^a-zA-Z0-9]/g,""),x='<th scope="row">'.concat(x,"</th><td>").concat(y,"</td>"),this.dummyDOM||(this.dummyDOM=document.getElementById(g).parentNode),this.descriptions?this.descriptions.fallbackElements||(this.descriptions.fallbackElements={}):this.descriptions={fallbackElements:{}},this.descriptions.fallbackElements[m]?this.descriptions.fallbackElements[m].innerHTML!==x&&(this.descriptions.fallbackElements[m].innerHTML=x):this._describeElementHTML("fallback",m,x),v===this.LABEL&&(this.descriptions.labelElements||(this.descriptions.labelElements={}),this.descriptions.labelElements[m]?this.descriptions.labelElements[m].innerHTML!==x&&(this.descriptions.labelElements[m].innerHTML=x):this._describeElementHTML("label",m,x)))},s.default.prototype._describeHTML=function(m,y){var v,g=this.canvas.id;m==="fallback"?(this.dummyDOM.querySelector("#".concat(g+a))?this.dummyDOM.querySelector("#"+g+u).insertAdjacentHTML("beforebegin",'<p id="'.concat(g+l,'"></p>')):(v='<div id="'.concat(g).concat(a,'" role="region" aria-label="Canvas Description"><p id="').concat(g).concat(l,'"></p></div>'),this.dummyDOM.querySelector("#".concat(g,"accessibleOutput"))?this.dummyDOM.querySelector("#".concat(g,"accessibleOutput")).insertAdjacentHTML("beforebegin",v):this.dummyDOM.querySelector("#".concat(g)).innerHTML=v),this.descriptions.fallback=this.dummyDOM.querySelector("#".concat(g).concat(l)),this.descriptions.fallback.innerHTML=y):m==="label"&&(this.dummyDOM.querySelector("#".concat(g+h))?this.dummyDOM.querySelector("#".concat(g+c))&&this.dummyDOM.querySelector("#".concat(g+c)).insertAdjacentHTML("beforebegin",'<p id="'.concat(g).concat(p,'"></p>')):(v='<div id="'.concat(g).concat(h,'" class="p5Label"><p id="').concat(g).concat(p,'"></p></div>'),this.dummyDOM.querySelector("#".concat(g,"accessibleOutputLabel"))?this.dummyDOM.querySelector("#".concat(g,"accessibleOutputLabel")).insertAdjacentHTML("beforebegin",v):this.dummyDOM.querySelector("#"+g).insertAdjacentHTML("afterend",v)),this.descriptions.label=this.dummyDOM.querySelector("#"+g+p),this.descriptions.label.innerHTML=y)},s.default.prototype._describeElementHTML=function(m,y,v){var g,x=this.canvas.id;m==="fallback"?(this.dummyDOM.querySelector("#".concat(x+a))?this.dummyDOM.querySelector("#"+x+u)||this.dummyDOM.querySelector("#"+x+l).insertAdjacentHTML("afterend",'<table id="'.concat(x).concat(u,'"><caption>Canvas elements and their descriptions</caption></table>')):(g='<div id="'.concat(x).concat(a,'" role="region" aria-label="Canvas Description"><table id="').concat(x).concat(u,'"><caption>Canvas elements and their descriptions</caption></table></div>'),this.dummyDOM.querySelector("#".concat(x,"accessibleOutput"))?this.dummyDOM.querySelector("#".concat(x,"accessibleOutput")).insertAdjacentHTML("beforebegin",g):this.dummyDOM.querySelector("#"+x).innerHTML=g),(g=document.createElement("tr")).id=x+"_fte_"+y,this.dummyDOM.querySelector("#"+x+u).appendChild(g),this.descriptions.fallbackElements[y]=this.dummyDOM.querySelector("#".concat(x).concat("_fte_").concat(y)),this.descriptions.fallbackElements[y].innerHTML=v):m==="label"&&(this.dummyDOM.querySelector("#".concat(x+h))?this.dummyDOM.querySelector("#".concat(x+c))||this.dummyDOM.querySelector("#"+x+p).insertAdjacentHTML("afterend",'<table id="'.concat(x+c,'"></table>')):(g='<div id="'.concat(x).concat(h,'" class="p5Label"><table id="').concat(x).concat(c,'"></table></div>'),this.dummyDOM.querySelector("#".concat(x,"accessibleOutputLabel"))?this.dummyDOM.querySelector("#".concat(x,"accessibleOutputLabel")).insertAdjacentHTML("beforebegin",g):this.dummyDOM.querySelector("#"+x).insertAdjacentHTML("afterend",g)),(m=document.createElement("tr")).id=x+"_lte_"+y,this.dummyDOM.querySelector("#"+x+c).appendChild(m),this.descriptions.labelElements[y]=this.dummyDOM.querySelector("#".concat(x).concat("_lte_").concat(y)),this.descriptions.labelElements[y].innerHTML=v)},r=s.default,o.default=r},{"../core/main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.string.ends-with":195,"core-js/modules/es.string.replace":201}],261:[function(r,i,o){r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.map"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.map"),r("core-js/modules/es.string.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,r=(r=r("../core/main"))&&r.__esModule?r:{default:r},r.default.prototype._updateGridOutput=function(s){var a,l,u,h;this.dummyDOM.querySelector("#".concat(s,"_summary"))&&(a=this._accessibleOutputs[s],u=function(p,c,f,m){return c="".concat(c," canvas, ").concat(f," by ").concat(m," pixels, contains ").concat(p[0]),c=(p[0]===1?"".concat(c," shape: "):"".concat(c," shapes: ")).concat(p[1]),c}((l=function(p,c){var f,m="",y="",v=0;for(f in c){var g,x=0;for(g in c[f]){var b='<li id="'.concat(p,"shape").concat(v,'">').concat(c[f][g].color," ").concat(f,",");f==="line"?b+=" location = ".concat(c[f][g].pos,", length = ").concat(c[f][g].length," pixels"):(b+=" location = ".concat(c[f][g].pos),f!=="point"&&(b+=", area = ".concat(c[f][g].area," %")),b+="</li>"),m+=b,x++,v++}y=1<x?"".concat(y," ").concat(x," ").concat(f,"s"):"".concat(y," ").concat(x," ").concat(f)}return{numShapes:[v,y],details:m}}(s,this.ingredients.shapes)).numShapes,this.ingredients.colors.background,this.width,this.height),h=function(p,c){var f,m,y=0,v="",g=Array.from(Array(10),function(){return Array(10)});for(f in c)for(var x in c[f]){var b=void 0;b=f!=="line"?'<a href="#'.concat(p,"shape").concat(y,'">').concat(c[f][x].color," ").concat(f,"</a>"):'<a href="#'.concat(p,"shape").concat(y,'">').concat(c[f][x].color," ").concat(f," midpoint</a>"),g[c[f][x].loc.locY][c[f][x].loc.locX]?g[c[f][x].loc.locY][c[f][x].loc.locX]=g[c[f][x].loc.locY][c[f][x].loc.locX]+"  "+b:g[c[f][x].loc.locY][c[f][x].loc.locX]=b,y++}for(m in g){var w,T="<tr>";for(w in g[m])T+="<td>",g[m][w]!==void 0&&(T+=g[m][w]),T+="</td>";v=v+T+"</tr>"}return v}(s,this.ingredients.shapes),u!==a.summary.innerHTML&&(a.summary.innerHTML=u),h!==a.map.innerHTML&&(a.map.innerHTML=h),l.details!==a.shapeDetails.innerHTML&&(a.shapeDetails.innerHTML=l.details),this._accessibleOutputs[s]=a)},r=r.default,o.default=r},{"../core/main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.from":161,"core-js/modules/es.array.map":167,"core-js/modules/es.string.iterator":197}],262:[function(r,i,o){r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.fill"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.map"),r("core-js/modules/es.number.to-fixed"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.fill"),r("core-js/modules/es.array.map"),r("core-js/modules/es.number.to-fixed"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var s=(r=r("../core/main"))&&r.__esModule?r:{default:r};function a(u){return function(h){if(Array.isArray(h)){for(var p=0,c=new Array(h.length);p<h.length;p++)c[p]=h[p];return c}}(u)||function(h){if(Symbol.iterator in Object(h)||Object.prototype.toString.call(h)==="[object Arguments]")return Array.from(h)}(u)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function l(u,h,p){return h=Math.floor(u[0]/h*10),u=Math.floor(u[1]/p*10),h===10&&(h-=1),u===10&&(u-=1),{locX:h,locY:u}}s.default.prototype.textOutput=function(u){s.default._validateParameters("textOutput",arguments),this._accessibleOutputs.text||(this._accessibleOutputs.text=!0,this._createOutput("textOutput","Fallback"),u===this.LABEL&&(this._accessibleOutputs.textLabel=!0,this._createOutput("textOutput","Label")))},s.default.prototype.gridOutput=function(u){s.default._validateParameters("gridOutput",arguments),this._accessibleOutputs.grid||(this._accessibleOutputs.grid=!0,this._createOutput("gridOutput","Fallback"),u===this.LABEL&&(this._accessibleOutputs.gridLabel=!0,this._createOutput("gridOutput","Label")))},s.default.prototype._addAccsOutput=function(){return this._accessibleOutputs||(this._accessibleOutputs={text:!1,grid:!1,textLabel:!1,gridLabel:!1}),this._accessibleOutputs.grid||this._accessibleOutputs.text},s.default.prototype._createOutput=function(u,h){var p,c,f,m=this.canvas.id,y=(this.ingredients||(this.ingredients={shapes:{},colors:{background:"white",fill:"white",stroke:"black"},pShapes:"",pBackground:""}),this.dummyDOM||(this.dummyDOM=document.getElementById(m).parentNode),"");h==="Fallback"?(p=m+u,this.dummyDOM.querySelector("#".concat(c=m+"accessibleOutput"))||(this.dummyDOM.querySelector("#".concat(m,"_Description"))?this.dummyDOM.querySelector("#".concat(m,"_Description")).insertAdjacentHTML("afterend",'<div id="'.concat(c,'" role="region" aria-label="Canvas Outputs"></div>')):this.dummyDOM.querySelector("#".concat(m)).innerHTML='<div id="'.concat(c,'" role="region" aria-label="Canvas Outputs"></div>'))):h==="Label"&&(p=m+u+(y=h),this.dummyDOM.querySelector("#".concat(c=m+"accessibleOutput"+h))||(this.dummyDOM.querySelector("#".concat(m,"_Label"))?this.dummyDOM.querySelector("#".concat(m,"_Label")):this.dummyDOM.querySelector("#".concat(m))).insertAdjacentHTML("afterend",'<div id="'.concat(c,'"></div>'))),this._accessibleOutputs[p]={},u==="textOutput"?(y="#".concat(m,"gridOutput").concat(y),f='<div id="'.concat(p,'">Text Output<div id="').concat(p,'Summary" aria-label="text output summary"><p id="').concat(p,'_summary"></p><ul id="').concat(p,'_list"></ul></div><table id="').concat(p,'_shapeDetails" summary="text output shape details"></table></div>'),this.dummyDOM.querySelector(y)?this.dummyDOM.querySelector(y).insertAdjacentHTML("beforebegin",f):this.dummyDOM.querySelector("#".concat(c)).innerHTML=f,this._accessibleOutputs[p].list=this.dummyDOM.querySelector("#".concat(p,"_list"))):u==="gridOutput"&&(y="#".concat(m,"textOutput").concat(y),f='<div id="'.concat(p,'">Grid Output<p id="').concat(p,'_summary" aria-label="grid output summary"><table id="').concat(p,'_map" summary="grid output content"></table><ul id="').concat(p,'_shapeDetails" aria-label="grid output shape details"></ul></div>'),this.dummyDOM.querySelector(y)?this.dummyDOM.querySelector(y).insertAdjacentHTML("afterend",f):this.dummyDOM.querySelector("#".concat(c)).innerHTML=f,this._accessibleOutputs[p].map=this.dummyDOM.querySelector("#".concat(p,"_map"))),this._accessibleOutputs[p].shapeDetails=this.dummyDOM.querySelector("#".concat(p,"_shapeDetails")),this._accessibleOutputs[p].summary=this.dummyDOM.querySelector("#".concat(p,"_summary"))},s.default.prototype._updateAccsOutput=function(){var u=this.canvas.id;JSON.stringify(this.ingredients.shapes)===this.ingredients.pShapes&&this.ingredients.colors.background===this.ingredients.pBackground||(this.ingredients.pShapes=JSON.stringify(this.ingredients.shapes),this._accessibleOutputs.text&&this._updateTextOutput(u+"textOutput"),this._accessibleOutputs.grid&&this._updateGridOutput(u+"gridOutput"),this._accessibleOutputs.textLabel&&this._updateTextOutput(u+"textOutputLabel"),this._accessibleOutputs.gridLabel&&this._updateGridOutput(u+"gridOutputLabel"))},s.default.prototype._accsBackground=function(u){this.ingredients.pShapes=JSON.stringify(this.ingredients.shapes),this.ingredients.pBackground=this.ingredients.colors.background,this.ingredients.shapes={},this.ingredients.colors.backgroundRGBA!==u&&(this.ingredients.colors.backgroundRGBA=u,this.ingredients.colors.background=this._rgbColorName(u))},s.default.prototype._accsCanvasColors=function(u,h){u==="fill"?this.ingredients.colors.fillRGBA!==h&&(this.ingredients.colors.fillRGBA=h,this.ingredients.colors.fill=this._rgbColorName(h)):u==="stroke"&&this.ingredients.colors.strokeRGBA!==h&&(this.ingredients.colors.strokeRGBA=h,this.ingredients.colors.stroke=this._rgbColorName(h))},s.default.prototype._accsOutput=function(u,h){u==="ellipse"&&h[2]===h[3]?u="circle":u==="rectangle"&&h[2]===h[3]&&(u="square");var p,c,f={},m=!0,y=function(g,x){var b;return g=g==="rectangle"||g==="ellipse"||g==="arc"||g==="circle"||g==="square"?(b=Math.round(x[0]+x[2]/2),Math.round(x[1]+x[3]/2)):g==="triangle"?(b=(x[0]+x[2]+x[4])/3,(x[1]+x[3]+x[5])/3):g==="quadrilateral"?(b=(x[0]+x[2]+x[4]+x[6])/4,(x[1]+x[3]+x[5]+x[7])/4):g==="line"?(b=(x[0]+x[2])/2,(x[1]+x[3])/2):(b=x[0],x[1]),[b,g]}(u,h);if(u==="line"?(f.color=this.ingredients.colors.stroke,f.length=Math.round(this.dist(h[0],h[1],h[2],h[3])),p=this._getPos(h[0],[1]),c=this._getPos(h[2],[3]),f.loc=l(y,this.width,this.height),f.pos=p===c?"at ".concat(p):"from ".concat(p," to ").concat(c)):(u==="point"?f.color=this.ingredients.colors.stroke:(f.color=this.ingredients.colors.fill,f.area=this._getArea(u,h)),f.pos=this._getPos.apply(this,a(y)),f.loc=l(y,this.width,this.height)),this.ingredients.shapes[u]){if(this.ingredients.shapes[u]!==[f]){for(var v in this.ingredients.shapes[u])JSON.stringify(this.ingredients.shapes[u][v])===JSON.stringify(f)&&(m=!1);m===!0&&this.ingredients.shapes[u].push(f)}}else this.ingredients.shapes[u]=[f]},s.default.prototype._getPos=function(c,p){var c=new DOMPointReadOnly(c,p),p=this._renderer.isP3D?new DOMMatrix(this._renderer.uMVMatrix.mat4):this.drawingContext.getTransform(),c=c.matrixTransform(p),p=c.x,c=c.y,f=this.width*this._pixelDensity,m=this.height*this._pixelDensity;return p<.4*f?c<.4*m?"top left":.6*m<c?"bottom left":"mid left":.6*f<p?c<.4*m?"top right":.6*m<c?"bottom right":"mid right":c<.4*m?"top middle":.6*m<c?"bottom middle":"middle"},s.default.prototype._getArea=function(u,h){var p,c,f=0,m=(u==="arc"?(f=(p=((h[5]-h[4])%(2*Math.PI)+2*Math.PI)%(2*Math.PI))*h[2]*h[3]/8,h[6]!=="open"&&h[6]!=="chord"||(c=h[0],x=h[1],m=h[0]+h[2]/2*Math.cos(h[4]).toFixed(2),b=h[1]+h[3]/2*Math.sin(h[4]).toFixed(2),v=h[0]+h[2]/2*Math.cos(h[5]).toFixed(2),y=h[1]+h[3]/2*Math.sin(h[5]).toFixed(2),c=Math.abs(c*(b-y)+m*(y-x)+v*(x-b))/2,p>Math.PI?f+=c:f-=c)):u==="ellipse"||u==="circle"?f=3.14*h[2]/2*h[3]/2:u==="line"||u==="point"?f=0:u==="quadrilateral"?f=Math.abs((h[6]+h[0])*(h[7]-h[1])+(h[0]+h[2])*(h[1]-h[3])+(h[2]+h[4])*(h[3]-h[5])+(h[4]+h[6])*(h[5]-h[7]))/2:u==="rectangle"||u==="square"?f=h[2]*h[3]:u==="triangle"&&(f=Math.abs(h[0]*(h[3]-h[5])+h[2]*(h[5]-h[1])+h[4]*(h[1]-h[3]))/2),this.width*this._pixelDensity),y=this.height*this._pixelDensity,v=[new DOMPoint(0,0),new DOMPoint(m,0),new DOMPoint(m,y),new DOMPoint(0,y)],g=(this._renderer.isP3D?new DOMMatrix(this._renderer.uMVMatrix.mat4):this.drawingContext.getTransform()).inverse(),x=v.map(function(w){return w.matrixTransform(g)}),b=Math.abs((x[3].x+x[0].x)*(x[3].y-x[0].y)+(x[0].x+x[1].x)*(x[0].y-x[1].y)+(x[1].x+x[2].x)*(x[1].y-x[2].y)+(x[2].x+x[3].x)*(x[2].y-x[3].y))/2;return Math.round(100*f/b)},r=s.default,o.default=r},{"../core/main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.fill":155,"core-js/modules/es.array.from":161,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.map":167,"core-js/modules/es.number.to-fixed":180,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/web.dom-collections.iterator":243}],263:[function(r,i,o){r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.concat"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,r=(r=r("../core/main"))&&r.__esModule?r:{default:r},r.default.prototype._updateTextOutput=function(s){var a,l,u,h;this.dummyDOM.querySelector("#".concat(s,"_summary"))&&(a=this._accessibleOutputs[s],u=function(p,c,f,m){return f="Your output is a, ".concat(f," by ").concat(m," pixels, ").concat(c," canvas containing the following"),f=p===1?"".concat(f," shape:"):"".concat(f," ").concat(p," shapes:"),f}((l=function(p,c){var f,m="",y=0;for(f in c)for(var v in c[f]){var g='<li><a href="#'.concat(p,"shape").concat(y,'">').concat(c[f][v].color," ").concat(f,"</a>");f==="line"?g+=", ".concat(c[f][v].pos,", ").concat(c[f][v].length," pixels long.</li>"):(g+=", at ".concat(c[f][v].pos),f!=="point"&&(g+=", covering ".concat(c[f][v].area,"% of the canvas")),g+=".</li>"),m+=g,y++}return{numShapes:y,listShapes:m}}(s,this.ingredients.shapes)).numShapes,this.ingredients.colors.background,this.width,this.height),h=function(p,c){var f,m="",y=0;for(f in c)for(var v in c[f]){var g='<tr id="'.concat(p,"shape").concat(y,'"><th>').concat(c[f][v].color," ").concat(f,"</th>");f==="line"?g+="<td>location = ".concat(c[f][v].pos,"</td><td>length = ").concat(c[f][v].length," pixels</td></tr>"):(g+="<td>location = ".concat(c[f][v].pos,"</td>"),f!=="point"&&(g+="<td> area = ".concat(c[f][v].area,"%</td>")),g+="</tr>"),m+=g,y++}return m}(s,this.ingredients.shapes),u!==a.summary.innerHTML&&(a.summary.innerHTML=u),l.listShapes!==a.list.innerHTML&&(a.list.innerHTML=l.listShapes),h!==a.shapeDetails.innerHTML&&(a.shapeDetails.innerHTML=h),this._accessibleOutputs[s]=a)},r=r.default,o.default=r},{"../core/main":280,"core-js/modules/es.array.concat":152}],264:[function(r,i,o){var s=(s=r("./core/main"))&&s.__esModule?s:{default:s};r("./core/constants"),r("./core/environment"),r("./core/friendly_errors/stacktrace"),r("./core/friendly_errors/validate_params"),r("./core/friendly_errors/file_errors"),r("./core/friendly_errors/fes_core"),r("./core/friendly_errors/sketch_reader"),r("./core/helpers"),r("./core/legacy"),r("./core/preload"),r("./core/p5.Element"),r("./core/p5.Graphics"),r("./core/p5.Renderer"),r("./core/p5.Renderer2D"),r("./core/rendering"),r("./core/shim"),r("./core/structure"),r("./core/transform"),r("./core/shape/2d_primitives"),r("./core/shape/attributes"),r("./core/shape/curves"),r("./core/shape/vertex"),r("./accessibility/outputs"),r("./accessibility/textOutput"),r("./accessibility/gridOutput"),r("./accessibility/color_namer"),r("./color/color_conversion"),r("./color/creating_reading"),r("./color/p5.Color"),r("./color/setting"),r("./data/p5.TypedDict"),r("./data/local_storage.js"),r("./dom/dom"),r("./accessibility/describe"),r("./events/acceleration"),r("./events/keyboard"),r("./events/mouse"),r("./events/touch"),r("./image/filters"),r("./image/image"),r("./image/loading_displaying"),r("./image/p5.Image"),r("./image/pixels"),r("./io/files"),r("./io/p5.Table"),r("./io/p5.TableRow"),r("./io/p5.XML"),r("./math/calculation"),r("./math/math"),r("./math/noise"),r("./math/p5.Vector"),r("./math/random"),r("./math/trigonometry"),r("./typography/attributes"),r("./typography/loading_displaying"),r("./typography/p5.Font"),r("./utilities/array_functions"),r("./utilities/conversion"),r("./utilities/string_functions"),r("./utilities/time_date"),r("./webgl/3d_primitives"),r("./webgl/interaction"),r("./webgl/light"),r("./webgl/loading"),r("./webgl/material"),r("./webgl/p5.Camera"),r("./webgl/p5.DataArray"),r("./webgl/p5.Geometry"),r("./webgl/p5.Matrix"),r("./webgl/p5.RendererGL.Immediate"),r("./webgl/p5.RendererGL"),r("./webgl/p5.RendererGL.Retained"),r("./webgl/p5.Framebuffer"),r("./webgl/p5.Shader"),r("./webgl/p5.RenderBuffer"),r("./webgl/p5.Texture"),r("./webgl/text"),r("./core/init"),i.exports=s.default},{"./accessibility/color_namer":259,"./accessibility/describe":260,"./accessibility/gridOutput":261,"./accessibility/outputs":262,"./accessibility/textOutput":263,"./color/color_conversion":265,"./color/creating_reading":266,"./color/p5.Color":267,"./color/setting":268,"./core/constants":269,"./core/environment":270,"./core/friendly_errors/fes_core":271,"./core/friendly_errors/file_errors":272,"./core/friendly_errors/sketch_reader":273,"./core/friendly_errors/stacktrace":274,"./core/friendly_errors/validate_params":275,"./core/helpers":276,"./core/init":277,"./core/legacy":279,"./core/main":280,"./core/p5.Element":281,"./core/p5.Graphics":282,"./core/p5.Renderer":283,"./core/p5.Renderer2D":284,"./core/preload":285,"./core/rendering":286,"./core/shape/2d_primitives":287,"./core/shape/attributes":288,"./core/shape/curves":289,"./core/shape/vertex":290,"./core/shim":291,"./core/structure":292,"./core/transform":293,"./data/local_storage.js":294,"./data/p5.TypedDict":295,"./dom/dom":296,"./events/acceleration":297,"./events/keyboard":298,"./events/mouse":299,"./events/touch":300,"./image/filters":301,"./image/image":302,"./image/loading_displaying":303,"./image/p5.Image":304,"./image/pixels":305,"./io/files":306,"./io/p5.Table":307,"./io/p5.TableRow":308,"./io/p5.XML":309,"./math/calculation":310,"./math/math":311,"./math/noise":312,"./math/p5.Vector":313,"./math/random":314,"./math/trigonometry":315,"./typography/attributes":316,"./typography/loading_displaying":317,"./typography/p5.Font":318,"./utilities/array_functions":319,"./utilities/conversion":320,"./utilities/string_functions":321,"./utilities/time_date":322,"./webgl/3d_primitives":323,"./webgl/interaction":325,"./webgl/light":326,"./webgl/loading":327,"./webgl/material":328,"./webgl/p5.Camera":329,"./webgl/p5.DataArray":330,"./webgl/p5.Framebuffer":331,"./webgl/p5.Geometry":332,"./webgl/p5.Matrix":333,"./webgl/p5.RenderBuffer":334,"./webgl/p5.RendererGL":337,"./webgl/p5.RendererGL.Immediate":335,"./webgl/p5.RendererGL.Retained":336,"./webgl/p5.Shader":338,"./webgl/p5.Texture":339,"./webgl/text":340}],265:[function(r,i,o){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,r=(r=r("../core/main"))&&r.__esModule?r:{default:r},r.default.ColorConversion={_hsbaToHSLA:function(s){var a=s[0],l=s[1],u=s[2],h=(2-l)*u/2;return h!=0&&(h==1?l=0:h<.5?l/=2-l:l=l*u/(2-2*h)),[a,l,h,s[3]]},_hsbaToRGBA:function(s){var a,l,u,h,p,c=6*s[0],f=s[1],m=s[2];return f===0?[m,m,m,s[3]]:(l=m*(1-f),u=m*(1-f*(c-(a=Math.floor(c)))),f=m*(1-f*(1+a-c)),c=a===1?(h=u,p=m,l):a===2?(h=l,p=m,f):a===3?(h=l,p=u,m):a===4?(h=f,p=l,m):a===5?(h=m,p=l,u):(h=m,p=f,l),[h,p,c,s[3]])},_hslaToHSBA:function(s){var a=s[0],l=s[1],u=s[2],h=u<.5?(1+l)*u:u+l-u*l;return[a,l=2*(h-u)/h,h,s[3]]},_hslaToRGBA:function(s){var a,l=6*s[0],u=s[1],h=s[2];return u===0?[h,h,h,s[3]]:[(a=function(p,c,f){return p<0?p+=6:6<=p&&(p-=6),p<1?c+(f-c)*p:p<3?f:p<4?c+(f-c)*(4-p):c})(2+l,u=2*h-(h=h<.5?(1+u)*h:h+u-h*u),h),a(l,u,h),a(l-2,u,h),s[3]]},_rgbaToHSBA:function(s){var a,l,u=s[0],h=s[1],p=s[2],c=Math.max(u,h,p),f=c-Math.min(u,h,p);return f==0?l=a=0:(l=f/c,u===c?a=(h-p)/f:h===c?a=2+(p-u)/f:p===c&&(a=4+(u-h)/f),a<0?a+=6:6<=a&&(a-=6)),[a/6,l,c,s[3]]},_rgbaToHSLA:function(s){var a,l,u=s[0],h=s[1],p=s[2],c=Math.max(u,h,p),m=Math.min(u,h,p),f=c+m,m=c-m;return m==0?l=a=0:(l=f<1?m/f:m/(2-f),u===c?a=(h-p)/m:h===c?a=2+(p-u)/m:p===c&&(a=4+(u-h)/m),a<0?a+=6:6<=a&&(a-=6)),[a/6,l,f/2,s[3]]}},r=r.default.ColorConversion,o.default=r},{"../core/main":280}],266:[function(r,i,o){function s(c){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(c)}function a(c){return(a=typeof Symbol=="function"&&s(Symbol.iterator)==="symbol"?function(f){return s(f)}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":s(f)})(c)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.map"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.map"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var l=(p=r("../core/main"))&&p.__esModule?p:{default:p},u=function(c){if(c&&c.__esModule)return c;if(c===null||a(c)!=="object"&&typeof c!="function")return{default:c};var f=h();if(f&&f.has(c))return f.get(c);var m,y={},v=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(m in c){var g;Object.prototype.hasOwnProperty.call(c,m)&&((g=v?Object.getOwnPropertyDescriptor(c,m):null)&&(g.get||g.set)?Object.defineProperty(y,m,g):y[m]=c[m])}return y.default=c,f&&f.set(c,y),y}(r("../core/constants"));function h(){var c;return typeof WeakMap!="function"?null:(c=new WeakMap,h=function(){return c},c)}r("./p5.Color"),r("../core/friendly_errors/validate_params"),r("../core/friendly_errors/file_errors"),r("../core/friendly_errors/fes_core"),l.default.prototype.alpha=function(c){return l.default._validateParameters("alpha",arguments),this.color(c)._getAlpha()},l.default.prototype.blue=function(c){return l.default._validateParameters("blue",arguments),this.color(c)._getBlue()},l.default.prototype.brightness=function(c){return l.default._validateParameters("brightness",arguments),this.color(c)._getBrightness()},l.default.prototype.color=function(){for(var c,f=arguments.length,m=new Array(f),y=0;y<f;y++)m[y]=arguments[y];return l.default._validateParameters("color",m),m[0]instanceof l.default.Color?m[0]:(c=Array.isArray(m[0])?m[0]:m,new l.default.Color(this,c))},l.default.prototype.green=function(c){return l.default._validateParameters("green",arguments),this.color(c)._getGreen()},l.default.prototype.hue=function(c){return l.default._validateParameters("hue",arguments),this.color(c)._getHue()},l.default.prototype.lerpColor=function(c,f,m){l.default._validateParameters("lerpColor",arguments);var y,v,g,x=this._colorMode,b=this._colorMaxes;if(x===u.RGB)v=c.levels.map(function(w){return w/255}),g=f.levels.map(function(w){return w/255});else if(x===u.HSB)c._getBrightness(),f._getBrightness(),v=c.hsba,g=f.hsba;else{if(x!==u.HSL)throw new Error("".concat(x," cannot be used for interpolation."));c._getLightness(),f._getLightness(),v=c.hsla,g=f.hsla}return m=Math.max(Math.min(m,1),0),this.lerp===void 0&&(this.lerp=function(w,T,R){return R*(T-w)+w}),x===u.RGB?y=this.lerp(v[0],g[0],m):(.5<Math.abs(v[0]-g[0])&&(v[0]>g[0]?g[0]+=1:v[0]+=1),1<=(y=this.lerp(v[0],g[0],m))&&--y),c=this.lerp(v[1],g[1],m),f=this.lerp(v[2],g[2],m),v=this.lerp(v[3],g[3],m),y*=b[x][0],c*=b[x][1],f*=b[x][2],v*=b[x][3],this.color(y,c,f,v)},l.default.prototype.lightness=function(c){return l.default._validateParameters("lightness",arguments),this.color(c)._getLightness()},l.default.prototype.red=function(c){return l.default._validateParameters("red",arguments),this.color(c)._getRed()},l.default.prototype.saturation=function(c){return l.default._validateParameters("saturation",arguments),this.color(c)._getSaturation()};var p=l.default;o.default=p},{"../core/constants":269,"../core/friendly_errors/fes_core":271,"../core/friendly_errors/file_errors":272,"../core/friendly_errors/validate_params":275,"../core/main":280,"./p5.Color":267,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.map":167,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],267:[function(y,i,o){function s(w){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(T){return typeof T}:function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":typeof T})(w)}function a(w){return(a=typeof Symbol=="function"&&s(Symbol.iterator)==="symbol"?function(T){return s(T)}:function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":s(T)})(w)}y("core-js/modules/es.symbol"),y("core-js/modules/es.symbol.description"),y("core-js/modules/es.symbol.iterator"),y("core-js/modules/es.array.includes"),y("core-js/modules/es.array.iterator"),y("core-js/modules/es.array.join"),y("core-js/modules/es.array.map"),y("core-js/modules/es.array.slice"),y("core-js/modules/es.object.get-own-property-descriptor"),y("core-js/modules/es.object.to-string"),y("core-js/modules/es.regexp.constructor"),y("core-js/modules/es.regexp.exec"),y("core-js/modules/es.regexp.to-string"),y("core-js/modules/es.string.includes"),y("core-js/modules/es.string.iterator"),y("core-js/modules/es.string.trim"),y("core-js/modules/es.weak-map"),y("core-js/modules/web.dom-collections.iterator"),y("core-js/modules/es.array.includes"),y("core-js/modules/es.array.join"),y("core-js/modules/es.array.map"),y("core-js/modules/es.array.slice"),y("core-js/modules/es.object.to-string"),y("core-js/modules/es.regexp.constructor"),y("core-js/modules/es.regexp.exec"),y("core-js/modules/es.regexp.to-string"),y("core-js/modules/es.string.includes"),y("core-js/modules/es.string.trim"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var l=c(y("../core/main")),u=function(w){if(w&&w.__esModule)return w;if(w===null||a(w)!=="object"&&typeof w!="function")return{default:w};var T=p();if(T&&T.has(w))return T.get(w);var R,C={},P=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(R in w){var I;Object.prototype.hasOwnProperty.call(w,R)&&((I=P?Object.getOwnPropertyDescriptor(w,R):null)&&(I.get||I.set)?Object.defineProperty(C,R,I):C[R]=w[R])}return C.default=w,T&&T.set(w,C),C}(y("../core/constants")),h=c(y("./color_conversion"));function p(){var w;return typeof WeakMap!="function"?null:(w=new WeakMap,p=function(){return w},w)}function c(w){return w&&w.__esModule?w:{default:w}}function f(w,T){for(var R=0;R<T.length;R++){var C=T[R];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(w,C.key,C)}}var m={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},y=/\s*/,b=/(\d{1,3})/,v=/((?:\d+(?:\.\d+)?)|(?:\.\d+))/,g=new RegExp("".concat(v.source,"%")),x={HEX3:/^#([a-f0-9])([a-f0-9])([a-f0-9])$/i,HEX4:/^#([a-f0-9])([a-f0-9])([a-f0-9])([a-f0-9])$/i,HEX6:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i,HEX8:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i,RGB:new RegExp(["^rgb\\(",b.source,",",b.source,",",b.source,"\\)$"].join(y.source),"i"),RGB_PERCENT:new RegExp(["^rgb\\(",g.source,",",g.source,",",g.source,"\\)$"].join(y.source),"i"),RGBA:new RegExp(["^rgba\\(",b.source,",",b.source,",",b.source,",",v.source,"\\)$"].join(y.source),"i"),RGBA_PERCENT:new RegExp(["^rgba\\(",g.source,",",g.source,",",g.source,",",v.source,"\\)$"].join(y.source),"i"),HSL:new RegExp(["^hsl\\(",b.source,",",g.source,",",g.source,"\\)$"].join(y.source),"i"),HSLA:new RegExp(["^hsla\\(",b.source,",",g.source,",",g.source,",",v.source,"\\)$"].join(y.source),"i"),HSB:new RegExp(["^hsb\\(",b.source,",",g.source,",",g.source,"\\)$"].join(y.source),"i"),HSBA:new RegExp(["^hsba\\(",b.source,",",g.source,",",g.source,",",v.source,"\\)$"].join(y.source),"i")},b=(l.default.Color=function(){function w(P,I){if(!(this instanceof w))throw new TypeError("Cannot call a class as a function");if(this._storeModeAndMaxes(P._colorMode,P._colorMaxes),![u.RGB,u.HSL,u.HSB].includes(this.mode))throw new Error("".concat(this.mode," is an invalid colorMode."));this._array=w._parseInputs.apply(this,I),this._calculateLevels()}var T,R,C;return T=w,C=[{key:"_parseInputs",value:function(P,I,D,j){var N,O=arguments.length,W=this.mode,X=this.maxes[W],J=[];if(3<=O){for(J[0]=P/X[0],J[1]=I/X[1],J[2]=D/X[2],J[3]=typeof j=="number"?j/X[3]:1,N=J.length-1;0<=N;--N){var ee=J[N];ee<0?J[N]=0:1<ee&&(J[N]=1)}return W===u.HSL?h.default._hslaToRGBA(J):W===u.HSB?h.default._hsbaToRGBA(J):J}if(O===1&&typeof P=="string"){if(D=P.trim().toLowerCase(),m[D])return w._parseInputs.call(this,m[D]);if(x.HEX3.test(D))return(J=x.HEX3.exec(D).slice(1).map(function(V){return parseInt(V+V,16)/255}))[3]=1,J;if(x.HEX6.test(D))return(J=x.HEX6.exec(D).slice(1).map(function(V){return parseInt(V,16)/255}))[3]=1,J;if(x.HEX4.test(D))return J=x.HEX4.exec(D).slice(1).map(function(V){return parseInt(V+V,16)/255});if(x.HEX8.test(D))return J=x.HEX8.exec(D).slice(1).map(function(V){return parseInt(V,16)/255});if(x.RGB.test(D))return(J=x.RGB.exec(D).slice(1).map(function(V){return V/255}))[3]=1,J;if(x.RGB_PERCENT.test(D))return(J=x.RGB_PERCENT.exec(D).slice(1).map(function(V){return parseFloat(V)/100}))[3]=1,J;if(x.RGBA.test(D))return J=x.RGBA.exec(D).slice(1).map(function(V,q){return q===3?parseFloat(V):V/255});if(x.RGBA_PERCENT.test(D))return J=x.RGBA_PERCENT.exec(D).slice(1).map(function(V,q){return q===3?parseFloat(V):parseFloat(V)/100});if(x.HSL.test(D)?(J=x.HSL.exec(D).slice(1).map(function(V,q){return q===0?parseInt(V,10)/360:parseInt(V,10)/100}))[3]=1:x.HSLA.test(D)&&(J=x.HSLA.exec(D).slice(1).map(function(V,q){return q===0?parseInt(V,10)/360:q===3?parseFloat(V):parseInt(V,10)/100})),(J=J.map(function(V){return Math.max(Math.min(V,1),0)})).length)return h.default._hslaToRGBA(J);if(x.HSB.test(D)?(J=x.HSB.exec(D).slice(1).map(function(V,q){return q===0?parseInt(V,10)/360:parseInt(V,10)/100}))[3]=1:x.HSBA.test(D)&&(J=x.HSBA.exec(D).slice(1).map(function(V,q){return q===0?parseInt(V,10)/360:q===3?parseFloat(V):parseInt(V,10)/100})),J.length){for(N=J.length-1;0<=N;--N)J[N]=Math.max(Math.min(J[N],1),0);return h.default._hsbaToRGBA(J)}J=[1,1,1,1]}else{if(O!==1&&O!==2||typeof P!="number")throw new Error("".concat(arguments,"is not a valid color representation."));J[0]=P/X[2],J[1]=P/X[2],J[2]=P/X[2],J[3]=typeof I=="number"?I/X[3]:1,J=J.map(function(V){return Math.max(Math.min(V,1),0)})}return J}}],(R=[{key:"toString",value:function(P){var I=this.levels,D=this._array,j=D[3];switch(P){case"#rrggbb":return"#".concat(I[0]<16?"0".concat(I[0].toString(16)):I[0].toString(16),I[1]<16?"0".concat(I[1].toString(16)):I[1].toString(16),I[2]<16?"0".concat(I[2].toString(16)):I[2].toString(16));case"#rrggbbaa":return"#".concat(I[0]<16?"0".concat(I[0].toString(16)):I[0].toString(16),I[1]<16?"0".concat(I[1].toString(16)):I[1].toString(16),I[2]<16?"0".concat(I[2].toString(16)):I[2].toString(16),I[3]<16?"0".concat(I[3].toString(16)):I[3].toString(16));case"#rgb":return"#".concat(Math.round(15*D[0]).toString(16),Math.round(15*D[1]).toString(16),Math.round(15*D[2]).toString(16));case"#rgba":return"#".concat(Math.round(15*D[0]).toString(16),Math.round(15*D[1]).toString(16),Math.round(15*D[2]).toString(16),Math.round(15*D[3]).toString(16));case"rgb":return"rgb(".concat(I[0],", ",I[1],", ",I[2],")");case"rgb%":return"rgb(".concat((100*D[0]).toPrecision(3),"%, ",(100*D[1]).toPrecision(3),"%, ",(100*D[2]).toPrecision(3),"%)");case"rgba%":return"rgba(".concat((100*D[0]).toPrecision(3),"%, ",(100*D[1]).toPrecision(3),"%, ",(100*D[2]).toPrecision(3),"%, ",(100*D[3]).toPrecision(3),"%)");case"hsb":case"hsv":return this.hsba||(this.hsba=h.default._rgbaToHSBA(this._array)),"hsb(".concat(this.hsba[0]*this.maxes[u.HSB][0],", ",this.hsba[1]*this.maxes[u.HSB][1],", ",this.hsba[2]*this.maxes[u.HSB][2],")");case"hsb%":case"hsv%":return this.hsba||(this.hsba=h.default._rgbaToHSBA(this._array)),"hsb(".concat((100*this.hsba[0]).toPrecision(3),"%, ",(100*this.hsba[1]).toPrecision(3),"%, ",(100*this.hsba[2]).toPrecision(3),"%)");case"hsba":case"hsva":return this.hsba||(this.hsba=h.default._rgbaToHSBA(this._array)),"hsba(".concat(this.hsba[0]*this.maxes[u.HSB][0],", ",this.hsba[1]*this.maxes[u.HSB][1],", ",this.hsba[2]*this.maxes[u.HSB][2],", ",j,")");case"hsba%":case"hsva%":return this.hsba||(this.hsba=h.default._rgbaToHSBA(this._array)),"hsba(".concat((100*this.hsba[0]).toPrecision(3),"%, ",(100*this.hsba[1]).toPrecision(3),"%, ",(100*this.hsba[2]).toPrecision(3),"%, ",(100*j).toPrecision(3),"%)");case"hsl":return this.hsla||(this.hsla=h.default._rgbaToHSLA(this._array)),"hsl(".concat(this.hsla[0]*this.maxes[u.HSL][0],", ",this.hsla[1]*this.maxes[u.HSL][1],", ",this.hsla[2]*this.maxes[u.HSL][2],")");case"hsl%":return this.hsla||(this.hsla=h.default._rgbaToHSLA(this._array)),"hsl(".concat((100*this.hsla[0]).toPrecision(3),"%, ",(100*this.hsla[1]).toPrecision(3),"%, ",(100*this.hsla[2]).toPrecision(3),"%)");case"hsla":return this.hsla||(this.hsla=h.default._rgbaToHSLA(this._array)),"hsla(".concat(this.hsla[0]*this.maxes[u.HSL][0],", ",this.hsla[1]*this.maxes[u.HSL][1],", ",this.hsla[2]*this.maxes[u.HSL][2],", ",j,")");case"hsla%":return this.hsla||(this.hsla=h.default._rgbaToHSLA(this._array)),"hsl(".concat((100*this.hsla[0]).toPrecision(3),"%, ",(100*this.hsla[1]).toPrecision(3),"%, ",(100*this.hsla[2]).toPrecision(3),"%, ",(100*j).toPrecision(3),"%)");default:return"rgba(".concat(I[0],",",I[1],",",I[2],",",j,")")}}},{key:"setRed",value:function(P){this._array[0]=P/this.maxes[u.RGB][0],this._calculateLevels()}},{key:"setGreen",value:function(P){this._array[1]=P/this.maxes[u.RGB][1],this._calculateLevels()}},{key:"setBlue",value:function(P){this._array[2]=P/this.maxes[u.RGB][2],this._calculateLevels()}},{key:"setAlpha",value:function(P){this._array[3]=P/this.maxes[this.mode][3],this._calculateLevels()}},{key:"_calculateLevels",value:function(){for(var P=this._array,I=this.levels=new Array(P.length),D=P.length-1;0<=D;--D)I[D]=Math.round(255*P[D]);this.hsla=null,this.hsba=null}},{key:"_getAlpha",value:function(){return this._array[3]*this.maxes[this.mode][3]}},{key:"_storeModeAndMaxes",value:function(P,I){this.mode=P,this.maxes=I}},{key:"_getMode",value:function(){return this.mode}},{key:"_getMaxes",value:function(){return this.maxes}},{key:"_getBlue",value:function(){return this._array[2]*this.maxes[u.RGB][2]}},{key:"_getBrightness",value:function(){return this.hsba||(this.hsba=h.default._rgbaToHSBA(this._array)),this.hsba[2]*this.maxes[u.HSB][2]}},{key:"_getGreen",value:function(){return this._array[1]*this.maxes[u.RGB][1]}},{key:"_getHue",value:function(){return this.mode===u.HSB?(this.hsba||(this.hsba=h.default._rgbaToHSBA(this._array)),this.hsba[0]*this.maxes[u.HSB][0]):(this.hsla||(this.hsla=h.default._rgbaToHSLA(this._array)),this.hsla[0]*this.maxes[u.HSL][0])}},{key:"_getLightness",value:function(){return this.hsla||(this.hsla=h.default._rgbaToHSLA(this._array)),this.hsla[2]*this.maxes[u.HSL][2]}},{key:"_getRed",value:function(){return this._array[0]*this.maxes[u.RGB][0]}},{key:"_getSaturation",value:function(){return this.mode===u.HSB?(this.hsba||(this.hsba=h.default._rgbaToHSBA(this._array)),this.hsba[1]*this.maxes[u.HSB][1]):(this.hsla||(this.hsla=h.default._rgbaToHSLA(this._array)),this.hsla[1]*this.maxes[u.HSL][1])}}])&&f(T.prototype,R),C&&f(T,C),w}(),l.default.Color);o.default=b},{"../core/constants":269,"../core/main":280,"./color_conversion":265,"core-js/modules/es.array.includes":162,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.join":165,"core-js/modules/es.array.map":167,"core-js/modules/es.array.slice":168,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.constructor":191,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.includes":196,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.trim":206,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],268:[function(r,i,o){function s(c){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(c)}function a(c){return(a=typeof Symbol=="function"&&s(Symbol.iterator)==="symbol"?function(f){return s(f)}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":s(f)})(c)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.fill"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.fill"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var l=(p=r("../core/main"))&&p.__esModule?p:{default:p},u=function(c){if(c&&c.__esModule)return c;if(c===null||a(c)!=="object"&&typeof c!="function")return{default:c};var f=h();if(f&&f.has(c))return f.get(c);var m,y={},v=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(m in c){var g;Object.prototype.hasOwnProperty.call(c,m)&&((g=v?Object.getOwnPropertyDescriptor(c,m):null)&&(g.get||g.set)?Object.defineProperty(y,m,g):y[m]=c[m])}return y.default=c,f&&f.set(c,y),y}(r("../core/constants"));function h(){var c;return typeof WeakMap!="function"?null:(c=new WeakMap,h=function(){return c},c)}r("./p5.Color"),l.default.prototype.beginClip=function(){this._renderer.beginClip(0<arguments.length&&arguments[0]!==void 0?arguments[0]:{})},l.default.prototype.endClip=function(){this._renderer.endClip()},l.default.prototype.clip=function(c,f){this._renderer.beginClip(f),c(),this._renderer.endClip(f)},l.default.prototype.background=function(){var c;return(c=this._renderer).background.apply(c,arguments),this},l.default.prototype.clear=function(){return this._renderer.clear((arguments.length<=0?void 0:arguments[0])||0,(arguments.length<=1?void 0:arguments[1])||0,(arguments.length<=2?void 0:arguments[2])||0,(arguments.length<=3?void 0:arguments[3])||0),this},l.default.prototype.colorMode=function(c,f,m,y,v){return l.default._validateParameters("colorMode",arguments),c!==u.RGB&&c!==u.HSB&&c!==u.HSL||(this._colorMode=c,c=this._colorMaxes[c],arguments.length===2?(c[0]=f,c[1]=f,c[2]=f,c[3]=f):arguments.length===4?(c[0]=f,c[1]=m,c[2]=y):arguments.length===5&&(c[0]=f,c[1]=m,c[2]=y,c[3]=v)),this},l.default.prototype.fill=function(){var c;return this._renderer._setProperty("_fillSet",!0),this._renderer._setProperty("_doFill",!0),(c=this._renderer).fill.apply(c,arguments),this},l.default.prototype.noFill=function(){return this._renderer._setProperty("_doFill",!1),this},l.default.prototype.noStroke=function(){return this._renderer._setProperty("_doStroke",!1),this},l.default.prototype.stroke=function(){var c;return this._renderer._setProperty("_strokeSet",!0),this._renderer._setProperty("_doStroke",!0),(c=this._renderer).stroke.apply(c,arguments),this},l.default.prototype.erase=function(){return this._renderer.erase(0<arguments.length&&arguments[0]!==void 0?arguments[0]:255,1<arguments.length&&arguments[1]!==void 0?arguments[1]:255),this},l.default.prototype.noErase=function(){return this._renderer.noErase(),this};var p=l.default;o.default=p},{"../core/constants":269,"../core/main":280,"./p5.Color":267,"core-js/modules/es.array.fill":155,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],269:[function(r,i,o){Object.defineProperty(o,"__esModule",{value:!0}),o.QUADRATIC=o.LINEAR=o._CTX_MIDDLE=o._DEFAULT_LEADMULT=o._DEFAULT_TEXT_FILL=o.WORD=o.CHAR=o.BOLDITALIC=o.BOLD=o.ITALIC=o.NORMAL=o.BLUR=o.ERODE=o.DILATE=o.POSTERIZE=o.INVERT=o.OPAQUE=o.GRAY=o.THRESHOLD=o.BURN=o.DODGE=o.SOFT_LIGHT=o.HARD_LIGHT=o.OVERLAY=o.REPLACE=o.SCREEN=o.MULTIPLY=o.EXCLUSION=o.SUBTRACT=o.DIFFERENCE=o.LIGHTEST=o.DARKEST=o.ADD=o.REMOVE=o.BLEND=o.UP_ARROW=o.TAB=o.SHIFT=o.RIGHT_ARROW=o.RETURN=o.OPTION=o.LEFT_ARROW=o.ESCAPE=o.ENTER=o.DOWN_ARROW=o.DELETE=o.CONTROL=o.BACKSPACE=o.ALT=o.AUTO=o.HSL=o.HSB=o.RGB=o.MITER=o.BEVEL=o.ROUND=o.SQUARE=o.PROJECT=o.PIE=o.CHORD=o.OPEN=o.CLOSE=o.TESS=o.QUAD_STRIP=o.QUADS=o.TRIANGLE_STRIP=o.TRIANGLE_FAN=o.TRIANGLES=o.LINE_LOOP=o.LINE_STRIP=o.LINES=o.POINTS=o.BASELINE=o.BOTTOM=o.TOP=o.CENTER=o.LEFT=o.RIGHT=o.RADIUS=o.CORNERS=o.CORNER=o.RAD_TO_DEG=o.DEG_TO_RAD=o.RADIANS=o.DEGREES=o.TWO_PI=o.TAU=o.QUARTER_PI=o.PI=o.HALF_PI=o.WAIT=o.TEXT=o.MOVE=o.HAND=o.CROSS=o.ARROW=o.WEBGL2=o.WEBGL=o.P2D=o.VERSION=void 0,o.RGBA=o.HALF_FLOAT=o.FLOAT=o.UNSIGNED_INT=o.UNSIGNED_BYTE=o.COVER=o.CONTAIN=o.FALLBACK=o.LABEL=o.AXES=o.GRID=o._DEFAULT_FILL=o._DEFAULT_STROKE=o.PORTRAIT=o.LANDSCAPE=o.SMOOTH=o.FLAT=o.MIRROR=o.CLAMP=o.REPEAT=o.NEAREST=o.IMAGE=o.IMMEDIATE=o.TEXTURE=o.FILL=o.STROKE=o.CURVE=o.BEZIER=void 0;var s=Math.PI,a=(o.VERSION="1.9.4",o.P2D="p2d",o.WEBGL="webgl",o.WEBGL2="webgl2",o.ARROW="default",o.CROSS="crosshair",o.HAND="pointer",o.MOVE="move",o.TEXT="text",o.WAIT="wait",s/2),a=(o.HALF_PI=a,s),a=(o.PI=a,s/4),a=(o.QUARTER_PI=a,2*s),a=(o.TAU=a,2*s),a=(o.TWO_PI=a,o.DEGREES="degrees",o.RADIANS="radians",s/180),a=(o.DEG_TO_RAD=a,180/s);o.RAD_TO_DEG=a,o.CORNER="corner",o.CORNERS="corners",o.RADIUS="radius",o.RIGHT="right",o.LEFT="left",o.CENTER="center",o.TOP="top",o.BOTTOM="bottom",o.BASELINE="alphabetic",o.POINTS=0,o.LINES=1,o.LINE_STRIP=3,o.LINE_LOOP=2,o.TRIANGLES=4,o.TRIANGLE_FAN=6,o.TRIANGLE_STRIP=5,o.QUADS="quads",o.QUAD_STRIP="quad_strip",o.TESS="tess",o.CLOSE="close",o.OPEN="open",o.CHORD="chord",o.PIE="pie",o.PROJECT="square",o.SQUARE="butt",o.ROUND="round",o.BEVEL="bevel",o.MITER="miter",o.RGB="rgb",o.HSB="hsb",o.HSL="hsl",o.AUTO="auto",o.ALT=18,o.BACKSPACE=8,o.CONTROL=17,o.DELETE=46,o.DOWN_ARROW=40,o.ENTER=13,o.ESCAPE=27,o.LEFT_ARROW=37,o.OPTION=18,o.RETURN=13,o.RIGHT_ARROW=39,o.SHIFT=16,o.TAB=9,o.UP_ARROW=38,o.BLEND="source-over",o.REMOVE="destination-out",o.ADD="lighter",o.DARKEST="darken",o.LIGHTEST="lighten",o.DIFFERENCE="difference",o.SUBTRACT="subtract",o.EXCLUSION="exclusion",o.MULTIPLY="multiply",o.SCREEN="screen",o.REPLACE="copy",o.OVERLAY="overlay",o.HARD_LIGHT="hard-light",o.SOFT_LIGHT="soft-light",o.DODGE="color-dodge",o.BURN="color-burn",o.THRESHOLD="threshold",o.GRAY="gray",o.OPAQUE="opaque",o.INVERT="invert",o.POSTERIZE="posterize",o.DILATE="dilate",o.ERODE="erode",o.BLUR="blur",o.NORMAL="normal",o.ITALIC="italic",o.BOLD="bold",o.BOLDITALIC="bold italic",o.CHAR="CHAR",o.WORD="WORD",o._DEFAULT_TEXT_FILL="#000000",o._DEFAULT_LEADMULT=1.25,o._CTX_MIDDLE="middle",o.LINEAR="linear",o.QUADRATIC="quadratic",o.BEZIER="bezier",o.CURVE="curve",o.STROKE="stroke",o.FILL="fill",o.TEXTURE="texture",o.IMMEDIATE="immediate",o.IMAGE="image",o.NEAREST="nearest",o.REPEAT="repeat",o.CLAMP="clamp",o.MIRROR="mirror",o.FLAT="flat",o.SMOOTH="smooth",o.LANDSCAPE="landscape",o.PORTRAIT="portrait",o._DEFAULT_STROKE="#000000",o._DEFAULT_FILL="#FFFFFF",o.GRID="grid",o.AXES="axes",o.LABEL="label",o.FALLBACK="fallback",o.CONTAIN="contain",o.COVER="cover",o.UNSIGNED_BYTE="unsigned-byte",o.UNSIGNED_INT="unsigned-int",o.FLOAT="float",o.HALF_FLOAT="half-float",o.RGBA="rgba"},{}],270:[function(r,i,o){function s(v){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(v)}function a(v){return(a=typeof Symbol=="function"&&s(Symbol.iterator)==="symbol"?function(g){return s(g)}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":s(g)})(v)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.search"),r("core-js/modules/es.string.split"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.search"),r("core-js/modules/es.string.split"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var l=(u=r("./main"))&&u.__esModule?u:{default:u},u=function(v){if(v&&v.__esModule)return v;if(v===null||a(v)!=="object"&&typeof v!="function")return{default:v};var g=h();if(g&&g.has(v))return g.get(v);var x,b={},w=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(x in v){var T;Object.prototype.hasOwnProperty.call(v,x)&&((T=w?Object.getOwnPropertyDescriptor(v,x):null)&&(T.get||T.set)?Object.defineProperty(b,x,T):b[x]=v[x])}return b.default=v,g&&g.set(v,b),b}(r("./constants"));function h(){var v;return typeof WeakMap!="function"?null:(v=new WeakMap,h=function(){return v},v)}var p=[u.ARROW,u.CROSS,u.HAND,u.MOVE,u.TEXT,u.WAIT],c=(l.default.prototype._frameRate=0,l.default.prototype._lastFrameTime=window.performance.now(),l.default.prototype._targetFrameRate=60,window.print),f=!1;function m(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth||0}function y(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight||0}l.default.prototype.print=function(){var v;arguments.length?(v=console).log.apply(v,arguments):f||(c(),window.confirm("You just tried to print the webpage. Do you want to prevent this from running again?")&&(f=!0))},l.default.prototype.frameCount=0,l.default.prototype.deltaTime=0,l.default.prototype.focused=document.hasFocus(),l.default.prototype.cursor=function(v,g,x){var b,w="auto",T=this._curElement.elt;p.includes(v)?w=v:typeof v=="string"&&(b="",g&&x&&typeof g=="number"&&typeof x=="number"&&(b="".concat(g," ").concat(x)),w=v.substring(0,7)==="http://"||v.substring(0,8)==="https://"||/\.(cur|jpg|jpeg|gif|png|CUR|JPG|JPEG|GIF|PNG)$/.test(v)?"url(".concat(v,") ").concat(b,", auto"):v),T.style.cursor=w},l.default.prototype.frameRate=function(v){return l.default._validateParameters("frameRate",arguments),typeof v!="number"||v<0?this._frameRate:(this._setProperty("_targetFrameRate",v),v===0&&this._setProperty("_frameRate",v),this)},l.default.prototype.getFrameRate=function(){return this.frameRate()},l.default.prototype.setFrameRate=function(v){return this.frameRate(v)},l.default.prototype.getTargetFrameRate=function(){return this._targetFrameRate},l.default.prototype.noCursor=function(){this._curElement.elt.style.cursor="none"},l.default.prototype.webglVersion=u.P2D,l.default.prototype.displayWidth=screen.width,l.default.prototype.displayHeight=screen.height,l.default.prototype.windowWidth=m(),l.default.prototype.windowHeight=y(),l.default.prototype._onresize=function(v){this._setProperty("windowWidth",m()),this._setProperty("windowHeight",y());var g=this._isGlobal?window:this;typeof g.windowResized!="function"||(g=g.windowResized(v))===void 0||g||v.preventDefault()},l.default.prototype.width=0,l.default.prototype.height=0,l.default.prototype.fullscreen=function(v){if(l.default._validateParameters("fullscreen",arguments),v===void 0)return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;if(v){if(v=document.documentElement,!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled))throw new Error("Fullscreen not enabled in this browser.");v.requestFullscreen?v.requestFullscreen():v.mozRequestFullScreen?v.mozRequestFullScreen():v.webkitRequestFullscreen?v.webkitRequestFullscreen():v.msRequestFullscreen&&v.msRequestFullscreen()}else document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()},l.default.prototype.pixelDensity=function(v){var g;return l.default._validateParameters("pixelDensity",arguments),typeof v=="number"?(v!==this._pixelDensity&&(this._pixelDensity=this._maxAllowedPixelDimensions=v),(g=this).resizeCanvas(this.width,this.height,!0)):g=this._pixelDensity,g},l.default.prototype.displayDensity=function(){return window.devicePixelRatio},l.default.prototype.getURL=function(){return location.href},l.default.prototype.getURLPath=function(){return location.pathname.split("/").filter(function(v){return v!==""})},l.default.prototype.getURLParams=function(){for(var v,g=/[?&]([^&=]+)(?:[&=])([^&=]+)/gim,x={};(v=g.exec(location.search))!=null;)v.index===g.lastIndex&&g.lastIndex++,x[v[1]]=v[2];return x},r=l.default,o.default=r},{"./constants":269,"./main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.filter":156,"core-js/modules/es.array.includes":162,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.string.includes":196,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.search":202,"core-js/modules/es.string.split":203,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],271:[function(r,i,o){r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.some"),r("core-js/modules/es.function.name"),r("core-js/modules/es.object.assign"),r("core-js/modules/es.object.get-own-property-names"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.constructor"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.match"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.starts-with"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.some"),r("core-js/modules/es.function.name"),r("core-js/modules/es.object.assign"),r("core-js/modules/es.object.get-own-property-names"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.constructor"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.match"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.starts-with"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var s=(p=r("../main"))&&p.__esModule?p:{default:p};r("../internationalization");function a(c,f){f=f||console.log.bind(console),l||h(),l.some(function(m){var y;if(c.message&&c.message.match("\\W?".concat(m.name,"\\W"))!==null)return y=m.type==="function"?"".concat(m.name,"()"):m.name,f("Did you just try to use p5.js's ".concat(y," ").concat(m.type,`? If so, you may want to move it into your sketch's setup() function.

For more details, see: `).concat(u)),!0})}var l=null,h=null,u=(s.default._friendlyError=s.default._checkForUserDefinedFunctions=s.default._fesErrorMonitor=function(){},l=null,"https://github.com/processing/p5.js/wiki/p5.js-overview#why-cant-i-assign-variables-using-p5-functions-and-variables-before-setup"),h=function(){function c(m){return Object.getOwnPropertyNames(m).filter(function(y){return y[0]!=="_"&&!(y in f)&&(f[y]=!0)}).map(function(y){var v=typeof m[y]=="function"?"function":y===y.toUpperCase()?"constant":"variable";return{name:y,type:v}})}var f={};(l=[].concat(c(s.default.prototype),c(r("../constants")))).sort(function(m,y){return y.name.length-m.name.length})},p=(s.default.prototype._helpForMisusedAtTopLevelCode=a,document.readyState!=="complete"&&(window.addEventListener("error",a,!1),window.addEventListener("load",function(){window.removeEventListener("error",a,!1)})),s.default);o.default=p},{"../constants":269,"../internationalization":278,"../main":280,"./browser_errors":void 0,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.filter":156,"core-js/modules/es.array.for-each":160,"core-js/modules/es.array.includes":162,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.join":165,"core-js/modules/es.array.map":167,"core-js/modules/es.array.slice":168,"core-js/modules/es.array.some":169,"core-js/modules/es.function.name":173,"core-js/modules/es.object.assign":181,"core-js/modules/es.object.get-own-property-names":184,"core-js/modules/es.object.keys":186,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.constructor":191,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.match":198,"core-js/modules/es.string.replace":201,"core-js/modules/es.string.split":203,"core-js/modules/es.string.starts-with":204,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/web.dom-collections.for-each":242,"core-js/modules/web.dom-collections.iterator":243}],272:[function(r,i,o){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var s=(s=r("../main"))&&s.__esModule?s:{default:s};r("../internationalization"),s.default._friendlyFileLoadError=function(){},r=s.default,o.default=r},{"../internationalization":278,"../main":280}],273:[function(r,i,o){function s(f){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(f)}function a(f){return(a=typeof Symbol=="function"&&s(Symbol.iterator)==="symbol"?function(m){return s(m)}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":s(m)})(f)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.constructor"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.match"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.trim"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.regexp.constructor"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.match"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.trim"),r("core-js/modules/web.dom-collections.for-each"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var l=p(r("../main"));r("../internationalization"),h(r("../constants"));function u(){var f;return typeof WeakMap!="function"?null:(f=new WeakMap,u=function(){return f},f)}function h(f){if(f&&f.__esModule)return f;if(f===null||a(f)!=="object"&&typeof f!="function")return{default:f};var m=u();if(m&&m.has(f))return m.get(f);var y,v,g={},x=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(y in f)Object.prototype.hasOwnProperty.call(f,y)&&((v=x?Object.getOwnPropertyDescriptor(f,y):null)&&(v.get||v.set)?Object.defineProperty(g,y,v):g[y]=f[y]);return g.default=f,m&&m.set(f,g),g}function p(f){return f&&f.__esModule?f:{default:f}}l.default._fesCodeReader=function(){};var c=l.default;o.default=c},{"../constants":269,"../internationalization":278,"../main":280,"core-js/modules/es.array.filter":156,"core-js/modules/es.array.for-each":160,"core-js/modules/es.array.from":161,"core-js/modules/es.array.includes":162,"core-js/modules/es.array.index-of":163,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.join":165,"core-js/modules/es.array.map":167,"core-js/modules/es.array.slice":168,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.keys":186,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.constructor":191,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.includes":196,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.match":198,"core-js/modules/es.string.split":203,"core-js/modules/es.string.trim":206,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.for-each":242,"core-js/modules/web.dom-collections.iterator":243}],274:[function(r,i,o){r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.match"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.match"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,r=(r=r("../main"))&&r.__esModule?r:{default:r};function s(){var a=/(^|@)\S+:\d+/,l=/^\s*at .*(\S+:\d+|\(native\))/m,u=/^(eval@)?(\[native code])?$/;return{parse:function(h){return h.stacktrace!==void 0||h["opera#sourceloc"]!==void 0?this.parseOpera(h):h.stack&&h.stack.match(l)?this.parseV8OrIE(h):h.stack?this.parseFFOrSafari(h):void 0},extractLocation:function(h){return h.indexOf(":")===-1?[h]:[(h=/(.+?)(?::(\d+))?(?::(\d+))?$/.exec(h.replace(/[()]/g,"")))[1],h[2]||void 0,h[3]||void 0]},parseV8OrIE:function(h){return h.stack.split(`
`).filter(function(p){return!!p.match(l)},this).map(function(p){var c=(p=-1<p.indexOf("(eval ")?p.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(\),.*$)/g,""):p).replace(/^\s+/,"").replace(/\(eval code/g,"("),f=c.match(/ (\((.+):(\d+):(\d+)\)$)/),c=(c=f?c.replace(f[0],""):c).split(/\s+/).slice(1),f=this.extractLocation(f?f[1]:c.pop());return{functionName:c.join(" ")||void 0,fileName:-1<["eval","<anonymous>"].indexOf(f[0])?void 0:f[0],lineNumber:f[1],columnNumber:f[2],source:p}},this)},parseFFOrSafari:function(h){return h.stack.split(`
`).filter(function(p){return!p.match(u)},this).map(function(p){var c,f;return(p=-1<p.indexOf(" > eval")?p.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1"):p).indexOf("@")===-1&&p.indexOf(":")===-1?{functionName:p}:{functionName:(f=p.match(c=/((.*".+"[^@]*)?[^@]*)(?:@)/))&&f[1]?f[1]:void 0,fileName:(f=this.extractLocation(p.replace(c,"")))[0],lineNumber:f[1],columnNumber:f[2],source:p}},this)},parseOpera:function(h){return!h.stacktrace||-1<h.message.indexOf(`
`)&&h.message.split(`
`).length>h.stacktrace.split(`
`).length?this.parseOpera9(h):h.stack?this.parseOpera11(h):this.parseOpera10(h)},parseOpera9:function(h){for(var p=/Line (\d+).*script (?:in )?(\S+)/i,c=h.message.split(`
`),f=[],m=2,y=c.length;m<y;m+=2){var v=p.exec(c[m]);v&&f.push({fileName:v[2],lineNumber:v[1],source:c[m]})}return f},parseOpera10:function(h){for(var p=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,c=h.stacktrace.split(`
`),f=[],m=0,y=c.length;m<y;m+=2){var v=p.exec(c[m]);v&&f.push({functionName:v[3]||void 0,fileName:v[2],lineNumber:v[1],source:c[m]})}return f},parseOpera11:function(h){return h.stack.split(`
`).filter(function(p){return!!p.match(a)&&!p.match(/^Error created at/)},this).map(function(p){var c,m=p.split("@"),f=this.extractLocation(m.pop()),m=m.shift()||"";return{functionName:m.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^)]*\)/g,"")||void 0,args:(c=m.match(/\(([^)]*)\)/)?m.replace(/^[^(]+\(([^)]*)\)$/,"$1"):c)===void 0||c==="[arguments not available]"?void 0:c.split(","),fileName:f[0],lineNumber:f[1],columnNumber:f[2],source:p}},this)}}}r.default._getErrorStackParser=function(){return new s},r=r.default,o.default=r},{"../main":280,"core-js/modules/es.array.filter":156,"core-js/modules/es.array.index-of":163,"core-js/modules/es.array.join":165,"core-js/modules/es.array.map":167,"core-js/modules/es.array.slice":168,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.string.match":198,"core-js/modules/es.string.replace":201,"core-js/modules/es.string.split":203}],275:[function(r,i,o){function s(h){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(h)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.last-index-of"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.function.name"),r("core-js/modules/es.map"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.get-prototype-of"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.reflect.construct"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.set"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.split"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.last-index-of"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.function.name"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.set"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.split"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var a=(a=r("../main"))&&a.__esModule?a:{default:a};(function(h){if(!(h&&h.__esModule)&&!(h===null||u(h)!=="object"&&typeof h!="function")){var p=l();if(p&&p.has(h))return p.get(h);var c,f={},m=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(c in h){var y;Object.prototype.hasOwnProperty.call(h,c)&&((y=m?Object.getOwnPropertyDescriptor(h,c):null)&&(y.get||y.set)?Object.defineProperty(f,c,y):f[c]=h[c])}f.default=h,p&&p.set(h,f)}})(r("../constants")),r("../internationalization");function l(){var h;return typeof WeakMap!="function"?null:(h=new WeakMap,l=function(){return h},h)}function u(h){return(u=typeof Symbol=="function"&&s(Symbol.iterator)==="symbol"?function(p){return s(p)}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":s(p)})(h)}a.default._validateParameters=a.default._clearValidateParamsCache=function(){},r=a.default,o.default=r},{"../../../docs/parameterData.json":void 0,"../constants":269,"../internationalization":278,"../main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.for-each":160,"core-js/modules/es.array.includes":162,"core-js/modules/es.array.index-of":163,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.join":165,"core-js/modules/es.array.last-index-of":166,"core-js/modules/es.array.map":167,"core-js/modules/es.array.slice":168,"core-js/modules/es.function.name":173,"core-js/modules/es.map":174,"core-js/modules/es.number.constructor":178,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.get-prototype-of":185,"core-js/modules/es.object.keys":186,"core-js/modules/es.object.to-string":187,"core-js/modules/es.reflect.construct":189,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.set":194,"core-js/modules/es.string.includes":196,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.split":203,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.for-each":242,"core-js/modules/web.dom-collections.iterator":243}],276:[function(r,i,o){function s(h){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(h)}function a(h){return(a=typeof Symbol=="function"&&s(Symbol.iterator)==="symbol"?function(p){return s(p)}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":s(p)})(h)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var l=function(h){if(h&&h.__esModule)return h;if(h===null||a(h)!=="object"&&typeof h!="function")return{default:h};var p=u();if(p&&p.has(h))return p.get(h);var c,f={},m=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(c in h){var y;Object.prototype.hasOwnProperty.call(h,c)&&((y=m?Object.getOwnPropertyDescriptor(h,c):null)&&(y.get||y.set)?Object.defineProperty(f,c,y):f[c]=h[c])}return f.default=h,p&&p.set(h,f),f}(r("./constants"));function u(){var h;return typeof WeakMap!="function"?null:(h=new WeakMap,u=function(){return h},h)}o.default={modeAdjust:function(h,p,c,f,m){return m===l.CORNER?{x:h,y:p,w:c,h:f}:m===l.CORNERS?{x:h,y:p,w:c-h,h:f-p}:m===l.RADIUS?{x:h-c,y:p-f,w:2*c,h:2*f}:m===l.CENTER?{x:h-.5*c,y:p-.5*f,w:c,h:f}:void 0}}},{"./constants":269,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],277:[function(r,i,o){r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator");var s=(a=r("../core/main"))&&a.__esModule?a:{default:a};r("./internationalization");var a=Promise.resolve();Promise.all([new Promise(function(l,u){document.readyState==="complete"?l():window.addEventListener("load",l,!1)}),a]).then(function(){window._setupDone!==void 0?console.warn("p5.js seems to have been imported multiple times. Please remove the duplicate import"):window.mocha||(window.setup&&typeof window.setup=="function"||window.draw&&typeof window.draw=="function")&&!s.default.instance&&new s.default})},{"../core/main":280,"./internationalization":278,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.to-string":187,"core-js/modules/es.promise":188,"core-js/modules/es.string.iterator":197,"core-js/modules/web.dom-collections.iterator":243}],278:[function(r,i,o){r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.split"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.split"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.setTranslatorLanguage=o.currentTranslatorLanguage=o.availableTranslatorLanguages=o.initialize=o.translator=void 0;var s,a,l=h(r("i18next")),u=h(r("i18next-browser-languagedetector"));function h(f){return f&&f.__esModule?f:{default:f}}function p(f,m){for(var y=0;y<m.length;y++){var v=m[y];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(f,v.key,v)}}var c=function(){function f(v,g){if(!(this instanceof f))throw new TypeError("Cannot call a class as a function");this.init(v,g)}var m,y;return m=f,(y=[{key:"fetchWithTimeout",value:function(v,g){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:2e3;return Promise.race([fetch(v,g),new Promise(function(b,w){return setTimeout(function(){return w(new Error("timeout"))},x)})])}},{key:"init",value:function(v){var g=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};this.services=v,this.options=g}},{key:"read",value:function(v,g,x){var b=this.options.loadPath;v===this.options.fallback?x(null,s[v][g]):a.includes(v)?(b=this.services.interpolator.interpolate(b,{lng:v,ns:g}),this.loadUrl(b,x)):x("Not found",!1)}},{key:"loadUrl",value:function(v,g){this.fetchWithTimeout(v).then(function(x){if(x.ok)return x.json();throw new Error("failed loading ".concat(v))},function(){throw new Error("failed loading ".concat(v))}).then(function(x){return g(null,x)}).catch(g)}}])&&p(m.prototype,y),f}();c.type="backend",o.translator=function(f,m){console.debug("p5.js translator called before translations were loaded"),l.default.t(f,m)},o.initialize=function(){return l.default.use(u.default).use(c).init({fallbackLng:"en",nestingPrefix:"$tr(",nestingSuffix:")",defaultNS:"translation",returnEmptyString:!1,interpolation:{escapeValue:!1},detection:{checkWhitelist:!1,order:["querystring","navigator","htmlTag","path","subdomain"],caches:[]},backend:{fallback:"en",loadPath:"https://cdn.jsdelivr.net/npm/p5/translations/{{lng}}/{{ns}}.json"},partialBundledLanguages:!0,resources:s}).then(function(f){o.translator=f},function(f){return console.debug("Translations failed to load (".concat(f,")"))})},o.availableTranslatorLanguages=function(){return l.default.languages},o.currentTranslatorLanguage=function(f){return l.default.language},o.setTranslatorLanguage=function(f){return l.default.changeLanguage(f||void 0,function(m){return console.debug("Translations failed to load (".concat(m,")"))})}},{"../../translations":void 0,"../../translations/dev":void 0,"core-js/modules/es.array.includes":162,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.join":165,"core-js/modules/es.array.slice":168,"core-js/modules/es.object.keys":186,"core-js/modules/es.object.to-string":187,"core-js/modules/es.promise":188,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.string.includes":196,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.split":203,"core-js/modules/web.dom-collections.iterator":243,i18next:3,"i18next-browser-languagedetector":3}],279:[function(r,i,o){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,r=(r=r("./main"))&&r.__esModule?r:{default:r},r.default.prototype.pushStyle=function(){throw new Error("pushStyle() not used, see push()")},r.default.prototype.popStyle=function(){throw new Error("popStyle() not used, see pop()")},r.default.prototype.popMatrix=function(){throw new Error("popMatrix() not used, see pop()")},r.default.prototype.pushMatrix=function(){throw new Error("pushMatrix() not used, see push()")},r=r.default,o.default=r},{"./main":280}],280:[function(r,i,o){function s(f){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(f)}function a(f){return(a=typeof Symbol=="function"&&s(Symbol.iterator)==="symbol"?function(m){return s(m)}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":s(m)})(f)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.get-own-property-names"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.object.get-own-property-names"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,r("./shim");var l=function(f){if(f&&f.__esModule)return f;if(f===null||a(f)!=="object"&&typeof f!="function")return{default:f};var m=u();if(m&&m.has(f))return m.get(f);var y,v={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(y in f){var x;Object.prototype.hasOwnProperty.call(f,y)&&((x=g?Object.getOwnPropertyDescriptor(f,y):null)&&(x.get||x.set)?Object.defineProperty(v,y,x):v[y]=f[y])}return v.default=f,m&&m.set(f,v),v}(r("./constants"));function u(){var f;return typeof WeakMap!="function"?null:(f=new WeakMap,u=function(){return f},f)}function h(f,m){for(var y=0;y<m.length;y++){var v=m[y];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(f,v.key,v)}}var p,c=function(){function f(v,b){var x=this;if(!(this instanceof f))throw new TypeError("Cannot call a class as a function");this._setupDone=!1,this._preloadDone=!1,this._pixelDensity=Math.ceil(window.devicePixelRatio)||1,this._maxAllowedPixelDimensions=0,this._userNode=b,this._curElement=null,this._elements=[],this._glAttributes=null,this._requestAnimId=0,this._preloadCount=0,this._isGlobal=!1,this._loop=!0,this._startListener=null,this._initializeInstanceVariables(),this._defaultCanvasSize={width:100,height:100},this._events={mousemove:null,mousedown:null,mouseup:null,dragend:null,dragover:null,click:null,dblclick:null,mouseover:null,mouseout:null,keydown:null,keyup:null,keypress:null,touchstart:null,touchmove:null,touchend:null,resize:null,blur:null},this._millisStart=-1,this._recording=!1,this.touchstart=!1,this.touchend=!1,this._lcg_random_state=null,this._gaussian_previous=!1,this._events.wheel=null,this._loadingScreenId="p5_loading",this._registeredMethods={};var b=Object.getOwnPropertyNames(f.prototype._registeredMethods),w=!0,T=!1,R=void 0;try{for(var C,P=b[Symbol.iterator]();!(w=(C=P.next()).done);w=!0){var I=C.value;this._registeredMethods[I]=f.prototype._registeredMethods[I].slice()}}catch(V){T=!0,R=V}finally{try{w||P.return==null||P.return()}finally{if(T)throw R}}window.DeviceOrientationEvent&&(this._events.deviceorientation=null),window.DeviceMotionEvent&&!window._isNodeWebkit&&(this._events.devicemotion=null),f.prototype.callRegisteredHooksFor=function(V){var q=this||f.prototype,Y=this._isGlobal?window:this;if(q._registeredMethods.hasOwnProperty(V)){var q=q._registeredMethods[V],Z=!0,V=!1,ce=void 0;try{for(var B,U=q[Symbol.iterator]();!(Z=(B=U.next()).done);Z=!0){var K=B.value;typeof K=="function"&&K.call(Y)}}catch(pe){V=!0,ce=pe}finally{try{Z||U.return==null||U.return()}finally{if(V)throw ce}}}},this._start=function(){x._userNode&&typeof x._userNode=="string"&&(x._userNode=document.getElementById(x._userNode));var V=x._isGlobal?window:x;if(V.preload){x.callRegisteredHooksFor("beforePreload");var q,Y=document.getElementById(x._loadingScreenId),Z=(Y||((Y=document.createElement("div")).innerHTML="Loading...",Y.style.position="absolute",Y.id=x._loadingScreenId,(x._userNode||document.body).appendChild(Y)),x._preloadMethods);for(q in Z){Z[q]=Z[q]||f;var ce=Z[q];ce!==f.prototype&&ce!==f||(x._isGlobal&&(window[q]=x._wrapPreload(x,q)),ce=x),x._registeredPreloadMethods[q]=ce[q],ce[q]=x._wrapPreload(ce,q)}V.preload(),x._runIfPreloadsAreDone()}else x._setup(),x._recording||x._draw()},this._runIfPreloadsAreDone=function(){var V,q=this._isGlobal?window:this;q._preloadCount===0&&((V=document.getElementById(q._loadingScreenId))&&V.parentNode.removeChild(V),this.callRegisteredHooksFor("afterPreload"),this._setupDone||(this._lastTargetFrameTime=window.performance.now(),this._lastRealFrameTime=window.performance.now(),q._setup(),this._recording||q._draw()))},this._decrementPreload=function(){var V=this._isGlobal?window:this;V._preloadDone||typeof V.preload!="function"||(V._setProperty("_preloadCount",V._preloadCount-1),V._runIfPreloadsAreDone())},this._wrapPreload=function(V,q){var Y=this;return function(){Y._incrementPreload();for(var Z=arguments.length,ce=new Array(Z),B=0;B<Z;B++)ce[B]=arguments[B];return Y._registeredPreloadMethods[q].apply(V,ce)}},this._incrementPreload=function(){var V=this._isGlobal?window:this;V._preloadDone||V._setProperty("_preloadCount",V._preloadCount+1)},this._setup=function(){x.callRegisteredHooksFor("beforeSetup"),x.createCanvas(x._defaultCanvasSize.width,x._defaultCanvasSize.height,"p2d");var V=x._isGlobal?window:x;if(typeof V.preload=="function")for(var q in x._preloadMethods)V[q]=x._preloadMethods[q][q],V[q]&&x&&(V[q]=V[q].bind(x));x._millisStart=window.performance.now(),V._preloadDone=!0,typeof V.setup=="function"&&V.setup();var Y=document.getElementsByTagName("canvas"),Z=!0,ce=!1,B=void 0;try{for(var U,K=Y[Symbol.iterator]();!(Z=(U=K.next()).done);Z=!0){var re=U.value;re.dataset.hidden==="true"&&(re.style.visibility="",delete re.dataset.hidden)}}catch(ae){ce=!0,B=ae}finally{try{Z||K.return==null||K.return()}finally{if(ce)throw B}}x._lastTargetFrameTime=window.performance.now(),x._lastRealFrameTime=window.performance.now(),x._setupDone=!0,(x._accessibleOutputs.grid||x._accessibleOutputs.text)&&x._updateAccsOutput(),x.callRegisteredHooksFor("afterSetup")},this._draw=function(){var V=window.performance.now(),q=V-x._lastTargetFrameTime,Y=1e3/x._targetFrameRate;(!x._loop||Y-5<=q)&&(x.deltaTime=V-x._lastRealFrameTime,x._setProperty("deltaTime",x.deltaTime),x._frameRate=1e3/x.deltaTime,x.redraw(),x._lastTargetFrameTime=Math.max(x._lastTargetFrameTime+Y,V),x._lastRealFrameTime=V,x._updateMouseCoords!==void 0&&(x._updateMouseCoords(),x._setProperty("movedX",0),x._setProperty("movedY",0))),x._loop&&(x._requestAnimId=window.requestAnimationFrame(x._draw))},this._setProperty=function(V,q){x[V]=q,x._isGlobal&&(window[V]=q)},this.remove=function(){x._startListener&&window.removeEventListener("load",x._startListener,!1);var V=document.getElementById(x._loadingScreenId);if(V&&(V.parentNode.removeChild(V),x._incrementPreload()),x._curElement){for(var q in x._loop=!1,x._requestAnimId&&window.cancelAnimationFrame(x._requestAnimId),x._events)window.removeEventListener(q,x._events[q]);var Y=!0,V=!1,Z=void 0;try{for(var ce,B=x._elements[Symbol.iterator]();!(Y=(ce=B.next()).done);Y=!0){var U,K=ce.value;for(U in K.elt&&K.elt.parentNode&&K.elt.parentNode.removeChild(K.elt),K._events)K.elt.removeEventListener(U,K._events[U])}}catch(Re){V=!0,Z=Re}finally{try{Y||B.return==null||B.return()}finally{if(V)throw Z}}var re=x;x._registeredMethods.remove.forEach(function(Re){Re!==void 0&&Re.call(re)})}if(x._isGlobal){for(var ae in f.prototype)try{delete window[ae]}catch{window[ae]=void 0}for(var pe in x)if(x.hasOwnProperty(pe))try{delete window[pe]}catch{window[pe]=void 0}f.instance=null}},this._registeredMethods.init.forEach(function(V){V!==void 0&&V.call(this)},this),this._setupPromisePreloads();var D,j,N=this._createFriendlyGlobalFunctionBinder();if(v)v(this),f._checkForUserDefinedFunctions(this);else{for(var O in this._isGlobal=!0,f.instance=this,f.prototype)typeof f.prototype[O]=="function"?(D=O.substring(2),this._events.hasOwnProperty(D)||(Math.hasOwnProperty(O)&&Math[O]===f.prototype[O]?N(O,f.prototype[O]):N(O,f.prototype[O].bind(this)))):N(O,f.prototype[O]);for(var W in this)this.hasOwnProperty(W)&&N(W,this[W])}for(j in this._events){var X=this["_on".concat(j)];X&&(X=X.bind(this),window.addEventListener(j,X,{passive:!1}),this._events[j]=X)}function J(){x._setProperty("focused",!0)}function ee(){x._setProperty("focused",!1)}window.addEventListener("focus",J),window.addEventListener("blur",ee),this.registerMethod("remove",function(){window.removeEventListener("focus",J),window.removeEventListener("blur",ee)}),document.readyState==="complete"?this._start():(this._startListener=this._start.bind(this),window.addEventListener("load",this._startListener,!1))}var m,y;return m=f,(y=[{key:"_initializeInstanceVariables",value:function(){this._accessibleOutputs={text:!1,grid:!1,textLabel:!1,gridLabel:!1},this._styles=[],this._bezierDetail=20,this._curveDetail=20,this._colorMode=l.RGB,this._colorMaxes={rgb:[255,255,255,255],hsb:[360,100,100,1],hsl:[360,100,100,1]},this._downKeys={}}},{key:"registerPreloadMethod",value:function(v,g){f.prototype._preloadMethods.hasOwnProperty(v)||(f.prototype._preloadMethods[v]=g)}},{key:"registerMethod",value:function(v,g){var x=this||f.prototype;x._registeredMethods.hasOwnProperty(v)||(x._registeredMethods[v]=[]),x._registeredMethods[v].push(g)}},{key:"unregisterMethod",value:function(v,g){var x=this||f.prototype;if(x._registeredMethods.hasOwnProperty(v)){for(var b=x._registeredMethods[v],w=[],T=0;T<b.length;T++)b[T]===g&&w.push(T);for(var R=w.length-1;0<=R;R--)b.splice(w[R],1)}}},{key:"_createFriendlyGlobalFunctionBinder",value:function(){var v=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},g=v.globalObject||window;return v.log||console.log.bind(console),function(x,b){f.disableFriendlyErrors,g[x]=b}}}])&&h(m.prototype,y),f}();for(p in c.instance=null,c.disableFriendlyErrors=!1,l)c.prototype[p]=l[p];c.VERSION=l.VERSION,c.prototype._preloadMethods={loadJSON:c.prototype,loadImage:c.prototype,loadStrings:c.prototype,loadXML:c.prototype,loadBytes:c.prototype,loadTable:c.prototype,loadFont:c.prototype,loadModel:c.prototype,loadShader:c.prototype},c.prototype._registeredMethods={init:[],pre:[],post:[],remove:[]},c.prototype._registeredPreloadMethods={},o.default=c},{"./constants":269,"./shim":291,"core-js/modules/es.array.for-each":160,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.slice":168,"core-js/modules/es.array.splice":170,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.get-own-property-names":184,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.for-each":242,"core-js/modules/web.dom-collections.iterator":243}],281:[function(r,i,o){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var s=(r=r("./main"))&&r.__esModule?r:{default:r};function a(l,u){for(var h=0;h<u.length;h++){var p=u[h];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(l,p.key,p)}}s.default.Element=function(){function l(c,f){if(!(this instanceof l))throw new TypeError("Cannot call a class as a function");this.elt=c,this._pInst=this._pixelsState=f,this._events={},this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight}var u,h,p;return u=l,p=[{key:"_adjustListener",value:function(c,f,m){return f===!1?s.default.Element._detachListener(c,m):s.default.Element._attachListener(c,f,m),this}},{key:"_attachListener",value:function(c,f,m){m._events[c]&&s.default.Element._detachListener(c,m),f=f.bind(m),m.elt.addEventListener(c,f,!1),m._events[c]=f}},{key:"_detachListener",value:function(c,f){var m=f._events[c];f.elt.removeEventListener(c,m,!1),f._events[c]=null}}],(h=[{key:"parent",value:function(c){return c===void 0?this.elt.parentNode:(typeof c=="string"?(c[0]==="#"&&(c=c.substring(1)),c=document.getElementById(c)):c instanceof s.default.Element&&(c=c.elt),c.appendChild(this.elt),this)}},{key:"id",value:function(c){return c===void 0?this.elt.id:(this.elt.id=c,this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight,this)}},{key:"class",value:function(c){return c===void 0?this.elt.className:(this.elt.className=c,this)}},{key:"mousePressed",value:function(c){return s.default.Element._adjustListener("mousedown",function(f){return this._pInst._setProperty("mouseIsPressed",!0),this._pInst._setMouseButton(f),c.call(this,f)},this),this}},{key:"doubleClicked",value:function(c){return s.default.Element._adjustListener("dblclick",c,this),this}},{key:"mouseWheel",value:function(c){return s.default.Element._adjustListener("wheel",c,this),this}},{key:"mouseReleased",value:function(c){return s.default.Element._adjustListener("mouseup",c,this),this}},{key:"mouseClicked",value:function(c){return s.default.Element._adjustListener("click",c,this),this}},{key:"mouseMoved",value:function(c){return s.default.Element._adjustListener("mousemove",c,this),this}},{key:"mouseOver",value:function(c){return s.default.Element._adjustListener("mouseover",c,this),this}},{key:"mouseOut",value:function(c){return s.default.Element._adjustListener("mouseout",c,this),this}},{key:"touchStarted",value:function(c){return s.default.Element._adjustListener("touchstart",c,this),this}},{key:"touchMoved",value:function(c){return s.default.Element._adjustListener("touchmove",c,this),this}},{key:"touchEnded",value:function(c){return s.default.Element._adjustListener("touchend",c,this),this}},{key:"dragOver",value:function(c){return s.default.Element._adjustListener("dragover",c,this),this}},{key:"dragLeave",value:function(c){return s.default.Element._adjustListener("dragleave",c,this),this}},{key:"_setProperty",value:function(c,f){this[c]=f}}])&&a(u.prototype,h),p&&a(u,p),l}(),r=s.default.Element,o.default=r},{"./main":280}],282:[function(r,i,o){function s(x){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b})(x)}function a(x){return(a=typeof Symbol=="function"&&s(Symbol.iterator)==="symbol"?function(b){return s(b)}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":s(b)})(x)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.get-prototype-of"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.reflect.construct"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.object.get-prototype-of"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var l=(g=r("./main"))&&g.__esModule?g:{default:g},u=function(x){if(x&&x.__esModule)return x;if(x===null||a(x)!=="object"&&typeof x!="function")return{default:x};var b=h();if(b&&b.has(x))return b.get(x);var w,T={},R=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(w in x){var C;Object.prototype.hasOwnProperty.call(x,w)&&((C=R?Object.getOwnPropertyDescriptor(x,w):null)&&(C.get||C.set)?Object.defineProperty(T,w,C):T[w]=x[w])}return T.default=x,b&&b.set(x,T),T}(r("./constants"));function h(){var x;return typeof WeakMap!="function"?null:(x=new WeakMap,h=function(){return x},x)}function p(x,b){for(var w=0;w<b.length;w++){var T=b[w];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(x,T.key,T)}}function c(x,b){return(c=Object.setPrototypeOf||function(w,T){return w.__proto__=T,w})(x,b)}function f(x){return function(){var b,w=v(x);return m(this,function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(b=v(this).constructor,Reflect.construct(w,arguments,b)):w.apply(this,arguments))}}function m(x,b){return!b||a(b)!=="object"&&typeof b!="function"?y(x):b}function y(x){if(x===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x}function v(x){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)})(x)}l.default.Graphics=function(x){var b=T;if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function");b.prototype=Object.create(x&&x.prototype,{constructor:{value:b,writable:!0,configurable:!0}}),x&&c(b,x);var w=f(T);function T(R,C,W,I,D){var j;if(!(this instanceof T))throw new TypeError("Cannot call a class as a function");O=D||document.createElement("canvas"),(j=w.call(this,O,I)).canvas=O;var N,O=W||u.P2D,W=I._userNode||document.body;for(N in D||W.appendChild(j.canvas),l.default.prototype)j[N]||(typeof l.default.prototype[N]=="function"?j[N]=l.default.prototype[N].bind(y(j)):j[N]=l.default.prototype[N]);return l.default.prototype._initializeInstanceVariables.apply(y(j)),j.width=R,j.height=C,j._pixelDensity=I._pixelDensity,O===u.WEBGL?(j._renderer=new l.default.RendererGL(j.canvas,y(j),!1),R=(D=j._renderer._adjustDimensions(R,C)).adjustedWidth,C=D.adjustedHeight):j._renderer=new l.default.Renderer2D(j.canvas,y(j),!1),I._elements.push(y(j)),Object.defineProperty(y(j),"deltaTime",{get:function(){return this._pInst.deltaTime}}),j._renderer.resize(R,C),j._renderer._applyDefaults(),m(j,y(j))}return b=T,(x=[{key:"reset",value:function(){this._renderer.resetMatrix(),this._renderer.isP3D&&this._renderer._update()}},{key:"remove",value:function(){this.elt.parentNode&&this.elt.parentNode.removeChild(this.elt);var R,C=this._pInst._elements.indexOf(this);for(R in C!==-1&&this._pInst._elements.splice(C,1),this._events)this.elt.removeEventListener(R,this._events[R])}},{key:"createFramebuffer",value:function(R){return new l.default.Framebuffer(this,R)}}])&&p(b.prototype,x),T}(l.default.Element);var g=l.default.Graphics;o.default=g},{"./constants":269,"./main":280,"core-js/modules/es.array.index-of":163,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.splice":170,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.get-prototype-of":185,"core-js/modules/es.object.to-string":187,"core-js/modules/es.reflect.construct":189,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],283:[function(r,i,o){function s(x){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b})(x)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.object.assign"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.get-prototype-of"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.reflect.construct"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.trim"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.object.assign"),r("core-js/modules/es.object.get-prototype-of"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.trim"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var a=(v=r("./main"))&&v.__esModule?v:{default:v},l=function(x){if(x&&x.__esModule)return x;if(x===null||h(x)!=="object"&&typeof x!="function")return{default:x};var b=u();if(b&&b.has(x))return b.get(x);var w,T={},R=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(w in x){var C;Object.prototype.hasOwnProperty.call(x,w)&&((C=R?Object.getOwnPropertyDescriptor(x,w):null)&&(C.get||C.set)?Object.defineProperty(T,w,C):T[w]=x[w])}return T.default=x,b&&b.set(x,T),T}(r("../core/constants"));function u(){var x;return typeof WeakMap!="function"?null:(x=new WeakMap,u=function(){return x},x)}function h(x){return(h=typeof Symbol=="function"&&s(Symbol.iterator)==="symbol"?function(b){return s(b)}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":s(b)})(x)}function p(x,b){for(var w=0;w<b.length;w++){var T=b[w];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(x,T.key,T)}}function c(x,b){return(c=Object.setPrototypeOf||function(w,T){return w.__proto__=T,w})(x,b)}function f(x){return function(){var b,w,T=y(x);return b=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(b=y(this).constructor,Reflect.construct(T,arguments,b)):T.apply(this,arguments),T=this,!(w=b)||h(w)!=="object"&&typeof w!="function"?m(T):w}}function m(x){if(x===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x}function y(x){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)})(x)}var v=function(x){var b=T;if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function");b.prototype=Object.create(x&&x.prototype,{constructor:{value:b,writable:!0,configurable:!0}}),x&&c(b,x);var w=f(T);function T(R,C,P){var I;if(this instanceof T)return(I=w.call(this,R,C)).canvas=R,I._pixelsState=C,P?(I._isMainCanvas=!0,I._pInst._setProperty("_curElement",m(I)),I._pInst._setProperty("canvas",I.canvas),I._pInst._setProperty("width",I.width),I._pInst._setProperty("height",I.height)):(I.canvas.style.display="none",I._styles=[]),I._clipping=!1,I._clipInvert=!1,I._textSize=12,I._textLeading=15,I._textFont="sans-serif",I._textStyle=l.NORMAL,I._textAscent=null,I._textDescent=null,I._textAlign=l.LEFT,I._textBaseline=l.BASELINE,I._textWrap=l.WORD,I._rectMode=l.CORNER,I._ellipseMode=l.CENTER,I._curveTightness=0,I._imageMode=l.CORNER,I._tint=null,I._doStroke=!0,I._doFill=!0,I._strokeSet=!1,I._fillSet=!1,I._leadingSet=!1,I._pushPopDepth=0,I;throw new TypeError("Cannot call a class as a function")}return b=T,(x=[{key:"push",value:function(){return this._pushPopDepth++,{properties:{_doStroke:this._doStroke,_strokeSet:this._strokeSet,_doFill:this._doFill,_fillSet:this._fillSet,_tint:this._tint,_imageMode:this._imageMode,_rectMode:this._rectMode,_ellipseMode:this._ellipseMode,_textFont:this._textFont,_textLeading:this._textLeading,_leadingSet:this._leadingSet,_textSize:this._textSize,_textAlign:this._textAlign,_textBaseline:this._textBaseline,_textStyle:this._textStyle,_textWrap:this._textWrap}}}},{key:"pop",value:function(R){this._pushPopDepth--,R.properties&&Object.assign(this,R.properties)}},{key:"beginClip",value:function(){var R=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{};if(this._clipping)throw new Error("It looks like you're trying to clip while already in the middle of clipping. Did you forget to endClip()?");this._clipping=!0,this._clipInvert=R.invert}},{key:"endClip",value:function(){if(!this._clipping)throw new Error("It looks like you've called endClip() without beginClip(). Did you forget to call beginClip() first?");this._clipping=!1}},{key:"resize",value:function(R,C){this.width=R,this.height=C,this.elt.width=R*this._pInst._pixelDensity,this.elt.height=C*this._pInst._pixelDensity,this.elt.style.width="".concat(R,"px"),this.elt.style.height="".concat(C,"px"),this._isMainCanvas&&(this._pInst._setProperty("width",this.width),this._pInst._setProperty("height",this.height))}},{key:"get",value:function(R,C,P,I){var D=this._pixelsState,j=D._pixelDensity,N=this.canvas;if(R===void 0&&C===void 0)R=C=0,P=D.width,I=D.height;else if(R*=j,C*=j,P===void 0&&I===void 0)return R<0||C<0||R>=N.width||C>=N.height?[0,0,0,0]:this._getPixel(R,C);return D=new a.default.Image(P*j,I*j),D.pixelDensity(j),D.canvas.getContext("2d").drawImage(N,R,C,P*j,I*j,0,0,P*j,I*j),D}},{key:"textLeading",value:function(R){return typeof R=="number"?(this._setProperty("_leadingSet",!0),this._setProperty("_textLeading",R),this._pInst):this._textLeading}},{key:"textStyle",value:function(R){return R?(R!==l.NORMAL&&R!==l.ITALIC&&R!==l.BOLD&&R!==l.BOLDITALIC||this._setProperty("_textStyle",R),this._applyTextProperties()):this._textStyle}},{key:"textAscent",value:function(){return this._textAscent===null&&this._updateTextMetrics(),this._textAscent}},{key:"textDescent",value:function(){return this._textDescent===null&&this._updateTextMetrics(),this._textDescent}},{key:"textAlign",value:function(R,C){return R!==void 0?(this._setProperty("_textAlign",R),C!==void 0&&this._setProperty("_textBaseline",C),this._applyTextProperties()):{horizontal:this._textAlign,vertical:this._textBaseline}}},{key:"textWrap",value:function(R){return this._setProperty("_textWrap",R),this._textWrap}},{key:"text",value:function(R,C,P,I,D){var j,N,O,W,X=this._pInst,J=this._textWrap,ee=Number.MAX_VALUE,V=P;if((this._doFill||this._doStroke)&&R!==void 0){if(j=(R=(R=typeof R!="string"?R.toString():R).replace(/(\t)/g,"  ")).split(`
`),I!==void 0){switch(this._rectMode===l.CENTER&&(C-=I/2),this._textAlign){case l.CENTER:C+=I/2;break;case l.RIGHT:C+=I}if(D!==void 0){this._rectMode===l.CENTER&&(P-=D/2,V-=D/2);var R=P,q=X.textAscent();switch(this._textBaseline){case l.BOTTOM:W=P+D,P=Math.max(W,P),V+=q;break;case l.CENTER:W=P+D/2,P=Math.max(W,P),V+=q/2}ee=P+D-q,this._textBaseline===l.CENTER&&(ee=R+D-q/2)}else this._textBaseline!==l.BOTTOM&&this._textBaseline!==l.CENTER||(V=P-(R=X.textSize()*this._textLeading)/2,ee=P+R/2);if(J===l.WORD){for(var Y=[],Z=0;Z<j.length;Z++){for(var ce="",B=j[Z].split(" "),U=0;U<B.length;U++)N="".concat(ce+B[U])+" ",ce=I<(O=this.textWidth(N))&&0<ce.length?(Y.push(ce),"".concat(B[U])+" "):N;Y.push(ce)}var K=0;this._textBaseline===l.CENTER?K=(Y.length-1)*X.textLeading()/2:this._textBaseline===l.BOTTOM&&(K=(Y.length-1)*X.textLeading());for(var re=0;re<j.length;re++){ce="",B=j[re].split(" ");for(var ae=0;ae<B.length;ae++)N="".concat(ce+B[ae])+" ",I<(O=this.textWidth(N))&&0<ce.length?(this._renderText(X,ce.trim(),C,P-K,ee,V),ce="".concat(B[ae])+" ",P+=X.textLeading()):ce=N;this._renderText(X,ce.trim(),C,P-K,ee,V),P+=X.textLeading()}}else{for(var pe=[],ye=0;ye<j.length;ye++)for(var Re=j[ye].split(ce=""),Me=0;Me<Re.length;Me++)N="".concat(ce+Re[Me]),(O=this.textWidth(N))<=I?ce+=Re[Me]:I<O&&0<ce.length&&(pe.push(ce),ce="".concat(Re[Me]));pe.push(ce);var xe=0;this._textBaseline===l.CENTER?xe=(pe.length-1)*X.textLeading()/2:this._textBaseline===l.BOTTOM&&(xe=(pe.length-1)*X.textLeading());for(var ve=0;ve<j.length;ve++){Re=j[ve].split(ce="");for(var ne=0;ne<Re.length;ne++)N="".concat(ce+Re[ne]),(O=this.textWidth(N))<=I?ce+=Re[ne]:I<O&&0<ce.length&&(this._renderText(X,ce.trim(),C,P-xe,ee,V),P+=X.textLeading(),ce="".concat(Re[ne]))}this._renderText(X,ce.trim(),C,P-xe,ee,V),P+=X.textLeading()}}else{var Te=0;this._textBaseline===l.CENTER?Te=(j.length-1)*X.textLeading()/2:this._textBaseline===l.BOTTOM&&(Te=(j.length-1)*X.textLeading());for(var Pe=0;Pe<j.length;Pe++)this._renderText(X,j[Pe],C,P-Te,ee,V-Te),P+=X.textLeading()}return X}}},{key:"_applyDefaults",value:function(){return this}},{key:"_isOpenType",value:function(){var R=0<arguments.length&&arguments[0]!==void 0?arguments[0]:this._textFont;return h(R)==="object"&&R.font&&R.font.supported}},{key:"_updateTextMetrics",value:function(){var R,C,P,I,D,j;return this._isOpenType()?(this._setProperty("_textAscent",this._textFont._textAscent()),this._setProperty("_textDescent",this._textFont._textDescent())):((R=document.createElement("span")).style.fontFamily=this._textFont,R.style.fontSize="".concat(this._textSize,"px"),R.innerHTML="ABCjgq|",(j=document.createElement("div")).style.display="inline-block",j.style.width="1px",j.style.height="0px",I=((C=document.createElement("div")).appendChild(R),C.appendChild(j),C.style.height="0px",C.style.overflow="hidden",document.body.appendChild(C),j.style.verticalAlign="baseline",g(j)),D=g(R),P=I[1]-D[1],I=(j.style.verticalAlign="bottom",g(j)),D=g(R),j=I[1]-D[1]-P,document.body.removeChild(C),this._setProperty("_textAscent",P),this._setProperty("_textDescent",j)),this}}])&&p(b.prototype,x),T}(a.default.Element);function g(x){var b=0,w=0;if(x.offsetParent)for(;b+=x.offsetLeft,w+=x.offsetTop,x=x.offsetParent;);else b+=x.offsetLeft,w+=x.offsetTop;return[b,w]}v.prototype.textSize=function(x){return typeof x=="number"?(this._setProperty("_textSize",x),this._leadingSet||this._setProperty("_textLeading",x*l._DEFAULT_LEADMULT),this._applyTextProperties()):this._textSize},a.default.Renderer=v,r=a.default.Renderer,o.default=r},{"../core/constants":269,"./main":280,"core-js/modules/es.array.iterator":164,"core-js/modules/es.number.constructor":178,"core-js/modules/es.object.assign":181,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.get-prototype-of":185,"core-js/modules/es.object.to-string":187,"core-js/modules/es.reflect.construct":189,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.replace":201,"core-js/modules/es.string.split":203,"core-js/modules/es.string.trim":206,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],284:[function(x,i,o){function s(b){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w})(b)}function a(b){return(a=typeof Symbol=="function"&&s(Symbol.iterator)==="symbol"?function(w){return s(w)}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":s(w)})(b)}x("core-js/modules/es.symbol"),x("core-js/modules/es.symbol.description"),x("core-js/modules/es.symbol.iterator"),x("core-js/modules/es.array.concat"),x("core-js/modules/es.array.fill"),x("core-js/modules/es.array.for-each"),x("core-js/modules/es.array.iterator"),x("core-js/modules/es.array.join"),x("core-js/modules/es.array.slice"),x("core-js/modules/es.function.name"),x("core-js/modules/es.number.to-fixed"),x("core-js/modules/es.object.get-own-property-descriptor"),x("core-js/modules/es.object.get-prototype-of"),x("core-js/modules/es.object.to-string"),x("core-js/modules/es.reflect.construct"),x("core-js/modules/es.reflect.get"),x("core-js/modules/es.regexp.exec"),x("core-js/modules/es.regexp.to-string"),x("core-js/modules/es.string.iterator"),x("core-js/modules/es.weak-map"),x("core-js/modules/web.dom-collections.iterator"),x("core-js/modules/es.array.concat"),x("core-js/modules/es.array.fill"),x("core-js/modules/es.array.for-each"),x("core-js/modules/es.array.join"),x("core-js/modules/es.array.slice"),x("core-js/modules/es.function.name"),x("core-js/modules/es.number.to-fixed"),x("core-js/modules/es.object.get-prototype-of"),x("core-js/modules/es.object.to-string"),x("core-js/modules/es.regexp.exec"),x("core-js/modules/es.regexp.to-string"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var l=(g=x("./main"))&&g.__esModule?g:{default:g},u=function(b){if(b&&b.__esModule)return b;if(b===null||a(b)!=="object"&&typeof b!="function")return{default:b};var w=h();if(w&&w.has(b))return w.get(b);var T,R={},C=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(T in b){var P;Object.prototype.hasOwnProperty.call(b,T)&&((P=C?Object.getOwnPropertyDescriptor(b,T):null)&&(P.get||P.set)?Object.defineProperty(R,T,P):R[T]=b[T])}return R.default=b,w&&w.set(b,R),R}(x("./constants"));function h(){var b;return typeof WeakMap!="function"?null:(b=new WeakMap,h=function(){return b},b)}function p(b,w){for(var T=0;T<w.length;T++){var R=w[T];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(b,R.key,R)}}function c(b,w,T){return(c=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(I,C,P){var I=function(D,j){for(;!Object.prototype.hasOwnProperty.call(D,j)&&(D=y(D))!==null;);return D}(I,C);if(I)return(I=Object.getOwnPropertyDescriptor(I,C)).get?I.get.call(P):I.value})(b,w,T||b)}function f(b,w){return(f=Object.setPrototypeOf||function(T,R){return T.__proto__=R,T})(b,w)}function m(b){return function(){var w,T=y(b),T=(w=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(w=y(this).constructor,Reflect.construct(T,arguments,w)):T.apply(this,arguments),this);if(!w||a(w)!=="object"&&typeof w!="function"){if(T!==void 0)return T;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return w}}function y(b){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(w){return w.__proto__||Object.getPrototypeOf(w)})(b)}x("./p5.Renderer");var v="rgba(0,0,0,0)",g=function(b){var w=R;if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function");w.prototype=Object.create(b&&b.prototype,{constructor:{value:w,writable:!0,configurable:!0}}),b&&f(w,b);var T=m(R);function R(C,P,I){if(this instanceof R)return(C=T.call(this,C,P,I)).drawingContext=C.canvas.getContext("2d"),C._pInst._setProperty("drawingContext",C.drawingContext),C;throw new TypeError("Cannot call a class as a function")}return w=R,(b=[{key:"getFilterGraphicsLayer",value:function(){var C;return this.filterGraphicsLayer||(C=(this._pInst instanceof l.default.Graphics?this._pInst:this)._pInst,this.filterGraphicsLayer=new l.default.Graphics(this.width,this.height,u.WEBGL,C)),this.filterGraphicsLayer.width===this.width&&this.filterGraphicsLayer.height===this.height||this.filterGraphicsLayer.resizeCanvas(this.width,this.height),this.filterGraphicsLayer.pixelDensity()!==this._pInst.pixelDensity()&&this.filterGraphicsLayer.pixelDensity(this._pInst.pixelDensity()),this.filterGraphicsLayer}},{key:"_applyDefaults",value:function(){this._cachedFillStyle=this._cachedStrokeStyle=void 0,this._cachedBlendMode=u.BLEND,this._setFill(u._DEFAULT_FILL),this._setStroke(u._DEFAULT_STROKE),this.drawingContext.lineCap=u.ROUND,this.drawingContext.font="normal 12px sans-serif"}},{key:"resize",value:function(C,P){c(y(R.prototype),"resize",this).call(this,C,P),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity)}},{key:"background",value:function(){var C,P;this.drawingContext.save(),this.resetMatrix(),(arguments.length<=0?void 0:arguments[0])instanceof l.default.Image?0<=(arguments.length<=1?void 0:arguments[1])?(C=arguments.length<=0?void 0:arguments[0],this.drawingContext.globalAlpha=(arguments.length<=1?void 0:arguments[1])/255,this._pInst.image(C,0,0,this.width,this.height)):this._pInst.image(arguments.length<=0?void 0:arguments[0],0,0,this.width,this.height):(C=this._getFill(),P=(P=this._pInst).color.apply(P,arguments),this._pInst._addAccsOutput()&&this._pInst._accsBackground(P.levels),P=P.toString(),this._setFill(P),this._isErasing&&this.blendMode(this._cachedBlendMode),this.drawingContext.fillRect(0,0,this.width,this.height),this._setFill(C),this._isErasing&&this._pInst.erase()),this.drawingContext.restore()}},{key:"clear",value:function(){this.drawingContext.save(),this.resetMatrix(),this.drawingContext.clearRect(0,0,this.width,this.height),this.drawingContext.restore()}},{key:"fill",value:function(){var C=(C=this._pInst).color.apply(C,arguments);this._setFill(C.toString()),this._pInst._addAccsOutput()&&this._pInst._accsCanvasColors("fill",C.levels)}},{key:"stroke",value:function(){var C=(C=this._pInst).color.apply(C,arguments);this._setStroke(C.toString()),this._pInst._addAccsOutput()&&this._pInst._accsCanvasColors("stroke",C.levels)}},{key:"erase",value:function(C,P){this._isErasing||(this._cachedFillStyle=this.drawingContext.fillStyle,C=this._pInst.color(255,C).toString(),this.drawingContext.fillStyle=C,this._cachedStrokeStyle=this.drawingContext.strokeStyle,C=this._pInst.color(255,P).toString(),this.drawingContext.strokeStyle=C,P=this._cachedBlendMode,this.blendMode(u.REMOVE),this._cachedBlendMode=P,this._isErasing=!0)}},{key:"noErase",value:function(){this._isErasing&&(this.drawingContext.fillStyle=this._cachedFillStyle,this.drawingContext.strokeStyle=this._cachedStrokeStyle,this.blendMode(this._cachedBlendMode),this._isErasing=!1)}},{key:"beginClip",value:function(){var C=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},C=(c(y(R.prototype),"beginClip",this).call(this,C),this._cachedFillStyle=this.drawingContext.fillStyle,this._pInst.color(255,0).toString()),C=(this.drawingContext.fillStyle=C,this._cachedStrokeStyle=this.drawingContext.strokeStyle,this._pInst.color(255,0).toString()),C=(this.drawingContext.strokeStyle=C,this._cachedBlendMode);this.blendMode(u.BLEND),this._cachedBlendMode=C,this.drawingContext.beginPath(),this._clipInvert&&(this.drawingContext.moveTo(-2*this.width,-2*this.height),this.drawingContext.lineTo(-2*this.width,2*this.height),this.drawingContext.lineTo(2*this.width,2*this.height),this.drawingContext.lineTo(2*this.width,-2*this.height),this.drawingContext.closePath())}},{key:"endClip",value:function(){this._doFillStrokeClose(),this.drawingContext.clip(),c(y(R.prototype),"endClip",this).call(this),this.drawingContext.fillStyle=this._cachedFillStyle,this.drawingContext.strokeStyle=this._cachedStrokeStyle,this.blendMode(this._cachedBlendMode)}},{key:"image",value:function(C,P,I,D,j,N,O,W,X){C.gifProperties&&C._animateGif(this._pInst);try{l.default.MediaElement&&C instanceof l.default.MediaElement&&C._ensureCanvas();var J=(J=this._tint&&C.canvas?this._getTintedImageCanvas(C):J)||C.canvas||C.elt,ee=1;C.width&&0<C.width&&(ee=J.width/C.width),this._isErasing&&this.blendMode(this._cachedBlendMode),this.drawingContext.drawImage(J,ee*P,ee*I,ee*D,ee*j,N,O,W,X),this._isErasing&&this._pInst.erase()}catch(V){if(V.name!=="NS_ERROR_NOT_AVAILABLE")throw V}}},{key:"_getTintedImageCanvas",value:function(C){if(!C.canvas)return C;C.tintCanvas||(C.tintCanvas=document.createElement("canvas")),C.tintCanvas.width!==C.canvas.width&&(C.tintCanvas.width=C.canvas.width),C.tintCanvas.height!==C.canvas.height&&(C.tintCanvas.height=C.canvas.height);var P=C.tintCanvas.getContext("2d");return P.save(),P.clearRect(0,0,C.canvas.width,C.canvas.height),(this._tint[0]<255||this._tint[1]<255||this._tint[2]<255)&&(P.drawImage(C.canvas,0,0),P.globalCompositeOperation="luminosity",P.drawImage(C.canvas,0,0),P.globalCompositeOperation="color",P.drawImage(C.canvas,0,0),P.globalCompositeOperation="multiply",P.fillStyle="rgb(".concat(this._tint.slice(0,3).join(", "),")"),P.fillRect(0,0,C.canvas.width,C.canvas.height),P.globalCompositeOperation="destination-in"),P.globalAlpha=this._tint[3]/255,P.drawImage(C.canvas,0,0),P.restore(),C.tintCanvas}},{key:"blendMode",value:function(C){if(C===u.SUBTRACT)console.warn("blendMode(SUBTRACT) only works in WEBGL mode.");else{if(C!==u.BLEND&&C!==u.REMOVE&&C!==u.DARKEST&&C!==u.LIGHTEST&&C!==u.DIFFERENCE&&C!==u.MULTIPLY&&C!==u.EXCLUSION&&C!==u.SCREEN&&C!==u.REPLACE&&C!==u.OVERLAY&&C!==u.HARD_LIGHT&&C!==u.SOFT_LIGHT&&C!==u.DODGE&&C!==u.BURN&&C!==u.ADD)throw new Error("Mode ".concat(C," not recognized."));this._cachedBlendMode=C,this.drawingContext.globalCompositeOperation=C}}},{key:"blend",value:function(){for(var C=this.drawingContext.globalCompositeOperation,P=arguments.length,I=new Array(P),D=0;D<P;D++)I[D]=arguments[D];var j=I[I.length-1],N=Array.prototype.slice.call(I,0,I.length-1);this.drawingContext.globalCompositeOperation=j,l.default.prototype.copy.apply(this,N),this.drawingContext.globalCompositeOperation=C}},{key:"_getPixel",value:function(C,P){return C=this.drawingContext.getImageData(C,P,1,1).data,[C[0],C[1],C[2],C[3]]}},{key:"loadPixels",value:function(){var C=this._pixelsState,P=C._pixelDensity,I=this.width*P,P=this.height*P,I=this.drawingContext.getImageData(0,0,I,P);C._setProperty("imageData",I),C._setProperty("pixels",I.data)}},{key:"set",value:function(C,P,I){C=Math.floor(C),P=Math.floor(P);var D=this._pixelsState;if(I instanceof l.default.Image)this.drawingContext.save(),this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(D._pixelDensity,D._pixelDensity),this.drawingContext.clearRect(C,P,I.width,I.height),this.drawingContext.drawImage(I.canvas,C,P),this.drawingContext.restore();else{var j=0,N=0,O=0,W=0,X=4*(P*D._pixelDensity*(this.width*D._pixelDensity)+C*D._pixelDensity);if(D.imageData||D.loadPixels(),typeof I=="number")X<D.pixels.length&&(O=N=j=I,W=255);else if(Array.isArray(I)){if(I.length<4)throw new Error("pixel array must be of the form [R, G, B, A]");X<D.pixels.length&&(j=I[0],N=I[1],O=I[2],W=I[3])}else I instanceof l.default.Color&&X<D.pixels.length&&(j=I.levels[0],N=I.levels[1],O=I.levels[2],W=I.levels[3]);for(var J=0;J<D._pixelDensity;J++)for(var ee=0;ee<D._pixelDensity;ee++)X=4*((P*D._pixelDensity+ee)*this.width*D._pixelDensity+(C*D._pixelDensity+J)),D.pixels[X]=j,D.pixels[X+1]=N,D.pixels[X+2]=O,D.pixels[X+3]=W}}},{key:"updatePixels",value:function(C,P,I,D){var j=this._pixelsState,N=j._pixelDensity;C===void 0&&P===void 0&&I===void 0&&D===void 0&&(P=C=0,I=this.width,D=this.height),C*=N,P*=N,I*=N,D*=N,this.gifProperties&&(this.gifProperties.frames[this.gifProperties.displayIndex].image=j.imageData),this.drawingContext.putImageData(j.imageData,C,P,0,0,I,D)}},{key:"_acuteArcToBezier",value:function(C,P){var N=P/2,I=Math.cos(N),W=Math.sin(N),D=1/Math.tan(N),N=C+N,j=Math.cos(N),N=Math.sin(N),O=(4-I)/3,W=W+(I-O)*D;return{ax:Math.cos(C).toFixed(7),ay:Math.sin(C).toFixed(7),bx:(O*j+W*N).toFixed(7),by:(O*N-W*j).toFixed(7),cx:(O*j-W*N).toFixed(7),cy:(O*N+W*j).toFixed(7),dx:Math.cos(C+P).toFixed(7),dy:Math.sin(C+P).toFixed(7)}}},{key:"arc",value:function(C,P,I,D,j,N,O){var W,X=this.drawingContext,J=I/2,ee=D/2,V=[];for(C+=J,P+=ee;1e-5<=N-j;)W=Math.min(N-j,u.HALF_PI),V.push(this._acuteArcToBezier(j,W)),j+=W;return this._doFill&&(this._clipping||X.beginPath(),V.forEach(function(q,Y){Y===0&&X.moveTo(C+q.ax*J,P+q.ay*ee),X.bezierCurveTo(C+q.bx*J,P+q.by*ee,C+q.cx*J,P+q.cy*ee,C+q.dx*J,P+q.dy*ee)}),O!==u.PIE&&O!=null||X.lineTo(C,P),X.closePath(),this._clipping||X.fill()),this._doStroke&&(this._clipping||X.beginPath(),V.forEach(function(q,Y){Y===0&&X.moveTo(C+q.ax*J,P+q.ay*ee),X.bezierCurveTo(C+q.bx*J,P+q.by*ee,C+q.cx*J,P+q.cy*ee,C+q.dx*J,P+q.dy*ee)}),O===u.PIE?(X.lineTo(C,P),X.closePath()):O===u.CHORD&&X.closePath(),this._clipping||X.stroke()),this}},{key:"ellipse",value:function(W){var P=this.drawingContext,I=this._doFill,D=this._doStroke,j=parseFloat(W[0]),N=parseFloat(W[1]),O=parseFloat(W[2]),W=parseFloat(W[3]);if(I&&!D){if(this._getFill()===v)return this}else if(!I&&D&&this._getStroke()===v)return this;j+=O/2,N+=W/2,O/=2,W/=2,this._clipping||P.beginPath(),P.ellipse(j,N,O,W,0,0,2*Math.PI),!this._clipping&&I&&P.fill(),!this._clipping&&D&&P.stroke()}},{key:"line",value:function(C,P,I,D){var j=this.drawingContext;return this._doStroke&&this._getStroke()!==v&&(this._clipping||j.beginPath(),j.moveTo(C,P),j.lineTo(I,D),j.stroke()),this}},{key:"point",value:function(C,P){var I,D,j=this.drawingContext;return!this._doStroke||this._getStroke()===v?this:(I=this._getStroke(),D=this._getFill(),this._clipping||this._setFill(I),this._clipping||j.beginPath(),j.arc(C,P,j.lineWidth/2,0,u.TWO_PI,!1),void(this._clipping||(j.fill(),this._setFill(D))))}},{key:"quad",value:function(C,P,I,D,j,N,O,W){var X=this.drawingContext,J=this._doFill,ee=this._doStroke;if(J&&!ee){if(this._getFill()===v)return this}else if(!J&&ee&&this._getStroke()===v)return this;return this._clipping||X.beginPath(),X.moveTo(C,P),X.lineTo(I,D),X.lineTo(j,N),X.lineTo(O,W),X.closePath(),!this._clipping&&J&&X.fill(),!this._clipping&&ee&&X.stroke(),this}},{key:"rect",value:function(ee){var P,I,D=ee[0],j=ee[1],N=ee[2],O=ee[3],W=ee[4],X=ee[5],J=ee[6],ee=ee[7],V=this.drawingContext,q=this._doFill,Y=this._doStroke;if(q&&!Y){if(this._getFill()===v)return this}else if(!q&&Y&&this._getStroke()===v)return this;return this._clipping||V.beginPath(),W===void 0?V.rect(D,j,N,O):(X===void 0&&(X=W),J===void 0&&(J=X),ee===void 0&&(ee=J),Y=(q=Math.abs(N))/2,I=(P=Math.abs(O))/2,P<2*(W=q<2*W?Y:W)&&(W=I),P<2*(X=q<2*X?Y:X)&&(X=I),P<2*(J=q<2*J?Y:J)&&(J=I),P<2*(ee=q<2*ee?Y:ee)&&(ee=I),this._clipping||V.beginPath(),V.moveTo(D+W,j),V.arcTo(D+N,j,D+N,j+O,X),V.arcTo(D+N,j+O,D,j+O,J),V.arcTo(D,j+O,D,j,ee),V.arcTo(D,j,D+N,j,W),V.closePath()),!this._clipping&&this._doFill&&V.fill(),!this._clipping&&this._doStroke&&V.stroke(),this}},{key:"triangle",value:function(J){var P=this.drawingContext,I=this._doFill,D=this._doStroke,j=J[0],N=J[1],O=J[2],W=J[3],X=J[4],J=J[5];if(I&&!D){if(this._getFill()===v)return this}else if(!I&&D&&this._getStroke()===v)return this;this._clipping||P.beginPath(),P.moveTo(j,N),P.lineTo(O,W),P.lineTo(X,J),P.closePath(),!this._clipping&&I&&P.fill(),!this._clipping&&D&&P.stroke()}},{key:"endShape",value:function(C,P,I,D,j,N,O){if(P.length!==0&&(this._doStroke||this._doFill)){var W,X,J,ee=C===u.CLOSE,V=(ee&&!N&&P.push(P[0]),P.length);if(I&&O===null){if(3<V){var q=[],Y=1-this._curveTightness;for(this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(P[1][0],P[1][1]),X=1;X+2<V;X++)W=P[X],q[0]=[W[0],W[1]],q[1]=[W[0]+(Y*P[X+1][0]-Y*P[X-1][0])/6,W[1]+(Y*P[X+1][1]-Y*P[X-1][1])/6],q[2]=[P[X+1][0]+(Y*P[X][0]-Y*P[X+2][0])/6,P[X+1][1]+(Y*P[X][1]-Y*P[X+2][1])/6],q[3]=[P[X+1][0],P[X+1][1]],this.drawingContext.bezierCurveTo(q[1][0],q[1][1],q[2][0],q[2][1],q[3][0],q[3][1]);ee&&this.drawingContext.lineTo(P[X+1][0],P[X+1][1]),this._doFillStrokeClose(ee)}}else if(D&&O===null){for(this._clipping||this.drawingContext.beginPath(),X=0;X<V;X++)P[X].isVert?P[X].moveTo?this.drawingContext.moveTo(P[X][0],P[X][1]):this.drawingContext.lineTo(P[X][0],P[X][1]):this.drawingContext.bezierCurveTo(P[X][0],P[X][1],P[X][2],P[X][3],P[X][4],P[X][5]);this._doFillStrokeClose(ee)}else if(j&&O===null){for(this._clipping||this.drawingContext.beginPath(),X=0;X<V;X++)P[X].isVert?P[X].moveTo?this.drawingContext.moveTo(P[X][0],P[X][1]):this.drawingContext.lineTo(P[X][0],P[X][1]):this.drawingContext.quadraticCurveTo(P[X][0],P[X][1],P[X][2],P[X][3]);this._doFillStrokeClose(ee)}else if(O===u.POINTS)for(X=0;X<V;X++)W=P[X],this._doStroke&&this._pInst.stroke(W[6]),this._pInst.point(W[0],W[1]);else if(O===u.LINES)for(X=0;X+1<V;X+=2)W=P[X],this._doStroke&&this._pInst.stroke(P[X+1][6]),this._pInst.line(W[0],W[1],P[X+1][0],P[X+1][1]);else if(O===u.TRIANGLES)for(X=0;X+2<V;X+=3)W=P[X],this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(W[0],W[1]),this.drawingContext.lineTo(P[X+1][0],P[X+1][1]),this.drawingContext.lineTo(P[X+2][0],P[X+2][1]),this.drawingContext.closePath(),!this._clipping&&this._doFill&&(this._pInst.fill(P[X+2][5]),this.drawingContext.fill()),!this._clipping&&this._doStroke&&(this._pInst.stroke(P[X+2][6]),this.drawingContext.stroke());else if(O===u.TRIANGLE_STRIP)for(X=0;X+1<V;X++)W=P[X],this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(P[X+1][0],P[X+1][1]),this.drawingContext.lineTo(W[0],W[1]),!this._clipping&&this._doStroke&&this._pInst.stroke(P[X+1][6]),!this._clipping&&this._doFill&&this._pInst.fill(P[X+1][5]),X+2<V&&(this.drawingContext.lineTo(P[X+2][0],P[X+2][1]),!this._clipping&&this._doStroke&&this._pInst.stroke(P[X+2][6]),!this._clipping&&this._doFill&&this._pInst.fill(P[X+2][5])),this._doFillStrokeClose(ee);else if(O===u.TRIANGLE_FAN){if(2<V){for(this._clipping||this.drawingContext.beginPath(),X=2;X<V;X++)W=P[X],this.drawingContext.moveTo(P[0][0],P[0][1]),this.drawingContext.lineTo(P[X-1][0],P[X-1][1]),this.drawingContext.lineTo(W[0],W[1]),this.drawingContext.lineTo(P[0][0],P[0][1]),X<V-1&&(this._doFill&&W[5]!==P[X+1][5]||this._doStroke&&W[6]!==P[X+1][6])&&(!this._clipping&&this._doFill&&(this._pInst.fill(W[5]),this.drawingContext.fill(),this._pInst.fill(P[X+1][5])),!this._clipping&&this._doStroke&&(this._pInst.stroke(W[6]),this.drawingContext.stroke(),this._pInst.stroke(P[X+1][6])),this.drawingContext.closePath(),this._clipping||this.drawingContext.beginPath());this._doFillStrokeClose(ee)}}else if(O===u.QUADS)for(X=0;X+3<V;X+=4){for(W=P[X],this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(W[0],W[1]),J=1;J<4;J++)this.drawingContext.lineTo(P[X+J][0],P[X+J][1]);this.drawingContext.lineTo(W[0],W[1]),!this._clipping&&this._doFill&&this._pInst.fill(P[X+3][5]),!this._clipping&&this._doStroke&&this._pInst.stroke(P[X+3][6]),this._doFillStrokeClose(ee)}else if(O===u.QUAD_STRIP){if(3<V)for(X=0;X+1<V;X+=2)W=P[X],this._clipping||this.drawingContext.beginPath(),X+3<V?(this.drawingContext.moveTo(P[X+2][0],P[X+2][1]),this.drawingContext.lineTo(W[0],W[1]),this.drawingContext.lineTo(P[X+1][0],P[X+1][1]),this.drawingContext.lineTo(P[X+3][0],P[X+3][1]),!this._clipping&&this._doFill&&this._pInst.fill(P[X+3][5]),!this._clipping&&this._doStroke&&this._pInst.stroke(P[X+3][6])):(this.drawingContext.moveTo(W[0],W[1]),this.drawingContext.lineTo(P[X+1][0],P[X+1][1])),this._doFillStrokeClose(ee)}else{for(this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(P[0][0],P[0][1]),X=1;X<V;X++)(W=P[X]).isVert&&(W.moveTo?(ee&&this.drawingContext.closePath(),this.drawingContext.moveTo(W[0],W[1])):this.drawingContext.lineTo(W[0],W[1]));this._doFillStrokeClose(ee)}N=j=D=I=!1,ee&&P.pop()}return this}},{key:"strokeCap",value:function(C){return C!==u.ROUND&&C!==u.SQUARE&&C!==u.PROJECT||(this.drawingContext.lineCap=C),this}},{key:"strokeJoin",value:function(C){return C!==u.ROUND&&C!==u.BEVEL&&C!==u.MITER||(this.drawingContext.lineJoin=C),this}},{key:"strokeWeight",value:function(C){return this.drawingContext.lineWidth=C===void 0||C===0?1e-4:C,this}},{key:"_getFill",value:function(){return this._cachedFillStyle||(this._cachedFillStyle=this.drawingContext.fillStyle),this._cachedFillStyle}},{key:"_setFill",value:function(C){C!==this._cachedFillStyle&&(this.drawingContext.fillStyle=C,this._cachedFillStyle=C)}},{key:"_getStroke",value:function(){return this._cachedStrokeStyle||(this._cachedStrokeStyle=this.drawingContext.strokeStyle),this._cachedStrokeStyle}},{key:"_setStroke",value:function(C){C!==this._cachedStrokeStyle&&(this.drawingContext.strokeStyle=C,this._cachedStrokeStyle=C)}},{key:"bezier",value:function(C,P,I,D,j,N,O,W){return this._pInst.beginShape(),this._pInst.vertex(C,P),this._pInst.bezierVertex(I,D,j,N,O,W),this._pInst.endShape(),this}},{key:"curve",value:function(C,P,I,D,j,N,O,W){return this._pInst.beginShape(),this._pInst.curveVertex(C,P),this._pInst.curveVertex(I,D),this._pInst.curveVertex(j,N),this._pInst.curveVertex(O,W),this._pInst.endShape(),this}},{key:"_doFillStrokeClose",value:function(C){C&&this.drawingContext.closePath(),!this._clipping&&this._doFill&&this.drawingContext.fill(),!this._clipping&&this._doStroke&&this.drawingContext.stroke()}},{key:"applyMatrix",value:function(C,P,I,D,j,N){this.drawingContext.transform(C,P,I,D,j,N)}},{key:"resetMatrix",value:function(){return this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),this}},{key:"rotate",value:function(C){this.drawingContext.rotate(C)}},{key:"scale",value:function(C,P){return this.drawingContext.scale(C,P),this}},{key:"translate",value:function(C,P){return C instanceof l.default.Vector&&(P=C.y,C=C.x),this.drawingContext.translate(C,P),this}},{key:"_renderText",value:function(C,P,I,D,j,N){if(!(D<N||j<=D))return C.push(),this._isOpenType()?this._textFont._renderPath(P,I,D,{renderer:this}):(this._doStroke&&this._strokeSet&&this.drawingContext.strokeText(P,I,D),!this._clipping&&this._doFill&&(this._fillSet||this._setFill(u._DEFAULT_TEXT_FILL),this.drawingContext.fillText(P,I,D))),C.pop(),C}},{key:"textWidth",value:function(C){return this._isOpenType()?this._textFont._textWidth(C,this._textSize):this.drawingContext.measureText(C).width}},{key:"_applyTextProperties",value:function(){var C=this._pInst,P=(this._setProperty("_textAscent",null),this._setProperty("_textDescent",null),P=this._textFont,this._isOpenType()&&(P=this._textFont.font.familyName,this._setProperty("_textStyle",this._textFont.font.styleName)),P||"sans-serif");return/\s/.exec(P)&&(P='"'.concat(P,'"')),this.drawingContext.font="".concat(this._textStyle||"normal"," ").concat(this._textSize||12,"px ").concat(P),this.drawingContext.textAlign=this._textAlign,this._textBaseline===u.CENTER?this.drawingContext.textBaseline=u._CTX_MIDDLE:this.drawingContext.textBaseline=this._textBaseline,C}},{key:"push",value:function(){return this.drawingContext.save(),c(y(R.prototype),"push",this).call(this)}},{key:"pop",value:function(C){this.drawingContext.restore(),this._cachedFillStyle=this.drawingContext.fillStyle,this._cachedStrokeStyle=this.drawingContext.strokeStyle,c(y(R.prototype),"pop",this).call(this,C)}}])&&p(w.prototype,b),R}(l.default.Renderer),x=(g.prototype.text=function(b,w,T,I,C){I!==void 0&&this.drawingContext.textBaseline===u.BASELINE&&(P=!0,this.drawingContext.textBaseline=u.TOP);var P,I=l.default.Renderer.prototype.text.apply(this,arguments);return P&&(this.drawingContext.textBaseline=u.BASELINE),I},l.default.Renderer2D=g,l.default.Renderer2D);o.default=x},{"./constants":269,"./main":280,"./p5.Renderer":283,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.fill":155,"core-js/modules/es.array.for-each":160,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.join":165,"core-js/modules/es.array.slice":168,"core-js/modules/es.function.name":173,"core-js/modules/es.number.to-fixed":180,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.get-prototype-of":185,"core-js/modules/es.object.to-string":187,"core-js/modules/es.reflect.construct":189,"core-js/modules/es.reflect.get":190,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],285:[function(r,i,o){r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.assign"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.assign"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator");var s=(r=r("./main"))&&r.__esModule?r:{default:r};s.default.prototype._promisePreloads=[];function a(){return{}}var l=!(s.default.prototype.registerPromisePreload=function(u){s.default.prototype._promisePreloads.push(u)});s.default.prototype._setupPromisePreloads=function(){var u=!0,h=!1,p=void 0;try{for(var c,f=this._promisePreloads[Symbol.iterator]();!(u=(c=f.next()).done);u=!0){var m=c.value,y=this,v=m.method,g=m.addCallbacks,x=m.legacyPreloadSetup,b=m.target||this,w=b[v].bind(b);if(b===s.default.prototype){if(l)continue;y=null,w=b[v]}b[v]=this._wrapPromisePreload(y,w,g),x&&(b[x.method]=this._legacyPreloadGenerator(y,x,b[v]))}}catch(T){h=!0,p=T}finally{try{u||f.return==null||f.return()}finally{if(h)throw p}}l=!0},s.default.prototype._wrapPromisePreload=function(u,h,p){var c=function(){for(var f=this,m=(this._incrementPreload(),null),y=null,v=arguments.length,g=new Array(v),x=0;x<v;x++)g[x]=arguments[x];if(p)for(var b=g.length-1;0<=b&&!y&&typeof g[b]=="function";b--)y=m,m=g.pop();var w=Promise.resolve(h.apply(this,g));return m&&w.then(m),y&&w.catch(y),w.then(function(){return f._decrementPreload()}),w};return c=u?c.bind(u):c},s.default.prototype._legacyPreloadGenerator=function(u,f,p){var c=f.createBaseObject||a,f=function(){var m=this;this._incrementPreload();for(var y=arguments.length,v=new Array(y),g=0;g<y;g++)v[g]=arguments[g];var x=c.apply(this,v);return p.apply(this,v).then(function(b){Object.assign(x,b),m._decrementPreload()}),x};return f=u?f.bind(u):f}},{"./main":280,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.assign":181,"core-js/modules/es.object.to-string":187,"core-js/modules/es.promise":188,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/web.dom-collections.iterator":243}],286:[function(r,i,o){function s(f){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(f)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var a=(c=r("./main"))&&c.__esModule?c:{default:c},l=function(f){if(f&&f.__esModule)return f;if(f===null||h(f)!=="object"&&typeof f!="function")return{default:f};var m=u();if(m&&m.has(f))return m.get(f);var y,v={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(y in f){var x;Object.prototype.hasOwnProperty.call(f,y)&&((x=g?Object.getOwnPropertyDescriptor(f,y):null)&&(x.get||x.set)?Object.defineProperty(v,y,x):v[y]=f[y])}return v.default=f,m&&m.set(f,v),v}(r("./constants"));function u(){var f;return typeof WeakMap!="function"?null:(f=new WeakMap,u=function(){return f},f)}function h(f){return(h=typeof Symbol=="function"&&s(Symbol.iterator)==="symbol"?function(m){return s(m)}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":s(m)})(f)}r("./p5.Graphics"),r("./p5.Renderer2D"),r("../webgl/p5.RendererGL");var p="defaultCanvas0",c=(a.default.prototype.createCanvas=function(f,m,y,v){var g,x,b;if(a.default._validateParameters("createCanvas",arguments),arguments[2]instanceof HTMLCanvasElement?(y=l.P2D,v=arguments[2]):g=y||l.P2D,v)(b=document.getElementById(p))&&b.parentNode.removeChild(b),b=v,this._defaultGraphicsCreated=!1;else{if(g===l.WEBGL)(b=document.getElementById(p))&&(b.parentNode.removeChild(b),x=this._renderer,this._elements=this._elements.filter(function(T){return T!==x})),(b=document.createElement("canvas")).id=p,b.classList.add("p5Canvas");else if(this._defaultGraphicsCreated)b=this.canvas;else{b=v||document.createElement("canvas");for(var w=0;document.getElementById("defaultCanvas".concat(w));)w++;p="defaultCanvas".concat(w),b.id=p,b.classList.add("p5Canvas")}this._setupDone||(b.dataset.hidden=!0,b.style.visibility="hidden"),(this._userNode||(document.getElementsByTagName("main").length===0&&(y=document.createElement("main"),document.body.appendChild(y)),document.getElementsByTagName("main")[0])).appendChild(b)}return g===l.WEBGL?(this._setProperty("_renderer",new a.default.RendererGL(b,this,!0)),this._elements.push(this._renderer),f=(v=this._renderer._adjustDimensions(f,m)).adjustedWidth,m=v.adjustedHeight):this._defaultGraphicsCreated||(this._setProperty("_renderer",new a.default.Renderer2D(b,this,!0)),this._defaultGraphicsCreated=!0,this._elements.push(this._renderer)),this._renderer.resize(f,m),this._renderer._applyDefaults(),this._renderer},a.default.prototype.resizeCanvas=function(f,m,y){if(a.default._validateParameters("resizeCanvas",arguments),this._renderer){var v,g,x,b={};for(v in this.drawingContext){var w=this.drawingContext[v];h(w)!=="object"&&typeof w!="function"&&(b[v]=w)}for(x in this._renderer instanceof a.default.RendererGL&&(f=(g=this._renderer._adjustDimensions(f,m)).adjustedWidth,m=g.adjustedHeight),this.width=f,this.height=m,this._renderer.resize(f,m),b)try{this.drawingContext[x]=b[x]}catch{}y||this.redraw()}this._addAccsOutput()&&this._updateAccsOutput()},a.default.prototype.noCanvas=function(){this.canvas&&this.canvas.parentNode.removeChild(this.canvas)},a.default.prototype.createGraphics=function(f,m){for(var y=arguments.length,v=new Array(2<y?y-2:0),g=2;g<y;g++)v[g-2]=arguments[g];return v[0]instanceof HTMLCanvasElement&&(v[1]=v[0],v[0]=l.P2D),a.default._validateParameters("createGraphics",arguments),new a.default.Graphics(f,m,v[0],this,v[1])},a.default.prototype.createFramebuffer=function(f){return new a.default.Framebuffer(this,f)},a.default.prototype.clearDepth=function(f){this._assert3d("clearDepth"),this._renderer.clearDepth(f)},a.default.prototype.blendMode=function(f){a.default._validateParameters("blendMode",arguments),f===l.NORMAL&&(console.warn("NORMAL has been deprecated for use in blendMode. defaulting to BLEND instead."),f=l.BLEND),this._renderer.blendMode(f)},a.default);o.default=c},{"../webgl/p5.RendererGL":337,"./constants":269,"./main":280,"./p5.Graphics":282,"./p5.Renderer2D":284,"core-js/modules/es.array.filter":156,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],287:[function(r,i,o){function s(m){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y})(m)}function a(m){return(a=typeof Symbol=="function"&&s(Symbol.iterator)==="symbol"?function(y){return s(y)}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":s(y)})(m)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.slice"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var l=c(r("../main")),u=function(m){if(m&&m.__esModule)return m;if(m===null||a(m)!=="object"&&typeof m!="function")return{default:m};var y=p();if(y&&y.has(m))return y.get(m);var v,g={},x=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(v in m){var b;Object.prototype.hasOwnProperty.call(m,v)&&((b=x?Object.getOwnPropertyDescriptor(m,v):null)&&(b.get||b.set)?Object.defineProperty(g,v,b):g[v]=m[v])}return g.default=m,y&&y.set(m,g),g}(r("../constants")),h=c(r("../helpers"));function p(){var m;return typeof WeakMap!="function"?null:(m=new WeakMap,p=function(){return m},m)}function c(m){return m&&m.__esModule?m:{default:m}}function f(m){return function(y){if(Array.isArray(y)){for(var v=0,g=new Array(y.length);v<y.length;v++)g[v]=y[v];return g}}(m)||function(y){if(Symbol.iterator in Object(y)||Object.prototype.toString.call(y)==="[object Arguments]")return Array.from(y)}(m)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}r("../friendly_errors/fes_core"),r("../friendly_errors/file_errors"),r("../friendly_errors/validate_params"),l.default.prototype._normalizeArcAngles=function(m,y,v,g,x){var b;return m-=u.TWO_PI*Math.floor(m/u.TWO_PI),y-=u.TWO_PI*Math.floor(y/u.TWO_PI),b=Math.min(Math.abs(m-y),u.TWO_PI-Math.abs(m-y)),x&&(m=m<=u.HALF_PI?Math.atan(v/g*Math.tan(m)):m>u.HALF_PI&&m<=3*u.HALF_PI?Math.atan(v/g*Math.tan(m))+u.PI:Math.atan(v/g*Math.tan(m))+u.TWO_PI,y=y<=u.HALF_PI?Math.atan(v/g*Math.tan(y)):y>u.HALF_PI&&y<=3*u.HALF_PI?Math.atan(v/g*Math.tan(y))+u.PI:Math.atan(v/g*Math.tan(y))+u.TWO_PI),y<m&&(y+=u.TWO_PI),{start:m,stop:y,correspondToSamePoint:b<1e-5}},l.default.prototype.arc=function(m,y,v,g,x,b,w,T){return l.default._validateParameters("arc",arguments),(this._renderer._doStroke||this._renderer._doFill)&&x!==b&&(x=this._toRadians(x),b=this._toRadians(b),v=Math.abs(v),g=Math.abs(g),m=h.default.modeAdjust(m,y,v,g,this._renderer._ellipseMode),(y=this._normalizeArcAngles(x,b,m.w,m.h,!0)).correspondToSamePoint?this._renderer.ellipse([m.x,m.y,m.w,m.h,T]):(this._renderer.arc(m.x,m.y,m.w,m.h,y.start,y.stop,w,T),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("arc",[m.x,m.y,m.w,m.h,y.start,y.stop,w]))),this},l.default.prototype.ellipse=function(m,y,v,g,x){return l.default._validateParameters("ellipse",arguments),this._renderEllipse.apply(this,arguments)},l.default.prototype.circle=function(){for(var m=arguments.length,y=new Array(m),v=0;v<m;v++)y[v]=arguments[v];l.default._validateParameters("circle",y);var g=y.slice(0,2);return g.push(y[2],y[2]),this._renderEllipse.apply(this,f(g))},l.default.prototype._renderEllipse=function(m,y,v,g,x){return(this._renderer._doStroke||this._renderer._doFill)&&(v<0&&(v=Math.abs(v)),g===void 0?g=v:g<0&&(g=Math.abs(g)),m=h.default.modeAdjust(m,y,v,g,this._renderer._ellipseMode),this._renderer.ellipse([m.x,m.y,m.w,m.h,x]),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("ellipse",[m.x,m.y,m.w,m.h])),this},l.default.prototype.line=function(){for(var m,y=arguments.length,v=new Array(y),g=0;g<y;g++)v[g]=arguments[g];return l.default._validateParameters("line",v),this._renderer._doStroke&&(m=this._renderer).line.apply(m,v),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("line",v),this},l.default.prototype.point=function(){for(var m,y=arguments.length,v=new Array(y),g=0;g<y;g++)v[g]=arguments[g];return l.default._validateParameters("point",v),this._renderer._doStroke&&(v.length===1&&v[0]instanceof l.default.Vector?this._renderer.point.call(this._renderer,v[0].x,v[0].y,v[0].z):((m=this._renderer).point.apply(m,v),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("point",v))),this},l.default.prototype.quad=function(){for(var m,y=arguments.length,v=new Array(y),g=0;g<y;g++)v[g]=arguments[g];return l.default._validateParameters("quad",v),(this._renderer._doStroke||this._renderer._doFill)&&(this._renderer.isP3D&&v.length<12?this._renderer.quad.call(this._renderer,v[0],v[1],0,v[2],v[3],0,v[4],v[5],0,v[6],v[7],0,v[8],v[9]):((m=this._renderer).quad.apply(m,v),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("quadrilateral",v))),this},l.default.prototype.rect=function(){for(var m=arguments.length,y=new Array(m),v=0;v<m;v++)y[v]=arguments[v];return l.default._validateParameters("rect",y),this._renderRect.apply(this,y)},l.default.prototype.square=function(m,y,v,g,x,b,w){return l.default._validateParameters("square",arguments),this._renderRect.call(this,m,y,v,v,g,x,b,w)},l.default.prototype._renderRect=function(){if(this._renderer._doStroke||this._renderer._doFill){arguments.length===3&&(arguments[3]=arguments[2]);for(var m=h.default.modeAdjust(arguments[0],arguments[1],arguments[2],arguments[3],this._renderer._rectMode),y=[m.x,m.y,m.w,m.h],v=4;v<arguments.length;v++)y[v]=arguments[v];this._renderer.rect(y),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("rectangle",[m.x,m.y,m.w,m.h])}return this},l.default.prototype.triangle=function(){for(var m=arguments.length,y=new Array(m),v=0;v<m;v++)y[v]=arguments[v];return l.default._validateParameters("triangle",y),(this._renderer._doStroke||this._renderer._doFill)&&this._renderer.triangle(y),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("triangle",y),this},r=l.default,o.default=r},{"../constants":269,"../friendly_errors/fes_core":271,"../friendly_errors/file_errors":272,"../friendly_errors/validate_params":275,"../helpers":276,"../main":280,"core-js/modules/es.array.from":161,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.slice":168,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],288:[function(r,i,o){function s(c){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(c)}function a(c){return(a=typeof Symbol=="function"&&s(Symbol.iterator)==="symbol"?function(f){return s(f)}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":s(f)})(c)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var l=(p=r("../main"))&&p.__esModule?p:{default:p},u=function(c){if(c&&c.__esModule)return c;if(c===null||a(c)!=="object"&&typeof c!="function")return{default:c};var f=h();if(f&&f.has(c))return f.get(c);var m,y={},v=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(m in c){var g;Object.prototype.hasOwnProperty.call(c,m)&&((g=v?Object.getOwnPropertyDescriptor(c,m):null)&&(g.get||g.set)?Object.defineProperty(y,m,g):y[m]=c[m])}return y.default=c,f&&f.set(c,y),y}(r("../constants"));function h(){var c;return typeof WeakMap!="function"?null:(c=new WeakMap,h=function(){return c},c)}l.default.prototype.ellipseMode=function(c){return l.default._validateParameters("ellipseMode",arguments),c!==u.CORNER&&c!==u.CORNERS&&c!==u.RADIUS&&c!==u.CENTER||(this._renderer._ellipseMode=c),this},l.default.prototype.noSmooth=function(){return this._renderer.isP3D?this.setAttributes("antialias",!1):"imageSmoothingEnabled"in this.drawingContext&&(this.drawingContext.imageSmoothingEnabled=!1),this},l.default.prototype.rectMode=function(c){return l.default._validateParameters("rectMode",arguments),c!==u.CORNER&&c!==u.CORNERS&&c!==u.RADIUS&&c!==u.CENTER||(this._renderer._rectMode=c),this},l.default.prototype.smooth=function(){return this.setAttributes("antialias",!0),this._renderer.isP3D||"imageSmoothingEnabled"in this.drawingContext&&(this.drawingContext.imageSmoothingEnabled=!0),this},l.default.prototype.strokeCap=function(c){return l.default._validateParameters("strokeCap",arguments),c!==u.ROUND&&c!==u.SQUARE&&c!==u.PROJECT||this._renderer.strokeCap(c),this},l.default.prototype.strokeJoin=function(c){return l.default._validateParameters("strokeJoin",arguments),c!==u.ROUND&&c!==u.BEVEL&&c!==u.MITER||this._renderer.strokeJoin(c),this},l.default.prototype.strokeWeight=function(c){return l.default._validateParameters("strokeWeight",arguments),this._renderer.strokeWeight(c),this};var p=l.default;o.default=p},{"../constants":269,"../main":280,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],289:[function(r,i,o){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var s=(a=r("../main"))&&a.__esModule?a:{default:a};r("../friendly_errors/fes_core"),r("../friendly_errors/file_errors"),r("../friendly_errors/validate_params"),s.default.prototype.bezier=function(){for(var l,u=arguments.length,h=new Array(u),p=0;p<u;p++)h[p]=arguments[p];return s.default._validateParameters("bezier",h),(this._renderer._doStroke||this._renderer._doFill)&&(l=this._renderer).bezier.apply(l,h),this},s.default.prototype.bezierDetail=function(l){return s.default._validateParameters("bezierDetail",arguments),this._bezierDetail=l,this},s.default.prototype.bezierPoint=function(l,u,h,p,c){s.default._validateParameters("bezierPoint",arguments);var f=1-c;return Math.pow(f,3)*l+3*Math.pow(f,2)*c*u+3*f*Math.pow(c,2)*h+Math.pow(c,3)*p},s.default.prototype.bezierTangent=function(l,u,h,p,c){s.default._validateParameters("bezierTangent",arguments);var f=1-c;return 3*p*Math.pow(c,2)-3*h*Math.pow(c,2)+6*h*f*c-6*u*f*c+3*u*Math.pow(f,2)-3*l*Math.pow(f,2)},s.default.prototype.curve=function(){for(var l,u=arguments.length,h=new Array(u),p=0;p<u;p++)h[p]=arguments[p];return s.default._validateParameters("curve",h),this._renderer._doStroke&&(l=this._renderer).curve.apply(l,h),this},s.default.prototype.curveDetail=function(l){return s.default._validateParameters("curveDetail",arguments),this._curveDetail=l<3?3:l,this},s.default.prototype.curveTightness=function(l){return s.default._validateParameters("curveTightness",arguments),this._renderer._curveTightness=l,this},s.default.prototype.curvePoint=function(l,u,h,p,c){s.default._validateParameters("curvePoint",arguments);var f=this._renderer._curveTightness,m=c*c*c,y=c*c;return l*((f-1)/2*m+(1-f)*y+(f-1)/2*c)+u*((f+3)/2*m+(-5-f)/2*y+1)+h*((-3-f)/2*m+(f+2)*y+(1-f)/2*c)+p*((1-f)/2*m+(f-1)/2*y)},s.default.prototype.curveTangent=function(l,u,h,p,y){s.default._validateParameters("curveTangent",arguments);var f=this._renderer._curveTightness,m=y*y*3,y=2*y;return l*((f-1)/2*m+(1-f)*y+(f-1)/2)+u*((f+3)/2*m+(-5-f)/2*y)+h*((-3-f)/2*m+(f+2)*y+(1-f)/2)+p*((1-f)/2*m+(f-1)/2*y)};var a=s.default;o.default=a},{"../friendly_errors/fes_core":271,"../friendly_errors/file_errors":272,"../friendly_errors/validate_params":275,"../main":280}],290:[function(r,i,o){function s(w){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(T){return typeof T}:function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":typeof T})(w)}function a(w){return(a=typeof Symbol=="function"&&s(Symbol.iterator)==="symbol"?function(T){return s(T)}:function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":s(T)})(w)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.slice"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var l=(b=r("../main"))&&b.__esModule?b:{default:b},u=function(w){if(w&&w.__esModule)return w;if(w===null||a(w)!=="object"&&typeof w!="function")return{default:w};var T=h();if(T&&T.has(w))return T.get(w);var R,C={},P=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(R in w){var I;Object.prototype.hasOwnProperty.call(w,R)&&((I=P?Object.getOwnPropertyDescriptor(w,R):null)&&(I.get||I.set)?Object.defineProperty(C,R,I):C[R]=w[R])}return C.default=w,T&&T.set(w,C),C}(r("../constants"));function h(){var w;return typeof WeakMap!="function"?null:(w=new WeakMap,h=function(){return w},w)}var p=null,c=[],f=[],m=!1,y=!1,v=!1,g=!1,x=!0,b=(l.default.prototype.beginContour=function(){return this._renderer.isP3D?this._renderer.beginContour():(f=[],g=!0),this},l.default.prototype.beginShape=function(w){var T;return l.default._validateParameters("beginShape",arguments),this._renderer.isP3D?(T=this._renderer).beginShape.apply(T,arguments):(p=w===u.POINTS||w===u.LINES||w===u.TRIANGLES||w===u.TRIANGLE_FAN||w===u.TRIANGLE_STRIP||w===u.QUADS||w===u.QUAD_STRIP?w:null,c=[],f=[]),this},l.default.prototype.bezierVertex=function(){for(var w,T=arguments.length,R=new Array(T),C=0;C<T;C++)R[C]=arguments[C];if(l.default._validateParameters("bezierVertex",R),this._renderer.isP3D)(w=this._renderer).bezierVertex.apply(w,R);else if(c.length===0)l.default._friendlyError("vertex() must be used once before calling bezierVertex()","bezierVertex");else{m=!0;for(var P=[],I=0;I<R.length;I++)P[I]=R[I];P.isVert=!1,(g?f:c).push(P)}return this},l.default.prototype.curveVertex=function(){for(var w,T=arguments.length,R=new Array(T),C=0;C<T;C++)R[C]=arguments[C];return l.default._validateParameters("curveVertex",R),this._renderer.isP3D?(w=this._renderer).curveVertex.apply(w,R):(y=!0,this.vertex(R[0],R[1])),this},l.default.prototype.endContour=function(){if(!this._renderer.isP3D){var w=f[0].slice();w.isVert=f[0].isVert,w.moveTo=!1,f.push(w),x&&(c.push(c[0]),x=!1);for(var T=0;T<f.length;T++)c.push(f[T])}return this},l.default.prototype.endShape=function(w){var T=1<arguments.length&&arguments[1]!==void 0?arguments[1]:1;if(l.default._validateParameters("endShape",arguments),T<1&&(console.log(" p5.js says: You can not have less than one instance"),T=1),this._renderer.isP3D)this._renderer.endShape(w,y,m,v,g,p,T);else{if(T!==1&&console.log(" p5.js says: Instancing is only supported in WebGL2 mode"),c.length===0)return this;if(!this._renderer._doStroke&&!this._renderer._doFill)return this;T=w===u.CLOSE,T&&!g&&c.push(c[0]),this._renderer.endShape(w,c,y,m,v,g,p),x=!(g=v=m=y=!1),T&&c.pop()}return this},l.default.prototype.quadraticVertex=function(){for(var w,T=arguments.length,R=new Array(T),C=0;C<T;C++)R[C]=arguments[C];if(l.default._validateParameters("quadraticVertex",R),this._renderer.isP3D)(w=this._renderer).quadraticVertex.apply(w,R);else{if(this._contourInited)return(w={}).x=R[0],w.y=R[1],w.x3=R[2],w.y3=R[3],w.type=u.QUADRATIC,this._contourVertices.push(w),this;if(0<c.length){v=!0;for(var P=[],I=0;I<R.length;I++)P[I]=R[I];P.isVert=!1,(g?f:c).push(P)}else l.default._friendlyError("vertex() must be used once before calling quadraticVertex()","quadraticVertex")}return this},l.default.prototype.vertex=function(w,T,R,C,P){var I;return this._renderer.isP3D?(I=this._renderer).vertex.apply(I,arguments):((I=[]).isVert=!0,I[0]=w,I[1]=T,I[2]=0,I[3]=0,I[4]=0,I[5]=this._renderer._getFill(),I[6]=this._renderer._getStroke(),R&&(I.moveTo=R),(g?(f.length===0&&(I.moveTo=!0),f):c).push(I)),this},l.default.prototype.normal=function(w,T,R){var C;return this._assert3d("normal"),l.default._validateParameters("normal",arguments),(C=this._renderer).normal.apply(C,arguments),this},l.default);o.default=b},{"../constants":269,"../main":280,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.slice":168,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],291:[function(r,i,o){},{}],292:[function(r,i,o){r("core-js/modules/es.object.assign"),r("core-js/modules/es.object.assign"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,r=(r=r("./main"))&&r.__esModule?r:{default:r},r.default.prototype.noLoop=function(){this._loop=!1},r.default.prototype.loop=function(){this._loop||(this._loop=!0,this._setupDone&&this._draw())},r.default.prototype.isLooping=function(){return this._loop},r.default.prototype.push=function(){this._styles.push({props:{_colorMode:this._colorMode},renderer:this._renderer.push()})},r.default.prototype.pop=function(){var s=this._styles.pop();s?(this._renderer.pop(s.renderer),Object.assign(this,s.props)):console.warn("pop() was called without matching push()")},r.default.prototype.redraw=function(s){if(!this._inUserDraw&&this._setupDone){var a=parseInt(s),l=((isNaN(a)||a<1)&&(a=1),this._isGlobal?window:this);if(typeof l.draw=="function"){l.setup===void 0&&l.scale(l._pixelDensity,l._pixelDensity);for(var u=0;u<a;u++){l.resetMatrix(),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._updateAccsOutput(),l._renderer.isP3D&&l._renderer._update(),l._setProperty("frameCount",l.frameCount+1),this.callRegisteredHooksFor("pre"),this._inUserDraw=!0;try{l.draw()}finally{this._inUserDraw=!1}this.callRegisteredHooksFor("post")}}}},r=r.default,o.default=r},{"./main":280,"core-js/modules/es.object.assign":181}],293:[function(r,i,o){r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.get-prototype-of"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.typed-array.uint8-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.get-prototype-of"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.typed-array.uint8-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var s=(r=r("./main"))&&r.__esModule?r:{default:r};function a(l){return function(u){if(Array.isArray(u)){for(var h=0,p=new Array(u.length);h<u.length;h++)p[h]=u[h];return p}}(l)||function(u){if(Symbol.iterator in Object(u)||Object.prototype.toString.call(u)==="[object Arguments]")return Array.from(u)}(l)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}s.default.prototype.applyMatrix=function(){var l=(arguments.length<=0?void 0:arguments[0])instanceof Object.getPrototypeOf(Uint8Array);return Array.isArray(arguments.length<=0?void 0:arguments[0])||l?(l=this._renderer).applyMatrix.apply(l,a(arguments.length<=0?void 0:arguments[0])):(l=this._renderer).applyMatrix.apply(l,arguments),this},s.default.prototype.resetMatrix=function(){return this._renderer.resetMatrix(),this},s.default.prototype.rotate=function(l,u){return s.default._validateParameters("rotate",arguments),this._renderer.rotate(this._toRadians(l),u),this},s.default.prototype.rotateX=function(l){return this._assert3d("rotateX"),s.default._validateParameters("rotateX",arguments),this._renderer.rotateX(this._toRadians(l)),this},s.default.prototype.rotateY=function(l){return this._assert3d("rotateY"),s.default._validateParameters("rotateY",arguments),this._renderer.rotateY(this._toRadians(l)),this},s.default.prototype.rotateZ=function(l){return this._assert3d("rotateZ"),s.default._validateParameters("rotateZ",arguments),this._renderer.rotateZ(this._toRadians(l)),this},s.default.prototype.scale=function(l,u,h){var p;return s.default._validateParameters("scale",arguments),l instanceof s.default.Vector?(l=(p=l).x,u=p.y,h=p.z):Array.isArray(l)&&(l=(p=l)[0],u=p[1],h=p[2]||1),isNaN(u)?u=h=l:isNaN(h)&&(h=1),this._renderer.scale(l,u,h),this},s.default.prototype.shearX=function(l){return s.default._validateParameters("shearX",arguments),l=this._toRadians(l),this._renderer.applyMatrix(1,0,Math.tan(l),1,0,0),this},s.default.prototype.shearY=function(l){return s.default._validateParameters("shearY",arguments),l=this._toRadians(l),this._renderer.applyMatrix(1,Math.tan(l),0,1,0,0),this},s.default.prototype.translate=function(l,u,h){return s.default._validateParameters("translate",arguments),this._renderer.isP3D?this._renderer.translate(l,u,h):this._renderer.translate(l,u),this},r=s.default,o.default=r},{"./main":280,"core-js/modules/es.array.from":161,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.get-prototype-of":185,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.typed-array.copy-within":210,"core-js/modules/es.typed-array.every":211,"core-js/modules/es.typed-array.fill":212,"core-js/modules/es.typed-array.filter":213,"core-js/modules/es.typed-array.find":215,"core-js/modules/es.typed-array.find-index":214,"core-js/modules/es.typed-array.for-each":218,"core-js/modules/es.typed-array.includes":219,"core-js/modules/es.typed-array.index-of":220,"core-js/modules/es.typed-array.iterator":223,"core-js/modules/es.typed-array.join":224,"core-js/modules/es.typed-array.last-index-of":225,"core-js/modules/es.typed-array.map":226,"core-js/modules/es.typed-array.reduce":228,"core-js/modules/es.typed-array.reduce-right":227,"core-js/modules/es.typed-array.reverse":229,"core-js/modules/es.typed-array.set":230,"core-js/modules/es.typed-array.slice":231,"core-js/modules/es.typed-array.some":232,"core-js/modules/es.typed-array.sort":233,"core-js/modules/es.typed-array.subarray":234,"core-js/modules/es.typed-array.to-locale-string":235,"core-js/modules/es.typed-array.to-string":236,"core-js/modules/es.typed-array.uint8-array":239,"core-js/modules/web.dom-collections.iterator":243}],294:[function(r,i,o){function s(h){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(h)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.ends-with"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.replace"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.ends-with"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.replace"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator");var a=(r=r("../core/main"))&&r.__esModule?r:{default:r};function l(h){return function(p){if(Array.isArray(p)){for(var c=0,f=new Array(p.length);c<p.length;c++)f[c]=p[c];return f}}(h)||function(p){if(Symbol.iterator in Object(p)||Object.prototype.toString.call(p)==="[object Arguments]")return Array.from(p)}(h)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function u(h){return(u=typeof Symbol=="function"&&s(Symbol.iterator)==="symbol"?function(p){return s(p)}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":s(p)})(h)}a.default.prototype.storeItem=function(h,p){typeof h!="string"&&console.log("The argument that you passed to storeItem() - ".concat(h," is not a string.")),h.endsWith("p5TypeID")&&console.log("The argument that you passed to storeItem() - ".concat(h," must not end with 'p5TypeID'.")),p===void 0&&console.log("You cannot store undefined variables using storeItem().");var c=u(p);switch(c){case"number":case"boolean":p=p.toString();break;case"object":p instanceof a.default.Color?c="p5.Color":p instanceof a.default.Vector&&(c="p5.Vector",p=[p.x,p.y,p.z]),p=JSON.stringify(p)}localStorage.setItem(h,p),h="".concat(h,"p5TypeID"),localStorage.setItem(h,c)},a.default.prototype.getItem=function(h){var p=localStorage.getItem(h),c=localStorage.getItem("".concat(h,"p5TypeID"));if(c===void 0)console.log("Unable to determine type of item stored under ".concat(h,"in local storage. Did you save the item with something other than setItem()?"));else if(p!==null)switch(c){case"number":p=parseFloat(p);break;case"boolean":p=p==="true";break;case"object":p=JSON.parse(p);break;case"p5.Color":p=JSON.parse(p),p=this.color.apply(this,l(p.levels));break;case"p5.Vector":p=JSON.parse(p),p=this.createVector.apply(this,l(p))}return p},a.default.prototype.clearStorage=function(){var h=this;Object.keys(localStorage).forEach(function(p){p.endsWith("p5TypeID")&&h.removeItem(p.replace("p5TypeID",""))})},a.default.prototype.removeItem=function(h){typeof h!="string"&&console.log("The argument that you passed to removeItem() - ".concat(h," is not a string.")),localStorage.removeItem(h),localStorage.removeItem("".concat(h,"p5TypeID"))}},{"../core/main":280,"core-js/modules/es.array.for-each":160,"core-js/modules/es.array.from":161,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.keys":186,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.ends-with":195,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.replace":201,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/web.dom-collections.for-each":242,"core-js/modules/web.dom-collections.iterator":243}],295:[function(r,i,o){function s(v){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(v)}function a(v){return(a=typeof Symbol=="function"&&s(Symbol.iterator)==="symbol"?function(g){return s(g)}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":s(g)})(v)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.get-prototype-of"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.reflect.construct"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.object.keys"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var l=(r=r("../core/main"))&&r.__esModule?r:{default:r};function u(v,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function");v.prototype=Object.create(g&&g.prototype,{constructor:{value:v,writable:!0,configurable:!0}}),g&&h(v,g)}function h(v,g){return(h=Object.setPrototypeOf||function(x,b){return x.__proto__=b,x})(v,g)}function p(v){return function(){var g,x=c(v),x=(g=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(g=c(this).constructor,Reflect.construct(x,arguments,g)):x.apply(this,arguments),this);if(!g||a(g)!=="object"&&typeof g!="function"){if(x!==void 0)return x;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return g}}function c(v){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(g){return g.__proto__||Object.getPrototypeOf(g)})(v)}function f(v,g){if(!(v instanceof g))throw new TypeError("Cannot call a class as a function")}function m(v,g){for(var x=0;x<g.length;x++){var b=g[x];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(v,b.key,b)}}function y(v,g,x){g&&m(v.prototype,g)}l.default.prototype.createStringDict=function(v,g){return l.default._validateParameters("createStringDict",arguments),new l.default.StringDict(v,g)},l.default.prototype.createNumberDict=function(v,g){return l.default._validateParameters("createNumberDict",arguments),new l.default.NumberDict(v,g)},l.default.TypedDict=function(){function v(g,x){return f(this,v),g instanceof Object?this.data=g:(this.data={},this.data[g]=x),this}return y(v,[{key:"size",value:function(){return Object.keys(this.data).length}},{key:"hasKey",value:function(g){return this.data.hasOwnProperty(g)}},{key:"get",value:function(g){if(this.data.hasOwnProperty(g))return this.data[g];console.log("".concat(g," does not exist in this Dictionary"))}},{key:"set",value:function(g,x){this._validate(x)?this.data[g]=x:console.log("Those values dont work for this dictionary type.")}},{key:"_addObj",value:function(g){for(var x in g)this.set(x,g[x])}},{key:"create",value:function(g,x){g instanceof Object&&x===void 0?this._addObj(g):g!==void 0?this.set(g,x):console.log("In order to create a new Dictionary entry you must pass an object or a key, value pair")}},{key:"clear",value:function(){this.data={}}},{key:"remove",value:function(g){if(!this.data.hasOwnProperty(g))throw new Error("".concat(g," does not exist in this Dictionary"));delete this.data[g]}},{key:"print",value:function(){for(var g in this.data)console.log("key:".concat(g," value:").concat(this.data[g]))}},{key:"saveTable",value:function(g){var x,b="";for(x in this.data)b+="".concat(x,",").concat(this.data[x],`
`);var w=new Blob([b],{type:"text/csv"});l.default.prototype.downloadFile(w,g||"mycsv","csv")}},{key:"saveJSON",value:function(g,x){l.default.prototype.saveJSON(this.data,g,x)}},{key:"_validate",value:function(g){return!0}}]),v}(),l.default.StringDict=function(){u(g,l.default.TypedDict);var v=p(g);function g(){f(this,g);for(var x=arguments.length,b=new Array(x),w=0;w<x;w++)b[w]=arguments[w];return v.call.apply(v,[this].concat(b))}return y(g,[{key:"_validate",value:function(x){return typeof x=="string"}}]),g}(),l.default.NumberDict=function(){u(g,l.default.TypedDict);var v=p(g);function g(){f(this,g);for(var x=arguments.length,b=new Array(x),w=0;w<x;w++)b[w]=arguments[w];return v.call.apply(v,[this].concat(b))}return y(g,[{key:"_validate",value:function(x){return typeof x=="number"}},{key:"add",value:function(x,b){this.data.hasOwnProperty(x)?this.data[x]+=b:console.log("The key - ".concat(x," does not exist in this dictionary."))}},{key:"sub",value:function(x,b){this.add(x,-b)}},{key:"mult",value:function(x,b){this.data.hasOwnProperty(x)?this.data[x]*=b:console.log("The key - ".concat(x," does not exist in this dictionary."))}},{key:"div",value:function(x,b){this.data.hasOwnProperty(x)?this.data[x]/=b:console.log("The key - ".concat(x," does not exist in this dictionary."))}},{key:"_valueTest",value:function(x){if(Object.keys(this.data).length===0)throw new Error("Unable to search for a minimum or maximum value on an empty NumberDict");if(Object.keys(this.data).length===1)return this.data[Object.keys(this.data)[0]];var b,w=this.data[Object.keys(this.data)[0]];for(b in this.data)this.data[b]*x<w*x&&(w=this.data[b]);return w}},{key:"minValue",value:function(){return this._valueTest(1)}},{key:"maxValue",value:function(){return this._valueTest(-1)}},{key:"_keyTest",value:function(x){if(Object.keys(this.data).length===0)throw new Error("Unable to use minValue on an empty NumberDict");if(Object.keys(this.data).length===1)return Object.keys(this.data)[0];for(var b=Object.keys(this.data)[0],w=1;w<Object.keys(this.data).length;w++)Object.keys(this.data)[w]*x<b*x&&(b=Object.keys(this.data)[w]);return b}},{key:"minKey",value:function(){return this._keyTest(1)}},{key:"maxKey",value:function(){return this._keyTest(-1)}}]),g}(),r=l.default.TypedDict,o.default=r},{"../core/main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.get-prototype-of":185,"core-js/modules/es.object.keys":186,"core-js/modules/es.object.to-string":187,"core-js/modules/es.reflect.construct":189,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/web.dom-collections.iterator":243}],296:[function(r,i,o){function s(b){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w})(b)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.every"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.function.name"),r("core-js/modules/es.object.assign"),r("core-js/modules/es.object.get-prototype-of"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.reflect.construct"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.trim"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/web.url"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.every"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.function.name"),r("core-js/modules/es.object.assign"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.trim"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/web.url"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var a=(r=r("../core/main"))&&r.__esModule?r:{default:r};function l(b,w){for(var T=0;T<w.length;T++){var R=w[T];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(b,R.key,R)}}function u(b,w,T){w&&l(b.prototype,w),T&&l(b,T)}function h(b,w){return(h=Object.setPrototypeOf||function(T,R){return T.__proto__=R,T})(b,w)}function p(b){return function(){var w,T,R=f(b);return w=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(w=f(this).constructor,Reflect.construct(R,arguments,w)):R.apply(this,arguments),R=this,!(T=w)||y(T)!=="object"&&typeof T!="function"?c(R):T}}function c(b){if(b===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b}function f(b){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(w){return w.__proto__||Object.getPrototypeOf(w)})(b)}function m(b,w){if(!(b instanceof w))throw new TypeError("Cannot call a class as a function")}function y(b){return(y=typeof Symbol=="function"&&s(Symbol.iterator)==="symbol"?function(w){return s(w)}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":s(w)})(b)}function v(b,w,T){return(w._userNode||document.body).appendChild(b),T=new(T?a.default.MediaElement:a.default.Element)(b,w),w._elements.push(T),T}function g(b,I,T,R){var C=document.createElement(I),P=(typeof(T=T||"")=="string"&&(T=[T]),!0),I=!1,D=void 0;try{for(var j,N=T[Symbol.iterator]();!(P=(j=N.next()).done);P=!0){var O=j.value,W=document.createElement("source");W.setAttribute("src",O),C.appendChild(W)}}catch(J){I=!0,D=J}finally{try{P||N.return==null||N.return()}finally{if(I)throw D}}typeof R=="function"&&C.addEventListener("canplaythrough",function J(){R(),C.removeEventListener("canplaythrough",J)});var X=v(C,b,!0);return X.loadedmetadata=!1,C.addEventListener("loadedmetadata",function(){X.width=C.videoWidth,X.height=C.videoHeight,X.elt.width===0&&(X.elt.width=C.videoWidth),X.elt.height===0&&(X.elt.height=C.videoHeight),X.presetPlaybackRate&&(X.elt.playbackRate=X.presetPlaybackRate,delete X.presetPlaybackRate),X.loadedmetadata=!0}),X}a.default.prototype.select=function(b,w){return a.default._validateParameters("select",arguments),w=this._getContainer(w).querySelector(b),w?this._wrapElement(w):null},a.default.prototype.selectAll=function(b,w){a.default._validateParameters("selectAll",arguments);var T=[],R=this._getContainer(w).querySelectorAll(b);if(R)for(var C=0;C<R.length;C++){var P=this._wrapElement(R[C]);T.push(P)}return T},a.default.prototype._getContainer=function(b){var w=document;return typeof b=="string"?w=document.querySelector(b)||document:b instanceof a.default.Element?w=b.elt:b instanceof HTMLElement&&(w=b),w},a.default.prototype._wrapElement=function(b){var w,T=Array.prototype.slice.call(b.children);return b.tagName==="INPUT"&&b.type==="checkbox"?((w=new a.default.Element(b,this)).checked=function(){return arguments.length===0?this.elt.checked:(this.elt.checked=!(arguments.length<=0||!arguments[0]),this)},w):b.tagName==="VIDEO"||b.tagName==="AUDIO"?new a.default.MediaElement(b,this):b.tagName==="SELECT"?this.createSelect(new a.default.Element(b,this)):0<T.length&&T.every(function(R){return R.tagName==="INPUT"||R.tagName==="LABEL"})?this.createRadio(new a.default.Element(b,this)):new a.default.Element(b,this)},a.default.prototype.removeElements=function(b){a.default._validateParameters("removeElements",arguments),this._elements.filter(function(w){return!(w.elt instanceof HTMLCanvasElement)}).map(function(w){return w.remove()})},a.default.Element.prototype.changed=function(b){return a.default.Element._adjustListener("change",b,this),this},a.default.Element.prototype.input=function(b){return a.default.Element._adjustListener("input",b,this),this},a.default.prototype.createDiv=function(){var b=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",w=document.createElement("div");return w.innerHTML=b,v(w,this)},a.default.prototype.createP=function(){var b=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",w=document.createElement("p");return w.innerHTML=b,v(w,this)},a.default.prototype.createSpan=function(){var b=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",w=document.createElement("span");return w.innerHTML=b,v(w,this)},a.default.prototype.createImg=function(){a.default._validateParameters("createImg",arguments);var b,w=document.createElement("img"),T=arguments;return 1<T.length&&typeof T[1]=="string"&&(w.alt=T[1]),2<T.length&&typeof T[2]=="string"&&(w.crossOrigin=T[2]),w.src=T[0],b=v(w,this),w.addEventListener("load",function(){b.width=w.offsetWidth||w.width,b.height=w.offsetHeight||w.height;var R=T[T.length-1];typeof R=="function"&&R(b)}),b},a.default.prototype.createA=function(b,w,T){a.default._validateParameters("createA",arguments);var R=document.createElement("a");return R.href=b,R.innerHTML=w,T&&(R.target=T),v(R,this)},a.default.prototype.createSlider=function(b,w,T,R){a.default._validateParameters("createSlider",arguments);var C=document.createElement("input");return C.type="range",C.min=b,C.max=w,R===0?C.step=1e-18:R&&(C.step=R),typeof T=="number"&&(C.value=T),v(C,this)},a.default.prototype.createButton=function(b,w){a.default._validateParameters("createButton",arguments);var T=document.createElement("button");return T.innerHTML=b,w&&(T.value=w),v(T,this)},a.default.prototype.createCheckbox=function(){for(var b=arguments.length,w=new Array(b),T=0;T<b;T++)w[T]=arguments[T];a.default._validateParameters("createCheckbox",w);var R=document.createElement("div"),C=document.createElement("input"),P=(C.type="checkbox",document.createElement("label")),I=(P.appendChild(C),R.appendChild(P),v(R,this));return I.checked=function(){var D=I.elt.firstElementChild.getElementsByTagName("input")[0];if(D){if(arguments.length===0)return D.checked;D.checked=!(arguments.length<=0||!arguments[0])}return I},this.value=function(D){return I.value=D,this},w[0]&&(I.value(w[0]),(R=document.createElement("span")).innerHTML=w[0],P.appendChild(R)),w[1]&&(C.checked=!0),I},a.default.prototype.createSelect=function(){for(var b,w=arguments.length,T=new Array(w),R=0;R<w;R++)T[R]=arguments[R];a.default._validateParameters("createSelect",T);var C,P=T[0];return P instanceof a.default.Element&&P.elt instanceof HTMLSelectElement?this.elt=(b=P).elt:P instanceof HTMLSelectElement?(b=v(P,this),this.elt=P):(C=document.createElement("select"),P&&typeof P=="boolean"&&C.setAttribute("multiple","true"),b=v(C,this),this.elt=C),b.option=function(I,D){var j;if(I!==void 0){for(var N,O=0;O<this.elt.length;O+=1)if(this.elt[O].textContent===I){j=O;break}j!==void 0?D===!1?this.elt.remove(j):this.elt[j].value=D:((N=document.createElement("option")).textContent=I,N.value=D===void 0?I:D,this.elt.appendChild(N),this._pInst._elements.push(N))}},b.selected=function(I){if(I!==void 0){for(var D=0;D<this.elt.length;D+=1)this.elt[D].value.toString()===I.toString()&&(this.elt.selectedIndex=D);return this}if(this.elt.getAttribute("multiple")){var j=[],N=!0,O=!1,W=void 0;try{for(var X,J=this.elt.selectedOptions[Symbol.iterator]();!(N=(X=J.next()).done);N=!0){var ee=X.value;j.push(ee.value)}}catch(V){O=!0,W=V}finally{try{N||J.return==null||J.return()}finally{if(O)throw W}}return j}return this.elt.value},b.disable=function(I){if(typeof I=="string")for(var D=0;D<this.elt.length;D++)this.elt[D].value.toString()===I&&(this.elt[D].disabled=!0,this.elt[D].selected=!1);else this.elt.disabled=!0;return this},b.enable=function(I){if(typeof I=="string")for(var D=0;D<this.elt.length;D++)this.elt[D].value.toString()===I&&(this.elt[D].disabled=!1,this.elt[D].selected=!1);else{this.elt.disabled=!1;for(var j=0;j<this.elt.length;j++)this.elt[j].disabled=!1,this.elt[j].selected=!1}return this},b},a.default.prototype.createRadio=function(){function b(I){return I instanceof HTMLInputElement&&I.type==="radio"}function w(I){return I instanceof HTMLLabelElement}var T,R,C,P=arguments.length<=0?void 0:arguments[0];return P instanceof a.default.Element&&(P.elt instanceof HTMLDivElement||P.elt instanceof HTMLSpanElement)?(T=P,this.elt=P.elt):P instanceof HTMLDivElement||P instanceof HTMLSpanElement?(T=v(P,this),R=this.elt=P,typeof(arguments.length<=1?void 0:arguments[1])=="string"&&(C=arguments.length<=1?void 0:arguments[1])):(typeof P=="string"&&(C=P),R=document.createElement("div"),T=v(R,this),this.elt=R),T._name=C||"radioOption",T._getOptionsArray=function(){return Array.from(this.elt.children).filter(function(I){return b(I)||w(I)&&b(I.firstElementChild)}).map(function(I){return b(I)?I:I.firstElementChild})},T.option=function(I,D){var j,N,O,W=!0,X=!1,J=void 0;try{for(var ee,V=T._getOptionsArray()[Symbol.iterator]();!(W=(ee=V.next()).done);W=!0){var q=ee.value;if(q.value===I){j=q;break}}}catch(Y){X=!0,J=Y}finally{try{W||V.return==null||V.return()}finally{if(X)throw J}}return j===void 0&&((j=document.createElement("input")).setAttribute("type","radio"),j.setAttribute("value",I)),j.setAttribute("name",T._name),w(j.parentElement)?N=j.parentElement:(N=document.createElement("label")).insertAdjacentElement("afterbegin",j),N.lastElementChild instanceof HTMLSpanElement?O=N.lastElementChild:(O=document.createElement("span"),j.insertAdjacentElement("afterend",O)),O.innerHTML=D===void 0?I:D,this.elt.appendChild(N),j},T.remove=function(I){var D=!0,j=!1,N=void 0;try{for(var O,W=T._getOptionsArray()[Symbol.iterator]();!(D=(O=W.next()).done);D=!0){var X=O.value;if(X.value===I)return void(w(X.parentElement)?X.parentElement:X).remove()}}catch(J){j=!0,N=J}finally{try{D||W.return==null||W.return()}finally{if(j)throw N}}},T.value=function(){var I="",D=!0,j=!1,N=void 0;try{for(var O,W=T._getOptionsArray()[Symbol.iterator]();!(D=(O=W.next()).done);D=!0){var X=O.value;if(X.checked){I=X.value;break}}}catch(J){j=!0,N=J}finally{try{D||W.return==null||W.return()}finally{if(j)throw N}}return I},T.selected=function(I){var D=null;if(I===void 0){var j=!0,N=!1,O=void 0;try{for(var W,X=T._getOptionsArray()[Symbol.iterator]();!(j=(W=X.next()).done);j=!0){var J=W.value;if(J.checked){D=J;break}}}catch(Z){N=!0,O=Z}finally{try{j||X.return==null||X.return()}finally{if(N)throw O}}}else{T._getOptionsArray().forEach(function(B){B.checked=!1,B.removeAttribute("checked")});var ee=!0,N=!1,O=void 0;try{for(var V,q=T._getOptionsArray()[Symbol.iterator]();!(ee=(V=q.next()).done);ee=!0){var Y=V.value;Y.value===I&&(Y.setAttribute("checked",!0),Y.checked=!0,D=Y)}}catch(B){N=!0,O=B}finally{try{ee||q.return==null||q.return()}finally{if(N)throw O}}}return D},T.disable=function(){var I=!(0<arguments.length&&arguments[0]!==void 0)||arguments[0],D=!0,j=!1,N=void 0;try{for(var O,W=T._getOptionsArray()[Symbol.iterator]();!(D=(O=W.next()).done);D=!0)O.value.setAttribute("disabled",I)}catch(X){j=!0,N=X}finally{try{D||W.return==null||W.return()}finally{if(j)throw N}}},T},a.default.prototype.createColorPicker=function(b){a.default._validateParameters("createColorPicker",arguments);var w=document.createElement("input");return w.type="color",b?b instanceof a.default.Color?w.value=b.toString("#rrggbb"):(a.default.prototype._colorMode="rgb",a.default.prototype._colorMaxes={rgb:[255,255,255,255],hsb:[360,100,100,1],hsl:[360,100,100,1]},w.value=a.default.prototype.color(b).toString("#rrggbb")):w.value="#000000",(w=v(w,this)).color=function(){return b&&(b.mode&&(a.default.prototype._colorMode=b.mode),b.maxes&&(a.default.prototype._colorMaxes=b.maxes)),a.default.prototype.color(this.elt.value)},w},a.default.prototype.createInput=function(){var b=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",w=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"text",T=(a.default._validateParameters("createInput",arguments),document.createElement("input"));return T.setAttribute("value",b),T.setAttribute("type",w),v(T,this)},a.default.prototype.createFileInput=function(b){var w,T=1<arguments.length&&arguments[1]!==void 0&&arguments[1];if(a.default._validateParameters("createFileInput",arguments),window.File&&window.FileReader&&window.FileList&&window.Blob)return(w=document.createElement("input")).setAttribute("type","file"),T&&w.setAttribute("multiple",!0),w.addEventListener("change",function(R){var C=!0,P=!1,I=void 0;try{for(var D,j=R.target.files[Symbol.iterator]();!(C=(D=j.next()).done);C=!0){var N=D.value;a.default.File._load(N,b)}}catch(O){P=!0,I=O}finally{try{C||j.return==null||j.return()}finally{if(P)throw I}}},!1),v(w,this);console.log("The File APIs are not fully supported in this browser. Cannot create element.")},a.default.prototype.createVideo=function(b,w){return a.default._validateParameters("createVideo",arguments),g(this,"video",b,w)},a.default.prototype.createAudio=function(b,w){return a.default._validateParameters("createAudio",arguments),g(this,"audio",b,w)},a.default.prototype.VIDEO="video",a.default.prototype.AUDIO="audio",navigator.mediaDevices===void 0&&(navigator.mediaDevices={}),navigator.mediaDevices.getUserMedia===void 0&&(navigator.mediaDevices.getUserMedia=function(b){var w=navigator.webkitGetUserMedia||navigator.mozGetUserMedia;return w?new Promise(function(T,R){w.call(navigator,b,T,R)}):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}),a.default.prototype.createCapture=function(){for(var b=arguments.length,w=new Array(b),T=0;T<b;T++)w[T]=arguments[T];if(a.default._validateParameters("createCapture",w),!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new DOMException("getUserMedia not supported in this browser");for(var R,C=!0,P=!0,I=!1,D=0,j=w;D<j.length;D++){var N=j[D];N===a.default.prototype.VIDEO?P=!1:N===a.default.prototype.AUDIO?C=!1:y(N)==="object"?(N.flipped!==void 0&&(I=N.flipped,delete N.flipped),O=Object.assign({},O,N)):typeof N=="function"&&(R=N)}var O=Object.assign({},{video:C,audio:P},O),W=document.createElement("video"),X=(W.setAttribute("playsinline",""),navigator.mediaDevices.getUserMedia(O).then(function(J){try{"srcObject"in W?W.srcObject=J:W.src=window.URL.createObjectURL(J)}catch{W.src=J}}).catch(function(J){J.name==="NotFoundError"&&a.default._friendlyError("No webcam found on this device","createCapture"),J.name==="NotAllowedError"&&a.default._friendlyError("Access to the camera was denied","createCapture"),console.error(J)}),v(W,this,!0));return X.loadedmetadata=!1,W.addEventListener("loadedmetadata",function(){W.play(),W.width?(X.width=W.width,X.height=W.height,I&&(X.elt.style.transform="scaleX(-1)")):(X.width=X.elt.width=W.videoWidth,X.height=X.elt.height=W.videoHeight),X.loadedmetadata=!0,R&&R(W.srcObject)}),X.flipped=I,X},a.default.prototype.createElement=function(b,w){return a.default._validateParameters("createElement",arguments),b=document.createElement(b),w!==void 0&&(b.innerHTML=w),v(b,this)},a.default.Element.prototype.addClass=function(b){return this.elt.className?this.hasClass(b)||(this.elt.className=this.elt.className+" "+b):this.elt.className=b,this},a.default.Element.prototype.removeClass=function(b){return this.elt.classList.remove(b),this},a.default.Element.prototype.hasClass=function(b){return this.elt.classList.contains(b)},a.default.Element.prototype.toggleClass=function(b){return this.elt.classList.contains(b)?this.elt.classList.remove(b):this.elt.classList.add(b),this},a.default.Element.prototype.child=function(b){return b===void 0?this.elt.childNodes:(typeof b=="string"?(b[0]==="#"&&(b=b.substring(1)),b=document.getElementById(b)):b instanceof a.default.Element&&(b=b.elt),b instanceof HTMLElement&&this.elt.appendChild(b),this)},a.default.Element.prototype.center=function(b){var w=this.elt.style.display,T=this.elt.style.display==="none",R=this.parent().style.display==="none",C={x:this.elt.offsetLeft,y:this.elt.offsetTop},P=(T&&this.show(),R&&this.parent().show(),this.elt.style.display="block",this.position(0,0),Math.abs(this.parent().offsetWidth-this.elt.offsetWidth)),I=Math.abs(this.parent().offsetHeight-this.elt.offsetHeight);return b==="both"||b===void 0?this.position(P/2+this.parent().offsetLeft,I/2+this.parent().offsetTop):b==="horizontal"?this.position(P/2+this.parent().offsetLeft,C.y):b==="vertical"&&this.position(C.x,I/2+this.parent().offsetTop),this.style("display",w),T&&this.hide(),R&&this.parent().hide(),this},a.default.Element.prototype.html=function(){return arguments.length===0?this.elt.innerHTML:(arguments.length<=1||!arguments[1]?this.elt.innerHTML=arguments.length<=0?void 0:arguments[0]:this.elt.insertAdjacentHTML("beforeend",arguments.length<=0?void 0:arguments[0]),this)},a.default.Element.prototype.position=function(){return arguments.length===0?{x:this.elt.offsetLeft,y:this.elt.offsetTop}:(this.elt.style.position=(arguments.length<=2?void 0:arguments[2])!=="static"&&(arguments.length<=2?void 0:arguments[2])!=="fixed"&&(arguments.length<=2?void 0:arguments[2])!=="relative"&&(arguments.length<=2?void 0:arguments[2])!=="sticky"&&(arguments.length<=2?void 0:arguments[2])!=="initial"&&(arguments.length<=2?void 0:arguments[2])!=="inherit"?"absolute":arguments.length<=2?void 0:arguments[2],this.elt.style.left=(arguments.length<=0?void 0:arguments[0])+"px",this.elt.style.top=(arguments.length<=1?void 0:arguments[1])+"px",this.x=arguments.length<=0?void 0:arguments[0],this.y=arguments.length<=1?void 0:arguments[1],this)},a.default.Element.prototype._translate=function(){this.elt.style.position="absolute";var b="";return this.elt.style.transform&&(b=(b=this.elt.style.transform.replace(/translate3d\(.*\)/g,"")).replace(/translate[X-Z]?\(.*\)/g,"")),arguments.length===2?this.elt.style.transform="translate("+(arguments.length<=0?void 0:arguments[0])+"px, "+(arguments.length<=1?void 0:arguments[1])+"px)":2<arguments.length&&(this.elt.style.transform="translate3d("+(arguments.length<=0?void 0:arguments[0])+"px,"+(arguments.length<=1?void 0:arguments[1])+"px,"+(arguments.length<=2?void 0:arguments[2])+"px)",this.elt.parentElement.style.perspective=arguments.length===3?"1000px":(arguments.length<=3?void 0:arguments[3])+"px"),this.elt.style.transform+=b,this},a.default.Element.prototype._rotate=function(){var b="";return this.elt.style.transform&&(b=(b=this.elt.style.transform.replace(/rotate3d\(.*\)/g,"")).replace(/rotate[X-Z]?\(.*\)/g,"")),arguments.length===1?this.elt.style.transform="rotate("+(arguments.length<=0?void 0:arguments[0])+"deg)":arguments.length===2?this.elt.style.transform="rotate("+(arguments.length<=0?void 0:arguments[0])+"deg, "+(arguments.length<=1?void 0:arguments[1])+"deg)":arguments.length===3&&(this.elt.style.transform="rotateX("+(arguments.length<=0?void 0:arguments[0])+"deg)",this.elt.style.transform+="rotateY("+(arguments.length<=1?void 0:arguments[1])+"deg)",this.elt.style.transform+="rotateZ("+(arguments.length<=2?void 0:arguments[2])+"deg)"),this.elt.style.transform+=b,this},a.default.Element.prototype.style=function(b,w){if((w=w instanceof a.default.Color?"rgba("+w.levels[0]+","+w.levels[1]+","+w.levels[2]+","+w.levels[3]/255+")":w)===void 0){if(b.indexOf(":")===-1)return window.getComputedStyle(this.elt).getPropertyValue(b);for(var T=b.split(";"),R=0;R<T.length;R++){var C=T[R].split(":");C[0]&&C[1]&&(this.elt.style[C[0].trim()]=C[1].trim())}}else this.elt.style[b]=w,b!=="width"&&b!=="height"&&b!=="left"&&b!=="top"||(w=window.getComputedStyle(this.elt).getPropertyValue(b).replace(/[^\d.]/g,""),this[b]=Math.round(parseFloat(w,10)));return this},a.default.Element.prototype.attribute=function(b,w){if(this.elt.firstChild==null||this.elt.firstChild.type!=="checkbox"&&this.elt.firstChild.type!=="radio")return w===void 0?this.elt.getAttribute(b):(this.elt.setAttribute(b,w),this);if(w===void 0)return this.elt.firstChild.getAttribute(b);for(var T=0;T<this.elt.childNodes.length;T++)this.elt.childNodes[T].setAttribute(b,w)},a.default.Element.prototype.removeAttribute=function(b){if(this.elt.firstChild!=null&&(this.elt.firstChild.type==="checkbox"||this.elt.firstChild.type==="radio"))for(var w=0;w<this.elt.childNodes.length;w++)this.elt.childNodes[w].removeAttribute(b);return this.elt.removeAttribute(b),this},a.default.Element.prototype.value=function(){return 0<arguments.length?(this.elt.value=arguments.length<=0?void 0:arguments[0],this):this.elt.type==="range"?parseFloat(this.elt.value):this.elt.value},a.default.Element.prototype.show=function(){return this.elt.style.display="block",this},a.default.Element.prototype.hide=function(){return this.elt.style.display="none",this},a.default.Element.prototype.size=function(b,w){if(arguments.length===0)return{width:this.elt.offsetWidth,height:this.elt.offsetHeight};var T=b,R=w,C=a.default.prototype.AUTO;if(T!==C||R!==C){if(T===C?T=w*this.width/this.height:R===C&&(R=b*this.height/this.width),this.elt instanceof HTMLCanvasElement){var P,I={},D=this.elt.getContext("2d");for(P in D)I[P]=D[P];for(P in this.elt.setAttribute("width",T*this._pInst._pixelDensity),this.elt.setAttribute("height",R*this._pInst._pixelDensity),this.elt.style.width=T+"px",this.elt.style.height=R+"px",this._pInst.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),I)this.elt.getContext("2d")[P]=I[P]}else this.elt.style.width=T+"px",this.elt.style.height=R+"px",this.elt.width=T,this.elt.height=R;this.width=T,this.height=R,this._pInst&&this._pInst._curElement&&this._pInst._curElement.elt===this.elt&&(this._pInst._setProperty("width",T),this._pInst._setProperty("height",R))}return this},a.default.Element.prototype.remove=function(){this instanceof a.default.MediaElement&&(this.stop(),(w=this.elt.srcObject)!==null&&w.getTracks().forEach(function(T){T.stop()}));var b,w=this._pInst._elements.indexOf(this);for(b in w!==-1&&this._pInst._elements.splice(w,1),this._events)this.elt.removeEventListener(b,this._events[b]);this.elt&&this.elt.parentNode&&this.elt.parentNode.removeChild(this.elt)},a.default.Element.prototype.drop=function(b,w){var T;return window.File&&window.FileReader&&window.FileList&&window.Blob?(this._dragDisabled||(this._dragDisabled=!0,this.elt.addEventListener("dragover",T=function(R){R.preventDefault()}),this.elt.addEventListener("dragleave",T)),a.default.Element._attachListener("drop",function(C){C.preventDefault(),typeof w=="function"&&w.call(this,C);var C=C.dataTransfer.files,P=!0,I=!1,D=void 0;try{for(var j,N=C[Symbol.iterator]();!(P=(j=N.next()).done);P=!0){var O=j.value;a.default.File._load(O,b)}}catch(W){I=!0,D=W}finally{try{P||N.return==null||N.return()}finally{if(I)throw D}}},this)):console.log("The File APIs are not fully supported in this browser."),this},a.default.Element.prototype.draggable=function(b){var w,T="ontouchstart"in window,R=0,C=0,P=0,I=0,D=T?"touchend":"mouseup",j=T?"touchmove":"mousemove";function N(W){var X;W=W||window.event,I=T?(X=W.changedTouches,R=P-parseInt(X[0].clientX),C=I-parseInt(X[0].clientY),P=parseInt(X[0].clientX),parseInt(X[0].clientY)):(R=P-parseInt(W.clientX),C=I-parseInt(W.clientY),P=parseInt(W.clientX),parseInt(W.clientY)),b.style.left=b.offsetLeft-R+"px",b.style.top=b.offsetTop-C+"px"}function O(){document.removeEventListener(D,O,!1),document.removeEventListener(j,N,!1)}return b===void 0?w=b=this.elt:b!==this.elt&&b.elt!==this.elt&&(b=b.elt,w=this.elt),w.addEventListener(T?"touchstart":"mousedown",function(W){{var X;W=W||window.event,I=T?(X=W.changedTouches,P=parseInt(X[0].clientX),parseInt(X[0].clientY)):(P=parseInt(W.clientX),parseInt(W.clientY))}return document.addEventListener(D,O,!1),document.addEventListener(j,N,!1),!1},!1),w.style.cursor="move",this};function x(b,w,T,R){m(this,x),this.callback=b,this.time=w,this.id=T,this.val=R}r=function(b){var w=R;if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function");w.prototype=Object.create(b&&b.prototype,{constructor:{value:w,writable:!0,configurable:!0}}),b&&h(w,b);var T=p(R);function R(C,P){m(this,R);var I=c(P=T.call(this,C,P));return P.elt.crossOrigin="anonymous",P._prevTime=0,P._cueIDCounter=0,P._cues=[],P.pixels=[],P._pixelsState=c(P),P._pixelDensity=1,P._modified=!1,P._frameOnCanvas=-1,Object.defineProperty(I,"src",{get:function(){var D=I.elt.children[0].src,j=I.elt.src===window.location.href?"":I.elt.src;return D===window.location.href?j:D},set:function(D){for(var j=0;j<I.elt.children.length;j++)I.elt.removeChild(I.elt.children[j]);var N=document.createElement("source");N.src=D,C.appendChild(N),I.elt.src=D,I.modified=!0}}),I._onended=function(){},I.elt.onended=function(){I._onended(I)},P}return u(R,[{key:"play",value:function(){var C;return this.elt.currentTime===this.elt.duration&&(this.elt.currentTime=0),1<this.elt.readyState||this.elt.load(),(C=this.elt.play())&&C.catch&&C.catch(function(P){P.name==="NotAllowedError"?console.error(P):console.error("Media play method encountered an unexpected error",P)}),this}},{key:"stop",value:function(){return this.elt.pause(),this.elt.currentTime=0,this}},{key:"pause",value:function(){return this.elt.pause(),this}},{key:"loop",value:function(){return this.elt.setAttribute("loop",!0),this.play(),this}},{key:"noLoop",value:function(){return this.elt.removeAttribute("loop"),this}},{key:"_setupAutoplayFailDetection",value:function(){var C=setTimeout(function(){console.error(e)},500);this.elt.addEventListener("play",function(){return clearTimeout(C)},{passive:!0,once:!0})}},{key:"autoplay",value:function(C){var P=this,I=this.elt.getAttribute("autoplay");return this.elt.setAttribute("autoplay",C),C&&!I&&(C=function(){return P._setupAutoplayFailDetection()},this.elt.readyState===4?C():this.elt.addEventListener("canplay",C,{passive:!0,once:!0})),this}},{key:"volume",value:function(C){if(C===void 0)return this.elt.volume;this.elt.volume=C}},{key:"speed",value:function(C){if(C===void 0)return this.presetPlaybackRate||this.elt.playbackRate;this.loadedmetadata?this.elt.playbackRate=C:this.presetPlaybackRate=C}},{key:"time",value:function(C){return C===void 0?this.elt.currentTime:(this.elt.currentTime=C,this)}},{key:"duration",value:function(){return this.elt.duration}},{key:"_ensureCanvas",value:function(){this.canvas||(this.canvas=document.createElement("canvas"),this.drawingContext=this.canvas.getContext("2d"),this.setModified(!0));var C=this._frameOnCanvas!==this._pInst.frameCount;this.loadedmetadata&&C&&(this.canvas.width!==this.elt.width&&(this.canvas.width=this.elt.width,this.canvas.height=this.elt.height,this.width=this.canvas.width,this.height=this.canvas.height),this.drawingContext.clearRect(0,0,this.canvas.width,this.canvas.height),this.flipped===!0&&(this.drawingContext.save(),this.drawingContext.scale(-1,1),this.drawingContext.translate(-this.canvas.width,0)),this.drawingContext.drawImage(this.elt,0,0,this.canvas.width,this.canvas.height),this.flipped===!0&&this.drawingContext.restore(),this.setModified(!0),this._frameOnCanvas=this._pInst.frameCount)}},{key:"loadPixels",value:function(){this._ensureCanvas();for(var C=arguments.length,P=new Array(C),I=0;I<C;I++)P[I]=arguments[I];return a.default.Renderer2D.prototype.loadPixels.apply(this,P)}},{key:"updatePixels",value:function(C,P,I,D){return this.loadedmetadata&&(this._ensureCanvas(),a.default.Renderer2D.prototype.updatePixels.call(this,C,P,I,D)),this.setModified(!0),this}},{key:"get",value:function(){this._ensureCanvas();for(var C=arguments.length,P=new Array(C),I=0;I<C;I++)P[I]=arguments[I];return a.default.Renderer2D.prototype.get.apply(this,P)}},{key:"_getPixel",value:function(){this.loadPixels();for(var C=arguments.length,P=new Array(C),I=0;I<C;I++)P[I]=arguments[I];return a.default.Renderer2D.prototype._getPixel.apply(this,P)}},{key:"set",value:function(C,P,I){this.loadedmetadata&&(this._ensureCanvas(),a.default.Renderer2D.prototype.set.call(this,C,P,I),this.setModified(!0))}},{key:"copy",value:function(){this._ensureCanvas();for(var C=arguments.length,P=new Array(C),I=0;I<C;I++)P[I]=arguments[I];a.default.prototype.copy.apply(this,P)}},{key:"mask",value:function(){this.loadPixels(),this.setModified(!0);for(var C=arguments.length,P=new Array(C),I=0;I<C;I++)P[I]=arguments[I];a.default.Image.prototype.mask.apply(this,P)}},{key:"isModified",value:function(){return this._modified}},{key:"setModified",value:function(C){this._modified=C}},{key:"onended",value:function(C){return this._onended=C,this}},{key:"connect",value:function(C){var P,I;if(typeof a.default.prototype.getAudioContext=="function")P=a.default.prototype.getAudioContext(),I=a.default.soundOut.input;else try{I=(P=C.context).destination}catch{throw"connect() is meant to be used with Web Audio API or p5.sound.js"}this.audioSourceNode||(this.audioSourceNode=P.createMediaElementSource(this.elt),this.audioSourceNode.connect(I)),C?C.input?this.audioSourceNode.connect(C.input):this.audioSourceNode.connect(C):this.audioSourceNode.connect(I)}},{key:"disconnect",value:function(){if(!this.audioSourceNode)throw"nothing to disconnect";this.audioSourceNode.disconnect()}},{key:"showControls",value:function(){this.elt.style["text-align"]="inherit",this.elt.controls=!0}},{key:"hideControls",value:function(){this.elt.controls=!1}},{key:"addCue",value:function(C,j,I){var D=this._cueIDCounter++,j=new x(j,C,D,I);return this._cues.push(j),this.elt.ontimeupdate||(this.elt.ontimeupdate=this._onTimeUpdate.bind(this)),D}},{key:"removeCue",value:function(C){for(var P=0;P<this._cues.length;P++)this._cues[P].id===C&&(console.log(C),this._cues.splice(P,1));this._cues.length===0&&(this.elt.ontimeupdate=null)}},{key:"clearCues",value:function(){this._cues=[],this.elt.ontimeupdate=null}},{key:"_onTimeUpdate",value:function(){for(var C=this.time(),P=0;P<this._cues.length;P++){var I=this._cues[P].time,D=this._cues[P].val;this._prevTime<I&&I<=C&&this._cues[P].callback(D)}this._prevTime=C}}]),R}(a.default.Element),a.default.MediaElement=r,r=function(){function b(w,T){m(this,b),this.file=w,this._pInst=T,T=w.type.split("/"),this.type=T[0],this.subtype=T[1],this.name=w.name,this.size=w.size,this.data=void 0}return u(b,null,[{key:"_createLoader",value:function(w,T){var R=new FileReader;return R.onload=function(C){var P,I=new a.default.File(w);I.file.type==="application/json"?I.data=JSON.parse(C.target.result):I.file.type==="text/xml"?(P=new DOMParser().parseFromString(C.target.result,"text/xml"),I.data=new a.default.XML(P.documentElement)):I.data=C.target.result,T(I)},R}},{key:"_load",value:function(w,T){var R;/^text\//.test(w.type)||w.type==="application/json"?a.default.File._createLoader(w,T).readAsText(w):/^(video|audio)\//.test(w.type)?((R=new a.default.File(w)).data=URL.createObjectURL(w),T(R)):a.default.File._createLoader(w,T).readAsDataURL(w)}}]),b}(),a.default.File=r,r=a.default,o.default=r},{"../core/main":280,"core-js/modules/es.array.every":154,"core-js/modules/es.array.filter":156,"core-js/modules/es.array.for-each":160,"core-js/modules/es.array.from":161,"core-js/modules/es.array.index-of":163,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.map":167,"core-js/modules/es.array.slice":168,"core-js/modules/es.array.splice":170,"core-js/modules/es.function.name":173,"core-js/modules/es.object.assign":181,"core-js/modules/es.object.get-prototype-of":185,"core-js/modules/es.object.to-string":187,"core-js/modules/es.promise":188,"core-js/modules/es.reflect.construct":189,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.replace":201,"core-js/modules/es.string.split":203,"core-js/modules/es.string.trim":206,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/web.dom-collections.for-each":242,"core-js/modules/web.dom-collections.iterator":243,"core-js/modules/web.url":245}],297:[function(y,i,o){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var s=(y=y("../core/main"))&&y.__esModule?y:{default:y};s.default.prototype.deviceOrientation=1<window.innerWidth/window.innerHeight?"landscape":"portrait",s.default.prototype.accelerationX=0,s.default.prototype.accelerationY=0,s.default.prototype.accelerationZ=0,s.default.prototype.pAccelerationX=0,s.default.prototype.pAccelerationY=0,s.default.prototype.pAccelerationZ=0,s.default.prototype._updatePAccelerations=function(){this._setProperty("pAccelerationX",this.accelerationX),this._setProperty("pAccelerationY",this.accelerationY),this._setProperty("pAccelerationZ",this.accelerationZ)},s.default.prototype.rotationX=0,s.default.prototype.rotationY=0,s.default.prototype.rotationZ=0,s.default.prototype.pRotationX=0,s.default.prototype.pRotationY=0;var a=s.default.prototype.pRotationZ=0,l=0,u=0,h="clockwise",p="clockwise",c="clockwise",f=(s.default.prototype.pRotateDirectionX=void 0,s.default.prototype.pRotateDirectionY=void 0,s.default.prototype.pRotateDirectionZ=void 0,s.default.prototype._updatePRotations=function(){this._setProperty("pRotationX",this.rotationX),this._setProperty("pRotationY",this.rotationY),this._setProperty("pRotationZ",this.rotationZ)},s.default.prototype.turnAxis=void 0,.5),m=30,y=(s.default.prototype.setMoveThreshold=function(v){s.default._validateParameters("setMoveThreshold",arguments),f=v},s.default.prototype.setShakeThreshold=function(v){s.default._validateParameters("setShakeThreshold",arguments),m=v},s.default.prototype._ondeviceorientation=function(v){this._updatePRotations(),this._setProperty("rotationX",this._fromDegrees(v.beta)),this._setProperty("rotationY",this._fromDegrees(v.gamma)),this._setProperty("rotationZ",this._fromDegrees(v.alpha)),this._handleMotion()},s.default.prototype._ondevicemotion=function(v){this._updatePAccelerations(),this._setProperty("accelerationX",2*v.acceleration.x),this._setProperty("accelerationY",2*v.acceleration.y),this._setProperty("accelerationZ",2*v.acceleration.z),this._handleMotion()},s.default.prototype._handleMotion=function(){window.orientation===90||window.orientation===-90?this._setProperty("deviceOrientation","landscape"):window.orientation===0?this._setProperty("deviceOrientation","portrait"):window.orientation===void 0&&this._setProperty("deviceOrientation","undefined");var v,g,x,b,w,T=this._isGlobal?window:this;typeof T.deviceMoved=="function"&&(Math.abs(this.accelerationX-this.pAccelerationX)>f||Math.abs(this.accelerationY-this.pAccelerationY)>f||Math.abs(this.accelerationZ-this.pAccelerationZ)>f)&&T.deviceMoved(),typeof T.deviceTurned=="function"&&(g=this._toDegrees(this.rotationX)+180,x=this._toDegrees(this.pRotationX)+180,v=a+180,0<g-x&&g-x<270||g-x<-270?h="clockwise":(g-x<0||270<g-x)&&(h="counter-clockwise"),h!==this.pRotateDirectionX&&(v=g),90<Math.abs(g-v)&&Math.abs(g-v)<270&&(v=g,this._setProperty("turnAxis","X"),T.deviceTurned()),this.pRotateDirectionX=h,a=v-180,x=this._toDegrees(this.rotationY)+180,g=this._toDegrees(this.pRotationY)+180,v=l+180,0<x-g&&x-g<270||x-g<-270?p="clockwise":(x-g<0||270<x-this.pRotationY)&&(p="counter-clockwise"),p!==this.pRotateDirectionY&&(v=x),90<Math.abs(x-v)&&Math.abs(x-v)<270&&(v=x,this._setProperty("turnAxis","Y"),T.deviceTurned()),this.pRotateDirectionY=p,l=v-180,0<(g=this._toDegrees(this.rotationZ))-(x=this._toDegrees(this.pRotationZ))&&g-x<270||g-x<-270?c="clockwise":(g-x<0||270<g-x)&&(c="counter-clockwise"),c!==this.pRotateDirectionZ&&(u=g),90<Math.abs(g-u)&&Math.abs(g-u)<270&&(u=g,this._setProperty("turnAxis","Z"),T.deviceTurned()),this.pRotateDirectionZ=c,this._setProperty("turnAxis",void 0)),typeof T.deviceShaken=="function"&&(this.pAccelerationX!==null&&(b=Math.abs(this.accelerationX-this.pAccelerationX),w=Math.abs(this.accelerationY-this.pAccelerationY)),m<b+w&&T.deviceShaken())},s.default);o.default=y},{"../core/main":280}],298:[function(r,i,o){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var s=(r=r("../core/main"))&&r.__esModule?r:{default:r};s.default.prototype.isKeyPressed=!1,s.default.prototype.keyIsPressed=!1,s.default.prototype.key="",s.default.prototype.keyCode=0,s.default.prototype._onkeydown=function(a){var l;this._downKeys[a.which]||(this._setProperty("isKeyPressed",!0),this._setProperty("keyIsPressed",!0),this._setProperty("keyCode",a.which),this._downKeys[a.which]=!0,this._setProperty("key",a.key||String.fromCharCode(a.which)||a.which),typeof(l=this._isGlobal?window:this).keyPressed!="function"||a.charCode||l.keyPressed(a)===!1&&a.preventDefault())},s.default.prototype._onkeyup=function(a){this._downKeys[a.which]=!1,this._areDownKeys()||(this._setProperty("isKeyPressed",!1),this._setProperty("keyIsPressed",!1)),this._setProperty("_lastKeyCodeTyped",null),this._setProperty("key",a.key||String.fromCharCode(a.which)||a.which),this._setProperty("keyCode",a.which);var l=this._isGlobal?window:this;typeof l.keyReleased=="function"&&l.keyReleased(a)===!1&&a.preventDefault()},s.default.prototype._onkeypress=function(a){var l;a.which!==this._lastKeyCodeTyped&&(this._setProperty("_lastKeyCodeTyped",a.which),this._setProperty("key",a.key||String.fromCharCode(a.which)||a.which),typeof(l=this._isGlobal?window:this).keyTyped=="function"&&l.keyTyped(a)===!1&&a.preventDefault())},s.default.prototype._onblur=function(a){this._downKeys={}},s.default.prototype.keyIsDown=function(a){return s.default._validateParameters("keyIsDown",arguments),this._downKeys[a]||!1},s.default.prototype._areDownKeys=function(){for(var a in this._downKeys)if(this._downKeys.hasOwnProperty(a)&&this._downKeys[a]===!0)return!0;return!1},r=s.default,o.default=r},{"../core/main":280}],299:[function(r,i,o){function s(p){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(p)}function a(p){return(a=typeof Symbol=="function"&&s(Symbol.iterator)==="symbol"?function(c){return s(c)}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":s(c)})(p)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var l=(l=r("../core/main"))&&l.__esModule?l:{default:l},u=function(p){if(p&&p.__esModule)return p;if(p===null||a(p)!=="object"&&typeof p!="function")return{default:p};var c=h();if(c&&c.has(p))return c.get(p);var f,m={},y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(f in p){var v;Object.prototype.hasOwnProperty.call(p,f)&&((v=y?Object.getOwnPropertyDescriptor(p,f):null)&&(v.get||v.set)?Object.defineProperty(m,f,v):m[f]=p[f])}return m.default=p,c&&c.set(p,m),m}(r("../core/constants"));function h(){var p;return typeof WeakMap!="function"?null:(p=new WeakMap,h=function(){return p},p)}l.default.prototype.movedX=0,l.default.prototype.movedY=0,l.default.prototype._hasMouseInteracted=!1,l.default.prototype.mouseX=0,l.default.prototype.mouseY=0,l.default.prototype.pmouseX=0,l.default.prototype.pmouseY=0,l.default.prototype.winMouseX=0,l.default.prototype.winMouseY=0,l.default.prototype.pwinMouseX=0,l.default.prototype.pwinMouseY=0,l.default.prototype.mouseButton=0,l.default.prototype.mouseIsPressed=!1,l.default.prototype._updateNextMouseCoords=function(p){var c,f,m,y,v;this._curElement!==null&&(!p.touches||0<p.touches.length)&&(c=this._curElement.elt,f=this.width,m=this.height,(y=p)&&!y.clientX&&(y.touches?y=y.touches[0]:y.changedTouches&&(y=y.changedTouches[0])),v=c.getBoundingClientRect(),f=c.scrollWidth/f||1,c=c.scrollHeight/m||1,m={x:(y.clientX-v.left)/f,y:(y.clientY-v.top)/c,winX:y.clientX,winY:y.clientY,id:y.identifier},this._setProperty("movedX",p.movementX),this._setProperty("movedY",p.movementY),this._setProperty("mouseX",m.x),this._setProperty("mouseY",m.y),this._setProperty("winMouseX",m.winX),this._setProperty("winMouseY",m.winY)),this._hasMouseInteracted||(this._updateMouseCoords(),this._setProperty("_hasMouseInteracted",!0))},l.default.prototype._updateMouseCoords=function(){this._setProperty("pmouseX",this.mouseX),this._setProperty("pmouseY",this.mouseY),this._setProperty("pwinMouseX",this.winMouseX),this._setProperty("pwinMouseY",this.winMouseY),this._setProperty("_pmouseWheelDeltaY",this._mouseWheelDeltaY)},l.default.prototype._setMouseButton=function(p){p.button===1?this._setProperty("mouseButton",u.CENTER):p.button===2?this._setProperty("mouseButton",u.RIGHT):this._setProperty("mouseButton",u.LEFT)},l.default.prototype._onmousemove=function(p){var c=this._isGlobal?window:this;this._updateNextMouseCoords(p),this.mouseIsPressed?typeof c.mouseDragged=="function"?c.mouseDragged(p)===!1&&p.preventDefault():typeof c.touchMoved=="function"&&c.touchMoved(p)===!1&&p.preventDefault():typeof c.mouseMoved=="function"&&c.mouseMoved(p)===!1&&p.preventDefault()},l.default.prototype._onmousedown=function(p){var c=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!0),this._setMouseButton(p),this._updateNextMouseCoords(p),this.touchstart||(typeof c.mousePressed=="function"?c.mousePressed(p)===!1&&p.preventDefault():typeof c.touchStarted=="function"&&c.touchStarted(p)===!1&&p.preventDefault(),this.touchstart=!1)},l.default.prototype._onmouseup=function(p){var c=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!1),this.touchend||(typeof c.mouseReleased=="function"?c.mouseReleased(p)===!1&&p.preventDefault():typeof c.touchEnded=="function"&&c.touchEnded(p)===!1&&p.preventDefault(),this.touchend=!1)},l.default.prototype._ondragend=l.default.prototype._onmouseup,l.default.prototype._ondragover=l.default.prototype._onmousemove,l.default.prototype._onclick=function(p){var c=this._isGlobal?window:this;typeof c.mouseClicked=="function"&&c.mouseClicked(p)===!1&&p.preventDefault()},l.default.prototype._ondblclick=function(p){var c=this._isGlobal?window:this;typeof c.doubleClicked=="function"&&c.doubleClicked(p)===!1&&p.preventDefault()},l.default.prototype._mouseWheelDeltaY=0,l.default.prototype._pmouseWheelDeltaY=0,l.default.prototype._onwheel=function(p){var c=this._isGlobal?window:this;this._setProperty("_mouseWheelDeltaY",p.deltaY),typeof c.mouseWheel=="function"&&(p.delta=p.deltaY,c.mouseWheel(p)===!1&&p.preventDefault())},l.default.prototype.requestPointerLock=function(){var p=this._curElement.elt;return p.requestPointerLock=p.requestPointerLock||p.mozRequestPointerLock,p.requestPointerLock?(p.requestPointerLock(),!0):(console.log("requestPointerLock is not implemented in this browser"),!1)},l.default.prototype.exitPointerLock=function(){document.exitPointerLock()},r=l.default,o.default=r},{"../core/constants":269,"../core/main":280,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],300:[function(r,i,o){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,r=(r=r("../core/main"))&&r.__esModule?r:{default:r},r.default.prototype.touches=[],r.default.prototype._updateTouchCoords=function(s){if(this._curElement!==null){for(var a=[],l=0;l<s.touches.length;l++)a[l]=function(v,y,g,c){var f=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,m=v.getBoundingClientRect(),y=v.scrollWidth/y||1,v=v.scrollHeight/g||1,g=c.touches[f]||c.changedTouches[f];return{x:(g.clientX-m.left)/y,y:(g.clientY-m.top)/v,winX:g.clientX,winY:g.clientY,id:g.identifier}}(this._curElement.elt,this.width,this.height,s,l);this._setProperty("touches",a)}},r.default.prototype._ontouchstart=function(s){var a=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!0),this._updateTouchCoords(s),this._updateNextMouseCoords(s),this._updateMouseCoords(),typeof a.touchStarted=="function"&&(a.touchStarted(s)===!1&&s.preventDefault(),this.touchstart=!0)},r.default.prototype._ontouchmove=function(s){var a=this._isGlobal?window:this;this._updateTouchCoords(s),this._updateNextMouseCoords(s),typeof a.touchMoved=="function"?a.touchMoved(s)===!1&&s.preventDefault():typeof a.mouseDragged=="function"&&a.mouseDragged(s)===!1&&s.preventDefault()},r.default.prototype._ontouchend=function(s){this._setProperty("mouseIsPressed",!1),this._updateTouchCoords(s),this._updateNextMouseCoords(s);var a=this._isGlobal?window:this;typeof a.touchEnded=="function"&&(a.touchEnded(s)===!1&&s.preventDefault(),this.touchend=!0)},r=r.default,o.default=r},{"../core/main":280}],301:[function(r,i,o){r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.typed-array.int32-array"),r("core-js/modules/es.typed-array.uint8-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.typed-array.int32-array"),r("core-js/modules/es.typed-array.uint8-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var s,a,l,u,h={_toPixels:function(p){var c,f;return p instanceof ImageData?p.data:p.getContext("2d")?p.getContext("2d").getImageData(0,0,p.width,p.height).data:p.getContext("webgl")?(f=(c=p.getContext("webgl")).drawingBufferWidth*c.drawingBufferHeight*4,f=new Uint8Array(f),c.readPixels(0,0,p.width,p.height,c.RGBA,c.UNSIGNED_BYTE,f),f):void 0},_getARGB:function(p,c){return c*=4,p[3+c]<<24&4278190080|p[c]<<16&16711680|p[1+c]<<8&65280|255&p[2+c]},_setPixels:function(p,c){for(var f,m=0,y=p.length;m<y;m++)p[0+(f=4*m)]=(16711680&c[m])>>>16,p[1+f]=(65280&c[m])>>>8,p[2+f]=255&c[m],p[3+f]=(4278190080&c[m])>>>24},_toImageData:function(p){return p instanceof ImageData?p:p.getContext("2d").getImageData(0,0,p.width,p.height)},_createImageData:function(p,c){return h._tmpCanvas=document.createElement("canvas"),h._tmpCtx=h._tmpCanvas.getContext("2d"),this._tmpCtx.createImageData(p,c)},apply:function(p,v,f){var m=p.getContext("2d"),y=m.getImageData(0,0,p.width,p.height),v=v(y,f);v instanceof ImageData?m.putImageData(v,0,0,0,0,p.width,p.height):m.putImageData(y,0,0,0,0,p.width,p.height)},threshold:function(p){for(var c=1<arguments.length&&arguments[1]!==void 0?arguments[1]:.5,f=h._toPixels(p),m=Math.floor(255*c),y=0;y<f.length;y+=4){var v=void 0,v=m<=.2126*f[y]+.7152*f[y+1]+.0722*f[y+2]?255:0;f[y]=f[y+1]=f[y+2]=v}},gray:function(p){for(var c=h._toPixels(p),f=0;f<c.length;f+=4){var m=c[f],y=c[f+1],v=c[f+2];c[f]=c[f+1]=c[f+2]=.2126*m+.7152*y+.0722*v}},opaque:function(p){for(var c=h._toPixels(p),f=0;f<c.length;f+=4)c[f+3]=255;return c},invert:function(p){for(var c=h._toPixels(p),f=0;f<c.length;f+=4)c[f]=255-c[f],c[f+1]=255-c[f+1],c[f+2]=255-c[f+2]},posterize:function(p){var c=1<arguments.length&&arguments[1]!==void 0?arguments[1]:4,f=h._toPixels(p);if(c<2||255<c)throw new Error("Level must be greater than 2 and less than 255 for posterize");for(var m=c-1,y=0;y<f.length;y+=4){var v=f[y],g=f[y+1],x=f[y+2];f[y]=255*(v*c>>8)/m,f[y+1]=255*(g*c>>8)/m,f[y+2]=255*(x*c>>8)/m}},dilate:function(p){for(var c,f,m,y,v,g,x,b,w,T=h._toPixels(p),R=0,C=T.length?T.length/4:0,P=new Int32Array(C);R<C;)for(f=(c=R)+p.width;R<f;)y=m=h._getARGB(T,R),(w=R-1)<c&&(w=R),f<=(b=R+1)&&(b=R),(v=R-p.width)<0&&(v=0),C<=(g=R+p.width)&&(g=R),v=h._getARGB(T,v),w=h._getARGB(T,w),g=h._getARGB(T,g),(y=77*(y>>16&255)+151*(y>>8&255)+28*(255&y))<(x=77*(w>>16&255)+151*(w>>8&255)+28*(255&w))&&(m=w,y=x),y<(x=77*((w=h._getARGB(T,b))>>16&255)+151*(w>>8&255)+28*(255&w))&&(m=w,y=x),y<(b=77*(v>>16&255)+151*(v>>8&255)+28*(255&v))&&(m=v,y=b),y<(w=77*(g>>16&255)+151*(g>>8&255)+28*(255&g))&&(m=g,y=w),P[R++]=m;h._setPixels(T,P)},erode:function(p){for(var c,f,m,y,v,g,x,b,w,T=h._toPixels(p),R=0,C=T.length?T.length/4:0,P=new Int32Array(C);R<C;)for(f=(c=R)+p.width;R<f;)y=m=h._getARGB(T,R),(w=R-1)<c&&(w=R),f<=(b=R+1)&&(b=R),(v=R-p.width)<0&&(v=0),C<=(g=R+p.width)&&(g=R),v=h._getARGB(T,v),w=h._getARGB(T,w),g=h._getARGB(T,g),(x=77*(w>>16&255)+151*(w>>8&255)+28*(255&w))<(y=77*(y>>16&255)+151*(y>>8&255)+28*(255&y))&&(m=w,y=x),(x=77*((w=h._getARGB(T,b))>>16&255)+151*(w>>8&255)+28*(255&w))<y&&(m=w,y=x),(b=77*(v>>16&255)+151*(v>>8&255)+28*(255&v))<y&&(m=v,y=b),(w=77*(g>>16&255)+151*(g>>8&255)+28*(255&g))<y&&(m=g,y=w),P[R++]=m;h._setPixels(T,P)},blur:function(p,c){for(var f,m,y,v,g,x,b,w,T,R,C=h._toPixels(p),P=p.width,I=p.height,D=P*I,j=new Int32Array(D),N=0;N<D;N++)j[N]=h._getARGB(C,N);var O,W,X,J,ee,V,q,Y,Z=new Int32Array(D),ce=new Int32Array(D),B=new Int32Array(D),U=new Int32Array(D),K=0,re=3.5*c|0;if(s!==(re=re<1?1:re<248?re:248)){a=1+(s=re)<<1,l=new Int32Array(a),u=new Array(a);for(var ae=0;ae<a;ae++)u[ae]=new Int32Array(256);for(var pe=1,ye=re-1;pe<re;pe++){l[re+pe]=l[ye]=V=ye*ye,q=u[re+pe],Y=u[ye--];for(var Re=0;Re<256;Re++)q[Re]=Y[Re]=V*Re}ee=l[re]=re*re,q=u[re];for(var Me=0;Me<256;Me++)q[Me]=ee*Me}for(W=0;W<I;W++){for(O=0;O<P;O++){if(v=y=m=g=f=0,(x=O-s)<0)R=-x,x=0;else{if(P<=x)break;R=0}for(X=R;X<a&&!(P<=x);X++){var xe=j[x+K];J=u[X],g+=J[(-16777216&xe)>>>24],m+=J[(16711680&xe)>>16],y+=J[(65280&xe)>>8],v+=J[255&xe],f+=l[X],x++}Z[b=K+O]=g/f,ce[b]=m/f,B[b]=y/f,U[b]=v/f}K+=P}for(T=(w=-s)*P,W=K=0;W<I;W++){for(O=0;O<P;O++){if(v=y=m=g=f=0,w<0)R=b=-w,x=O;else{if(I<=w)break;R=0,b=w,x=O+T}for(X=R;X<a&&!(I<=b);X++)J=u[X],g+=J[Z[x]],m+=J[ce[x]],y+=J[B[x]],v+=J[U[x]],f+=l[X],b++,x+=P;j[O+K]=g/f<<24|m/f<<16|y/f<<8|v/f}K+=P,T+=P,w++}h._setPixels(C,j)}};o.default=h},{"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.to-string":187,"core-js/modules/es.typed-array.copy-within":210,"core-js/modules/es.typed-array.every":211,"core-js/modules/es.typed-array.fill":212,"core-js/modules/es.typed-array.filter":213,"core-js/modules/es.typed-array.find":215,"core-js/modules/es.typed-array.find-index":214,"core-js/modules/es.typed-array.for-each":218,"core-js/modules/es.typed-array.includes":219,"core-js/modules/es.typed-array.index-of":220,"core-js/modules/es.typed-array.int32-array":222,"core-js/modules/es.typed-array.iterator":223,"core-js/modules/es.typed-array.join":224,"core-js/modules/es.typed-array.last-index-of":225,"core-js/modules/es.typed-array.map":226,"core-js/modules/es.typed-array.reduce":228,"core-js/modules/es.typed-array.reduce-right":227,"core-js/modules/es.typed-array.reverse":229,"core-js/modules/es.typed-array.set":230,"core-js/modules/es.typed-array.slice":231,"core-js/modules/es.typed-array.some":232,"core-js/modules/es.typed-array.sort":233,"core-js/modules/es.typed-array.subarray":234,"core-js/modules/es.typed-array.to-locale-string":235,"core-js/modules/es.typed-array.to-string":236,"core-js/modules/es.typed-array.uint8-array":239}],302:[function(r,i,o){r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.set"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.typed-array.uint8-array"),r("core-js/modules/es.typed-array.uint32-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.set"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.typed-array.uint8-array"),r("core-js/modules/es.typed-array.uint32-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var s=l(r("../core/main")),a=l(r("omggif"));function l(h){return h&&h.__esModule?h:{default:h}}function u(h){return function(p){if(Array.isArray(p)){for(var c=0,f=new Array(p.length);c<p.length;c++)f[c]=p[c];return f}}(h)||function(p){if(Symbol.iterator in Object(p)||Object.prototype.toString.call(p)==="[object Arguments]")return Array.from(p)}(h)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}s.default.prototype.createImage=function(h,p){return s.default._validateParameters("createImage",arguments),new s.default.Image(h,p)},s.default.prototype.saveCanvas=function(){for(var h,p,c,f,m,y,v=arguments.length,g=new Array(v),x=0;x<v;x++)g[x]=arguments[x];switch(s.default._validateParameters("saveCanvas",g),g[0]instanceof HTMLCanvasElement?(h=g[0],g.shift()):g[0]instanceof s.default.Element?(h=g[0].elt,g.shift()):g[0]instanceof s.default.Framebuffer?(f=g[0],(m=this.createGraphics(f.width,f.height)).pixelDensity(pixelDensity()),f.loadPixels(),m.loadPixels(),m.pixels.set(f.pixels),m.updatePixels(),h=m.elt,g.shift()):h=this._curElement&&this._curElement.elt,1<=g.length&&(p=g[0]),c=(c=2<=g.length?g[1]:c)||s.default.prototype._checkFileExtension(p,c)[1]||"png"){default:y="image/png";break;case"jpeg":case"jpg":y="image/jpeg"}h.toBlob(function(b){s.default.prototype.downloadFile(b,p,c),m&&m.remove()},y)},s.default.prototype.encodeAndDownloadGif=function(h,p){for(var c=h.gifProperties,f=c.loopLimit,m=(f===1?f=null:f===null&&(f=0),new Uint8Array(h.width*h.height*c.numFrames)),y=[],v={},g=0;g<c.numFrames;g++){for(var x=new Set,b=c.frames[g].image.data,w=b.length,T=new Uint32Array(h.width*h.height),R=0,C=0;R<w;R+=4,C++){var P=b[R+0]<<16|b[R+1]<<8|b[R+2]<<0;x.add(P),T[C]=P}var I=u(x).sort().toString();v[I]===void 0?v[I]={freq:1,frames:[g]}:(v[I].freq+=1,v[I].frames.push(g)),y.push(T)}for(var N=[],D=Object.keys(v).sort(function(B,U){return v[U].freq-v[B].freq}),j=D[0].split(",").map(function(B){return parseInt(B)}),N=N.concat(v[j].frames),O=new Set(j),W=1;W<D.length;W++){var X=D[W].split(",").map(function(B){return parseInt(B)}).filter(function(B){return!O.has(B)});if(j.length+X.length<=256){for(var J=0;J<X.length;J++)j.push(X[J]),O.add(X[J]);N=N.concat(v[D[W]].frames)}}N=new Set(N);for(var ee={},V=0;V<j.length;V++)ee[j[V]]||(ee[j[V]]=V);for(var q=1;q<j.length;)q<<=1;j.length=q;for(var f={loop:f,palette:new Uint32Array(j)},Y=new a.default.GifWriter(m,h.width,h.height,f),Z={},ce=0;ce<c.numFrames;ce++)(function(U){var K=!N.has(U),re=K?[]:j,ae=new Uint8Array(h.width*h.height),pe={},ye=new Set,Re=(y[U].forEach(function(Te,Pe){K?(pe[Te]===void 0&&(pe[Te]=re.length,re.push(Te)),ae[Pe]=pe[Te]):ae[Pe]=ee[Te],0<U&&y[U-1][Pe]!==Te&&ye.add(Te)}),{}),Me=re.filter(function(Te){return!ye.has(Te)});if(0<Me.length){var Me=Me[0],xe=(K?pe:ee)[Me];if(0<U){for(var ve=0;ve<y[U].length;ve++)y[U-1][ve]===y[U][ve]&&(ae[ve]=xe);Re.transparent=xe,Z.frameOpts.disposal=1}}if(Re.delay=c.frames[U].delay/10,K){for(var ne=1;ne<re.length;)ne<<=1;re.length=ne,Re.palette=new Uint32Array(re)}0<U&&Y.addFrame(0,0,h.width,h.height,Z.pixelPaletteIndex,Z.frameOpts),Z={pixelPaletteIndex:ae,frameOpts:Re}})(ce);Z.frameOpts.disposal=1,Y.addFrame(0,0,h.width,h.height,Z.pixelPaletteIndex,Z.frameOpts),f=new Blob([m.slice(0,Y.end())],{type:"image/gif"}),s.default.prototype.downloadFile(f,p,"gif")},s.default.prototype.saveFrames=function(h,p,c,y,m){s.default._validateParameters("saveFrames",arguments),c=s.default.prototype.constrain(c=c||3,0,15),c*=1e3;var y=s.default.prototype.constrain(y||15,0,22),v=0,g=s.default.prototype._makeFrame,x=this._curElement.elt,b=[],w=setInterval(function(){b.push(g(h+v,p,x)),v++},1e3/y);setTimeout(function(){if(clearInterval(w),m)m(b);else for(var T=0,R=b;T<R.length;T++){var C=R[T];s.default.prototype.downloadFile(C.imageData,C.filename,C.ext)}b=[]},.01+c)},s.default.prototype._makeFrame=function(h,p,m){var f,m=this?this._curElement.elt:m;if(p)switch(p.toLowerCase()){case"png":f="image/png";break;case"jpeg":case"jpg":f="image/jpeg";break;default:f="image/png"}else p="png",f="image/png";var m=(m=m.toDataURL(f)).replace(f,"image/octet-stream"),y={};return y.imageData=m,y.filename=h,y.ext=p,y},r=s.default,o.default=r},{"../core/main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.filter":156,"core-js/modules/es.array.for-each":160,"core-js/modules/es.array.from":161,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.map":167,"core-js/modules/es.array.slice":168,"core-js/modules/es.object.keys":186,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.set":194,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.replace":201,"core-js/modules/es.string.split":203,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.typed-array.copy-within":210,"core-js/modules/es.typed-array.every":211,"core-js/modules/es.typed-array.fill":212,"core-js/modules/es.typed-array.filter":213,"core-js/modules/es.typed-array.find":215,"core-js/modules/es.typed-array.find-index":214,"core-js/modules/es.typed-array.for-each":218,"core-js/modules/es.typed-array.includes":219,"core-js/modules/es.typed-array.index-of":220,"core-js/modules/es.typed-array.iterator":223,"core-js/modules/es.typed-array.join":224,"core-js/modules/es.typed-array.last-index-of":225,"core-js/modules/es.typed-array.map":226,"core-js/modules/es.typed-array.reduce":228,"core-js/modules/es.typed-array.reduce-right":227,"core-js/modules/es.typed-array.reverse":229,"core-js/modules/es.typed-array.set":230,"core-js/modules/es.typed-array.slice":231,"core-js/modules/es.typed-array.some":232,"core-js/modules/es.typed-array.sort":233,"core-js/modules/es.typed-array.subarray":234,"core-js/modules/es.typed-array.to-locale-string":235,"core-js/modules/es.typed-array.to-string":236,"core-js/modules/es.typed-array.uint32-array":238,"core-js/modules/es.typed-array.uint8-array":239,"core-js/modules/web.dom-collections.for-each":242,"core-js/modules/web.dom-collections.iterator":243,omggif:253}],303:[function(r,i,o){function s(x){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b})(x)}function a(x){return(a=typeof Symbol=="function"&&s(Symbol.iterator)==="symbol"?function(b){return s(b)}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":s(b)})(x)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.copy-within"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.typed-array.uint8-array"),r("core-js/modules/es.typed-array.uint8-clamped-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.copy-within"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.typed-array.uint8-array"),r("core-js/modules/es.typed-array.uint8-clamped-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,r("regenerator-runtime/runtime");var l=m(r("../core/main")),u=m(r("../core/helpers")),h=function(x){if(x&&x.__esModule)return x;if(x===null||a(x)!=="object"&&typeof x!="function")return{default:x};var b=f();if(b&&b.has(x))return b.get(x);var w,T={},R=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(w in x){var C;Object.prototype.hasOwnProperty.call(x,w)&&((C=R?Object.getOwnPropertyDescriptor(x,w):null)&&(C.get||C.set)?Object.defineProperty(T,w,C):T[w]=x[w])}return T.default=x,b&&b.set(x,T),T}(r("../core/constants")),p=m(r("omggif")),c=r("gifenc");function f(){var x;return typeof WeakMap!="function"?null:(x=new WeakMap,f=function(){return x},x)}function m(x){return x&&x.__esModule?x:{default:x}}function y(x,b,w,T,R,C,P){try{var I=x[C](P),D=I.value}catch(j){return void w(j)}I.done?b(D):Promise.resolve(D).then(T,R)}function v(x,b,w,T,R,C,P,I,D,j,N){var O,W,X,J,ee,V,q,Y,Z;return x===h.COVER&&(O=b,X=w,q=C,Y=P,V=I,Z=D,W=j,J=N,ee=Math.max(q/W,Y/J),q/=ee,Y/=ee,ee=V,V=Z,O===h.CENTER?ee+=(W-q)/2:O===h.RIGHT&&(ee+=W-q),X===h.CENTER?V+=(J-Y)/2:X===h.BOTTOM&&(V+=J-Y),I=(Z={x:ee,y:V,w:q,h:Y}).x,D=Z.y,j=Z.w,N=Z.h),x===h.CONTAIN&&(O=b,W=w,X=T,J=R,ee=C,V=P,q=j,Y=N,Z=Math.max(q/ee,Y/V),q/=Z,Y/=Z,Z=X,X=J,O===h.CENTER?Z+=(ee-q)/2:O===h.RIGHT&&(Z+=ee-q),W===h.CENTER?X+=(V-Y)/2:W===h.BOTTOM&&(X+=V-Y),T=(x={x:Z,y:X,w:q,h:Y}).x,R=x.y,C=x.w,P=x.h),{sx:I,sy:D,sw:j,sh:N,dx:T,dy:R,dw:C,dh:P}}function g(x,b){return 0<x&&x<b?x:b}r("../core/friendly_errors/validate_params"),r("../core/friendly_errors/file_errors"),r("../core/friendly_errors/fes_core"),l.default.prototype.loadImage=function(x,b,w){l.default._validateParameters("loadImage",arguments);var T=new l.default.Image(1,1,this),R=this,C=new Request(x,{method:"GET",mode:"cors"});return fetch(x,C).then(function(P){var I,D=P.headers.get("content-type");D===null&&console.warn("The image you loaded does not have a Content-Type header. If you are using the online editor consider reuploading the asset."),D&&D.includes("image/gif")?P.arrayBuffer().then(function(j){if(j){for(var j=new Uint8Array(j),N=T,O=b,W=w,X=(function(K){R._decrementPreload()}).bind(R),J=new p.default.GifReader(j),ee=(N.width=N.canvas.width=J.width,N.height=N.canvas.height=J.height,[]),V=J.numFrames(),q=new Uint8ClampedArray(N.width*N.height*4),Y=0;Y<V;Y++){var Z=J.frameInfo(Y),ce=N.drawingContext.getImageData(0,0,N.width,N.height),B=(q=ce.data.slice(),function(K,re){try{re.decodeAndBlitFrameRGBA(K,q)}catch(ae){l.default._friendlyFileLoadError(8,N.src),typeof W=="function"?W(ae):console.error(ae)}}(Y,J),new ImageData(q,N.width,N.height)),B=(N.drawingContext.putImageData(B,0,0),Z.delay);B===0&&(B=10),ee.push({image:N.drawingContext.getImageData(0,0,N.width,N.height),delay:10*B}),Z.disposal===2?N.drawingContext.clearRect(Z.x,Z.y,Z.width,Z.height):Z.disposal===3&&N.drawingContext.putImageData(ce,0,0,Z.x,Z.y,Z.width,Z.height)}(j=J.loopCount())===null?j=1:j===0&&(j=null),N.drawingContext.putImageData(ee[0].image,0,0),1<ee.length&&(N.gifProperties={displayIndex:0,loopLimit:j,loopCount:0,frames:ee,numFrames:V,playing:!0,timeDisplayed:0,lastChangeTime:0}),typeof O=="function"&&O(N),X()}},function(j){typeof w=="function"?(w(j),R._decrementPreload()):console.error(j)}):((I=new Image).onload=function(){T.width=T.canvas.width=I.width,T.height=T.canvas.height=I.height,T.drawingContext.drawImage(I,0,0),T.modified=!0,typeof b=="function"&&b(T),R._decrementPreload()},I.onerror=function(j){l.default._friendlyFileLoadError(0,I.src),typeof w=="function"?(w(j),R._decrementPreload()):console.error(j)},x.indexOf("data:image/")!==0&&(I.crossOrigin="Anonymous"),I.src=x),T.modified=!0}).catch(function(P){l.default._friendlyFileLoadError(0,x),typeof w=="function"?(w(P),R._decrementPreload()):console.error(P)}),T},l.default.prototype.saveGif=function(){x=regeneratorRuntime.mark(function w(T,R){var C,P,I,D,j,N,O,W,X,J,ee,V,q,Y,Z,ce,B,U,K,re,ae,pe,ye,Re,Me,xe,ve=arguments;return regeneratorRuntime.wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:if(C=2<ve.length&&ve[2]!==void 0?ve[2]:{delay:0,units:"seconds",silent:!1,notificationDuration:0,notificationID:"progressBar"},typeof T!="string")throw TypeError("fileName parameter must be a string");ne.next=3;break;case 3:if(typeof R!="number")throw TypeError("Duration parameter must be a number");ne.next=5;break;case 5:if(P=C&&C.delay||0,I=C&&C.units||"seconds",D=C&&C.silent||!1,j=C&&C.notificationDuration||0,N=C&&C.notificationID||"progressBar",typeof P!="number")throw TypeError("Delay parameter must be a number");ne.next=12;break;case 12:if(I!=="seconds"&&I!=="frames")throw TypeError('Units parameter must be either "frames" or "seconds"');ne.next=14;break;case 14:if(typeof D!="boolean")throw TypeError("Silent parameter must be a boolean");ne.next=16;break;case 16:if(typeof j!="number")throw TypeError("Notification duration parameter must be a number");ne.next=18;break;case 18:if(typeof N!="string")throw TypeError("Notification ID parameter must be a string");ne.next=20;break;case 20:return this._recording=!0,J=this._targetFrameRate,O=(O=1/(J=J!==1/0&&J!==void 0&&J!==0?J:60)*1e3)<20?20:O,X=(W=I==="seconds"?R*J:R)+(J=I==="seconds"?P*J:P),J=J,this.frameCount=J,ee=this._pixelDensity,this.pixelDensity(1),V=[],document.getElementById(N)!==null&&document.getElementById(N).remove(),D||((q=this.createP("")).id(N),q.style("font-size","16px"),q.style("font-family","Montserrat"),q.style("background-color","#ffffffa0"),q.style("padding","8px"),q.style("border-radius","10px"),q.position(0,0)),this._renderer instanceof l.default.RendererGL&&(Z=this.drawingContext,Y=new Uint8Array(Z.drawingBufferWidth*Z.drawingBufferHeight*4)),this.noLoop(),ne.next=39,Promise.resolve();case 39:if(J<X)return this.redraw(),Re=void 0,Re=this._renderer instanceof l.default.RendererGL?(Y=new Uint8Array(Z.drawingBufferWidth*Z.drawingBufferHeight*4),Z.readPixels(0,0,Z.drawingBufferWidth,Z.drawingBufferHeight,Z.RGBA,Z.UNSIGNED_BYTE,Y),function(Te,Pe,Ae){for(var je=parseInt(Ae/2),Ue=4*Pe,Ge=new Uint8Array(4*Pe),_e=0;_e<je;++_e){var fe=_e*Ue,We=(Ae-_e-1)*Ue;Ge.set(Te.subarray(fe,fe+Ue)),Te.copyWithin(fe,We,We+Ue),Te.set(Ge,We)}return Te}(Y,this.width,this.height)):this.drawingContext.getImageData(0,0,this.width,this.height).data,V.push(Re),J++,D||q.html("Saved frame <b>"+V.length.toString()+"</b> out of "+W.toString()),ne.next=48,new Promise(function(Te){return setTimeout(Te,0)});ne.next=50;break;case 48:ne.next=39;break;case 50:D||q.html("Frames processed, generating color palette..."),this.loop(),this.pixelDensity(ee),ce=(0,c.GIFEncoder)(),B=function(Te){for(var Pe=new Uint8Array(Te.length*Te[0].length),Ae=0;Ae<Te.length;Ae++)Pe.set(Te[Ae],Ae*Te[0].length);var je=(0,c.quantize)(Pe,256,{format:"rgba4444",oneBitAlpha:!0});return je.length===256?je[je.length-1]=[255*Math.random(),255*Math.random(),255*Math.random(),0]:je.push([255*Math.random(),255*Math.random(),255*Math.random(),0]),je}(V),U={},K=function(Te){for(var Pe=Te.length/4,Ae=new Uint8Array(Pe),je=0;je<Pe;je++){var Ue=Te[4*je]<<24|Te[4*je+1]<<16|Te[4*je+2]<<8|Te[4*je+3];U[Ue]===void 0&&(U[Ue]=(0,c.nearestColorIndex)(B,Te.slice(4*je,4*(je+1)))),Ae[je]=U[Ue]}return Ae},re=B.length-1,ae=[],pe=0;case 60:if(!(pe<V.length)){ne.next=71;break}if(ye=K(V[pe]),Re=ye.slice(),pe===0)ce.writeFrame(ye,this.width,this.height,{palette:B,delay:O,dispose:1});else{for(Me=0;Me<ye.length;Me++)ye[Me]===ae[Me]&&(ye[Me]=re);ce.writeFrame(ye,this.width,this.height,{delay:O,transparent:!0,transparentIndex:re,dispose:1})}return ae=Re,D||q.html("Rendered frame <b>"+pe.toString()+"</b> out of "+W.toString()),ne.next=68,new Promise(function(Te){return setTimeout(Te,0)});case 68:pe++,ne.next=60;break;case 71:ce.finish(),xe=ce.bytesView(),xe=new Blob([xe],{type:"image/gif"}),V=[],this._recording=!1,this.loop(),D||(q.html("Done. Downloading your gif!"),0<j&&setTimeout(function(){return q.remove()},1e3*j)),l.default.prototype.downloadFile(xe,T,"gif");case 80:case"end":return ne.stop()}},w,this)});var x,b=function(){var w=this,T=arguments;return new Promise(function(R,C){var P=x.apply(w,T);function I(j){y(P,R,C,I,D,"next",j)}function D(j){y(P,R,C,I,D,"throw",j)}I(void 0)})};return function(w,T){return b.apply(this,arguments)}}(),l.default.prototype.image=function(x,b,w,T,J,ee,V,q,Z,j,N,O){l.default._validateParameters("image",arguments);var Y=x.width,W=x.height,X=(O=O||h.CENTER,N=N||h.CENTER,x.elt&&(Y=Y!==void 0?Y:x.elt.width,W=W!==void 0?W:x.elt.height),x.elt&&x.elt.videoWidth&&!x.canvas&&(Y=Y!==void 0?Y:x.elt.videoWidth,W=W!==void 0?W:x.elt.videoHeight),T||Y),J=J||W,ee=ee||0,V=V||0,q=g(q!==void 0?q:Y,Y),Y=g(Z!==void 0?Z:W,W),Z=1;x.elt&&!x.canvas&&x.elt.style.width&&(Z=x.elt.videoWidth&&!T?x.elt.videoWidth:x.elt.width,Z/=parseInt(x.elt.style.width,10)),ee*=Z,V*=Z,Y*=Z,q*=Z,W=v(j,N,O,(W=u.default.modeAdjust(b,w,X,J,this._renderer._imageMode)).x,W.y,W.w,W.h,ee,V,q,Y),this._renderer.image(x,W.sx,W.sy,W.sw,W.sh,W.dx,W.dy,W.dw,W.dh)},l.default.prototype.tint=function(){for(var x=arguments.length,b=new Array(x),w=0;w<x;w++)b[w]=arguments[w];l.default._validateParameters("tint",b);var T=this.color.apply(this,b);this._renderer._tint=T.levels},l.default.prototype.noTint=function(){this._renderer._tint=null},l.default.prototype._getTintedImageCanvas=l.default.Renderer2D.prototype._getTintedImageCanvas,l.default.prototype.imageMode=function(x){l.default._validateParameters("imageMode",arguments),x!==h.CORNER&&x!==h.CORNERS&&x!==h.CENTER||(this._renderer._imageMode=x)},r=l.default,o.default=r},{"../core/constants":269,"../core/friendly_errors/fes_core":271,"../core/friendly_errors/file_errors":272,"../core/friendly_errors/validate_params":275,"../core/helpers":276,"../core/main":280,"core-js/modules/es.array.copy-within":153,"core-js/modules/es.array.includes":162,"core-js/modules/es.array.index-of":163,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.slice":168,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.promise":188,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.includes":196,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.typed-array.copy-within":210,"core-js/modules/es.typed-array.every":211,"core-js/modules/es.typed-array.fill":212,"core-js/modules/es.typed-array.filter":213,"core-js/modules/es.typed-array.find":215,"core-js/modules/es.typed-array.find-index":214,"core-js/modules/es.typed-array.for-each":218,"core-js/modules/es.typed-array.includes":219,"core-js/modules/es.typed-array.index-of":220,"core-js/modules/es.typed-array.iterator":223,"core-js/modules/es.typed-array.join":224,"core-js/modules/es.typed-array.last-index-of":225,"core-js/modules/es.typed-array.map":226,"core-js/modules/es.typed-array.reduce":228,"core-js/modules/es.typed-array.reduce-right":227,"core-js/modules/es.typed-array.reverse":229,"core-js/modules/es.typed-array.set":230,"core-js/modules/es.typed-array.slice":231,"core-js/modules/es.typed-array.some":232,"core-js/modules/es.typed-array.sort":233,"core-js/modules/es.typed-array.subarray":234,"core-js/modules/es.typed-array.to-locale-string":235,"core-js/modules/es.typed-array.to-string":236,"core-js/modules/es.typed-array.uint8-array":239,"core-js/modules/es.typed-array.uint8-clamped-array":240,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243,gifenc:250,omggif:253,"regenerator-runtime/runtime":257}],304:[function(r,i,o){r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var s=l(r("../core/main")),a=l(r("./filters"));function l(h){return h&&h.__esModule?h:{default:h}}function u(h,p){for(var c=0;c<p.length;c++){var f=p[c];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(h,f.key,f)}}s.default.Image=function(){function h(f,m){if(!(this instanceof h))throw new TypeError("Cannot call a class as a function");this.width=f,this.height=m,this.canvas=document.createElement("canvas"),this.canvas.width=this.width,this.canvas.height=this.height,this.drawingContext=this.canvas.getContext("2d"),(this._pixelsState=this)._pixelDensity=1,this.gifProperties=null,this._modified=!1,this.pixels=[]}var p,c;return p=h,(c=[{key:"pixelDensity",value:function(f){return f!==void 0?(f<=0&&(s.default._friendlyParamError({type:"INVALID_VALUE",format:{types:["Number"]},position:1},"pixelDensity"),f=1),this._pixelDensity=f,this.width/=f,this.height/=f,this):this._pixelDensity}},{key:"_animateGif",value:function(v){var m,y=this.gifProperties,v=v._lastRealFrameTime||window.performance.now();y.lastChangeTime===0&&(y.lastChangeTime=v),y.playing&&(y.timeDisplayed=v-y.lastChangeTime,m=y.frames[y.displayIndex].delay,y.timeDisplayed>=m&&(m=Math.floor(y.timeDisplayed/m),y.timeDisplayed=0,y.lastChangeTime=v,y.displayIndex+=m,y.loopCount=Math.floor(y.displayIndex/y.numFrames),y.loopLimit!==null&&y.loopCount>=y.loopLimit?y.playing=!1:(v=y.displayIndex%y.numFrames,this.drawingContext.putImageData(y.frames[v].image,0,0),y.displayIndex=v,this.setModified(!0))))}},{key:"_setProperty",value:function(f,m){this[f]=m,this.setModified(!0)}},{key:"loadPixels",value:function(){s.default.Renderer2D.prototype.loadPixels.call(this),this.setModified(!0)}},{key:"updatePixels",value:function(f,m,y,v){s.default.Renderer2D.prototype.updatePixels.call(this,f,m,y,v),this.setModified(!0)}},{key:"get",value:function(f,m,y,v){return s.default._validateParameters("p5.Image.get",arguments),s.default.Renderer2D.prototype.get.apply(this,arguments)}},{key:"_getPixel",value:function(){for(var f=arguments.length,m=new Array(f),y=0;y<f;y++)m[y]=arguments[y];return s.default.Renderer2D.prototype._getPixel.apply(this,m)}},{key:"set",value:function(f,m,y){s.default.Renderer2D.prototype.set.call(this,f,m,y),this.setModified(!0)}},{key:"resize",value:function(f,m){f===0&&m===0?(f=this.canvas.width,m=this.canvas.height):f===0?f=this.canvas.width*m/this.canvas.height:m===0&&(m=this.canvas.height*f/this.canvas.width),f=Math.floor(f),m=Math.floor(m);var y=document.createElement("canvas");if(y.width=f,y.height=m,this.gifProperties)for(var v=this.gifProperties,g=0;g<v.numFrames;g++){for(var x=this.drawingContext.createImageData(f,m),b=(P=P=C=R=T=void 0,v.frames[g].image),w=x,T=0,R=0;R<w.height;R++)for(var C=0;C<w.width;C++){var P=Math.floor(C*b.width/w.width),P=4*(Math.floor(R*b.height/w.height)*b.width+P);w.data[T++]=b.data[P++],w.data[T++]=b.data[P++],w.data[T++]=b.data[P++],w.data[T++]=b.data[+P]}v.frames[g].image=x}y.getContext("2d").drawImage(this.canvas,0,0,this.canvas.width,this.canvas.height,0,0,y.width,y.height),this.canvas.width=this.width=f,this.canvas.height=this.height=m,this.drawingContext.drawImage(y,0,0,f,m,0,0,f,m),0<this.pixels.length&&this.loadPixels(),this.setModified(!0)}},{key:"copy",value:function(){for(var f=arguments.length,m=new Array(f),y=0;y<f;y++)m[y]=arguments[y];s.default.prototype.copy.apply(this,m)}},{key:"mask",value:function(f){var m=this.drawingContext.globalCompositeOperation,y=this._pixelDensity,v=1,g=[f=f===void 0?this:f,0,0,(v=f instanceof s.default.Renderer?f._pInst._pixelDensity:v)*f.width,v*f.height,0,0,y*this.width,y*this.height];if(this.drawingContext.globalCompositeOperation="destination-in",this.gifProperties){for(var x=0;x<this.gifProperties.frames.length;x++)this.drawingContext.putImageData(this.gifProperties.frames[x].image,0,0),this.copy.apply(this,g),this.gifProperties.frames[x].image=this.drawingContext.getImageData(0,0,y*this.width,y*this.height);this.drawingContext.putImageData(this.gifProperties.frames[this.gifProperties.displayIndex].image,0,0)}else this.copy.apply(this,g);this.drawingContext.globalCompositeOperation=m,this.setModified(!0)}},{key:"filter",value:function(f,m){a.default.apply(this.canvas,a.default[f],m),this.setModified(!0)}},{key:"blend",value:function(){for(var f=arguments.length,m=new Array(f),y=0;y<f;y++)m[y]=arguments[y];s.default._validateParameters("p5.Image.blend",arguments),s.default.prototype.blend.apply(this,m),this.setModified(!0)}},{key:"setModified",value:function(f){this._modified=f}},{key:"isModified",value:function(){return this._modified}},{key:"save",value:function(f,m){this.gifProperties?s.default.prototype.encodeAndDownloadGif(this,f):s.default.prototype.saveCanvas(this.canvas,f,m)}},{key:"reset",value:function(){var f;this.gifProperties&&((f=this.gifProperties).playing=!0,f.timeSinceStart=0,f.timeDisplayed=0,f.lastChangeTime=0,f.loopCount=0,f.displayIndex=0,this.drawingContext.putImageData(f.frames[0].image,0,0))}},{key:"getCurrentFrame",value:function(){var f;if(this.gifProperties)return(f=this.gifProperties).displayIndex%f.numFrames}},{key:"setFrame",value:function(f){var m;this.gifProperties&&(f<(m=this.gifProperties).numFrames&&0<=f?(m.timeDisplayed=0,m.lastChangeTime=0,m.displayIndex=f,this.drawingContext.putImageData(m.frames[f].image,0,0)):console.log("Cannot set GIF to a frame number that is higher than total number of frames or below zero."))}},{key:"numFrames",value:function(){if(this.gifProperties)return this.gifProperties.numFrames}},{key:"play",value:function(){this.gifProperties&&(this.gifProperties.playing=!0)}},{key:"pause",value:function(){this.gifProperties&&(this.gifProperties.playing=!1)}},{key:"delay",value:function(f,m){if(this.gifProperties){var y=this.gifProperties;if(m<y.numFrames&&0<=m)y.frames[m].delay=f;else{var v=!0,m=!1,g=void 0;try{for(var x,b=y.frames[Symbol.iterator]();!(v=(x=b.next()).done);v=!0)x.value.delay=f}catch(T){m=!0,g=T}finally{try{v||b.return==null||b.return()}finally{if(m)throw g}}}}}}])&&u(p.prototype,c),h}(),r=s.default.Image,o.default=r},{"../core/main":280,"./filters":301,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/web.dom-collections.iterator":243}],305:[function(r,i,o){r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.filter"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var s=l(r("../core/main")),a=l(r("./filters"));function l(u){return u&&u.__esModule?u:{default:u}}r("../color/p5.Color"),s.default.prototype.pixels=[],s.default.prototype.blend=function(){for(var u,h=arguments.length,p=new Array(h),c=0;c<h;c++)p[c]=arguments[c];s.default._validateParameters("blend",p),this._renderer?(u=this._renderer).blend.apply(u,p):s.default.Renderer2D.prototype.blend.apply(this,p)},s.default.prototype.copy=function(){for(var u,h,p,c,f,m,y,v,g,x=arguments.length,b=new Array(x),w=0;w<x;w++)b[w]=arguments[w];if(s.default._validateParameters("copy",b),b.length===9)u=b[0],h=b[1],p=b[2],c=b[3],f=b[4],m=b[5],y=b[6],v=b[7],g=b[8];else{if(b.length!==8)throw new Error("Signature not supported");u=this,h=b[0],p=b[1],c=b[2],f=b[3],m=b[4],y=b[5],v=b[6],g=b[7]}s.default.prototype._copyHelper(this,u,h,p,c,f,m,y,v,g)},s.default.prototype._copyHelper=function(u,h,p,c,f,m,y,v,g,x){var b=h.canvas.width/h.width,w=0,T=0;h._renderer&&h._renderer.isP3D&&(w=h.width/2,T=h.height/2),u._renderer&&u._renderer.isP3D?(u.push(),u.resetMatrix(),u.noLights(),u.blendMode(u.BLEND),u.imageMode(u.CORNER),s.default.RendererGL.prototype.image.call(u._renderer,h,p+w,c+T,f,m,y,v,g,x),u.pop()):u.drawingContext.drawImage(h.canvas,b*(p+w),b*(c+T),b*f,b*m,y,v,g,x)},s.default.prototype.getFilterGraphicsLayer=function(){return this._renderer.getFilterGraphicsLayer()},s.default.prototype.filter=function(){for(var u=arguments.length,h=new Array(u),p=0;p<u;p++)h[p]=arguments[p];s.default._validateParameters("filter",h);var y=(function(){var v,g={shader:void 0,operation:void 0,value:void 0,useWebGL:!0};return(arguments.length<=0?void 0:arguments[0])instanceof s.default.Shader?g.shader=arguments.length<=0?void 0:arguments[0]:(g.operation=arguments.length<=0?void 0:arguments[0],1<arguments.length&&typeof(arguments.length<=1?void 0:arguments[1])=="number"&&(g.value=arguments.length<=1?void 0:arguments[1]),((v=arguments.length-1)<0||arguments.length<=v?void 0:arguments[v])===!1&&(g.useWebGL=!1)),g}).apply(void 0,h),c=y.shader,f=y.operation,m=y.value,y=y.useWebGL;this._renderer.isP3D&&c?s.default.RendererGL.prototype.filter.call(this._renderer,c):y||this._renderer.isP3D?(!y&&this._renderer.isP3D&&console.warn("filter() with useWebGL=false is not supported in WEBGL"),this._renderer.isP3D?s.default.RendererGL.prototype.filter.call(this._renderer,f,m):((c=this.getFilterGraphicsLayer()).copy(this._renderer,0,0,this.width,this.height,-this.width/2,-this.height/2,this.width,this.height),this._renderer.clear(),this._renderer.resetMatrix(),c.filter.apply(c,h),this.copy(c._renderer,0,0,this.width,this.height,0,0,this.width,this.height),c.clear())):this.canvas!==void 0?a.default.apply(this.canvas,a.default[f],m):a.default.apply(this.elt,a.default[f],m)},s.default.prototype.get=function(u,h,p,c){var f;return s.default._validateParameters("get",arguments),(f=this._renderer).get.apply(f,arguments)},s.default.prototype.loadPixels=function(){for(var u=arguments.length,h=new Array(u),p=0;p<u;p++)h[p]=arguments[p];s.default._validateParameters("loadPixels",h),this._renderer.loadPixels()},s.default.prototype.set=function(u,h,p){this._renderer.set(u,h,p)},s.default.prototype.updatePixels=function(u,h,p,c){s.default._validateParameters("updatePixels",arguments),this.pixels.length!==0&&this._renderer.updatePixels(u,h,p,c)},r=s.default,o.default=r},{"../color/p5.Color":267,"../core/main":280,"./filters":301,"core-js/modules/es.array.filter":156}],306:[function(r,i,o){function s(m){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y})(m)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.last-index-of"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.function.name"),r("core-js/modules/es.object.from-entries"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.typed-array.uint8-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/web.url"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.last-index-of"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.function.name"),r("core-js/modules/es.object.from-entries"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.typed-array.uint8-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/web.url"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var a=h(r("../core/main")),l=(r("whatwg-fetch"),r("es6-promise/auto"),h(r("fetch-jsonp"))),u=h(r("file-saver"));function h(m){return m&&m.__esModule?m:{default:m}}function p(m){return(p=typeof Symbol=="function"&&s(Symbol.iterator)==="symbol"?function(y){return s(y)}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":s(y)})(m)}function c(m){return m.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function f(m,y){y&&y!==!0&&y!=="true"||(y="");var v="";return(m=m||"untitled")&&m.includes(".")&&(v=m.split(".").pop()),y&&v!==y&&(v=y,m="".concat(m,".").concat(v)),[m,v]}r("../core/friendly_errors/validate_params"),r("../core/friendly_errors/file_errors"),r("../core/friendly_errors/fes_core"),a.default.prototype.loadJSON=function(){for(var m=arguments.length,y=new Array(m),v=0;v<m;v++)y[v]=arguments[v];a.default._validateParameters("loadJSON",y);for(var g,x,b,w=y[0],T={},R="json",C=1;C<y.length;C++){var P=y[C];typeof P=="string"?P!=="jsonp"&&P!=="json"||(R=P):typeof P=="function"?g?x=P:g=P:p(P)==="object"&&(P.hasOwnProperty("jsonpCallback")||P.hasOwnProperty("jsonpCallbackFunction"))&&(R="jsonp",b=P)}var I=this;return this.httpDo(w,"GET",b,R,function(D){for(var j in D)T[j]=D[j];g!==void 0&&g(D),I._decrementPreload()},function(D){if(a.default._friendlyFileLoadError(5,w),!x)throw D;x(D)}),T},a.default.prototype.loadStrings=function(){for(var m=arguments.length,y=new Array(m),v=0;v<m;v++)y[v]=arguments[v];a.default._validateParameters("loadStrings",y);for(var g,x,b=[],w=1;w<y.length;w++){var T=y[w];typeof T=="function"&&(g===void 0?g=T:x===void 0&&(x=T))}var R=this;return a.default.prototype.httpDo.call(this,y[0],"GET","text",function(C){for(var P=C.replace(/\r\n/g,"\r").replace(/\n/g,"\r").split(/\r/),I=0,D=P.length;I<D;I+=32768)Array.prototype.push.apply(b,P.slice(I,Math.min(I+32768,D)));g!==void 0&&g(b),R._decrementPreload()},function(C){if(a.default._friendlyFileLoadError(3,C),!x)throw C;x(C)}),b},a.default.prototype.loadTable=function(m){var y,v,g,x=!1,b=m.substring(m.lastIndexOf(".")+1,m.length);b==="csv"?g=",":b==="ssv"?g=";":b==="tsv"&&(g="	");for(var w=1;w<arguments.length;w++)typeof arguments[w]=="function"?y===void 0?y=arguments[w]:v===void 0&&(v=arguments[w]):typeof arguments[w]=="string"&&(arguments[w]==="header"&&(x=!0),arguments[w]==="csv"?g=",":arguments[w]==="ssv"?g=";":arguments[w]==="tsv"&&(g="	"));var T=new a.default.Table,R=this;return this.httpDo(m,"GET","table",function(C){for(var P,I,D={},j=0,N=[],O=0,W=null,X=function(){D.currentState=j,D.token=""},J=function(){W.push(D.token),X()},ee=function(){D.currentState=4,N.push(W),W=null};;){if((P=C[O++])==null){if(D.escaped)throw new Error("Unclosed quote in file.");if(W){J(),ee();break}}if(W===null&&(D.escaped=!1,W=[],X()),D.currentState===j){if(P==='"'){D.escaped=!0,D.currentState=1;continue}D.currentState=1}if(D.currentState===1&&D.escaped)if(P==='"')C[O]==='"'?(D.token+='"',O++):(D.escaped=!1,D.currentState=2);else{if(P==="\r")continue;D.token+=P}else P==="\r"?(C[O]===`
`&&O++,J(),ee()):P===`
`?(J(),ee()):P===g?J():D.currentState===1&&(D.token+=P)}if(x)T.columns=N.shift();else for(var V=0;V<N[0].length;V++)T.columns[V]="null";for(var q=0;q<N.length;q++)(N[q].length!==1||N[q][0]!=="undefined"&&N[q][0]!=="")&&((I=new a.default.TableRow).arr=N[q],I.obj=function(Y,Z){if((Z=Z||[])===void 0)for(var ce=0;ce<Y.length;ce++)Z[ce.toString()]=ce;return Object.fromEntries(Z.map(function(B,U){return[B,Y[U]]}))}(N[q],T.columns),T.addRow(I));typeof y=="function"&&y(T),R._decrementPreload()},function(C){a.default._friendlyFileLoadError(2,m),v?v(C):console.error(C)}),T},a.default.prototype.loadXML=function(){for(var m=arguments.length,y=new Array(m),v=0;v<m;v++)y[v]=arguments[v];for(var g,x,b=new a.default.XML,w=1;w<y.length;w++){var T=y[w];typeof T=="function"&&(g===void 0?g=T:x===void 0&&(x=T))}var R=this;return this.httpDo(y[0],"GET","xml",function(C){for(var P in C)b[P]=C[P];g!==void 0&&g(b),R._decrementPreload()},function(C){if(a.default._friendlyFileLoadError(1,C),!x)throw C;x(C)}),b},a.default.prototype.loadBytes=function(m,y,v){var g={},x=this;return this.httpDo(m,"GET","arrayBuffer",function(b){g.bytes=new Uint8Array(b),typeof y=="function"&&y(g),x._decrementPreload()},function(b){if(a.default._friendlyFileLoadError(6,m),!v)throw b;v(b)}),g},a.default.prototype.httpGet=function(){for(var m=arguments.length,y=new Array(m),v=0;v<m;v++)y[v]=arguments[v];return a.default._validateParameters("httpGet",y),y.splice(1,0,"GET"),a.default.prototype.httpDo.apply(this,y)},a.default.prototype.httpPost=function(){for(var m=arguments.length,y=new Array(m),v=0;v<m;v++)y[v]=arguments[v];return a.default._validateParameters("httpPost",y),y.splice(1,0,"POST"),a.default.prototype.httpDo.apply(this,y)},a.default.prototype.httpDo=function(){for(var m,y,v,g={},x=0,b="text/plain",w=arguments.length-1;0<w&&typeof(w<0||arguments.length<=w?void 0:arguments[w])=="function";w--)x++;var T=arguments.length-x,R=arguments.length<=0?void 0:arguments[0];if(T==2&&typeof R=="string"&&p(arguments.length<=1?void 0:arguments[1])==="object")N=new Request(R,arguments.length<=1?void 0:arguments[1]),y=arguments.length<=2?void 0:arguments[2],v=arguments.length<=3?void 0:arguments[3];else{for(var C,P="GET",I=1;I<arguments.length;I++){var D=I<0||arguments.length<=I?void 0:arguments[I];if(typeof D=="string")D==="GET"||D==="POST"||D==="PUT"||D==="DELETE"?P=D:D==="json"||D==="jsonp"||D==="binary"||D==="arrayBuffer"||D==="xml"||D==="text"||D==="table"?m=D:C=D;else if(typeof D=="number")C=D.toString();else if(p(D)==="object")if(D.hasOwnProperty("jsonpCallback")||D.hasOwnProperty("jsonpCallbackFunction"))for(var j in D)g[j]=D[j];else b=D instanceof a.default.XML?(C=D.serialize(),"application/xml"):(C=JSON.stringify(D),"application/json");else typeof D=="function"&&(y?v=D:y=D)}var T=P==="GET"?new Headers:new Headers({"Content-Type":b}),N=new Request(R,{method:P,mode:"cors",body:C,headers:T})}return(T=(T=(m=m||(R.includes("json")?"json":R.includes("xml")?"xml":"text"))==="jsonp"?(0,l.default)(R,g):fetch(N)).then(function(O){if(!O.ok)throw(W=new Error(O.body)).status=O.status,W.ok=!1,W;var W=0;switch((W=m!=="jsonp"?O.headers.get("content-length"):W)&&64e6<W&&a.default._friendlyFileLoadError(7,R),m){case"json":case"jsonp":return O.json();case"binary":return O.blob();case"arrayBuffer":return O.arrayBuffer();case"xml":return O.text().then(function(X){return X=new DOMParser().parseFromString(X,"text/xml"),new a.default.XML(X.documentElement)});default:return O.text()}})).then(y||function(){}),T.catch(v||console.error),T},window.URL=window.URL||window.webkitURL,a.default.prototype._pWriters=[],a.default.prototype.createWriter=function(m,y){var v,g;for(g in a.default.prototype._pWriters)if(a.default.prototype._pWriters[g].name===m)return v=new a.default.PrintWriter(m+this.millis(),y),a.default.prototype._pWriters.push(v),v;return v=new a.default.PrintWriter(m,y),a.default.prototype._pWriters.push(v),v},a.default.PrintWriter=function(m,y){var v=this;this.name=m,this.content="",this.write=function(g){this.content+=g},this.print=function(g){this.content+="".concat(g,`
`)},this.clear=function(){this.content=""},this.close=function(){var g,x=[];for(g in x.push(this.content),a.default.prototype.writeFile(x,m,y),a.default.prototype._pWriters)a.default.prototype._pWriters[g].name===this.name&&a.default.prototype._pWriters.splice(g,1);v.clear(),v={}}},a.default.prototype.save=function(m,y,v){var g=arguments,x=(this._curElement||this).elt;if(g.length===0)a.default.prototype.saveCanvas(x);else if(g[0]instanceof a.default.Renderer||g[0]instanceof a.default.Graphics)a.default.prototype.saveCanvas(g[0].elt,g[1],g[2]);else if(g.length===1&&typeof g[0]=="string")a.default.prototype.saveCanvas(x,g[0]);else switch(f(g[1],g[2])[1]){case"json":return void a.default.prototype.saveJSON(g[0],g[1],g[2]);case"txt":return void a.default.prototype.saveStrings(g[0],g[1],g[2]);default:g[0]instanceof Array?a.default.prototype.saveStrings(g[0],g[1],g[2]):g[0]instanceof a.default.Table?a.default.prototype.saveTable(g[0],g[1],g[2]):g[0]instanceof a.default.Image?a.default.prototype.saveCanvas(g[0].canvas,g[1]):g[0]instanceof a.default.SoundFile&&a.default.prototype.saveSound(g[0],g[1],g[2],g[3])}},a.default.prototype.saveJSON=function(m,y,v){a.default._validateParameters("saveJSON",arguments),v=v?JSON.stringify(m):JSON.stringify(m,void 0,2),this.saveStrings(v.split(`
`),y,"json")},a.default.prototype.saveJSONObject=a.default.prototype.saveJSON,a.default.prototype.saveJSONArray=a.default.prototype.saveJSON,a.default.prototype.saveStrings=function(m,y,v,g){a.default._validateParameters("saveStrings",arguments);for(var x=this.createWriter(y,v||"txt"),b=0;b<m.length;b++)g?x.write(m[b]+`\r
`):x.write(m[b]+`
`);x.close(),x.clear()},a.default.prototype.saveTable=function(m,y,v){a.default._validateParameters("saveTable",arguments),g=v===void 0?y.substring(y.lastIndexOf(".")+1,y.length):v;var g,x=this.createWriter(y,g),b=m.columns,w=g==="tsv"?"	":",";if(g!=="html"){if(b[0]!=="0"){for(var T=0;T<b.length;T++)T<b.length-1?x.write(b[T]+w):x.write(b[T]);x.write(`
`)}for(var R=0;R<m.rows.length;R++){for(var C=void 0,C=0;C<m.rows[R].arr.length;C++)C<m.rows[R].arr.length-1?g==="csv"&&String(m.rows[R].arr[C]).includes(",")?x.write('"'+m.rows[R].arr[C]+'"'+w):x.write(m.rows[R].arr[C]+w):g==="csv"&&String(m.rows[R].arr[C]).includes(",")?x.write('"'+m.rows[R].arr[C]+'"'):x.write(m.rows[R].arr[C]);x.write(`
`)}}else{if(x.print("<html>"),x.print("<head>"),x.print('  <meta http-equiv="content-type" content="text/html;charset=utf-8" />'),x.print("</head>"),x.print("<body>"),x.print("  <table>"),b[0]!=="0"){x.print("    <tr>");for(var P=0;P<b.length;P++){var I=c(b[P]);x.print("      <td>".concat(I)),x.print("      </td>")}x.print("    </tr>")}for(var D=0;D<m.rows.length;D++){x.print("    <tr>");for(var j=0;j<m.columns.length;j++){var N=c(m.rows[D].getString(j));x.print("      <td>".concat(N)),x.print("      </td>")}x.print("    </tr>")}x.print("  </table>"),x.print("</body>"),x.print("</html>")}x.close(),x.clear()},a.default.prototype.writeFile=function(x,y,v){var g="application/octet-stream",x=(a.default.prototype._isSafari()&&(g="text/plain"),new Blob(x,{type:g}));a.default.prototype.downloadFile(x,y,v)},a.default.prototype.downloadFile=function(m,x,b){var g,x=f(x,b),b=x[0];m instanceof Blob?u.default.saveAs(m,b):((g=document.createElement("a")).href=m,g.download=b,g.onclick=function(w){document.body.removeChild(w.target),w.stopPropagation()},g.style.display="none",document.body.appendChild(g),a.default.prototype._isSafari()&&(m=(m=`Hello, Safari user! To download this file...
1. Go to File --> Save As.
2. Choose "Page Source" as the Format.
`)+'3. Name it with this extension: ."'.concat(x[1],'"'),alert(m)),g.click())},a.default.prototype._checkFileExtension=f,a.default.prototype._isSafari=function(){return window.HTMLElement.toString().includes("Constructor")},r=a.default,o.default=r},{"../core/friendly_errors/fes_core":271,"../core/friendly_errors/file_errors":272,"../core/friendly_errors/validate_params":275,"../core/main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.includes":162,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.last-index-of":166,"core-js/modules/es.array.map":167,"core-js/modules/es.array.slice":168,"core-js/modules/es.array.splice":170,"core-js/modules/es.function.name":173,"core-js/modules/es.object.from-entries":182,"core-js/modules/es.object.to-string":187,"core-js/modules/es.promise":188,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.includes":196,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.replace":201,"core-js/modules/es.string.split":203,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.typed-array.copy-within":210,"core-js/modules/es.typed-array.every":211,"core-js/modules/es.typed-array.fill":212,"core-js/modules/es.typed-array.filter":213,"core-js/modules/es.typed-array.find":215,"core-js/modules/es.typed-array.find-index":214,"core-js/modules/es.typed-array.for-each":218,"core-js/modules/es.typed-array.includes":219,"core-js/modules/es.typed-array.index-of":220,"core-js/modules/es.typed-array.iterator":223,"core-js/modules/es.typed-array.join":224,"core-js/modules/es.typed-array.last-index-of":225,"core-js/modules/es.typed-array.map":226,"core-js/modules/es.typed-array.reduce":228,"core-js/modules/es.typed-array.reduce-right":227,"core-js/modules/es.typed-array.reverse":229,"core-js/modules/es.typed-array.set":230,"core-js/modules/es.typed-array.slice":231,"core-js/modules/es.typed-array.some":232,"core-js/modules/es.typed-array.sort":233,"core-js/modules/es.typed-array.subarray":234,"core-js/modules/es.typed-array.to-locale-string":235,"core-js/modules/es.typed-array.to-string":236,"core-js/modules/es.typed-array.uint8-array":239,"core-js/modules/web.dom-collections.iterator":243,"core-js/modules/web.url":245,"es6-promise/auto":246,"fetch-jsonp":248,"file-saver":249,"whatwg-fetch":258}],307:[function(r,i,o){r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.regexp.constructor"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.match"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.regexp.constructor"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.match"),r("core-js/modules/es.string.replace"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var s=(r=r("../core/main"))&&r.__esModule?r:{default:r};function a(l,u){for(var h=0;h<u.length;h++){var p=u[h];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(l,p.key,p)}}s.default.Table=function(){function l(){var p=0<arguments.length&&arguments[0]!==void 0?arguments[0]:[],c=this,f=l;if(!(c instanceof f))throw new TypeError("Cannot call a class as a function");this.columns=[],this.rows=p}var u,h;return u=l,(h=[{key:"addRow",value:function(p){if(p=p||new s.default.TableRow,p.arr===void 0||p.obj===void 0)throw new Error("invalid TableRow: ".concat(p));return(p.table=this).rows.push(p),p}},{key:"removeRow",value:function(p){this.rows[p].table=null,p=this.rows.splice(p+1,this.rows.length),this.rows.pop(),this.rows=this.rows.concat(p)}},{key:"getRow",value:function(p){return this.rows[p]}},{key:"getRows",value:function(){return this.rows}},{key:"findRow",value:function(p,c){if(typeof c=="string"){for(var f=0;f<this.rows.length;f++)if(this.rows[f].obj[c]===p)return this.rows[f]}else for(var m=0;m<this.rows.length;m++)if(this.rows[m].arr[c]===p)return this.rows[m];return null}},{key:"findRows",value:function(p,c){var f=[];if(typeof c=="string")for(var m=0;m<this.rows.length;m++)this.rows[m].obj[c]===p&&f.push(this.rows[m]);else for(var y=0;y<this.rows.length;y++)this.rows[y].arr[c]===p&&f.push(this.rows[y]);return f}},{key:"matchRow",value:function(p,c){if(typeof c=="number"){for(var f=0;f<this.rows.length;f++)if(this.rows[f].arr[c].match(p))return this.rows[f]}else for(var m=0;m<this.rows.length;m++)if(this.rows[m].obj[c].match(p))return this.rows[m];return null}},{key:"matchRows",value:function(p,c){var f=[];if(typeof c=="number")for(var m=0;m<this.rows.length;m++)this.rows[m].arr[c].match(p)&&f.push(this.rows[m]);else for(var y=0;y<this.rows.length;y++)this.rows[y].obj[c].match(p)&&f.push(this.rows[y]);return f}},{key:"getColumn",value:function(p){var c=[];if(typeof p=="string")for(var f=0;f<this.rows.length;f++)c.push(this.rows[f].obj[p]);else for(var m=0;m<this.rows.length;m++)c.push(this.rows[m].arr[p]);return c}},{key:"clearRows",value:function(){delete this.rows,this.rows=[]}},{key:"addColumn",value:function(p){this.columns.push(p||null)}},{key:"getColumnCount",value:function(){return this.columns.length}},{key:"getRowCount",value:function(){return this.rows.length}},{key:"removeTokens",value:function(p,c){for(var f=[],m=0;m<p.length;m++)f.push(p.charAt(m).replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"));var y=new RegExp(f.join("|"),"g");if(c===void 0)for(var v=0;v<this.columns.length;v++)for(var g=0;g<this.rows.length;g++){var x=(x=this.rows[g].arr[v]).replace(y,"");this.rows[g].arr[v]=x,this.rows[g].obj[this.columns[v]]=x}else if(typeof c=="string")for(var b=0;b<this.rows.length;b++){var w=(w=this.rows[b].obj[c]).replace(y,""),T=(this.rows[b].obj[c]=w,this.columns.indexOf(c));this.rows[b].arr[T]=w}else for(var R=0;R<this.rows.length;R++){var C=(C=this.rows[R].arr[c]).replace(y,"");this.rows[R].arr[c]=C,this.rows[R].obj[this.columns[c]]=C}}},{key:"trim",value:function(p){var c=new RegExp(" ","g");if(p===void 0)for(var f=0;f<this.columns.length;f++)for(var m=0;m<this.rows.length;m++){var y=(y=this.rows[m].arr[f]).replace(c,"");this.rows[m].arr[f]=y,this.rows[m].obj[this.columns[f]]=y}else if(typeof p=="string")for(var v=0;v<this.rows.length;v++){var g=(g=this.rows[v].obj[p]).replace(c,""),x=(this.rows[v].obj[p]=g,this.columns.indexOf(p));this.rows[v].arr[x]=g}else for(var b=0;b<this.rows.length;b++){var w=(w=this.rows[b].arr[p]).replace(c,"");this.rows[b].arr[p]=w,this.rows[b].obj[this.columns[p]]=w}}},{key:"removeColumn",value:function(m){typeof m=="string"?f=this.columns.indexOf(c=m):c=this.columns[f=m];var c,f,m=this.columns.splice(f+1,this.columns.length);this.columns.pop(),this.columns=this.columns.concat(m);for(var y=0;y<this.rows.length;y++){var v=this.rows[y].arr,g=v.splice(f+1,v.length);v.pop(),this.rows[y].arr=v.concat(g),delete this.rows[y].obj[c]}}},{key:"set",value:function(p,c,f){this.rows[p].set(c,f)}},{key:"setNum",value:function(p,c,f){this.rows[p].setNum(c,f)}},{key:"setString",value:function(p,c,f){this.rows[p].setString(c,f)}},{key:"get",value:function(p,c){return this.rows[p].get(c)}},{key:"getNum",value:function(p,c){return this.rows[p].getNum(c)}},{key:"getString",value:function(p,c){return this.rows[p].getString(c)}},{key:"getObject",value:function(p){for(var c,f={},m=0;m<this.rows.length;m++)if(c=this.rows[m].obj,typeof p=="string"){if(!(0<=this.columns.indexOf(p)))throw new Error('This table has no column named "'.concat(p,'"'));f[c[p]]=c}else f[m]=this.rows[m].obj;return f}},{key:"getArray",value:function(){for(var p=[],c=0;c<this.rows.length;c++)p.push(this.rows[c].arr);return p}}])&&a(u.prototype,h),l}(),r=s.default,o.default=r},{"../core/main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.index-of":163,"core-js/modules/es.array.join":165,"core-js/modules/es.array.splice":170,"core-js/modules/es.regexp.constructor":191,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.match":198,"core-js/modules/es.string.replace":201}],308:[function(r,i,o){r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.from-entries"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.split"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.from-entries"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.split"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,r=(r=r("../core/main"))&&r.__esModule?r:{default:r};function s(a,l){for(var u=0;u<l.length;u++){var h=l[u];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(a,h.key,h)}}r.default.TableRow=function(){function a(h,p){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");var c=[];h&&(c=h.split(p=p||",")),this.arr=c,this.obj=Object.fromEntries(c.entries()),this.table=null}var l,u;return l=a,(u=[{key:"set",value:function(h,p){if(typeof h=="string"){var c=this.table.columns.indexOf(h);if(!(0<=c))throw new Error('This table has no column named "'.concat(h,'"'));this.obj[h]=p,this.arr[c]=p}else{if(!(h<this.table.columns.length))throw new Error("Column #".concat(h," is out of the range of this table"));this.arr[h]=p,c=this.table.columns[h],this.obj[c]=p}}},{key:"setNum",value:function(h,p){p=parseFloat(p),this.set(h,p)}},{key:"setString",value:function(h,p){p=p.toString(),this.set(h,p)}},{key:"get",value:function(h){return(typeof h=="string"?this.obj:this.arr)[h]}},{key:"getNum",value:function(h){var p=parseFloat(typeof h=="string"?this.obj[h]:this.arr[h]);if(p.toString()==="NaN")throw"Error: ".concat(this.obj[h]," is NaN (Not a Number)");return p}},{key:"getString",value:function(h){return(typeof h=="string"?this.obj:this.arr)[h].toString()}}])&&s(l.prototype,u),a}(),r=r.default,o.default=r},{"../core/main":280,"core-js/modules/es.array.index-of":163,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.from-entries":182,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.split":203,"core-js/modules/web.dom-collections.iterator":243}],309:[function(r,i,o){r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.replace"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.replace"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var s=(r=r("../core/main"))&&r.__esModule?r:{default:r};function a(u,h){for(var p=0;p<h.length;p++){var c=h[p];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(u,c.key,c)}}function l(u){for(var h=[],p=0;p<u.length;p++)h.push(new s.default.XML(u[p]));return h}s.default.XML=function(){function u(c){if(!(this instanceof u))throw new TypeError("Cannot call a class as a function");c?this.DOM=c:(c=document.implementation.createDocument(null,"doc"),this.DOM=c.createElement("root"))}var h,p;return h=u,(p=[{key:"getParent",value:function(){return new s.default.XML(this.DOM.parentElement)}},{key:"getName",value:function(){return this.DOM.tagName}},{key:"setName",value:function(c){var f=this.DOM.innerHTML,m=this.DOM.attributes,y=document.implementation.createDocument(null,"default").createElement(c);y.innerHTML=f;for(var v=0;v<m.length;v++)y.setAttribute(m[v].nodeName,m[v].nodeValue);this.DOM=y}},{key:"hasChildren",value:function(){return 0<this.DOM.children.length}},{key:"listChildren",value:function(){for(var c=[],f=0;f<this.DOM.childNodes.length;f++)c.push(this.DOM.childNodes[f].nodeName);return c}},{key:"getChildren",value:function(c){return l(c?this.DOM.getElementsByTagName(c):this.DOM.children)}},{key:"getChild",value:function(c){if(typeof c!="string")return new s.default.XML(this.DOM.children[c]);var f=!0,m=!1,y=void 0;try{for(var v,g=this.DOM.children[Symbol.iterator]();!(f=(v=g.next()).done);f=!0){var x=v.value;if(x.tagName===c)return new s.default.XML(x)}}catch(b){m=!0,y=b}finally{try{f||g.return==null||g.return()}finally{if(m)throw y}}}},{key:"addChild",value:function(c){c instanceof s.default.XML&&this.DOM.appendChild(c.DOM)}},{key:"removeChild",value:function(c){var f=-1;if(typeof c=="string"){for(var m=0;m<this.DOM.children.length;m++)if(this.DOM.children[m].tagName===c){f=m;break}}else f=c;f!==-1&&this.DOM.removeChild(this.DOM.children[f])}},{key:"getAttributeCount",value:function(){return this.DOM.attributes.length}},{key:"listAttributes",value:function(){var c=[],f=!0,m=!1,y=void 0;try{for(var v,g=this.DOM.attributes[Symbol.iterator]();!(f=(v=g.next()).done);f=!0){var x=v.value;c.push(x.nodeName)}}catch(b){m=!0,y=b}finally{try{f||g.return==null||g.return()}finally{if(m)throw y}}return c}},{key:"hasAttribute",value:function(c){var f={},m=!0,y=!1,v=void 0;try{for(var g,x=this.DOM.attributes[Symbol.iterator]();!(m=(g=x.next()).done);m=!0){var b=g.value;f[b.nodeName]=b.nodeValue}}catch(w){y=!0,v=w}finally{try{m||x.return==null||x.return()}finally{if(y)throw v}}return!!f[c]}},{key:"getNum",value:function(c,f){var m={},y=!0,v=!1,g=void 0;try{for(var x,b=this.DOM.attributes[Symbol.iterator]();!(y=(x=b.next()).done);y=!0){var w=x.value;m[w.nodeName]=w.nodeValue}}catch(T){v=!0,g=T}finally{try{y||b.return==null||b.return()}finally{if(v)throw g}}return Number(m[c])||f||0}},{key:"getString",value:function(c,f){var m={},y=!0,v=!1,g=void 0;try{for(var x,b=this.DOM.attributes[Symbol.iterator]();!(y=(x=b.next()).done);y=!0){var w=x.value;m[w.nodeName]=w.nodeValue}}catch(T){v=!0,g=T}finally{try{y||b.return==null||b.return()}finally{if(v)throw g}}return m[c]?String(m[c]):f||null}},{key:"setAttribute",value:function(c,f){this.DOM.setAttribute(c,f)}},{key:"getContent",value:function(c){var f=this.DOM.textContent;return(f=f.replace(/\s\s+/g,","))||c||null}},{key:"setContent",value:function(c){this.DOM.children.length||(this.DOM.textContent=c)}},{key:"serialize",value:function(){return new XMLSerializer().serializeToString(this.DOM)}}])&&a(h.prototype,p),u}(),r=s.default,o.default=r},{"../core/main":280,"core-js/modules/es.array.iterator":164,"core-js/modules/es.number.constructor":178,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.replace":201,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/web.dom-collections.iterator":243}],310:[function(r,i,o){r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.math.hypot"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.math.hypot"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.string.includes"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var s=(r=r("../core/main"))&&r.__esModule?r:{default:r};function a(l){return function(u){if(Array.isArray(u)){for(var h=0,p=new Array(u.length);h<u.length;h++)p[h]=u[h];return p}}(l)||function(u){if(Symbol.iterator in Object(u)||Object.prototype.toString.call(u)==="[object Arguments]")return Array.from(u)}(l)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}s.default.prototype.abs=Math.abs,s.default.prototype.ceil=Math.ceil,s.default.prototype.constrain=function(l,u,h){return s.default._validateParameters("constrain",arguments),Math.max(Math.min(l,h),u)},s.default.prototype.dist=function(){for(var l=arguments.length,u=new Array(l),h=0;h<l;h++)u[h]=arguments[h];return s.default._validateParameters("dist",u),u.length===4?Math.hypot(u[2]-u[0],u[3]-u[1]):u.length===6?Math.hypot(u[3]-u[0],u[4]-u[1],u[5]-u[2]):void 0},s.default.prototype.exp=Math.exp,s.default.prototype.floor=Math.floor,s.default.prototype.lerp=function(l,u,h){return s.default._validateParameters("lerp",arguments),h*(u-l)+l},s.default.prototype.log=Math.log,s.default.prototype.mag=function(l,u){return s.default._validateParameters("mag",arguments),Math.hypot(l,u)},s.default.prototype.map=function(l,u,h,p,c,f){return s.default._validateParameters("map",arguments),l=(l-u)/(h-u)*(c-p)+p,f?p<c?this.constrain(l,p,c):this.constrain(l,c,p):l},s.default.prototype.max=function(){for(var l=function(c){return Math.max.apply(Math,a(c))},u=arguments.length,h=new Array(u),p=0;p<u;p++)h[p]=arguments[p];return Array.isArray(h[0])?l(h[0]):l(h)},s.default.prototype.min=function(){for(var l=function(c){return Math.min.apply(Math,a(c))},u=arguments.length,h=new Array(u),p=0;p<u;p++)h[p]=arguments[p];return Array.isArray(h[0])?l(h[0]):l(h)},s.default.prototype.norm=function(l,u,h){return s.default._validateParameters("norm",arguments),this.map(l,u,h,0,1)},s.default.prototype.pow=Math.pow,s.default.prototype.round=function(l,u){return u?(u=Math.pow(10,u),Math.round(l*u)/u):Math.round(l)},s.default.prototype.sq=function(l){return l*l},s.default.prototype.sqrt=Math.sqrt,s.default.prototype.fract=function(p){s.default._validateParameters("fract",arguments);var u,h=0,p=Number(p);return isNaN(p)||Math.abs(p)===1/0?p:(p<0&&(p=-p,h=1),String(p).includes(".")&&!String(p).includes("e")?(u=String(p),u=+("0"+u.slice(u.indexOf("."))),Math.abs(h-u)):p<1?Math.abs(h-p):0)},r=s.default,o.default=r},{"../core/main":280,"core-js/modules/es.array.from":161,"core-js/modules/es.array.includes":162,"core-js/modules/es.array.index-of":163,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.map":167,"core-js/modules/es.array.slice":168,"core-js/modules/es.math.hypot":175,"core-js/modules/es.number.constructor":178,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.includes":196,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/web.dom-collections.iterator":243}],311:[function(r,i,o){r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.reflect.construct"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.slice"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var s=(r=r("../core/main"))&&r.__esModule?r:{default:r};function a(u,h,p){return(a=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?Reflect.construct:function(c,f,m){var y=[null];return y.push.apply(y,f),f=new(Function.bind.apply(c,y)),m&&l(f,m.prototype),f}).apply(null,arguments)}function l(u,h){return(l=Object.setPrototypeOf||function(p,c){return p.__proto__=c,p})(u,h)}s.default.prototype.createVector=function(u,h,p){return this instanceof s.default?a(s.default.Vector,[this._fromRadians.bind(this),this._toRadians.bind(this)].concat(Array.prototype.slice.call(arguments))):new s.default.Vector(u,h,p)},r=s.default,o.default=r},{"../core/main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.slice":168,"core-js/modules/es.object.to-string":187,"core-js/modules/es.reflect.construct":189,"core-js/modules/es.regexp.to-string":193}],312:[function(p,i,o){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,p=(p=p("../core/main"))&&p.__esModule?p:{default:p};function s(c){return .5*(1-Math.cos(c*Math.PI))}var a,l=4095,u=4,h=.5,p=(p.default.prototype.noise=function(c){var f=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0;if(a==null){a=new Array(4096);for(var y=0;y<4096;y++)a[y]=Math.random()}c<0&&(c=-c),f<0&&(f=-f),m<0&&(m=-m);for(var v,g,x=Math.floor(c),b=Math.floor(f),w=Math.floor(m),T=c-x,R=f-b,C=m-w,P=0,I=.5,D=0;D<u;D++){var j=x+(b<<4)+(w<<8),N=s(T),O=s(R),W=a[j&l];W+=N*(a[j+1&l]-W),v=a[j+16&l],W+=O*((v+=N*(a[j+16+1&l]-v))-W),v=a[(j+=256)&l],v+=N*(a[j+1&l]-v),g=a[j+16&l],v+=O*((g+=N*(a[j+16+1&l]-g))-v),P+=(W+=s(C)*(v-W))*I,I*=h,x<<=1,b<<=1,w<<=1,1<=(T*=2)&&(x++,T--),1<=(R*=2)&&(b++,R--),1<=(C*=2)&&(w++,C--)}return P},p.default.prototype.noiseDetail=function(c,f){0<c&&(u=c),0<f&&(h=f)},p.default.prototype.noiseSeed=function(c){y=4294967296;var f,m,y,v={setSeed:function(x){m=f=(x??Math.random()*y)>>>0},getSeed:function(){return f},rand:function(){return(m=(1664525*m+1013904223)%y)/y}};v.setSeed(c),a=new Array(4096);for(var g=0;g<4096;g++)a[g]=v.rand()},p.default);o.default=p},{"../core/main":280}],313:[function(r,i,o){function s(f){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(f)}function a(f){return(a=typeof Symbol=="function"&&s(Symbol.iterator)==="symbol"?function(m){return s(m)}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":s(m)})(f)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.every"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.some"),r("core-js/modules/es.math.sign"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.number.is-finite"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.sub"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.every"),r("core-js/modules/es.array.some"),r("core-js/modules/es.math.sign"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.number.is-finite"),r("core-js/modules/es.string.sub"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var l=(c=r("../core/main"))&&c.__esModule?c:{default:c},u=function(f){if(f&&f.__esModule)return f;if(f===null||a(f)!=="object"&&typeof f!="function")return{default:f};var m=h();if(m&&m.has(f))return m.get(f);var y,v={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(y in f){var x;Object.prototype.hasOwnProperty.call(f,y)&&((x=g?Object.getOwnPropertyDescriptor(f,y):null)&&(x.get||x.set)?Object.defineProperty(v,y,x):v[y]=f[y])}return v.default=f,m&&m.set(f,v),v}(r("../core/constants"));function h(){var f;return typeof WeakMap!="function"?null:(f=new WeakMap,h=function(){return f},f)}function p(f,m){for(var y=0;y<m.length;y++){var v=m[y];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(f,v.key,v)}}l.default.Vector=function(){function f(){var w=this,g=f;if(!(w instanceof g))throw new TypeError("Cannot call a class as a function");var x,b,w=typeof(arguments.length<=0?void 0:arguments[0])=="function"?(this.isPInst=!0,this._fromRadians=arguments.length<=0?void 0:arguments[0],this._toRadians=arguments.length<=1?void 0:arguments[1],x=(arguments.length<=2?void 0:arguments[2])||0,b=(arguments.length<=3?void 0:arguments[3])||0,(arguments.length<=4?void 0:arguments[4])||0):(x=(arguments.length<=0?void 0:arguments[0])||0,b=(arguments.length<=1?void 0:arguments[1])||0,(arguments.length<=2?void 0:arguments[2])||0);this.x=x,this.y=b,this.z=w}var m,y,v;return m=f,v=[{key:"fromAngle",value:function(g){var x=1<arguments.length&&arguments[1]!==void 0?arguments[1]:1;return new l.default.Vector(x*Math.cos(g),x*Math.sin(g),0)}},{key:"fromAngles",value:function(C,T){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:1,w=Math.cos(T),T=Math.sin(T),R=Math.cos(C),C=Math.sin(C);return new l.default.Vector(b*C*T,-b*R,b*C*w)}},{key:"random2D",value:function(){return this.fromAngle(Math.random()*u.TWO_PI)}},{key:"random3D",value:function(){var g=Math.random()*u.TWO_PI,x=2*Math.random()-1,w=Math.sqrt(1-x*x),b=w*Math.cos(g),w=w*Math.sin(g);return new l.default.Vector(b,w,x)}},{key:"copy",value:function(g){return g.copy(g)}},{key:"add",value:function(){for(var g=arguments.length,x=new Array(g),b=0;b<g;b++)x[b]=arguments[b];var w=x[0],T=x[1],R=x[2];return R?R.set(w):(R=w.copy(),x.length===3&&l.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.add")),R.add(T),R}},{key:"rem",value:function(g,x){if(g instanceof l.default.Vector&&x instanceof l.default.Vector)return(g=g.copy()).rem(x),g}},{key:"sub",value:function(){for(var g=arguments.length,x=new Array(g),b=0;b<g;b++)x[b]=arguments[b];var w=x[0],T=x[1],R=x[2];return R?R.set(w):(R=w.copy(),x.length===3&&l.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.sub")),R.sub(T),R}},{key:"mult",value:function(){for(var g=arguments.length,x=new Array(g),b=0;b<g;b++)x[b]=arguments[b];var w=x[0],T=x[1],R=x[2];return R?R.set(w):(R=w.copy(),x.length===3&&l.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.mult")),R.mult(T),R}},{key:"rotate",value:function(){for(var g=arguments.length,x=new Array(g),b=0;b<g;b++)x[b]=arguments[b];var w=x[0],T=x[1],R=x[2];return x.length===2?R=w.copy():(R instanceof l.default.Vector||l.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.rotate"),R.set(w)),R.rotate(T),R}},{key:"div",value:function(){for(var g=arguments.length,x=new Array(g),b=0;b<g;b++)x[b]=arguments[b];var w=x[0],T=x[1],R=x[2];return R?R.set(w):(R=w.copy(),x.length===3&&l.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.div")),R.div(T),R}},{key:"dot",value:function(g,x){return g.dot(x)}},{key:"cross",value:function(g,x){return g.cross(x)}},{key:"dist",value:function(g,x){return g.dist(x)}},{key:"lerp",value:function(){for(var g=arguments.length,x=new Array(g),b=0;b<g;b++)x[b]=arguments[b];var w=x[0],T=x[1],R=x[2],C=x[3];return C?C.set(w):(C=w.copy(),x.length===4&&l.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.lerp")),C.lerp(T,R),C}},{key:"slerp",value:function(){for(var g=arguments.length,x=new Array(g),b=0;b<g;b++)x[b]=arguments[b];var w=x[0],T=x[1],R=x[2],C=x[3];return C?C.set(w):(C=w.copy(),x.length===4&&l.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.slerp")),C.slerp(T,R),C}},{key:"mag",value:function(g){return g.mag()}},{key:"magSq",value:function(g){return g.magSq()}},{key:"normalize",value:function(){for(var g=arguments.length,x=new Array(g),b=0;b<g;b++)x[b]=arguments[b];var w=x[0],T=x[1];return x.length<2?T=w.copy():(T instanceof l.default.Vector||l.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.normalize"),T.set(w)),T.normalize()}},{key:"limit",value:function(){for(var g=arguments.length,x=new Array(g),b=0;b<g;b++)x[b]=arguments[b];var w=x[0],T=x[1],R=x[2];return x.length<3?R=w.copy():(R instanceof l.default.Vector||l.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.limit"),R.set(w)),R.limit(T)}},{key:"setMag",value:function(){for(var g=arguments.length,x=new Array(g),b=0;b<g;b++)x[b]=arguments[b];var w=x[0],T=x[1],R=x[2];return x.length<3?R=w.copy():(R instanceof l.default.Vector||l.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.setMag"),R.set(w)),R.setMag(T)}},{key:"heading",value:function(g){return g.heading()}},{key:"angleBetween",value:function(g,x){return g.angleBetween(x)}},{key:"reflect",value:function(){for(var g=arguments.length,x=new Array(g),b=0;b<g;b++)x[b]=arguments[b];var w=x[0],T=x[1],R=x[2];return x.length<3?R=w.copy():(R instanceof l.default.Vector||l.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.reflect"),R.set(w)),R.reflect(T)}},{key:"array",value:function(g){return g.array()}},{key:"equals",value:function(g,x){var b;return g instanceof l.default.Vector?b=g:Array.isArray(g)?b=new l.default.Vector().set(g):l.default._friendlyError("The v1 parameter should be of type Array or p5.Vector","p5.Vector.equals"),b.equals(x)}}],(y=[{key:"toString",value:function(){return"p5.Vector Object : [".concat(this.x,", ").concat(this.y,", ").concat(this.z,"]")}},{key:"set",value:function(g,x,b){return g instanceof l.default.Vector?(this.x=g.x||0,this.y=g.y||0,this.z=g.z||0):Array.isArray(g)?(this.x=g[0]||0,this.y=g[1]||0,this.z=g[2]||0):(this.x=g||0,this.y=x||0,this.z=b||0),this}},{key:"copy",value:function(){return this.isPInst?new l.default.Vector(this._fromRadians,this._toRadians,this.x,this.y,this.z):new l.default.Vector(this.x,this.y,this.z)}},{key:"add",value:function(g,x,b){return g instanceof l.default.Vector?(this.x+=g.x||0,this.y+=g.y||0,this.z+=g.z||0):Array.isArray(g)?(this.x+=g[0]||0,this.y+=g[1]||0,this.z+=g[2]||0):(this.x+=g||0,this.y+=x||0,this.z+=b||0),this}},{key:"calculateRemainder2D",value:function(g,x){return g!==0&&(this.x=this.x%g),x!==0&&(this.y=this.y%x),this}},{key:"calculateRemainder3D",value:function(g,x,b){return g!==0&&(this.x=this.x%g),x!==0&&(this.y=this.y%x),b!==0&&(this.z=this.z%b),this}},{key:"rem",value:function(){for(var g=arguments.length,x=new Array(g),b=0;b<g;b++)x[b]=arguments[b];var w,T,R,C=x[0],P=x[1],I=x[2];if(C instanceof l.default.Vector){if([C.x,C.y,C.z].every(Number.isFinite))return w=parseFloat(C.x),T=parseFloat(C.y),R=parseFloat(C.z),this.calculateRemainder3D(w,T,R)}else if(Array.isArray(C)){if(C.every(Number.isFinite))return C.length===2?this.calculateRemainder2D(C[0],C[1]):C.length===3?this.calculateRemainder3D(C[0],C[1],C[2]):void 0}else if(x.length===1){if(Number.isFinite(C)&&C!==0)return this.x=this.x%C,this.y=this.y%C,this.z=this.z%C,this}else if(x.length===2){if(x.every(Number.isFinite))return this.calculateRemainder2D(C,P)}else if(x.length===3&&x.every(Number.isFinite))return this.calculateRemainder3D(C,P,I)}},{key:"sub",value:function(g,x,b){return g instanceof l.default.Vector?(this.x-=g.x||0,this.y-=g.y||0,this.z-=g.z||0):Array.isArray(g)?(this.x-=g[0]||0,this.y-=g[1]||0,this.z-=g[2]||0):(this.x-=g||0,this.y-=x||0,this.z-=b||0),this}},{key:"mult",value:function(){for(var g=arguments.length,x=new Array(g),b=0;b<g;b++)x[b]=arguments[b];var w,T=x[0],R=x[1],C=x[2];return T instanceof l.default.Vector?Number.isFinite(T.x)&&Number.isFinite(T.y)&&Number.isFinite(T.z)&&typeof T.x=="number"&&typeof T.y=="number"&&typeof T.z=="number"?(this.x*=T.x,this.y*=T.y,this.z*=T.z):console.warn("p5.Vector.prototype.mult:","x contains components that are either undefined or not finite numbers"):Array.isArray(T)?T.every(function(P){return Number.isFinite(P)})&&T.every(function(P){return typeof P=="number"})?T.length===1?(this.x*=T[0],this.y*=T[0],this.z*=T[0]):T.length===2?(this.x*=T[0],this.y*=T[1]):T.length===3&&(this.x*=T[0],this.y*=T[1],this.z*=T[2]):console.warn("p5.Vector.prototype.mult:","x contains elements that are either undefined or not finite numbers"):(w=x).every(function(P){return Number.isFinite(P)})&&w.every(function(P){return typeof P=="number"})?(x.length===1&&(this.x*=T,this.y*=T,this.z*=T),x.length===2&&(this.x*=T,this.y*=R),x.length===3&&(this.x*=T,this.y*=R,this.z*=C)):console.warn("p5.Vector.prototype.mult:","x, y, or z arguments are either undefined or not a finite number"),this}},{key:"div",value:function(){for(var g=arguments.length,x=new Array(g),b=0;b<g;b++)x[b]=arguments[b];var w=x[0],T=x[1],R=x[2];if(w instanceof l.default.Vector)if(Number.isFinite(w.x)&&Number.isFinite(w.y)&&Number.isFinite(w.z)&&typeof w.x=="number"&&typeof w.y=="number"&&typeof w.z=="number"){var C=w.z===0&&this.z===0;if(w.x===0||w.y===0||!C&&w.z===0)return console.warn("p5.Vector.prototype.div:","divide by 0"),this;this.x/=w.x,this.y/=w.y,C||(this.z/=w.z)}else console.warn("p5.Vector.prototype.div:","x contains components that are either undefined or not finite numbers");else if(Array.isArray(w))if(w.every(Number.isFinite)&&w.every(function(P){return typeof P=="number"})){if(w.some(function(P){return P===0}))return console.warn("p5.Vector.prototype.div:","divide by 0"),this;w.length===1?(this.x/=w[0],this.y/=w[0],this.z/=w[0]):w.length===2?(this.x/=w[0],this.y/=w[1]):w.length===3&&(this.x/=w[0],this.y/=w[1],this.z/=w[2])}else console.warn("p5.Vector.prototype.div:","x contains components that are either undefined or not finite numbers");else if(x.every(Number.isFinite)&&x.every(function(P){return typeof P=="number"})){if(x.some(function(P){return P===0}))return console.warn("p5.Vector.prototype.div:","divide by 0"),this;x.length===1&&(this.x/=w,this.y/=w,this.z/=w),x.length===2&&(this.x/=w,this.y/=T),x.length===3&&(this.x/=w,this.y/=T,this.z/=R)}else console.warn("p5.Vector.prototype.div:","x, y, or z arguments are either undefined or not a finite number");return this}},{key:"mag",value:function(){return Math.sqrt(this.magSq())}},{key:"magSq",value:function(){var g=this.x,x=this.y,b=this.z;return g*g+x*x+b*b}},{key:"dot",value:function(g,x,b){return g instanceof l.default.Vector?this.dot(g.x,g.y,g.z):this.x*(g||0)+this.y*(x||0)+this.z*(b||0)}},{key:"cross",value:function(w){var x=this.y*w.z-this.z*w.y,b=this.z*w.x-this.x*w.z,w=this.x*w.y-this.y*w.x;return this.isPInst?new l.default.Vector(this._fromRadians,this._toRadians,x,b,w):new l.default.Vector(x,b,w)}},{key:"dist",value:function(g){return g.copy().sub(this).mag()}},{key:"normalize",value:function(){var g=this.mag();return g!==0&&this.mult(1/g),this}},{key:"limit",value:function(g){var x=this.magSq();return g*g<x&&this.div(Math.sqrt(x)).mult(g),this}},{key:"setMag",value:function(g){return this.normalize().mult(g)}},{key:"heading",value:function(){var g=Math.atan2(this.y,this.x);return this.isPInst?this._fromRadians(g):g}},{key:"setHeading",value:function(g){this.isPInst&&(g=this._toRadians(g));var x=this.mag();return this.x=x*Math.cos(g),this.y=x*Math.sin(g),this}},{key:"rotate",value:function(x){var x=this.heading()+x,b=(this.isPInst&&(x=this._toRadians(x)),this.mag());return this.x=Math.cos(x)*b,this.y=Math.sin(x)*b,this}},{key:"angleBetween",value:function(g){var x;return this.magSq()*g.magSq()==0?NaN:(x=this.cross(g),g=Math.atan2(x.mag(),this.dot(g))*Math.sign(x.z||1),this.isPInst?this._fromRadians(g):g)}},{key:"lerp",value:function(g,x,b,w){return g instanceof l.default.Vector?this.lerp(g.x,g.y,g.z,x):(this.x+=(g-this.x)*w||0,this.y+=(x-this.y)*w||0,this.z+=(b-this.z)*w||0,this)}},{key:"slerp",value:function(g,x){if(x!==0){if(x===1)return this.set(g);var b=this.mag(),w=g.mag();if(b*w==0)this.mult(1-x).add(g.x*x,g.y*x,g.z*x);else{var T=this.cross(g),R=T.mag(),C=Math.atan2(R,this.dot(g));if(0<R)T.x/=R,T.y/=R,T.z/=R;else{if(C<.5*Math.PI)return this.mult(1-x).add(g.x*x,g.y*x,g.z*x),this;this.z===0&&g.z===0?T.set(0,0,1):this.x!==0?T.set(this.y,-this.x,0).normalize():T.set(1,0,0)}R=T.cross(this),g=1-x+x*w/b,T=g*Math.cos(x*C),w=g*Math.sin(x*C),this.x=this.x*T+R.x*w,this.y=this.y*T+R.y*w,this.z=this.z*T+R.z*w}}return this}},{key:"reflect",value:function(g){return g.normalize(),this.sub(g.mult(2*this.dot(g)))}},{key:"array",value:function(){return[this.x||0,this.y||0,this.z||0]}},{key:"equals",value:function(R,x,b){var w,T,R=R instanceof l.default.Vector?(w=R.x||0,T=R.y||0,R.z||0):Array.isArray(R)?(w=R[0]||0,T=R[1]||0,R[2]||0):(w=R||0,T=x||0,b||0);return this.x===w&&this.y===T&&this.z===R}}])&&p(m.prototype,y),v&&p(m,v),f}();var c=l.default.Vector;o.default=c},{"../core/constants":269,"../core/main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.every":154,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.some":169,"core-js/modules/es.math.sign":177,"core-js/modules/es.number.constructor":178,"core-js/modules/es.number.is-finite":179,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.sub":205,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],314:[function(h,i,o){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var s=(h=h("../core/main"))&&h.__esModule?h:{default:h},a="_lcg_random_state",l=4294967296,u=0,h=(s.default.prototype._lcg=function(p){return this[p]=(1664525*this[p]+1013904223)%l,this[p]/l},s.default.prototype._lcgSetSeed=function(p,c){this[p]=(c??Math.random()*l)>>>0},s.default.prototype.randomSeed=function(p){this._lcgSetSeed(a,p),this._gaussian_previous=!1},s.default.prototype.random=function(p,c){var f,m;return s.default._validateParameters("random",arguments),f=this[a]!=null?this._lcg(a):Math.random(),p===void 0?f:c===void 0?Array.isArray(p)?p[Math.floor(f*p.length)]:f*p:(c<p&&(m=p,p=c,c=m),f*(c-p)+p)},s.default.prototype.randomGaussian=function(p){var c,f,m,y,v=1<arguments.length&&arguments[1]!==void 0?arguments[1]:1;if(this._gaussian_previous)c=u,this._gaussian_previous=!1;else{for(;1<=(y=(f=this.random(2)-1)*f+(m=this.random(2)-1)*m););c=f*(y=Math.sqrt(-2*Math.log(y)/y)),u=m*y,this._gaussian_previous=!0}return c*v+(p||0)},s.default);o.default=h},{"../core/main":280}],315:[function(r,i,o){function s(c){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(c)}function a(c){return(a=typeof Symbol=="function"&&s(Symbol.iterator)==="symbol"?function(f){return s(f)}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":s(f)})(c)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var l=(p=r("../core/main"))&&p.__esModule?p:{default:p},u=function(c){if(c&&c.__esModule)return c;if(c===null||a(c)!=="object"&&typeof c!="function")return{default:c};var f=h();if(f&&f.has(c))return f.get(c);var m,y={},v=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(m in c){var g;Object.prototype.hasOwnProperty.call(c,m)&&((g=v?Object.getOwnPropertyDescriptor(c,m):null)&&(g.get||g.set)?Object.defineProperty(y,m,g):y[m]=c[m])}return y.default=c,f&&f.set(c,y),y}(r("../core/constants"));function h(){var c;return typeof WeakMap!="function"?null:(c=new WeakMap,h=function(){return c},c)}l.default.prototype._angleMode=u.RADIANS,l.default.prototype.acos=function(c){return this._fromRadians(Math.acos(c))},l.default.prototype.asin=function(c){return this._fromRadians(Math.asin(c))},l.default.prototype.atan=function(c){return this._fromRadians(Math.atan(c))},l.default.prototype.atan2=function(c,f){return this._fromRadians(Math.atan2(c,f))},l.default.prototype.cos=function(c){return Math.cos(this._toRadians(c))},l.default.prototype.sin=function(c){return Math.sin(this._toRadians(c))},l.default.prototype.tan=function(c){return Math.tan(this._toRadians(c))},l.default.prototype.degrees=function(c){return c*u.RAD_TO_DEG},l.default.prototype.radians=function(c){return c*u.DEG_TO_RAD},l.default.prototype.angleMode=function(c){if(l.default._validateParameters("angleMode",arguments),c===void 0)return this._angleMode;c!==u.DEGREES&&c!==u.RADIANS||c!==this._angleMode&&(c===u.RADIANS?(this._setProperty("pRotationX",this.pRotationX*u.DEG_TO_RAD),this._setProperty("pRotationY",this.pRotationY*u.DEG_TO_RAD),this._setProperty("pRotationZ",this.pRotationZ*u.DEG_TO_RAD)):(this._setProperty("pRotationX",this.pRotationX*u.RAD_TO_DEG),this._setProperty("pRotationY",this.pRotationY*u.RAD_TO_DEG),this._setProperty("pRotationZ",this.pRotationZ*u.RAD_TO_DEG)),this._angleMode=c)},l.default.prototype._toRadians=function(c){return this._angleMode===u.DEGREES?c*u.DEG_TO_RAD:c},l.default.prototype._toDegrees=function(c){return this._angleMode===u.RADIANS?c*u.RAD_TO_DEG:c},l.default.prototype._fromRadians=function(c){return this._angleMode===u.DEGREES?c*u.RAD_TO_DEG:c},l.default.prototype._fromDegrees=function(c){return this._angleMode===u.RADIANS?c*u.DEG_TO_RAD:c};var p=l.default;o.default=p},{"../core/constants":269,"../core/main":280,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],316:[function(r,i,o){r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var s=(r=r("../core/main"))&&r.__esModule?r:{default:r};s.default.prototype.textAlign=function(a,l){var u;return s.default._validateParameters("textAlign",arguments),(u=this._renderer).textAlign.apply(u,arguments)},s.default.prototype.textLeading=function(a){var l;return s.default._validateParameters("textLeading",arguments),(l=this._renderer).textLeading.apply(l,arguments)},s.default.prototype.textSize=function(a){var l;return s.default._validateParameters("textSize",arguments),(l=this._renderer).textSize.apply(l,arguments)},s.default.prototype.textStyle=function(a){var l;return s.default._validateParameters("textStyle",arguments),(l=this._renderer).textStyle.apply(l,arguments)},s.default.prototype.textWidth=function(){for(var a=arguments.length,l=new Array(a),u=0;u<a;u++)l[u]=arguments[u];if(l[0]+="",s.default._validateParameters("textWidth",l),l[0].length===0)return 0;for(var h=l[0].replace(/\t/g,"  ").split(/\r?\n|\r|\n/g),p=[],c=0;c<h.length;c++)p.push(this._renderer.textWidth(h[c]));return Math.max.apply(Math,p)},s.default.prototype.textAscent=function(){for(var a=arguments.length,l=new Array(a),u=0;u<a;u++)l[u]=arguments[u];return s.default._validateParameters("textAscent",l),this._renderer.textAscent()},s.default.prototype.textDescent=function(){for(var a=arguments.length,l=new Array(a),u=0;u<a;u++)l[u]=arguments[u];return s.default._validateParameters("textDescent",l),this._renderer.textDescent()},s.default.prototype._updateTextMetrics=function(){return this._renderer._updateTextMetrics()},s.default.prototype.textWrap=function(a){return s.default._validateParameters("textWrap",[a]),this._renderer.textWrap(a)},r=s.default,o.default=r},{"../core/main":280,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.string.replace":201,"core-js/modules/es.string.split":203}],317:[function(r,i,o){function s(m){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y})(m)}function a(m){return(a=typeof Symbol=="function"&&s(Symbol.iterator)==="symbol"?function(y){return s(y)}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":s(y)})(m)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.last-index-of"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.split"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.last-index-of"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.split"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var l=(f=r("../core/main"))&&f.__esModule?f:{default:f},u=c(r("../core/constants")),h=c(r("opentype.js"));function p(){var m;return typeof WeakMap!="function"?null:(m=new WeakMap,p=function(){return m},m)}function c(m){if(m&&m.__esModule)return m;if(m===null||a(m)!=="object"&&typeof m!="function")return{default:m};var y=p();if(y&&y.has(m))return y.get(m);var v,g,x={},b=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(v in m)Object.prototype.hasOwnProperty.call(m,v)&&((g=b?Object.getOwnPropertyDescriptor(m,v):null)&&(g.get||g.set)?Object.defineProperty(x,v,g):x[v]=m[v]);return x.default=m,y&&y.set(m,x),x}r("../core/friendly_errors/validate_params"),r("../core/friendly_errors/file_errors"),r("../core/friendly_errors/fes_core"),l.default.prototype.loadFont=function(m,y,v){l.default._validateParameters("loadFont",arguments);var g=new l.default.Font(this),x=this;return h.load(m,function(T,R){if(T)return l.default._friendlyFileLoadError(4,m),v!==void 0?v(T):void console.error(T,m);g.font=R,y!==void 0&&y(g),x._decrementPreload();var T=m.split("\\").pop().split("/").pop(),R=T.lastIndexOf("."),C=R<1?null:T.slice(R+1);["ttf","otf","woff","woff2"].includes(C)&&(C=T.slice(0,R!==-1?R:0),(T=document.createElement("style")).appendChild(document.createTextNode(`
@font-face {
font-family: `.concat(C,`;
src: url(`).concat(m,`);
}
`))),document.head.appendChild(T))}),g},l.default.prototype.text=function(m,y,v,g,x){var b;return l.default._validateParameters("text",arguments),this._renderer._doFill||this._renderer._doStroke?(b=this._renderer).text.apply(b,arguments):this},l.default.prototype.textFont=function(m,y){if(l.default._validateParameters("textFont",arguments),arguments.length){if(m)return this._renderer._setProperty("_textFont",m),y&&(this._renderer._setProperty("_textSize",y),this._renderer._leadingSet||this._renderer._setProperty("_textLeading",y*u._DEFAULT_LEADMULT)),this._renderer._applyTextProperties();throw new Error("null font passed to textFont")}return this._renderer._textFont};var f=l.default;o.default=f},{"../core/constants":269,"../core/friendly_errors/fes_core":271,"../core/friendly_errors/file_errors":272,"../core/friendly_errors/validate_params":275,"../core/main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.includes":162,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.last-index-of":166,"core-js/modules/es.array.slice":168,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.split":203,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243,"opentype.js":254}],318:[function(r,i,o){function s(P){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(I){return typeof I}:function(I){return I&&typeof Symbol=="function"&&I.constructor===Symbol&&I!==Symbol.prototype?"symbol":typeof I})(P)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.fill"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.function.name"),r("core-js/modules/es.number.to-fixed"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.fill"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.function.name"),r("core-js/modules/es.number.to-fixed"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var a=(a=r("../core/main"))&&a.__esModule?a:{default:a},l=function(P){if(P&&P.__esModule)return P;if(P===null||h(P)!=="object"&&typeof P!="function")return{default:P};var I=u();if(I&&I.has(P))return I.get(P);var D,j={},N=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(D in P){var O;Object.prototype.hasOwnProperty.call(P,D)&&((O=N?Object.getOwnPropertyDescriptor(P,D):null)&&(O.get||O.set)?Object.defineProperty(j,D,O):j[D]=P[D])}return j.default=P,I&&I.set(P,j),j}(r("../core/constants"));function u(){var P;return typeof WeakMap!="function"?null:(P=new WeakMap,u=function(){return P},P)}function h(P){return(h=typeof Symbol=="function"&&s(Symbol.iterator)==="symbol"?function(I){return s(I)}:function(I){return I&&typeof Symbol=="function"&&I.constructor===Symbol&&I!==Symbol.prototype?"symbol":s(I)})(P)}function p(P,I){for(var D=0;D<I.length;D++){var j=I[D];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(P,j.key,j)}}function c(P,I){var D=P.length;return P[I<0?I%D+D:I%D]}function f(P,I,D,j){var N,O,W;return j?(f.tmpPoint1===void 0&&(f.tmpPoint1=[],f.tmpPoint2=[]),O=f.tmpPoint1,W=f.tmpPoint2,O.x=I.x-P.x,O.y=I.y-P.y,W.x=D.x-I.x,W.y=D.y-I.y,N=O.x*W.x+O.y*W.y,O=Math.sqrt(O.x*O.x+O.y*O.y),W=Math.sqrt(W.x*W.x+W.y*W.y),Math.acos(N/(O*W))<j):(I[0]-P[0])*(D[1]-P[1])-(D[0]-P[0])*(I[1]-P[1])==0}function m(U,re,K,ae,pe,O,W,X,J){var ee=1-J,q=Math.pow(ee,3),Y=Math.pow(ee,2),B=J*J,Z=B*J,V=q*U+3*Y*J*K+3*ee*J*J*pe+Z*W,q=q*re+3*Y*J*ae+3*ee*J*J*O+Z*X,Y=U+2*J*(K-U)+B*(pe-2*K+U),Z=re+2*J*(ae-re)+B*(O-2*ae+re),ce=K+2*J*(pe-K)+B*(W-2*pe+K),B=ae+2*J*(O-ae)+B*(X-2*O+ae),U=ee*U+J*K,K=ee*re+J*ae,re=ee*pe+J*W,ae=ee*O+J*X,pe=90-180*Math.atan2(Y-ce,Z-B)/Math.PI;return(ce<Y||Z<B)&&(pe+=180),{x:V,y:q,m:{x:Y,y:Z},n:{x:ce,y:B},start:{x:U,y:K},end:{x:re,y:ae},alpha:pe}}function y(P,I,D,j,N,O,W,X,J){return J==null?R(P,I,D,j,N,O,W,X):m(P,I,D,j,N,O,W,X,function(ee,V,q,Y,Z,ce,B,U,K){if(!(K<0||R(ee,V,q,Y,Z,ce,B,U)<K)){var re,ae=.5,pe=1-ae;for(re=R(ee,V,q,Y,Z,ce,B,U,pe);.01<Math.abs(re-K);)re=R(ee,V,q,Y,Z,ce,B,U,pe+=(re<K?1:-1)*(ae/=2));return pe}}(P,I,D,j,N,O,W,X,J))}function v(P,I,D){for(var j,N,O,W,X,J=0,ee=0,V=(P=function(q,Y){function Z(je,Ue,Ge){var _e,fe;if(!je)return["C",Ue.x,Ue.y,Ue.x,Ue.y,Ue.x,Ue.y];switch(je[0]in{T:1,Q:1}||(Ue.qx=Ue.qy=null),je[0]){case"M":Ue.X=je[1],Ue.Y=je[2];break;case"A":je=["C"].concat(x.apply(0,[Ue.x,Ue.y].concat(je.slice(1))));break;case"S":fe=Ge==="C"||Ge==="S"?(_e=2*Ue.x-Ue.bx,2*Ue.y-Ue.by):(_e=Ue.x,Ue.y),je=["C",_e,fe].concat(je.slice(1));break;case"T":Ge==="Q"||Ge==="T"?(Ue.qx=2*Ue.x-Ue.qx,Ue.qy=2*Ue.y-Ue.qy):(Ue.qx=Ue.x,Ue.qy=Ue.y),je=["C"].concat(T(Ue.x,Ue.y,Ue.qx,Ue.qy,je[1],je[2]));break;case"Q":Ue.qx=je[1],Ue.qy=je[2],je=["C"].concat(T(Ue.x,Ue.y,je[1],je[2],je[3],je[4]));break;case"L":je=["C"].concat(w(Ue.x,Ue.y,je[1],je[2]));break;case"H":je=["C"].concat(w(Ue.x,Ue.y,je[1],Ue.y));break;case"V":je=["C"].concat(w(Ue.x,Ue.y,Ue.x,je[1]));break;case"Z":je=["C"].concat(w(Ue.x,Ue.y,Ue.X,Ue.Y))}return je}function ce(je,Ue){if(7<je[Ue].length){je[Ue].shift();for(var Ge=je[Ue];Ge.length;)ye[Ue]="A",re&&(Re[Ue]="A"),je.splice(Ue++,0,["C"].concat(Ge.splice(0,6)));je.splice(Ue,1),U=Math.max(K.length,re&&re.length||0)}}function B(je,Ue,Ge,_e,fe){je&&Ue&&je[fe][0]==="M"&&Ue[fe][0]!=="M"&&(Ue.splice(fe,0,["M",_e.x,_e.y]),Ge.bx=0,Ge.by=0,Ge.x=je[fe][1],Ge.y=je[fe][2],U=Math.max(K.length,re&&re.length||0))}var U,K=g(q),re=Y&&g(Y),ae={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},pe={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},ye=[],Re=[],Me="",xe="";U=Math.max(K.length,re&&re.length||0);for(var ve=0;ve<U;ve++){(Me=K[ve]?K[ve][0]:Me)!=="C"&&(ye[ve]=Me,ve&&(xe=ye[ve-1])),K[ve]=Z(K[ve],ae,xe),ye[ve]!=="A"&&Me==="C"&&(ye[ve]="C"),ce(K,ve),re&&((Me=re[ve]?re[ve][0]:Me)!=="C"&&(Re[ve]=Me,ve&&(xe=Re[ve-1])),re[ve]=Z(re[ve],pe,xe),Re[ve]!=="A"&&Me==="C"&&(Re[ve]="C"),ce(re,ve)),B(K,re,ae,pe,ve),B(re,K,pe,ae,ve);var ne=K[ve],Te=re&&re[ve],Pe=ne.length,Ae=re&&Te.length;ae.x=ne[Pe-2],ae.y=ne[Pe-1],ae.bx=parseFloat(ne[Pe-4])||ae.x,ae.by=parseFloat(ne[Pe-3])||ae.y,pe.bx=re&&(parseFloat(Te[Ae-4])||pe.x),pe.by=re&&(parseFloat(Te[Ae-3])||pe.y),pe.x=re&&Te[Ae-2],pe.y=re&&Te[Ae-1]}return re?[K,re]:K}(P)).length;ee<V;ee++){if((O=P[ee])[0]==="M")j=+O[1],N=+O[2];else{if(I<J+(W=y(j,N,O[1],O[2],O[3],O[4],O[5],O[6]))&&!D)return{x:(X=y(j,N,O[1],O[2],O[3],O[4],O[5],O[6],I-J)).x,y:X.y,alpha:X.alpha};J+=W,j=+O[5],N=+O[6]}O.shift()}return X=(X=D?J:m(j,N,O[0],O[1],O[2],O[3],O[4],O[5],1)).alpha?{x:X.x,y:X.y,alpha:X.alpha}:X}function g(P){var I=[],D=0,j=0,N=0,O=0,W=0;if(P){P[0][0]==="M"&&(N=D=+P[0][1],O=j=+P[0][2],W++,I[0]=["M",D,j]);for(var X,J,ee=P.length===3&&P[0][0]==="M"&&P[1][0].toUpperCase()==="R"&&P[2][0].toUpperCase()==="Z",V=W,q=P.length;V<q;V++){if(I.push(X=[]),(J=P[V])[0]!==J[0].toUpperCase())switch(X[0]=J[0].toUpperCase(),X[0]){case"A":X[1]=J[1],X[2]=J[2],X[3]=J[3],X[4]=J[4],X[5]=J[5],X[6]=+(J[6]+D),X[7]=+(J[7]+j);break;case"V":X[1]=+J[1]+j;break;case"H":X[1]=+J[1]+D;break;case"R":for(var Y,Z=2,ce=(Y=[D,j].concat(J.slice(1))).length;Z<ce;Z++)Y[Z]=+Y[Z]+D,Y[++Z]=+Y[Z]+j;I.pop(),I=I.concat(b(Y,ee));break;case"M":N=+J[1]+D,O=+J[2]+j;break;default:for(var B=1,U=J.length;B<U;B++)X[B]=+J[B]+(B%2?D:j)}else if(J[0]==="R")Y=[D,j].concat(J.slice(1)),I.pop(),I=I.concat(b(Y,ee)),X=["R"].concat(J.slice(-2));else for(var K=0,re=J.length;K<re;K++)X[K]=J[K];switch(X[0]){case"Z":D=N,j=O;break;case"H":D=X[1];break;case"V":j=X[1];break;case"M":N=X[X.length-2],O=X[X.length-1];break;default:D=X[X.length-2],j=X[X.length-1]}}}return I}function x(P,I,D,j,re,ye,ae,X,J,ee){function V(Ae,je,Ue){return{x:Ae*Math.cos(Ue)-je*Math.sin(Ue),y:Ae*Math.sin(Ue)+je*Math.cos(Ue)}}var q,U=Math.PI,K=120*U/180,Y=U/180*(+re||0),Z=[],ce=(ee?(ve=ee[0],q=ee[1],Me=ee[2],xe=ee[3]):(P=(pe=V(P,I,-Y)).x,I=pe.y,1<(ce=(B=(P-(X=(pe=V(X,J,-Y)).x))/2)*B/(D*D)+(pe=(I-(J=pe.y))/2)*pe/(j*j))&&(D*=ce=Math.sqrt(ce),j*=ce),ce=D*D,Re=j*j,Me=(ye=(ye===ae?-1:1)*Math.sqrt(Math.abs((ce*Re-ce*pe*pe-Re*B*B)/(ce*pe*pe+Re*B*B))))*D*pe/j+(P+X)/2,xe=ye*-j*B/D+(I+J)/2,ve=Math.asin(((I-xe)/j).toFixed(9)),q=Math.asin(((J-xe)/j).toFixed(9)),(ve=P<Me?U-ve:ve)<0&&(ve=2*U+ve),(q=X<Me?U-q:q)<0&&(q=2*U+q),ae&&q<ve&&(ve-=2*U),!ae&&ve<q&&(q-=2*U)),q-ve),B=(Math.abs(ce)>K&&(Re=q,pe=X,ye=J,q=ve+K*(ae&&ve<q?1:-1),Z=x(X=Me+D*Math.cos(q),J=xe+j*Math.sin(q),D,j,re,0,ae,pe,ye,[q,Re,Me,xe])),ce=q-ve,Math.cos(ve)),U=Math.sin(ve),K=Math.cos(q),re=Math.sin(q),ae=Math.tan(ce/4),pe=4/3*D*ae,ye=4/3*j*ae,Re=[P,I],Me=[P+pe*U,I-ye*B],xe=[X+pe*re,J-ye*K],ve=[X,J];if(Me[0]=2*Re[0]-Me[0],Me[1]=2*Re[1]-Me[1],ee)return[Me,xe,ve].concat(Z);for(var ne=[],Te=0,Pe=(Z=[Me,xe,ve].concat(Z).join().split(",")).length;Te<Pe;Te++)ne[Te]=Te%2?V(Z[Te-1],Z[Te],Y).y:V(Z[Te],Z[Te+1],Y).x;return ne}function b(P,I){for(var D=[],j=0,N=P.length;j<N-2*!I;j+=2){var O=[{x:+P[j-2],y:+P[j-1]},{x:+P[j],y:+P[j+1]},{x:+P[j+2],y:+P[j+3]},{x:+P[j+4],y:+P[j+5]}];I?j?N-4===j?O[3]={x:+P[0],y:+P[1]}:N-2===j&&(O[2]={x:+P[0],y:+P[1]},O[3]={x:+P[2],y:+P[3]}):O[0]={x:+P[N-2],y:+P[N-1]}:N-4===j?O[3]=O[2]:j||(O[0]={x:+P[j],y:+P[j+1]}),D.push(["C",(-O[0].x+6*O[1].x+O[2].x)/6,(-O[0].y+6*O[1].y+O[2].y)/6,(O[1].x+6*O[2].x-O[3].x)/6,(O[1].y+6*O[2].y-O[3].y)/6,O[2].x,O[2].y])}return D}function w(P,I,D,j){return[P,I,D,j,D,j]}function T(P,I,D,j,N,O){return[1/3*P+2/3*D,1/3*I+2/3*j,1/3*N+2/3*D,1/3*O+2/3*j,N,O]}function R(P,I,D,j,N,O,W,X,J){for(var ee=(J=1<(J=J??1)?1:J<0?0:J)/2,V=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],q=0,Y=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],Z=0;Z<12;Z++){var B=ee*V[Z]+ee,ce=C(B,P,D,N,W),B=C(B,I,j,O,X);q+=Y[Z]*Math.sqrt(ce*ce+B*B)}return ee*q}function C(P,I,D,j,N){return P*(P*(-3*I+9*D-9*j+3*N)+6*I-12*D+6*j)-3*I+3*D}a.default.Font=function(){function P(j){if(!(this instanceof P))throw new TypeError("Cannot call a class as a function");this.parent=j,this.cache={},this.font=void 0}var I,D;return I=P,(D=[{key:"textBounds",value:function(j){var N=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,O=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0,ee=3<arguments.length?arguments[3]:void 0,W=4<arguments.length?arguments[4]:void 0,X=W&&W.renderer&&W.renderer._pInst||this.parent,J=X._renderer.drawingContext,ee=(J.textAlign||l.LEFT,J.textBaseline||l.BASELINE,ee||X._renderer._textSize);if(!pe){for(var V=[],q=[],Y=[],Z=(Y[0]=[],[]),ce=this._scale(ee),B=X._renderer.textLeading(),U=0,K=(this.font.forEachGlyph(j,N,O,ee,W,function(Me,xe,ve,ne){var Te=Me.getMetrics();Me.index===0?Y[U+=1]=[]:(Y[U].push(xe+Te.xMin*ce),Y[U].push(xe+Te.xMax*ce),Z.push(ve+U*B+-Te.yMin*ce),Z.push(ve+U*B+-Te.yMax*ce))}),0<Y[U].length&&(V[U]=Math.min.apply(null,Y[U]),q[U]=Math.max.apply(null,Y[U])),0),re=0;re<=U;re++){V[re]=Math.min.apply(null,Y[re]),q[re]=Math.max.apply(null,Y[re]);var ae=q[re]-V[re];K<ae&&(K=ae)}var J=Math.min.apply(null,V),pe={x:J,y:O=Math.min.apply(null,Z),h:Math.max.apply(null,Z)-O,w:K,advance:J-N},ee=this._handleAlignment(X._renderer,j,pe.x,pe.y,pe.w+pe.advance);pe.x=ee.x,pe.y=ee.y}return pe}},{key:"textToPoints",value:function(j,N,O,W,X){var J=N,ee=[],V=j.split(/\r?\n|\r|\n/g);W=W||this.parent._renderer._textSize;for(var q,Y,Z,ce=0;ce<V.length;ce++){var B=0;N=J;for(var U=(U=V[ce]).replace("	","  "),K=this._getGlyphs(U),re=0;re<K.length;re++){if(Y=U,!((Z=K)[q=re].name&&Z[q].name==="space"||Y.length===Z.length&&Y[q]===" "))for(var ae=function(Me){for(var xe,ve=[],ne=0;ne<Me.length;ne++)Me[ne].type==="M"&&(xe&&ve.push(xe),xe=[]),xe.push(function(Te){var Pe=[Te.type];return Te.type==="M"||Te.type==="L"?Pe.push(Te.x,Te.y):Te.type==="C"?Pe.push(Te.x1,Te.y1,Te.x2,Te.y2,Te.x,Te.y):Te.type==="Q"&&Pe.push(Te.x1,Te.y1,Te.x,Te.y),Pe}(Me[ne]));return ve.push(xe),ve}(K[re].getPath(N,O,W).commands),pe=0;pe<ae.length;pe++)for(var ye=function(Me,xe){for(var xe=function(je,Ue){if(h(je)!=="object")je=Ue;else for(var Ge in Ue)je[Ge]===void 0&&(je[Ge]=Ue[Ge]);return je}(xe,{sampleFactor:.1,simplifyThreshold:0}),ve=v(Me,0,1),ne=ve/(ve*xe.sampleFactor),Te=[],Pe=0;Pe<ve;Pe+=ne)Te.push(v(Me,Pe));return xe.simplifyThreshold&&function(Ae){for(var je=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,Ue=0,Ge=Ae.length-1;3<Ae.length&&0<=Ge;--Ge)f(c(Ae,Ge-1),c(Ae,Ge),c(Ae,Ge+1),je)&&(Ae.splice(Ge%Ae.length,1),Ue++)}(Te,xe.simplifyThreshold),Te}(ae[pe],X),Re=0;Re<ye.length;Re++)ye[Re].x+=B,ee.push(ye[Re]);B+=K[re].advanceWidth*this._scale(W)}O+=this.parent._renderer._textLeading}return ee}},{key:"_getGlyphs",value:function(j){return this.font.stringToGlyphs(j)}},{key:"_getPath",value:function(j,J,O,W){var X=(W&&W.renderer&&W.renderer._pInst||this.parent)._renderer,J=this._handleAlignment(X,j,J,O);return this.font.getPath(j,J.x,J.y,X._textSize,W)}},{key:"_getPathData",value:function(j,N,O,W){var X=3;return typeof j=="string"&&2<arguments.length?j=this._getPath(j,N,O,W):h(N)==="object"&&(W=N),W&&typeof W.decimals=="number"&&(X=W.decimals),j.toPathData(X)}},{key:"_getSVG",value:function(j,N,O,W){var X=3;return typeof j=="string"&&2<arguments.length?j=this._getPath(j,N,O,W):h(N)==="object"&&(W=N),W&&(typeof W.decimals=="number"&&(X=W.decimals),typeof W.strokeWidth=="number"&&(j.strokeWidth=W.strokeWidth),W.fill!==void 0&&(j.fill=W.fill),W.stroke!==void 0&&(j.stroke=W.stroke)),j.toSVG(X)}},{key:"_renderPath",value:function(ee,q,Y,W){var X=W&&W.renderer||this.parent._renderer,J=X.drawingContext,ee=(h(ee)==="object"&&ee.commands?ee:this._getPath(ee,q,Y,W)).commands,V=(J.beginPath(),!0),q=!1,Y=void 0;try{for(var Z,ce=ee[Symbol.iterator]();!(V=(Z=ce.next()).done);V=!0){var B=Z.value;B.type==="M"?J.moveTo(B.x,B.y):B.type==="L"?J.lineTo(B.x,B.y):B.type==="C"?J.bezierCurveTo(B.x1,B.y1,B.x2,B.y2,B.x,B.y):B.type==="Q"?J.quadraticCurveTo(B.x1,B.y1,B.x,B.y):B.type==="Z"&&J.closePath()}}catch(U){q=!0,Y=U}finally{try{V||ce.return==null||ce.return()}finally{if(q)throw Y}}return X._doStroke&&X._strokeSet&&!X._clipping&&J.stroke(),X._doFill&&!X._clipping&&(X._fillSet||X._setFill(l._DEFAULT_TEXT_FILL),J.fill()),this}},{key:"_textWidth",value:function(j,N){return this.font.getAdvanceWidth(j,N)}},{key:"_textAscent",value:function(j){return this.font.ascender*this._scale(j)}},{key:"_textDescent",value:function(j){return-this.font.descender*this._scale(j)}},{key:"_scale",value:function(j){return 1/this.font.unitsPerEm*(j||this.parent._renderer._textSize)}},{key:"_handleAlignment",value:function(j,N,O,W,X){var J=j._textSize;switch(X===void 0&&(X=this._textWidth(N,J)),j._textAlign){case l.CENTER:O-=X/2;break;case l.RIGHT:O-=X}switch(j._textBaseline){case l.TOP:W+=this._textAscent(J);break;case l.CENTER:W+=this._textAscent(J)/2;break;case l.BOTTOM:W-=this._textDescent(J)}return{x:O,y:W}}}])&&p(I.prototype,D),P}(),r=a.default,o.default=r},{"../core/constants":269,"../core/main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.fill":155,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.join":165,"core-js/modules/es.array.slice":168,"core-js/modules/es.array.splice":170,"core-js/modules/es.function.name":173,"core-js/modules/es.number.to-fixed":180,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.replace":201,"core-js/modules/es.string.split":203,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],319:[function(r,i,o){r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.array-buffer.constructor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.array-buffer.constructor"),r("core-js/modules/es.object.to-string"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,r=(r=r("../core/main"))&&r.__esModule?r:{default:r},r.default.prototype.append=function(s,a){return s.push(a),s},r.default.prototype.arrayCopy=function(s,a,l,u,h){var p,c;s=h!==void 0?(c=Math.min(h,s.length),p=u,s.slice(a,c+a)):(c=l!==void 0?(c=l,Math.min(c,s.length)):s.length,l=a,s.slice(p=0,c)),Array.prototype.splice.apply(l,[p,c].concat(s))},r.default.prototype.concat=function(s,a){return s.concat(a)},r.default.prototype.reverse=function(s){return s.reverse()},r.default.prototype.shorten=function(s){return s.pop(),s},r.default.prototype.shuffle=function(s,a){for(var l,u,h=ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(s),p=(s=a||h?s:s.slice()).length;1<p;)l=this.random(0,1)*p|0,u=s[--p],s[p]=s[l],s[l]=u;return s},r.default.prototype.sort=function(s,u){var l=u?s.slice(0,Math.min(u,s.length)):s,u=u?s.slice(Math.min(u,s.length)):[];return(l=typeof l[0]=="string"?l.sort():l.sort(function(h,p){return h-p})).concat(u)},r.default.prototype.splice=function(s,a,l){return Array.prototype.splice.apply(s,[l,0].concat(a)),s},r.default.prototype.subset=function(s,a,l){return l!==void 0?s.slice(a,a+l):s.slice(a,s.length)},r=r.default,o.default=r},{"../core/main":280,"core-js/modules/es.array-buffer.constructor":151,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.slice":168,"core-js/modules/es.array.splice":170,"core-js/modules/es.object.to-string":187}],320:[function(r,i,o){r("core-js/modules/es.array.map"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.repeat"),r("core-js/modules/es.array.map"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.repeat"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var s=(r=r("../core/main"))&&r.__esModule?r:{default:r};s.default.prototype.float=function(a){return a instanceof Array?a.map(parseFloat):parseFloat(a)},s.default.prototype.int=function(a){var l=1<arguments.length&&arguments[1]!==void 0?arguments[1]:10;return a===1/0||a==="Infinity"?1/0:a===-1/0||a==="-Infinity"?-1/0:typeof a=="string"?parseInt(a,l):typeof a=="number"?0|a:typeof a=="boolean"?a?1:0:a instanceof Array?a.map(function(u){return s.default.prototype.int(u,l)}):void 0},s.default.prototype.str=function(a){return a instanceof Array?a.map(s.default.prototype.str):String(a)},s.default.prototype.boolean=function(a){return typeof a=="number"?a!==0:typeof a=="string"?a.toLowerCase()==="true":typeof a=="boolean"?a:a instanceof Array?a.map(s.default.prototype.boolean):void 0},s.default.prototype.byte=function(a){return a=s.default.prototype.int(a,10),typeof a=="number"?(a+128)%256-128:a instanceof Array?a.map(s.default.prototype.byte):void 0},s.default.prototype.char=function(a){return typeof a!="number"||isNaN(a)?a instanceof Array?a.map(s.default.prototype.char):typeof a=="string"?s.default.prototype.char(parseInt(a,10)):void 0:String.fromCharCode(a)},s.default.prototype.unchar=function(a){return typeof a=="string"&&a.length===1?a.charCodeAt(0):a instanceof Array?a.map(s.default.prototype.unchar):void 0},s.default.prototype.hex=function(a,l){if(l=l??8,a instanceof Array)return a.map(function(h){return s.default.prototype.hex(h,l)});if(a===1/0||a===-1/0)return(a===1/0?"F":"0").repeat(l);if(typeof a=="number"){a<0&&(a=4294967295+a+1);for(var u=Number(a).toString(16).toUpperCase();u.length<l;)u="0".concat(u);return u=u.length>=l?u.substring(u.length-l,u.length):u}},s.default.prototype.unhex=function(a){return a instanceof Array?a.map(s.default.prototype.unhex):parseInt("0x".concat(a),16)},r=s.default,o.default=r},{"../core/main":280,"core-js/modules/es.array.map":167,"core-js/modules/es.number.constructor":178,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.repeat":200}],321:[function(r,i,o){r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.number.to-fixed"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.constructor"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.match"),r("core-js/modules/es.string.pad-start"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.trim"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.number.to-fixed"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.constructor"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.match"),r("core-js/modules/es.string.pad-start"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.trim"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var s=(c=r("../core/main"))&&c.__esModule?c:{default:c};function a(f,m){return function(y){if(Array.isArray(y))return y}(f)||function(y,v){if(Symbol.iterator in Object(y)||Object.prototype.toString.call(y)==="[object Arguments]"){var g=[],x=!0,b=!1,w=void 0;try{for(var T,R=y[Symbol.iterator]();!(x=(T=R.next()).done)&&(g.push(T.value),!v||g.length!==v);x=!0);}catch(C){b=!0,w=C}finally{try{x||R.return==null||R.return()}finally{if(b)throw w}}return g}}(f,m)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function l(f,m,y){var g=a(f.toString().split("."),2),v=g[0],g=g[1];return y===void 0?(v=v.padStart(m,"0"),g?v+"."+g:v):(v=(f=a(f.toFixed(y).toString().split("."),2))[0],g=f[1],v=v.padStart(m,"0"),g===void 0?v:v+"."+g)}function u(g,m){var y=(g=g.toString()).indexOf("."),v=y!==-1?g.substring(y):"",g=(g=y!==-1?g.substring(0,y):g).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");if(m===0)v="";else if(m!==void 0)if(m>v.length)for(var x=m-(v+=y===-1?".":"").length+1,b=0;b<x;b++)v+="0";else v=v.substring(0,m+1);return g+v}function h(f){return 0<parseFloat(f)?"+".concat(f.toString()):f.toString()}function p(f){return 0<=parseFloat(f)?" ".concat(f.toString()):f.toString()}r("../core/friendly_errors/validate_params"),r("../core/friendly_errors/file_errors"),r("../core/friendly_errors/fes_core"),s.default.prototype.join=function(f,m){return s.default._validateParameters("join",arguments),f.join(m)},s.default.prototype.match=function(f,m){return s.default._validateParameters("match",arguments),f.match(m)},s.default.prototype.matchAll=function(f,m){s.default._validateParameters("matchAll",arguments);for(var y=new RegExp(m,"g"),v=y.exec(f),g=[];v!==null;)g.push(v),v=y.exec(f);return g},s.default.prototype.nf=function(f,m,y){return s.default._validateParameters("nf",arguments),f instanceof Array?f.map(function(v){return l(v,m,y)}):Object.prototype.toString.call(f)==="[object Arguments]"?f.length===3?this.nf(f[0],f[1],f[2]):f.length===2?this.nf(f[0],f[1]):this.nf(f[0]):l(f,m,y)},s.default.prototype.nfc=function(f,m){return s.default._validateParameters("nfc",arguments),f instanceof Array?f.map(function(y){return u(y,m)}):u(f,m)},s.default.prototype.nfp=function(){for(var f=arguments.length,m=new Array(f),y=0;y<f;y++)m[y]=arguments[y];s.default._validateParameters("nfp",m);var v=s.default.prototype.nf.apply(this,m);return v instanceof Array?v.map(h):h(v)},s.default.prototype.nfs=function(){for(var f=arguments.length,m=new Array(f),y=0;y<f;y++)m[y]=arguments[y];s.default._validateParameters("nfs",m);var v=s.default.prototype.nf.apply(this,m);return v instanceof Array?v.map(p):p(v)},s.default.prototype.split=function(f,m){return s.default._validateParameters("split",arguments),f.split(m)},s.default.prototype.splitTokens=function(f,m){var y,v;return s.default._validateParameters("splitTokens",arguments),v=m!==void 0?(v=/\]/g.exec(m=m),(y=/\[/g.exec(m))&&v?(m=m.slice(0,v.index)+m.slice(v.index+1),y=/\[/g.exec(m),m=m.slice(0,y.index)+m.slice(y.index+1),new RegExp("[\\[".concat(m,"\\]]"),"g")):v?(m=m.slice(0,v.index)+m.slice(v.index+1),new RegExp("[".concat(m,"\\]]"),"g")):y?(m=m.slice(0,y.index)+m.slice(y.index+1),new RegExp("[".concat(m,"\\[]"),"g")):new RegExp("[".concat(m,"]"),"g")):/\s/g,f.split(v).filter(function(g){return g})},s.default.prototype.trim=function(f){return s.default._validateParameters("trim",arguments),f instanceof Array?f.map(this.trim):f.trim()};var c=s.default;o.default=c},{"../core/friendly_errors/fes_core":271,"../core/friendly_errors/file_errors":272,"../core/friendly_errors/validate_params":275,"../core/main":280,"core-js/modules/es.array.filter":156,"core-js/modules/es.array.index-of":163,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.join":165,"core-js/modules/es.array.map":167,"core-js/modules/es.array.slice":168,"core-js/modules/es.number.to-fixed":180,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.constructor":191,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.match":198,"core-js/modules/es.string.pad-start":199,"core-js/modules/es.string.replace":201,"core-js/modules/es.string.split":203,"core-js/modules/es.string.trim":206,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/web.dom-collections.iterator":243}],322:[function(r,i,o){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,r=(r=r("../core/main"))&&r.__esModule?r:{default:r},r.default.prototype.day=function(){return new Date().getDate()},r.default.prototype.hour=function(){return new Date().getHours()},r.default.prototype.minute=function(){return new Date().getMinutes()},r.default.prototype.millis=function(){return this._millisStart===-1?0:window.performance.now()-this._millisStart},r.default.prototype.month=function(){return new Date().getMonth()+1},r.default.prototype.second=function(){return new Date().getSeconds()},r.default.prototype.year=function(){return new Date().getFullYear()},r=r.default,o.default=r},{"../core/main":280}],323:[function(r,i,o){function s(f){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(f)}function a(f){return(a=typeof Symbol=="function"&&s(Symbol.iterator)==="symbol"?function(m){return s(m)}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":s(m)})(f)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.math.hypot"),r("core-js/modules/es.math.sign"),r("core-js/modules/es.number.to-fixed"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.math.hypot"),r("core-js/modules/es.math.sign"),r("core-js/modules/es.number.to-fixed"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var l=(c=r("../core/main"))&&c.__esModule?c:{default:c},u=(r("./p5.Geometry"),function(f){if(f&&f.__esModule)return f;if(f===null||a(f)!=="object"&&typeof f!="function")return{default:f};var m=h();if(m&&m.has(f))return m.get(f);var y,v={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(y in f){var x;Object.prototype.hasOwnProperty.call(f,y)&&((x=g?Object.getOwnPropertyDescriptor(f,y):null)&&(x.get||x.set)?Object.defineProperty(v,y,x):v[y]=f[y])}return v.default=f,m&&m.set(f,v),v}(r("../core/constants")));function h(){var f;return typeof WeakMap!="function"?null:(f=new WeakMap,h=function(){return f},f)}l.default.prototype.beginGeometry=function(){return this._renderer.beginGeometry()},l.default.prototype.endGeometry=function(){return this._renderer.endGeometry()},l.default.prototype.buildGeometry=function(f){return this._renderer.buildGeometry(f)},l.default.prototype.freeGeometry=function(f){this._renderer._freeBuffers(f.gid)},l.default.prototype.plane=function(){var f,m=0<arguments.length&&arguments[0]!==void 0?arguments[0]:50,y=1<arguments.length&&arguments[1]!==void 0?arguments[1]:m,v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:1,g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:1,x=(this._assert3d("plane"),l.default._validateParameters("plane",arguments),"plane|".concat(v,"|").concat(g));return this._renderer.geometryInHash(x)||((f=new l.default.Geometry(v,g,function(){for(var b,w,T=0;T<=this.detailY;T++)for(var R=T/this.detailY,C=0;C<=this.detailX;C++)b=C/this.detailX,w=new l.default.Vector(b-.5,R-.5,0),this.vertices.push(w),this.uvs.push(b,R)})).computeFaces().computeNormals(),v<=1&&g<=1?f._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on plane objects with more than 1 detailX or 1 detailY"),this._renderer.createBuffers(x,f)),this._renderer.drawBuffersScaled(x,m,y,1),this},l.default.prototype.box=function(f,m,y,v,g){this._assert3d("box"),l.default._validateParameters("box",arguments),f===void 0&&(f=50),m===void 0&&(m=f),y===void 0&&(y=m);var x,b=this._renderer.attributes&&this._renderer.attributes.perPixelLighting,b=(g===void 0&&(g=b?1:4),"box|".concat(v=v===void 0?b?1:4:v,"|").concat(g));return this._renderer.geometryInHash(b)||((x=new l.default.Geometry(v,g,function(){var w=this;this.edges=[[0,1],[1,3],[3,2],[6,7],[8,9],[9,11],[14,15],[16,17],[17,19],[18,19],[20,21],[22,23]],[[0,4,2,6],[1,3,5,7],[0,1,4,5],[2,6,3,7],[0,2,1,3],[4,5,6,7]].forEach(function(T,R){for(var R=4*R,C=0;C<4;C++){var P=T[C],P=new l.default.Vector((2*(1&P)-1)/2,((2&P)-1)/2,((4&P)/2-1)/2);w.vertices.push(P),w.uvs.push(1&C,(2&C)/2)}w.faces.push([R,1+R,2+R]),w.faces.push([2+R,1+R,3+R])})})).computeNormals(),v<=4&&g<=4?x._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on box objects with more than 4 detailX or 4 detailY"),this._renderer.createBuffers(b,x)),this._renderer.drawBuffersScaled(b,f,m,y),this},l.default.prototype.sphere=function(){var f=0<arguments.length&&arguments[0]!==void 0?arguments[0]:50,m=1<arguments.length&&arguments[1]!==void 0?arguments[1]:24,y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:16;return this._assert3d("sphere"),l.default._validateParameters("sphere",arguments),this.ellipsoid(f,f,f,m,y),this};function p(f,m,y,v,g,x,b){f=f<=0?1:f,m=m<0?0:m,y=y<=0?f:y,v=v<3?3:v;for(var w,T,R=(x=x===void 0||x)?-2:0,C=(g=g<1?1:g)+((b=b===void 0?m!==0:b)?2:0),P=Math.atan2(f-m,y),I=Math.sin(P),D=Math.cos(P),j=R;j<=C;++j){var N=j/g,O=y*N,W=void 0,W=j<0?(N=O=0,f):g<j?(O=y,N=1,m):f+(m-f)*N;for(j!==-2&&j!==g+2||(W=0),O-=y/2,w=0;w<v;++w){var X=w/(v-1),ee=2*Math.PI*X,J=Math.sin(ee),ee=Math.cos(ee),V=(this.vertices.push(new l.default.Vector(J*W,O,ee*W)),void 0),V=j<0?new l.default.Vector(0,-1,0):g<j&&m?new l.default.Vector(0,1,0):new l.default.Vector(J*D,I,ee*D);this.vertexNormals.push(V),this.uvs.push(X,N)}}var q=0;if(x){for(T=0;T<v;++T)this.faces.push([q+T,q+v+(T+1)%v,q+v+T]);q+=2*v}for(j=0;j<g;++j){for(w=0;w<v;++w){var Y=(w+1)%v;this.faces.push([q+w,q+Y,q+v+Y]),this.faces.push([q+w,q+v+Y,q+v+w])}q+=v}if(b)for(q+=v,w=0;w<v;++w)this.faces.push([q+w,q+(w+1)%v,q+v])}l.default.prototype.cylinder=function(){var f,m=0<arguments.length&&arguments[0]!==void 0?arguments[0]:50,y=1<arguments.length&&arguments[1]!==void 0?arguments[1]:m,v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:24,g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:1,x=!(4<arguments.length&&arguments[4]!==void 0)||arguments[4],b=!(5<arguments.length&&arguments[5]!==void 0)||arguments[5],w=(this._assert3d("cylinder"),l.default._validateParameters("cylinder",arguments),"cylinder|".concat(v,"|").concat(g,"|").concat(x,"|").concat(b));return this._renderer.geometryInHash(w)||(f=new l.default.Geometry(v,g),p.call(f,1,1,1,v,g,x,b),v<=24&&g<=16?f._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on cylinder objects with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(w,f)),this._renderer.drawBuffersScaled(w,m,y,m),this},l.default.prototype.cone=function(){var f,m=0<arguments.length&&arguments[0]!==void 0?arguments[0]:50,y=1<arguments.length&&arguments[1]!==void 0?arguments[1]:m,v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:24,g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:1,x=!(4<arguments.length&&arguments[4]!==void 0)||arguments[4],b=(this._assert3d("cone"),l.default._validateParameters("cone",arguments),"cone|".concat(v,"|").concat(g,"|").concat(x));return this._renderer.geometryInHash(b)||(f=new l.default.Geometry(v,g),p.call(f,1,0,1,v,g,x,!1),v<=24&&g<=16?f._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on cone objects with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(b,f)),this._renderer.drawBuffersScaled(b,m,y,m),this},l.default.prototype.ellipsoid=function(){var f,m=0<arguments.length&&arguments[0]!==void 0?arguments[0]:50,y=1<arguments.length&&arguments[1]!==void 0?arguments[1]:m,v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:m,g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:24,x=4<arguments.length&&arguments[4]!==void 0?arguments[4]:16,b=(this._assert3d("ellipsoid"),l.default._validateParameters("ellipsoid",arguments),"ellipsoid|".concat(g,"|").concat(x));return this._renderer.geometryInHash(b)||((f=new l.default.Geometry(g,x,function(){for(var w=0;w<=this.detailY;w++)for(var T=w/this.detailY,R=Math.PI*T-Math.PI/2,C=Math.cos(R),P=Math.sin(R),I=0;I<=this.detailX;I++){var D=I/this.detailX,N=2*Math.PI*D,j=Math.cos(N),N=Math.sin(N),N=new l.default.Vector(C*N,P,C*j);this.vertices.push(N),this.vertexNormals.push(N),this.uvs.push(D,T)}})).computeFaces(),g<=24&&x<=24?f._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on ellipsoids with more than 24 detailX or 24 detailY"),this._renderer.createBuffers(b,f)),this._renderer.drawBuffersScaled(b,m,y,v),this},l.default.prototype.torus=function(f,b,y,v){if(this._assert3d("torus"),l.default._validateParameters("torus",arguments),f===void 0)f=50;else if(!f)return;if(b===void 0)b=10;else if(!b)return;y===void 0&&(y=24),v===void 0&&(v=16);var g,x=(b/f).toPrecision(4),b="torus|".concat(x,"|").concat(y,"|").concat(v);return this._renderer.geometryInHash(b)||((g=new l.default.Geometry(y,v,function(){for(var w=0;w<=this.detailY;w++)for(var T=w/this.detailY,R=2*Math.PI*T,C=Math.cos(R),P=Math.sin(R),I=1+x*C,D=0;D<=this.detailX;D++){var j=D/this.detailX,N=2*Math.PI*j,W=Math.cos(N),N=Math.sin(N),O=new l.default.Vector(I*W,I*N,x*P),W=new l.default.Vector(C*W,C*N,P);this.vertices.push(O),this.vertexNormals.push(W),this.uvs.push(j,T)}})).computeFaces(),y<=24&&v<=16?g._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw strokes on torus object with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(b,g)),this._renderer.drawBuffersScaled(b,f,f,f),this},l.default.RendererGL.prototype.point=function(f,m){var y=[];return y.push(new l.default.Vector(f,m,2<arguments.length&&arguments[2]!==void 0?arguments[2]:0)),this._drawPoints(y,this.immediateMode.buffers.point),this},l.default.RendererGL.prototype.triangle=function(b){var m=b[0],y=b[1],v=b[2],g=b[3],x=b[4],b=b[5],w=(this.geometryInHash("tri")||((w=new l.default.Geometry(1,1,function(){var C=[];C.push(new l.default.Vector(0,0,0)),C.push(new l.default.Vector(1,0,0)),C.push(new l.default.Vector(0,1,0)),this.edges=[[0,1],[1,2],[2,0]],this.vertices=C,this.faces=[[0,1,2]],this.uvs=[0,0,1,0,1,1]}))._edgesToVertices(),w.computeNormals(),this.createBuffers("tri",w)),this.uMVMatrix.copy());try{var T=Math.sign(m*g-v*y+v*b-x*g+x*y-m*b),R=new l.default.Matrix([v-m,g-y,0,0,x-m,b-y,0,0,0,0,T,0,m,y,0,1]).mult(this.uMVMatrix);this.uMVMatrix=R,this.drawBuffers("tri")}finally{this.uMVMatrix=w}return this},l.default.RendererGL.prototype.ellipse=function(f){this.arc(f[0],f[1],f[2],f[3],0,u.TWO_PI,u.OPEN,f[4])},l.default.RendererGL.prototype.arc=function(){var f,m=arguments.length<=0?void 0:arguments[0],y=arguments.length<=1?void 0:arguments[1],v=arguments.length<=2?void 0:arguments[2],g=arguments.length<=3?void 0:arguments[3],x=arguments.length<=4?void 0:arguments[4],b=arguments.length<=5?void 0:arguments[5],w=arguments.length<=6?void 0:arguments[6],T=(arguments.length<=7?void 0:arguments[7])||25,R=(Math.abs(b-x)>=u.TWO_PI?"".concat(C="ellipse","|"):"".concat(C="arc","|").concat(x,"|").concat(b,"|").concat(w,"|")).concat(T,"|"),C=(this.geometryInHash(R)||((f=new l.default.Geometry(T,1,function(){if(x.toFixed(10)!==b.toFixed(10)){w!==u.PIE&&w!==void 0||(this.vertices.push(new l.default.Vector(.5,.5,0)),this.uvs.push([.5,.5]));for(var P=0;P<=T;P++){var D=(b-x)*(P/T)+x,I=.5+Math.cos(D)/2,D=.5+Math.sin(D)/2;this.vertices.push(new l.default.Vector(I,D,0)),this.uvs.push([I,D]),P<T-1&&(this.faces.push([0,P+1,P+2]),this.edges.push([P+1,P+2]))}switch(w){case u.PIE:this.faces.push([0,this.vertices.length-2,this.vertices.length-1]),this.edges.push([0,1]),this.edges.push([this.vertices.length-2,this.vertices.length-1]),this.edges.push([0,this.vertices.length-1]);break;case u.CHORD:this.edges.push([0,1]),this.edges.push([0,this.vertices.length-1]);break;case u.OPEN:this.edges.push([0,1]);break;default:this.faces.push([0,this.vertices.length-2,this.vertices.length-1]),this.edges.push([this.vertices.length-2,this.vertices.length-1])}}})).computeNormals(),T<=50?f._edgesToVertices(f):this._doStroke&&console.log("Cannot apply a stroke to an ".concat(C," with more than 50 detail")),this.createBuffers(R,f)),this.uMVMatrix.copy());try{this.uMVMatrix.translate([m,y,0]),this.uMVMatrix.scale(v,g,1),this.drawBuffers(R)}finally{this.uMVMatrix=C}return this},l.default.RendererGL.prototype.rect=function(f){var m=f[0],y=f[1],v=f[2],g=f[3];if(f[4]===void 0){var w=this._pInst._glAttributes.perPixelLighting,x=f[4]||(w?1:24),b=f[5]||(w?1:16),w="rect|".concat(x,"|").concat(b),T=(this.geometryInHash(w)||((T=new l.default.Geometry(x,b,function(){for(var V=0;V<=this.detailY;V++)for(var q=V/this.detailY,Y=0;Y<=this.detailX;Y++){var Z=Y/this.detailX,ce=new l.default.Vector(Z,q,0);this.vertices.push(ce),this.uvs.push(Z,q)}0<x&&0<b&&(this.edges=[[0,x],[x,(x+1)*(b+1)-1],[(x+1)*(b+1)-1,(x+1)*b],[(x+1)*b,0]])})).computeFaces().computeNormals()._edgesToVertices(),this.createBuffers(w,T)),this.uMVMatrix.copy());try{this.uMVMatrix.translate([m,y,0]),this.uMVMatrix.scale(v,g,1),this.drawBuffers(w)}finally{this.uMVMatrix=T}}else{var w=f[4],T=f[5]===void 0?w:f[5],R=f[6]===void 0?T:f[6],f=f[7]===void 0?R:f[7],N=v,C=g,D=((N+=m)<m&&(D=m,m=N,N=D),(C+=y)<y&&(D=y,y=C,C=D),Math.min((N-m)/2,(C-y)/2)),P=(D<w&&(w=D),D<T&&(T=D),D<R&&(R=D),D<f&&(f=D),m),I=y,D=N,m=C,j=(this.beginShape(),T!==0?(this.vertex(D-T,I),this.quadraticVertex(D,I,D,I+T)):this.vertex(D,I),R!==0?(this.vertex(D,m-R),this.quadraticVertex(D,m,D-R,m)):this.vertex(D,m),f!==0?(this.vertex(P+f,m),this.quadraticVertex(P,m,P,m-f)):this.vertex(P,m),w!==0?(this.vertex(P,I+w),this.quadraticVertex(P,I,P+w,I)):this.vertex(P,I),!(this.immediateMode.geometry.uvs.length=0)),y=!1,N=void 0;try{for(var O,W=this.immediateMode.geometry.vertices[Symbol.iterator]();!(j=(O=W.next()).done);j=!0){var X=O.value,J=(X.x-P)/v,ee=(X.y-I)/g;this.immediateMode.geometry.uvs.push(J,ee)}}catch(B){y=!0,N=B}finally{try{j||W.return==null||W.return()}finally{if(y)throw N}}this.endShape(u.CLOSE)}return this},l.default.RendererGL.prototype.quad=function(f,m,y,v,g,x,b,w,T,R,C,P){var I=12<arguments.length&&arguments[12]!==void 0?arguments[12]:2,D=13<arguments.length&&arguments[13]!==void 0?arguments[13]:2,j="quad|".concat(f,"|").concat(m,"|").concat(y,"|").concat(v,"|").concat(g,"|").concat(x,"|").concat(b,"|").concat(w,"|").concat(T,"|").concat(R,"|").concat(C,"|").concat(P,"|").concat(I,"|").concat(D);if(!this.geometryInHash(j)){var N=new l.default.Geometry(I,D,function(){for(var Y=1/(this.detailX-1),Z=1/(this.detailY-1),ce=0;ce<this.detailY;ce++)for(var B=0;B<this.detailX;B++){var U=B*Y,K=ce*Z;this.vertices.push(new l.default.Vector((1-U)*((1-K)*f+K*R)+U*((1-K)*v+K*b),(1-U)*((1-K)*m+K*C)+U*((1-K)*g+K*w),(1-U)*((1-K)*y+K*P)+U*((1-K)*x+K*T))),this.uvs.push([U,K])}});N.faces=[];for(var O=0;O<D-1;O++)for(var W=0;W<I-1;W++){var X=W+O*I,J=W+1+(O+1)*I,ee=W+(O+1)*I;N.faces.push([X,W+1+O*I,J]),N.faces.push([X,J,ee])}N.computeNormals();for(var V=[N.edges.length=0,2,3,1],q=0;q<V.length;q++)N.edges.push([V[q],V[(q+1)%V.length]]);N._edgesToVertices(),this.createBuffers(j,N)}return this.drawBuffers(j),this},l.default.RendererGL.prototype.bezier=function(f,m,y,v,g,x,b,w,T,R,C,P){arguments.length===8&&(C=w,R=b,w=x,b=g,g=v,v=y,y=x=T=P=0);var I=this._pInst._bezierDetail||20;this.beginShape();for(var D=0;D<=I;D++){var j=Math.pow(1-D/I,3),N=D/I*3*Math.pow(1-D/I,2),O=3*Math.pow(D/I,2)*(1-D/I),W=Math.pow(D/I,3);this.vertex(f*j+v*N+b*O+R*W,m*j+g*N+w*O+C*W,y*j+x*N+T*O+P*W)}return this.endShape(),this},l.default.RendererGL.prototype.curve=function(f,m,y,v,g,x,b,w,T,R,C,P){arguments.length===8&&(R=b,C=w,b=g,w=v,g=v=y,y=x=T=P=0);var I=this._pInst._curveDetail;this.beginShape();for(var D=0;D<=I;D++){var j=.5*Math.pow(D/I,3),N=.5*Math.pow(D/I,2),O=D/I*.5;this.vertex(j*(3*v-f-3*b+R)+N*(2*f-5*v+4*b-R)+O*(-f+b)+2*v*.5,j*(3*g-m-3*w+C)+N*(2*m-5*g+4*w-C)+O*(-m+w)+2*g*.5,j*(3*x-y-3*T+P)+N*(2*y-5*x+4*T-P)+O*(-y+T)+2*x*.5)}return this.endShape(),this},l.default.RendererGL.prototype.line=function(){return arguments.length===6?(this.beginShape(u.LINES),this.vertex(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2]),this.vertex(arguments.length<=3?void 0:arguments[3],arguments.length<=4?void 0:arguments[4],arguments.length<=5?void 0:arguments[5]),this.endShape()):arguments.length===4&&(this.beginShape(u.LINES),this.vertex(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],0),this.vertex(arguments.length<=2?void 0:arguments[2],arguments.length<=3?void 0:arguments[3],0),this.endShape()),this},l.default.RendererGL.prototype.bezierVertex=function(){if(this.immediateMode._bezierVertex.length===0)throw Error("vertex() must be used once before calling bezierVertex()");var f,m,y,v,g,x,b=[],w=[],T=arguments.length;if(this._lookUpTableBezier.length===0||this._lutBezierDetail!==this._pInst._curveDetail){this._lookUpTableBezier=[],this._lutBezierDetail=this._pInst._curveDetail;for(var R=1/this._lutBezierDetail,C=0,P=1,I=0;C<1;){if(x=parseFloat(C.toFixed(6)),this._lookUpTableBezier[I]=this._bezierCoefficients(x),P.toFixed(6)===R.toFixed(6)){x=parseFloat(P.toFixed(6))+parseFloat(C.toFixed(6)),++I,this._lookUpTableBezier[I]=this._bezierCoefficients(x);break}C+=R,P-=R,++I}}for(var D=this._lookUpTableBezier.length,j=[],N=0;N<4;N++)j.push([]);j[0]=this.immediateMode.geometry.vertexColors.slice(-4),j[3]=this.curFillColor.slice();var O=[];for(N=0;N<4;N++)O.push([]);if(O[0]=this.immediateMode.geometry.vertexStrokeColors.slice(-4),O[3]=this.curStrokeColor.slice(),T===6){this.isBezier=!0;var b=[this.immediateMode._bezierVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=2?void 0:arguments[2],arguments.length<=4?void 0:arguments[4]],w=[this.immediateMode._bezierVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=3?void 0:arguments[3],arguments.length<=5?void 0:arguments[5]],W=Math.hypot(b[0]-b[1],w[0]-w[1]),J=Math.hypot(b[1]-b[2],w[1]-w[2]),X=Math.hypot(b[2]-b[3],w[2]-w[3]),J=W+J+X;for(W/=J,X/=J,g=0;g<4;g++)j[1].push(j[0][g]*(1-W)+j[3][g]*W),j[2].push(j[0][g]*X+j[3][g]*(1-X)),O[1].push(O[0][g]*(1-W)+O[3][g]*W),O[2].push(O[0][g]*X+O[3][g]*(1-X));for(v=0;v<D;v++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],N=f=m=0;N<4;N++){for(g=0;g<4;g++)this.curFillColor[g]+=this._lookUpTableBezier[v][N]*j[N][g],this.curStrokeColor[g]+=this._lookUpTableBezier[v][N]*O[N][g];f+=b[N]*this._lookUpTableBezier[v][N],m+=w[N]*this._lookUpTableBezier[v][N]}this.vertex(f,m)}this.curFillColor=j[3],this.curStrokeColor=O[3],this.immediateMode._bezierVertex[0]=arguments.length<=4?void 0:arguments[4],this.immediateMode._bezierVertex[1]=arguments.length<=5?void 0:arguments[5]}else if(T===9){this.isBezier=!0,b=[this.immediateMode._bezierVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=3?void 0:arguments[3],arguments.length<=6?void 0:arguments[6]],w=[this.immediateMode._bezierVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=4?void 0:arguments[4],arguments.length<=7?void 0:arguments[7]];var ee=[this.immediateMode._bezierVertex[2],arguments.length<=2?void 0:arguments[2],arguments.length<=5?void 0:arguments[5],arguments.length<=8?void 0:arguments[8]],V=Math.hypot(b[0]-b[1],w[0]-w[1],ee[0]-ee[1]),J=Math.hypot(b[1]-b[2],w[1]-w[2],ee[1]-ee[2]),q=Math.hypot(b[2]-b[3],w[2]-w[3],ee[2]-ee[3]),T=V+J+q;for(V/=T,q/=T,g=0;g<4;g++)j[1].push(j[0][g]*(1-V)+j[3][g]*V),j[2].push(j[0][g]*q+j[3][g]*(1-q)),O[1].push(O[0][g]*(1-V)+O[3][g]*V),O[2].push(O[0][g]*q+O[3][g]*(1-q));for(v=0;v<D;v++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],N=f=m=y=0;N<4;N++){for(g=0;g<4;g++)this.curFillColor[g]+=this._lookUpTableBezier[v][N]*j[N][g],this.curStrokeColor[g]+=this._lookUpTableBezier[v][N]*O[N][g];f+=b[N]*this._lookUpTableBezier[v][N],m+=w[N]*this._lookUpTableBezier[v][N],y+=ee[N]*this._lookUpTableBezier[v][N]}this.vertex(f,m,y)}this.curFillColor=j[3],this.curStrokeColor=O[3],this.immediateMode._bezierVertex[0]=arguments.length<=6?void 0:arguments[6],this.immediateMode._bezierVertex[1]=arguments.length<=7?void 0:arguments[7],this.immediateMode._bezierVertex[2]=arguments.length<=8?void 0:arguments[8]}},l.default.RendererGL.prototype.quadraticVertex=function(){if(this.immediateMode._quadraticVertex.length===0)throw Error("vertex() must be used once before calling quadraticVertex()");var f,m,y,v,g,x,b=[],w=[],T=arguments.length;if(this._lookUpTableQuadratic.length===0||this._lutQuadraticDetail!==this._pInst._curveDetail){this._lookUpTableQuadratic=[],this._lutQuadraticDetail=this._pInst._curveDetail;for(var R=1/this._lutQuadraticDetail,C=0,P=1,I=0;C<1;){if(x=parseFloat(C.toFixed(6)),this._lookUpTableQuadratic[I]=this._quadraticCoefficients(x),P.toFixed(6)===R.toFixed(6)){x=parseFloat(P.toFixed(6))+parseFloat(C.toFixed(6)),++I,this._lookUpTableQuadratic[I]=this._quadraticCoefficients(x);break}C+=R,P-=R,++I}}for(var D=this._lookUpTableQuadratic.length,j=[],N=0;N<3;N++)j.push([]);j[0]=this.immediateMode.geometry.vertexColors.slice(-4),j[2]=this.curFillColor.slice();var O=[];for(N=0;N<3;N++)O.push([]);if(O[0]=this.immediateMode.geometry.vertexStrokeColors.slice(-4),O[2]=this.curStrokeColor.slice(),T===4){this.isQuadratic=!0;var b=[this.immediateMode._quadraticVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=2?void 0:arguments[2]],w=[this.immediateMode._quadraticVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=3?void 0:arguments[3]],W=Math.hypot(b[0]-b[1],w[0]-w[1]);for(W/=W+Math.hypot(b[1]-b[2],w[1]-w[2]),g=0;g<4;g++)j[1].push(j[0][g]*(1-W)+j[2][g]*W),O[1].push(O[0][g]*(1-W)+O[2][g]*W);for(v=0;v<D;v++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],N=f=m=0;N<3;N++){for(g=0;g<4;g++)this.curFillColor[g]+=this._lookUpTableQuadratic[v][N]*j[N][g],this.curStrokeColor[g]+=this._lookUpTableQuadratic[v][N]*O[N][g];f+=b[N]*this._lookUpTableQuadratic[v][N],m+=w[N]*this._lookUpTableQuadratic[v][N]}this.vertex(f,m)}this.curFillColor=j[2],this.curStrokeColor=O[2],this.immediateMode._quadraticVertex[0]=arguments.length<=2?void 0:arguments[2],this.immediateMode._quadraticVertex[1]=arguments.length<=3?void 0:arguments[3]}else if(T===6){this.isQuadratic=!0,b=[this.immediateMode._quadraticVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=3?void 0:arguments[3]],w=[this.immediateMode._quadraticVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=4?void 0:arguments[4]];var X=[this.immediateMode._quadraticVertex[2],arguments.length<=2?void 0:arguments[2],arguments.length<=5?void 0:arguments[5]],J=Math.hypot(b[0]-b[1],w[0]-w[1],X[0]-X[1]);for(J/=J+Math.hypot(b[1]-b[2],w[1]-w[2],X[1]-X[2]),g=0;g<4;g++)j[1].push(j[0][g]*(1-J)+j[2][g]*J),O[1].push(O[0][g]*(1-J)+O[2][g]*J);for(v=0;v<D;v++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],N=f=m=y=0;N<3;N++){for(g=0;g<4;g++)this.curFillColor[g]+=this._lookUpTableQuadratic[v][N]*j[N][g],this.curStrokeColor[g]+=this._lookUpTableQuadratic[v][N]*O[N][g];f+=b[N]*this._lookUpTableQuadratic[v][N],m+=w[N]*this._lookUpTableQuadratic[v][N],y+=X[N]*this._lookUpTableQuadratic[v][N]}this.vertex(f,m,y)}this.curFillColor=j[2],this.curStrokeColor=O[2],this.immediateMode._quadraticVertex[0]=arguments.length<=3?void 0:arguments[3],this.immediateMode._quadraticVertex[1]=arguments.length<=4?void 0:arguments[4],this.immediateMode._quadraticVertex[2]=arguments.length<=5?void 0:arguments[5]}},l.default.RendererGL.prototype.curveVertex=function(){var f,m,y,v,g,x,b=[],w=[],T=arguments.length;if(this._lookUpTableBezier.length===0||this._lutBezierDetail!==this._pInst._curveDetail){this._lookUpTableBezier=[],this._lutBezierDetail=this._pInst._curveDetail;for(var R=1/this._lutBezierDetail,C=0,P=1,I=0;C<1;){if(x=parseFloat(C.toFixed(6)),this._lookUpTableBezier[I]=this._bezierCoefficients(x),P.toFixed(6)===R.toFixed(6)){x=parseFloat(P.toFixed(6))+parseFloat(C.toFixed(6)),++I,this._lookUpTableBezier[I]=this._bezierCoefficients(x);break}C+=R,P-=R,++I}}var D=this._lookUpTableBezier.length;if(T===2){if(this.immediateMode._curveVertex.push(arguments.length<=0?void 0:arguments[0]),this.immediateMode._curveVertex.push(arguments.length<=1?void 0:arguments[1]),this.immediateMode._curveVertex.length===8){for(this.isCurve=!0,b=this._bezierToCatmull([this.immediateMode._curveVertex[0],this.immediateMode._curveVertex[2],this.immediateMode._curveVertex[4],this.immediateMode._curveVertex[6]]),w=this._bezierToCatmull([this.immediateMode._curveVertex[1],this.immediateMode._curveVertex[3],this.immediateMode._curveVertex[5],this.immediateMode._curveVertex[7]]),g=0;g<D;g++)m=b[0]*this._lookUpTableBezier[g][0]+b[1]*this._lookUpTableBezier[g][1]+b[2]*this._lookUpTableBezier[g][2]+b[3]*this._lookUpTableBezier[g][3],y=w[0]*this._lookUpTableBezier[g][0]+w[1]*this._lookUpTableBezier[g][1]+w[2]*this._lookUpTableBezier[g][2]+w[3]*this._lookUpTableBezier[g][3],this.vertex(m,y);for(g=0;g<T;g++)this.immediateMode._curveVertex.shift()}}else if(T===3&&(this.immediateMode._curveVertex.push(arguments.length<=0?void 0:arguments[0]),this.immediateMode._curveVertex.push(arguments.length<=1?void 0:arguments[1]),this.immediateMode._curveVertex.push(arguments.length<=2?void 0:arguments[2]),this.immediateMode._curveVertex.length===12)){for(this.isCurve=!0,b=this._bezierToCatmull([this.immediateMode._curveVertex[0],this.immediateMode._curveVertex[3],this.immediateMode._curveVertex[6],this.immediateMode._curveVertex[9]]),w=this._bezierToCatmull([this.immediateMode._curveVertex[1],this.immediateMode._curveVertex[4],this.immediateMode._curveVertex[7],this.immediateMode._curveVertex[10]]),f=this._bezierToCatmull([this.immediateMode._curveVertex[2],this.immediateMode._curveVertex[5],this.immediateMode._curveVertex[8],this.immediateMode._curveVertex[11]]),g=0;g<D;g++)m=b[0]*this._lookUpTableBezier[g][0]+b[1]*this._lookUpTableBezier[g][1]+b[2]*this._lookUpTableBezier[g][2]+b[3]*this._lookUpTableBezier[g][3],y=w[0]*this._lookUpTableBezier[g][0]+w[1]*this._lookUpTableBezier[g][1]+w[2]*this._lookUpTableBezier[g][2]+w[3]*this._lookUpTableBezier[g][3],v=f[0]*this._lookUpTableBezier[g][0]+f[1]*this._lookUpTableBezier[g][1]+f[2]*this._lookUpTableBezier[g][2]+f[3]*this._lookUpTableBezier[g][3],this.vertex(m,y,v);for(g=0;g<T;g++)this.immediateMode._curveVertex.shift()}},l.default.RendererGL.prototype.image=function(f,P,y,I,g,x,b,w,T){this._isErasing&&this.blendMode(this._cachedBlendMode),this._pInst.push(),this._pInst.noLights(),this._pInst.noStroke(),this._pInst.texture(f),this._pInst.textureMode(u.NORMAL);var R=0,C=(P<=f.width&&(R=P/f.width),1),P=(P+I<=f.width&&(C=(P+I)/f.width),0),I=(y<=f.height&&(P=y/f.height),1);y+g<=f.height&&(I=(y+g)/f.height),this.beginShape(),this.vertex(x,b,0,R,P),this.vertex(x+w,b,0,C,P),this.vertex(x+w,b+T,0,C,I),this.vertex(x,b+T,0,R,I),this.endShape(u.CLOSE),this._pInst.pop(),this._isErasing&&this.blendMode(u.REMOVE)};var c=l.default;o.default=c},{"../core/constants":269,"../core/main":280,"./p5.Geometry":332,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.for-each":160,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.slice":168,"core-js/modules/es.math.hypot":175,"core-js/modules/es.math.sign":177,"core-js/modules/es.number.to-fixed":180,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],324:[function(r,i,o){function s(m){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y})(m)}function a(m){return(a=typeof Symbol=="function"&&s(Symbol.iterator)==="symbol"?function(y){return s(y)}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":s(y)})(m)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.every"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.map"),r("core-js/modules/es.object.assign"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.every"),r("core-js/modules/es.array.map"),r("core-js/modules/es.object.assign"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var l=(f=r("../core/main"))&&f.__esModule?f:{default:f},u=function(m){if(m&&m.__esModule)return m;if(m===null||a(m)!=="object"&&typeof m!="function")return{default:m};var y=h();if(y&&y.has(m))return y.get(m);var v,g={},x=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(v in m){var b;Object.prototype.hasOwnProperty.call(m,v)&&((b=x?Object.getOwnPropertyDescriptor(m,v):null)&&(b.get||b.set)?Object.defineProperty(g,v,b):g[v]=m[v])}return g.default=m,y&&y.set(m,g),g}(r("../core/constants"));function h(){var m;return typeof WeakMap!="function"?null:(m=new WeakMap,h=function(){return m},m)}function p(m){return function(y){if(Array.isArray(y)){for(var v=0,g=new Array(y.length);v<y.length;v++)g[v]=y[v];return g}}(m)||function(y){if(Symbol.iterator in Object(y)||Object.prototype.toString.call(y)==="[object Arguments]")return Array.from(y)}(m)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function c(m,y){for(var v=0;v<y.length;v++){var g=y[v];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(m,g.key,g)}}var f=function(){function m(g){if(!(this instanceof m))throw new TypeError("Cannot call a class as a function");(this.renderer=g)._pInst.push(),this.identityMatrix=new l.default.Matrix,g.uMVMatrix=new l.default.Matrix,this.geometry=new l.default.Geometry,this.geometry.gid="_p5_GeometryBuilder_".concat(m.nextGeometryId),m.nextGeometryId++,this.hasTransform=!1}var y,v;return y=m,(v=[{key:"transformVertices",value:function(g){var x=this;return this.hasTransform?g.map(function(b){return x.renderer.uMVMatrix.multiplyPoint(b)}):g}},{key:"transformNormals",value:function(g){var x=this;return this.hasTransform?g.map(function(b){return x.renderer.uNMatrix.multiplyVec3(b)}):g}},{key:"addGeometry",value:function(g){for(var x,b=this,w=(this.hasTransform=!this.renderer.uMVMatrix.mat4.every(function(R,C){return R===b.identityMatrix.mat4[C]}),this.hasTransform&&this.renderer.uNMatrix.inverseTranspose(this.renderer.uMVMatrix),this.geometry.vertices.length),T=((x=this.geometry.vertices).push.apply(x,p(this.transformVertices(g.vertices))),(x=this.geometry.vertexNormals).push.apply(x,p(this.transformNormals(g.vertexNormals))),(x=this.geometry.uvs).push.apply(x,p(g.uvs)),this.renderer._doFill&&(x=this.geometry.faces).push.apply(x,p(g.faces.map(function(R){return R.map(function(C){return C+w})}))),this.renderer._doStroke&&(x=this.geometry.edges).push.apply(x,p(g.edges.map(function(R){return R.map(function(C){return C+w})}))),p(g.vertexColors));T.length<4*g.vertices.length;)T.push.apply(T,p(this.renderer.curFillColor));(x=this.geometry.vertexColors).push.apply(x,p(T))}},{key:"addImmediate",value:function(){var g=this.renderer.immediateMode.geometry,x=this.renderer.immediateMode.shapeMode,b=[];if(this.renderer._doFill)if(x===u.TRIANGLE_STRIP||x===u.QUAD_STRIP)for(var w=2;w<g.vertices.length;w++)w%2==0?b.push([w,w-1,w-2]):b.push([w,w-2,w-1]);else if(x===u.TRIANGLE_FAN)for(var T=2;T<g.vertices.length;T++)b.push([0,T-1,T]);else for(var R=0;R<g.vertices.length;R+=3)b.push([R,R+1,R+2]);this.addGeometry(Object.assign({},g,{faces:b}))}},{key:"addRetained",value:function(g){this.addGeometry(g.model)}},{key:"finish",value:function(){return this.renderer._pInst.pop(),this.geometry}}])&&c(y.prototype,v),m}();f.nextGeometryId=0,o.default=f},{"../core/constants":269,"../core/main":280,"core-js/modules/es.array.every":154,"core-js/modules/es.array.from":161,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.map":167,"core-js/modules/es.object.assign":181,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],325:[function(r,i,o){function s(c){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(c)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.math.hypot"),r("core-js/modules/es.math.sign"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.math.hypot"),r("core-js/modules/es.math.sign"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var a=(p=r("../core/main"))&&p.__esModule?p:{default:p},l=function(c){if(c&&c.__esModule)return c;if(c===null||h(c)!=="object"&&typeof c!="function")return{default:c};var f=u();if(f&&f.has(c))return f.get(c);var m,y={},v=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(m in c){var g;Object.prototype.hasOwnProperty.call(c,m)&&((g=v?Object.getOwnPropertyDescriptor(c,m):null)&&(g.get||g.set)?Object.defineProperty(y,m,g):y[m]=c[m])}return y.default=c,f&&f.set(c,y),y}(r("../core/constants"));function u(){var c;return typeof WeakMap!="function"?null:(c=new WeakMap,u=function(){return c},c)}function h(c){return(h=typeof Symbol=="function"&&s(Symbol.iterator)==="symbol"?function(f){return s(f)}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":s(f)})(c)}a.default.prototype.orbitControl=function(c,f,m,T){var v=this,g=(this._assert3d("orbitControl"),a.default._validateParameters("orbitControl",arguments),this._renderer._curCamera);c===void 0&&(c=1),f===void 0&&(f=c),m===void 0&&(m=1),h(T)!=="object"&&(T={}),this.contextMenuDisabled!==!0&&(this.canvas.oncontextmenu=function(){return!1},this._setProperty("contextMenuDisabled",!0)),this.wheelDefaultDisabled!==!0&&(this.canvas.onwheel=function(){return!1},this._setProperty("wheelDefaultDisabled",!0));var C=T.disableTouchActions;this.touchActionsDisabled===!0||C!==void 0&&!C||(this.canvas.style["touch-action"]="none",this._setProperty("touchActionsDisabled",!0));var x,b,w,C=T.freeRotation,T=C!==void 0&&C,R=[],C=(this.touches.forEach(function(W){v._renderer.prevTouches.forEach(function(X){W.id===X.id&&(X={x:W.x,y:W.y,px:X.x,py:X.y},R.push(X))})}),this._renderer.prevTouches=this.touches,0),P=0,I=0,D=0,j=0,N=this.height<this.width?this.height:this.width,O=!1;return 0<R.length?(O=0<R[0].x&&R[0].x<this.width&&0<R[0].y&&R[0].y<this.height,R.length===1?(P=-c*((x=R[0]).x-x.px)/N,I=f*(x.y-x.py)/N):(x=R[0],b=R[1],C=-(Math.hypot(x.x-b.x,x.y-b.y)-Math.hypot(x.px-b.px,x.py-b.py))*m*4e-4,D=.5*(x.x+b.x)-.5*(x.px+b.px),j=.5*(x.y+b.y)-.5*(x.py+b.py)),0<this.touches.length?O&&(this._renderer.executeRotateAndMove=!0,this._renderer.executeZoom=!0):(this._renderer.executeRotateAndMove=!1,this._renderer.executeZoom=!1)):(O=0<this.mouseX&&this.mouseX<this.width&&0<this.mouseY&&this.mouseY<this.height,this._mouseWheelDeltaY!==0?(C=Math.sign(this._mouseWheelDeltaY)*m,C*=.01,this._mouseWheelDeltaY=0,O&&(this._renderer.executeZoom=!0)):this._renderer.executeZoom=!1,this.mouseIsPressed?(this.mouseButton===this.LEFT?(P=-c*this.movedX/N,I=f*this.movedY/N):this.mouseButton===this.RIGHT&&(D=this.movedX,j=this.movedY*g.yScale),O&&(this._renderer.executeRotateAndMove=!0)):this._renderer.executeRotateAndMove=!1),C!==0&&this._renderer.executeZoom&&(this._renderer.zoomVelocity+=C),.001<Math.abs(this._renderer.zoomVelocity)?(T?g._orbitFree(0,0,this._renderer.zoomVelocity):g._orbit(0,0,this._renderer.zoomVelocity),g.projMatrix.mat4[15]!==0&&(g.projMatrix.mat4[0]*=Math.pow(10,-this._renderer.zoomVelocity),g.projMatrix.mat4[5]*=Math.pow(10,-this._renderer.zoomVelocity),this._renderer.uPMatrix.mat4[0]=g.projMatrix.mat4[0],this._renderer.uPMatrix.mat4[5]=g.projMatrix.mat4[5]),this._renderer.zoomVelocity*=.85):this._renderer.zoomVelocity=0,P===0&&I===0||!this._renderer.executeRotateAndMove||this._renderer.rotateVelocity.add(.6*P,.6*I),1e-6<this._renderer.rotateVelocity.magSq()?(T?g._orbitFree(-this._renderer.rotateVelocity.x,this._renderer.rotateVelocity.y,0):g._orbit(this._renderer.rotateVelocity.x,this._renderer.rotateVelocity.y,0),this._renderer.rotateVelocity.mult(.85)):this._renderer.rotateVelocity.set(0,0),D===0&&j===0||!this._renderer.executeRotateAndMove||(x=2*D/this.width,b=2*-j/this.height,this._renderer.moveVelocity.add(.15*x,.15*b)),1e-6<this._renderer.moveVelocity.magSq()?(m=g._getLocalAxes(),c=g.eyeX-g.centerX,f=g.eyeY-g.centerY,N=g.eyeZ-g.centerZ,O=Math.sqrt(c*c+f*f+N*N),C=new a.default.Vector(g.centerX,g.centerY,g.centerZ),C=g.cameraMatrix.multiplyPoint(C),(C=this._renderer.uPMatrix.multiplyAndNormalizePoint(C)).x-=this._renderer.moveVelocity.x,C.y-=this._renderer.moveVelocity.y,I=(P=this._renderer.uPMatrix.mat4)[15]===0?(w=(P[8]+C.x)/P[0]*O,(P[9]+C.y)/P[5]*O):(w=(C.x-P[12])/P[0],(C.y-P[13])/P[5]),g.setPosition(g.eyeX+w*m.x[0]+I*m.y[0],g.eyeY+w*m.x[1]+I*m.y[1],g.eyeZ+w*m.x[2]+I*m.y[2]),this._renderer.moveVelocity.mult(.85)):this._renderer.moveVelocity.set(0,0),this},a.default.prototype.debugMode=function(){this._assert3d("debugMode");for(var c=arguments.length,f=new Array(c),m=0;m<c;m++)f[m]=arguments[m];a.default._validateParameters("debugMode",f);for(var y=this._registeredMethods.post.length-1;0<=y;y--)this._registeredMethods.post[y].toString()!==this._grid().toString()&&this._registeredMethods.post[y].toString()!==this._axesIcon().toString()||this._registeredMethods.post.splice(y,1);f[0]===l.GRID?this.registerMethod("post",this._grid(f[1],f[2],f[3],f[4],f[5])):f[0]===l.AXES?this.registerMethod("post",this._axesIcon(f[1],f[2],f[3],f[4])):(this.registerMethod("post",this._grid(f[0],f[1],f[2],f[3],f[4])),this.registerMethod("post",this._axesIcon(f[5],f[6],f[7],f[8])))},a.default.prototype.noDebugMode=function(){this._assert3d("noDebugMode");for(var c=this._registeredMethods.post.length-1;0<=c;c--)this._registeredMethods.post[c].toString()!==this._grid().toString()&&this._registeredMethods.post[c].toString()!==this._axesIcon().toString()||this._registeredMethods.post.splice(c,1)},a.default.prototype._grid=function(c,f,m,y,v){c===void 0&&(c=this.width/2),f===void 0&&(f=Math.round(c/30)<4?4:Math.round(c/30)),m===void 0&&(m=0),y===void 0&&(y=0),v===void 0&&(v=0);var g=c/f,x=c/2;return function(){this.push(),this.stroke(255*this._renderer.curStrokeColor[0],255*this._renderer.curStrokeColor[1],255*this._renderer.curStrokeColor[2]),this._renderer.uMVMatrix.set(this._renderer._curCamera.cameraMatrix);for(var b=0;b<=f;b++)this.beginShape(this.LINES),this.vertex(-x+m,y,b*g-x+v),this.vertex(x+m,y,b*g-x+v),this.endShape();for(var w=0;w<=f;w++)this.beginShape(this.LINES),this.vertex(w*g-x+m,y,-x+v),this.vertex(w*g-x+m,y,x+v),this.endShape();this.pop()}},a.default.prototype._axesIcon=function(c,f,m,y){return c===void 0&&(c=40<this.width/20?this.width/20:40),f===void 0&&(f=-this.width/4),m===void 0&&(m=f),y===void 0&&(y=f),function(){this.push(),this._renderer.uMVMatrix.set(this._renderer._curCamera.cameraMatrix),this.strokeWeight(2),this.stroke(255,0,0),this.beginShape(this.LINES),this.vertex(f,m,y),this.vertex(f+c,m,y),this.endShape(),this.stroke(0,255,0),this.beginShape(this.LINES),this.vertex(f,m,y),this.vertex(f,m+c,y),this.endShape(),this.stroke(0,0,255),this.beginShape(this.LINES),this.vertex(f,m,y),this.vertex(f,m,y+c),this.endShape(),this.pop()}};var p=a.default;o.default=p},{"../core/constants":269,"../core/main":280,"core-js/modules/es.array.for-each":160,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.splice":170,"core-js/modules/es.math.hypot":175,"core-js/modules/es.math.sign":177,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.for-each":242,"core-js/modules/web.dom-collections.iterator":243}],326:[function(r,i,o){r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.filter"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var s=(r=r("../core/main"))&&r.__esModule?r:{default:r};s.default.prototype.ambientLight=function(a,l,u,h){this._assert3d("ambientLight"),s.default._validateParameters("ambientLight",arguments);var p=this.color.apply(this,arguments);return this._renderer.ambientLightColors.push(p._array[0],p._array[1],p._array[2]),this._renderer._enableLighting=!0,this},s.default.prototype.specularColor=function(a,l,u){this._assert3d("specularColor"),s.default._validateParameters("specularColor",arguments);var h=this.color.apply(this,arguments);return this._renderer.specularColors=[h._array[0],h._array[1],h._array[2]],this},s.default.prototype.directionalLight=function(a,v,y,h,p,c){this._assert3d("directionalLight"),s.default._validateParameters("directionalLight",arguments),a=a instanceof s.default.Color?a:this.color(a,v,y);var f,m,v=arguments[arguments.length-1],y=typeof v=="number"?(f=arguments[arguments.length-3],m=arguments[arguments.length-2],arguments[arguments.length-1]):(f=v.x,m=v.y,v.z),v=Math.sqrt(f*f+m*m+y*y);return this._renderer.directionalLightDirections.push(f/v,m/v,y/v),this._renderer.directionalLightDiffuseColors.push(a._array[0],a._array[1],a._array[2]),Array.prototype.push.apply(this._renderer.directionalLightSpecularColors,this._renderer.specularColors),this._renderer._enableLighting=!0,this},s.default.prototype.pointLight=function(a,y,v,h,p,c){this._assert3d("pointLight"),s.default._validateParameters("pointLight",arguments),a=a instanceof s.default.Color?a:this.color(a,y,v);var f,m,y=arguments[arguments.length-1],v=typeof y=="number"?(f=arguments[arguments.length-3],m=arguments[arguments.length-2],arguments[arguments.length-1]):(f=y.x,m=y.y,y.z);return this._renderer.pointLightPositions.push(f,m,v),this._renderer.pointLightDiffuseColors.push(a._array[0],a._array[1],a._array[2]),Array.prototype.push.apply(this._renderer.pointLightSpecularColors,this._renderer.specularColors),this._renderer._enableLighting=!0,this},s.default.prototype.imageLight=function(a){this._renderer.activeImageLight=a,this._renderer._enableLighting=!0},s.default.prototype.panorama=function(a){this.filter(this._renderer._getSphereMapping(a))},s.default.prototype.lights=function(){this._assert3d("lights");var a=this.color("rgb(128,128,128)");return this.ambientLight(a),this.directionalLight(a,0,0,-1),this},s.default.prototype.lightFalloff=function(a,l,u){return this._assert3d("lightFalloff"),s.default._validateParameters("lightFalloff",arguments),a<0&&(a=0,console.warn("Value of constant argument in lightFalloff() should be never be negative. Set to 0.")),l<0&&(l=0,console.warn("Value of linear argument in lightFalloff() should be never be negative. Set to 0.")),u<0&&(u=0,console.warn("Value of quadratic argument in lightFalloff() should be never be negative. Set to 0.")),a===0&&l===0&&u===0&&(a=1,console.warn("Either one of the three arguments in lightFalloff() should be greater than zero. Set constant argument to 1.")),this._renderer.constantAttenuation=a,this._renderer.linearAttenuation=l,this._renderer.quadraticAttenuation=u,this},s.default.prototype.spotLight=function(a,l,u,h,p,c,f,m,y,v,g){this._assert3d("spotLight"),s.default._validateParameters("spotLight",arguments);var x,b,w,T=arguments.length;switch(T){case 11:case 10:x=this.color(a,l,u),b=new s.default.Vector(h,p,c),w=new s.default.Vector(f,m,y);break;case 9:a instanceof s.default.Color?(x=a,b=new s.default.Vector(l,u,h),w=new s.default.Vector(p,c,f),v=m,g=y):h instanceof s.default.Vector?(x=this.color(a,l,u),b=h,w=new s.default.Vector(p,c,f),v=m,g=y):f instanceof s.default.Vector?(x=this.color(a,l,u),b=new s.default.Vector(h,p,c),w=f,v=m,g=y):(x=this.color(a,l,u),b=new s.default.Vector(h,p,c),w=new s.default.Vector(f,m,y));break;case 8:v=(w=a instanceof s.default.Color?(x=a,b=new s.default.Vector(l,u,h),new s.default.Vector(p,c,f)):h instanceof s.default.Vector?(x=this.color(a,l,u),b=h,new s.default.Vector(p,c,f)):(x=this.color(a,l,u),b=new s.default.Vector(h,p,c),f),m);break;case 7:a instanceof s.default.Color&&l instanceof s.default.Vector?(x=a,b=l,w=new s.default.Vector(u,h,p),v=c,g=f):a instanceof s.default.Color&&p instanceof s.default.Vector?(x=a,b=new s.default.Vector(l,u,h),w=p,v=c,g=f):h instanceof s.default.Vector&&p instanceof s.default.Vector?(x=this.color(a,l,u),b=h,w=p,v=c,g=f):w=a instanceof s.default.Color?(x=a,b=new s.default.Vector(l,u,h),new s.default.Vector(p,c,f)):h instanceof s.default.Vector?(x=this.color(a,l,u),b=h,new s.default.Vector(p,c,f)):(x=this.color(a,l,u),b=new s.default.Vector(h,p,c),f);break;case 6:h instanceof s.default.Vector&&p instanceof s.default.Vector?(x=this.color(a,l,u),b=h,w=p,v=c):a instanceof s.default.Color&&p instanceof s.default.Vector?(x=a,b=new s.default.Vector(l,u,h),w=p,v=c):a instanceof s.default.Color&&l instanceof s.default.Vector&&(x=a,b=l,w=new s.default.Vector(u,h,p),v=c);break;case 5:a instanceof s.default.Color&&l instanceof s.default.Vector&&u instanceof s.default.Vector?(x=a,b=l,w=u,v=h,g=p):h instanceof s.default.Vector&&p instanceof s.default.Vector?(x=this.color(a,l,u),b=h,w=p):a instanceof s.default.Color&&p instanceof s.default.Vector?(x=a,b=new s.default.Vector(l,u,h),w=p):a instanceof s.default.Color&&l instanceof s.default.Vector&&(x=a,b=l,w=new s.default.Vector(u,h,p));break;case 4:x=a,b=l,w=u,v=h;break;case 3:x=a,b=l,w=u;break;default:return console.warn("Sorry, input for spotlight() is not in prescribed format. Too ".concat(T<3?"few":"many"," arguments were provided")),this}return this._renderer.spotLightDiffuseColors.push(x._array[0],x._array[1],x._array[2]),Array.prototype.push.apply(this._renderer.spotLightSpecularColors,this._renderer.specularColors),this._renderer.spotLightPositions.push(b.x,b.y,b.z),w.normalize(),this._renderer.spotLightDirections.push(w.x,w.y,w.z),v===void 0&&(v=Math.PI/3),g!==void 0&&g<1?(g=1,console.warn("Value of concentration needs to be greater than 1. Setting it to 1")):g===void 0&&(g=100),v=this._renderer._pInst._toRadians(v),this._renderer.spotLightAngle.push(Math.cos(v)),this._renderer.spotLightConc.push(g),this._renderer._enableLighting=!0,this},s.default.prototype.noLights=function(){this._assert3d("noLights");for(var a=arguments.length,l=new Array(a),u=0;u<a;u++)l[u]=arguments[u];return s.default._validateParameters("noLights",l),this._renderer.activeImageLight=null,this._renderer._enableLighting=!1,this._renderer.ambientLightColors.length=0,this._renderer.specularColors=[1,1,1],this._renderer.directionalLightDirections.length=0,this._renderer.directionalLightDiffuseColors.length=0,this._renderer.directionalLightSpecularColors.length=0,this._renderer.pointLightPositions.length=0,this._renderer.pointLightDiffuseColors.length=0,this._renderer.pointLightSpecularColors.length=0,this._renderer.spotLightPositions.length=0,this._renderer.spotLightDirections.length=0,this._renderer.spotLightDiffuseColors.length=0,this._renderer.spotLightSpecularColors.length=0,this._renderer.spotLightAngle.length=0,this._renderer.spotLightConc.length=0,this._renderer.constantAttenuation=1,this._renderer.linearAttenuation=0,this._renderer.quadraticAttenuation=0,this._renderer._useShininess=1,this._renderer._useMetalness=0,this},r=s.default,o.default=r},{"../core/main":280,"core-js/modules/es.array.filter":156}],327:[function(r,i,o){function s(f){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(f)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.object.assign"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.set"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.match"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.trim"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.object.assign"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.set"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.match"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.trim"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,r("regenerator-runtime/runtime");var a=(c=r("../core/main"))&&c.__esModule?c:{default:c};function l(f){return function(m){if(Array.isArray(m)){for(var y=0,v=new Array(m.length);y<m.length;y++)v[y]=m[y];return v}}(f)||function(m){if(Symbol.iterator in Object(m)||Object.prototype.toString.call(m)==="[object Arguments]")return Array.from(m)}(f)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function u(f,m,y,v,g,x,b){try{var w=f[x](b),T=w.value}catch(R){return void y(R)}w.done?m(T):Promise.resolve(T).then(v,g)}function h(f){return function(){var m=this,y=arguments;return new Promise(function(v,g){var x=f.apply(m,y);function b(T){u(x,v,g,b,w,"next",T)}function w(T){u(x,v,g,b,w,"throw",T)}b(void 0)})}}function p(f){return(p=typeof Symbol=="function"&&s(Symbol.iterator)==="symbol"?function(m){return s(m)}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":s(m)})(f)}r("./p5.Geometry"),a.default.prototype.loadModel=function(f,m){a.default._validateParameters("loadModel",arguments);var y,v,g=!1,x=!1,b=!1,w=f.slice(-4),T=(m&&p(m)==="object"?(g=m.normalize||!1,y=m.successCallback,v=m.failureCallback,w=m.fileType||w,x=m.flipU||!1,b=m.flipV||!1):typeof m=="boolean"?(g=m,y=arguments[2],v=arguments[3],arguments[4]!==void 0&&(w=arguments[4])):(y=typeof m=="function"?m:void 0,v=arguments[2],arguments[3]!==void 0&&(w=arguments[3])),new a.default.Geometry),R=(T.gid="".concat(f,"|").concat(g),this);function C(){return(C=h(regeneratorRuntime.mark(function I(D){var j,N,O,W;return regeneratorRuntime.wrap(function(X){for(;;)switch(X.prev=X.next){case 0:for(j=[],N=0;N<D.length;N++)(O=D[N].match(/^mtllib (.+)/))&&function(){var J="",ee=O[1],V=f.split("/");J=1<V.length?(V.pop(),V.join("/")+"/"+ee):ee,j.push(function(){return P.apply(this,arguments)}(J).then(function(q){return q?(Y=R,Z=J,new Promise(function(ce,B){var U=null,K={};Y.loadStrings(Z,function(re){for(var ae=0;ae<re.length;++ae){var pe,ye=re[ae].trim().split(/\s+/);ye[0]==="newmtl"?(pe=ye[1],K[U=pe]={}):ye[0]==="Kd"?K[U].diffuseColor=[parseFloat(ye[1]),parseFloat(ye[2]),parseFloat(ye[3])]:ye[0]==="Ka"?K[U].ambientColor=[parseFloat(ye[1]),parseFloat(ye[2]),parseFloat(ye[3])]:ye[0]==="Ks"?K[U].specularColor=[parseFloat(ye[1]),parseFloat(ye[2]),parseFloat(ye[3])]:ye[0]==="map_Kd"&&(K[U].texturePath=ye[1])}ce(K)},B)})):(console.warn("MTL file not found or error in parsing; proceeding without materials: ".concat(J)),{});var Y,Z}).catch(function(q){return console.warn("Error loading MTL file: ".concat(J),q),{}}))}();return X.prev=2,X.next=5,Promise.all(j);case 5:return W=X.sent,W=Object.assign.apply(Object,[{}].concat(l(W))),X.abrupt("return",W);case 10:return X.prev=10,X.t0=X.catch(2),X.abrupt("return",{});case 13:case"end":return X.stop()}},I,null,[[2,10]])}))).apply(this,arguments)}function P(){return(P=h(regeneratorRuntime.mark(function I(D){var j;return regeneratorRuntime.wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return N.prev=0,N.next=3,fetch(D,{method:"HEAD"});case 3:return j=N.sent,N.abrupt("return",j.ok);case 7:return N.prev=7,N.t0=N.catch(0),N.abrupt("return",!1);case 10:case"end":return N.stop()}},I,null,[[0,7]])}))).apply(this,arguments)}return w.match(/\.stl$/i)?this.httpDo(f,"GET","arrayBuffer",function(I){(function(D,j){if(function(N){for(var O=new DataView(N),W=[115,111,108,105,100],X=0;X<5;X++)if(function(J,ee,V){for(var q=0,Y=J.length;q<Y;q++)if(J[q]!==ee.getUint8(V+q,!1))return;return 1}(W,O,X))return;return 1}(j))(function(N,O){for(var W,X,J,ee,V,q,Y,Z=new DataView(O),ce=Z.getUint32(80,!0),B=!1,U=0;U<70;U++)Z.getUint32(U,!1)===1129270351&&Z.getUint8(U+4)===82&&Z.getUint8(U+5)===61&&(B=!0,ee=[],V=Z.getUint8(U+6)/255,q=Z.getUint8(U+7)/255,Y=Z.getUint8(U+8)/255);for(var K=0;K<ce;K++){for(var re,ae=84+50*K,pe=Z.getFloat32(ae,!0),ye=Z.getFloat32(4+ae,!0),Re=Z.getFloat32(8+ae,!0),Me=(B&&(re=Z.getUint16(48+ae,!0),J=32768&re?(W=V,X=q,Y):(W=(31&re)/31,X=(re>>5&31)/31,(re>>10&31)/31)),new a.default.Vector(pe,ye,Re)),xe=1;xe<=3;xe++){var ve=ae+12*xe,ve=new a.default.Vector(Z.getFloat32(ve,!0),Z.getFloat32(4+ve,!0),Z.getFloat32(8+ve,!0));N.vertices.push(ve),N.vertexNormals.push(Me),B&&ee.push(W,X,J)}N.faces.push([3*K,3*K+1,3*K+2]),N.uvs.push([0,0],[0,0],[0,0])}})(D,j);else{if(j=new DataView(j),!("TextDecoder"in window))return console.warn("Sorry, ASCII STL loading only works in browsers that support TextDecoder (https://caniuse.com/#feat=textencoder)");j=new TextDecoder("utf-8").decode(j).split(`
`),function(N,O){for(var W,X,J="",ee=[],V=0;V<O.length;++V){for(var q=O[V].trim(),Y=q.split(" "),Z=0;Z<Y.length;++Z)Y[Z]===""&&Y.splice(Z,1);if(Y.length!==0)switch(J){case"":if(Y[0]!=="solid")return console.error(q),console.error('Invalid state "'.concat(Y[0],'", should be "solid"'));J="solid";break;case"solid":if(Y[0]!=="facet"||Y[1]!=="normal")return console.error(q),console.error('Invalid state "'.concat(Y[0],'", should be "facet normal"'));W=new a.default.Vector(parseFloat(Y[2]),parseFloat(Y[3]),parseFloat(Y[4])),N.vertexNormals.push(W,W,W),J="facet normal";break;case"facet normal":if(Y[0]!=="outer"||Y[1]!=="loop")return console.error(q),console.error('Invalid state "'.concat(Y[0],'", should be "outer loop"'));J="vertex";break;case"vertex":if(Y[0]==="vertex")X=new a.default.Vector(parseFloat(Y[1]),parseFloat(Y[2]),parseFloat(Y[3])),N.vertices.push(X),N.uvs.push([0,0]),ee.push(N.vertices.indexOf(X));else{if(Y[0]!=="endloop")return console.error(q),console.error('Invalid state "'.concat(Y[0],'", should be "vertex" or "endloop"'));N.faces.push(ee),ee=[],J="endloop"}break;case"endloop":if(Y[0]!=="endfacet")return console.error(q),console.error('Invalid state "'.concat(Y[0],'", should be "endfacet"'));J="endfacet";break;case"endfacet":if(Y[0]!=="endsolid"){if(Y[0]!=="facet"||Y[1]!=="normal")return console.error(q),console.error('Invalid state "'.concat(Y[0],'", should be "endsolid" or "facet normal"'));W=new a.default.Vector(parseFloat(Y[2]),parseFloat(Y[3]),parseFloat(Y[4])),N.vertexNormals.push(W,W,W),J="facet normal"}break;default:console.error('Invalid state "'.concat(J,'"'))}}}(D,j)}})(T,I),g&&T.normalize(),x&&T.flipU(),b&&T.flipV(),R._decrementPreload(),typeof y=="function"&&y(T)},v):w.match(/\.obj$/i)?this.loadStrings(f,function(){var I=h(regeneratorRuntime.mark(function D(j){var N;return regeneratorRuntime.wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.prev=0,O.next=3,function(){return C.apply(this,arguments)}(j);case 3:N=O.sent,function(W,X){for(var J=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{},ee={v:[],vt:[],vn:[]},V={},q=null,Y=new Set,Z=!1,ce=!1,B=0;B<X.length;++B){var U=X[B].trim().split(/\b\s+/);if(0<U.length){if(U[0]==="usemtl")q=U[1];else if(U[0]==="v"||U[0]==="vn"){var K=new a.default.Vector(parseFloat(U[1]),parseFloat(U[2]),parseFloat(U[3]));ee[U[0]].push(K)}else if(U[0]==="vt")K=[parseFloat(U[1]),1-parseFloat(U[2])],ee[U[0]].push(K);else if(U[0]==="f")for(var re=3;re<U.length;++re){for(var ae=[],pe=[1,re-1,re],ye=0;ye<pe.length;++ye){for(var Re,Me=U[pe[ye]],xe=Me.split("/"),ve=0;ve<xe.length;ve++)xe[ve]=parseInt(xe[ve])-1;V[Me]||(V[Me]={}),V[Me][q]===void 0?(Re=W.vertices.length,W.vertices.push(ee.v[xe[0]].copy()),W.uvs.push(ee.vt[xe[1]]?ee.vt[xe[1]].slice():[0,0]),W.vertexNormals.push(ee.vn[xe[2]]?ee.vn[xe[2]].copy():new a.default.Vector),V[Me][q]=Re,ae.push(Re),q&&J[q]&&J[q].diffuseColor&&Y.add(ee.v[xe[0]])):ae.push(V[Me][q])}if(ae[0]!==ae[1]&&ae[0]!==ae[2]&&ae[1]!==ae[2])if(W.faces.push(ae),q&&J[q]&&J[q].diffuseColor){Z=Z=!0;for(var ne=J[q].diffuseColor,Te=0;Te<ae.length;Te++)W.vertexColors.push(ne[0]),W.vertexColors.push(ne[1]),W.vertexColors.push(ne[2])}else ce=!0}}}if(W.vertexNormals.length===0&&W.computeNormals(),Z===ce)throw new Error("Model coloring is inconsistent. Either all vertices should have colors or none should.")}(T,j,N),O.next=11;break;case 7:return O.prev=7,O.t0=O.catch(0),v?v(O.t0):a.default._friendlyError("Error during parsing: "+O.t0.message),O.abrupt("return");case 11:return O.prev=11,g&&T.normalize(),x&&T.flipU(),b&&T.flipV(),R._decrementPreload(),typeof y=="function"&&y(T),O.finish(11);case 18:case"end":return O.stop()}},D,null,[[0,7,11,18]])}));return function(D){return I.apply(this,arguments)}}(),v):(a.default._friendlyFileLoadError(3,f),v?v():a.default._friendlyError("Sorry, the file type is invalid. Only OBJ and STL files are supported.")),T},a.default.prototype.model=function(f){this._assert3d("model"),a.default._validateParameters("model",arguments),0<f.vertices.length&&(this._renderer.geometryInHash(f.gid)||(f.edges.length===0&&f._makeTriangleEdges(),f._edgesToVertices(),this._renderer.createBuffers(f.gid,f)),this._renderer.drawBuffers(f.gid))};var c=a.default;o.default=c},{"../core/main":280,"./p5.Geometry":332,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.from":161,"core-js/modules/es.array.index-of":163,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.join":165,"core-js/modules/es.array.slice":168,"core-js/modules/es.array.splice":170,"core-js/modules/es.object.assign":181,"core-js/modules/es.object.to-string":187,"core-js/modules/es.promise":188,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.set":194,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.match":198,"core-js/modules/es.string.split":203,"core-js/modules/es.string.trim":206,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/web.dom-collections.iterator":243,"regenerator-runtime/runtime":257}],328:[function(r,i,o){function s(c){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(c)}function a(c){return(a=typeof Symbol=="function"&&s(Symbol.iterator)==="symbol"?function(f){return s(f)}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":s(f)})(c)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var l=(p=r("../core/main"))&&p.__esModule?p:{default:p},u=function(c){if(c&&c.__esModule)return c;if(c===null||a(c)!=="object"&&typeof c!="function")return{default:c};var f=h();if(f&&f.has(c))return f.get(c);var m,y={},v=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(m in c){var g;Object.prototype.hasOwnProperty.call(c,m)&&((g=v?Object.getOwnPropertyDescriptor(c,m):null)&&(g.get||g.set)?Object.defineProperty(y,m,g):y[m]=c[m])}return y.default=c,f&&f.set(c,y),y}(r("../core/constants"));function h(){var c;return typeof WeakMap!="function"?null:(c=new WeakMap,h=function(){return c},c)}r("./p5.Texture"),l.default.prototype.loadShader=function(c,f,m,y){l.default._validateParameters("loadShader",arguments),y=y||console.error;function v(){x._decrementPreload(),m&&m(g)}var g=new l.default.Shader,x=this,b=!1,w=!1;return this.loadStrings(c,function(T){g._vertSrc=T.join(`
`),w=!0,b&&v()},y),this.loadStrings(f,function(T){g._fragSrc=T.join(`
`),b=!0,w&&v()},y),g},l.default.prototype.createShader=function(c,f){return l.default._validateParameters("createShader",arguments),new l.default.Shader(this._renderer,c,f)},l.default.prototype.createFilterShader=function(c){l.default._validateParameters("createFilterShader",arguments);var f=c.includes("#version 300 es")?`#version 300 es
    uniform mat4 uModelViewMatrix;
    uniform mat4 uProjectionMatrix;

    in vec3 aPosition;
    in vec2 aTexCoord;
    out vec2 vTexCoord;

    void main() {
      // transferring texcoords for the frag shader
      vTexCoord = aTexCoord;

      // copy position with a fourth coordinate for projection (1.0 is normal)
      vec4 positionVec4 = vec4(aPosition, 1.0);

      // project to 3D space
      gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
    }
  `:`
    uniform mat4 uModelViewMatrix;
    uniform mat4 uProjectionMatrix;

    attribute vec3 aPosition;
    // texcoords only come from p5 to vertex shader
    // so pass texcoords on to the fragment shader in a varying variable
    attribute vec2 aTexCoord;
    varying vec2 vTexCoord;

    void main() {
      // transferring texcoords for the frag shader
      vTexCoord = aTexCoord;

      // copy position with a fourth coordinate for projection (1.0 is normal)
      vec4 positionVec4 = vec4(aPosition, 1.0);

      // project to 3D space
      gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
    }
  `,f=new l.default.Shader(this._renderer,f,c);return this._renderer.GL?f.ensureCompiledOnContext(this):f.ensureCompiledOnContext(this._renderer.getFilterGraphicsLayer()),f},l.default.prototype.shader=function(c){return this._assert3d("shader"),l.default._validateParameters("shader",arguments),c.ensureCompiledOnContext(this),c.isStrokeShader()?this._renderer.userStrokeShader=c:(this._renderer.userFillShader=c,this._renderer._useNormalMaterial=!1),this},l.default.prototype.resetShader=function(){return this._renderer.userFillShader=this._renderer.userStrokeShader=null,this},l.default.prototype.texture=function(c){return this._assert3d("texture"),l.default._validateParameters("texture",arguments),c.gifProperties&&c._animateGif(this),this._renderer.drawMode=u.TEXTURE,this._renderer._useNormalMaterial=!1,this._renderer._tex=c,this._renderer._setProperty("_doFill",!0),this},l.default.prototype.textureMode=function(c){c!==u.IMAGE&&c!==u.NORMAL?console.warn("You tried to set ".concat(c," textureMode only supports IMAGE & NORMAL ")):this._renderer.textureMode=c},l.default.prototype.textureWrap=function(c){var f=1<arguments.length&&arguments[1]!==void 0?arguments[1]:c,m=(this._renderer.textureWrapX=c,this._renderer.textureWrapY=f,!0),y=!1,v=void 0;try{for(var g,x=this._renderer.textures.values()[Symbol.iterator]();!(m=(g=x.next()).done);m=!0)g.value.setWrapMode(c,f)}catch(b){y=!0,v=b}finally{try{m||x.return==null||x.return()}finally{if(y)throw v}}},l.default.prototype.normalMaterial=function(){this._assert3d("normalMaterial");for(var c=arguments.length,f=new Array(c),m=0;m<c;m++)f[m]=arguments[m];return l.default._validateParameters("normalMaterial",f),this._renderer.drawMode=u.FILL,this._renderer._useSpecularMaterial=!1,this._renderer._useEmissiveMaterial=!1,this._renderer._useNormalMaterial=!0,this._renderer.curFillColor=[1,1,1,1],this._renderer._setProperty("_doFill",!0),this.noStroke(),this},l.default.prototype.ambientMaterial=function(c,f,m){this._assert3d("ambientMaterial"),l.default._validateParameters("ambientMaterial",arguments);var y=l.default.prototype.color.apply(this,arguments);return this._renderer._hasSetAmbient=!0,this._renderer.curAmbientColor=y._array,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this._renderer._setProperty("_doFill",!0),this},l.default.prototype.emissiveMaterial=function(c,f,m,y){this._assert3d("emissiveMaterial"),l.default._validateParameters("emissiveMaterial",arguments);var v=l.default.prototype.color.apply(this,arguments);return this._renderer.curEmissiveColor=v._array,this._renderer._useEmissiveMaterial=!0,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this},l.default.prototype.specularMaterial=function(c,f,m,y){this._assert3d("specularMaterial"),l.default._validateParameters("specularMaterial",arguments);var v=l.default.prototype.color.apply(this,arguments);return this._renderer.curSpecularColor=v._array,this._renderer._useSpecularMaterial=!0,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this},l.default.prototype.shininess=function(c){return this._assert3d("shininess"),l.default._validateParameters("shininess",arguments),this._renderer._useShininess=c=c<1?1:c,this},l.default.prototype.metalness=function(c){return this._assert3d("metalness"),c=1-Math.exp(-c/100),this._renderer._useMetalness=c,this},l.default.RendererGL.prototype._applyColorBlend=function(c,v){var m=this.GL,y=this.drawMode===u.TEXTURE,v=v||this.userFillShader||this.userStrokeShader||this.userPointShader||y||this.curBlendMode!==u.BLEND||c[c.length-1]<1||this._isErasing;return v!==this._isBlending&&(v||this.curBlendMode!==u.BLEND&&this.curBlendMode!==u.ADD?m.enable(m.BLEND):m.disable(m.BLEND),m.depthMask(!0),this._isBlending=v),this._applyBlendMode(),c},l.default.RendererGL.prototype._applyBlendMode=function(){if(this._cachedBlendMode!==this.curBlendMode){var c=this.GL;switch(this.curBlendMode){case u.BLEND:c.blendEquation(c.FUNC_ADD),c.blendFunc(c.ONE,c.ONE_MINUS_SRC_ALPHA);break;case u.ADD:c.blendEquation(c.FUNC_ADD),c.blendFunc(c.ONE,c.ONE);break;case u.REMOVE:c.blendEquation(c.FUNC_ADD),c.blendFunc(c.ZERO,c.ONE_MINUS_SRC_ALPHA);break;case u.MULTIPLY:c.blendEquation(c.FUNC_ADD),c.blendFunc(c.DST_COLOR,c.ONE_MINUS_SRC_ALPHA);break;case u.SCREEN:c.blendEquation(c.FUNC_ADD),c.blendFunc(c.ONE,c.ONE_MINUS_SRC_COLOR);break;case u.EXCLUSION:c.blendEquationSeparate(c.FUNC_ADD,c.FUNC_ADD),c.blendFuncSeparate(c.ONE_MINUS_DST_COLOR,c.ONE_MINUS_SRC_COLOR,c.ONE,c.ONE);break;case u.REPLACE:c.blendEquation(c.FUNC_ADD),c.blendFunc(c.ONE,c.ZERO);break;case u.SUBTRACT:c.blendEquationSeparate(c.FUNC_REVERSE_SUBTRACT,c.FUNC_ADD),c.blendFuncSeparate(c.ONE,c.ONE,c.ONE,c.ONE_MINUS_SRC_ALPHA);break;case u.DARKEST:this.blendExt?(c.blendEquationSeparate(this.blendExt.MIN||this.blendExt.MIN_EXT,c.FUNC_ADD),c.blendFuncSeparate(c.ONE,c.ONE,c.ONE,c.ONE)):console.warn("blendMode(DARKEST) does not work in your browser in WEBGL mode.");break;case u.LIGHTEST:this.blendExt?(c.blendEquationSeparate(this.blendExt.MAX||this.blendExt.MAX_EXT,c.FUNC_ADD),c.blendFuncSeparate(c.ONE,c.ONE,c.ONE,c.ONE)):console.warn("blendMode(LIGHTEST) does not work in your browser in WEBGL mode.");break;default:console.error("Oops! Somehow RendererGL set curBlendMode to an unsupported mode.")}this._isErasing||(this._cachedBlendMode=this.curBlendMode)}};var p=l.default;o.default=p},{"../core/constants":269,"../core/main":280,"./p5.Texture":339,"core-js/modules/es.array.includes":162,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.join":165,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.includes":196,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],329:[function(r,i,o){r("core-js/modules/es.array.slice"),r("core-js/modules/es.math.hypot"),r("core-js/modules/es.string.sub"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.math.hypot"),r("core-js/modules/es.string.sub"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var s=(r=r("../core/main"))&&r.__esModule?r:{default:r};function a(l,u){for(var h=0;h<u.length;h++){var p=u[h];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(l,p.key,p)}}s.default.prototype.camera=function(){var l;this._assert3d("camera");for(var u=arguments.length,h=new Array(u),p=0;p<u;p++)h[p]=arguments[p];return s.default._validateParameters("camera",h),(l=this._renderer._curCamera).camera.apply(l,h),this},s.default.prototype.perspective=function(){var l;this._assert3d("perspective");for(var u=arguments.length,h=new Array(u),p=0;p<u;p++)h[p]=arguments[p];return s.default._validateParameters("perspective",h),(l=this._renderer._curCamera).perspective.apply(l,h),this},s.default.prototype.linePerspective=function(l){if(s.default._validateParameters("linePerspective",arguments),!(this._renderer instanceof s.default.RendererGL))throw new Error("linePerspective() must be called in WebGL mode.");if(l===void 0)return this._renderer._curCamera.useLinePerspective;this._renderer._curCamera.useLinePerspective=l},s.default.prototype.ortho=function(){var l;this._assert3d("ortho");for(var u=arguments.length,h=new Array(u),p=0;p<u;p++)h[p]=arguments[p];return s.default._validateParameters("ortho",h),(l=this._renderer._curCamera).ortho.apply(l,h),this},s.default.prototype.frustum=function(){var l;this._assert3d("frustum");for(var u=arguments.length,h=new Array(u),p=0;p<u;p++)h[p]=arguments[p];return s.default._validateParameters("frustum",h),(l=this._renderer._curCamera).frustum.apply(l,h),this},s.default.prototype.createCamera=function(){this._assert3d("createCamera");var l=new s.default.Camera(this._renderer);return l._computeCameraDefaultSettings(),l._setDefaultCamera(),this._renderer._curCamera=l},s.default.Camera=function(){function l(p){if(!(this instanceof l))throw new TypeError("Cannot call a class as a function");this._renderer=p,this.cameraType="default",this.useLinePerspective=!0,this.cameraMatrix=new s.default.Matrix,this.projMatrix=new s.default.Matrix,this.yScale=1}var u,h;return u=l,(h=[{key:"perspective",value:function(y,c,f,m){this.cameraType=0<arguments.length?"custom":"default",y===void 0?(y=this.defaultCameraFOV,this.cameraFOV=y):this.cameraFOV=this._renderer._pInst._toRadians(y),c===void 0&&(c=this.defaultAspectRatio),f===void 0&&(f=this.defaultCameraNear),m===void 0&&(m=this.defaultCameraFar),f<=1e-4&&(f=.01,console.log("Avoid perspective near plane values close to or below 0. Setting value to 0.01.")),m<f&&console.log("Perspective far plane value is less than near plane value. Nothing will be shown."),this.aspectRatio=c,this.cameraNear=f,this.cameraFar=m,this.projMatrix=s.default.Matrix.identity();var y=1/Math.tan(this.cameraFOV/2),v=1/(this.cameraNear-this.cameraFar);this.projMatrix.set(y/c,0,0,0,0,-y*this.yScale,0,0,0,0,(m+f)*v,-1,0,0,2*m*f*v,0),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix)}},{key:"ortho",value:function(C,R,f,m,y,v){C===void 0&&(C=-this._renderer.width/2),R===void 0&&(R=+this._renderer.width/2),f===void 0&&(f=-this._renderer.height/2),m===void 0&&(m=+this._renderer.height/2),y===void 0&&(y=0),v===void 0&&(v=Math.max(this._renderer.width,this._renderer.height)+800),this.cameraNear=y;var P=R-C,g=m-f,x=(this.cameraFar=v)-y,b=2/P,w=2/g*this.yScale,T=-2/x,R=-(R+C)/P,C=-(m+f)/g,P=-(v+y)/x;this.projMatrix=s.default.Matrix.identity(),this.projMatrix.set(b,0,0,0,0,-w,0,0,0,0,T,0,R,C,P,1),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix),this.cameraType="custom"}},{key:"frustum",value:function(C,R,f,m,y,v){C===void 0&&(C=.05*-this._renderer.width),R===void 0&&(R=.05*+this._renderer.width),f===void 0&&(f=.05*+this._renderer.height),m===void 0&&(m=.05*-this._renderer.height),y===void 0&&(y=this.defaultCameraNear),v===void 0&&(v=this.defaultCameraFar),this.cameraNear=y;var P=R-C,g=m-f,x=(this.cameraFar=v)-y,b=2*y/P,w=2*y/g*this.yScale,T=-2*v*y/x,R=(R+C)/P,C=(m+f)/g,P=-(v+y)/x;this.projMatrix=s.default.Matrix.identity(),this.projMatrix.set(b,0,0,0,0,-w,0,0,R,C,P,-1,0,0,T,0),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix),this.cameraType="custom"}},{key:"_rotateView",value:function(b,c,f,m){var y=this.centerX,v=this.centerY,g=this.centerZ,x=(y-=this.eyeX,v-=this.eyeY,g-=this.eyeZ,s.default.Matrix.identity(this._renderer._pInst)),b=(x.rotate(this._renderer._pInst._toRadians(b),c,f,m),[y*x.mat4[0]+v*x.mat4[4]+g*x.mat4[8],y*x.mat4[1]+v*x.mat4[5]+g*x.mat4[9],y*x.mat4[2]+v*x.mat4[6]+g*x.mat4[10]]);b[0]+=this.eyeX,b[1]+=this.eyeY,b[2]+=this.eyeZ,this.camera(this.eyeX,this.eyeY,this.eyeZ,b[0],b[1],b[2],this.upX,this.upY,this.upZ)}},{key:"pan",value:function(p){var c=this._getLocalAxes();this._rotateView(p,c.y[0],c.y[1],c.y[2])}},{key:"tilt",value:function(p){var c=this._getLocalAxes();this._rotateView(p,c.x[0],c.x[1],c.x[2])}},{key:"lookAt",value:function(p,c,f){this.camera(this.eyeX,this.eyeY,this.eyeZ,p,c,f,this.upX,this.upY,this.upZ)}},{key:"camera",value:function(p,c,f,m,y,v,g,x,b){return p===void 0&&(p=this.defaultEyeX,c=this.defaultEyeY,f=this.defaultEyeZ,m=p,y=c,x=1,b=g=v=0),this.eyeX=p,this.eyeY=c,this.eyeZ=f,m!==void 0&&(this.centerX=m,this.centerY=y,this.centerZ=v),g!==void 0&&(this.upX=g,this.upY=x,this.upZ=b),m=this._getLocalAxes(),this.cameraMatrix.set(m.x[0],m.y[0],m.z[0],0,m.x[1],m.y[1],m.z[1],0,m.x[2],m.y[2],m.z[2],0,0,0,0,1),y=-p,this.cameraMatrix.translate([y,-c,-f]),this._isActive()&&this._renderer.uMVMatrix.set(this.cameraMatrix),this}},{key:"move",value:function(m,y,f){var v=this._getLocalAxes(),m=[v.x[0]*m,v.x[1]*m,v.x[2]*m],y=[v.y[0]*y,v.y[1]*y,v.y[2]*y],v=[v.z[0]*f,v.z[1]*f,v.z[2]*f];this.camera(this.eyeX+m[0]+y[0]+v[0],this.eyeY+m[1]+y[1]+v[1],this.eyeZ+m[2]+y[2]+v[2],this.centerX+m[0]+y[0]+v[0],this.centerY+m[1]+y[1]+v[1],this.centerZ+m[2]+y[2]+v[2],this.upX,this.upY,this.upZ)}},{key:"setPosition",value:function(p,c,f){var m=p-this.eyeX,y=c-this.eyeY,v=f-this.eyeZ;this.camera(p,c,f,this.centerX+m,this.centerY+y,this.centerZ+v,this.upX,this.upY,this.upZ)}},{key:"set",value:function(p){for(var c=0,f=["eyeX","eyeY","eyeZ","centerX","centerY","centerZ","upX","upY","upZ","cameraFOV","aspectRatio","cameraNear","cameraFar","cameraType","yScale"];c<f.length;c++){var m=f[c];this[m]=p[m]}this.cameraMatrix=p.cameraMatrix.copy(),this.projMatrix=p.projMatrix.copy(),this._isActive()&&(this._renderer.uMVMatrix.mat4=this.cameraMatrix.mat4.slice(),this._renderer.uPMatrix.mat4=this.projMatrix.mat4.slice())}},{key:"slerp",value:function(p,c,f){var m,y,v,g,x,b,w,T,R,C,P,I,D,j,N,O,W,X;f===0?this.set(p):f===1?this.set(c):(this.projMatrix.mat4[15]!==0&&(this.projMatrix.mat4[0]=p.projMatrix.mat4[0]*Math.pow(c.projMatrix.mat4[0]/p.projMatrix.mat4[0],f),this.projMatrix.mat4[5]=p.projMatrix.mat4[5]*Math.pow(c.projMatrix.mat4[5]/p.projMatrix.mat4[5],f),this._isActive()&&(this._renderer.uPMatrix.mat4=this.projMatrix.mat4.slice())),g=new s.default.Vector(p.eyeX,p.eyeY,p.eyeZ),x=new s.default.Vector(c.eyeX,c.eyeY,c.eyeZ),O=new s.default.Vector(p.centerX,p.centerY,p.centerZ),X=new s.default.Vector(c.centerX,c.centerY,c.centerZ),v=s.default.Vector.dist(g,O),m=s.default.Vector.dist(x,X),m=v*Math.pow(m/v,f),v=s.default.Vector.sub(g,x),y=1,1e-6<(W=(j=g.copy().sub(x).sub(O).add(X)).magSq())&&(y=s.default.Vector.dot(v,j)/W,y=Math.max(0,Math.min(y,1))),v=s.default.Vector.lerp(s.default.Vector.lerp(g,O,y),s.default.Vector.lerp(x,X,y),f),j=p.cameraMatrix.createSubMatrix3x3(),W=c.cameraMatrix.createSubMatrix3x3(),g=j.row(2),O=W.row(2),x=j.row(1),X=W.row(1),p=new s.default.Vector,c=new s.default.Vector,b=new s.default.Vector,w=new s.default.Vector,1-(T=.5*((j=(W=W.mult3x3(j.copy().transpose3x3())).diagonal())[0]+j[1]+j[2]-1))<1e-7?(p.set(s.default.Vector.lerp(g,O,f)).normalize(),b.set(p).mult(y*m).add(v),w.set(p).mult((y-1)*m).add(v),c.set(s.default.Vector.lerp(x,X,f)).normalize()):(O=1/(1-T),X=Math.max(j[0],j[1],j[2]),I=W.mat3[1]+W.mat3[3],D=W.mat3[2]+W.mat3[6],N=W.mat3[5]+W.mat3[7],X=X===j[0]?(C=.5*I*(O/=R=Math.sqrt((j[0]-T)*O)),P=.5*D*O,.5*(W.mat3[7]-W.mat3[5])/R):X===j[1]?(P=.5*N*(O/=C=Math.sqrt((j[1]-T)*O)),R=.5*I*O,.5*(W.mat3[2]-W.mat3[6])/C):(R=.5*D*(O/=P=Math.sqrt((j[2]-T)*O)),C=.5*N*O,.5*(W.mat3[3]-W.mat3[1])/P),I=f*Math.atan2(X,T),D=Math.cos(I),j=Math.sin(I),(X=new s.default.Matrix("mat3",[D+(N=1-D)*R*R,N*(O=R*C)+j*P,N*(W=P*R)-j*C,N*O-j*P,D+N*C*C,N*(f=C*P)+j*R,N*W+j*C,N*f-j*R,D+N*P*P])).multiplyVec3(g,p),b.set(p).mult(y*m).add(v),w.set(p).mult((y-1)*m).add(v),X.multiplyVec3(x,c)),this.camera(b.x,b.y,b.z,w.x,w.y,w.z,c.x,c.y,c.z))}},{key:"_computeCameraDefaultSettings",value:function(){this.defaultAspectRatio=this._renderer.width/this._renderer.height,this.defaultEyeX=0,this.defaultEyeY=0,this.defaultEyeZ=800,this.defaultCameraFOV=2*Math.atan(this._renderer.height/2/this.defaultEyeZ),this.defaultCenterX=0,this.defaultCenterY=0,this.defaultCenterZ=0,this.defaultCameraNear=.1*this.defaultEyeZ,this.defaultCameraFar=10*this.defaultEyeZ}},{key:"_setDefaultCamera",value:function(){this.cameraFOV=this.defaultCameraFOV,this.aspectRatio=this.defaultAspectRatio,this.eyeX=this.defaultEyeX,this.eyeY=this.defaultEyeY,this.eyeZ=this.defaultEyeZ,this.centerX=this.defaultCenterX,this.centerY=this.defaultCenterY,this.centerZ=this.defaultCenterZ,this.upX=0,this.upY=1,this.upZ=0,this.cameraNear=this.defaultCameraNear,this.cameraFar=this.defaultCameraFar,this.perspective(),this.camera(),this.cameraType="default"}},{key:"_resize",value:function(){this.cameraType==="default"&&(this._computeCameraDefaultSettings(),this.cameraFOV=this.defaultCameraFOV,this.aspectRatio=this.defaultAspectRatio,this.perspective())}},{key:"copy",value:function(){var p=new s.default.Camera(this._renderer);return p.cameraFOV=this.cameraFOV,p.aspectRatio=this.aspectRatio,p.eyeX=this.eyeX,p.eyeY=this.eyeY,p.eyeZ=this.eyeZ,p.centerX=this.centerX,p.centerY=this.centerY,p.centerZ=this.centerZ,p.upX=this.upX,p.upY=this.upY,p.upZ=this.upZ,p.cameraNear=this.cameraNear,p.cameraFar=this.cameraFar,p.cameraType=this.cameraType,p.cameraMatrix=this.cameraMatrix.copy(),p.projMatrix=this.projMatrix.copy(),p.yScale=this.yScale,p}},{key:"_getLocalAxes",value:function(){var p=this.eyeX-this.centerX,c=this.eyeY-this.centerY,f=this.eyeZ-this.centerZ,g=Math.sqrt(p*p+c*c+f*f),g=(g!==0&&(p/=g,c/=g,f/=g),this.upX),m=(x=this.upY)*f-(b=this.upZ)*c,y=-g*f+b*p,v=g*c-x*p,g=c*v-f*y,x=-p*v+f*m,b=p*y-c*m,w=Math.sqrt(m*m+y*y+v*v),w=(w!==0&&(m/=w,y/=w,v/=w),Math.sqrt(g*g+x*x+b*b));return w!==0&&(g/=w,x/=w,b/=w),{x:[m,y,v],y:[g,x,b],z:[p,c,f]}}},{key:"_orbit",value:function(p,w,b){var y=this.eyeX-this.centerX,v=this.eyeY-this.centerY,g=this.eyeZ-this.centerZ,m=Math.hypot(y,v,g),y=new s.default.Vector(y,v,g).normalize(),v=new s.default.Vector(this.upX,this.upY,this.upZ).normalize(),g=s.default.Vector.cross(v,y).normalize(),x=s.default.Vector.cross(g,v),b=((m=(m*=Math.pow(10,b))<this.cameraNear?this.cameraNear:m)>this.cameraFar&&(m=this.cameraFar),Math.acos(Math.max(-1,Math.min(1,s.default.Vector.dot(y,v))))+w),w=p;(b<=0||b>=Math.PI)&&(this.upX*=-1,this.upY*=-1,this.upZ*=-1),v.mult(Math.cos(b)),x.mult(Math.cos(w)*Math.sin(b)),g.mult(Math.sin(w)*Math.sin(b)),y.set(v).add(x).add(g),this.eyeX=m*y.x+this.centerX,this.eyeY=m*y.y+this.centerY,this.eyeZ=m*y.z+this.centerZ,this.camera(this.eyeX,this.eyeY,this.eyeZ,this.centerX,this.centerY,this.centerZ,this.upX,this.upY,this.upZ)}},{key:"_orbitFree",value:function(b,w,R){var y=this.eyeX-this.centerX,v=this.eyeY-this.centerY,g=this.eyeZ-this.centerZ,m=Math.hypot(y,v,g),y=new s.default.Vector(y,v,g).normalize(),v=new s.default.Vector(this.upX,this.upY,this.upZ),g=s.default.Vector.cross(v,y).normalize(),x=s.default.Vector.cross(y,g),C=Math.atan2(w,b),C=(x.mult(Math.sin(C)),g.mult(Math.cos(C)).add(x),Math.sqrt(b*b+w*w)),x=s.default.Vector.cross(y,g),b=((m=(m*=Math.pow(10,R))<this.cameraNear?this.cameraNear:m)>this.cameraFar&&(m=this.cameraFar),Math.cos(C)),w=Math.sin(C),R=v.dot(y),C=v.dot(g),T=R*b+C*w,R=-R*w+C*b,C=v.dot(x);v.x=T*y.x+R*g.x+C*x.x,v.y=T*y.y+R*g.y+C*x.y,v.z=T*y.z+R*g.z+C*x.z,g.mult(-w),y.mult(b).add(g).mult(m),this.camera(y.x+this.centerX,y.y+this.centerY,y.z+this.centerZ,this.centerX,this.centerY,this.centerZ,v.x,v.y,v.z)}},{key:"_isActive",value:function(){return this===this._renderer._curCamera}}])&&a(u.prototype,h),l}(),s.default.prototype.setCamera=function(l){this._renderer._curCamera=l,this._renderer.uPMatrix.set(l.projMatrix)},r=s.default.Camera,o.default=r},{"../core/main":280,"core-js/modules/es.array.slice":168,"core-js/modules/es.math.hypot":175,"core-js/modules/es.string.sub":205}],330:[function(r,i,o){r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.math.log2"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.typed-array.float32-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.math.log2"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.typed-array.float32-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,r=(r=r("../core/main"))&&r.__esModule?r:{default:r};function s(a,l){for(var u=0;u<l.length;u++){var h=l[u];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(a,h.key,h)}}r.default.DataArray=function(){function a(){var h=0<arguments.length&&arguments[0]!==void 0?arguments[0]:128,p=this,c=a;if(!(p instanceof c))throw new TypeError("Cannot call a class as a function");this.length=0,this.data=new Float32Array(h),this.initialLength=h}var l,u;return l=a,(u=[{key:"dataArray",value:function(){return this.subArray(0,this.length)}},{key:"clear",value:function(){this.length=0}},{key:"rescale",value:function(){var h;this.length<this.data.length/2&&(h=1<<Math.ceil(Math.log2(this.length)),(h=new Float32Array(h)).set(this.data.subarray(0,this.length),0),this.data=h)}},{key:"reset",value:function(){this.clear(),this.data=new Float32Array(this.initialLength)}},{key:"push",value:function(){for(var h=arguments.length,p=new Array(h),c=0;c<h;c++)p[c]=arguments[c];this.ensureLength(this.length+p.length),this.data.set(p,this.length),this.length+=p.length}},{key:"slice",value:function(h,p){return this.data.slice(h,Math.min(p,this.length))}},{key:"subArray",value:function(h,p){return this.data.subarray(h,Math.min(p,this.length))}},{key:"ensureLength",value:function(h){for(;this.data.length<h;){var p=new Float32Array(2*this.data.length);p.set(this.data,0),this.data=p}}}])&&s(l.prototype,u),a}(),r=r.default.DataArray,o.default=r},{"../core/main":280,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.slice":168,"core-js/modules/es.math.log2":176,"core-js/modules/es.object.to-string":187,"core-js/modules/es.typed-array.copy-within":210,"core-js/modules/es.typed-array.every":211,"core-js/modules/es.typed-array.fill":212,"core-js/modules/es.typed-array.filter":213,"core-js/modules/es.typed-array.find":215,"core-js/modules/es.typed-array.find-index":214,"core-js/modules/es.typed-array.float32-array":216,"core-js/modules/es.typed-array.for-each":218,"core-js/modules/es.typed-array.includes":219,"core-js/modules/es.typed-array.index-of":220,"core-js/modules/es.typed-array.iterator":223,"core-js/modules/es.typed-array.join":224,"core-js/modules/es.typed-array.last-index-of":225,"core-js/modules/es.typed-array.map":226,"core-js/modules/es.typed-array.reduce":228,"core-js/modules/es.typed-array.reduce-right":227,"core-js/modules/es.typed-array.reverse":229,"core-js/modules/es.typed-array.set":230,"core-js/modules/es.typed-array.slice":231,"core-js/modules/es.typed-array.some":232,"core-js/modules/es.typed-array.sort":233,"core-js/modules/es.typed-array.subarray":234,"core-js/modules/es.typed-array.to-locale-string":235,"core-js/modules/es.typed-array.to-string":236}],331:[function(I,i,o){function s(D){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(j){return typeof j}:function(j){return j&&typeof Symbol=="function"&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":typeof j})(D)}function a(D){return(a=typeof Symbol=="function"&&s(Symbol.iterator)==="symbol"?function(j){return s(j)}:function(j){return j&&typeof Symbol=="function"&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":s(j)})(D)}I("core-js/modules/es.symbol"),I("core-js/modules/es.symbol.description"),I("core-js/modules/es.symbol.iterator"),I("core-js/modules/es.array.fill"),I("core-js/modules/es.array.includes"),I("core-js/modules/es.array.iterator"),I("core-js/modules/es.object.get-own-property-descriptor"),I("core-js/modules/es.object.get-prototype-of"),I("core-js/modules/es.object.to-string"),I("core-js/modules/es.reflect.construct"),I("core-js/modules/es.reflect.get"),I("core-js/modules/es.regexp.to-string"),I("core-js/modules/es.string.includes"),I("core-js/modules/es.string.iterator"),I("core-js/modules/es.typed-array.float32-array"),I("core-js/modules/es.typed-array.uint8-array"),I("core-js/modules/es.typed-array.uint8-clamped-array"),I("core-js/modules/es.typed-array.copy-within"),I("core-js/modules/es.typed-array.every"),I("core-js/modules/es.typed-array.fill"),I("core-js/modules/es.typed-array.filter"),I("core-js/modules/es.typed-array.find"),I("core-js/modules/es.typed-array.find-index"),I("core-js/modules/es.typed-array.for-each"),I("core-js/modules/es.typed-array.includes"),I("core-js/modules/es.typed-array.index-of"),I("core-js/modules/es.typed-array.iterator"),I("core-js/modules/es.typed-array.join"),I("core-js/modules/es.typed-array.last-index-of"),I("core-js/modules/es.typed-array.map"),I("core-js/modules/es.typed-array.reduce"),I("core-js/modules/es.typed-array.reduce-right"),I("core-js/modules/es.typed-array.reverse"),I("core-js/modules/es.typed-array.set"),I("core-js/modules/es.typed-array.slice"),I("core-js/modules/es.typed-array.some"),I("core-js/modules/es.typed-array.sort"),I("core-js/modules/es.typed-array.subarray"),I("core-js/modules/es.typed-array.to-locale-string"),I("core-js/modules/es.typed-array.to-string"),I("core-js/modules/es.weak-map"),I("core-js/modules/web.dom-collections.iterator"),I("core-js/modules/es.array.fill"),I("core-js/modules/es.array.includes"),I("core-js/modules/es.array.iterator"),I("core-js/modules/es.object.get-prototype-of"),I("core-js/modules/es.object.to-string"),I("core-js/modules/es.string.includes"),I("core-js/modules/es.typed-array.float32-array"),I("core-js/modules/es.typed-array.uint8-array"),I("core-js/modules/es.typed-array.uint8-clamped-array"),I("core-js/modules/es.typed-array.copy-within"),I("core-js/modules/es.typed-array.every"),I("core-js/modules/es.typed-array.fill"),I("core-js/modules/es.typed-array.filter"),I("core-js/modules/es.typed-array.find"),I("core-js/modules/es.typed-array.find-index"),I("core-js/modules/es.typed-array.for-each"),I("core-js/modules/es.typed-array.includes"),I("core-js/modules/es.typed-array.index-of"),I("core-js/modules/es.typed-array.iterator"),I("core-js/modules/es.typed-array.join"),I("core-js/modules/es.typed-array.last-index-of"),I("core-js/modules/es.typed-array.map"),I("core-js/modules/es.typed-array.reduce"),I("core-js/modules/es.typed-array.reduce-right"),I("core-js/modules/es.typed-array.reverse"),I("core-js/modules/es.typed-array.set"),I("core-js/modules/es.typed-array.slice"),I("core-js/modules/es.typed-array.some"),I("core-js/modules/es.typed-array.sort"),I("core-js/modules/es.typed-array.subarray"),I("core-js/modules/es.typed-array.to-locale-string"),I("core-js/modules/es.typed-array.to-string"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var l=(P=I("../core/main"))&&P.__esModule?P:{default:P},u=function(D){if(D&&D.__esModule)return D;if(D===null||a(D)!=="object"&&typeof D!="function")return{default:D};var j=c();if(j&&j.has(D))return j.get(D);var N,O={},W=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(N in D){var X;Object.prototype.hasOwnProperty.call(D,N)&&((X=W?Object.getOwnPropertyDescriptor(D,N):null)&&(X.get||X.set)?Object.defineProperty(O,N,X):O[N]=D[N])}return O.default=D,j&&j.set(D,O),O}(I("../core/constants")),h=I("./p5.Texture"),p=I("./p5.RendererGL");function c(){var D;return typeof WeakMap!="function"?null:(D=new WeakMap,c=function(){return D},D)}function f(D,j){return function(N){if(Array.isArray(N))return N}(D)||function(N,O){if(Symbol.iterator in Object(N)||Object.prototype.toString.call(N)==="[object Arguments]"){var W=[],X=!0,J=!1,ee=void 0;try{for(var V,q=N[Symbol.iterator]();!(X=(V=q.next()).done)&&(W.push(V.value),!O||W.length!==O);X=!0);}catch(Y){J=!0,ee=Y}finally{try{X||q.return==null||q.return()}finally{if(J)throw ee}}return W}}(D,j)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function m(D,j,N){return j in D?Object.defineProperty(D,j,{value:N,enumerable:!0,configurable:!0,writable:!0}):D[j]=N,D}function y(D,j){if(!(D instanceof j))throw new TypeError("Cannot call a class as a function")}function v(D,j){for(var N=0;N<j.length;N++){var O=j[N];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(D,O.key,O)}}function g(D,j,N){j&&v(D.prototype,j)}function x(D,j,N){return(x=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(J,W,X){var J=function(ee,V){for(;!Object.prototype.hasOwnProperty.call(ee,V)&&(ee=T(ee))!==null;);return ee}(J,W);if(J)return(J=Object.getOwnPropertyDescriptor(J,W)).get?J.get.call(X):J.value})(D,j,N||D)}function b(D,j){return(b=Object.setPrototypeOf||function(N,O){return N.__proto__=O,N})(D,j)}function w(D){return function(){var j,N=T(D),N=(j=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(j=T(this).constructor,Reflect.construct(N,arguments,j)):N.apply(this,arguments),this);if(!j||a(j)!=="object"&&typeof j!="function"){if(N!==void 0)return N;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return j}}function T(D){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(j){return j.__proto__||Object.getPrototypeOf(j)})(D)}var R=function(D){var j=O;if(typeof D!="function"&&D!==null)throw new TypeError("Super expression must either be null or a function");j.prototype=Object.create(D&&D.prototype,{constructor:{value:j,writable:!0,configurable:!0}}),D&&b(j,D);var N=w(O);function O(W){var X;return y(this,O),(X=N.call(this,W.target._renderer)).fbo=W,X.yScale=-1,X}return g(O,[{key:"_computeCameraDefaultSettings",value:function(){x(T(O.prototype),"_computeCameraDefaultSettings",this).call(this),this.defaultAspectRatio=this.fbo.width/this.fbo.height,this.defaultCameraFOV=2*Math.atan(this.fbo.height/2/this.defaultEyeZ)}}]),O}(l.default.Camera),C=(l.default.FramebufferCamera=R,function(){function D(j,N){y(this,D),this.framebuffer=j,this.property=N}return g(D,[{key:"rawTexture",value:function(){return this.framebuffer[this.property]}},{key:"width",get:function(){return this.framebuffer.width*this.framebuffer.density}},{key:"height",get:function(){return this.framebuffer.height*this.framebuffer.density}}]),D}()),P=(l.default.FramebufferTexture=C,function(){function D(j){var N=this,O=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},W=(y(this,D),this.target=j,this.target._renderer.framebuffers.add(this),this._isClipApplied=!1,this.pixels=[],this.format=O.format||u.UNSIGNED_BYTE,this.channels=O.channels||(j._renderer._pInst._glAttributes.alpha?u.RGBA:u.RGB),this.useDepth=O.depth===void 0||O.depth,this.depthFormat=O.depthFormat||u.FLOAT,this.textureFiltering=O.textureFiltering||u.LINEAR,O.antialias===void 0?this.antialiasSamples=j._renderer._pInst._glAttributes.antialias?2:0:typeof O.antialias=="number"?this.antialiasSamples=O.antialias:this.antialiasSamples=O.antialias?2:0,this.antialias=0<this.antialiasSamples,this.antialias&&j.webglVersion!==u.WEBGL2&&(console.warn("Antialiasing is unsupported in a WebGL 1 context"),this.antialias=!1),this.density=O.density||j.pixelDensity(),j._renderer.GL);if(this.gl=W,O.width&&O.height?(X=j._renderer._adjustDimensions(O.width,O.height),this.width=X.adjustedWidth,this.height=X.adjustedHeight,this._autoSized=!1):(O.width===void 0!=(O.height===void 0)&&console.warn("Please supply both width and height for a framebuffer to give it a size. Only one was given, so the framebuffer will match the size of its canvas."),this.width=j.width,this.height=j.height,this._autoSized=!0),this._checkIfFormatsAvailable(),O.stencil&&!this.useDepth&&console.warn("A stencil buffer can only be used if also using depth. Since the framebuffer has no depth buffer, the stencil buffer will be ignored."),this.useStencil=this.useDepth&&(O.stencil===void 0||O.stencil),this.framebuffer=W.createFramebuffer(),!this.framebuffer)throw new Error("Unable to create a framebuffer");if(this.antialias&&(this.aaFramebuffer=W.createFramebuffer(),!this.aaFramebuffer))throw new Error("Unable to create a framebuffer for antialiasing");this._recreateTextures();var X=this.target._renderer._curCamera;this.defaultCamera=this.createCamera(),this.filterCamera=this.createCamera(),this.target._renderer._curCamera=X,this.draw(function(){return N.target.clear()})}return g(D,[{key:"resize",value:function(j,N){this._autoSized=!1;var O=this.target._renderer._adjustDimensions(j,N);j=O.adjustedWidth,N=O.adjustedHeight,this.width=j,this.height=N,this._handleResize()}},{key:"pixelDensity",value:function(j){if(!j)return this.density;this._autoSized=!1,this.density=j,this._handleResize()}},{key:"autoSized",value:function(j){if(j===void 0)return this._autoSized;this._autoSized=j,this._handleResize()}},{key:"_checkIfFormatsAvailable",value:function(){var j=this.gl,j=(this.useDepth&&this.target.webglVersion===u.WEBGL&&!j.getExtension("WEBGL_depth_texture")&&(console.warn("Unable to create depth textures in this environment. Falling back to a framebuffer without depth."),this.useDepth=!1),this.useDepth&&this.target.webglVersion===u.WEBGL&&this.depthFormat===u.FLOAT&&(console.warn("FLOAT depth format is unavailable in WebGL 1. Defaulting to UNSIGNED_INT."),this.depthFormat=u.UNSIGNED_INT),[u.UNSIGNED_BYTE,u.FLOAT,u.HALF_FLOAT].includes(this.format)||(console.warn("Unknown Framebuffer format. Please use UNSIGNED_BYTE, FLOAT, or HALF_FLOAT. Defaulting to UNSIGNED_BYTE."),this.format=u.UNSIGNED_BYTE),this.useDepth&&![u.UNSIGNED_INT,u.FLOAT].includes(this.depthFormat)&&(console.warn("Unknown Framebuffer depth format. Please use UNSIGNED_INT or FLOAT. Defaulting to FLOAT."),this.depthFormat=u.FLOAT),(0,h.checkWebGLCapabilities)(this.target._renderer));j.float||this.format!==u.FLOAT||(console.warn("This environment does not support FLOAT textures. Falling back to UNSIGNED_BYTE."),this.format=u.UNSIGNED_BYTE),this.useDepth&&!j.float&&this.depthFormat===u.FLOAT&&(console.warn("This environment does not support FLOAT depth textures. Falling back to UNSIGNED_INT."),this.depthFormat=u.UNSIGNED_INT),j.halfFloat||this.format!==u.HALF_FLOAT||(console.warn("This environment does not support HALF_FLOAT textures. Falling back to UNSIGNED_BYTE."),this.format=u.UNSIGNED_BYTE),this.channels===u.RGB&&[u.FLOAT,u.HALF_FLOAT].includes(this.format)&&(console.warn("FLOAT and HALF_FLOAT formats do not work cross-platform with only RGB channels. Falling back to RGBA."),this.channels=u.RGBA)}},{key:"_recreateTextures",value:function(){var j=this.gl,N=(this._updateSize(),j.getParameter(j.TEXTURE_BINDING_2D)),O=j.getParameter(j.FRAMEBUFFER_BINDING),W=j.createTexture();if(!W)throw new Error("Unable to create color texture");j.bindTexture(j.TEXTURE_2D,W);var X=this._glColorFormat();if(j.texImage2D(j.TEXTURE_2D,0,X.internalFormat,this.width*this.density,this.height*this.density,0,X.format,X.type,null),this.colorTexture=W,j.bindFramebuffer(j.FRAMEBUFFER,this.framebuffer),j.framebufferTexture2D(j.FRAMEBUFFER,j.COLOR_ATTACHMENT0,j.TEXTURE_2D,W,0),this.useDepth){var W=j.createTexture();if(!W)throw new Error("Unable to create depth texture");var J=this._glDepthFormat();j.bindTexture(j.TEXTURE_2D,W),j.texImage2D(j.TEXTURE_2D,0,J.internalFormat,this.width*this.density,this.height*this.density,0,J.format,J.type,null),j.framebufferTexture2D(j.FRAMEBUFFER,this.useStencil?j.DEPTH_STENCIL_ATTACHMENT:j.DEPTH_ATTACHMENT,j.TEXTURE_2D,W,0),this.depthTexture=W}this.antialias&&(this.colorRenderbuffer=j.createRenderbuffer(),j.bindRenderbuffer(j.RENDERBUFFER,this.colorRenderbuffer),j.renderbufferStorageMultisample(j.RENDERBUFFER,Math.max(0,Math.min(this.antialiasSamples,j.getParameter(j.MAX_SAMPLES))),X.internalFormat,this.width*this.density,this.height*this.density),this.useDepth&&(J=this._glDepthFormat(),this.depthRenderbuffer=j.createRenderbuffer(),j.bindRenderbuffer(j.RENDERBUFFER,this.depthRenderbuffer),j.renderbufferStorageMultisample(j.RENDERBUFFER,Math.max(0,Math.min(this.antialiasSamples,j.getParameter(j.MAX_SAMPLES))),J.internalFormat,this.width*this.density,this.height*this.density)),j.bindFramebuffer(j.FRAMEBUFFER,this.aaFramebuffer),j.framebufferRenderbuffer(j.FRAMEBUFFER,j.COLOR_ATTACHMENT0,j.RENDERBUFFER,this.colorRenderbuffer),this.useDepth&&j.framebufferRenderbuffer(j.FRAMEBUFFER,this.useStencil?j.DEPTH_STENCIL_ATTACHMENT:j.DEPTH_ATTACHMENT,j.RENDERBUFFER,this.depthRenderbuffer)),this.useDepth&&(this.depth=new C(this,"depthTexture"),W=j.NEAREST,this.depthP5Texture=new l.default.Texture(this.target._renderer,this.depth,{minFilter:W,magFilter:W}),this.target._renderer.textures.set(this.depth,this.depthP5Texture)),this.color=new C(this,"colorTexture"),X=this.textureFiltering===u.LINEAR?j.LINEAR:j.NEAREST,this.colorP5Texture=new l.default.Texture(this.target._renderer,this.color,{minFilter:X,magFilter:X}),this.target._renderer.textures.set(this.color,this.colorP5Texture),j.bindTexture(j.TEXTURE_2D,N),j.bindFramebuffer(j.FRAMEBUFFER,O)}},{key:"_glColorFormat",value:function(){var j,N,O=this.gl,W=this.format===u.FLOAT?O.FLOAT:this.format===u.HALF_FLOAT?this.target.webglVersion===u.WEBGL2?O.HALF_FLOAT:O.getExtension("OES_texture_half_float").HALF_FLOAT_OES:O.UNSIGNED_BYTE,X=this.channels===u.RGBA?O.RGBA:O.RGB;return{internalFormat:this.target.webglVersion===u.WEBGL2?(m(N={},O.FLOAT,m({},O.RGBA,O.RGBA32F)),m(N,O.HALF_FLOAT,m({},O.RGBA,O.RGBA16F)),m(N,O.UNSIGNED_BYTE,(m(j={},O.RGBA,O.RGBA8),m(j,O.RGB,O.RGB8),j)),N[W][X]):this.format===u.HALF_FLOAT?O.RGBA:X,format:X,type:W}}},{key:"_glDepthFormat",value:function(){var O=this.gl,j=this.useStencil?this.depthFormat===u.FLOAT?O.FLOAT_32_UNSIGNED_INT_24_8_REV:this.target.webglVersion===u.WEBGL2?O.UNSIGNED_INT_24_8:O.getExtension("WEBGL_depth_texture").UNSIGNED_INT_24_8_WEBGL:this.depthFormat===u.FLOAT?O.FLOAT:O.UNSIGNED_INT,N=this.useStencil?O.DEPTH_STENCIL:O.DEPTH_COMPONENT,O=this.useStencil?this.depthFormat===u.FLOAT?O.DEPTH32F_STENCIL8:this.target.webglVersion===u.WEBGL2?O.DEPTH24_STENCIL8:O.DEPTH_STENCIL:this.target.webglVersion===u.WEBGL2?this.depthFormat===u.FLOAT?O.DEPTH_COMPONENT32F:O.DEPTH_COMPONENT24:O.DEPTH_COMPONENT;return{internalFormat:O,format:N,type:j}}},{key:"_updateSize",value:function(){this._autoSized&&(this.width=this.target.width,this.height=this.target.height,this.density=this.target.pixelDensity())}},{key:"_canvasSizeChanged",value:function(){this._autoSized&&this._handleResize()}},{key:"_handleResize",value:function(){var W=this.color,j=this.depth,N=this.colorRenderbuffer,O=this.depthRenderbuffer,W=(this._deleteTexture(W),j&&this._deleteTexture(j),this.gl);N&&W.deleteRenderbuffer(N),O&&W.deleteRenderbuffer(O),this._recreateTextures(),this.defaultCamera._resize()}},{key:"createCamera",value:function(){var j=new R(this);return j._computeCameraDefaultSettings(),j._setDefaultCamera(),this.target._renderer._curCamera=j}},{key:"_deleteTexture",value:function(j){this.gl.deleteTexture(j.rawTexture()),this.target._renderer.textures.delete(j)}},{key:"remove",value:function(){var j=this.gl;this._deleteTexture(this.color),this.depth&&this._deleteTexture(this.depth),j.deleteFramebuffer(this.framebuffer),this.aaFramebuffer&&j.deleteFramebuffer(this.aaFramebuffer),this.depthRenderbuffer&&j.deleteRenderbuffer(this.depthRenderbuffer),this.colorRenderbuffer&&j.deleteRenderbuffer(this.colorRenderbuffer),this.target._renderer.framebuffers.delete(this)}},{key:"begin",value:function(){this.prevFramebuffer=this.target._renderer.activeFramebuffer(),this.prevFramebuffer&&this.prevFramebuffer._beforeEnd(),this.target._renderer.activeFramebuffers.push(this),this._beforeBegin(),this.target.push(),this.target.setCamera(this.defaultCamera),this.target._renderer.uMVMatrix.set(this.target._renderer._curCamera.cameraMatrix),this.target._renderer._applyStencilTestIfClipping()}},{key:"_framebufferToBind",value:function(){return this.antialias?this.aaFramebuffer:this.framebuffer}},{key:"_beforeBegin",value:function(){var j=this.gl;j.bindFramebuffer(j.FRAMEBUFFER,this._framebufferToBind()),this.target._renderer.viewport(this.width*this.density,this.height*this.density)}},{key:"_beforeEnd",value:function(){if(this.antialias){var j=this.gl,N=(j.bindFramebuffer(j.READ_FRAMEBUFFER,this.aaFramebuffer),j.bindFramebuffer(j.DRAW_FRAMEBUFFER,this.framebuffer),[[j.COLOR_BUFFER_BIT,this.colorP5Texture.glMagFilter]]);this.useDepth&&N.push([j.DEPTH_BUFFER_BIT,this.depthP5Texture.glMagFilter]);for(var O=0,W=N;O<W.length;O++){var J=f(W[O],2),X=J[0],J=J[1];j.blitFramebuffer(0,0,this.width*this.density,this.height*this.density,0,0,this.width*this.density,this.height*this.density,X,J)}}}},{key:"end",value:function(){var j=this.gl;if(this.target.pop(),this.target._renderer.activeFramebuffers.pop()!==this)throw new Error("It looks like you've called end() while another Framebuffer is active.");this._beforeEnd(),this.prevFramebuffer?this.prevFramebuffer._beforeBegin():(j.bindFramebuffer(j.FRAMEBUFFER,null),this.target._renderer.viewport(this.target._renderer._origViewport.width,this.target._renderer._origViewport.height)),this.target._renderer._applyStencilTestIfClipping()}},{key:"draw",value:function(j){this.begin(),j(),this.end()}},{key:"loadPixels",value:function(){var j=this.gl,N=this.target._renderer.activeFramebuffer(),O=(j.bindFramebuffer(j.FRAMEBUFFER,this.framebuffer),this._glColorFormat());this.pixels=(0,p.readPixelsWebGL)(this.pixels,j,this.framebuffer,0,0,this.width*this.density,this.height*this.density,O.format,O.type),N?j.bindFramebuffer(j.FRAMEBUFFER,N._framebufferToBind()):j.bindFramebuffer(j.FRAMEBUFFER,null)}},{key:"get",value:function(j,N,O,W){l.default._validateParameters("p5.Framebuffer.get",arguments);var X=this._glColorFormat();if(j===void 0&&N===void 0)N=j=0,O=this.width,W=this.height;else if(O===void 0&&W===void 0)return(j<0||N<0||j>=this.width||N>=this.height)&&(console.warn("The x and y values passed to p5.Framebuffer.get are outside of its range and will be clamped."),j=this.target.constrain(j,0,this.width-1),N=this.target.constrain(N,0,this.height-1)),(0,p.readPixelWebGL)(this.gl,this.framebuffer,j*this.density,N*this.density,X.format,X.type);j=this.target.constrain(j,0,this.width-1),N=this.target.constrain(N,0,this.height-1),O=this.target.constrain(O,1,this.width-j),W=this.target.constrain(W,1,this.height-N);for(var J=(0,p.readPixelsWebGL)(void 0,this.gl,this.framebuffer,j*this.density,N*this.density,O*this.density,W*this.density,X.format,X.type),ee=new Uint8ClampedArray(O*W*this.density*this.density*4),V=(ee.fill(255),X.type===this.gl.RGB?3:4),q=0;q<W*this.density;q++)for(var Y=0;Y<O*this.density;Y++)for(var Z=0;Z<4;Z++){var ce,B=4*(q*O*this.density+Y)+Z;Z<V&&(ce=V==4?B:(q*O*this.density+Y)*V+Z,ee[B]=J[ce])}return j=new l.default.Image(O*this.density,W*this.density),j.imageData=j.canvas.getContext("2d").createImageData(j.width,j.height),j.imageData.data.set(ee),j.pixels=j.imageData.data,j.updatePixels(),this.density!==1&&j.resize(O,W),j}},{key:"updatePixels",value:function(){var j=this.gl,N=(this.colorP5Texture.bindTexture(),this._glColorFormat()),O=N.format===j.RGBA?4:3,O=this.width*this.height*this.density*this.density*O,W=N.type===j.UNSIGNED_BYTE?Uint8Array:Float32Array;if(!(this.pixels instanceof W)||this.pixels.length!==O)throw new Error("The pixels array has not been set correctly. Please call loadPixels() before updatePixels().");j.texImage2D(j.TEXTURE_2D,0,N.internalFormat,this.width*this.density,this.height*this.density,0,N.format,N.type,this.pixels),this.colorP5Texture.unbindTexture(),W=this.target._renderer.activeFramebuffer(),this.antialias?(this.begin(),this.target.push(),this.target.imageMode(this.target.CENTER),this.target.resetMatrix(),this.target.noStroke(),this.target.clear(),this.target.image(this,0,0),this.target.pop(),this.useDepth&&(j.clearDepth(1),j.clear(j.DEPTH_BUFFER_BIT)),this.end()):(j.bindFramebuffer(j.FRAMEBUFFER,this.framebuffer),this.useDepth&&(j.clearDepth(1),j.clear(j.DEPTH_BUFFER_BIT)),W?j.bindFramebuffer(j.FRAMEBUFFER,W._framebufferToBind()):j.bindFramebuffer(j.FRAMEBUFFER,null))}}]),D}()),I=l.default.Framebuffer=P;o.default=I},{"../core/constants":269,"../core/main":280,"./p5.RendererGL":337,"./p5.Texture":339,"core-js/modules/es.array.fill":155,"core-js/modules/es.array.includes":162,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.get-prototype-of":185,"core-js/modules/es.object.to-string":187,"core-js/modules/es.reflect.construct":189,"core-js/modules/es.reflect.get":190,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.includes":196,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.typed-array.copy-within":210,"core-js/modules/es.typed-array.every":211,"core-js/modules/es.typed-array.fill":212,"core-js/modules/es.typed-array.filter":213,"core-js/modules/es.typed-array.find":215,"core-js/modules/es.typed-array.find-index":214,"core-js/modules/es.typed-array.float32-array":216,"core-js/modules/es.typed-array.for-each":218,"core-js/modules/es.typed-array.includes":219,"core-js/modules/es.typed-array.index-of":220,"core-js/modules/es.typed-array.iterator":223,"core-js/modules/es.typed-array.join":224,"core-js/modules/es.typed-array.last-index-of":225,"core-js/modules/es.typed-array.map":226,"core-js/modules/es.typed-array.reduce":228,"core-js/modules/es.typed-array.reduce-right":227,"core-js/modules/es.typed-array.reverse":229,"core-js/modules/es.typed-array.set":230,"core-js/modules/es.typed-array.slice":231,"core-js/modules/es.typed-array.some":232,"core-js/modules/es.typed-array.sort":233,"core-js/modules/es.typed-array.subarray":234,"core-js/modules/es.typed-array.to-locale-string":235,"core-js/modules/es.typed-array.to-string":236,"core-js/modules/es.typed-array.uint8-array":239,"core-js/modules/es.typed-array.uint8-clamped-array":240,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],332:[function(r,i,o){function s(m){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y})(m)}function a(m){return(a=typeof Symbol=="function"&&s(Symbol.iterator)==="symbol"?function(y){return s(y)}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":s(y)})(m)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.flat"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.unscopables.flat"),r("core-js/modules/es.map"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.set"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.sub"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.flat"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.unscopables.flat"),r("core-js/modules/es.map"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.set"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.sub"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var l=(f=r("../core/main"))&&f.__esModule?f:{default:f},u=function(m){if(m&&m.__esModule)return m;if(m===null||a(m)!=="object"&&typeof m!="function")return{default:m};var y=h();if(y&&y.has(m))return y.get(m);var v,g={},x=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(v in m){var b;Object.prototype.hasOwnProperty.call(m,v)&&((b=x?Object.getOwnPropertyDescriptor(m,v):null)&&(b.get||b.set)?Object.defineProperty(g,v,b):g[v]=m[v])}return g.default=m,y&&y.set(m,g),g}(r("../core/constants"));function h(){var m;return typeof WeakMap!="function"?null:(m=new WeakMap,h=function(){return m},m)}function p(m){return function(y){if(Array.isArray(y)){for(var v=0,g=new Array(y.length);v<y.length;v++)g[v]=y[v];return g}}(m)||function(y){if(Symbol.iterator in Object(y)||Object.prototype.toString.call(y)==="[object Arguments]")return Array.from(y)}(m)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function c(m,y){for(var v=0;v<y.length;v++){var g=y[v];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(m,g.key,g)}}l.default.Geometry=function(){function m(g,x,b){if(!(this instanceof m))throw new TypeError("Cannot call a class as a function");this.vertices=[],this.boundingBoxCache=null,this.lineVertices=new l.default.DataArray,this.lineTangentsIn=new l.default.DataArray,this.lineTangentsOut=new l.default.DataArray,this.lineSides=new l.default.DataArray,this.vertexNormals=[],this.faces=[],this.uvs=[],this.edges=[],this.vertexColors=[],this.vertexStrokeColors=[],this.lineVertexColors=new l.default.DataArray,this.detailX=g!==void 0?g:1,this.detailY=x!==void 0?x:1,this.dirtyFlags={},this._hasFillTransparency=void 0,this._hasStrokeTransparency=void 0,b instanceof Function&&b.call(this)}var y,v;return y=m,(v=[{key:"calculateBoundingBox",value:function(){if(!this.boundingBoxCache){for(var g=new l.default.Vector(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),x=new l.default.Vector(Number.MIN_VALUE,Number.MIN_VALUE,Number.MIN_VALUE),b=0;b<this.vertices.length;b++){var w=this.vertices[b];g.x=Math.min(g.x,w.x),g.y=Math.min(g.y,w.y),g.z=Math.min(g.z,w.z),x.x=Math.max(x.x,w.x),x.y=Math.max(x.y,w.y),x.z=Math.max(x.z,w.z)}var T=new l.default.Vector(x.x-g.x,x.y-g.y,x.z-g.z),R=new l.default.Vector((g.x+x.x)/2,(g.y+x.y)/2,(g.z+x.z)/2);this.boundingBoxCache={min:g,max:x,size:T,offset:R}}return this.boundingBoxCache}},{key:"reset",value:function(){this._hasFillTransparency=void 0,this._hasStrokeTransparency=void 0,this.lineVertices.clear(),this.lineTangentsIn.clear(),this.lineTangentsOut.clear(),this.lineSides.clear(),this.vertices.length=0,this.edges.length=0,this.vertexColors.length=0,this.vertexStrokeColors.length=0,this.lineVertexColors.clear(),this.vertexNormals.length=0,this.uvs.length=0,this.dirtyFlags={}}},{key:"hasFillTransparency",value:function(){if(this._hasFillTransparency===void 0){this._hasFillTransparency=!1;for(var g=0;g<this.vertexColors.length;g+=4)if(this.vertexColors[g+3]<1){this._hasFillTransparency=!0;break}}return this._hasFillTransparency}},{key:"hasStrokeTransparency",value:function(){if(this._hasStrokeTransparency===void 0){this._hasStrokeTransparency=!1;for(var g=0;g<this.lineVertexColors.length;g+=4)if(this.lineVertexColors[g+3]<1){this._hasStrokeTransparency=!0;break}}return this._hasStrokeTransparency}},{key:"clearColors",value:function(){return this.vertexColors=[],this}},{key:"flipU",value:function(){this.uvs=this.uvs.flat().map(function(g,x){return x%2==0?1-g:g})}},{key:"flipV",value:function(){this.uvs=this.uvs.flat().map(function(g,x){return x%2==0?g:1-g})}},{key:"computeFaces",value:function(){this.faces.length=0;for(var g,x,b,w=this.detailX+1,T=0;T<this.detailY;T++)for(var R=0;R<this.detailX;R++)x=(T+1)*w+R+1,this.faces.push([T*w+R,g=T*w+R+1,b=(T+1)*w+R]),this.faces.push([b,g,x]);return this}},{key:"_getFaceNormal",value:function(x){var x=this.faces[x],b=this.vertices[x[0]],T=this.vertices[x[1]],x=this.vertices[x[2]],T=l.default.Vector.sub(T,b),x=l.default.Vector.sub(x,b),b=l.default.Vector.cross(T,x),w=l.default.Vector.mag(b),T=w/(l.default.Vector.mag(T)*l.default.Vector.mag(x));return T===0||isNaN(T)?(console.warn("p5.Geometry.prototype._getFaceNormal:","face has colinear sides or a repeated vertex"),b):(1<T&&(T=1),b.mult(Math.asin(T)/w))}},{key:"computeNormals",value:function(){var g,x=this,b=0<arguments.length&&arguments[0]!==void 0?arguments[0]:u.FLAT,w=(1<arguments.length&&arguments[1]!==void 0?arguments[1]:{}).roundToPrecision,T=this.vertexNormals,R=this.vertices,C=this.faces;if(b===u.SMOOTH){for(var P={},I=[],D=Math.pow(10,w===void 0?3:w),j=function(J){return Math.round(J*D)/D},N=function(J){return"".concat(j(J.x),",").concat(j(J.y),",").concat(j(J.z))},O=0;O<R.length;O++){var W=R[O],X=N(W);P[X]===void 0&&(P[X]=I.length,I.push(W))}C.forEach(function(J){for(var ee=0;ee<3;++ee){var V=J[ee],V=R[V],V=N(V);J[ee]=P[V]}}),this.edges.forEach(function(J){for(var ee=0;ee<2;++ee){var V=J[ee],V=R[V],V=N(V);J[ee]=P[V]}}),this.vertices=R=I}for(g=T.length=0;g<R.length;++g)T.push(new l.default.Vector);for(C.forEach(function(J,ee){for(var V=x._getFaceNormal(ee),q=0;q<3;++q){var Y=J[q];T[Y].add(V)}}),g=0;g<R.length;++g)T[g].normalize();return this}},{key:"averageNormals",value:function(){for(var g=0;g<=this.detailY;g++){var x=this.detailX+1,b=l.default.Vector.add(this.vertexNormals[g*x],this.vertexNormals[g*x+this.detailX]),b=l.default.Vector.div(b,2);this.vertexNormals[g*x]=b,this.vertexNormals[g*x+this.detailX]=b}return this}},{key:"averagePoleNormals",value:function(){for(var g=new l.default.Vector(0,0,0),x=0;x<this.detailX;x++)g.add(this.vertexNormals[x]);for(var g=l.default.Vector.div(g,this.detailX),b=0;b<this.detailX;b++)this.vertexNormals[b]=g;g=new l.default.Vector(0,0,0);for(var w=this.vertices.length-1;w>this.vertices.length-1-this.detailX;w--)g.add(this.vertexNormals[w]);g=l.default.Vector.div(g,this.detailX);for(var T=this.vertices.length-1;T>this.vertices.length-1-this.detailX;T--)this.vertexNormals[T]=g;return this}},{key:"_makeTriangleEdges",value:function(){for(var g=this.edges.length=0;g<this.faces.length;g++)this.edges.push([this.faces[g][0],this.faces[g][1]]),this.edges.push([this.faces[g][1],this.faces[g][2]]),this.edges.push([this.faces[g][2],this.faces[g][0]]);return this}},{key:"_edgesToVertices",value:function(){this.lineVertices.clear(),this.lineTangentsIn.clear(),this.lineTangentsOut.clear(),this.lineSides.clear();for(var g,x=new Map,b=new Set,w=0;w<this.edges.length;w++){var T,R=this.edges[w-1],C=this.edges[w],P=this.vertices[C[0]],I=this.vertices[C[1]],D=0<this.vertexStrokeColors.length?this.vertexStrokeColors.slice(4*C[0],4*(C[0]+1)):[0,0,0,0],j=0<this.vertexStrokeColors.length?this.vertexStrokeColors.slice(4*C[1],4*(C[1]+1)):[0,0,0,0],N=I.copy().sub(P).normalize(),O=0<N.magSq();O&&this._addSegment(P,I,D,j,N),0<w&&R[1]===C[0]?b.has(C[0])||(b.add(C[0]),x.delete(C[0]),g&&O&&N.dot(g)<1-1e-8&&this._addJoin(P,g,N,D)):(O&&!b.has(C[0])&&((T=x.get(C[0]))?(this._addJoin(P,T.dir,N,D),x.delete(C[0]),b.add(C[0])):x.set(C[0],{point:P,dir:N.copy().mult(-1),color:D})),g&&!b.has(R[1])&&((T=x.get(R[1]))?(this._addJoin(this.vertices[R[1]],g,T.dir.copy().mult(-1),D),x.delete(R[1]),b.add(R[1])):x.set(R[1],{point:this.vertices[R[1]],dir:g,color:D}),g=void 0)),w!==this.edges.length-1||b.has(C[1])||((P=x.get(C[1]))?(this._addJoin(I,N,P.dir.copy().mult(-1),j),x.delete(C[1]),b.add(C[1])):x.set(C[1],{point:I,dir:N,color:j})),O&&(g=N)}var W=!0,X=!1,J=void 0;try{for(var ee,V=x.values()[Symbol.iterator]();!(W=(ee=V.next()).done);W=!0){var q=ee.value,Y=q.point,Z=q.dir,ce=q.color;this._addCap(Y,Z,ce)}}catch(B){X=!0,J=B}finally{try{W||V.return==null||V.return()}finally{if(X)throw J}}return this}},{key:"_addSegment",value:function(R,C,b,w,T){var R=R.array(),C=C.array(),P=T.array();this.lineSides.push(1,1,-1,1,-1,-1);for(var I=0,D=[this.lineTangentsIn,this.lineTangentsOut];I<D.length;I++)for(var j=D[I],N=0;N<6;N++)j.push.apply(j,p(P));return(T=this.lineVertices).push.apply(T,p(R).concat(p(C),p(R),p(C),p(C),p(R))),(T=this.lineVertexColors).push.apply(T,p(b).concat(p(w),p(b),p(w),p(w),p(b))),this}},{key:"_addCap",value:function(g,x,b){for(var w,T=g.array(),R=x.array(),C=[0,0,0],P=0;P<6;P++)(w=this.lineVertices).push.apply(w,p(T)),(w=this.lineTangentsIn).push.apply(w,p(R)),(w=this.lineTangentsOut).push.apply(w,C),(w=this.lineVertexColors).push.apply(w,p(b));return this.lineSides.push(-1,2,-2,1,2,-1),this}},{key:"_addJoin",value:function(g,x,b,w){for(var T,R=g.array(),C=x.array(),P=b.array(),I=0;I<12;I++)(T=this.lineVertices).push.apply(T,p(R)),(T=this.lineTangentsIn).push.apply(T,p(C)),(T=this.lineTangentsOut).push.apply(T,p(P)),(T=this.lineVertexColors).push.apply(T,p(w));return this.lineSides.push(-1,-3,-2,-1,0,-3),this.lineSides.push(3,1,2,3,0,1),this}},{key:"normalize",value:function(){if(0<this.vertices.length){for(var g=this.vertices[0].copy(),x=this.vertices[0].copy(),b=0;b<this.vertices.length;b++)g.x=Math.max(g.x,this.vertices[b].x),x.x=Math.min(x.x,this.vertices[b].x),g.y=Math.max(g.y,this.vertices[b].y),x.y=Math.min(x.y,this.vertices[b].y),g.z=Math.max(g.z,this.vertices[b].z),x.z=Math.min(x.z,this.vertices[b].z);for(var w=l.default.Vector.lerp(g,x,.5),T=l.default.Vector.sub(g,x),R=200/Math.max(Math.max(T.x,T.y),T.z),C=0;C<this.vertices.length;C++)this.vertices[C].sub(w),this.vertices[C].mult(R)}return this}}])&&c(y.prototype,v),m}();var f=l.default.Geometry;o.default=f},{"../core/constants":269,"../core/main":280,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.flat":159,"core-js/modules/es.array.for-each":160,"core-js/modules/es.array.from":161,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.map":167,"core-js/modules/es.array.slice":168,"core-js/modules/es.array.unscopables.flat":172,"core-js/modules/es.map":174,"core-js/modules/es.number.constructor":178,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.set":194,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.sub":205,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.for-each":242,"core-js/modules/web.dom-collections.iterator":243}],333:[function(h,i,o){h("core-js/modules/es.array.iterator"),h("core-js/modules/es.object.to-string"),h("core-js/modules/es.typed-array.float32-array"),h("core-js/modules/es.typed-array.copy-within"),h("core-js/modules/es.typed-array.every"),h("core-js/modules/es.typed-array.fill"),h("core-js/modules/es.typed-array.filter"),h("core-js/modules/es.typed-array.find"),h("core-js/modules/es.typed-array.find-index"),h("core-js/modules/es.typed-array.for-each"),h("core-js/modules/es.typed-array.includes"),h("core-js/modules/es.typed-array.index-of"),h("core-js/modules/es.typed-array.iterator"),h("core-js/modules/es.typed-array.join"),h("core-js/modules/es.typed-array.last-index-of"),h("core-js/modules/es.typed-array.map"),h("core-js/modules/es.typed-array.reduce"),h("core-js/modules/es.typed-array.reduce-right"),h("core-js/modules/es.typed-array.reverse"),h("core-js/modules/es.typed-array.set"),h("core-js/modules/es.typed-array.slice"),h("core-js/modules/es.typed-array.some"),h("core-js/modules/es.typed-array.sort"),h("core-js/modules/es.typed-array.subarray"),h("core-js/modules/es.typed-array.to-locale-string"),h("core-js/modules/es.typed-array.to-string"),h("core-js/modules/es.array.iterator"),h("core-js/modules/es.object.to-string"),h("core-js/modules/es.typed-array.float32-array"),h("core-js/modules/es.typed-array.copy-within"),h("core-js/modules/es.typed-array.every"),h("core-js/modules/es.typed-array.fill"),h("core-js/modules/es.typed-array.filter"),h("core-js/modules/es.typed-array.find"),h("core-js/modules/es.typed-array.find-index"),h("core-js/modules/es.typed-array.for-each"),h("core-js/modules/es.typed-array.includes"),h("core-js/modules/es.typed-array.index-of"),h("core-js/modules/es.typed-array.iterator"),h("core-js/modules/es.typed-array.join"),h("core-js/modules/es.typed-array.last-index-of"),h("core-js/modules/es.typed-array.map"),h("core-js/modules/es.typed-array.reduce"),h("core-js/modules/es.typed-array.reduce-right"),h("core-js/modules/es.typed-array.reverse"),h("core-js/modules/es.typed-array.set"),h("core-js/modules/es.typed-array.slice"),h("core-js/modules/es.typed-array.some"),h("core-js/modules/es.typed-array.sort"),h("core-js/modules/es.typed-array.subarray"),h("core-js/modules/es.typed-array.to-locale-string"),h("core-js/modules/es.typed-array.to-string"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var s=(h=h("../core/main"))&&h.__esModule?h:{default:h};function a(p,c){for(var f=0;f<c.length;f++){var m=c[f];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(p,m.key,m)}}var l=Array,u=function(p){return Array.isArray(p)},h=(typeof Float32Array<"u"&&(l=Float32Array,u=function(p){return Array.isArray(p)||p instanceof Float32Array}),s.default.Matrix=function(){function p(){var y=this,v=p;if(y instanceof v)return arguments.length&&((y=arguments.length-1)<0||arguments.length<=y?void 0:arguments[y])instanceof s.default&&(this.p5=(v=arguments.length-1)<0||arguments.length<=v?void 0:arguments[v]),(arguments.length<=0?void 0:arguments[0])==="mat3"?this.mat3=Array.isArray(arguments.length<=1?void 0:arguments[1])?arguments.length<=1?void 0:arguments[1]:new l([1,0,0,0,1,0,0,0,1]):this.mat4=Array.isArray(arguments.length<=0?void 0:arguments[0])?arguments.length<=0?void 0:arguments[0]:new l([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this;throw new TypeError("Cannot call a class as a function")}var c,f,m;return c=p,m=[{key:"identity",value:function(y){return new s.default.Matrix(y)}}],(f=[{key:"set",value:function(y){var v=arguments;if(y instanceof s.default.Matrix?v=y.mat4:u(y)&&(v=y),v.length!==16)s.default._friendlyError("Expected 16 values but received ".concat(v.length,"."),"p5.Matrix.set");else for(var g=0;g<16;g++)this.mat4[g]=v[g];return this}},{key:"get",value:function(){return new s.default.Matrix(this.mat4,this.p5)}},{key:"copy",value:function(){var y;return this.mat3!==void 0?((y=new s.default.Matrix("mat3",this.p5)).mat3[0]=this.mat3[0],y.mat3[1]=this.mat3[1],y.mat3[2]=this.mat3[2],y.mat3[3]=this.mat3[3],y.mat3[4]=this.mat3[4],y.mat3[5]=this.mat3[5],y.mat3[6]=this.mat3[6],y.mat3[7]=this.mat3[7],y.mat3[8]=this.mat3[8]):((y=new s.default.Matrix(this.p5)).mat4[0]=this.mat4[0],y.mat4[1]=this.mat4[1],y.mat4[2]=this.mat4[2],y.mat4[3]=this.mat4[3],y.mat4[4]=this.mat4[4],y.mat4[5]=this.mat4[5],y.mat4[6]=this.mat4[6],y.mat4[7]=this.mat4[7],y.mat4[8]=this.mat4[8],y.mat4[9]=this.mat4[9],y.mat4[10]=this.mat4[10],y.mat4[11]=this.mat4[11],y.mat4[12]=this.mat4[12],y.mat4[13]=this.mat4[13],y.mat4[14]=this.mat4[14],y.mat4[15]=this.mat4[15]),y}},{key:"transpose",value:function(y){var v,g,x,b,w,T;return y instanceof s.default.Matrix?(v=y.mat4[1],g=y.mat4[2],x=y.mat4[3],b=y.mat4[6],w=y.mat4[7],T=y.mat4[11],this.mat4[0]=y.mat4[0],this.mat4[1]=y.mat4[4],this.mat4[2]=y.mat4[8],this.mat4[3]=y.mat4[12],this.mat4[4]=v,this.mat4[5]=y.mat4[5],this.mat4[6]=y.mat4[9],this.mat4[7]=y.mat4[13],this.mat4[8]=g,this.mat4[9]=b,this.mat4[10]=y.mat4[10],this.mat4[11]=y.mat4[14],this.mat4[12]=x,this.mat4[13]=w,this.mat4[14]=T,this.mat4[15]=y.mat4[15]):u(y)&&(v=y[1],g=y[2],x=y[3],b=y[6],w=y[7],T=y[11],this.mat4[0]=y[0],this.mat4[1]=y[4],this.mat4[2]=y[8],this.mat4[3]=y[12],this.mat4[4]=v,this.mat4[5]=y[5],this.mat4[6]=y[9],this.mat4[7]=y[13],this.mat4[8]=g,this.mat4[9]=b,this.mat4[10]=y[10],this.mat4[11]=y[14],this.mat4[12]=x,this.mat4[13]=w,this.mat4[14]=T,this.mat4[15]=y[15]),this}},{key:"invert",value:function(J){J instanceof s.default.Matrix?(v=J.mat4[0],g=J.mat4[1],x=J.mat4[2],b=J.mat4[3],w=J.mat4[4],T=J.mat4[5],R=J.mat4[6],C=J.mat4[7],P=J.mat4[8],I=J.mat4[9],D=J.mat4[10],j=J.mat4[11],N=J.mat4[12],O=J.mat4[13],W=J.mat4[14],X=J.mat4[15]):u(J)&&(v=J[0],g=J[1],x=J[2],b=J[3],w=J[4],T=J[5],R=J[6],C=J[7],P=J[8],I=J[9],D=J[10],j=J[11],N=J[12],O=J[13],W=J[14],X=J[15]);var v,g,x,b,w,T,R,C,P,I,D,j,N,O,W,X,J=v*T-g*w,ee=v*R-x*w,V=v*C-b*w,q=g*R-x*T,Y=g*C-b*T,Z=x*C-b*R,ce=P*O-I*N,B=P*W-D*N,U=P*X-j*N,K=I*W-D*O,re=I*X-j*O,ae=D*X-j*W,pe=J*ae-ee*re+V*K+q*U-Y*B+Z*ce;return pe?(this.mat4[0]=(T*ae-R*re+C*K)*(pe=1/pe),this.mat4[1]=(x*re-g*ae-b*K)*pe,this.mat4[2]=(O*Z-W*Y+X*q)*pe,this.mat4[3]=(D*Y-I*Z-j*q)*pe,this.mat4[4]=(R*U-w*ae-C*B)*pe,this.mat4[5]=(v*ae-x*U+b*B)*pe,this.mat4[6]=(W*V-N*Z-X*ee)*pe,this.mat4[7]=(P*Z-D*V+j*ee)*pe,this.mat4[8]=(w*re-T*U+C*ce)*pe,this.mat4[9]=(g*U-v*re-b*ce)*pe,this.mat4[10]=(N*Y-O*V+X*J)*pe,this.mat4[11]=(I*V-P*Y-j*J)*pe,this.mat4[12]=(T*B-w*K-R*ce)*pe,this.mat4[13]=(v*K-g*B+x*ce)*pe,this.mat4[14]=(O*ee-N*q-W*J)*pe,this.mat4[15]=(P*q-I*ee+D*J)*pe,this):null}},{key:"invert3x3",value:function(){var y=this.mat3[0],v=this.mat3[1],g=this.mat3[2],x=this.mat3[3],b=this.mat3[4],w=this.mat3[5],T=this.mat3[6],R=this.mat3[7],C=this.mat3[8],P=C*b-w*R,I=-C*x+w*T,D=R*x-b*T,j=y*P+v*I+g*D;return j?(this.mat3[0]=P*(j=1/j),this.mat3[1]=(-C*v+g*R)*j,this.mat3[2]=(w*v-g*b)*j,this.mat3[3]=I*j,this.mat3[4]=(C*y-g*T)*j,this.mat3[5]=(-w*y+g*x)*j,this.mat3[6]=D*j,this.mat3[7]=(-R*y+v*T)*j,this.mat3[8]=(b*y-v*x)*j,this):null}},{key:"transpose3x3",value:function(y){var v=(y=y===void 0?this.mat3:y)[1],g=y[2],x=y[5];return this.mat3[0]=y[0],this.mat3[1]=y[3],this.mat3[2]=y[6],this.mat3[3]=v,this.mat3[4]=y[4],this.mat3[5]=y[7],this.mat3[6]=g,this.mat3[7]=x,this.mat3[8]=y[8],this}},{key:"inverseTranspose",value:function(y){if(y=y.mat4,this.mat3===void 0?s.default._friendlyError("sorry, this function only works with mat3"):(this.mat3[0]=y[0],this.mat3[1]=y[1],this.mat3[2]=y[2],this.mat3[3]=y[4],this.mat3[4]=y[5],this.mat3[5]=y[6],this.mat3[6]=y[8],this.mat3[7]=y[9],this.mat3[8]=y[10]),y=this.invert3x3(),y)y.transpose3x3(this.mat3);else for(var v=0;v<9;v++)this.mat3[v]=0;return this}},{key:"determinant",value:function(){var y=this.mat4[0]*this.mat4[5]-this.mat4[1]*this.mat4[4],v=this.mat4[0]*this.mat4[6]-this.mat4[2]*this.mat4[4],g=this.mat4[0]*this.mat4[7]-this.mat4[3]*this.mat4[4],x=this.mat4[1]*this.mat4[6]-this.mat4[2]*this.mat4[5],b=this.mat4[1]*this.mat4[7]-this.mat4[3]*this.mat4[5],w=this.mat4[2]*this.mat4[7]-this.mat4[3]*this.mat4[6],T=this.mat4[8]*this.mat4[13]-this.mat4[9]*this.mat4[12],R=this.mat4[8]*this.mat4[14]-this.mat4[10]*this.mat4[12],C=this.mat4[8]*this.mat4[15]-this.mat4[11]*this.mat4[12],P=this.mat4[9]*this.mat4[14]-this.mat4[10]*this.mat4[13],I=this.mat4[9]*this.mat4[15]-this.mat4[11]*this.mat4[13];return y*(this.mat4[10]*this.mat4[15]-this.mat4[11]*this.mat4[14])-v*I+g*P+x*C-b*R+w*T}},{key:"mult",value:function(g){var v;if(g===this||g===this.mat4)v=this.copy().mat4;else if(g instanceof s.default.Matrix)v=g.mat4;else if(u(g))v=g;else{if(arguments.length!==16)return;v=arguments}var g=this.mat4[0],x=this.mat4[1],b=this.mat4[2],w=this.mat4[3];return this.mat4[0]=g*v[0]+x*v[4]+b*v[8]+w*v[12],this.mat4[1]=g*v[1]+x*v[5]+b*v[9]+w*v[13],this.mat4[2]=g*v[2]+x*v[6]+b*v[10]+w*v[14],this.mat4[3]=g*v[3]+x*v[7]+b*v[11]+w*v[15],g=this.mat4[4],x=this.mat4[5],b=this.mat4[6],w=this.mat4[7],this.mat4[4]=g*v[0]+x*v[4]+b*v[8]+w*v[12],this.mat4[5]=g*v[1]+x*v[5]+b*v[9]+w*v[13],this.mat4[6]=g*v[2]+x*v[6]+b*v[10]+w*v[14],this.mat4[7]=g*v[3]+x*v[7]+b*v[11]+w*v[15],g=this.mat4[8],x=this.mat4[9],b=this.mat4[10],w=this.mat4[11],this.mat4[8]=g*v[0]+x*v[4]+b*v[8]+w*v[12],this.mat4[9]=g*v[1]+x*v[5]+b*v[9]+w*v[13],this.mat4[10]=g*v[2]+x*v[6]+b*v[10]+w*v[14],this.mat4[11]=g*v[3]+x*v[7]+b*v[11]+w*v[15],g=this.mat4[12],x=this.mat4[13],b=this.mat4[14],w=this.mat4[15],this.mat4[12]=g*v[0]+x*v[4]+b*v[8]+w*v[12],this.mat4[13]=g*v[1]+x*v[5]+b*v[9]+w*v[13],this.mat4[14]=g*v[2]+x*v[6]+b*v[10]+w*v[14],this.mat4[15]=g*v[3]+x*v[7]+b*v[11]+w*v[15],this}},{key:"apply",value:function(g){var v;if(g===this||g===this.mat4)v=this.copy().mat4;else if(g instanceof s.default.Matrix)v=g.mat4;else if(u(g))v=g;else{if(arguments.length!==16)return;v=arguments}var g=this.mat4,x=g[0],b=g[4],w=g[8],T=g[12],x=(g[0]=v[0]*x+v[1]*b+v[2]*w+v[3]*T,g[4]=v[4]*x+v[5]*b+v[6]*w+v[7]*T,g[8]=v[8]*x+v[9]*b+v[10]*w+v[11]*T,g[12]=v[12]*x+v[13]*b+v[14]*w+v[15]*T,g[1]),b=g[5],w=g[9],T=g[13],x=(g[1]=v[0]*x+v[1]*b+v[2]*w+v[3]*T,g[5]=v[4]*x+v[5]*b+v[6]*w+v[7]*T,g[9]=v[8]*x+v[9]*b+v[10]*w+v[11]*T,g[13]=v[12]*x+v[13]*b+v[14]*w+v[15]*T,g[2]),b=g[6],w=g[10],T=g[14],x=(g[2]=v[0]*x+v[1]*b+v[2]*w+v[3]*T,g[6]=v[4]*x+v[5]*b+v[6]*w+v[7]*T,g[10]=v[8]*x+v[9]*b+v[10]*w+v[11]*T,g[14]=v[12]*x+v[13]*b+v[14]*w+v[15]*T,g[3]),b=g[7],w=g[11],T=g[15];return g[3]=v[0]*x+v[1]*b+v[2]*w+v[3]*T,g[7]=v[4]*x+v[5]*b+v[6]*w+v[7]*T,g[11]=v[8]*x+v[9]*b+v[10]*w+v[11]*T,g[15]=v[12]*x+v[13]*b+v[14]*w+v[15]*T,this}},{key:"scale",value:function(y,v,g){return y instanceof s.default.Vector?(v=y.y,g=y.z,y=y.x):y instanceof Array&&(v=y[1],g=y[2],y=y[0]),this.mat4[0]*=y,this.mat4[1]*=y,this.mat4[2]*=y,this.mat4[3]*=y,this.mat4[4]*=v,this.mat4[5]*=v,this.mat4[6]*=v,this.mat4[7]*=v,this.mat4[8]*=g,this.mat4[9]*=g,this.mat4[10]*=g,this.mat4[11]*=g,this}},{key:"rotate",value:function(J,re,K,x){re instanceof s.default.Vector?(K=re.y,x=re.z,re=re.x):re instanceof Array&&(K=re[1],x=re[2],re=re[0]);var b=Math.sqrt(re*re+K*K+x*x),b=(re*=1/b,K*=1/b,x*=1/b,this.mat4[0]),w=this.mat4[1],T=this.mat4[2],R=this.mat4[3],C=this.mat4[4],P=this.mat4[5],I=this.mat4[6],D=this.mat4[7],j=this.mat4[8],N=this.mat4[9],O=this.mat4[10],W=this.mat4[11],X=Math.sin(J),J=Math.cos(J),ee=1-J,V=re*re*ee+J,q=K*re*ee+x*X,Y=x*re*ee-K*X,Z=re*K*ee-x*X,ce=K*K*ee+J,B=x*K*ee+re*X,U=re*x*ee+K*X,K=K*x*ee-re*X,re=x*x*ee+J;return this.mat4[0]=b*V+C*q+j*Y,this.mat4[1]=w*V+P*q+N*Y,this.mat4[2]=T*V+I*q+O*Y,this.mat4[3]=R*V+D*q+W*Y,this.mat4[4]=b*Z+C*ce+j*B,this.mat4[5]=w*Z+P*ce+N*B,this.mat4[6]=T*Z+I*ce+O*B,this.mat4[7]=R*Z+D*ce+W*B,this.mat4[8]=b*U+C*K+j*re,this.mat4[9]=w*U+P*K+N*re,this.mat4[10]=T*U+I*K+O*re,this.mat4[11]=R*U+D*K+W*re,this}},{key:"translate",value:function(x){var v=x[0],g=x[1],x=x[2]||0;this.mat4[12]+=this.mat4[0]*v+this.mat4[4]*g+this.mat4[8]*x,this.mat4[13]+=this.mat4[1]*v+this.mat4[5]*g+this.mat4[9]*x,this.mat4[14]+=this.mat4[2]*v+this.mat4[6]*g+this.mat4[10]*x,this.mat4[15]+=this.mat4[3]*v+this.mat4[7]*g+this.mat4[11]*x}},{key:"rotateX",value:function(y){this.rotate(y,1,0,0)}},{key:"rotateY",value:function(y){this.rotate(y,0,1,0)}},{key:"rotateZ",value:function(y){this.rotate(y,0,0,1)}},{key:"perspective",value:function(b,v,g,x){var b=1/Math.tan(b/2),w=1/(g-x);return this.mat4[0]=b/v,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=b,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=(x+g)*w,this.mat4[11]=-1,this.mat4[12]=0,this.mat4[13]=0,this.mat4[14]=2*x*g*w,this.mat4[15]=0,this}},{key:"ortho",value:function(y,v,g,x,b,w){var T=1/(y-v),R=1/(g-x),C=1/(b-w);return this.mat4[0]=-2*T,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=-2*R,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=2*C,this.mat4[11]=0,this.mat4[12]=(y+v)*T,this.mat4[13]=(x+g)*R,this.mat4[14]=(w+b)*C,this.mat4[15]=1,this}},{key:"multiplyVec4",value:function(y,v,g,x){var b=new Array(4),w=this.mat4;return b[0]=w[0]*y+w[4]*v+w[8]*g+w[12]*x,b[1]=w[1]*y+w[5]*v+w[9]*g+w[13]*x,b[2]=w[2]*y+w[6]*v+w[10]*g+w[14]*x,b[3]=w[3]*y+w[7]*v+w[11]*g+w[15]*x,b}},{key:"multiplyPoint",value:function(g){var x=g.x,v=g.y,g=g.z,x=this.multiplyVec4(x,v,g,1);return new s.default.Vector(x[0],x[1],x[2])}},{key:"multiplyAndNormalizePoint",value:function(g){var x=g.x,v=g.y,g=g.z,x=this.multiplyVec4(x,v,g,1);return x[0]/=x[3],x[1]/=x[3],x[2]/=x[3],new s.default.Vector(x[0],x[1],x[2])}},{key:"multiplyDirection",value:function(g){var x=g.x,v=g.y,g=g.z,x=this.multiplyVec4(x,v,g,0);return new s.default.Vector(x[0],x[1],x[2])}},{key:"mult3x3",value:function(g){var v;if(g===this||g===this.mat3)v=this.copy().mat3;else if(g instanceof s.default.Matrix)v=g.mat3;else if(u(g))v=g;else{if(arguments.length!==9)return;v=arguments}var g=this.mat3[0],x=this.mat3[1],b=this.mat3[2];return this.mat3[0]=g*v[0]+x*v[3]+b*v[6],this.mat3[1]=g*v[1]+x*v[4]+b*v[7],this.mat3[2]=g*v[2]+x*v[5]+b*v[8],g=this.mat3[3],x=this.mat3[4],b=this.mat3[5],this.mat3[3]=g*v[0]+x*v[3]+b*v[6],this.mat3[4]=g*v[1]+x*v[4]+b*v[7],this.mat3[5]=g*v[2]+x*v[5]+b*v[8],g=this.mat3[6],x=this.mat3[7],b=this.mat3[8],this.mat3[6]=g*v[0]+x*v[3]+b*v[6],this.mat3[7]=g*v[1]+x*v[4]+b*v[7],this.mat3[8]=g*v[2]+x*v[5]+b*v[8],this}},{key:"column",value:function(y){return new s.default.Vector(this.mat3[3*y],this.mat3[3*y+1],this.mat3[3*y+2])}},{key:"row",value:function(y){return new s.default.Vector(this.mat3[y],this.mat3[y+3],this.mat3[y+6])}},{key:"diagonal",value:function(){return this.mat3!==void 0?[this.mat3[0],this.mat3[4],this.mat3[8]]:[this.mat4[0],this.mat4[5],this.mat4[10],this.mat4[15]]}},{key:"multiplyVec3",value:function(y,v){return(v=v===void 0?y.copy():v).x=this.row(0).dot(y),v.y=this.row(1).dot(y),v.z=this.row(2).dot(y),v}},{key:"createSubMatrix3x3",value:function(){var y=new s.default.Matrix("mat3");return y.mat3[0]=this.mat4[0],y.mat3[1]=this.mat4[1],y.mat3[2]=this.mat4[2],y.mat3[3]=this.mat4[4],y.mat3[4]=this.mat4[5],y.mat3[5]=this.mat4[6],y.mat3[6]=this.mat4[8],y.mat3[7]=this.mat4[9],y.mat3[8]=this.mat4[10],y}}])&&a(c.prototype,f),m&&a(c,m),p}(),s.default.Matrix);o.default=h},{"../core/main":280,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.to-string":187,"core-js/modules/es.typed-array.copy-within":210,"core-js/modules/es.typed-array.every":211,"core-js/modules/es.typed-array.fill":212,"core-js/modules/es.typed-array.filter":213,"core-js/modules/es.typed-array.find":215,"core-js/modules/es.typed-array.find-index":214,"core-js/modules/es.typed-array.float32-array":216,"core-js/modules/es.typed-array.for-each":218,"core-js/modules/es.typed-array.includes":219,"core-js/modules/es.typed-array.index-of":220,"core-js/modules/es.typed-array.iterator":223,"core-js/modules/es.typed-array.join":224,"core-js/modules/es.typed-array.last-index-of":225,"core-js/modules/es.typed-array.map":226,"core-js/modules/es.typed-array.reduce":228,"core-js/modules/es.typed-array.reduce-right":227,"core-js/modules/es.typed-array.reverse":229,"core-js/modules/es.typed-array.set":230,"core-js/modules/es.typed-array.slice":231,"core-js/modules/es.typed-array.some":232,"core-js/modules/es.typed-array.sort":233,"core-js/modules/es.typed-array.subarray":234,"core-js/modules/es.typed-array.to-locale-string":235,"core-js/modules/es.typed-array.to-string":236}],334:[function(r,i,o){r("core-js/modules/es.array.map"),r("core-js/modules/es.array.map"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,r=(r=r("../core/main"))&&r.__esModule?r:{default:r};function s(a,l){for(var u=0;u<l.length;u++){var h=l[u];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(a,h.key,h)}}r.default.RenderBuffer=function(){function a(h,p,c,f,m,y){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.size=h,this.src=p,this.dst=c,this.attr=f,this._renderer=m,this.map=y}var l,u;return l=a,(u=[{key:"_prepareBuffer",value:function(h,p){var c,f,m,g=p.attributes,y=this._renderer.GL,v=h.model||h,g=g[this.attr];g&&(c=h[this.dst],0<(f=v[this.src]).length?((m=!c)&&(h[this.dst]=c=y.createBuffer()),y.bindBuffer(y.ARRAY_BUFFER,c),!m&&v.dirtyFlags[this.src]===!1||(m=(h=this.map)?h(f):f,this._renderer._bindBuffer(c,y.ARRAY_BUFFER,m),v.dirtyFlags[this.src]=!1),p.enableAttrib(g,this.size)):(h=g.location)!==-1&&this._renderer.registerEnabled.has(h)&&(y.disableVertexAttribArray(h),this._renderer.registerEnabled.delete(h)))}}])&&s(l.prototype,u),a}(),r=r.default.RenderBuffer,o.default=r},{"../core/main":280,"core-js/modules/es.array.map":167}],335:[function(r,i,o){function s(m){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y})(m)}function a(m){return(a=typeof Symbol=="function"&&s(Symbol.iterator)==="symbol"?function(y){return s(y)}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":s(y)})(m)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.fill"),r("core-js/modules/es.array.find-index"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.map"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.fill"),r("core-js/modules/es.array.find-index"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.map"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var l=(f=r("../core/main"))&&f.__esModule?f:{default:f},u=function(m){if(m&&m.__esModule)return m;if(m===null||a(m)!=="object"&&typeof m!="function")return{default:m};var y=h();if(y&&y.has(m))return y.get(m);var v,g={},x=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(v in m){var b;Object.prototype.hasOwnProperty.call(m,v)&&((b=x?Object.getOwnPropertyDescriptor(m,v):null)&&(b.get||b.set)?Object.defineProperty(g,v,b):g[v]=m[v])}return g.default=m,y&&y.set(m,g),g}(r("../core/constants"));function h(){var m;return typeof WeakMap!="function"?null:(m=new WeakMap,h=function(){return m},m)}function p(m){return function(y){if(Array.isArray(y)){for(var v=0,g=new Array(y.length);v<y.length;v++)g[v]=y[v];return g}}(m)||function(y){if(Symbol.iterator in Object(y)||Object.prototype.toString.call(y)==="[object Arguments]")return Array.from(y)}(m)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}r("./p5.RenderBuffer"),l.default.RendererGL.prototype.beginShape=function(m){return this.immediateMode.shapeMode=m!==void 0?m:u.TESS,this.immediateMode.geometry.reset(),this.immediateMode.contourIndices=[],this};var c={vertices:1,vertexNormals:1,vertexColors:4,vertexStrokeColors:4,uvs:2},f=(l.default.RendererGL.prototype.beginContour=function(){if(this.immediateMode.shapeMode!==u.TESS)throw new Error("WebGL mode can only use contours with beginShape(TESS).");this.immediateMode.contourIndices.push(this.immediateMode.geometry.vertices.length)},l.default.RendererGL.prototype.vertex=function(m,y){if(this.immediateMode.shapeMode===u.QUADS&&this.immediateMode.geometry.vertices.length%6==3)for(var v in c){var g=c[v],v=this.immediateMode.geometry[v];v.push.apply(v,p(v.slice(v.length-3*g,v.length-2*g)).concat(p(v.slice(v.length-g,v.length))))}var x,b,w=x=b=0,T=(arguments.length===3?w=arguments[2]:arguments.length===4?(x=arguments[2],b=arguments[3]):arguments.length===5&&(w=arguments[2],x=arguments[3],b=arguments[4]),new l.default.Vector(m,y,w)),T=(this.immediateMode.geometry.vertices.push(T),this.immediateMode.geometry.vertexNormals.push(this._currentNormal),this.curFillColor||[.5,.5,.5,1]),T=(this.immediateMode.geometry.vertexColors.push(T[0],T[1],T[2],T[3]),this.curStrokeColor||[.5,.5,.5,1]);return this.immediateMode.geometry.vertexStrokeColors.push(T[0],T[1],T[2],T[3]),this.textureMode!==u.IMAGE||this.isProcessingVertices||(this._tex!==null?0<this._tex.width&&0<this._tex.height&&(x/=this._tex.width,b/=this._tex.height):this.userFillShader===void 0&&this.userStrokeShader===void 0&&this.userPointShader===void 0&&this._tex===null&&4<=arguments.length&&console.warn("You must first call texture() before using vertex() with image based u and v coordinates")),this.immediateMode.geometry.uvs.push(x,b),this.immediateMode._bezierVertex[0]=m,this.immediateMode._bezierVertex[1]=y,this.immediateMode._bezierVertex[2]=w,this.immediateMode._quadraticVertex[0]=m,this.immediateMode._quadraticVertex[1]=y,this.immediateMode._quadraticVertex[2]=w,this},l.default.RendererGL.prototype.normal=function(m,y,v){return m instanceof l.default.Vector?this._currentNormal=m:this._currentNormal=new l.default.Vector(m,y,v),this},l.default.RendererGL.prototype.endShape=function(m,y,v,g,x,b){var w,T=6<arguments.length&&arguments[6]!==void 0?arguments[6]:1;return this.immediateMode.shapeMode===u.POINTS?this._drawPoints(this.immediateMode.geometry.vertices,this.immediateMode.buffers.point):(this.immediateMode.geometry.vertices.length===3&&this.immediateMode.shapeMode===u.TESS&&(this.immediateMode.shapeMode,u.TRIANGLES),this.isProcessingVertices=!0,this._processVertices.apply(this,arguments),w=this.isProcessingVertices=!1,this.immediateMode.shapeMode!==u.LINE_STRIP&&this.immediateMode.shapeMode!==u.LINES||(this.immediateMode.shapeMode=u.TRIANGLE_FAN,w=!0),this.immediateMode.shapeMode===u.QUADS?this.immediateMode.shapeMode=u.TRIANGLES:this.immediateMode.shapeMode===u.QUAD_STRIP&&(this.immediateMode.shapeMode=u.TRIANGLE_STRIP),this._doFill&&!w&&!this.geometryBuilder&&3<=this.immediateMode.geometry.vertices.length&&this._drawImmediateFill(T),this._doStroke&&!this.geometryBuilder&&1<=this.immediateMode.geometry.lineVertices.length&&this._drawImmediateStroke(),this.geometryBuilder&&this.geometryBuilder.addImmediate(),this.isBezier=!1,this.isQuadratic=!1,this.isCurve=!1,this.immediateMode._bezierVertex.length=0,this.immediateMode._quadraticVertex.length=0,this.immediateMode._curveVertex.length=0),this},l.default.RendererGL.prototype._processVertices=function(m){var y;this.immediateMode.geometry.vertices.length!==0&&(y=this._doStroke,m=m===u.CLOSE,y&&(this.immediateMode.geometry.edges=this._calculateEdges(this.immediateMode.shapeMode,this.immediateMode.geometry.vertices,m),this.geometryBuilder||this.immediateMode.geometry._edgesToVertices()),y=this.immediateMode.shapeMode===u.TESS,m=0<this.immediateMode.contourIndices.length,this._doFill&&(this.isBezier||this.isQuadratic||this.isCurve||y||m)&&this.immediateMode.shapeMode!==u.LINES&&this._tesselateShape())},l.default.RendererGL.prototype._calculateEdges=function(m,y,v){var g=[],x=0,b=this.immediateMode.contourIndices.slice(),w=0;switch(m){case u.TRIANGLE_STRIP:for(x=0;x<y.length-2;x++)g.push([x,x+1]),g.push([x,x+2]);g.push([x,x+1]);break;case u.TRIANGLE_FAN:for(x=1;x<y.length-1;x++)g.push([0,x]),g.push([x,x+1]);g.push([0,y.length-1]);break;case u.TRIANGLES:for(x=0;x<y.length-2;x+=3)g.push([x,x+1]),g.push([x+1,x+2]),g.push([x+2,x]);break;case u.LINES:for(x=0;x<y.length-1;x+=2)g.push([x,x+1]);break;case u.QUADS:for(x=0;x<y.length-5;x+=6)g.push([x,x+1]),g.push([x+1,x+2]),g.push([x+3,x+5]),g.push([x+4,x+5]);break;case u.QUAD_STRIP:for(x=0;x<y.length-2;x+=2)g.push([x,x+1]),g.push([x,x+2]),g.push([x+1,x+3]);g.push([x,x+1]);break;default:for(x=0;x<y.length;x++)x+1<y.length&&x+1!==b[0]?g.push([x,x+1]):((v||w)&&g.push([x,w]),0<b.length&&(w=b.shift()))}return m!==u.TESS&&v&&g.push([y.length-1,0]),g},l.default.RendererGL.prototype._tesselateShape=function(){for(var m=this,y=(this.immediateMode.shapeMode=u.TRIANGLES,[[]]),v=0;v<this.immediateMode.geometry.vertices.length;v++)0<this.immediateMode.contourIndices.length&&this.immediateMode.contourIndices[0]===v&&(this.immediateMode.contourIndices.shift(),y.push([])),y[y.length-1].push(this.immediateMode.geometry.vertices[v].x,this.immediateMode.geometry.vertices[v].y,this.immediateMode.geometry.vertices[v].z,this.immediateMode.geometry.uvs[2*v],this.immediateMode.geometry.uvs[2*v+1],this.immediateMode.geometry.vertexColors[4*v],this.immediateMode.geometry.vertexColors[4*v+1],this.immediateMode.geometry.vertexColors[4*v+2],this.immediateMode.geometry.vertexColors[4*v+3],this.immediateMode.geometry.vertexNormals[v].x,this.immediateMode.geometry.vertexNormals[v].y,this.immediateMode.geometry.vertexNormals[v].z);for(var g,x=this._triangulate(y),b=this.immediateMode.geometry.vertices,w=(this.immediateMode.geometry.vertices=[],this.immediateMode.geometry.vertexNormals=[],this.immediateMode.geometry.uvs=[],[]),T=0,R=x.length;T<R;T+=l.default.RendererGL.prototype.tessyVertexSize)w.push.apply(w,p(x.slice(T+5,T+9))),this.normal.apply(this,p(x.slice(T+9,T+12))),this.vertex.apply(this,p(x.slice(T,T+5)));this.geometryBuilder&&(g=new Map,this.immediateMode.geometry.edges=this.immediateMode.geometry.edges.map(function(C){return C.map(function(P){if(!g.has(P)){var I=b[P],D=m.immediateMode.geometry.vertices.findIndex(function(ee){return I.x===ee.x&&I.y===ee.y&&I.z===ee.z});if(D===-1){for(var j=1/0,N=0,O=0;O<m.immediateMode.geometry.vertices.length;O++){var X=m.immediateMode.geometry.vertices[O],J=I.x-X.x,W=I.y-X.y,X=I.z-X.z,J=J*J+W*W+X*X;J<j&&(j=J,N=O)}D=N}g.set(P,D)}return g.get(P)})})),this.immediateMode.geometry.vertexColors=w},l.default.RendererGL.prototype._drawImmediateFill=function(){var m,y=0<arguments.length&&arguments[0]!==void 0?arguments[0]:1,v=this.GL,g=(this._useVertexColor=0<this.immediateMode.geometry.vertexColors.length,m=this._getImmediateFillShader(),this._setFillUniforms(m),!0),x=!1,b=void 0;try{for(var w,T=this.immediateMode.buffers.fill[Symbol.iterator]();!(g=(w=T.next()).done);g=!0)w.value._prepareBuffer(this.immediateMode.geometry,m)}catch(R){x=!0,b=R}finally{try{g||T.return==null||T.return()}finally{if(x)throw b}}if(m.disableRemainingAttributes(),this._applyColorBlend(this.curFillColor,this.immediateMode.geometry.hasFillTransparency()),y===1)v.drawArrays(this.immediateMode.shapeMode,0,this.immediateMode.geometry.vertices.length);else try{v.drawArraysInstanced(this.immediateMode.shapeMode,0,this.immediateMode.geometry.vertices.length,y)}catch{console.log(" p5.js says: Instancing is only supported in WebGL2 mode")}m.unbindShader()},l.default.RendererGL.prototype._drawImmediateStroke=function(){var m=this.GL,y=(this._useLineColor=0<this.immediateMode.geometry.vertexStrokeColors.length,this._getImmediateStrokeShader()),v=(this._setStrokeUniforms(y),!0),g=!1,x=void 0;try{for(var b,w=this.immediateMode.buffers.stroke[Symbol.iterator]();!(v=(b=w.next()).done);v=!0)b.value._prepareBuffer(this.immediateMode.geometry,y)}catch(T){g=!0,x=T}finally{try{v||w.return==null||w.return()}finally{if(g)throw x}}y.disableRemainingAttributes(),this._applyColorBlend(this.curStrokeColor,this.immediateMode.geometry.hasFillTransparency()),m.drawArrays(m.TRIANGLES,0,this.immediateMode.geometry.lineVertices.length/3),y.unbindShader()},l.default.RendererGL);o.default=f},{"../core/constants":269,"../core/main":280,"./p5.RenderBuffer":334,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.fill":155,"core-js/modules/es.array.find-index":157,"core-js/modules/es.array.from":161,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.map":167,"core-js/modules/es.array.slice":168,"core-js/modules/es.map":174,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],336:[function(r,i,o){function s(c){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(c)}function a(c){return(a=typeof Symbol=="function"&&s(Symbol.iterator)==="symbol"?function(f){return s(f)}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":s(f)})(c)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.fill"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.some"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.typed-array.float32-array"),r("core-js/modules/es.typed-array.uint16-array"),r("core-js/modules/es.typed-array.uint32-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.fill"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.some"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.typed-array.float32-array"),r("core-js/modules/es.typed-array.uint16-array"),r("core-js/modules/es.typed-array.uint32-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var l=(p=r("../core/main"))&&p.__esModule?p:{default:p},u=(r("./p5.RendererGL"),r("./p5.RenderBuffer"),function(c){if(c&&c.__esModule)return c;if(c===null||a(c)!=="object"&&typeof c!="function")return{default:c};var f=h();if(f&&f.has(c))return f.get(c);var m,y={},v=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(m in c){var g;Object.prototype.hasOwnProperty.call(c,m)&&((g=v?Object.getOwnPropertyDescriptor(c,m):null)&&(g.get||g.set)?Object.defineProperty(y,m,g):y[m]=c[m])}return y.default=c,f&&f.set(c,y),y}(r("../core/constants")));function h(){var c;return typeof WeakMap!="function"?null:(c=new WeakMap,h=function(){return c},c)}l.default.RendererGL.prototype.freeGeometry=function(c){c.gid?this._freeBuffers(c.gid):console.warn("The model you passed to freeGeometry does not have an id!")},l.default.RendererGL.prototype._initBufferDefaults=function(c){var f;return this._freeBuffers(c),1e3<Object.keys(this.retainedMode.geometry).length&&(f=Object.keys(this.retainedMode.geometry)[0],this._freeBuffers(f)),this.retainedMode.geometry[c]={}},l.default.RendererGL.prototype._freeBuffers=function(c){var f,m=this.retainedMode.geometry[c];function y(v){var g=!0,x=!1,b=void 0;try{for(var w,T=v[Symbol.iterator]();!(g=(w=T.next()).done);g=!0){var R=w.value;m[R.dst]&&(f.deleteBuffer(m[R.dst]),m[R.dst]=null)}}catch(C){x=!0,b=C}finally{try{g||T.return==null||T.return()}finally{if(x)throw b}}}m&&(delete this.retainedMode.geometry[c],f=this.GL,m.indexBuffer&&f.deleteBuffer(m.indexBuffer),y(this.retainedMode.buffers.stroke),y(this.retainedMode.buffers.fill))},l.default.RendererGL.prototype.createBuffers=function(x,f){var m,y,v,g=this.GL,x=this._initBufferDefaults(x),b=(x.model=f,x.indexBuffer);return f.faces.length?(b=b||(x.indexBuffer=g.createBuffer()),v=(y=(m=l.default.RendererGL.prototype._flatten(f.faces)).some(function(w){return 65535<w}))?Uint32Array:Uint16Array,this._bindBuffer(b,g.ELEMENT_ARRAY_BUFFER,m,v),x.indexBufferType=y?g.UNSIGNED_INT:g.UNSIGNED_SHORT,x.vertexCount=3*f.faces.length):(b&&(g.deleteBuffer(b),x.indexBuffer=null),x.vertexCount=f.vertices?f.vertices.length:0),x.lineVertexCount=f.lineVertices?f.lineVertices.length/3:0,x},l.default.RendererGL.prototype.drawBuffers=function(c){var f=this.GL,m=this.retainedMode.geometry[c];if(!this.geometryBuilder&&this._doFill&&0<this.retainedMode.geometry[c].vertexCount){this._useVertexColor=0<m.model.vertexColors.length;var y=this._getRetainedFillShader(),v=(this._setFillUniforms(y),!0),g=!1,x=void 0;try{for(var b,w=this.retainedMode.buffers.fill[Symbol.iterator]();!(v=(b=w.next()).done);v=!0)b.value._prepareBuffer(m,y)}catch(I){g=!0,x=I}finally{try{v||w.return==null||w.return()}finally{if(g)throw x}}y.disableRemainingAttributes(),m.indexBuffer&&this._bindBuffer(m.indexBuffer,f.ELEMENT_ARRAY_BUFFER),this._applyColorBlend(this.curFillColor,m.model.hasFillTransparency()),this._drawElements(f.TRIANGLES,c),y.unbindShader()}if(!this.geometryBuilder&&this._doStroke&&0<m.lineVertexCount){this._useLineColor=0<m.model.vertexStrokeColors.length;var T=this._getRetainedStrokeShader(),R=(this._setStrokeUniforms(T),!0),g=!1,x=void 0;try{for(var C,P=this.retainedMode.buffers.stroke[Symbol.iterator]();!(R=(C=P.next()).done);R=!0)C.value._prepareBuffer(m,T)}catch(j){g=!0,x=j}finally{try{R||P.return==null||P.return()}finally{if(g)throw x}}T.disableRemainingAttributes(),this._applyColorBlend(this.curStrokeColor,m.model.hasStrokeTransparency()),this._drawArrays(f.TRIANGLES,c),T.unbindShader()}return this.geometryBuilder&&this.geometryBuilder.addRetained(m),this},l.default.RendererGL.prototype.drawBuffersScaled=function(c,f,m,y){var v=this.uMVMatrix.copy();try{this.uMVMatrix.scale(f,m,y),this.drawBuffers(c)}finally{this.uMVMatrix=v}},l.default.RendererGL.prototype._drawArrays=function(c,f){return this.GL.drawArrays(c,0,this.retainedMode.geometry[f].lineVertexCount),this},l.default.RendererGL.prototype._drawElements=function(c,m){var m=this.retainedMode.geometry[m],y=this.GL;if(m.indexBuffer){if(this._pInst.webglVersion!==u.WEBGL2&&m.indexBufferType===y.UNSIGNED_INT&&!y.getExtension("OES_element_index_uint"))throw new Error("Unable to render a 3d model with > 65535 triangles. Your web browser does not support the WebGL Extension OES_element_index_uint.");y.drawElements(y.TRIANGLES,m.vertexCount,m.indexBufferType,0)}else y.drawArrays(c||y.TRIANGLES,0,m.vertexCount)},l.default.RendererGL.prototype._drawPoints=function(c,f){var m=this.GL,y=this._getImmediatePointShader();this._setPointUniforms(y),this._bindBuffer(f,m.ARRAY_BUFFER,this._vToNArray(c),Float32Array,m.STATIC_DRAW),y.enableAttrib(y.attributes.aPosition,3),this._applyColorBlend(this.curStrokeColor),m.drawArrays(m.Points,0,c.length),y.unbindShader()};var p=l.default.RendererGL;o.default=p},{"../core/constants":269,"../core/main":280,"./p5.RenderBuffer":334,"./p5.RendererGL":337,"core-js/modules/es.array.fill":155,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.some":169,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.keys":186,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.typed-array.copy-within":210,"core-js/modules/es.typed-array.every":211,"core-js/modules/es.typed-array.fill":212,"core-js/modules/es.typed-array.filter":213,"core-js/modules/es.typed-array.find":215,"core-js/modules/es.typed-array.find-index":214,"core-js/modules/es.typed-array.float32-array":216,"core-js/modules/es.typed-array.for-each":218,"core-js/modules/es.typed-array.includes":219,"core-js/modules/es.typed-array.index-of":220,"core-js/modules/es.typed-array.iterator":223,"core-js/modules/es.typed-array.join":224,"core-js/modules/es.typed-array.last-index-of":225,"core-js/modules/es.typed-array.map":226,"core-js/modules/es.typed-array.reduce":228,"core-js/modules/es.typed-array.reduce-right":227,"core-js/modules/es.typed-array.reverse":229,"core-js/modules/es.typed-array.set":230,"core-js/modules/es.typed-array.slice":231,"core-js/modules/es.typed-array.some":232,"core-js/modules/es.typed-array.sort":233,"core-js/modules/es.typed-array.subarray":234,"core-js/modules/es.typed-array.to-locale-string":235,"core-js/modules/es.typed-array.to-string":236,"core-js/modules/es.typed-array.uint16-array":237,"core-js/modules/es.typed-array.uint32-array":238,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],337:[function(O,i,o){function s(q){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Y){return typeof Y}:function(Y){return Y&&typeof Symbol=="function"&&Y.constructor===Symbol&&Y!==Symbol.prototype?"symbol":typeof Y})(q)}function a(q){return(a=typeof Symbol=="function"&&s(Symbol.iterator)==="symbol"?function(Y){return s(Y)}:function(Y){return Y&&typeof Symbol=="function"&&Y.constructor===Symbol&&Y!==Symbol.prototype?"symbol":s(Y)})(q)}O("core-js/modules/es.symbol"),O("core-js/modules/es.symbol.description"),O("core-js/modules/es.symbol.iterator"),O("core-js/modules/es.array.concat"),O("core-js/modules/es.array.copy-within"),O("core-js/modules/es.array.every"),O("core-js/modules/es.array.fill"),O("core-js/modules/es.array.flat"),O("core-js/modules/es.array.flat-map"),O("core-js/modules/es.array.from"),O("core-js/modules/es.array.includes"),O("core-js/modules/es.array.iterator"),O("core-js/modules/es.array.map"),O("core-js/modules/es.array.slice"),O("core-js/modules/es.array.some"),O("core-js/modules/es.array.unscopables.flat"),O("core-js/modules/es.array.unscopables.flat-map"),O("core-js/modules/es.map"),O("core-js/modules/es.object.assign"),O("core-js/modules/es.object.get-own-property-descriptor"),O("core-js/modules/es.object.get-prototype-of"),O("core-js/modules/es.object.to-string"),O("core-js/modules/es.reflect.construct"),O("core-js/modules/es.reflect.get"),O("core-js/modules/es.regexp.to-string"),O("core-js/modules/es.set"),O("core-js/modules/es.string.includes"),O("core-js/modules/es.string.iterator"),O("core-js/modules/es.typed-array.float32-array"),O("core-js/modules/es.typed-array.float64-array"),O("core-js/modules/es.typed-array.int16-array"),O("core-js/modules/es.typed-array.uint8-array"),O("core-js/modules/es.typed-array.uint16-array"),O("core-js/modules/es.typed-array.uint32-array"),O("core-js/modules/es.typed-array.copy-within"),O("core-js/modules/es.typed-array.every"),O("core-js/modules/es.typed-array.fill"),O("core-js/modules/es.typed-array.filter"),O("core-js/modules/es.typed-array.find"),O("core-js/modules/es.typed-array.find-index"),O("core-js/modules/es.typed-array.for-each"),O("core-js/modules/es.typed-array.includes"),O("core-js/modules/es.typed-array.index-of"),O("core-js/modules/es.typed-array.iterator"),O("core-js/modules/es.typed-array.join"),O("core-js/modules/es.typed-array.last-index-of"),O("core-js/modules/es.typed-array.map"),O("core-js/modules/es.typed-array.reduce"),O("core-js/modules/es.typed-array.reduce-right"),O("core-js/modules/es.typed-array.reverse"),O("core-js/modules/es.typed-array.set"),O("core-js/modules/es.typed-array.slice"),O("core-js/modules/es.typed-array.some"),O("core-js/modules/es.typed-array.sort"),O("core-js/modules/es.typed-array.subarray"),O("core-js/modules/es.typed-array.to-locale-string"),O("core-js/modules/es.typed-array.to-string"),O("core-js/modules/es.weak-map"),O("core-js/modules/web.dom-collections.iterator"),O("core-js/modules/es.symbol"),O("core-js/modules/es.symbol.description"),O("core-js/modules/es.symbol.iterator"),O("core-js/modules/es.array.concat"),O("core-js/modules/es.array.copy-within"),O("core-js/modules/es.array.every"),O("core-js/modules/es.array.fill"),O("core-js/modules/es.array.flat"),O("core-js/modules/es.array.flat-map"),O("core-js/modules/es.array.from"),O("core-js/modules/es.array.includes"),O("core-js/modules/es.array.iterator"),O("core-js/modules/es.array.map"),O("core-js/modules/es.array.slice"),O("core-js/modules/es.array.some"),O("core-js/modules/es.array.unscopables.flat"),O("core-js/modules/es.array.unscopables.flat-map"),O("core-js/modules/es.map"),O("core-js/modules/es.object.assign"),O("core-js/modules/es.object.to-string"),O("core-js/modules/es.set"),O("core-js/modules/es.string.includes"),O("core-js/modules/es.string.iterator"),O("core-js/modules/es.typed-array.float32-array"),O("core-js/modules/es.typed-array.float64-array"),O("core-js/modules/es.typed-array.int16-array"),O("core-js/modules/es.typed-array.uint8-array"),O("core-js/modules/es.typed-array.uint16-array"),O("core-js/modules/es.typed-array.uint32-array"),O("core-js/modules/es.typed-array.copy-within"),O("core-js/modules/es.typed-array.every"),O("core-js/modules/es.typed-array.fill"),O("core-js/modules/es.typed-array.filter"),O("core-js/modules/es.typed-array.find"),O("core-js/modules/es.typed-array.find-index"),O("core-js/modules/es.typed-array.for-each"),O("core-js/modules/es.typed-array.includes"),O("core-js/modules/es.typed-array.index-of"),O("core-js/modules/es.typed-array.iterator"),O("core-js/modules/es.typed-array.join"),O("core-js/modules/es.typed-array.last-index-of"),O("core-js/modules/es.typed-array.map"),O("core-js/modules/es.typed-array.reduce"),O("core-js/modules/es.typed-array.reduce-right"),O("core-js/modules/es.typed-array.reverse"),O("core-js/modules/es.typed-array.set"),O("core-js/modules/es.typed-array.slice"),O("core-js/modules/es.typed-array.some"),O("core-js/modules/es.typed-array.sort"),O("core-js/modules/es.typed-array.subarray"),O("core-js/modules/es.typed-array.to-locale-string"),O("core-js/modules/es.typed-array.to-string"),O("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.readPixelsWebGL=ee,o.readPixelWebGL=V,o.default=void 0;var l=m(O("../core/main")),u=function(q){if(q&&q.__esModule)return q;if(q===null||a(q)!=="object"&&typeof q!="function")return{default:q};var Y=f();if(Y&&Y.has(q))return Y.get(q);var Z,ce={},B=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(Z in q){var U;Object.prototype.hasOwnProperty.call(q,Z)&&((U=B?Object.getOwnPropertyDescriptor(q,Z):null)&&(U.get||U.set)?Object.defineProperty(ce,Z,U):ce[Z]=q[Z])}return ce.default=q,Y&&Y.set(q,ce),ce}(O("../core/constants")),h=m(O("./GeometryBuilder")),p=m(O("libtess")),c=(O("./p5.Shader"),O("./p5.Camera"),O("../core/p5.Renderer"),O("./p5.Matrix"),O("./p5.Framebuffer"),O("path"),O("./p5.Texture"));function f(){var q;return typeof WeakMap!="function"?null:(q=new WeakMap,f=function(){return q},q)}function m(q){return q&&q.__esModule?q:{default:q}}function y(q){return function(Y){if(Array.isArray(Y)){for(var Z=0,ce=new Array(Y.length);Z<Y.length;Z++)ce[Z]=Y[Z];return ce}}(q)||function(Y){if(Symbol.iterator in Object(Y)||Object.prototype.toString.call(Y)==="[object Arguments]")return Array.from(Y)}(q)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function v(q,Y){for(var Z=0;Z<Y.length;Z++){var ce=Y[Z];ce.enumerable=ce.enumerable||!1,ce.configurable=!0,"value"in ce&&(ce.writable=!0),Object.defineProperty(q,ce.key,ce)}}function g(q,Y,Z){return(g=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(K,B,U){var K=function(re,ae){for(;!Object.prototype.hasOwnProperty.call(re,ae)&&(re=T(re))!==null;);return re}(K,B);if(K)return(K=Object.getOwnPropertyDescriptor(K,B)).get?K.get.call(U):K.value})(q,Y,Z||q)}function x(q,Y){return(x=Object.setPrototypeOf||function(Z,ce){return Z.__proto__=ce,Z})(q,Y)}function b(q){return function(){var Y,Z,ce=T(q);return Y=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(Y=T(this).constructor,Reflect.construct(ce,arguments,Y)):ce.apply(this,arguments),ce=this,!(Z=Y)||a(Z)!=="object"&&typeof Z!="function"?w(ce):Z}}function w(q){if(q===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return q}function T(q){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(Y){return Y.__proto__||Object.getPrototypeOf(Y)})(q)}function R(q,Y,Z){Y in q?Object.defineProperty(q,Y,{value:Z,enumerable:!0,configurable:!0,writable:!0}):q[Y]=Z}function C(q,Y){N+="#define STROKE_CAP_".concat(q," ").concat(Y,`
`),D[u[q]]=Y}function P(q,Y){N+="#define STROKE_JOIN_".concat(q," ").concat(Y,`
`),j[u[q]]=Y}var I,D={},j={},N="",O=(C("ROUND",0),C("PROJECT",1),C("SQUARE",2),P("ROUND",0),P("MITER",1),P("BEVEL",2),`#define PI 3.141592

precision highp float;
precision highp int;

uniform mat4 uViewMatrix;

uniform bool uUseLighting;

uniform int uAmbientLightCount;
uniform vec3 uAmbientColor[5];
uniform mat3 uCameraRotation;
uniform int uDirectionalLightCount;
uniform vec3 uLightingDirection[5];
uniform vec3 uDirectionalDiffuseColors[5];
uniform vec3 uDirectionalSpecularColors[5];

uniform int uPointLightCount;
uniform vec3 uPointLightLocation[5];
uniform vec3 uPointLightDiffuseColors[5];	
uniform vec3 uPointLightSpecularColors[5];

uniform int uSpotLightCount;
uniform float uSpotLightAngle[5];
uniform float uSpotLightConc[5];
uniform vec3 uSpotLightDiffuseColors[5];
uniform vec3 uSpotLightSpecularColors[5];
uniform vec3 uSpotLightLocation[5];
uniform vec3 uSpotLightDirection[5];

uniform bool uSpecular;
uniform float uShininess;
uniform float metallic;

uniform float uConstantAttenuation;
uniform float uLinearAttenuation;
uniform float uQuadraticAttenuation;

// setting from  _setImageLightUniforms()
// boolean to initiate the calculateImageDiffuse and calculateImageSpecular
uniform bool uUseImageLight;
// texture for use in calculateImageDiffuse
uniform sampler2D environmentMapDiffused;
// texture for use in calculateImageSpecular
uniform sampler2D environmentMapSpecular;
// roughness for use in calculateImageSpecular
uniform float levelOfDetail;

const float specularFactor = 2.0;
const float diffuseFactor = 0.73;

struct LightResult {
  float specular;
  float diffuse;
};

float _phongSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float shininess) {

  vec3 R = reflect(lightDirection, surfaceNormal);
  return pow(max(0.0, dot(R, viewDirection)), shininess);
}

float _lambertDiffuse(vec3 lightDirection, vec3 surfaceNormal) {
  return max(0.0, dot(-lightDirection, surfaceNormal));
}

LightResult _light(vec3 viewDirection, vec3 normal, vec3 lightVector) {

  vec3 lightDir = normalize(lightVector);

  //compute our diffuse & specular terms
  LightResult lr;
  float specularIntensity = mix(1.0, 0.4, metallic);
  float diffuseIntensity = mix(1.0, 0.1, metallic);
  if (uSpecular)
    lr.specular = (_phongSpecular(lightDir, viewDirection, normal, uShininess)) * specularIntensity;
    lr.diffuse = _lambertDiffuse(lightDir, normal) * diffuseIntensity;
  return lr;
}

// converts the range of "value" from [min1 to max1] to [min2 to max2]
float map(float value, float min1, float max1, float min2, float max2) {
  return min2 + (value - min1) * (max2 - min2) / (max1 - min1);
}

vec2 mapTextureToNormal( vec3 v ){
  // x = r sin(phi) cos(theta)   
  // y = r cos(phi)  
  // z = r sin(phi) sin(theta)
  float phi = acos( v.y );
  // if phi is 0, then there are no x, z components
  float theta = 0.0;
  // else 
  theta = acos(v.x / sin(phi));
  float sinTheta = v.z / sin(phi);
  if (sinTheta < 0.0) {
    // Turn it into -theta, but in the 0-2PI range
    theta = 2.0 * PI - theta;
  }
  theta = theta / (2.0 * 3.14159);
  phi = phi / 3.14159 ;
  
  vec2 angles = vec2( fract(theta + 0.25), 1.0 - phi );
  return angles;
}


vec3 calculateImageDiffuse( vec3 vNormal, vec3 vViewPosition ){
  // make 2 seperate builds 
  vec3 worldCameraPosition =  vec3(0.0, 0.0, 0.0);  // hardcoded world camera position
  vec3 worldNormal = normalize(vNormal * uCameraRotation);
  vec2 newTexCoor = mapTextureToNormal( worldNormal );
  vec4 texture = TEXTURE( environmentMapDiffused, newTexCoor );
  // this is to make the darker sections more dark
  // png and jpg usually flatten the brightness so it is to reverse that
  return mix(smoothstep(vec3(0.0), vec3(1.0), texture.xyz), vec3(0.0), metallic);
}

vec3 calculateImageSpecular( vec3 vNormal, vec3 vViewPosition ){
  vec3 worldCameraPosition =  vec3(0.0, 0.0, 0.0);
  vec3 worldNormal = normalize(vNormal);
  vec3 lightDirection = normalize( vViewPosition - worldCameraPosition );
  vec3 R = reflect(lightDirection, worldNormal) * uCameraRotation;
  vec2 newTexCoor = mapTextureToNormal( R );
#ifdef WEBGL2
  vec4 outColor = textureLod(environmentMapSpecular, newTexCoor, levelOfDetail);
#else
  vec4 outColor = TEXTURE(environmentMapSpecular, newTexCoor);
#endif
  // this is to make the darker sections more dark
  // png and jpg usually flatten the brightness so it is to reverse that
  return mix(
    pow(outColor.xyz, vec3(10)),
    pow(outColor.xyz, vec3(1.2)),
    metallic 
  );
}

void totalLight(
  vec3 modelPosition,
  vec3 normal,
  out vec3 totalDiffuse,
  out vec3 totalSpecular
) {

  totalSpecular = vec3(0.0);

  if (!uUseLighting) {
    totalDiffuse = vec3(1.0);
    return;
  }

  totalDiffuse = vec3(0.0);

  vec3 viewDirection = normalize(-modelPosition);

  for (int j = 0; j < 5; j++) {
    if (j < uDirectionalLightCount) {
      vec3 lightVector = (uViewMatrix * vec4(uLightingDirection[j], 0.0)).xyz;
      vec3 lightColor = uDirectionalDiffuseColors[j];
      vec3 specularColor = uDirectionalSpecularColors[j];
      LightResult result = _light(viewDirection, normal, lightVector);
      totalDiffuse += result.diffuse * lightColor;
      totalSpecular += result.specular * lightColor * specularColor;
    }

    if (j < uPointLightCount) {
      vec3 lightPosition = (uViewMatrix * vec4(uPointLightLocation[j], 1.0)).xyz;
      vec3 lightVector = modelPosition - lightPosition;
      //calculate attenuation
      float lightDistance = length(lightVector);
      float lightFalloff = 1.0 / (uConstantAttenuation + lightDistance * uLinearAttenuation + (lightDistance * lightDistance) * uQuadraticAttenuation);
      vec3 lightColor = lightFalloff * uPointLightDiffuseColors[j];
      vec3 specularColor = lightFalloff * uPointLightSpecularColors[j];

      LightResult result = _light(viewDirection, normal, lightVector);
      totalDiffuse += result.diffuse * lightColor;
      totalSpecular += result.specular * lightColor * specularColor;
    }

    if(j < uSpotLightCount) {
      vec3 lightPosition = (uViewMatrix * vec4(uSpotLightLocation[j], 1.0)).xyz;
      vec3 lightVector = modelPosition - lightPosition;
    
      float lightDistance = length(lightVector);
      float lightFalloff = 1.0 / (uConstantAttenuation + lightDistance * uLinearAttenuation + (lightDistance * lightDistance) * uQuadraticAttenuation);

      vec3 lightDirection = (uViewMatrix * vec4(uSpotLightDirection[j], 0.0)).xyz;
      float spotDot = dot(normalize(lightVector), normalize(lightDirection));
      float spotFalloff;
      if(spotDot < uSpotLightAngle[j]) {
        spotFalloff = 0.0;
      }
      else {
        spotFalloff = pow(spotDot, uSpotLightConc[j]);
      }
      lightFalloff *= spotFalloff;

      vec3 lightColor = uSpotLightDiffuseColors[j];
      vec3 specularColor = uSpotLightSpecularColors[j];
     
      LightResult result = _light(viewDirection, normal, lightVector);
      
      totalDiffuse += result.diffuse * lightColor * lightFalloff;
      totalSpecular += result.specular * lightColor * specularColor * lightFalloff;
    }
  }

  if( uUseImageLight ){
    totalDiffuse += calculateImageDiffuse(normal, modelPosition);
    totalSpecular += calculateImageSpecular(normal, modelPosition);
  }

  totalDiffuse *= diffuseFactor;
  totalSpecular *= specularFactor;
}
`),W={sphereMappingFrag:`#define PI 3.141592

precision highp float;
  
uniform sampler2D uSampler;
uniform mat3 uNewNormalMatrix;
uniform float uFovY;
uniform float uAspect;

varying vec2 vTexCoord;
  
void main() {
    float uFovX = uFovY * uAspect; 
    vec4 newTexColor = texture2D(uSampler, vTexCoord);
    float angleY = mix(uFovY/2.0,  -uFovY/2.0, vTexCoord.y);
    float angleX = mix(uFovX/2.0, -uFovX/2.0, vTexCoord.x);
    vec3 rotatedNormal = vec3( angleX, angleY, 1.0 );
    rotatedNormal = uNewNormalMatrix * normalize(rotatedNormal);
    vec2 suv;
    suv.y = 0.5 + 0.5 * (-rotatedNormal.y);
    suv.x = atan(rotatedNormal.z, rotatedNormal.x) / (2.0 * PI) + 0.5;
    newTexColor = texture2D(uSampler, suv.xy);
    gl_FragColor = newTexColor;
}
`,immediateVert:`IN vec3 aPosition;
IN vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform float uResolution;
uniform float uPointSize;

OUT vec4 vColor;
void main(void) {
  vec4 positionVec4 = vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vColor = aVertexColor;
  gl_PointSize = uPointSize;
}
`,vertexColorVert:`IN vec3 aPosition;
IN vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;

OUT vec4 vColor;

void main(void) {
  vec4 positionVec4 = vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vColor = aVertexColor;
}
`,vertexColorFrag:`IN vec4 vColor;
void main(void) {
  OUT_COLOR = vec4(vColor.rgb, 1.) * vColor.a;
}
`,normalVert:`IN vec3 aPosition;
IN vec3 aNormal;
IN vec2 aTexCoord;
IN vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;

uniform vec4 uMaterialColor;
uniform bool uUseVertexColor;

OUT vec3 vVertexNormal;
OUT highp vec2 vVertTexCoord;
OUT vec4 vColor;

void main(void) {
  vec4 positionVec4 = vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vVertexNormal = normalize(vec3( uNormalMatrix * aNormal ));
  vVertTexCoord = aTexCoord;
  vColor = (uUseVertexColor ? aVertexColor : uMaterialColor);
}
`,normalFrag:`IN vec3 vVertexNormal;
void main(void) {
  OUT_COLOR = vec4(vVertexNormal, 1.0);
}
`,basicFrag:`IN vec4 vColor;
void main(void) {
  OUT_COLOR = vec4(vColor.rgb, 1.) * vColor.a;
}
`,lightVert:O+`// include lighting.glgl

IN vec3 aPosition;
IN vec3 aNormal;
IN vec2 aTexCoord;
IN vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;

uniform bool uUseVertexColor;
uniform vec4 uMaterialColor;

OUT highp vec2 vVertTexCoord;
OUT vec3 vDiffuseColor;
OUT vec3 vSpecularColor;
OUT vec4 vColor;

void main(void) {

  vec4 viewModelPosition = uModelViewMatrix * vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * viewModelPosition;

  vec3 vertexNormal = normalize(uNormalMatrix * aNormal);
  vVertTexCoord = aTexCoord;

  totalLight(viewModelPosition.xyz, vertexNormal, vDiffuseColor, vSpecularColor);

  for (int i = 0; i < 8; i++) {
    if (i < uAmbientLightCount) {
      vDiffuseColor += uAmbientColor[i];
    }
  }
  
  vColor = (uUseVertexColor ? aVertexColor : uMaterialColor);
}
`,lightTextureFrag:`uniform vec4 uTint;
uniform sampler2D uSampler;
uniform bool isTexture;
uniform bool uEmissive;

IN highp vec2 vVertTexCoord;
IN vec3 vDiffuseColor;
IN vec3 vSpecularColor;
IN vec4 vColor;

void main(void) {
  if(uEmissive && !isTexture) {
    OUT_COLOR = vColor;
  }
  else {
    vec4 baseColor = isTexture
      // Textures come in with premultiplied alpha. To apply tint and still have
      // premultiplied alpha output, we need to multiply the RGB channels by the
      // tint RGB, and all channels by the tint alpha.
      ? TEXTURE(uSampler, vVertTexCoord) * vec4(uTint.rgb/255., 1.) * (uTint.a/255.)
      // Colors come in with unmultiplied alpha, so we need to multiply the RGB
      // channels by alpha to convert it to premultiplied alpha.
      : vec4(vColor.rgb * vColor.a, vColor.a);
    OUT_COLOR = vec4(baseColor.rgb * vDiffuseColor + vSpecularColor, baseColor.a);
  }
}
`,phongVert:`precision highp int;

IN vec3 aPosition;
IN vec3 aNormal;
IN vec2 aTexCoord;
IN vec4 aVertexColor;

uniform vec3 uAmbientColor[5];

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;
uniform int uAmbientLightCount;

uniform bool uUseVertexColor;
uniform vec4 uMaterialColor;

OUT vec3 vNormal;
OUT vec2 vTexCoord;
OUT vec3 vViewPosition;
OUT vec3 vAmbientColor;
OUT vec4 vColor;

void main(void) {

  vec4 viewModelPosition = uModelViewMatrix * vec4(aPosition, 1.0);

  // Pass varyings to fragment shader
  vViewPosition = viewModelPosition.xyz;
  gl_Position = uProjectionMatrix * viewModelPosition;  

  vNormal = uNormalMatrix * aNormal;
  vTexCoord = aTexCoord;

  // TODO: this should be a uniform
  vAmbientColor = vec3(0.0);
  for (int i = 0; i < 5; i++) {
    if (i < uAmbientLightCount) {
      vAmbientColor += uAmbientColor[i];
    }
  }
  
  vColor = (uUseVertexColor ? aVertexColor : uMaterialColor);
}
`,phongFrag:O+`// include lighting.glsl
precision highp int;

uniform bool uHasSetAmbient;
uniform vec4 uSpecularMatColor;
uniform vec4 uAmbientMatColor;
uniform vec4 uEmissiveMatColor;

uniform vec4 uTint;
uniform sampler2D uSampler;
uniform bool isTexture;

IN vec3 vNormal;
IN vec2 vTexCoord;
IN vec3 vViewPosition;
IN vec3 vAmbientColor;
IN vec4 vColor;

void main(void) {

  vec3 diffuse;
  vec3 specular;
  totalLight(vViewPosition, normalize(vNormal), diffuse, specular);

  // Calculating final color as result of all lights (plus emissive term).

  vec4 baseColor = isTexture
    // Textures come in with premultiplied alpha. To apply tint and still have
    // premultiplied alpha output, we need to multiply the RGB channels by the
    // tint RGB, and all channels by the tint alpha.
    ? TEXTURE(uSampler, vTexCoord) * vec4(uTint.rgb/255., 1.) * (uTint.a/255.)
    // Colors come in with unmultiplied alpha, so we need to multiply the RGB
    // channels by alpha to convert it to premultiplied alpha.
    : vec4(vColor.rgb * vColor.a, vColor.a);
  OUT_COLOR = vec4(diffuse * baseColor.rgb + 
                    vAmbientColor * (
                      uHasSetAmbient ? uAmbientMatColor.rgb : baseColor.rgb
                    ) + 
                    specular * uSpecularMatColor.rgb + 
                    uEmissiveMatColor.rgb, baseColor.a);
}
`,fontVert:`IN vec3 aPosition;
IN vec2 aTexCoord;
uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;

uniform vec4 uGlyphRect;
uniform float uGlyphOffset;

OUT vec2 vTexCoord;
OUT float w;

void main() {
  vec4 positionVec4 = vec4(aPosition, 1.0);

  // scale by the size of the glyph's rectangle
  positionVec4.xy *= uGlyphRect.zw - uGlyphRect.xy;

  // Expand glyph bounding boxes by 1px on each side to give a bit of room
  // for antialiasing
  vec3 newOrigin = (uModelViewMatrix * vec4(0., 0., 0., 1.)).xyz;
  vec3 newDX = (uModelViewMatrix * vec4(1., 0., 0., 1.)).xyz;
  vec3 newDY = (uModelViewMatrix * vec4(0., 1., 0., 1.)).xyz;
  vec2 pixelScale = vec2(
    1. / length(newOrigin - newDX),
    1. / length(newOrigin - newDY)
  );
  vec2 offset = pixelScale * normalize(aTexCoord - vec2(0.5, 0.5)) * vec2(1., -1.);
  vec2 textureOffset = offset * (1. / vec2(
    uGlyphRect.z - uGlyphRect.x,
    uGlyphRect.w - uGlyphRect.y
  ));

  // move to the corner of the glyph
  positionVec4.xy += uGlyphRect.xy;

  // move to the letter's line offset
  positionVec4.x += uGlyphOffset;

  positionVec4.xy += offset;
  
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vTexCoord = aTexCoord + textureOffset;
  w = gl_Position.w;
}
`,fontFrag:`#ifndef WEBGL2
#extension GL_OES_standard_derivatives : enable
#endif

#if 0
  // simulate integer math using floats
	#define int float
	#define ivec2 vec2
	#define INT(x) float(x)

	int ifloor(float v) { return floor(v); }
	ivec2 ifloor(vec2 v) { return floor(v); }

#else
  // use native integer math
	precision highp int;
	#define INT(x) x

	int ifloor(float v) { return int(v); }
	int ifloor(int v) { return v; }
	ivec2 ifloor(vec2 v) { return ivec2(v); }

#endif

uniform sampler2D uSamplerStrokes;
uniform sampler2D uSamplerRowStrokes;
uniform sampler2D uSamplerRows;
uniform sampler2D uSamplerColStrokes;
uniform sampler2D uSamplerCols;

uniform ivec2 uStrokeImageSize;
uniform ivec2 uCellsImageSize;
uniform ivec2 uGridImageSize;

uniform ivec2 uGridOffset;
uniform ivec2 uGridSize;
uniform vec4 uMaterialColor;

IN vec2 vTexCoord;

// some helper functions
int ROUND(float v) { return ifloor(v + 0.5); }
ivec2 ROUND(vec2 v) { return ifloor(v + 0.5); }
float saturate(float v) { return clamp(v, 0.0, 1.0); }
vec2 saturate(vec2 v) { return clamp(v, 0.0, 1.0); }

int mul(float v1, int v2) {
  return ifloor(v1 * float(v2));
}

ivec2 mul(vec2 v1, ivec2 v2) {
  return ifloor(v1 * vec2(v2) + 0.5);
}

// unpack a 16-bit integer from a float vec2
int getInt16(vec2 v) {
  ivec2 iv = ROUND(v * 255.0);
  return iv.x * INT(128) + iv.y;
}

vec2 pixelScale;
vec2 coverage = vec2(0.0);
vec2 weight = vec2(0.5);
const float minDistance = 1.0/8192.0;
const float hardness = 1.05; // amount of antialias

// the maximum number of curves in a glyph
const int N = INT(250);

// retrieves an indexed pixel from a sampler
vec4 getTexel(sampler2D sampler, int pos, ivec2 size) {
  int width = size.x;
  int y = ifloor(pos / width);
  int x = pos - y * width;  // pos % width

  return TEXTURE(sampler, (vec2(x, y) + 0.5) / vec2(size));
}

void calulateCrossings(vec2 p0, vec2 p1, vec2 p2, out vec2 C1, out vec2 C2) {

  // get the coefficients of the quadratic in t
  vec2 a = p0 - p1 * 2.0 + p2;
  vec2 b = p0 - p1;
  vec2 c = p0 - vTexCoord;

  // found out which values of 't' it crosses the axes
  vec2 surd = sqrt(max(vec2(0.0), b * b - a * c));
  vec2 t1 = ((b - surd) / a).yx;
  vec2 t2 = ((b + surd) / a).yx;

  // approximate straight lines to avoid rounding errors
  if (abs(a.y) < 0.001)
    t1.x = t2.x = c.y / (2.0 * b.y);

  if (abs(a.x) < 0.001)
    t1.y = t2.y = c.x / (2.0 * b.x);

  // plug into quadratic formula to find the corrdinates of the crossings
  C1 = ((a * t1 - b * 2.0) * t1 + c) * pixelScale;
  C2 = ((a * t2 - b * 2.0) * t2 + c) * pixelScale;
}

void coverageX(vec2 p0, vec2 p1, vec2 p2) {

  vec2 C1, C2;
  calulateCrossings(p0, p1, p2, C1, C2);

  // determine on which side of the x-axis the points lie
  bool y0 = p0.y > vTexCoord.y;
  bool y1 = p1.y > vTexCoord.y;
  bool y2 = p2.y > vTexCoord.y;

  // could web be under the curve (after t1)?
  if (y1 ? !y2 : y0) {
    // add the coverage for t1
    coverage.x += saturate(C1.x + 0.5);
    // calculate the anti-aliasing for t1
    weight.x = min(weight.x, abs(C1.x));
  }

  // are we outside the curve (after t2)?
  if (y1 ? !y0 : y2) {
    // subtract the coverage for t2
    coverage.x -= saturate(C2.x + 0.5);
    // calculate the anti-aliasing for t2
    weight.x = min(weight.x, abs(C2.x));
  }
}

// this is essentially the same as coverageX, but with the axes swapped
void coverageY(vec2 p0, vec2 p1, vec2 p2) {

  vec2 C1, C2;
  calulateCrossings(p0, p1, p2, C1, C2);

  bool x0 = p0.x > vTexCoord.x;
  bool x1 = p1.x > vTexCoord.x;
  bool x2 = p2.x > vTexCoord.x;

  if (x1 ? !x2 : x0) {
    coverage.y -= saturate(C1.y + 0.5);
    weight.y = min(weight.y, abs(C1.y));
  }

  if (x1 ? !x0 : x2) {
    coverage.y += saturate(C2.y + 0.5);
    weight.y = min(weight.y, abs(C2.y));
  }
}

void main() {

  // calculate the pixel scale based on screen-coordinates
  pixelScale = hardness / fwidth(vTexCoord);

  // which grid cell is this pixel in?
  ivec2 gridCoord = ifloor(vTexCoord * vec2(uGridSize));

  // intersect curves in this row
  {
    // the index into the row info bitmap
    int rowIndex = gridCoord.y + uGridOffset.y;
    // fetch the info texel
    vec4 rowInfo = getTexel(uSamplerRows, rowIndex, uGridImageSize);
    // unpack the rowInfo
    int rowStrokeIndex = getInt16(rowInfo.xy);
    int rowStrokeCount = getInt16(rowInfo.zw);

    for (int iRowStroke = INT(0); iRowStroke < N; iRowStroke++) {
      if (iRowStroke >= rowStrokeCount)
        break;

      // each stroke is made up of 3 points: the start and control point
      // and the start of the next curve.
      // fetch the indices of this pair of strokes:
      vec4 strokeIndices = getTexel(uSamplerRowStrokes, rowStrokeIndex++, uCellsImageSize);

      // unpack the stroke index
      int strokePos = getInt16(strokeIndices.xy);

      // fetch the two strokes
      vec4 stroke0 = getTexel(uSamplerStrokes, strokePos + INT(0), uStrokeImageSize);
      vec4 stroke1 = getTexel(uSamplerStrokes, strokePos + INT(1), uStrokeImageSize);

      // calculate the coverage
      coverageX(stroke0.xy, stroke0.zw, stroke1.xy);
    }
  }

  // intersect curves in this column
  {
    int colIndex = gridCoord.x + uGridOffset.x;
    vec4 colInfo = getTexel(uSamplerCols, colIndex, uGridImageSize);
    int colStrokeIndex = getInt16(colInfo.xy);
    int colStrokeCount = getInt16(colInfo.zw);
    
    for (int iColStroke = INT(0); iColStroke < N; iColStroke++) {
      if (iColStroke >= colStrokeCount)
        break;

      vec4 strokeIndices = getTexel(uSamplerColStrokes, colStrokeIndex++, uCellsImageSize);

      int strokePos = getInt16(strokeIndices.xy);
      vec4 stroke0 = getTexel(uSamplerStrokes, strokePos + INT(0), uStrokeImageSize);
      vec4 stroke1 = getTexel(uSamplerStrokes, strokePos + INT(1), uStrokeImageSize);
      coverageY(stroke0.xy, stroke0.zw, stroke1.xy);
    }
  }

  weight = saturate(1.0 - weight * 2.0);
  float distance = max(weight.x + weight.y, minDistance); // manhattan approx.
  float antialias = abs(dot(coverage, weight) / distance);
  float cover = min(abs(coverage.x), abs(coverage.y));
  OUT_COLOR = vec4(uMaterialColor.rgb, 1.) * uMaterialColor.a;
  OUT_COLOR *= saturate(max(antialias, cover));
}
`,lineVert:N+`/*
  Part of the Processing project - http://processing.org
  Copyright (c) 2012-15 The Processing Foundation
  Copyright (c) 2004-12 Ben Fry and Casey Reas
  Copyright (c) 2001-04 Massachusetts Institute of Technology
  This library is free software; you can redistribute it and/or
  modify it under the terms of the GNU Lesser General Public
  License as published by the Free Software Foundation, version 2.1.
  This library is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
  Lesser General Public License for more details.
  You should have received a copy of the GNU Lesser General
  Public License along with this library; if not, write to the
  Free Software Foundation, Inc., 59 Temple Place, Suite 330,
  Boston, MA  02111-1307  USA
*/

#define PROCESSING_LINE_SHADER

precision mediump int;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform float uStrokeWeight;

uniform bool uUseLineColor;
uniform vec4 uMaterialColor;

uniform vec4 uViewport;
uniform int uPerspective;
uniform int uStrokeJoin;

IN vec4 aPosition;
IN vec3 aTangentIn;
IN vec3 aTangentOut;
IN float aSide;
IN vec4 aVertexColor;

OUT vec4 vColor;
OUT vec2 vTangent;
OUT vec2 vCenter;
OUT vec2 vPosition;
OUT float vMaxDist;
OUT float vCap;
OUT float vJoin;

vec2 lineIntersection(vec2 aPoint, vec2 aDir, vec2 bPoint, vec2 bDir) {
  // Rotate and translate so a starts at the origin and goes out to the right
  bPoint -= aPoint;
  vec2 rotatedBFrom = vec2(
    bPoint.x*aDir.x + bPoint.y*aDir.y,
    bPoint.y*aDir.x - bPoint.x*aDir.y
  );
  vec2 bTo = bPoint + bDir;
  vec2 rotatedBTo = vec2(
    bTo.x*aDir.x + bTo.y*aDir.y,
    bTo.y*aDir.x - bTo.x*aDir.y
  );
  float intersectionDistance =
    rotatedBTo.x + (rotatedBFrom.x - rotatedBTo.x) * rotatedBTo.y /
    (rotatedBTo.y - rotatedBFrom.y);
  return aPoint + aDir * intersectionDistance;
}

void main() {
  // Caps have one of either the in or out tangent set to 0
  vCap = (aTangentIn == vec3(0.)) != (aTangentOut == (vec3(0.)))
    ? 1. : 0.;

  // Joins have two unique, defined tangents
  vJoin = (
    aTangentIn != vec3(0.) &&
    aTangentOut != vec3(0.) &&
    aTangentIn != aTangentOut
  ) ? 1. : 0.;

  vec4 posp = uModelViewMatrix * aPosition;
  vec4 posqIn = uModelViewMatrix * (aPosition + vec4(aTangentIn, 0));
  vec4 posqOut = uModelViewMatrix * (aPosition + vec4(aTangentOut, 0));

  float facingCamera = pow(
    // The word space tangent's z value is 0 if it's facing the camera
    abs(normalize(posqIn-posp).z),

    // Using pow() here to ramp \`facingCamera\` up from 0 to 1 really quickly
    // so most lines get scaled and don't get clipped
    0.25
  );

  // using a scale <1 moves the lines towards the camera
  // in order to prevent popping effects due to half of
  // the line disappearing behind the geometry faces.
  float scale = mix(1., 0.995, facingCamera);

  // Moving vertices slightly toward the camera
  // to avoid depth-fighting with the fill triangles.
  // Discussed here:
  // http://www.opengl.org/discussion_boards/ubbthreads.php?ubb=showflat&Number=252848  
  posp.xyz = posp.xyz * scale;
  posqIn.xyz = posqIn.xyz * scale;
  posqOut.xyz = posqOut.xyz * scale;

  vec4 p = uProjectionMatrix * posp;
  vec4 qIn = uProjectionMatrix * posqIn;
  vec4 qOut = uProjectionMatrix * posqOut;
  vCenter = p.xy;

  // formula to convert from clip space (range -1..1) to screen space (range 0..[width or height])
  // screen_p = (p.xy/p.w + <1,1>) * 0.5 * uViewport.zw

  // prevent division by W by transforming the tangent formula (div by 0 causes
  // the line to disappear, see https://github.com/processing/processing/issues/5183)
  // t = screen_q - screen_p
  //
  // tangent is normalized and we don't care which aDirection it points to (+-)
  // t = +- normalize( screen_q - screen_p )
  // t = +- normalize( (q.xy/q.w+<1,1>)*0.5*uViewport.zw - (p.xy/p.w+<1,1>)*0.5*uViewport.zw )
  //
  // extract common factor, <1,1> - <1,1> cancels out
  // t = +- normalize( (q.xy/q.w - p.xy/p.w) * 0.5 * uViewport.zw )
  //
  // convert to common divisor
  // t = +- normalize( ((q.xy*p.w - p.xy*q.w) / (p.w*q.w)) * 0.5 * uViewport.zw )
  //
  // remove the common scalar divisor/factor, not needed due to normalize and +-
  // (keep uViewport - can't remove because it has different components for x and y
  //  and corrects for aspect ratio, see https://github.com/processing/processing/issues/5181)
  // t = +- normalize( (q.xy*p.w - p.xy*q.w) * uViewport.zw )

  vec2 tangentIn = normalize((qIn.xy*p.w - p.xy*qIn.w) * uViewport.zw);
  vec2 tangentOut = normalize((qOut.xy*p.w - p.xy*qOut.w) * uViewport.zw);

  vec2 curPerspScale;
  if(uPerspective == 1) {
    // Perspective ---
    // convert from world to clip by multiplying with projection scaling factor
    // to get the right thickness (see https://github.com/processing/processing/issues/5182)

    // The y value of the projection matrix may be flipped if rendering to a Framebuffer.
    // Multiplying again by its sign here negates the flip to get just the scale.
    curPerspScale = (uProjectionMatrix * vec4(1, sign(uProjectionMatrix[1][1]), 0, 0)).xy;
  } else {
    // No Perspective ---
    // multiply by W (to cancel out division by W later in the pipeline) and
    // convert from screen to clip (derived from clip to screen above)
    curPerspScale = p.w / (0.5 * uViewport.zw);
  }

  vec2 offset;
  if (vJoin == 1.) {
    vTangent = normalize(tangentIn + tangentOut);
    vec2 normalIn = vec2(-tangentIn.y, tangentIn.x);
    vec2 normalOut = vec2(-tangentOut.y, tangentOut.x);
    float side = sign(aSide);
    float sideEnum = abs(aSide);

    // We generate vertices for joins on either side of the centerline, but
    // the "elbow" side is the only one needing a join. By not setting the
    // offset for the other side, all its vertices will end up in the same
    // spot and not render, effectively discarding it.
    if (sign(dot(tangentOut, vec2(-tangentIn.y, tangentIn.x))) != side) {
      // Side enums:
      //   1: the side going into the join
      //   2: the middle of the join
      //   3: the side going out of the join
      if (sideEnum == 2.) {
        // Calculate the position + tangent on either side of the join, and
        // find where the lines intersect to find the elbow of the join
        vec2 c = (posp.xy/posp.w + vec2(1.,1.)) * 0.5 * uViewport.zw;
        vec2 intersection = lineIntersection(
          c + (side * normalIn * uStrokeWeight / 2.),
          tangentIn,
          c + (side * normalOut * uStrokeWeight / 2.),
          tangentOut
        );
        offset = (intersection - c);

        // When lines are thick and the angle of the join approaches 180, the
        // elbow might be really far from the center. We'll apply a limit to
        // the magnitude to avoid lines going across the whole screen when this
        // happens.
        float mag = length(offset);
        float maxMag = 3. * uStrokeWeight;
        if (mag > maxMag) {
          offset *= maxMag / mag;
        }
      } else if (sideEnum == 1.) {
        offset = side * normalIn * uStrokeWeight / 2.;
      } else if (sideEnum == 3.) {
        offset = side * normalOut * uStrokeWeight / 2.;
      }
    }
    if (uStrokeJoin == STROKE_JOIN_BEVEL) {
      vec2 avgNormal = vec2(-vTangent.y, vTangent.x);
      vMaxDist = abs(dot(avgNormal, normalIn * uStrokeWeight / 2.));
    } else {
      vMaxDist = uStrokeWeight / 2.;
    }
  } else {
    vec2 tangent = aTangentIn == vec3(0.) ? tangentOut : tangentIn;
    vTangent = tangent;
    vec2 normal = vec2(-tangent.y, tangent.x);

    float normalOffset = sign(aSide);
    // Caps will have side values of -2 or 2 on the edge of the cap that
    // extends out from the line
    float tangentOffset = abs(aSide) - 1.;
    offset = (normal * normalOffset + tangent * tangentOffset) *
      uStrokeWeight * 0.5;
    vMaxDist = uStrokeWeight / 2.;
  }
  vPosition = vCenter + offset;

  gl_Position.xy = p.xy + offset.xy * curPerspScale;
  gl_Position.zw = p.zw;
  
  vColor = (uUseLineColor ? aVertexColor : uMaterialColor);
}
`,lineFrag:N+`precision mediump int;

uniform vec4 uMaterialColor;
uniform int uStrokeCap;
uniform int uStrokeJoin;
uniform float uStrokeWeight;

IN vec4 vColor;
IN vec2 vTangent;
IN vec2 vCenter;
IN vec2 vPosition;
IN float vMaxDist;
IN float vCap;
IN float vJoin;

float distSquared(vec2 a, vec2 b) {
  vec2 aToB = b - a;
  return dot(aToB, aToB);
}

void main() {
  if (vCap > 0.) {
    if (
      uStrokeCap == STROKE_CAP_ROUND &&
      distSquared(vPosition, vCenter) > uStrokeWeight * uStrokeWeight * 0.25
    ) {
      discard;
    } else if (
      uStrokeCap == STROKE_CAP_SQUARE &&
      dot(vPosition - vCenter, vTangent) > 0.
    ) {
      discard;
    }
    // Use full area for PROJECT
  } else if (vJoin > 0.) {
    if (
      uStrokeJoin == STROKE_JOIN_ROUND &&
      distSquared(vPosition, vCenter) > uStrokeWeight * uStrokeWeight * 0.25
    ) {
      discard;
    } else if (uStrokeJoin == STROKE_JOIN_BEVEL) {
      vec2 normal = vec2(-vTangent.y, vTangent.x);
      if (abs(dot(vPosition - vCenter, normal)) > vMaxDist) {
        discard;
      }
    }
    // Use full area for MITER
  }
  OUT_COLOR = vec4(vColor.rgb, 1.) * vColor.a;
}
`,pointVert:`IN vec3 aPosition;
uniform float uPointSize;
OUT float vStrokeWeight;
uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
void main() {
	vec4 positionVec4 =  vec4(aPosition, 1.0);
	gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
	gl_PointSize = uPointSize;
	vStrokeWeight = uPointSize;
}
`,pointFrag:`precision mediump int;
uniform vec4 uMaterialColor;
IN float vStrokeWeight;

void main(){
  float mask = 0.0;

  // make a circular mask using the gl_PointCoord (goes from 0 - 1 on a point)
  // might be able to get a nicer edge on big strokeweights with smoothstep but slightly less performant

  mask = step(0.98, length(gl_PointCoord * 2.0 - 1.0));

  // if strokeWeight is 1 or less lets just draw a square
  // this prevents weird artifacting from carving circles when our points are really small
  // if strokeWeight is larger than 1, we just use it as is

  mask = mix(0.0, mask, clamp(floor(vStrokeWeight - 0.5),0.0,1.0));

  // throw away the borders of the mask
  // otherwise we get weird alpha blending issues

  if(mask > 0.98){
    discard;
  }

  OUT_COLOR = vec4(uMaterialColor.rgb, 1.) * uMaterialColor.a;
}
`,imageLightVert:`precision highp float;
attribute vec3 aPosition;
attribute vec3 aNormal;
attribute vec2 aTexCoord;

varying vec3 localPos;
varying vec3 vWorldNormal;
varying vec3 vWorldPosition;
varying vec2 vTexCoord;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;

void main() {
  // Multiply the position by the matrix.
  vec4 viewModelPosition = uModelViewMatrix * vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * viewModelPosition;  
  
  // orient the normals and pass to the fragment shader
  vWorldNormal = uNormalMatrix * aNormal;
  
  // send the view position to the fragment shader
  vWorldPosition = (uModelViewMatrix * vec4(aPosition, 1.0)).xyz;
  
  localPos = vWorldPosition;
  vTexCoord = aTexCoord;
}


/*
in the vertex shader we'll compute the world position and world oriented normal of the vertices and pass those to the fragment shader as varyings.
*/
`,imageLightDiffusedFrag:`precision highp float;
varying vec3 localPos;

// the HDR cubemap converted (can be from an equirectangular environment map.)
uniform sampler2D environmentMap;
varying vec2 vTexCoord;

const float PI = 3.14159265359;

vec2 nTOE( vec3 v ){
  // x = r sin(phi) cos(theta)   
  // y = r cos(phi)  
  // z = r sin(phi) sin(theta)
  float phi = acos( v.y );
  // if phi is 0, then there are no x, z components
  float theta = 0.0;
  // else 
  theta = acos(v.x / sin(phi));
  float sinTheta = v.z / sin(phi);
  if (sinTheta < 0.0) {
    // Turn it into -theta, but in the 0-2PI range
    theta = 2.0 * PI - theta;
  }
  theta = theta / (2.0 * 3.14159);
  phi = phi / 3.14159 ;
  
  vec2 angles = vec2( phi, theta );
  return angles;
}

float random(vec2 p) {
  vec3 p3  = fract(vec3(p.xyx) * .1031);
  p3 += dot(p3, p3.yzx + 33.33);
  return fract((p3.x + p3.y) * p3.z);
}

void main()
{   	 
	// the sample direction equals the hemisphere's orientation
  float phi = vTexCoord.x * 2.0 * PI;
  float theta = vTexCoord.y * PI;
  float x = sin(theta) * cos(phi);
  float y = sin(theta) * sin(phi);
  float z = cos(theta);
  vec3 normal = vec3( x, y, z);

	// Discretely sampling the hemisphere given the integral's
  // spherical coordinates translates to the following fragment code:
	vec3 irradiance = vec3(0.0);  
	vec3 up	= vec3(0.0, 1.0, 0.0);
	vec3 right = normalize(cross(up, normal));
	up = normalize(cross(normal, right));

	//  We specify a fixed sampleDelta delta value to traverse
  // the hemisphere; decreasing or increasing the sample delta
  // will increase or decrease the accuracy respectively.
	const float sampleDelta = 0.100;
	float nrSamples = 0.0;
  float randomOffset = random(gl_FragCoord.xy) * sampleDelta;
	for(float rawPhi = 0.0; rawPhi < 2.0 * PI; rawPhi += sampleDelta)
	{
    float phi = rawPhi + randomOffset;
    for(float rawTheta = 0.0; rawTheta < ( 0.5 ) * PI; rawTheta += sampleDelta)
    {
      float theta = rawTheta + randomOffset;
      // spherical to cartesian (in tangent space) // tangent space to world // add each sample result to irradiance
      float x = sin(theta) * cos(phi);
      float y = sin(theta) * sin(phi);
      float z = cos(theta);
      vec3 tangentSample = vec3( x, y, z);
      
      vec3 sampleVec = tangentSample.x * right + tangentSample.y * up + tangentSample.z * normal;
        irradiance += (texture2D(environmentMap, nTOE(sampleVec)).xyz) * cos(theta) * sin(theta);
      nrSamples++;
    }
	}
	// divide by the total number of samples taken, giving us the average sampled irradiance.
	irradiance = PI * irradiance * (1.0 / float(nrSamples )) ;
  
 
	gl_FragColor = vec4(irradiance, 1.0);
}`,imageLightSpecularFrag:`precision highp float;\r
varying vec3 localPos;\r
varying vec2 vTexCoord;\r
\r
// our texture\r
uniform sampler2D environmentMap;\r
uniform float roughness;\r
\r
const float PI = 3.14159265359;\r
\r
float VanDerCorput(int bits);\r
vec2 HammersleyNoBitOps(int i, int N);\r
vec3 ImportanceSampleGGX(vec2 Xi, vec3 N, float roughness);\r
\r
\r
vec2 nTOE( vec3 v ){\r
  // x = r sin(phi) cos(theta)   \r
  // y = r cos(phi)  \r
  // z = r sin(phi) sin(theta)\r
  float phi = acos( v.y );\r
  // if phi is 0, then there are no x, z components\r
  float theta = 0.0;\r
  // else \r
  theta = acos(v.x / sin(phi));\r
  float sinTheta = v.z / sin(phi);\r
  if (sinTheta < 0.0) {\r
    // Turn it into -theta, but in the 0-2PI range\r
    theta = 2.0 * PI - theta;\r
  }\r
  theta = theta / (2.0 * 3.14159);\r
  phi = phi / 3.14159 ;\r
  \r
  vec2 angles = vec2( phi, theta );\r
  return angles;\r
}\r
\r
\r
void main(){\r
  const int SAMPLE_COUNT = 400; // 4096\r
  int lowRoughnessLimit = int(pow(2.0,(roughness+0.1)*20.0));\r
  float totalWeight = 0.0;\r
  vec3 prefilteredColor = vec3(0.0);\r
  float phi = vTexCoord.x * 2.0 * PI;\r
  float theta = vTexCoord.y * PI;\r
  float x = sin(theta) * cos(phi);\r
  float y = sin(theta) * sin(phi);\r
  float z = cos(theta);\r
  vec3 N = vec3(x,y,z);\r
  vec3 V = N;\r
  for (int i = 0; i < SAMPLE_COUNT; ++i)\r
  {\r
    // break at smaller sample numbers for low roughness levels\r
    if(i == lowRoughnessLimit)\r
    {\r
      break;\r
    }\r
    vec2 Xi = HammersleyNoBitOps(i, SAMPLE_COUNT);\r
    vec3 H = ImportanceSampleGGX(Xi, N, roughness);\r
    vec3 L = normalize(2.0 * dot(V, H) * H - V);\r
\r
    float NdotL = max(dot(N, L), 0.0);\r
    if (NdotL > 0.0)\r
    {\r
      prefilteredColor += texture2D(environmentMap, nTOE(L)).xyz * NdotL;\r
      totalWeight += NdotL;\r
    }\r
  }\r
  prefilteredColor = prefilteredColor / totalWeight;\r
\r
  gl_FragColor = vec4(prefilteredColor, 1.0);\r
}\r
\r
vec3 ImportanceSampleGGX(vec2 Xi, vec3 N, float roughness){\r
  float a = roughness * roughness;\r
\r
  float phi = 2.0 * PI * Xi.x;\r
  float cosTheta = sqrt((1.0 - Xi.y) / (1.0 + (a * a - 1.0) * Xi.y));\r
  float sinTheta = sqrt(1.0 - cosTheta * cosTheta);\r
  // from spherical coordinates to cartesian coordinates\r
  vec3 H;\r
  H.x = cos(phi) * sinTheta;\r
  H.y = sin(phi) * sinTheta;\r
  H.z = cosTheta;\r
\r
  // from tangent-space vector to world-space sample vector\r
  vec3 up = abs(N.z) < 0.999 ? vec3(0.0, 0.0, 1.0) : vec3(1.0, 0.0, 0.0);\r
  vec3 tangent = normalize(cross(up, N));\r
  vec3 bitangent = cross(N, tangent);\r
\r
  vec3 sampleVec = tangent * H.x + bitangent * H.y + N * H.z;\r
  return normalize(sampleVec);\r
}\r
\r
\r
float VanDerCorput(int n, int base)\r
{\r
#ifdef WEBGL2\r
\r
    uint bits = uint(n);\r
    bits = (bits << 16u) | (bits >> 16u);\r
    bits = ((bits & 0x55555555u) << 1u) | ((bits & 0xAAAAAAAAu) >> 1u);\r
    bits = ((bits & 0x33333333u) << 2u) | ((bits & 0xCCCCCCCCu) >> 2u);\r
    bits = ((bits & 0x0F0F0F0Fu) << 4u) | ((bits & 0xF0F0F0F0u) >> 4u);\r
    bits = ((bits & 0x00FF00FFu) << 8u) | ((bits & 0xFF00FF00u) >> 8u);\r
    return float(bits) * 2.3283064365386963e-10; // / 0x100000000\r
\r
#else\r
\r
  float invBase = 1.0 / float(base);\r
  float denom = 1.0;\r
  float result = 0.0;\r
\r
\r
  for (int i = 0; i < 32; ++i)\r
  {\r
        if (n > 0)\r
        {\r
        denom = mod(float(n), 2.0);\r
        result += denom * invBase;\r
        invBase = invBase / 2.0;\r
        n = int(float(n) / 2.0);\r
        }\r
  }\r
\r
\r
  return result;\r
\r
#endif\r
}\r
\r
vec2 HammersleyNoBitOps(int i, int N)\r
{\r
  return vec2(float(i) / float(N), VanDerCorput(i, 2));\r
}\r
`},X=W.sphereMappingFrag;for(I in W)W[I]=`#ifdef WEBGL2

#define IN in
#define OUT out

#ifdef FRAGMENT_SHADER
out vec4 outColor;
#define OUT_COLOR outColor
#endif
#define TEXTURE texture

#else

#ifdef FRAGMENT_SHADER
#define IN varying
#else
#define IN attribute
#endif
#define OUT varying
#define TEXTURE texture2D

#ifdef FRAGMENT_SHADER
#define OUT_COLOR gl_FragColor
#endif

#endif
`+W[I];R(O={},u.GRAY,`precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;

float luma(vec3 color) {
  // weighted grayscale with luminance values
  return dot(color, vec3(0.2126, 0.7152, 0.0722));
}

void main() {
  vec4 tex = texture2D(tex0, vTexCoord);
  float gray = luma(tex.rgb);
  gl_FragColor = vec4(gray, gray, gray, tex.a);
}
`),R(O,u.ERODE,`// Reduces the bright areas in an image

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;
uniform vec2 texelSize;

float luma(vec3 color) {
  // weighted grayscale with luminance values
  // weights 77, 151, 28 taken from src/image/filters.js
  return dot(color, vec3(0.300781, 0.589844, 0.109375));
}

void main() {
  vec4 color = texture2D(tex0, vTexCoord);
  float lum = luma(color.rgb);

  // set current color as the darkest neighbor color

  vec4 neighbors[4];
  neighbors[0] = texture2D(tex0, vTexCoord + vec2( texelSize.x, 0.0));
  neighbors[1] = texture2D(tex0, vTexCoord + vec2(-texelSize.x, 0.0));
  neighbors[2] = texture2D(tex0, vTexCoord + vec2(0.0,  texelSize.y));
  neighbors[3] = texture2D(tex0, vTexCoord + vec2(0.0, -texelSize.y));

  for (int i = 0; i < 4; i++) {
    vec4 neighborColor = neighbors[i];
    float neighborLum = luma(neighborColor.rgb);

    if (neighborLum < lum) {
      color = neighborColor;
      lum = neighborLum;
    }
  }

  gl_FragColor = color;
}
`),R(O,u.DILATE,`// Increase the bright areas in an image

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;
uniform vec2 texelSize;

float luma(vec3 color) {
  // weighted grayscale with luminance values
  // weights 77, 151, 28 taken from src/image/filters.js
  return dot(color, vec3(0.300781, 0.589844, 0.109375));
}

void main() {
  vec4 color = texture2D(tex0, vTexCoord);
  float lum = luma(color.rgb);

  // set current color as the brightest neighbor color

  vec4 neighbors[4];
  neighbors[0] = texture2D(tex0, vTexCoord + vec2( texelSize.x, 0.0));
  neighbors[1] = texture2D(tex0, vTexCoord + vec2(-texelSize.x, 0.0));
  neighbors[2] = texture2D(tex0, vTexCoord + vec2(0.0,  texelSize.y));
  neighbors[3] = texture2D(tex0, vTexCoord + vec2(0.0, -texelSize.y));

  for (int i = 0; i < 4; i++) {
    vec4 neighborColor = neighbors[i];
    float neighborLum = luma(neighborColor.rgb);

    if (neighborLum > lum) {
      color = neighborColor;
      lum = neighborLum;
    }
  }

  gl_FragColor = color;
}
`),R(O,u.BLUR,`precision highp float;

// Two-pass blur filter, unweighted kernel.
// See also a similar blur at Adam Ferriss' repo of shader examples:
// https://github.com/aferriss/p5jsShaderExamples/blob/gh-pages/4_image-effects/4-9_single-pass-blur/effect.frag


uniform sampler2D tex0;
varying vec2 vTexCoord;
uniform vec2 direction;
uniform vec2 canvasSize;
uniform float radius;

float random(vec2 p) {
  vec3 p3  = fract(vec3(p.xyx) * .1031);
  p3 += dot(p3, p3.yzx + 33.33);
  return fract((p3.x + p3.y) * p3.z);
}

// This isn't a real Gaussian weight, it's a quadratic weight. It's what the
// CPU mode's blur uses though, so we also use it here to match.
float quadWeight(float x, float e) {
  return pow(e-abs(x), 2.);
}

void main(){
  vec2 uv = vTexCoord;

  // A reasonable maximum number of samples
  const float maxSamples = 64.0;

  float numSamples = floor(7. * radius);
  if (fract(numSamples / 2.) == 0.) {
    numSamples++;
  }
  vec4 avg = vec4(0.0);
  float total = 0.0;

  // Calculate the spacing to avoid skewing if numSamples > maxSamples
  float spacing = 1.0;
  if (numSamples > maxSamples) {
    spacing = numSamples / maxSamples;
    numSamples = maxSamples;
  }

  float randomOffset = (spacing - 1.0) * mix(-0.5, 0.5, random(gl_FragCoord.xy));
  for (float i = 0.0; i < maxSamples; i++) {
    if (i >= numSamples) break;

    float sample = i * spacing - (numSamples - 1.0) * 0.5 * spacing + randomOffset;
    vec2 sampleCoord = uv + vec2(sample, sample) / canvasSize * direction;
    float weight = quadWeight(sample, (numSamples - 1.0) * 0.5 * spacing);

    avg += weight * texture2D(tex0, sampleCoord);
    total += weight;
  }

  avg /= total;
  gl_FragColor = avg;
}
`),R(O,u.POSTERIZE,`// Limit color space for a stylized cartoon / poster effect

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;
uniform float filterParameter;

vec3 quantize(vec3 color, float n) {
  // restrict values to N options/bins
  // and floor each channel to nearest value
  //
  // eg. when N = 5, values = 0.0, 0.25, 0.50, 0.75, 1.0
  // then quantize (0.1, 0.7, 0.9) -> (0.0, 0.5, 1.0)

  color = color * n;
  color = floor(color);
  color = color / (n - 1.0);
  return color;
}

void main() {
  vec4 color = texture2D(tex0, vTexCoord);

  vec3 restrictedColor = quantize(color.rgb / color.a, filterParameter);

  gl_FragColor = vec4(restrictedColor.rgb * color.a, color.a);
}
`),R(O,u.OPAQUE,`// Set alpha channel to entirely opaque

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;

void main() {
  vec4 color = texture2D(tex0, vTexCoord);
  gl_FragColor = vec4(color.rgb / color.a, 1.0);
}
`),R(O,u.INVERT,`// Set each pixel to inverse value
// Note that original INVERT does not change the opacity, so this follows suit

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;

void main() {
vec4 color = texture2D(tex0, vTexCoord);
vec3 origColor = color.rgb / color.a;
vec3 invertedColor = vec3(1.0) - origColor;
gl_FragColor = vec4(invertedColor * color.a, color.a);
}
`),R(O,u.THRESHOLD,`// Convert pixels to either white or black, 
// depending on if their luma is above or below filterParameter

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;
uniform float filterParameter;

float luma(vec3 color) {
  // weighted grayscale with luminance values
  return dot(color, vec3(0.2126, 0.7152, 0.0722));
}

void main() {
  vec4 color = texture2D(tex0, vTexCoord);
  float gray = luma(color.rgb / color.a);
  // floor() used to match src/image/filters.js
  float threshold = floor(filterParameter * 255.0) / 255.0;
  float blackOrWhite = step(threshold, gray);
  gl_FragColor = vec4(vec3(blackOrWhite) * color.a, color.a);
}
`);var J=O;function ee(q,Y,Re,ce,B,U,K,re,ae,pe){var ye=Y.getParameter(Y.FRAMEBUFFER_BINDING),Re=(Y.bindFramebuffer(Y.FRAMEBUFFER,Re),re===Y.RGBA?4:3),Me=U*K*Re,xe=ae===Y.UNSIGNED_BYTE?Uint8Array:Float32Array;if(q instanceof xe&&q.length===Me||(q=new xe(Me)),Y.readPixels(ce,pe?pe-B-K:B,U,K,re,ae,q),Y.bindFramebuffer(Y.FRAMEBUFFER,ye),pe)for(var ve=Math.floor(K/2),ne=new xe(U*Re),Te=0;Te<ve;Te++){var Pe=Te*U*4,Ae=(K-Te-1)*U*4;ne.set(q.subarray(Pe,Pe+4*U)),q.copyWithin(Pe,Ae,Ae+4*U),q.set(ne,Ae)}return q}function V(q,ae,Z,ce,B,U,K){var re=q.getParameter(q.FRAMEBUFFER_BINDING),ae=(q.bindFramebuffer(q.FRAMEBUFFER,ae),B===q.RGBA?4:3),ae=new(U===q.UNSIGNED_BYTE?Uint8Array:Float32Array)(ae);return q.readPixels(Z,K?K-ce-1:ce,1,1,B,U,ae),q.bindFramebuffer(q.FRAMEBUFFER,re),Array.from(ae)}l.default.prototype.setAttributes=function(q,Y){if(this._glAttributes===void 0)console.log("You are trying to use setAttributes on a p5.Graphics object that does not use a WEBGL renderer.");else{var Z=!0;if(Y!==void 0?(this._glAttributes===null&&(this._glAttributes={}),this._glAttributes[q]!==Y&&(this._glAttributes[q]=Y,Z=!1)):q instanceof Object&&this._glAttributes!==q&&(this._glAttributes=q,Z=!1),this._renderer.isP3D&&!Z){if(!this._setupDone){for(var ce in this._renderer.retainedMode.geometry)if(this._renderer.retainedMode.geometry.hasOwnProperty(ce))return void l.default._friendlyError("Sorry, Could not set the attributes, you need to call setAttributes() before calling the other drawing methods in setup()")}this.push(),this._renderer._resetContext(),this.pop(),this._renderer._curCamera&&(this._renderer._curCamera._renderer=this._renderer)}}},l.default.RendererGL=function(q){var Y=ce;if(typeof q!="function"&&q!==null)throw new TypeError("Super expression must either be null or a function");Y.prototype=Object.create(q&&q.prototype,{constructor:{value:Y,writable:!0,configurable:!0}}),q&&x(Y,q);var Z=b(ce);function ce(B,U,K,re){if(this instanceof ce)return(B=Z.call(this,B,U,K))._setAttributeDefaults(U),B._initContext(),B.isP3D=!0,B.geometryBuilder=void 0,B.GL=B.drawingContext,B._pInst._setProperty("drawingContext",B.drawingContext),B._isErasing=!1,B._clipDepths=[],B._isClipApplied=!1,B._stencilTestOn=!1,B._enableLighting=!1,B.ambientLightColors=[],B.mixedAmbientLight=[],B.mixedSpecularColor=[],B.specularColors=[1,1,1],B.directionalLightDirections=[],B.directionalLightDiffuseColors=[],B.directionalLightSpecularColors=[],B.pointLightPositions=[],B.pointLightDiffuseColors=[],B.pointLightSpecularColors=[],B.spotLightPositions=[],B.spotLightDirections=[],B.spotLightDiffuseColors=[],B.spotLightSpecularColors=[],B.spotLightAngle=[],B.spotLightConc=[],B.activeImageLight=null,B.diffusedTextures=new Map,B.specularTextures=new Map,B.drawMode=u.FILL,B.curFillColor=B._cachedFillStyle=[1,1,1,1],B.curAmbientColor=B._cachedFillStyle=[1,1,1,1],B.curSpecularColor=B._cachedFillStyle=[0,0,0,0],B.curEmissiveColor=B._cachedFillStyle=[0,0,0,0],B.curStrokeColor=B._cachedStrokeStyle=[0,0,0,1],B.curBlendMode=u.BLEND,B.preEraseBlend=void 0,B._cachedBlendMode=void 0,B.webglVersion===u.WEBGL2?B.blendExt=B.GL:B.blendExt=B.GL.getExtension("EXT_blend_minmax"),B._isBlending=!1,B._hasSetAmbient=!1,B._useSpecularMaterial=!1,B._useEmissiveMaterial=!1,B._useNormalMaterial=!1,B._useShininess=1,B._useMetalness=0,B._useLineColor=!1,B._useVertexColor=!1,B.registerEnabled=new Set,B._tint=[255,255,255,255],B.constantAttenuation=1,B.linearAttenuation=0,B.quadraticAttenuation=0,B.uMVMatrix=new l.default.Matrix,B.uPMatrix=new l.default.Matrix,B.uNMatrix=new l.default.Matrix("mat3"),B.curMatrix=new l.default.Matrix("mat3"),B._currentNormal=new l.default.Vector(0,0,1),B._curCamera=new l.default.Camera(w(B)),B._curCamera._computeCameraDefaultSettings(),B._curCamera._setDefaultCamera(),B.filterCamera=new l.default.Camera(w(B)),B.filterCamera._computeCameraDefaultSettings(),B.filterCamera._setDefaultCamera(),B.prevTouches=[],B.zoomVelocity=0,B.rotateVelocity=new l.default.Vector(0,0),B.moveVelocity=new l.default.Vector(0,0),B.executeZoom=!1,B.executeRotateAndMove=!1,B.specularShader=void 0,B.sphereMapping=void 0,B.diffusedShader=void 0,B._defaultLightShader=void 0,B._defaultImmediateModeShader=void 0,B._defaultNormalShader=void 0,B._defaultColorShader=void 0,B._defaultPointShader=void 0,B.userFillShader=void 0,B.userStrokeShader=void 0,B.userPointShader=void 0,B.retainedMode={geometry:{},buffers:{stroke:[new l.default.RenderBuffer(4,"lineVertexColors","lineColorBuffer","aVertexColor",w(B)),new l.default.RenderBuffer(3,"lineVertices","lineVerticesBuffer","aPosition",w(B)),new l.default.RenderBuffer(3,"lineTangentsIn","lineTangentsInBuffer","aTangentIn",w(B)),new l.default.RenderBuffer(3,"lineTangentsOut","lineTangentsOutBuffer","aTangentOut",w(B)),new l.default.RenderBuffer(1,"lineSides","lineSidesBuffer","aSide",w(B))],fill:[new l.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",w(B),B._vToNArray),new l.default.RenderBuffer(3,"vertexNormals","normalBuffer","aNormal",w(B),B._vToNArray),new l.default.RenderBuffer(4,"vertexColors","colorBuffer","aVertexColor",w(B)),new l.default.RenderBuffer(3,"vertexAmbients","ambientBuffer","aAmbientColor",w(B)),new l.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",w(B),B._flatten)],text:[new l.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",w(B),B._vToNArray),new l.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",w(B),B._flatten)]}},B.immediateMode={geometry:new l.default.Geometry,shapeMode:u.TRIANGLE_FAN,contourIndices:[],_bezierVertex:[],_quadraticVertex:[],_curveVertex:[],buffers:{fill:[new l.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",w(B),B._vToNArray),new l.default.RenderBuffer(3,"vertexNormals","normalBuffer","aNormal",w(B),B._vToNArray),new l.default.RenderBuffer(4,"vertexColors","colorBuffer","aVertexColor",w(B)),new l.default.RenderBuffer(3,"vertexAmbients","ambientBuffer","aAmbientColor",w(B)),new l.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",w(B),B._flatten)],stroke:[new l.default.RenderBuffer(4,"lineVertexColors","lineColorBuffer","aVertexColor",w(B)),new l.default.RenderBuffer(3,"lineVertices","lineVerticesBuffer","aPosition",w(B)),new l.default.RenderBuffer(3,"lineTangentsIn","lineTangentsInBuffer","aTangentIn",w(B)),new l.default.RenderBuffer(3,"lineTangentsOut","lineTangentsOutBuffer","aTangentOut",w(B)),new l.default.RenderBuffer(1,"lineSides","lineSidesBuffer","aSide",w(B))],point:B.GL.createBuffer()}},B.pointSize=5,B.curStrokeWeight=1,B.curStrokeCap=u.ROUND,B.curStrokeJoin=u.ROUND,B.textures=new Map,B.framebuffers=new Set,B.activeFramebuffers=[],B.filterShader=void 0,B.filterLayer=void 0,B.filterLayerTemp=void 0,B.defaultFilterShaders={},B.textureMode=u.IMAGE,B.textureWrapX=u.CLAMP,B.textureWrapY=u.CLAMP,B._tex=null,B._curveTightness=6,B._lookUpTableBezier=[],B._lookUpTableQuadratic=[],B._lutBezierDetail=0,B._lutQuadraticDetail=0,B.isProcessingVertices=!1,B._tessy=B._initTessy(),B.fontInfos={},B._curShader=void 0,B;throw new TypeError("Cannot call a class as a function")}return Y=ce,(q=[{key:"beginGeometry",value:function(){if(this.geometryBuilder)throw new Error("It looks like `beginGeometry()` is being called while another p5.Geometry is already being build.");this.geometryBuilder=new h.default(this)}},{key:"endGeometry",value:function(){var B;if(this.geometryBuilder)return B=this.geometryBuilder.finish(),this.geometryBuilder=void 0,B;throw new Error("Make sure you call beginGeometry() before endGeometry()!")}},{key:"buildGeometry",value:function(B){return this.beginGeometry(),B(),this.endGeometry()}},{key:"_setAttributeDefaults",value:function(B){var U={alpha:!0,depth:!0,stencil:!0,antialias:navigator.userAgent.toLowerCase().includes("safari"),premultipliedAlpha:!0,preserveDrawingBuffer:!0,perPixelLighting:!0,version:2};B._glAttributes===null?B._glAttributes=U:B._glAttributes=Object.assign(U,B._glAttributes)}},{key:"_initContext",value:function(){if(this._pInst._glAttributes.version!==1&&(this.drawingContext=this.canvas.getContext("webgl2",this._pInst._glAttributes)),this.webglVersion=this.drawingContext?u.WEBGL2:u.WEBGL,this._pInst._setProperty("webglVersion",this.webglVersion),this.drawingContext||(this.drawingContext=this.canvas.getContext("webgl",this._pInst._glAttributes)||this.canvas.getContext("experimental-webgl",this._pInst._glAttributes)),this.drawingContext===null)throw new Error("Error creating webgl context");var B=this.drawingContext;B.enable(B.DEPTH_TEST),B.depthFunc(B.LEQUAL),B.viewport(0,0,B.drawingBufferWidth,B.drawingBufferHeight),B.pixelStorei(B.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),this._viewport=this.drawingContext.getParameter(this.drawingContext.VIEWPORT)}},{key:"_getParam",value:function(){var B=this.drawingContext;return B.getParameter(B.MAX_TEXTURE_SIZE)}},{key:"_adjustDimensions",value:function(B,U){this._maxTextureSize||(this._maxTextureSize=this._getParam());var re=this._maxTextureSize,re=(l.default.prototype._maxAllowedPixelDimensions,Math.floor(re/this.pixelDensity())),K=Math.min(B,re),re=Math.min(U,re);return K===B&&re===U||console.warn("Warning: The requested width/height exceeds hardware limits. "+"Adjusting dimensions to width: ".concat(K,", height: ").concat(re,".")),{adjustedWidth:K,adjustedHeight:re}}},{key:"_resetContext",value:function(B,U){var K,re=this.width,ae=this.height,ye=this.canvas.id,pe=this._pInst instanceof l.default.Graphics,ye=(pe?((K=this._pInst).canvas.parentNode.removeChild(K.canvas),K.canvas=document.createElement("canvas"),(K._pInst._userNode||document.body).appendChild(K.canvas),l.default.Element.call(K,K.canvas,K._pInst),K.width=re,K.height=ae):((K=this.canvas)&&K.parentNode.removeChild(K),(K=document.createElement("canvas")).id=ye,(this._pInst._userNode||document.body).appendChild(K),this._pInst.canvas=K,this.canvas=K),new l.default.RendererGL(this._pInst.canvas,this._pInst,!pe));this._pInst._setProperty("_renderer",ye),ye.resize(re,ae),ye._applyDefaults(),pe||this._pInst._elements.push(ye),typeof U=="function"&&setTimeout(function(){U.apply(window._renderer,B)},0)}},{key:"_update",value:function(){this.uMVMatrix.set(this._curCamera.cameraMatrix),this.ambientLightColors.length=0,this.specularColors=[1,1,1],this.directionalLightDirections.length=0,this.directionalLightDiffuseColors.length=0,this.directionalLightSpecularColors.length=0,this.pointLightPositions.length=0,this.pointLightDiffuseColors.length=0,this.pointLightSpecularColors.length=0,this.spotLightPositions.length=0,this.spotLightDirections.length=0,this.spotLightDiffuseColors.length=0,this.spotLightSpecularColors.length=0,this.spotLightAngle.length=0,this.spotLightConc.length=0,this._enableLighting=!1,this._tint=[255,255,255,255],this.GL.clearStencil(0),this.GL.clear(this.GL.DEPTH_BUFFER_BIT|this.GL.STENCIL_BUFFER_BIT),this.GL.disable(this.GL.STENCIL_TEST)}},{key:"background",value:function(){var re=(re=this._pInst).color.apply(re,arguments),B=re.levels[0]/255,U=re.levels[1]/255,K=re.levels[2]/255,re=re.levels[3]/255;this.clear(B,U,K,re)}},{key:"fill",value:function(B,U,K,re){var ae=l.default.prototype.color.apply(this._pInst,arguments);this.curFillColor=ae._array,this.drawMode=u.FILL,this._useNormalMaterial=!1,this._tex=null}},{key:"stroke",value:function(B,U,K,re){var ae=l.default.prototype.color.apply(this._pInst,arguments);this.curStrokeColor=ae._array}},{key:"strokeCap",value:function(B){this.curStrokeCap=B}},{key:"strokeJoin",value:function(B){this.curStrokeJoin=B}},{key:"getFilterLayer",value:function(){return this.filterLayer||(this.filterLayer=this._pInst.createFramebuffer()),this.filterLayer}},{key:"getFilterLayerTemp",value:function(){return this.filterLayerTemp||(this.filterLayerTemp=this._pInst.createFramebuffer()),this.filterLayerTemp}},{key:"matchSize",value:function(B,U){B.width===U.width&&B.height===U.height||B.resize(U.width,U.height),B.pixelDensity()!==U.pixelDensity()&&B.pixelDensity(U.pixelDensity())}},{key:"filter",value:function(){var B,U,K=this,re=this.getFilterLayer(),ae=void 0,pe=void 0,ye=(typeof(arguments.length<=0?void 0:arguments[0])=="string"?(pe=arguments.length<=0?void 0:arguments[0],R(B={},u.BLUR,3),R(B,u.POSTERIZE,4),R(B,u.THRESHOLD,.5),ae=pe in(B=B)&&(arguments.length<=1?void 0:arguments[1])===void 0?B[pe]:arguments.length<=1?void 0:arguments[1],pe in this.defaultFilterShaders||(this.defaultFilterShaders[pe]=new l.default.Shader(re._renderer,`uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;

attribute vec3 aPosition;
// texcoords only come from p5 to vertex shader
// so pass texcoords on to the fragment shader in a varying variable
attribute vec2 aTexCoord;
varying vec2 vTexCoord;

void main() {
  // transferring texcoords for the frag shader
  vTexCoord = aTexCoord;

  // copy position with a fourth coordinate for projection (1.0 is normal)
  vec4 positionVec4 = vec4(aPosition, 1.0);

  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
}
`,J[pe])),this.filterShader=this.defaultFilterShaders[pe]):this.filterShader=arguments.length<=0?void 0:arguments[0],this.activeFramebuffer()||this),Re=(this.matchSize(re,ye),re.draw(function(){return K._pInst.clear()}),[1/(ye.width*ye.pixelDensity()),1/(ye.height*ye.pixelDensity())]);pe===u.BLUR?(U=this.getFilterLayerTemp(),this.matchSize(U,ye),this._pInst.push(),this._pInst.noStroke(),this._pInst.blendMode(u.BLEND),this._pInst.shader(this.filterShader),this.filterShader.setUniform("texelSize",Re),this.filterShader.setUniform("canvasSize",[ye.width,ye.height]),this.filterShader.setUniform("radius",Math.max(1,ae)),U.draw(function(){K.filterShader.setUniform("direction",[1,0]),K.filterShader.setUniform("tex0",ye),K._pInst.clear(),K._pInst.shader(K.filterShader),K._pInst.noLights(),K._pInst.plane(ye.width,ye.height)}),re.draw(function(){K.filterShader.setUniform("direction",[0,1]),K.filterShader.setUniform("tex0",U),K._pInst.clear(),K._pInst.shader(K.filterShader),K._pInst.noLights(),K._pInst.plane(ye.width,ye.height)}),this._pInst.pop()):re.draw(function(){K._pInst.noStroke(),K._pInst.blendMode(u.BLEND),K._pInst.shader(K.filterShader),K.filterShader.setUniform("tex0",ye),K.filterShader.setUniform("texelSize",Re),K.filterShader.setUniform("canvasSize",[ye.width,ye.height]),K.filterShader.setUniform("filterParameter",ae),K._pInst.noLights(),K._pInst.plane(ye.width,ye.height)}),this._pInst.push(),this._pInst.noStroke(),this.clear(),this._pInst.push(),this._pInst.imageMode(u.CORNER),this._pInst.blendMode(u.BLEND),ye.filterCamera._resize(),this._pInst.setCamera(ye.filterCamera),this._pInst.resetMatrix(),this._pInst.image(re,-ye.width/2,-ye.height/2,ye.width,ye.height),this._pInst.clearDepth(),this._pInst.pop(),this._pInst.pop()}},{key:"pixelDensity",value:function(B){return B?this._pInst.pixelDensity(B):this._pInst.pixelDensity()}},{key:"blendMode",value:function(B){B===u.DARKEST||B===u.LIGHTEST||B===u.ADD||B===u.BLEND||B===u.SUBTRACT||B===u.SCREEN||B===u.EXCLUSION||B===u.REPLACE||B===u.MULTIPLY||B===u.REMOVE?this.curBlendMode=B:B!==u.BURN&&B!==u.OVERLAY&&B!==u.HARD_LIGHT&&B!==u.SOFT_LIGHT&&B!==u.DODGE||console.warn("BURN, OVERLAY, HARD_LIGHT, SOFT_LIGHT, and DODGE only work for blendMode in 2D mode.")}},{key:"erase",value:function(B,U){this._isErasing||(this.preEraseBlend=this.curBlendMode,this._isErasing=!0,this.blendMode(u.REMOVE),this._cachedFillStyle=this.curFillColor.slice(),this.curFillColor=[1,1,1,B/255],this._cachedStrokeStyle=this.curStrokeColor.slice(),this.curStrokeColor=[1,1,1,U/255])}},{key:"noErase",value:function(){this._isErasing&&(this.curFillColor=this._cachedFillStyle.slice(),this.curStrokeColor=this._cachedStrokeStyle.slice(),this.curBlendMode=this.preEraseBlend,this.blendMode(this.preEraseBlend),this._isErasing=!1,this._applyBlendMode())}},{key:"drawTarget",value:function(){return this.activeFramebuffers[this.activeFramebuffers.length-1]||this}},{key:"beginClip",value:function(){var B=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},B=(g(T(ce.prototype),"beginClip",this).call(this,B),this.drawTarget()._isClipApplied=!0,this.GL);B.clearStencil(0),B.clear(B.STENCIL_BUFFER_BIT),B.enable(B.STENCIL_TEST),this._stencilTestOn=!0,B.stencilFunc(B.ALWAYS,1,255),B.stencilOp(B.KEEP,B.KEEP,B.REPLACE),B.disable(B.DEPTH_TEST),this._pInst.push(),this._pInst.resetShader(),this._doFill&&this._pInst.fill(0,0),this._doStroke&&this._pInst.stroke(0,0)}},{key:"endClip",value:function(){this._pInst.pop();var B=this.GL;B.stencilOp(B.KEEP,B.KEEP,B.KEEP),B.stencilFunc(this._clipInvert?B.EQUAL:B.NOTEQUAL,0,255),B.enable(B.DEPTH_TEST),this._clipDepths.push(this._pushPopDepth),g(T(ce.prototype),"endClip",this).call(this)}},{key:"_clearClip",value:function(){this.GL.clearStencil(1),this.GL.clear(this.GL.STENCIL_BUFFER_BIT),0<this._clipDepths.length&&this._clipDepths.pop(),this.drawTarget()._isClipApplied=!1}},{key:"strokeWeight",value:function(B){this.curStrokeWeight!==B&&(this.pointSize=B,this.curStrokeWeight=B)}},{key:"_getPixel",value:function(B,U){var K=this.GL;return V(K,null,B,U,K.RGBA,K.UNSIGNED_BYTE,this._pInst.height*this._pInst.pixelDensity())}},{key:"loadPixels",value:function(){var B,U,K=this._pixelsState;this._pInst._glAttributes.preserveDrawingBuffer!==!0?console.log("loadPixels only works in WebGL when preserveDrawingBuffer is true."):(B=this._pInst._pixelDensity,U=this.GL,K._setProperty("pixels",ee(K.pixels,U,null,0,0,this.width*B,this.height*B,U.RGBA,U.UNSIGNED_BYTE,this.height*B)))}},{key:"updatePixels",value:function(){var B=this._getTempFramebuffer();B.pixels=this._pixelsState.pixels,B.updatePixels(),this._pInst.push(),this._pInst.resetMatrix(),this._pInst.clear(),this._pInst.imageMode(u.CENTER),this._pInst.image(B,0,0),this._pInst.pop(),this.GL.clearDepth(1),this.GL.clear(this.GL.DEPTH_BUFFER_BIT)}},{key:"_getTempFramebuffer",value:function(){return this._tempFramebuffer||(this._tempFramebuffer=this._pInst.createFramebuffer({format:u.UNSIGNED_BYTE,useDepth:this._pInst._glAttributes.depth,depthFormat:u.UNSIGNED_INT,antialias:this._pInst._glAttributes.antialias})),this._tempFramebuffer}},{key:"geometryInHash",value:function(B){return this.retainedMode.geometry[B]!==void 0}},{key:"viewport",value:function(B,U){this._viewport=[0,0,B,U],this.GL.viewport(0,0,B,U)}},{key:"resize",value:function(ae,re){l.default.Renderer.prototype.resize.call(this,ae,re),this._origViewport={width:this.GL.drawingBufferWidth,height:this.GL.drawingBufferHeight},this.viewport(this._origViewport.width,this._origViewport.height),this._curCamera._resize();var ae=this._pixelsState,K=(ae.pixels!==void 0&&ae._setProperty("pixels",new Uint8Array(this.GL.drawingBufferWidth*this.GL.drawingBufferHeight*4)),!0),re=!1,ae=void 0;try{for(var pe,ye=this.framebuffers[Symbol.iterator]();!(K=(pe=ye.next()).done);K=!0)pe.value._canvasSizeChanged()}catch(Re){re=!0,ae=Re}finally{try{K||ye.return==null||ye.return()}finally{if(re)throw ae}}}},{key:"clear",value:function(){var B=(arguments.length<=0?void 0:arguments[0])||0,U=(arguments.length<=1?void 0:arguments[1])||0,K=(arguments.length<=2?void 0:arguments[2])||0,re=(arguments.length<=3?void 0:arguments[3])||0,ae=this.activeFramebuffer();ae&&ae.format===u.UNSIGNED_BYTE&&!ae.antialias&&re===0&&(re=1e-10),this.GL.clearColor(B*re,U*re,K*re,re),this.GL.clearDepth(1),this.GL.clear(this.GL.COLOR_BUFFER_BIT|this.GL.DEPTH_BUFFER_BIT)}},{key:"clearDepth",value:function(){this.GL.clearDepth(0<arguments.length&&arguments[0]!==void 0?arguments[0]:1),this.GL.clear(this.GL.DEPTH_BUFFER_BIT)}},{key:"applyMatrix",value:function(B,U,K,re,ae,pe){arguments.length===16?l.default.Matrix.prototype.apply.apply(this.uMVMatrix,arguments):this.uMVMatrix.apply([B,U,0,0,K,re,0,0,0,0,1,0,ae,pe,0,1])}},{key:"translate",value:function(B,U,K){return B instanceof l.default.Vector&&(K=B.z,U=B.y,B=B.x),this.uMVMatrix.translate([B,U,K]),this}},{key:"scale",value:function(B,U,K){return this.uMVMatrix.scale(B,U,K),this}},{key:"rotate",value:function(B,U){return U===void 0?this.rotateZ(B):(l.default.Matrix.prototype.rotate.apply(this.uMVMatrix,arguments),this)}},{key:"rotateX",value:function(B){return this.rotate(B,1,0,0),this}},{key:"rotateY",value:function(B){return this.rotate(B,0,1,0),this}},{key:"rotateZ",value:function(B){return this.rotate(B,0,0,1),this}},{key:"push",value:function(){var B=l.default.Renderer.prototype.push.apply(this),U=B.properties;return U.uMVMatrix=this.uMVMatrix.copy(),U.uPMatrix=this.uPMatrix.copy(),U._curCamera=this._curCamera,this._curCamera=this._curCamera.copy(),U.ambientLightColors=this.ambientLightColors.slice(),U.specularColors=this.specularColors.slice(),U.directionalLightDirections=this.directionalLightDirections.slice(),U.directionalLightDiffuseColors=this.directionalLightDiffuseColors.slice(),U.directionalLightSpecularColors=this.directionalLightSpecularColors.slice(),U.pointLightPositions=this.pointLightPositions.slice(),U.pointLightDiffuseColors=this.pointLightDiffuseColors.slice(),U.pointLightSpecularColors=this.pointLightSpecularColors.slice(),U.spotLightPositions=this.spotLightPositions.slice(),U.spotLightDirections=this.spotLightDirections.slice(),U.spotLightDiffuseColors=this.spotLightDiffuseColors.slice(),U.spotLightSpecularColors=this.spotLightSpecularColors.slice(),U.spotLightAngle=this.spotLightAngle.slice(),U.spotLightConc=this.spotLightConc.slice(),U.userFillShader=this.userFillShader,U.userStrokeShader=this.userStrokeShader,U.userPointShader=this.userPointShader,U.pointSize=this.pointSize,U.curStrokeWeight=this.curStrokeWeight,U.curStrokeColor=this.curStrokeColor,U.curFillColor=this.curFillColor,U.curAmbientColor=this.curAmbientColor,U.curSpecularColor=this.curSpecularColor,U.curEmissiveColor=this.curEmissiveColor,U._hasSetAmbient=this._hasSetAmbient,U._useSpecularMaterial=this._useSpecularMaterial,U._useEmissiveMaterial=this._useEmissiveMaterial,U._useShininess=this._useShininess,U._useMetalness=this._useMetalness,U.constantAttenuation=this.constantAttenuation,U.linearAttenuation=this.linearAttenuation,U.quadraticAttenuation=this.quadraticAttenuation,U._enableLighting=this._enableLighting,U._useNormalMaterial=this._useNormalMaterial,U._tex=this._tex,U.drawMode=this.drawMode,U._currentNormal=this._currentNormal,U.curBlendMode=this.curBlendMode,U.activeImageLight=this.activeImageLight,B}},{key:"pop",value:function(){var B;0<this._clipDepths.length&&this._pushPopDepth===this._clipDepths[this._clipDepths.length-1]&&this._clearClip();for(var U=arguments.length,K=new Array(U),re=0;re<U;re++)K[re]=arguments[re];(B=g(T(ce.prototype),"pop",this)).call.apply(B,[this].concat(K)),this._applyStencilTestIfClipping()}},{key:"_applyStencilTestIfClipping",value:function(){var B=this.drawTarget();B._isClipApplied!==this._stencilTestOn&&(B._isClipApplied?(this.GL.enable(this.GL.STENCIL_TEST),this._stencilTestOn=!0):(this.GL.disable(this.GL.STENCIL_TEST),this._stencilTestOn=!1))}},{key:"resetMatrix",value:function(){return this.uMVMatrix.set(this._curCamera.cameraMatrix),this}},{key:"_getImmediateStrokeShader",value:function(){var B=this.userStrokeShader;return B&&B.isStrokeShader()?B:this._getLineShader()}},{key:"_getRetainedStrokeShader",value:function(){return this._getImmediateStrokeShader()}},{key:"_getSphereMapping",value:function(B){return this.sphereMapping||(this.sphereMapping=this._pInst.createFilterShader(X)),this.uNMatrix.inverseTranspose(this.uMVMatrix),this.uNMatrix.invert3x3(this.uNMatrix),this.sphereMapping.setUniform("uFovY",this._curCamera.cameraFOV),this.sphereMapping.setUniform("uAspect",this._curCamera.aspectRatio),this.sphereMapping.setUniform("uNewNormalMatrix",this.uNMatrix.mat3),this.sphereMapping.setUniform("uSampler",B),this.sphereMapping}},{key:"_getImmediateFillShader",value:function(){var B=this.userFillShader;if(this._useNormalMaterial&&(!B||!B.isNormalShader()))return this._getNormalShader();if(this._enableLighting){if(!B||!B.isLightShader())return this._getLightShader()}else if(this._tex){if(!B||!B.isTextureShader())return this._getLightShader()}else if(!B)return this._getImmediateModeShader();return B}},{key:"_getRetainedFillShader",value:function(){if(this._useNormalMaterial)return this._getNormalShader();var B=this.userFillShader;if(this._enableLighting){if(!B||!B.isLightShader())return this._getLightShader()}else if(this._tex){if(!B||!B.isTextureShader())return this._getLightShader()}else if(!B)return this._getColorShader();return B}},{key:"_getImmediatePointShader",value:function(){var B=this.userPointShader;return B&&B.isPointShader()?B:this._getPointShader()}},{key:"_getRetainedLineShader",value:function(){return this._getImmediateLineShader()}},{key:"_getLightShader",value:function(){return this._defaultLightShader||(this._pInst._glAttributes.perPixelLighting?this._defaultLightShader=new l.default.Shader(this,this._webGL2CompatibilityPrefix("vert","highp")+W.phongVert,this._webGL2CompatibilityPrefix("frag","highp")+W.phongFrag):this._defaultLightShader=new l.default.Shader(this,this._webGL2CompatibilityPrefix("vert","highp")+W.lightVert,this._webGL2CompatibilityPrefix("frag","highp")+W.lightTextureFrag)),this._defaultLightShader}},{key:"_getImmediateModeShader",value:function(){return this._defaultImmediateModeShader||(this._defaultImmediateModeShader=new l.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+W.immediateVert,this._webGL2CompatibilityPrefix("frag","mediump")+W.vertexColorFrag)),this._defaultImmediateModeShader}},{key:"_getNormalShader",value:function(){return this._defaultNormalShader||(this._defaultNormalShader=new l.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+W.normalVert,this._webGL2CompatibilityPrefix("frag","mediump")+W.normalFrag)),this._defaultNormalShader}},{key:"_getColorShader",value:function(){return this._defaultColorShader||(this._defaultColorShader=new l.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+W.normalVert,this._webGL2CompatibilityPrefix("frag","mediump")+W.basicFrag)),this._defaultColorShader}},{key:"_getPointShader",value:function(){return this._defaultPointShader||(this._defaultPointShader=new l.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+W.pointVert,this._webGL2CompatibilityPrefix("frag","mediump")+W.pointFrag)),this._defaultPointShader}},{key:"_getLineShader",value:function(){return this._defaultLineShader||(this._defaultLineShader=new l.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+W.lineVert,this._webGL2CompatibilityPrefix("frag","mediump")+W.lineFrag)),this._defaultLineShader}},{key:"_getFontShader",value:function(){return this._defaultFontShader||(this.webglVersion===u.WEBGL&&this.GL.getExtension("OES_standard_derivatives"),this._defaultFontShader=new l.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+W.fontVert,this._webGL2CompatibilityPrefix("frag","mediump")+W.fontFrag)),this._defaultFontShader}},{key:"_webGL2CompatibilityPrefix",value:function(B,U){var K="";return this.webglVersion===u.WEBGL2&&(K+=`#version 300 es
#define WEBGL2
`),B==="vert"?K+=`#define VERTEX_SHADER
`:B==="frag"&&(K+=`#define FRAGMENT_SHADER
`),U&&(K+="precision ".concat(U,` float;
`)),K}},{key:"_getEmptyTexture",value:function(){var B;return this._emptyTexture||((B=new l.default.Image(1,1)).set(0,0,255),this._emptyTexture=new l.default.Texture(this,B)),this._emptyTexture}},{key:"getTexture",value:function(B){B instanceof l.default.Framebuffer&&(B=B.color);var U=this.textures.get(B);return U||(U=new l.default.Texture(this,B),this.textures.set(B,U),U)}},{key:"getDiffusedTexture",value:function(B){var U,K,re=this;return this.diffusedTextures.get(B)!=null?this.diffusedTextures.get(B):(U=Math.floor(B.height/B.width*200),K=this._pInst.createFramebuffer({width:200,height:U,density:1}),this.diffusedShader||(this.diffusedShader=this._pInst.createShader(W.imageLightVert,W.imageLightDiffusedFrag)),K.draw(function(){re._pInst.shader(re.diffusedShader),re.diffusedShader.setUniform("environmentMap",B),re._pInst.noStroke(),re._pInst.rectMode(u.CENTER),re._pInst.noLights(),re._pInst.rect(0,0,200,U)}),this.diffusedTextures.set(B,K),K)}},{key:"getSpecularTexture",value:function(B){var U=this;if(this.specularTextures.get(B)!=null)return this.specularTextures.get(B);for(var K,re=[],ae=this._pInst.createFramebuffer({width:512,height:512,density:1}),pe=Math.log(512)/Math.log(2),ye=(this.specularShader||(this.specularShader=this._pInst.createShader(W.imageLightVert,W.imageLightSpecularFrag)),512);1<=ye;ye/=2)(function(Re){ae.resize(Re,Re);var Me=1-Math.log(Re)/Math.log(2)/pe;ae.draw(function(){U._pInst.shader(U.specularShader),U._pInst.clear(),U.specularShader.setUniform("environmentMap",B),U.specularShader.setUniform("roughness",Me),U._pInst.noStroke(),U._pInst.noLights(),U._pInst.plane(Re,Re)}),re.push(ae.get().drawingContext.getImageData(0,0,Re,Re))})(ye);return ae.remove(),K=new c.MipmapTexture(this,re,{}),this.specularTextures.set(B,K),K}},{key:"activeFramebuffer",value:function(){return this.activeFramebuffers[this.activeFramebuffers.length-1]||null}},{key:"createFramebuffer",value:function(B){return new l.default.Framebuffer(this,B)}},{key:"_setStrokeUniforms",value:function(B){B.bindShader(),B.setUniform("uUseLineColor",this._useLineColor),B.setUniform("uMaterialColor",this.curStrokeColor),B.setUniform("uStrokeWeight",this.curStrokeWeight),B.setUniform("uStrokeCap",D[this.curStrokeCap]),B.setUniform("uStrokeJoin",j[this.curStrokeJoin])}},{key:"_setFillUniforms",value:function(B){var U=this,K=(B.bindShader(),this.mixedSpecularColor=y(this.curSpecularColor),0<this._useMetalness&&(this.mixedSpecularColor=this.mixedSpecularColor.map(function(re,ae){return U.curFillColor[ae]*U._useMetalness+re*(1-U._useMetalness)})),B.setUniform("uUseVertexColor",this._useVertexColor),B.setUniform("uMaterialColor",this.curFillColor),B.setUniform("isTexture",!!this._tex),this._tex&&B.setUniform("uSampler",this._tex),B.setUniform("uTint",this._tint),B.setUniform("uHasSetAmbient",this._hasSetAmbient),B.setUniform("uAmbientMatColor",this.curAmbientColor),B.setUniform("uSpecularMatColor",this.mixedSpecularColor),B.setUniform("uEmissiveMatColor",this.curEmissiveColor),B.setUniform("uSpecular",this._useSpecularMaterial),B.setUniform("uEmissive",this._useEmissiveMaterial),B.setUniform("uShininess",this._useShininess),B.setUniform("metallic",this._useMetalness),this._setImageLightUniforms(B),B.setUniform("uUseLighting",this._enableLighting),this.pointLightDiffuseColors.length/3),K=(B.setUniform("uPointLightCount",K),B.setUniform("uPointLightLocation",this.pointLightPositions),B.setUniform("uPointLightDiffuseColors",this.pointLightDiffuseColors),B.setUniform("uPointLightSpecularColors",this.pointLightSpecularColors),this.directionalLightDiffuseColors.length/3),K=(B.setUniform("uDirectionalLightCount",K),B.setUniform("uLightingDirection",this.directionalLightDirections),B.setUniform("uDirectionalDiffuseColors",this.directionalLightDiffuseColors),B.setUniform("uDirectionalSpecularColors",this.directionalLightSpecularColors),this.ambientLightColors.length/3),K=(this.mixedAmbientLight=y(this.ambientLightColors),0<this._useMetalness&&(this.mixedAmbientLight=this.mixedAmbientLight.map(function(re){return re-=U._useMetalness,Math.max(0,re)})),B.setUniform("uAmbientLightCount",K),B.setUniform("uAmbientColor",this.mixedAmbientLight),this.spotLightDiffuseColors.length/3);B.setUniform("uSpotLightCount",K),B.setUniform("uSpotLightAngle",this.spotLightAngle),B.setUniform("uSpotLightConc",this.spotLightConc),B.setUniform("uSpotLightDiffuseColors",this.spotLightDiffuseColors),B.setUniform("uSpotLightSpecularColors",this.spotLightSpecularColors),B.setUniform("uSpotLightLocation",this.spotLightPositions),B.setUniform("uSpotLightDirection",this.spotLightDirections),B.setUniform("uConstantAttenuation",this.constantAttenuation),B.setUniform("uLinearAttenuation",this.linearAttenuation),B.setUniform("uQuadraticAttenuation",this.quadraticAttenuation),B.bindTextures()}},{key:"_setImageLightUniforms",value:function(B){var U,K;B.setUniform("uUseImageLight",this.activeImageLight!=null),this.activeImageLight&&(U=this.getDiffusedTexture(this.activeImageLight),B.setUniform("environmentMapDiffused",U),U=this.getSpecularTexture(this.activeImageLight),K=20/this._useShininess,B.setUniform("levelOfDetail",8*K),B.setUniform("environmentMapSpecular",U))}},{key:"_setPointUniforms",value:function(B){B.bindShader(),B.setUniform("uMaterialColor",this.curStrokeColor),B.setUniform("uPointSize",this.pointSize*this._pInst._pixelDensity)}},{key:"_bindBuffer",value:function(B,U,K,re,ae){U=U||this.GL.ARRAY_BUFFER,this.GL.bindBuffer(U,B),K!==void 0&&((B=K)instanceof l.default.DataArray?B=K.dataArray():B instanceof(re||Float32Array)||(B=new(re||Float32Array)(B)),this.GL.bufferData(U,B,ae||this.GL.STATIC_DRAW))}},{key:"_arraysEqual",value:function(B,U){return B.length===U.length&&B.every(function(K,re){return K===U[re]})}},{key:"_isTypedArray",value:function(B){return[Float32Array,Float64Array,Int16Array,Uint16Array,Uint32Array].some(function(U){return B instanceof U})}},{key:"_flatten",value:function(B){return B.flat()}},{key:"_vToNArray",value:function(B){return B.flatMap(function(U){return[U.x,U.y,U.z]})}},{key:"_bezierCoefficients",value:function(B){var U=B*B,K=1-B,re=K*K;return[re*K,3*re*B,3*K*U,U*B]}},{key:"_quadraticCoefficients",value:function(B){var U=1-B;return[U*U,2*U*B,B*B]}},{key:"_bezierToCatmull",value:function(B){return[B[1],B[1]+(B[2]-B[0])/this._curveTightness,B[2]-(B[3]-B[1])/this._curveTightness,B[2]]}},{key:"_initTessy",value:function(){var B=new p.default.GluTesselator;return B.gluTessCallback(p.default.gluEnum.GLU_TESS_VERTEX_DATA,function(U,K){var re=!0,ae=!1,pe=void 0;try{for(var ye,Re=U[Symbol.iterator]();!(re=(ye=Re.next()).done);re=!0){var Me=ye.value;K.push(Me)}}catch(xe){ae=!0,pe=xe}finally{try{re||Re.return==null||Re.return()}finally{if(ae)throw pe}}}),B.gluTessCallback(p.default.gluEnum.GLU_TESS_BEGIN,function(U){U!==p.default.primitiveType.GL_TRIANGLES&&console.log("expected TRIANGLES but got type: ".concat(U))}),B.gluTessCallback(p.default.gluEnum.GLU_TESS_ERROR,function(U){console.log("error callback"),console.log("error number: ".concat(U))}),B.gluTessCallback(p.default.gluEnum.GLU_TESS_COMBINE,function(U,K,re){for(var ae=new Array(l.default.RendererGL.prototype.tessyVertexSize).fill(0),pe=0;pe<re.length;pe++)for(var ye=0;ye<ae.length;ye++)re[pe]!==0&&K[pe]&&(ae[ye]+=K[pe][ye]*re[pe]);return ae}),B.gluTessCallback(p.default.gluEnum.GLU_TESS_EDGE_FLAG,function(U){}),B.gluTessProperty(p.default.gluEnum.GLU_TESS_WINDING_RULE,p.default.windingRule.GLU_TESS_WINDING_NONZERO),B}},{key:"_triangulate",value:function(B){var U=B[0]?B[0][2]:void 0,K=!0,re=!0,Me=!1,ve=void 0;try{for(var ae,pe=B[Symbol.iterator]();!(re=(ae=pe.next()).done);re=!0)for(var ye=ae.value,Re=0;Re<ye.length;Re+=l.default.RendererGL.prototype.tessyVertexSize)if(ye[Re+2]!==U){K=!1;break}}catch(Ge){Me=!0,ve=Ge}finally{try{re||pe.return==null||pe.return()}finally{if(Me)throw ve}}K?this._tessy.gluTessNormal(0,0,1):this._tessy.gluTessNormal(0,0,0);var Me=[],xe=(this._tessy.gluTessBeginPolygon(Me),!0),ve=!1,ne=void 0;try{for(var Te,Pe=B[Symbol.iterator]();!(xe=(Te=Pe.next()).done);xe=!0){var Ae=Te.value;this._tessy.gluTessBeginContour();for(var je=0;je<Ae.length;je+=l.default.RendererGL.prototype.tessyVertexSize){var Ue=Ae.slice(je,je+l.default.RendererGL.prototype.tessyVertexSize);this._tessy.gluTessVertex(Ue,Ue)}this._tessy.gluTessEndContour()}}catch(Ge){ve=!0,ne=Ge}finally{try{xe||Pe.return==null||Pe.return()}finally{if(ve)throw ne}}return this._tessy.gluTessEndPolygon(),Me}}])&&v(Y.prototype,q),ce}(l.default.Renderer),l.default.prototype._assert3d=function(q){if(!this._renderer.isP3D)throw new Error("".concat(q,"() is only supported in WEBGL mode. If you'd like to use 3D graphics and WebGL, see  https://p5js.org/examples/form-3d-primitives.html for more information."))},l.default.RendererGL.prototype.tessyVertexSize=12,O=l.default.RendererGL,o.default=O},{"../core/constants":269,"../core/main":280,"../core/p5.Renderer":283,"./GeometryBuilder":324,"./p5.Camera":329,"./p5.Framebuffer":331,"./p5.Matrix":333,"./p5.Shader":338,"./p5.Texture":339,"core-js/modules/es.array.concat":152,"core-js/modules/es.array.copy-within":153,"core-js/modules/es.array.every":154,"core-js/modules/es.array.fill":155,"core-js/modules/es.array.flat":159,"core-js/modules/es.array.flat-map":158,"core-js/modules/es.array.from":161,"core-js/modules/es.array.includes":162,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.map":167,"core-js/modules/es.array.slice":168,"core-js/modules/es.array.some":169,"core-js/modules/es.array.unscopables.flat":172,"core-js/modules/es.array.unscopables.flat-map":171,"core-js/modules/es.map":174,"core-js/modules/es.object.assign":181,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.get-prototype-of":185,"core-js/modules/es.object.to-string":187,"core-js/modules/es.reflect.construct":189,"core-js/modules/es.reflect.get":190,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.set":194,"core-js/modules/es.string.includes":196,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.typed-array.copy-within":210,"core-js/modules/es.typed-array.every":211,"core-js/modules/es.typed-array.fill":212,"core-js/modules/es.typed-array.filter":213,"core-js/modules/es.typed-array.find":215,"core-js/modules/es.typed-array.find-index":214,"core-js/modules/es.typed-array.float32-array":216,"core-js/modules/es.typed-array.float64-array":217,"core-js/modules/es.typed-array.for-each":218,"core-js/modules/es.typed-array.includes":219,"core-js/modules/es.typed-array.index-of":220,"core-js/modules/es.typed-array.int16-array":221,"core-js/modules/es.typed-array.iterator":223,"core-js/modules/es.typed-array.join":224,"core-js/modules/es.typed-array.last-index-of":225,"core-js/modules/es.typed-array.map":226,"core-js/modules/es.typed-array.reduce":228,"core-js/modules/es.typed-array.reduce-right":227,"core-js/modules/es.typed-array.reverse":229,"core-js/modules/es.typed-array.set":230,"core-js/modules/es.typed-array.slice":231,"core-js/modules/es.typed-array.some":232,"core-js/modules/es.typed-array.sort":233,"core-js/modules/es.typed-array.subarray":234,"core-js/modules/es.typed-array.to-locale-string":235,"core-js/modules/es.typed-array.to-string":236,"core-js/modules/es.typed-array.uint16-array":237,"core-js/modules/es.typed-array.uint32-array":238,"core-js/modules/es.typed-array.uint8-array":239,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243,libtess:252,path:255}],338:[function(r,i,o){r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.some"),r("core-js/modules/es.function.name"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.some"),r("core-js/modules/es.function.name"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var s=(r=r("../core/main"))&&r.__esModule?r:{default:r};function a(l,u){for(var h=0;h<u.length;h++){var p=u[h];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(l,p.key,p)}}s.default.Shader=function(){function l(p,c,f){if(!(this instanceof l))throw new TypeError("Cannot call a class as a function");this._renderer=p,this._vertSrc=c,this._fragSrc=f,this._vertShader=-1,this._fragShader=-1,this._glProgram=0,this._loadedAttributes=!1,this.attributes={},this._loadedUniforms=!1,this.uniforms={},this._bound=!1,this.samplers=[]}var u,h;return u=l,(h=[{key:"init",value:function(){if(this._glProgram===0){var p=this._renderer.GL;if(this._vertShader=p.createShader(p.VERTEX_SHADER),p.shaderSource(this._vertShader,this._vertSrc),p.compileShader(this._vertShader),!p.getShaderParameter(this._vertShader,p.COMPILE_STATUS))return s.default._friendlyError("Yikes! An error occurred compiling the vertex shader:".concat(p.getShaderInfoLog(this._vertShader))),null;if(this._fragShader=p.createShader(p.FRAGMENT_SHADER),p.shaderSource(this._fragShader,this._fragSrc),p.compileShader(this._fragShader),!p.getShaderParameter(this._fragShader,p.COMPILE_STATUS))return s.default._friendlyError("Darn! An error occurred compiling the fragment shader:".concat(p.getShaderInfoLog(this._fragShader))),null;this._glProgram=p.createProgram(),p.attachShader(this._glProgram,this._vertShader),p.attachShader(this._glProgram,this._fragShader),p.linkProgram(this._glProgram),p.getProgramParameter(this._glProgram,p.LINK_STATUS)||s.default._friendlyError("Snap! Error linking shader program: ".concat(p.getProgramInfoLog(this._glProgram))),this._loadAttributes(),this._loadUniforms()}return this}},{key:"copyToContext",value:function(p){var c=new s.default.Shader(p._renderer,this._vertSrc,this._fragSrc);return c.ensureCompiledOnContext(p),c}},{key:"ensureCompiledOnContext",value:function(p){if(this._glProgram!==0&&this._renderer!==p._renderer)throw new Error("The shader being run is attached to a different context. Do you need to copy it to this context first with .copyToContext()?");this._glProgram===0&&(this._renderer=p._renderer,this.init())}},{key:"_loadAttributes",value:function(){if(!this._loadedAttributes){this.attributes={};for(var p=this._renderer.GL,c=p.getProgramParameter(this._glProgram,p.ACTIVE_ATTRIBUTES),f=0;f<c;++f){var m=p.getActiveAttrib(this._glProgram,f),y=m.name,v=p.getAttribLocation(this._glProgram,y),g={};g.name=y,g.location=v,g.index=f,g.type=m.type,g.size=m.size,this.attributes[y]=g}this._loadedAttributes=!0}}},{key:"_loadUniforms",value:function(){if(!this._loadedUniforms){for(var p=this._renderer.GL,c=p.getProgramParameter(this._glProgram,p.ACTIVE_UNIFORMS),f=0,m=0;m<c;++m){var y=p.getActiveUniform(this._glProgram,m),v={},g=(v.location=p.getUniformLocation(this._glProgram,y.name),v.size=y.size,y.name);1<y.size&&(g=g.substring(0,g.indexOf("[0]"))),v.name=g,v.type=y.type,v._cachedData=void 0,v.type===p.SAMPLER_2D&&(v.samplerIndex=f,f++,this.samplers.push(v)),v.isArray=1<y.size||v.type===p.FLOAT_MAT3||v.type===p.FLOAT_MAT4||v.type===p.FLOAT_VEC2||v.type===p.FLOAT_VEC3||v.type===p.FLOAT_VEC4||v.type===p.INT_VEC2||v.type===p.INT_VEC4||v.type===p.INT_VEC3,this.uniforms[g]=v}this._loadedUniforms=!0}}},{key:"compile",value:function(){}},{key:"bindShader",value:function(){this.init(),this._bound||(this.useProgram(),this._bound=!0,this._setMatrixUniforms(),this.setUniform("uViewport",this._renderer._viewport))}},{key:"unbindShader",value:function(){return this._bound&&(this.unbindTextures(),this._bound=!1),this}},{key:"bindTextures",value:function(){var p=this._renderer.GL,c=!0,f=!1,m=void 0;try{for(var y,v=this.samplers[Symbol.iterator]();!(c=(y=v.next()).done);c=!0){var g=y.value,x=g.texture;x===void 0&&(x=this._renderer._getEmptyTexture()),p.activeTexture(p.TEXTURE0+g.samplerIndex),x.bindTexture(),x.update(),p.uniform1i(g.location,g.samplerIndex)}}catch(b){f=!0,m=b}finally{try{c||v.return==null||v.return()}finally{if(f)throw m}}}},{key:"updateTextures",value:function(){var p=!0,c=!1,f=void 0;try{for(var m,y=this.samplers[Symbol.iterator]();!(p=(m=y.next()).done);p=!0){var v=m.value.texture;v&&v.update()}}catch(g){c=!0,f=g}finally{try{p||y.return==null||y.return()}finally{if(c)throw f}}}},{key:"unbindTextures",value:function(){var p=!0,c=!1,f=void 0;try{for(var m,y=this.samplers[Symbol.iterator]();!(p=(m=y.next()).done);p=!0){var v=m.value;this.setUniform(v.name,this._renderer._getEmptyTexture())}}catch(g){c=!0,f=g}finally{try{p||y.return==null||y.return()}finally{if(c)throw f}}}},{key:"_setMatrixUniforms",value:function(){var p=this._renderer._curCamera.cameraMatrix,c=this._renderer.uPMatrix,f=this._renderer.uMVMatrix,m=f.copy();m.mult(c),this.isStrokeShader()&&this.setUniform("uPerspective",this._renderer._curCamera.useLinePerspective?1:0),this.setUniform("uViewMatrix",p.mat4),this.setUniform("uProjectionMatrix",c.mat4),this.setUniform("uModelViewMatrix",f.mat4),this.setUniform("uModelViewProjectionMatrix",m.mat4),this.uniforms.uNormalMatrix&&(this._renderer.uNMatrix.inverseTranspose(this._renderer.uMVMatrix),this.setUniform("uNormalMatrix",this._renderer.uNMatrix.mat3)),this.uniforms.uCameraRotation&&(this._renderer.curMatrix.inverseTranspose(this._renderer._curCamera.cameraMatrix),this.setUniform("uCameraRotation",this._renderer.curMatrix.mat3))}},{key:"useProgram",value:function(){var p=this._renderer.GL;return this._renderer._curShader!==this&&(p.useProgram(this._glProgram),this._renderer._curShader=this),this}},{key:"setUniform",value:function(p,c){var f=this.uniforms[p];if(f){var m=this._renderer.GL;if(f.isArray){if(f._cachedData&&this._renderer._arraysEqual(f._cachedData,c))return;f._cachedData=c.slice(0)}else{if(f._cachedData&&f._cachedData===c)return;Array.isArray(c)?f._cachedData=c.slice(0):f._cachedData=c}var y=f.location;switch(this.useProgram(),f.type){case m.BOOL:c===!0?m.uniform1i(y,1):m.uniform1i(y,0);break;case m.INT:1<f.size?c.length&&m.uniform1iv(y,c):m.uniform1i(y,c);break;case m.FLOAT:1<f.size?c.length&&m.uniform1fv(y,c):m.uniform1f(y,c);break;case m.FLOAT_MAT3:m.uniformMatrix3fv(y,!1,c);break;case m.FLOAT_MAT4:m.uniformMatrix4fv(y,!1,c);break;case m.FLOAT_VEC2:1<f.size?c.length&&m.uniform2fv(y,c):m.uniform2f(y,c[0],c[1]);break;case m.FLOAT_VEC3:1<f.size?c.length&&m.uniform3fv(y,c):m.uniform3f(y,c[0],c[1],c[2]);break;case m.FLOAT_VEC4:1<f.size?c.length&&m.uniform4fv(y,c):m.uniform4f(y,c[0],c[1],c[2],c[3]);break;case m.INT_VEC2:1<f.size?c.length&&m.uniform2iv(y,c):m.uniform2i(y,c[0],c[1]);break;case m.INT_VEC3:1<f.size?c.length&&m.uniform3iv(y,c):m.uniform3i(y,c[0],c[1],c[2]);break;case m.INT_VEC4:1<f.size?c.length&&m.uniform4iv(y,c):m.uniform4i(y,c[0],c[1],c[2],c[3]);break;case m.SAMPLER_2D:m.activeTexture(m.TEXTURE0+f.samplerIndex),f.texture=c instanceof s.default.Texture?c:this._renderer.getTexture(c),m.uniform1i(y,f.samplerIndex),f.texture.src.gifProperties&&f.texture.src._animateGif(this._renderer._pInst)}return this}}},{key:"isLightShader",value:function(){return[this.attributes.aNormal,this.uniforms.uUseLighting,this.uniforms.uAmbientLightCount,this.uniforms.uDirectionalLightCount,this.uniforms.uPointLightCount,this.uniforms.uAmbientColor,this.uniforms.uDirectionalDiffuseColors,this.uniforms.uDirectionalSpecularColors,this.uniforms.uPointLightLocation,this.uniforms.uPointLightDiffuseColors,this.uniforms.uPointLightSpecularColors,this.uniforms.uLightingDirection,this.uniforms.uSpecular].some(function(p){return p!==void 0})}},{key:"isNormalShader",value:function(){return this.attributes.aNormal!==void 0}},{key:"isTextureShader",value:function(){return 0<this.samplers.length}},{key:"isColorShader",value:function(){return this.attributes.aVertexColor!==void 0||this.uniforms.uMaterialColor!==void 0}},{key:"isTexLightShader",value:function(){return this.isLightShader()&&this.isTextureShader()}},{key:"isStrokeShader",value:function(){return this.uniforms.uStrokeWeight!==void 0}},{key:"enableAttrib",value:function(p,c,f,m,y,v){var g;return p&&(p=p.location)!==-1&&(g=this._renderer.GL,this._renderer.registerEnabled.has(p)||(g.enableVertexAttribArray(p),this._renderer.registerEnabled.add(p)),this._renderer.GL.vertexAttribPointer(p,c,f||g.FLOAT,m||!1,y||0,v||0)),this}},{key:"disableRemainingAttributes",value:function(){var p=this,c=!0,f=!1,m=void 0;try{for(var y,v=this._renderer.registerEnabled.values()[Symbol.iterator]();!(c=(y=v.next()).done);c=!0)(function(){var g=y.value;Object.keys(p.attributes).some(function(x){return p.attributes[x].location===g})||(p._renderer.GL.disableVertexAttribArray(g),p._renderer.registerEnabled.delete(g))})()}catch(g){f=!0,m=g}finally{try{c||v.return==null||v.return()}finally{if(f)throw m}}}}])&&a(u.prototype,h),l}(),r=s.default.Shader,o.default=r},{"../core/main":280,"core-js/modules/es.array.index-of":163,"core-js/modules/es.array.iterator":164,"core-js/modules/es.array.slice":168,"core-js/modules/es.array.some":169,"core-js/modules/es.function.name":173,"core-js/modules/es.object.keys":186,"core-js/modules/es.object.to-string":187,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/web.dom-collections.iterator":243}],339:[function(r,i,o){function s(b){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w})(b)}function a(b){return(a=typeof Symbol=="function"&&s(Symbol.iterator)==="symbol"?function(w){return s(w)}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":s(w)})(b)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.get-prototype-of"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.reflect.construct"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.typed-array.uint8-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.typed-array.uint8-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),Object.defineProperty(o,"__esModule",{value:!0}),o.checkWebGLCapabilities=x,o.default=o.MipmapTexture=void 0;var l=(g=r("../core/main"))&&g.__esModule?g:{default:g},u=function(b){if(b&&b.__esModule)return b;if(b===null||a(b)!=="object"&&typeof b!="function")return{default:b};var w=h();if(w&&w.has(b))return w.get(b);var T,R={},C=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(T in b){var P;Object.prototype.hasOwnProperty.call(b,T)&&((P=C?Object.getOwnPropertyDescriptor(b,T):null)&&(P.get||P.set)?Object.defineProperty(R,T,P):R[T]=b[T])}return R.default=b,w&&w.set(b,R),R}(r("../core/constants"));function h(){var b;return typeof WeakMap!="function"?null:(b=new WeakMap,h=function(){return b},b)}function p(b,w){return(p=Object.setPrototypeOf||function(T,R){return T.__proto__=R,T})(b,w)}function c(b){return function(){var w,T=f(b),T=(w=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(w=f(this).constructor,Reflect.construct(T,arguments,w)):T.apply(this,arguments),this);if(!w||a(w)!=="object"&&typeof w!="function"){if(T!==void 0)return T;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return w}}function f(b){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(w){return w.__proto__||Object.getPrototypeOf(w)})(b)}function m(b,w){if(!(b instanceof w))throw new TypeError("Cannot call a class as a function")}function y(b,w){for(var T=0;T<w.length;T++){var R=w[T];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(b,R.key,R)}}function v(b,w,T){w&&y(b.prototype,w)}l.default.Texture=function(){function b(I,T,P){m(this,b),this._renderer=I;var C=this._renderer.GL,P=(P=P||{},this.src=T,this.glTex=void 0,this.glTarget=C.TEXTURE_2D,this.glFormat=P.format||C.RGBA,this.mipmaps=!1,this.glMinFilter=P.minFilter||C.LINEAR,this.glMagFilter=P.magFilter||C.LINEAR,this.glWrapS=P.wrapS||C.CLAMP_TO_EDGE,this.glWrapT=P.wrapT||C.CLAMP_TO_EDGE,this.glDataType=P.dataType||C.UNSIGNED_BYTE,x(I)),I=(this.glFormat!==C.HALF_FLOAT||P.halfFloat||(console.log("This device does not support dataType HALF_FLOAT. Falling back to FLOAT."),this.glDataType=C.FLOAT),this.glFormat!==C.HALF_FLOAT||this.glMinFilter!==C.LINEAR&&this.glMagFilter!==C.LINEAR||P.halfFloatLinear||(console.log("This device does not support linear filtering for dataType FLOAT. Falling back to NEAREST."),this.glMinFilter===C.LINEAR&&(this.glMinFilter=C.NEAREST),this.glMagFilter===C.LINEAR&&(this.glMagFilter=C.NEAREST)),this.glFormat!==C.FLOAT||P.float||(console.log("This device does not support dataType FLOAT. Falling back to UNSIGNED_BYTE."),this.glDataType=C.UNSIGNED_BYTE),this.glFormat!==C.FLOAT||this.glMinFilter!==C.LINEAR&&this.glMagFilter!==C.LINEAR||P.floatLinear||(console.log("This device does not support linear filtering for dataType FLOAT. Falling back to NEAREST."),this.glMinFilter===C.LINEAR&&(this.glMinFilter=C.NEAREST),this.glMagFilter===C.LINEAR&&(this.glMagFilter=C.NEAREST)),this.isSrcMediaElement=l.default.MediaElement!==void 0&&T instanceof l.default.MediaElement,this._videoPrevUpdateTime=0,this.isSrcHTMLElement=l.default.Element!==void 0&&T instanceof l.default.Element&&!(T instanceof l.default.Graphics)&&!(T instanceof l.default.Renderer),this.isSrcP5Image=T instanceof l.default.Image,this.isSrcP5Graphics=T instanceof l.default.Graphics,this.isSrcP5Renderer=T instanceof l.default.Renderer,this.isImageData=typeof ImageData<"u"&&T instanceof ImageData,this.isFramebufferTexture=T instanceof l.default.FramebufferTexture,this._getTextureDataFromSource());return this.width=I.width,this.height=I.height,this.init(I),this}return v(b,[{key:"_getTextureDataFromSource",value:function(){var w;return this.isFramebufferTexture?w=this.src.rawTexture():this.isSrcP5Image?w=this.src.canvas:this.isSrcMediaElement||this.isSrcP5Graphics||this.isSrcP5Renderer||this.isSrcHTMLElement?w=this.src.elt:this.isImageData&&(w=this.src),w}},{key:"init",value:function(w){var T,R=this._renderer.GL;this.isFramebufferTexture||(this.glTex=R.createTexture()),this.glWrapS=this._renderer.textureWrapX,this.glWrapT=this._renderer.textureWrapY,this.setWrapMode(this.glWrapS,this.glWrapT),this.bindTexture(),R.texParameteri(R.TEXTURE_2D,R.TEXTURE_MAG_FILTER,this.glMagFilter),R.texParameteri(R.TEXTURE_2D,R.TEXTURE_MIN_FILTER,this.glMinFilter),this.isFramebufferTexture||(this.width===0||this.height===0||this.isSrcMediaElement&&!this.src.loadedmetadata?(T=new Uint8Array([1,1,1,1]),R.texImage2D(this.glTarget,0,R.RGBA,1,1,0,this.glFormat,this.glDataType,T)):R.texImage2D(this.glTarget,0,this.glFormat,this.glFormat,this.glDataType,w))}},{key:"update",value:function(){var w,T,R,C=this.src;return C.width!==0&&C.height!==0&&!this.isFramebufferTexture&&(w=this._getTextureDataFromSource(),T=!1,R=this._renderer.GL,w.width!==this.width||w.height!==this.height?(T=!0,this.width=w.width||C.width,this.height=w.height||C.height,this.isSrcP5Image?C.setModified(!1):(this.isSrcMediaElement||this.isSrcHTMLElement)&&C.setModified(!0)):this.isSrcP5Image?C.isModified()&&C.setModified(!(T=!0)):this.isSrcMediaElement?C.isModified()?C.setModified(!(T=!0)):C.loadedmetadata&&this._videoPrevUpdateTime!==C.time()&&(this._videoPrevUpdateTime=C.time(),T=!0):this.isImageData?C._dirty&&(T=!(C._dirty=!1)):T=!0,T&&(this.bindTexture(),R.texImage2D(this.glTarget,0,this.glFormat,this.glFormat,this.glDataType,w)),T)}},{key:"bindTexture",value:function(){return this._renderer.GL.bindTexture(this.glTarget,this.getTexture()),this}},{key:"unbindTexture",value:function(){this._renderer.GL.bindTexture(this.glTarget,null)}},{key:"getTexture",value:function(){return this.isFramebufferTexture?this.src.rawTexture():this.glTex}},{key:"setInterpolation",value:function(w,T){var R=this._renderer.GL;this.glMinFilter=this.glFilter(w),this.glMagFilter=this.glFilter(T),this.bindTexture(),R.texParameteri(R.TEXTURE_2D,R.TEXTURE_MIN_FILTER,this.glMinFilter),R.texParameteri(R.TEXTURE_2D,R.TEXTURE_MAG_FILTER,this.glMagFilter),this.unbindTexture()}},{key:"glFilter",value:function(w){var T=this._renderer.GL;return w===u.NEAREST?T.NEAREST:T.LINEAR}},{key:"setWrapMode",value:function(w,T){function R(D){return(D&D-1)==0}var C=this._renderer.GL,I=this._getTextureDataFromSource(),I=I.naturalWidth&&I.naturalHeight?(P=I.naturalWidth,I.naturalHeight):(P=this.width,this.height),P=R(P),I=R(I);w===u.REPEAT?this._renderer.webglVersion===u.WEBGL2||P&&I?this.glWrapS=C.REPEAT:(console.warn("You tried to set the wrap mode to REPEAT but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapS=C.CLAMP_TO_EDGE):w===u.MIRROR?this._renderer.webglVersion===u.WEBGL2||P&&I?this.glWrapS=C.MIRRORED_REPEAT:(console.warn("You tried to set the wrap mode to MIRROR but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapS=C.CLAMP_TO_EDGE):this.glWrapS=C.CLAMP_TO_EDGE,T===u.REPEAT?this._renderer.webglVersion===u.WEBGL2||P&&I?this.glWrapT=C.REPEAT:(console.warn("You tried to set the wrap mode to REPEAT but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapT=C.CLAMP_TO_EDGE):T===u.MIRROR?this._renderer.webglVersion===u.WEBGL2||P&&I?this.glWrapT=C.MIRRORED_REPEAT:(console.warn("You tried to set the wrap mode to MIRROR but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapT=C.CLAMP_TO_EDGE):this.glWrapT=C.CLAMP_TO_EDGE,this.bindTexture(),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_WRAP_S,this.glWrapS),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_WRAP_T,this.glWrapT),this.unbindTexture()}}]),b}();var g=function(b){var w=R;if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function");w.prototype=Object.create(b&&b.prototype,{constructor:{value:w,writable:!0,configurable:!0}}),b&&p(w,b);var T=c(R);function R(C,P,I){return m(this,R),P=(C=T.call(this,C,P,I))._renderer.GL,C.glMinFilter===P.LINEAR&&(C.glMinFilter=P.LINEAR_MIPMAP_LINEAR),C}return v(R,[{key:"glFilter",value:function(C){return this._renderer.GL.LINEAR_MIPMAP_LINEAR}},{key:"_getTextureDataFromSource",value:function(){return this.src}},{key:"init",value:function(C){var P=this._renderer.GL;this.glTex=P.createTexture(),this.bindTexture();for(var I=0;I<C.length;I++)P.texImage2D(this.glTarget,I,this.glFormat,this.glFormat,this.glDataType,C[I]);this.glMinFilter=P.LINEAR_MIPMAP_LINEAR,P.texParameteri(P.TEXTURE_2D,P.TEXTURE_MAG_FILTER,this.glMagFilter),P.texParameteri(P.TEXTURE_2D,P.TEXTURE_MIN_FILTER,this.glMinFilter),this.unbindTexture()}},{key:"update",value:function(){}}]),R}(l.default.Texture);function x(C){var w=C.GL,C=C.webglVersion,T=C===u.WEBGL2?w.getExtension("EXT_color_buffer_float")&&w.getExtension("EXT_float_blend"):w.getExtension("OES_texture_float"),R=T&&w.getExtension("OES_texture_float_linear"),C=C===u.WEBGL2?w.getExtension("EXT_color_buffer_float"):w.getExtension("OES_texture_half_float");return{float:T,floatLinear:R,halfFloat:C,halfFloatLinear:C&&w.getExtension("OES_texture_half_float_linear")}}o.MipmapTexture=g,r=l.default.Texture,o.default=r},{"../core/constants":269,"../core/main":280,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.get-prototype-of":185,"core-js/modules/es.object.to-string":187,"core-js/modules/es.reflect.construct":189,"core-js/modules/es.regexp.to-string":193,"core-js/modules/es.string.iterator":197,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.typed-array.copy-within":210,"core-js/modules/es.typed-array.every":211,"core-js/modules/es.typed-array.fill":212,"core-js/modules/es.typed-array.filter":213,"core-js/modules/es.typed-array.find":215,"core-js/modules/es.typed-array.find-index":214,"core-js/modules/es.typed-array.for-each":218,"core-js/modules/es.typed-array.includes":219,"core-js/modules/es.typed-array.index-of":220,"core-js/modules/es.typed-array.iterator":223,"core-js/modules/es.typed-array.join":224,"core-js/modules/es.typed-array.last-index-of":225,"core-js/modules/es.typed-array.map":226,"core-js/modules/es.typed-array.reduce":228,"core-js/modules/es.typed-array.reduce-right":227,"core-js/modules/es.typed-array.reverse":229,"core-js/modules/es.typed-array.set":230,"core-js/modules/es.typed-array.slice":231,"core-js/modules/es.typed-array.some":232,"core-js/modules/es.typed-array.sort":233,"core-js/modules/es.typed-array.subarray":234,"core-js/modules/es.typed-array.to-locale-string":235,"core-js/modules/es.typed-array.to-string":236,"core-js/modules/es.typed-array.uint8-array":239,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}],340:[function(r,i,o){function s(b){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w})(b)}function a(b){return(a=typeof Symbol=="function"&&s(Symbol.iterator)==="symbol"?function(w){return s(w)}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":s(w)})(b)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.sub"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.sub"),r("core-js/modules/web.dom-collections.iterator");var l,u=(l=r("../core/main"))&&l.__esModule?l:{default:l},h=function(b){if(b&&b.__esModule)return b;if(b===null||a(b)!=="object"&&typeof b!="function")return{default:b};var w=p();if(w&&w.has(b))return w.get(b);var T,R={},C=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(T in b){var P;Object.prototype.hasOwnProperty.call(b,T)&&((P=C?Object.getOwnPropertyDescriptor(b,T):null)&&(P.get||P.set)?Object.defineProperty(R,T,P):R[T]=b[T])}return R.default=b,w&&w.set(b,R),R}(r("../core/constants"));function p(){var b;return typeof WeakMap!="function"?null:(b=new WeakMap,p=function(){return b},b)}function c(b,w){if(!(b instanceof w))throw new TypeError("Cannot call a class as a function")}function f(b,w){for(var T=0;T<w.length;T++){var R=w[T];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(b,R.key,R)}}function m(b,w,T){w&&f(b.prototype,w)}r("./p5.Shader"),r("./p5.RendererGL.Retained"),u.default.RendererGL.prototype._applyTextProperties=function(){},u.default.RendererGL.prototype.textWidth=function(b){return this._isOpenType()?this._textFont._textWidth(b,this._textSize):0};var y=function(){function b(w,T){c(this,b),this.width=w,this.height=T,this.infos=[]}return m(b,[{key:"findImage",value:function(w){var T,R,C=this.width*this.height;if(C<w)throw new Error("font is too complex to render in 3D");for(var P=this.infos.length-1;0<=P;--P){var I=this.infos[P];if(I.index+w<C){R=(T=I).imageData;break}}if(!T){try{R=new ImageData(this.width,this.height)}catch{var D=document.getElementsByTagName("canvas")[0],j=!D,N=(D||((D=document.createElement("canvas")).style.display="none",document.body.appendChild(D)),D.getContext("2d"));N&&(R=N.createImageData(this.width,this.height)),j&&document.body.removeChild(D)}this.infos.push(T={index:0,imageData:R})}return N=T.index,T.index+=w,R._dirty=!0,{imageData:R,index:N}}}]),b}();function v(I,w,T,R,C){var P=I.imageData.data,I=4*I.index++;P[I++]=w,P[I++]=T,P[I++]=R,P[+I]=C}var g=Math.sqrt(3),x=function(){function b(w){c(this,b),this.font=w,this.strokeImageInfos=new y(64,64),this.colDimImageInfos=new y(64,64),this.rowDimImageInfos=new y(64,64),this.colCellImageInfos=new y(64,64),this.rowCellImageInfos=new y(64,64),this.glyphInfos={}}return m(b,[{key:"getGlyphInfo",value:function(w){var T=this.glyphInfos[w.index];if(!T){var R=w.getBoundingBox(),C=R.x1,P=R.y1,I=R.x2-C,D=R.y2-P,j=w.path.commands;if(I==0||D==0||!j.length)return this.glyphInfos[w.index]={};for(var N=[],O=[],W=[],X=8;0<=X;--X)W.push([]);for(X=8;0<=X;--X)O.push([]);var J,ee,V,q,Y=function(){function Ke($e,et,ht,Be){c(this,Ke),this.p0=$e,this.c0=et,this.c1=ht,this.p1=Be}return m(Ke,[{key:"toQuadratic",value:function(){return{x:this.p0.x,y:this.p0.y,x1:this.p1.x,y1:this.p1.y,cx:(3*(this.c0.x+this.c1.x)-(this.p0.x+this.p1.x))/4,cy:(3*(this.c0.y+this.c1.y)-(this.p0.y+this.p1.y))/4}}},{key:"quadError",value:function(){return u.default.Vector.sub(u.default.Vector.sub(this.p1,this.p0),u.default.Vector.mult(u.default.Vector.sub(this.c1,this.c0),3)).mag()/2}},{key:"split",value:function(rt){var et=u.default.Vector.lerp(this.p0,this.c0,rt),Be=u.default.Vector.lerp(this.c0,this.c1,rt),ht=u.default.Vector.lerp(et,Be,rt),Be=(this.c1=u.default.Vector.lerp(this.c1,this.p1,rt),this.c0=u.default.Vector.lerp(Be,this.c1,rt),u.default.Vector.lerp(ht,this.c0,rt)),rt=new Ke(this.p0,et,ht,Be);return this.p0=Be,rt}},{key:"splitInflections",value:function(){var $e=u.default.Vector.sub(this.c0,this.p0),et=u.default.Vector.sub(u.default.Vector.sub(this.c1,this.c0),$e),ht=u.default.Vector.sub(u.default.Vector.sub(u.default.Vector.sub(this.p1,this.c1),$e),u.default.Vector.mult(et,2)),Be=[],rt=et.x*ht.y-et.y*ht.x;return rt!==0&&0<=($e=(ht=$e.x*ht.y-$e.y*ht.x)*ht-4*rt*($e.x*et.y-$e.y*et.x))&&(rt<0&&(rt=-rt,ht=-ht),$e=(-ht+(et=Math.sqrt($e)))/(2*rt),0<(ht=(-ht-et)/(2*rt))&&ht<1&&(Be.push(this.split(ht)),$e=1-(1-$e)/(1-ht)),0<$e&&$e<1&&Be.push(this.split($e))),Be.push(this),Be}}]),Ke}(),Z=!0,ce=!1,B=void 0;try{for(var U,K=j[Symbol.iterator]();!(Z=(U=K.next()).done);Z=!0){var re=U.value,ae=(re.x-C)/I,pe=(re.y-P)/D;if(!fe(J,ee,ae,pe)){switch(re.type){case"M":V=ae,q=pe;break;case"L":_e(J,ee,ae,pe);break;case"Q":var ye=(re.x1-C)/I,Re=(re.y1-P)/D;Ue([J,ae,ye],[ee,pe,Re],{x:J,y:ee,cx:ye,cy:Re});break;case"Z":fe(J,ee,V,q)?N.push({x:J,y:ee}):(_e(J,ee,V,q),N.push({x:V,y:q}));break;case"C":for(var Me=function(ge,be,ke,ht,Be,rt,Ye,de){var ge=new Y(new u.default.Vector(ge,be),new u.default.Vector(ke,ht),new u.default.Vector(Be,rt),new u.default.Vector(Ye,de)).splitInflections(),ue=[],Se=30/g,De=!0,be=!1,ke=void 0;try{for(var ot,Ce=ge[Symbol.iterator]();!(De=(ot=Ce.next()).done);De=!0){for(var it=ot.value,Xe=[],ut=void 0;!(.125<=(ut=Se/it.quadError()));){var bt=Math.pow(ut,.3333333333333333),vt=it.split(bt),Rt=it.split(1-bt/(1-bt));ue.push(vt),Xe.push(it),it=Rt}ut<1&&ue.push(it.split(.5)),ue.push(it),Array.prototype.push.apply(ue,Xe.reverse())}}catch(Dt){be=!0,ke=Dt}finally{try{De||Ce.return==null||Ce.return()}finally{if(be)throw ke}}return ue}(J,ee,(re.x1-C)/I,(re.y1-P)/D,(re.x2-C)/I,(re.y2-P)/D,ae,pe),xe=0;xe<Me.length;xe++){var ve=Me[xe].toQuadratic();Ue([ve.x,ve.x1,ve.cx],[ve.y,ve.y1,ve.cy],ve)}break;default:throw new Error("unknown command type: ".concat(re.type))}J=ae,ee=pe}}}catch(Ke){ce=!0,B=Ke}finally{try{Z||K.return==null||K.return()}finally{if(ce)throw B}}for(var ne=N.length,Te=this.strokeImageInfos.findImage(ne),Pe=Te.index,Ae=0;Ae<ne;++Ae){var je=N[Ae];v(Te,Ge(je.x),Ge(je.y),Ge(je.cx),Ge(je.cy))}(T=this.glyphInfos[w.index]={glyph:w,uGlyphRect:[R.x1,-R.y1,R.x2,-R.y2],strokeImageInfo:Te,strokes:N,colInfo:We(W,this.colDimImageInfos,this.colCellImageInfos),rowInfo:We(O,this.rowDimImageInfos,this.rowCellImageInfos)}).uGridOffset=[T.colInfo.dimOffset,T.rowInfo.dimOffset]}return T;function Ue(Ke,$e,et){var ht=N.length;function Be(ue,Se,De){for(var be=ue.length;0<be--;){var ke=ue[be];ke<Se&&(Se=ke),De<ke&&(De=ke)}return{min:Se,max:De}}N.push(et);for(var et=Be(Ke,1,0),Ke=Math.max(Math.floor(9*et.min-.5),0),rt=Math.min(Math.ceil(9*et.max+.5),9),Ye=Ke;Ye<rt;++Ye)W[Ye].push(ht);for(var et=Be($e,1,0),Ke=Math.max(Math.floor(9*et.min-.5),0),de=Math.min(Math.ceil(9*et.max+.5),9),ge=Ke;ge<de;++ge)O[ge].push(ht)}function Ge(Ke){return(Ke=(et=255)*Ke)<($e=0)?$e:et<Ke?et:Ke;var $e,et}function _e(Ke,$e,et,ht){Ue([Ke,et],[$e,ht],{x:Ke,y:$e,cx:(Ke+et)/2,cy:($e+ht)/2})}function fe(Ke,$e,et,ht){return Math.abs(et-Ke)<1e-5&&Math.abs(ht-$e)<1e-5}function We(Ke,$e,et){for(var ht=Ke.length,Be=$e.findImage(ht),$e=Be.index,rt=0,Ye=0;Ye<ht;++Ye)rt+=Ke[Ye].length;for(var de=et.findImage(rt),ge=0;ge<ht;++ge){var ue=Ke[ge],Se=ue.length,De=de.index;v(Be,De>>7,127&De,Se>>7,127&Se);for(var be=0;be<Se;++be){var ke=ue[be]+Pe;v(de,ke>>7,127&ke,0,0)}}return{cellImageInfo:de,dimOffset:$e,dimImageInfo:Be}}}}]),b}();u.default.RendererGL.prototype._renderText=function(b,w,T,R,C){if(this._textFont&&typeof this._textFont!="string"){if(!(C<=R)&&this._doFill){if(this._isOpenType()){b.push();var C=this._doStroke,P=this.drawMode,I=(this._doStroke=!1,this.drawMode=h.TEXTURE,this._textFont.font),D=(D=this._textFont._fontInfo)||(this._textFont._fontInfo=new x(I)),T=this._textFont._handleAlignment(this,w,T,R),R=this._textSize/I.unitsPerEm,j=(this.translate(T.x,T.y,0),this.scale(R,R,1),this.GL),T=!this._defaultFontShader,N=this._getFontShader(),O=(N.init(),N.bindShader(),T&&(N.setUniform("uGridImageSize",[64,64]),N.setUniform("uCellsImageSize",[64,64]),N.setUniform("uStrokeImageSize",[64,64]),N.setUniform("uGridSize",[9,9])),this._applyColorBlend(this.curFillColor),this.retainedMode.geometry.glyph),W=(O||((R=this._textGeom=new u.default.Geometry(1,1,function(){for(var xe=0;xe<=1;xe++)for(var ve=0;ve<=1;ve++)this.vertices.push(new u.default.Vector(ve,xe,0)),this.uvs.push(ve,xe)})).computeFaces().computeNormals(),O=this.createBuffers("glyph",R)),!0),T=!1,R=void 0;try{for(var X,J=this.retainedMode.buffers.text[Symbol.iterator]();!(W=(X=J.next()).done);W=!0)X.value._prepareBuffer(O,N)}catch(xe){T=!0,R=xe}finally{try{W||J.return==null||J.return()}finally{if(T)throw R}}this._bindBuffer(O.indexBuffer,j.ELEMENT_ARRAY_BUFFER),N.setUniform("uMaterialColor",this.curFillColor),j.pixelStorei(j.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1);try{var ee=0,V=null,q=I.stringToGlyphs(w),Y=!0,Z=!1,ce=void 0;try{for(var B,U=q[Symbol.iterator]();!(Y=(B=U.next()).done);Y=!0){var K,re,ae=B.value,pe=(V&&(ee+=I.getKerningValue(V,ae)),D.getGlyphInfo(ae));pe.uGlyphRect&&(K=pe.rowInfo,re=pe.colInfo,N.setUniform("uSamplerStrokes",pe.strokeImageInfo.imageData),N.setUniform("uSamplerRowStrokes",K.cellImageInfo.imageData),N.setUniform("uSamplerRows",K.dimImageInfo.imageData),N.setUniform("uSamplerColStrokes",re.cellImageInfo.imageData),N.setUniform("uSamplerCols",re.dimImageInfo.imageData),N.setUniform("uGridOffset",pe.uGridOffset),N.setUniform("uGlyphRect",pe.uGlyphRect),N.setUniform("uGlyphOffset",ee),N.bindTextures(),j.drawElements(j.TRIANGLES,6,this.GL.UNSIGNED_SHORT,0)),ee+=ae.advanceWidth,V=ae}}catch(xe){Z=!0,ce=xe}finally{try{Y||U.return==null||U.return()}finally{if(Z)throw ce}}}finally{N.unbindShader(),this._doStroke=C,this.drawMode=P,j.pixelStorei(j.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),b.pop()}}else console.log("WEBGL: only Opentype (.otf) and Truetype (.ttf) fonts are supported");return b}}else console.log("WEBGL: you must load and set a font before drawing text. See `loadFont` and `textFont` for more details.")}},{"../core/constants":269,"../core/main":280,"./p5.RendererGL.Retained":336,"./p5.Shader":338,"core-js/modules/es.array.iterator":164,"core-js/modules/es.object.get-own-property-descriptor":183,"core-js/modules/es.object.to-string":187,"core-js/modules/es.regexp.exec":192,"core-js/modules/es.string.iterator":197,"core-js/modules/es.string.split":203,"core-js/modules/es.string.sub":205,"core-js/modules/es.symbol":209,"core-js/modules/es.symbol.description":207,"core-js/modules/es.symbol.iterator":208,"core-js/modules/es.weak-map":241,"core-js/modules/web.dom-collections.iterator":243}]},{},[264])(264)})})(WA);var vP=WA.exports;const _P=mP(vP);function xP(d,t){return new _P(d,t)}function WS(d){var t;(t=d.current)==null||t.remove(),d.current=null}function bP(d){const{sketch:t,children:n,...r}=d,i=Ot.useRef(null),o=Ot.useRef(null);return Ot.useEffect(()=>{i.current!==null&&(WS(o),o.current=xP(t,i.current))},[t]),Ot.useEffect(()=>{var s,a;(a=(s=o.current)==null?void 0:s.updateWithProps)==null||a.call(s,r)},[r,i]),Ot.useEffect(()=>()=>WS(o),[]),Y0.jsx("div",{ref:i,className:yP,children:n})}function wP(d){const{sketch:t,fallback:n}=d;return t===void 0?(console.error("[ReactP5Wrapper] The `sketch` prop is required."),n!==void 0?Y0.jsx(Y0.Fragment,{children:n}):null):Y0.jsx(bP,{...d})}const SP=Ot.memo(wP,pP);function MP(d){let t=20,n,r,i=[],o=50,s;d.setup=()=>{d.createCanvas(d.windowWidth,d.windowHeight),n=d.floor(d.width/t),r=d.floor(d.height/t),s=d.color(`hsl(${o}, 100%, 75%)`);for(let a=0;a<n;a++){i[a]=[];for(let l=0;l<r;l++)i[a][l]=d.color("rgb(255, 255, 255)")}},d.mouseMoved=()=>{if(!d.focused)return;let a=d.dist(0,0,d.width,d.height);for(let l=0;l<n;l++)for(let u=0;u<r;u++){let h=l*t,p=u*t,c=d.dist(d.mouseX,d.mouseY,h+t/2,p+t/2),f=d.map(c,0,a,1,0);if(c<t*2)o=Math.floor(d.map(l*r+u,0,r*n,0,360,!0)),s=d.color(`hsl(${o}, 100%, 75%)`),i[l][u]=d.lerpColor(i[l][u],s,f*.1);else{i[l][u]=d.lerpColor(i[l][u],d.color("rgb(255, 255, 255)"),.1);let m=i[l][u];d.red(m)>250&&d.green(m)>250&&d.blue(m)>250&&(i[l][u]=d.color("rgb(255, 255, 255)"))}d.fill(i[l][u]),d.noStroke(),d.rect(h,p,t,t)}},d.windowResized=()=>{d.resizeCanvas(d.windowWidth,d.windowHeight),n=d.floor(d.width/t),r=d.floor(d.height/t),i=[];for(let a=0;a<n;a++){i[a]=[];for(let l=0;l<r;l++)i[a][l]=d.color("rgb(255, 255, 255)")}}}/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const kg="172",Yf={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},qf={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},XA=0,Wx=1,YA=2,AP=3,qA=0,o_=1,qm=2,ul=3,Hl=0,mo=1,fl=2,Ou=0,cd=1,Xx=2,Yx=3,qx=4,JA=5,Ic=100,KA=101,QA=102,ZA=103,$A=104,eE=200,tE=201,rE=202,nE=203,ov=204,av=205,iE=206,sE=207,oE=208,aE=209,lE=210,uE=211,cE=212,fE=213,dE=214,lv=0,uv=1,cv=2,wd=3,fv=4,dv=5,hv=6,pv=7,Og=0,hE=1,pE=2,kl=0,mE=1,gE=2,yE=3,Fb=4,vE=5,_E=6,xE=7,Jx="attached",bE="detached",a_=300,Hu=301,Gc=302,mg=303,gg=304,Cp=306,Hc=1e3,ia=1001,hp=1002,fs=1003,l_=1004,EP=1004,td=1005,TP=1005,Ei=1006,ip=1007,CP=1007,La=1008,RP=1008,hl=1009,Nb=1010,Ub=1011,pp=1012,u_=1013,zu=1014,jo=1015,Rp=1016,c_=1017,f_=1018,Sd=1020,Gb=35902,Hb=1021,zb=1022,zs=1023,Vb=1024,Wb=1025,fd=1026,Md=1027,d_=1028,Fg=1029,Xb=1030,h_=1031,PP=1032,p_=1033,Jm=33776,Km=33777,Qm=33778,Zm=33779,mv=35840,gv=35841,yv=35842,vv=35843,_v=36196,xv=37492,bv=37496,wv=37808,Sv=37809,Mv=37810,Av=37811,Ev=37812,Tv=37813,Cv=37814,Rv=37815,Pv=37816,Iv=37817,jv=37818,Lv=37819,Dv=37820,Bv=37821,$m=36492,kv=36494,Ov=36495,Yb=36283,Fv=36284,Nv=36285,Uv=36286,wE=2200,SE=2201,ME=2202,mp=2300,gp=2301,q0=2302,rd=2400,nd=2401,yg=2402,m_=2500,qb=2501,AE=0,Jb=1,Gv=2,EE=3200,TE=3201,IP=3202,jP=3203,Yc=0,CE=1,Iu="",Es="srgb",Ad="srgb-linear",vg="linear",Dn="srgb",LP=0,Jf=7680,DP=7681,BP=7682,kP=7683,OP=34055,FP=34056,NP=5386,UP=512,GP=513,HP=514,zP=515,VP=516,WP=517,XP=518,Kx=519,RE=512,PE=513,IE=514,Kb=515,jE=516,LE=517,DE=518,BE=519,_g=35044,YP=35048,qP=35040,JP=35045,KP=35049,QP=35041,ZP=35046,$P=35050,e3=35042,t3="100",Qx="300 es",dl=2e3,xg=2001;let Wl=class{addEventListener(t,n){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[t]===void 0&&(r[t]=[]),r[t].indexOf(n)===-1&&r[t].push(n)}hasEventListener(t,n){if(this._listeners===void 0)return!1;const r=this._listeners;return r[t]!==void 0&&r[t].indexOf(n)!==-1}removeEventListener(t,n){if(this._listeners===void 0)return;const i=this._listeners[t];if(i!==void 0){const o=i.indexOf(n);o!==-1&&i.splice(o,1)}}dispatchEvent(t){if(this._listeners===void 0)return;const r=this._listeners[t.type];if(r!==void 0){t.target=this;const i=r.slice(0);for(let o=0,s=i.length;o<s;o++)i[o].call(this,t);t.target=null}}};const ks=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let XS=1234567;const dd=Math.PI/180,yp=180/Math.PI;function aa(){const d=Math.random()*4294967295|0,t=Math.random()*4294967295|0,n=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(ks[d&255]+ks[d>>8&255]+ks[d>>16&255]+ks[d>>24&255]+"-"+ks[t&255]+ks[t>>8&255]+"-"+ks[t>>16&15|64]+ks[t>>24&255]+"-"+ks[n&63|128]+ks[n>>8&255]+"-"+ks[n>>16&255]+ks[n>>24&255]+ks[r&255]+ks[r>>8&255]+ks[r>>16&255]+ks[r>>24&255]).toLowerCase()}function Ur(d,t,n){return Math.max(t,Math.min(n,d))}function Qb(d,t){return(d%t+t)%t}function r3(d,t,n,r,i){return r+(d-t)*(i-r)/(n-t)}function n3(d,t,n){return d!==t?(n-d)/(t-d):0}function eg(d,t,n){return(1-n)*d+n*t}function i3(d,t,n,r){return eg(d,t,1-Math.exp(-n*r))}function s3(d,t=1){return t-Math.abs(Qb(d,t*2)-t)}function o3(d,t,n){return d<=t?0:d>=n?1:(d=(d-t)/(n-t),d*d*(3-2*d))}function a3(d,t,n){return d<=t?0:d>=n?1:(d=(d-t)/(n-t),d*d*d*(d*(d*6-15)+10))}function l3(d,t){return d+Math.floor(Math.random()*(t-d+1))}function u3(d,t){return d+Math.random()*(t-d)}function c3(d){return d*(.5-Math.random())}function f3(d){d!==void 0&&(XS=d);let t=XS+=1831565813;return t=Math.imul(t^t>>>15,t|1),t^=t+Math.imul(t^t>>>7,t|61),((t^t>>>14)>>>0)/4294967296}function d3(d){return d*dd}function h3(d){return d*yp}function p3(d){return(d&d-1)===0&&d!==0}function m3(d){return Math.pow(2,Math.ceil(Math.log(d)/Math.LN2))}function g3(d){return Math.pow(2,Math.floor(Math.log(d)/Math.LN2))}function y3(d,t,n,r,i){const o=Math.cos,s=Math.sin,a=o(n/2),l=s(n/2),u=o((t+r)/2),h=s((t+r)/2),p=o((t-r)/2),c=s((t-r)/2),f=o((r-t)/2),m=s((r-t)/2);switch(i){case"XYX":d.set(a*h,l*p,l*c,a*u);break;case"YZY":d.set(l*c,a*h,l*p,a*u);break;case"ZXZ":d.set(l*p,l*c,a*h,a*u);break;case"XZX":d.set(a*h,l*m,l*f,a*u);break;case"YXY":d.set(l*f,a*h,l*m,a*u);break;case"ZYZ":d.set(l*m,l*f,a*h,a*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function fo(d,t){switch(t.constructor){case Float32Array:return d;case Uint32Array:return d/4294967295;case Uint16Array:return d/65535;case Uint8Array:return d/255;case Int32Array:return Math.max(d/2147483647,-1);case Int16Array:return Math.max(d/32767,-1);case Int8Array:return Math.max(d/127,-1);default:throw new Error("Invalid component type.")}}function Yr(d,t){switch(t.constructor){case Float32Array:return d;case Uint32Array:return Math.round(d*4294967295);case Uint16Array:return Math.round(d*65535);case Uint8Array:return Math.round(d*255);case Int32Array:return Math.round(d*2147483647);case Int16Array:return Math.round(d*32767);case Int8Array:return Math.round(d*127);default:throw new Error("Invalid component type.")}}const kE={DEG2RAD:dd,RAD2DEG:yp,generateUUID:aa,clamp:Ur,euclideanModulo:Qb,mapLinear:r3,inverseLerp:n3,lerp:eg,damp:i3,pingpong:s3,smoothstep:o3,smootherstep:a3,randInt:l3,randFloat:u3,randFloatSpread:c3,seededRandom:f3,degToRad:d3,radToDeg:h3,isPowerOfTwo:p3,ceilPowerOfTwo:m3,floorPowerOfTwo:g3,setQuaternionFromProperEuler:y3,normalize:Yr,denormalize:fo};class Ct{constructor(t=0,n=0){Ct.prototype.isVector2=!0,this.x=t,this.y=n}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,n){return this.x=t,this.y=n,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,n){switch(t){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,n){return this.x=t.x+n.x,this.y=t.y+n.y,this}addScaledVector(t,n){return this.x+=t.x*n,this.y+=t.y*n,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,n){return this.x=t.x-n.x,this.y=t.y-n.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const n=this.x,r=this.y,i=t.elements;return this.x=i[0]*n+i[3]*r+i[6],this.y=i[1]*n+i[4]*r+i[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,n){return this.x=Ur(this.x,t.x,n.x),this.y=Ur(this.y,t.y,n.y),this}clampScalar(t,n){return this.x=Ur(this.x,t,n),this.y=Ur(this.y,t,n),this}clampLength(t,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Ur(r,t,n))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(t){const n=Math.sqrt(this.lengthSq()*t.lengthSq());if(n===0)return Math.PI/2;const r=this.dot(t)/n;return Math.acos(Ur(r,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const n=this.x-t.x,r=this.y-t.y;return n*n+r*r}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,n){return this.x+=(t.x-this.x)*n,this.y+=(t.y-this.y)*n,this}lerpVectors(t,n,r){return this.x=t.x+(n.x-t.x)*r,this.y=t.y+(n.y-t.y)*r,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,n=0){return this.x=t[n],this.y=t[n+1],this}toArray(t=[],n=0){return t[n]=this.x,t[n+1]=this.y,t}fromBufferAttribute(t,n){return this.x=t.getX(n),this.y=t.getY(n),this}rotateAround(t,n){const r=Math.cos(n),i=Math.sin(n),o=this.x-t.x,s=this.y-t.y;return this.x=o*r-s*i+t.x,this.y=o*i+s*r+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Vr{constructor(t,n,r,i,o,s,a,l,u){Vr.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],t!==void 0&&this.set(t,n,r,i,o,s,a,l,u)}set(t,n,r,i,o,s,a,l,u){const h=this.elements;return h[0]=t,h[1]=i,h[2]=a,h[3]=n,h[4]=o,h[5]=l,h[6]=r,h[7]=s,h[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const n=this.elements,r=t.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],this}extractBasis(t,n,r){return t.setFromMatrix3Column(this,0),n.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const n=t.elements;return this.set(n[0],n[4],n[8],n[1],n[5],n[9],n[2],n[6],n[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,n){const r=t.elements,i=n.elements,o=this.elements,s=r[0],a=r[3],l=r[6],u=r[1],h=r[4],p=r[7],c=r[2],f=r[5],m=r[8],y=i[0],v=i[3],g=i[6],x=i[1],b=i[4],w=i[7],T=i[2],R=i[5],C=i[8];return o[0]=s*y+a*x+l*T,o[3]=s*v+a*b+l*R,o[6]=s*g+a*w+l*C,o[1]=u*y+h*x+p*T,o[4]=u*v+h*b+p*R,o[7]=u*g+h*w+p*C,o[2]=c*y+f*x+m*T,o[5]=c*v+f*b+m*R,o[8]=c*g+f*w+m*C,this}multiplyScalar(t){const n=this.elements;return n[0]*=t,n[3]*=t,n[6]*=t,n[1]*=t,n[4]*=t,n[7]*=t,n[2]*=t,n[5]*=t,n[8]*=t,this}determinant(){const t=this.elements,n=t[0],r=t[1],i=t[2],o=t[3],s=t[4],a=t[5],l=t[6],u=t[7],h=t[8];return n*s*h-n*a*u-r*o*h+r*a*l+i*o*u-i*s*l}invert(){const t=this.elements,n=t[0],r=t[1],i=t[2],o=t[3],s=t[4],a=t[5],l=t[6],u=t[7],h=t[8],p=h*s-a*u,c=a*l-h*o,f=u*o-s*l,m=n*p+r*c+i*f;if(m===0)return this.set(0,0,0,0,0,0,0,0,0);const y=1/m;return t[0]=p*y,t[1]=(i*u-h*r)*y,t[2]=(a*r-i*s)*y,t[3]=c*y,t[4]=(h*n-i*l)*y,t[5]=(i*o-a*n)*y,t[6]=f*y,t[7]=(r*l-u*n)*y,t[8]=(s*n-r*o)*y,this}transpose(){let t;const n=this.elements;return t=n[1],n[1]=n[3],n[3]=t,t=n[2],n[2]=n[6],n[6]=t,t=n[5],n[5]=n[7],n[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const n=this.elements;return t[0]=n[0],t[1]=n[3],t[2]=n[6],t[3]=n[1],t[4]=n[4],t[5]=n[7],t[6]=n[2],t[7]=n[5],t[8]=n[8],this}setUvTransform(t,n,r,i,o,s,a){const l=Math.cos(o),u=Math.sin(o);return this.set(r*l,r*u,-r*(l*s+u*a)+s+t,-i*u,i*l,-i*(-u*s+l*a)+a+n,0,0,1),this}scale(t,n){return this.premultiply(b1.makeScale(t,n)),this}rotate(t){return this.premultiply(b1.makeRotation(-t)),this}translate(t,n){return this.premultiply(b1.makeTranslation(t,n)),this}makeTranslation(t,n){return t.isVector2?this.set(1,0,t.x,0,1,t.y,0,0,1):this.set(1,0,t,0,1,n,0,0,1),this}makeRotation(t){const n=Math.cos(t),r=Math.sin(t);return this.set(n,-r,0,r,n,0,0,0,1),this}makeScale(t,n){return this.set(t,0,0,0,n,0,0,0,1),this}equals(t){const n=this.elements,r=t.elements;for(let i=0;i<9;i++)if(n[i]!==r[i])return!1;return!0}fromArray(t,n=0){for(let r=0;r<9;r++)this.elements[r]=t[r+n];return this}toArray(t=[],n=0){const r=this.elements;return t[n]=r[0],t[n+1]=r[1],t[n+2]=r[2],t[n+3]=r[3],t[n+4]=r[4],t[n+5]=r[5],t[n+6]=r[6],t[n+7]=r[7],t[n+8]=r[8],t}clone(){return new this.constructor().fromArray(this.elements)}}const b1=new Vr;function OE(d){for(let t=d.length-1;t>=0;--t)if(d[t]>=65535)return!0;return!1}const v3={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Qh(d,t){return new v3[d](t)}function bg(d){return document.createElementNS("http://www.w3.org/1999/xhtml",d)}function FE(){const d=bg("canvas");return d.style.display="block",d}const YS={};function Xh(d){d in YS||(YS[d]=!0,console.warn(d))}function _3(d,t,n){return new Promise(function(r,i){function o(){switch(d.clientWaitSync(t,d.SYNC_FLUSH_COMMANDS_BIT,0)){case d.WAIT_FAILED:i();break;case d.TIMEOUT_EXPIRED:setTimeout(o,n);break;default:r()}}setTimeout(o,n)})}function x3(d){const t=d.elements;t[2]=.5*t[2]+.5*t[3],t[6]=.5*t[6]+.5*t[7],t[10]=.5*t[10]+.5*t[11],t[14]=.5*t[14]+.5*t[15]}function b3(d){const t=d.elements;t[11]===-1?(t[10]=-t[10]-1,t[14]=-t[14]):(t[10]=-t[10],t[14]=-t[14]+1)}const qS=new Vr().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),JS=new Vr().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function w3(){const d={enabled:!0,workingColorSpace:Ad,spaces:{},convert:function(i,o,s){return this.enabled===!1||o===s||!o||!s||(this.spaces[o].transfer===Dn&&(i.r=Fu(i.r),i.g=Fu(i.g),i.b=Fu(i.b)),this.spaces[o].primaries!==this.spaces[s].primaries&&(i.applyMatrix3(this.spaces[o].toXYZ),i.applyMatrix3(this.spaces[s].fromXYZ)),this.spaces[s].transfer===Dn&&(i.r=sp(i.r),i.g=sp(i.g),i.b=sp(i.b))),i},fromWorkingColorSpace:function(i,o){return this.convert(i,this.workingColorSpace,o)},toWorkingColorSpace:function(i,o){return this.convert(i,o,this.workingColorSpace)},getPrimaries:function(i){return this.spaces[i].primaries},getTransfer:function(i){return i===Iu?vg:this.spaces[i].transfer},getLuminanceCoefficients:function(i,o=this.workingColorSpace){return i.fromArray(this.spaces[o].luminanceCoefficients)},define:function(i){Object.assign(this.spaces,i)},_getMatrix:function(i,o,s){return i.copy(this.spaces[o].toXYZ).multiply(this.spaces[s].fromXYZ)},_getDrawingBufferColorSpace:function(i){return this.spaces[i].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(i=this.workingColorSpace){return this.spaces[i].workingColorSpaceConfig.unpackColorSpace}},t=[.64,.33,.3,.6,.15,.06],n=[.2126,.7152,.0722],r=[.3127,.329];return d.define({[Ad]:{primaries:t,whitePoint:r,transfer:vg,toXYZ:qS,fromXYZ:JS,luminanceCoefficients:n,workingColorSpaceConfig:{unpackColorSpace:Es},outputColorSpaceConfig:{drawingBufferColorSpace:Es}},[Es]:{primaries:t,whitePoint:r,transfer:Dn,toXYZ:qS,fromXYZ:JS,luminanceCoefficients:n,outputColorSpaceConfig:{drawingBufferColorSpace:Es}}}),d}const vn=w3();function Fu(d){return d<.04045?d*.0773993808:Math.pow(d*.9478672986+.0521327014,2.4)}function sp(d){return d<.0031308?d*12.92:1.055*Math.pow(d,.41666)-.055}let Sh;class NE{static getDataURL(t){if(/^data:/i.test(t.src)||typeof HTMLCanvasElement>"u")return t.src;let n;if(t instanceof HTMLCanvasElement)n=t;else{Sh===void 0&&(Sh=bg("canvas")),Sh.width=t.width,Sh.height=t.height;const r=Sh.getContext("2d");t instanceof ImageData?r.putImageData(t,0,0):r.drawImage(t,0,0,t.width,t.height),n=Sh}return n.width>2048||n.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",t),n.toDataURL("image/jpeg",.6)):n.toDataURL("image/png")}static sRGBToLinear(t){if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap){const n=bg("canvas");n.width=t.width,n.height=t.height;const r=n.getContext("2d");r.drawImage(t,0,0,t.width,t.height);const i=r.getImageData(0,0,t.width,t.height),o=i.data;for(let s=0;s<o.length;s++)o[s]=Fu(o[s]/255)*255;return r.putImageData(i,0,0),n}else if(t.data){const n=t.data.slice(0);for(let r=0;r<n.length;r++)n instanceof Uint8Array||n instanceof Uint8ClampedArray?n[r]=Math.floor(Fu(n[r]/255)*255):n[r]=Fu(n[r]);return{data:n,width:t.width,height:t.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}}let S3=0;class id{constructor(t=null){this.isSource=!0,Object.defineProperty(this,"id",{value:S3++}),this.uuid=aa(),this.data=t,this.dataReady=!0,this.version=0}set needsUpdate(t){t===!0&&this.version++}toJSON(t){const n=t===void 0||typeof t=="string";if(!n&&t.images[this.uuid]!==void 0)return t.images[this.uuid];const r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let o;if(Array.isArray(i)){o=[];for(let s=0,a=i.length;s<a;s++)i[s].isDataTexture?o.push(w1(i[s].image)):o.push(w1(i[s]))}else o=w1(i);r.url=o}return n||(t.images[this.uuid]=r),r}}function w1(d){return typeof HTMLImageElement<"u"&&d instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&d instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&d instanceof ImageBitmap?NE.getDataURL(d):d.data?{data:Array.from(d.data),width:d.width,height:d.height,type:d.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let M3=0;class ei extends Wl{constructor(t=ei.DEFAULT_IMAGE,n=ei.DEFAULT_MAPPING,r=ia,i=ia,o=Ei,s=La,a=zs,l=hl,u=ei.DEFAULT_ANISOTROPY,h=Iu){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:M3++}),this.uuid=aa(),this.name="",this.source=new id(t),this.mipmaps=[],this.mapping=n,this.channel=0,this.wrapS=r,this.wrapT=i,this.magFilter=o,this.minFilter=s,this.anisotropy=u,this.format=a,this.internalFormat=null,this.type=l,this.offset=new Ct(0,0),this.repeat=new Ct(1,1),this.center=new Ct(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Vr,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=h,this.userData={},this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(t=null){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.channel=t.channel,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.colorSpace=t.colorSpace,this.renderTarget=t.renderTarget,this.isRenderTargetTexture=t.isRenderTargetTexture,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){const n=t===void 0||typeof t=="string";if(!n&&t.textures[this.uuid]!==void 0)return t.textures[this.uuid];const r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),n||(t.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(this.mapping!==a_)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case Hc:t.x=t.x-Math.floor(t.x);break;case ia:t.x=t.x<0?0:1;break;case hp:Math.abs(Math.floor(t.x)%2)===1?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x);break}if(t.y<0||t.y>1)switch(this.wrapT){case Hc:t.y=t.y-Math.floor(t.y);break;case ia:t.y=t.y<0?0:1;break;case hp:Math.abs(Math.floor(t.y)%2)===1?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y);break}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){t===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(t){t===!0&&this.pmremVersion++}}ei.DEFAULT_IMAGE=null;ei.DEFAULT_MAPPING=a_;ei.DEFAULT_ANISOTROPY=1;class bn{constructor(t=0,n=0,r=0,i=1){bn.prototype.isVector4=!0,this.x=t,this.y=n,this.z=r,this.w=i}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,n,r,i){return this.x=t,this.y=n,this.z=r,this.w=i,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,n){switch(t){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w!==void 0?t.w:1,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,n){return this.x=t.x+n.x,this.y=t.y+n.y,this.z=t.z+n.z,this.w=t.w+n.w,this}addScaledVector(t,n){return this.x+=t.x*n,this.y+=t.y*n,this.z+=t.z*n,this.w+=t.w*n,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,n){return this.x=t.x-n.x,this.y=t.y-n.y,this.z=t.z-n.z,this.w=t.w-n.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const n=this.x,r=this.y,i=this.z,o=this.w,s=t.elements;return this.x=s[0]*n+s[4]*r+s[8]*i+s[12]*o,this.y=s[1]*n+s[5]*r+s[9]*i+s[13]*o,this.z=s[2]*n+s[6]*r+s[10]*i+s[14]*o,this.w=s[3]*n+s[7]*r+s[11]*i+s[15]*o,this}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this.w/=t.w,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const n=Math.sqrt(1-t.w*t.w);return n<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/n,this.y=t.y/n,this.z=t.z/n),this}setAxisAngleFromRotationMatrix(t){let n,r,i,o;const l=t.elements,u=l[0],h=l[4],p=l[8],c=l[1],f=l[5],m=l[9],y=l[2],v=l[6],g=l[10];if(Math.abs(h-c)<.01&&Math.abs(p-y)<.01&&Math.abs(m-v)<.01){if(Math.abs(h+c)<.1&&Math.abs(p+y)<.1&&Math.abs(m+v)<.1&&Math.abs(u+f+g-3)<.1)return this.set(1,0,0,0),this;n=Math.PI;const b=(u+1)/2,w=(f+1)/2,T=(g+1)/2,R=(h+c)/4,C=(p+y)/4,P=(m+v)/4;return b>w&&b>T?b<.01?(r=0,i=.707106781,o=.707106781):(r=Math.sqrt(b),i=R/r,o=C/r):w>T?w<.01?(r=.707106781,i=0,o=.707106781):(i=Math.sqrt(w),r=R/i,o=P/i):T<.01?(r=.707106781,i=.707106781,o=0):(o=Math.sqrt(T),r=C/o,i=P/o),this.set(r,i,o,n),this}let x=Math.sqrt((v-m)*(v-m)+(p-y)*(p-y)+(c-h)*(c-h));return Math.abs(x)<.001&&(x=1),this.x=(v-m)/x,this.y=(p-y)/x,this.z=(c-h)/x,this.w=Math.acos((u+f+g-1)/2),this}setFromMatrixPosition(t){const n=t.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this.w=n[15],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,n){return this.x=Ur(this.x,t.x,n.x),this.y=Ur(this.y,t.y,n.y),this.z=Ur(this.z,t.z,n.z),this.w=Ur(this.w,t.w,n.w),this}clampScalar(t,n){return this.x=Ur(this.x,t,n),this.y=Ur(this.y,t,n),this.z=Ur(this.z,t,n),this.w=Ur(this.w,t,n),this}clampLength(t,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Ur(r,t,n))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,n){return this.x+=(t.x-this.x)*n,this.y+=(t.y-this.y)*n,this.z+=(t.z-this.z)*n,this.w+=(t.w-this.w)*n,this}lerpVectors(t,n,r){return this.x=t.x+(n.x-t.x)*r,this.y=t.y+(n.y-t.y)*r,this.z=t.z+(n.z-t.z)*r,this.w=t.w+(n.w-t.w)*r,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,n=0){return this.x=t[n],this.y=t[n+1],this.z=t[n+2],this.w=t[n+3],this}toArray(t=[],n=0){return t[n]=this.x,t[n+1]=this.y,t[n+2]=this.z,t[n+3]=this.w,t}fromBufferAttribute(t,n){return this.x=t.getX(n),this.y=t.getY(n),this.z=t.getZ(n),this.w=t.getW(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class g_ extends Wl{constructor(t=1,n=1,r={}){super(),this.isRenderTarget=!0,this.width=t,this.height=n,this.depth=1,this.scissor=new bn(0,0,t,n),this.scissorTest=!1,this.viewport=new bn(0,0,t,n);const i={width:t,height:n,depth:1};r=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Ei,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},r);const o=new ei(i,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.colorSpace);o.flipY=!1,o.generateMipmaps=r.generateMipmaps,o.internalFormat=r.internalFormat,this.textures=[];const s=r.count;for(let a=0;a<s;a++)this.textures[a]=o.clone(),this.textures[a].isRenderTargetTexture=!0,this.textures[a].renderTarget=this;this.depthBuffer=r.depthBuffer,this.stencilBuffer=r.stencilBuffer,this.resolveDepthBuffer=r.resolveDepthBuffer,this.resolveStencilBuffer=r.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=r.depthTexture,this.samples=r.samples}get texture(){return this.textures[0]}set texture(t){this.textures[0]=t}set depthTexture(t){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),t!==null&&(t.renderTarget=this),this._depthTexture=t}get depthTexture(){return this._depthTexture}setSize(t,n,r=1){if(this.width!==t||this.height!==n||this.depth!==r){this.width=t,this.height=n,this.depth=r;for(let i=0,o=this.textures.length;i<o;i++)this.textures[i].image.width=t,this.textures[i].image.height=n,this.textures[i].image.depth=r;this.dispose()}this.viewport.set(0,0,t,n),this.scissor.set(0,0,t,n)}clone(){return new this.constructor().copy(this)}copy(t){this.width=t.width,this.height=t.height,this.depth=t.depth,this.scissor.copy(t.scissor),this.scissorTest=t.scissorTest,this.viewport.copy(t.viewport),this.textures.length=0;for(let r=0,i=t.textures.length;r<i;r++)this.textures[r]=t.textures[r].clone(),this.textures[r].isRenderTargetTexture=!0,this.textures[r].renderTarget=this;const n=Object.assign({},t.texture.image);return this.texture.source=new id(n),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.resolveDepthBuffer=t.resolveDepthBuffer,this.resolveStencilBuffer=t.resolveStencilBuffer,t.depthTexture!==null&&(this.depthTexture=t.depthTexture.clone()),this.samples=t.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class zl extends g_{constructor(t=1,n=1,r={}){super(t,n,r),this.isWebGLRenderTarget=!0}}class Ng extends ei{constructor(t=null,n=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:t,width:n,height:r,depth:i},this.magFilter=fs,this.minFilter=fs,this.wrapR=ia,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(t){this.layerUpdates.add(t)}clearLayerUpdates(){this.layerUpdates.clear()}}class A3 extends zl{constructor(t=1,n=1,r=1,i={}){super(t,n,i),this.isWebGLArrayRenderTarget=!0,this.depth=r,this.texture=new Ng(null,t,n,r),this.texture.isRenderTargetTexture=!0}}class y_ extends ei{constructor(t=null,n=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:t,width:n,height:r,depth:i},this.magFilter=fs,this.minFilter=fs,this.wrapR=ia,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class E3 extends zl{constructor(t=1,n=1,r=1,i={}){super(t,n,i),this.isWebGL3DRenderTarget=!0,this.depth=r,this.texture=new y_(null,t,n,r),this.texture.isRenderTargetTexture=!0}}class ds{constructor(t=0,n=0,r=0,i=1){this.isQuaternion=!0,this._x=t,this._y=n,this._z=r,this._w=i}static slerpFlat(t,n,r,i,o,s,a){let l=r[i+0],u=r[i+1],h=r[i+2],p=r[i+3];const c=o[s+0],f=o[s+1],m=o[s+2],y=o[s+3];if(a===0){t[n+0]=l,t[n+1]=u,t[n+2]=h,t[n+3]=p;return}if(a===1){t[n+0]=c,t[n+1]=f,t[n+2]=m,t[n+3]=y;return}if(p!==y||l!==c||u!==f||h!==m){let v=1-a;const g=l*c+u*f+h*m+p*y,x=g>=0?1:-1,b=1-g*g;if(b>Number.EPSILON){const T=Math.sqrt(b),R=Math.atan2(T,g*x);v=Math.sin(v*R)/T,a=Math.sin(a*R)/T}const w=a*x;if(l=l*v+c*w,u=u*v+f*w,h=h*v+m*w,p=p*v+y*w,v===1-a){const T=1/Math.sqrt(l*l+u*u+h*h+p*p);l*=T,u*=T,h*=T,p*=T}}t[n]=l,t[n+1]=u,t[n+2]=h,t[n+3]=p}static multiplyQuaternionsFlat(t,n,r,i,o,s){const a=r[i],l=r[i+1],u=r[i+2],h=r[i+3],p=o[s],c=o[s+1],f=o[s+2],m=o[s+3];return t[n]=a*m+h*p+l*f-u*c,t[n+1]=l*m+h*c+u*p-a*f,t[n+2]=u*m+h*f+a*c-l*p,t[n+3]=h*m-a*p-l*c-u*f,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,n,r,i){return this._x=t,this._y=n,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,n=!0){const r=t._x,i=t._y,o=t._z,s=t._order,a=Math.cos,l=Math.sin,u=a(r/2),h=a(i/2),p=a(o/2),c=l(r/2),f=l(i/2),m=l(o/2);switch(s){case"XYZ":this._x=c*h*p+u*f*m,this._y=u*f*p-c*h*m,this._z=u*h*m+c*f*p,this._w=u*h*p-c*f*m;break;case"YXZ":this._x=c*h*p+u*f*m,this._y=u*f*p-c*h*m,this._z=u*h*m-c*f*p,this._w=u*h*p+c*f*m;break;case"ZXY":this._x=c*h*p-u*f*m,this._y=u*f*p+c*h*m,this._z=u*h*m+c*f*p,this._w=u*h*p-c*f*m;break;case"ZYX":this._x=c*h*p-u*f*m,this._y=u*f*p+c*h*m,this._z=u*h*m-c*f*p,this._w=u*h*p+c*f*m;break;case"YZX":this._x=c*h*p+u*f*m,this._y=u*f*p+c*h*m,this._z=u*h*m-c*f*p,this._w=u*h*p-c*f*m;break;case"XZY":this._x=c*h*p-u*f*m,this._y=u*f*p-c*h*m,this._z=u*h*m+c*f*p,this._w=u*h*p+c*f*m;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return n===!0&&this._onChangeCallback(),this}setFromAxisAngle(t,n){const r=n/2,i=Math.sin(r);return this._x=t.x*i,this._y=t.y*i,this._z=t.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(t){const n=t.elements,r=n[0],i=n[4],o=n[8],s=n[1],a=n[5],l=n[9],u=n[2],h=n[6],p=n[10],c=r+a+p;if(c>0){const f=.5/Math.sqrt(c+1);this._w=.25/f,this._x=(h-l)*f,this._y=(o-u)*f,this._z=(s-i)*f}else if(r>a&&r>p){const f=2*Math.sqrt(1+r-a-p);this._w=(h-l)/f,this._x=.25*f,this._y=(i+s)/f,this._z=(o+u)/f}else if(a>p){const f=2*Math.sqrt(1+a-r-p);this._w=(o-u)/f,this._x=(i+s)/f,this._y=.25*f,this._z=(l+h)/f}else{const f=2*Math.sqrt(1+p-r-a);this._w=(s-i)/f,this._x=(o+u)/f,this._y=(l+h)/f,this._z=.25*f}return this._onChangeCallback(),this}setFromUnitVectors(t,n){let r=t.dot(n)+1;return r<Number.EPSILON?(r=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=r):(this._x=0,this._y=-t.z,this._z=t.y,this._w=r)):(this._x=t.y*n.z-t.z*n.y,this._y=t.z*n.x-t.x*n.z,this._z=t.x*n.y-t.y*n.x,this._w=r),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(Ur(this.dot(t),-1,1)))}rotateTowards(t,n){const r=this.angleTo(t);if(r===0)return this;const i=Math.min(1,n/r);return this.slerp(t,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return t===0?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,n){const r=t._x,i=t._y,o=t._z,s=t._w,a=n._x,l=n._y,u=n._z,h=n._w;return this._x=r*h+s*a+i*u-o*l,this._y=i*h+s*l+o*a-r*u,this._z=o*h+s*u+r*l-i*a,this._w=s*h-r*a-i*l-o*u,this._onChangeCallback(),this}slerp(t,n){if(n===0)return this;if(n===1)return this.copy(t);const r=this._x,i=this._y,o=this._z,s=this._w;let a=s*t._w+r*t._x+i*t._y+o*t._z;if(a<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,a=-a):this.copy(t),a>=1)return this._w=s,this._x=r,this._y=i,this._z=o,this;const l=1-a*a;if(l<=Number.EPSILON){const f=1-n;return this._w=f*s+n*this._w,this._x=f*r+n*this._x,this._y=f*i+n*this._y,this._z=f*o+n*this._z,this.normalize(),this}const u=Math.sqrt(l),h=Math.atan2(u,a),p=Math.sin((1-n)*h)/u,c=Math.sin(n*h)/u;return this._w=s*p+this._w*c,this._x=r*p+this._x*c,this._y=i*p+this._y*c,this._z=o*p+this._z*c,this._onChangeCallback(),this}slerpQuaternions(t,n,r){return this.copy(t).slerp(n,r)}random(){const t=2*Math.PI*Math.random(),n=2*Math.PI*Math.random(),r=Math.random(),i=Math.sqrt(1-r),o=Math.sqrt(r);return this.set(i*Math.sin(t),i*Math.cos(t),o*Math.sin(n),o*Math.cos(n))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,n=0){return this._x=t[n],this._y=t[n+1],this._z=t[n+2],this._w=t[n+3],this._onChangeCallback(),this}toArray(t=[],n=0){return t[n]=this._x,t[n+1]=this._y,t[n+2]=this._z,t[n+3]=this._w,t}fromBufferAttribute(t,n){return this._x=t.getX(n),this._y=t.getY(n),this._z=t.getZ(n),this._w=t.getW(n),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Oe{constructor(t=0,n=0,r=0){Oe.prototype.isVector3=!0,this.x=t,this.y=n,this.z=r}set(t,n,r){return r===void 0&&(r=this.z),this.x=t,this.y=n,this.z=r,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,n){switch(t){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,n){return this.x=t.x+n.x,this.y=t.y+n.y,this.z=t.z+n.z,this}addScaledVector(t,n){return this.x+=t.x*n,this.y+=t.y*n,this.z+=t.z*n,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,n){return this.x=t.x-n.x,this.y=t.y-n.y,this.z=t.z-n.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,n){return this.x=t.x*n.x,this.y=t.y*n.y,this.z=t.z*n.z,this}applyEuler(t){return this.applyQuaternion(KS.setFromEuler(t))}applyAxisAngle(t,n){return this.applyQuaternion(KS.setFromAxisAngle(t,n))}applyMatrix3(t){const n=this.x,r=this.y,i=this.z,o=t.elements;return this.x=o[0]*n+o[3]*r+o[6]*i,this.y=o[1]*n+o[4]*r+o[7]*i,this.z=o[2]*n+o[5]*r+o[8]*i,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const n=this.x,r=this.y,i=this.z,o=t.elements,s=1/(o[3]*n+o[7]*r+o[11]*i+o[15]);return this.x=(o[0]*n+o[4]*r+o[8]*i+o[12])*s,this.y=(o[1]*n+o[5]*r+o[9]*i+o[13])*s,this.z=(o[2]*n+o[6]*r+o[10]*i+o[14])*s,this}applyQuaternion(t){const n=this.x,r=this.y,i=this.z,o=t.x,s=t.y,a=t.z,l=t.w,u=2*(s*i-a*r),h=2*(a*n-o*i),p=2*(o*r-s*n);return this.x=n+l*u+s*p-a*h,this.y=r+l*h+a*u-o*p,this.z=i+l*p+o*h-s*u,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const n=this.x,r=this.y,i=this.z,o=t.elements;return this.x=o[0]*n+o[4]*r+o[8]*i,this.y=o[1]*n+o[5]*r+o[9]*i,this.z=o[2]*n+o[6]*r+o[10]*i,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,n){return this.x=Ur(this.x,t.x,n.x),this.y=Ur(this.y,t.y,n.y),this.z=Ur(this.z,t.z,n.z),this}clampScalar(t,n){return this.x=Ur(this.x,t,n),this.y=Ur(this.y,t,n),this.z=Ur(this.z,t,n),this}clampLength(t,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Ur(r,t,n))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,n){return this.x+=(t.x-this.x)*n,this.y+=(t.y-this.y)*n,this.z+=(t.z-this.z)*n,this}lerpVectors(t,n,r){return this.x=t.x+(n.x-t.x)*r,this.y=t.y+(n.y-t.y)*r,this.z=t.z+(n.z-t.z)*r,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,n){const r=t.x,i=t.y,o=t.z,s=n.x,a=n.y,l=n.z;return this.x=i*l-o*a,this.y=o*s-r*l,this.z=r*a-i*s,this}projectOnVector(t){const n=t.lengthSq();if(n===0)return this.set(0,0,0);const r=t.dot(this)/n;return this.copy(t).multiplyScalar(r)}projectOnPlane(t){return S1.copy(this).projectOnVector(t),this.sub(S1)}reflect(t){return this.sub(S1.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const n=Math.sqrt(this.lengthSq()*t.lengthSq());if(n===0)return Math.PI/2;const r=this.dot(t)/n;return Math.acos(Ur(r,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const n=this.x-t.x,r=this.y-t.y,i=this.z-t.z;return n*n+r*r+i*i}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,n,r){const i=Math.sin(n)*t;return this.x=i*Math.sin(r),this.y=Math.cos(n)*t,this.z=i*Math.cos(r),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,n,r){return this.x=t*Math.sin(n),this.y=r,this.z=t*Math.cos(n),this}setFromMatrixPosition(t){const n=t.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this}setFromMatrixScale(t){const n=this.setFromMatrixColumn(t,0).length(),r=this.setFromMatrixColumn(t,1).length(),i=this.setFromMatrixColumn(t,2).length();return this.x=n,this.y=r,this.z=i,this}setFromMatrixColumn(t,n){return this.fromArray(t.elements,n*4)}setFromMatrix3Column(t,n){return this.fromArray(t.elements,n*3)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}setFromColor(t){return this.x=t.r,this.y=t.g,this.z=t.b,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,n=0){return this.x=t[n],this.y=t[n+1],this.z=t[n+2],this}toArray(t=[],n=0){return t[n]=this.x,t[n+1]=this.y,t[n+2]=this.z,t}fromBufferAttribute(t,n){return this.x=t.getX(n),this.y=t.getY(n),this.z=t.getZ(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=Math.random()*Math.PI*2,n=Math.random()*2-1,r=Math.sqrt(1-n*n);return this.x=r*Math.cos(t),this.y=n,this.z=r*Math.sin(t),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const S1=new Oe,KS=new ds;class Ws{constructor(t=new Oe(1/0,1/0,1/0),n=new Oe(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=t,this.max=n}set(t,n){return this.min.copy(t),this.max.copy(n),this}setFromArray(t){this.makeEmpty();for(let n=0,r=t.length;n<r;n+=3)this.expandByPoint(sl.fromArray(t,n));return this}setFromBufferAttribute(t){this.makeEmpty();for(let n=0,r=t.count;n<r;n++)this.expandByPoint(sl.fromBufferAttribute(t,n));return this}setFromPoints(t){this.makeEmpty();for(let n=0,r=t.length;n<r;n++)this.expandByPoint(t[n]);return this}setFromCenterAndSize(t,n){const r=sl.copy(n).multiplyScalar(.5);return this.min.copy(t).sub(r),this.max.copy(t).add(r),this}setFromObject(t,n=!1){return this.makeEmpty(),this.expandByObject(t,n)}clone(){return new this.constructor().copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,n=!1){t.updateWorldMatrix(!1,!1);const r=t.geometry;if(r!==void 0){const o=r.getAttribute("position");if(n===!0&&o!==void 0&&t.isInstancedMesh!==!0)for(let s=0,a=o.count;s<a;s++)t.isMesh===!0?t.getVertexPosition(s,sl):sl.fromBufferAttribute(o,s),sl.applyMatrix4(t.matrixWorld),this.expandByPoint(sl);else t.boundingBox!==void 0?(t.boundingBox===null&&t.computeBoundingBox(),Oy.copy(t.boundingBox)):(r.boundingBox===null&&r.computeBoundingBox(),Oy.copy(r.boundingBox)),Oy.applyMatrix4(t.matrixWorld),this.union(Oy)}const i=t.children;for(let o=0,s=i.length;o<s;o++)this.expandByObject(i[o],n);return this}containsPoint(t){return t.x>=this.min.x&&t.x<=this.max.x&&t.y>=this.min.y&&t.y<=this.max.y&&t.z>=this.min.z&&t.z<=this.max.z}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,n){return n.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return t.max.x>=this.min.x&&t.min.x<=this.max.x&&t.max.y>=this.min.y&&t.min.y<=this.max.y&&t.max.z>=this.min.z&&t.min.z<=this.max.z}intersectsSphere(t){return this.clampPoint(t.center,sl),sl.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let n,r;return t.normal.x>0?(n=t.normal.x*this.min.x,r=t.normal.x*this.max.x):(n=t.normal.x*this.max.x,r=t.normal.x*this.min.x),t.normal.y>0?(n+=t.normal.y*this.min.y,r+=t.normal.y*this.max.y):(n+=t.normal.y*this.max.y,r+=t.normal.y*this.min.y),t.normal.z>0?(n+=t.normal.z*this.min.z,r+=t.normal.z*this.max.z):(n+=t.normal.z*this.max.z,r+=t.normal.z*this.min.z),n<=-t.constant&&r>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(_m),Fy.subVectors(this.max,_m),Mh.subVectors(t.a,_m),Ah.subVectors(t.b,_m),Eh.subVectors(t.c,_m),xc.subVectors(Ah,Mh),bc.subVectors(Eh,Ah),If.subVectors(Mh,Eh);let n=[0,-xc.z,xc.y,0,-bc.z,bc.y,0,-If.z,If.y,xc.z,0,-xc.x,bc.z,0,-bc.x,If.z,0,-If.x,-xc.y,xc.x,0,-bc.y,bc.x,0,-If.y,If.x,0];return!M1(n,Mh,Ah,Eh,Fy)||(n=[1,0,0,0,1,0,0,0,1],!M1(n,Mh,Ah,Eh,Fy))?!1:(Ny.crossVectors(xc,bc),n=[Ny.x,Ny.y,Ny.z],M1(n,Mh,Ah,Eh,Fy))}clampPoint(t,n){return n.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,sl).distanceTo(t)}getBoundingSphere(t){return this.isEmpty()?t.makeEmpty():(this.getCenter(t.center),t.radius=this.getSize(sl).length()*.5),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()?this:(bu[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),bu[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),bu[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),bu[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),bu[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),bu[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),bu[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),bu[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(bu),this)}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const bu=[new Oe,new Oe,new Oe,new Oe,new Oe,new Oe,new Oe,new Oe],sl=new Oe,Oy=new Ws,Mh=new Oe,Ah=new Oe,Eh=new Oe,xc=new Oe,bc=new Oe,If=new Oe,_m=new Oe,Fy=new Oe,Ny=new Oe,jf=new Oe;function M1(d,t,n,r,i){for(let o=0,s=d.length-3;o<=s;o+=3){jf.fromArray(d,o);const a=i.x*Math.abs(jf.x)+i.y*Math.abs(jf.y)+i.z*Math.abs(jf.z),l=t.dot(jf),u=n.dot(jf),h=r.dot(jf);if(Math.max(-Math.max(l,u,h),Math.min(l,u,h))>a)return!1}return!0}const T3=new Ws,xm=new Oe,A1=new Oe;class Cs{constructor(t=new Oe,n=-1){this.isSphere=!0,this.center=t,this.radius=n}set(t,n){return this.center.copy(t),this.radius=n,this}setFromPoints(t,n){const r=this.center;n!==void 0?r.copy(n):T3.setFromPoints(t).getCenter(r);let i=0;for(let o=0,s=t.length;o<s;o++)i=Math.max(i,r.distanceToSquared(t[o]));return this.radius=Math.sqrt(i),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const n=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=n*n}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,n){const r=this.center.distanceToSquared(t);return n.copy(t),r>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;xm.subVectors(t,this.center);const n=xm.lengthSq();if(n>this.radius*this.radius){const r=Math.sqrt(n),i=(r-this.radius)*.5;this.center.addScaledVector(xm,i/r),this.radius+=i}return this}union(t){return t.isEmpty()?this:this.isEmpty()?(this.copy(t),this):(this.center.equals(t.center)===!0?this.radius=Math.max(this.radius,t.radius):(A1.subVectors(t.center,this.center).setLength(t.radius),this.expandByPoint(xm.copy(t.center).add(A1)),this.expandByPoint(xm.copy(t.center).sub(A1))),this)}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return new this.constructor().copy(this)}}const wu=new Oe,E1=new Oe,Uy=new Oe,wc=new Oe,T1=new Oe,Gy=new Oe,C1=new Oe;class Bd{constructor(t=new Oe,n=new Oe(0,0,-1)){this.origin=t,this.direction=n}set(t,n){return this.origin.copy(t),this.direction.copy(n),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,n){return n.copy(this.origin).addScaledVector(this.direction,t)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,wu)),this}closestPointToPoint(t,n){n.subVectors(t,this.origin);const r=n.dot(this.direction);return r<0?n.copy(this.origin):n.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const n=wu.subVectors(t,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(t):(wu.copy(this.origin).addScaledVector(this.direction,n),wu.distanceToSquared(t))}distanceSqToSegment(t,n,r,i){E1.copy(t).add(n).multiplyScalar(.5),Uy.copy(n).sub(t).normalize(),wc.copy(this.origin).sub(E1);const o=t.distanceTo(n)*.5,s=-this.direction.dot(Uy),a=wc.dot(this.direction),l=-wc.dot(Uy),u=wc.lengthSq(),h=Math.abs(1-s*s);let p,c,f,m;if(h>0)if(p=s*l-a,c=s*a-l,m=o*h,p>=0)if(c>=-m)if(c<=m){const y=1/h;p*=y,c*=y,f=p*(p+s*c+2*a)+c*(s*p+c+2*l)+u}else c=o,p=Math.max(0,-(s*c+a)),f=-p*p+c*(c+2*l)+u;else c=-o,p=Math.max(0,-(s*c+a)),f=-p*p+c*(c+2*l)+u;else c<=-m?(p=Math.max(0,-(-s*o+a)),c=p>0?-o:Math.min(Math.max(-o,-l),o),f=-p*p+c*(c+2*l)+u):c<=m?(p=0,c=Math.min(Math.max(-o,-l),o),f=c*(c+2*l)+u):(p=Math.max(0,-(s*o+a)),c=p>0?o:Math.min(Math.max(-o,-l),o),f=-p*p+c*(c+2*l)+u);else c=s>0?-o:o,p=Math.max(0,-(s*c+a)),f=-p*p+c*(c+2*l)+u;return r&&r.copy(this.origin).addScaledVector(this.direction,p),i&&i.copy(E1).addScaledVector(Uy,c),f}intersectSphere(t,n){wu.subVectors(t.center,this.origin);const r=wu.dot(this.direction),i=wu.dot(wu)-r*r,o=t.radius*t.radius;if(i>o)return null;const s=Math.sqrt(o-i),a=r-s,l=r+s;return l<0?null:a<0?this.at(l,n):this.at(a,n)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const n=t.normal.dot(this.direction);if(n===0)return t.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(t.normal)+t.constant)/n;return r>=0?r:null}intersectPlane(t,n){const r=this.distanceToPlane(t);return r===null?null:this.at(r,n)}intersectsPlane(t){const n=t.distanceToPoint(this.origin);return n===0||t.normal.dot(this.direction)*n<0}intersectBox(t,n){let r,i,o,s,a,l;const u=1/this.direction.x,h=1/this.direction.y,p=1/this.direction.z,c=this.origin;return u>=0?(r=(t.min.x-c.x)*u,i=(t.max.x-c.x)*u):(r=(t.max.x-c.x)*u,i=(t.min.x-c.x)*u),h>=0?(o=(t.min.y-c.y)*h,s=(t.max.y-c.y)*h):(o=(t.max.y-c.y)*h,s=(t.min.y-c.y)*h),r>s||o>i||((o>r||isNaN(r))&&(r=o),(s<i||isNaN(i))&&(i=s),p>=0?(a=(t.min.z-c.z)*p,l=(t.max.z-c.z)*p):(a=(t.max.z-c.z)*p,l=(t.min.z-c.z)*p),r>l||a>i)||((a>r||r!==r)&&(r=a),(l<i||i!==i)&&(i=l),i<0)?null:this.at(r>=0?r:i,n)}intersectsBox(t){return this.intersectBox(t,wu)!==null}intersectTriangle(t,n,r,i,o){T1.subVectors(n,t),Gy.subVectors(r,t),C1.crossVectors(T1,Gy);let s=this.direction.dot(C1),a;if(s>0){if(i)return null;a=1}else if(s<0)a=-1,s=-s;else return null;wc.subVectors(this.origin,t);const l=a*this.direction.dot(Gy.crossVectors(wc,Gy));if(l<0)return null;const u=a*this.direction.dot(T1.cross(wc));if(u<0||l+u>s)return null;const h=-a*wc.dot(C1);return h<0?null:this.at(h/s,o)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Cr{constructor(t,n,r,i,o,s,a,l,u,h,p,c,f,m,y,v){Cr.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],t!==void 0&&this.set(t,n,r,i,o,s,a,l,u,h,p,c,f,m,y,v)}set(t,n,r,i,o,s,a,l,u,h,p,c,f,m,y,v){const g=this.elements;return g[0]=t,g[4]=n,g[8]=r,g[12]=i,g[1]=o,g[5]=s,g[9]=a,g[13]=l,g[2]=u,g[6]=h,g[10]=p,g[14]=c,g[3]=f,g[7]=m,g[11]=y,g[15]=v,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Cr().fromArray(this.elements)}copy(t){const n=this.elements,r=t.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],n[9]=r[9],n[10]=r[10],n[11]=r[11],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15],this}copyPosition(t){const n=this.elements,r=t.elements;return n[12]=r[12],n[13]=r[13],n[14]=r[14],this}setFromMatrix3(t){const n=t.elements;return this.set(n[0],n[3],n[6],0,n[1],n[4],n[7],0,n[2],n[5],n[8],0,0,0,0,1),this}extractBasis(t,n,r){return t.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(t,n,r){return this.set(t.x,n.x,r.x,0,t.y,n.y,r.y,0,t.z,n.z,r.z,0,0,0,0,1),this}extractRotation(t){const n=this.elements,r=t.elements,i=1/Th.setFromMatrixColumn(t,0).length(),o=1/Th.setFromMatrixColumn(t,1).length(),s=1/Th.setFromMatrixColumn(t,2).length();return n[0]=r[0]*i,n[1]=r[1]*i,n[2]=r[2]*i,n[3]=0,n[4]=r[4]*o,n[5]=r[5]*o,n[6]=r[6]*o,n[7]=0,n[8]=r[8]*s,n[9]=r[9]*s,n[10]=r[10]*s,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromEuler(t){const n=this.elements,r=t.x,i=t.y,o=t.z,s=Math.cos(r),a=Math.sin(r),l=Math.cos(i),u=Math.sin(i),h=Math.cos(o),p=Math.sin(o);if(t.order==="XYZ"){const c=s*h,f=s*p,m=a*h,y=a*p;n[0]=l*h,n[4]=-l*p,n[8]=u,n[1]=f+m*u,n[5]=c-y*u,n[9]=-a*l,n[2]=y-c*u,n[6]=m+f*u,n[10]=s*l}else if(t.order==="YXZ"){const c=l*h,f=l*p,m=u*h,y=u*p;n[0]=c+y*a,n[4]=m*a-f,n[8]=s*u,n[1]=s*p,n[5]=s*h,n[9]=-a,n[2]=f*a-m,n[6]=y+c*a,n[10]=s*l}else if(t.order==="ZXY"){const c=l*h,f=l*p,m=u*h,y=u*p;n[0]=c-y*a,n[4]=-s*p,n[8]=m+f*a,n[1]=f+m*a,n[5]=s*h,n[9]=y-c*a,n[2]=-s*u,n[6]=a,n[10]=s*l}else if(t.order==="ZYX"){const c=s*h,f=s*p,m=a*h,y=a*p;n[0]=l*h,n[4]=m*u-f,n[8]=c*u+y,n[1]=l*p,n[5]=y*u+c,n[9]=f*u-m,n[2]=-u,n[6]=a*l,n[10]=s*l}else if(t.order==="YZX"){const c=s*l,f=s*u,m=a*l,y=a*u;n[0]=l*h,n[4]=y-c*p,n[8]=m*p+f,n[1]=p,n[5]=s*h,n[9]=-a*h,n[2]=-u*h,n[6]=f*p+m,n[10]=c-y*p}else if(t.order==="XZY"){const c=s*l,f=s*u,m=a*l,y=a*u;n[0]=l*h,n[4]=-p,n[8]=u*h,n[1]=c*p+y,n[5]=s*h,n[9]=f*p-m,n[2]=m*p-f,n[6]=a*h,n[10]=y*p+c}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromQuaternion(t){return this.compose(C3,t,R3)}lookAt(t,n,r){const i=this.elements;return Ko.subVectors(t,n),Ko.lengthSq()===0&&(Ko.z=1),Ko.normalize(),Sc.crossVectors(r,Ko),Sc.lengthSq()===0&&(Math.abs(r.z)===1?Ko.x+=1e-4:Ko.z+=1e-4,Ko.normalize(),Sc.crossVectors(r,Ko)),Sc.normalize(),Hy.crossVectors(Ko,Sc),i[0]=Sc.x,i[4]=Hy.x,i[8]=Ko.x,i[1]=Sc.y,i[5]=Hy.y,i[9]=Ko.y,i[2]=Sc.z,i[6]=Hy.z,i[10]=Ko.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,n){const r=t.elements,i=n.elements,o=this.elements,s=r[0],a=r[4],l=r[8],u=r[12],h=r[1],p=r[5],c=r[9],f=r[13],m=r[2],y=r[6],v=r[10],g=r[14],x=r[3],b=r[7],w=r[11],T=r[15],R=i[0],C=i[4],P=i[8],I=i[12],D=i[1],j=i[5],N=i[9],O=i[13],W=i[2],X=i[6],J=i[10],ee=i[14],V=i[3],q=i[7],Y=i[11],Z=i[15];return o[0]=s*R+a*D+l*W+u*V,o[4]=s*C+a*j+l*X+u*q,o[8]=s*P+a*N+l*J+u*Y,o[12]=s*I+a*O+l*ee+u*Z,o[1]=h*R+p*D+c*W+f*V,o[5]=h*C+p*j+c*X+f*q,o[9]=h*P+p*N+c*J+f*Y,o[13]=h*I+p*O+c*ee+f*Z,o[2]=m*R+y*D+v*W+g*V,o[6]=m*C+y*j+v*X+g*q,o[10]=m*P+y*N+v*J+g*Y,o[14]=m*I+y*O+v*ee+g*Z,o[3]=x*R+b*D+w*W+T*V,o[7]=x*C+b*j+w*X+T*q,o[11]=x*P+b*N+w*J+T*Y,o[15]=x*I+b*O+w*ee+T*Z,this}multiplyScalar(t){const n=this.elements;return n[0]*=t,n[4]*=t,n[8]*=t,n[12]*=t,n[1]*=t,n[5]*=t,n[9]*=t,n[13]*=t,n[2]*=t,n[6]*=t,n[10]*=t,n[14]*=t,n[3]*=t,n[7]*=t,n[11]*=t,n[15]*=t,this}determinant(){const t=this.elements,n=t[0],r=t[4],i=t[8],o=t[12],s=t[1],a=t[5],l=t[9],u=t[13],h=t[2],p=t[6],c=t[10],f=t[14],m=t[3],y=t[7],v=t[11],g=t[15];return m*(+o*l*p-i*u*p-o*a*c+r*u*c+i*a*f-r*l*f)+y*(+n*l*f-n*u*c+o*s*c-i*s*f+i*u*h-o*l*h)+v*(+n*u*p-n*a*f-o*s*p+r*s*f+o*a*h-r*u*h)+g*(-i*a*h-n*l*p+n*a*c+i*s*p-r*s*c+r*l*h)}transpose(){const t=this.elements;let n;return n=t[1],t[1]=t[4],t[4]=n,n=t[2],t[2]=t[8],t[8]=n,n=t[6],t[6]=t[9],t[9]=n,n=t[3],t[3]=t[12],t[12]=n,n=t[7],t[7]=t[13],t[13]=n,n=t[11],t[11]=t[14],t[14]=n,this}setPosition(t,n,r){const i=this.elements;return t.isVector3?(i[12]=t.x,i[13]=t.y,i[14]=t.z):(i[12]=t,i[13]=n,i[14]=r),this}invert(){const t=this.elements,n=t[0],r=t[1],i=t[2],o=t[3],s=t[4],a=t[5],l=t[6],u=t[7],h=t[8],p=t[9],c=t[10],f=t[11],m=t[12],y=t[13],v=t[14],g=t[15],x=p*v*u-y*c*u+y*l*f-a*v*f-p*l*g+a*c*g,b=m*c*u-h*v*u-m*l*f+s*v*f+h*l*g-s*c*g,w=h*y*u-m*p*u+m*a*f-s*y*f-h*a*g+s*p*g,T=m*p*l-h*y*l-m*a*c+s*y*c+h*a*v-s*p*v,R=n*x+r*b+i*w+o*T;if(R===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const C=1/R;return t[0]=x*C,t[1]=(y*c*o-p*v*o-y*i*f+r*v*f+p*i*g-r*c*g)*C,t[2]=(a*v*o-y*l*o+y*i*u-r*v*u-a*i*g+r*l*g)*C,t[3]=(p*l*o-a*c*o-p*i*u+r*c*u+a*i*f-r*l*f)*C,t[4]=b*C,t[5]=(h*v*o-m*c*o+m*i*f-n*v*f-h*i*g+n*c*g)*C,t[6]=(m*l*o-s*v*o-m*i*u+n*v*u+s*i*g-n*l*g)*C,t[7]=(s*c*o-h*l*o+h*i*u-n*c*u-s*i*f+n*l*f)*C,t[8]=w*C,t[9]=(m*p*o-h*y*o-m*r*f+n*y*f+h*r*g-n*p*g)*C,t[10]=(s*y*o-m*a*o+m*r*u-n*y*u-s*r*g+n*a*g)*C,t[11]=(h*a*o-s*p*o-h*r*u+n*p*u+s*r*f-n*a*f)*C,t[12]=T*C,t[13]=(h*y*i-m*p*i+m*r*c-n*y*c-h*r*v+n*p*v)*C,t[14]=(m*a*i-s*y*i-m*r*l+n*y*l+s*r*v-n*a*v)*C,t[15]=(s*p*i-h*a*i+h*r*l-n*p*l-s*r*c+n*a*c)*C,this}scale(t){const n=this.elements,r=t.x,i=t.y,o=t.z;return n[0]*=r,n[4]*=i,n[8]*=o,n[1]*=r,n[5]*=i,n[9]*=o,n[2]*=r,n[6]*=i,n[10]*=o,n[3]*=r,n[7]*=i,n[11]*=o,this}getMaxScaleOnAxis(){const t=this.elements,n=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],r=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],i=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(n,r,i))}makeTranslation(t,n,r){return t.isVector3?this.set(1,0,0,t.x,0,1,0,t.y,0,0,1,t.z,0,0,0,1):this.set(1,0,0,t,0,1,0,n,0,0,1,r,0,0,0,1),this}makeRotationX(t){const n=Math.cos(t),r=Math.sin(t);return this.set(1,0,0,0,0,n,-r,0,0,r,n,0,0,0,0,1),this}makeRotationY(t){const n=Math.cos(t),r=Math.sin(t);return this.set(n,0,r,0,0,1,0,0,-r,0,n,0,0,0,0,1),this}makeRotationZ(t){const n=Math.cos(t),r=Math.sin(t);return this.set(n,-r,0,0,r,n,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,n){const r=Math.cos(n),i=Math.sin(n),o=1-r,s=t.x,a=t.y,l=t.z,u=o*s,h=o*a;return this.set(u*s+r,u*a-i*l,u*l+i*a,0,u*a+i*l,h*a+r,h*l-i*s,0,u*l-i*a,h*l+i*s,o*l*l+r,0,0,0,0,1),this}makeScale(t,n,r){return this.set(t,0,0,0,0,n,0,0,0,0,r,0,0,0,0,1),this}makeShear(t,n,r,i,o,s){return this.set(1,r,o,0,t,1,s,0,n,i,1,0,0,0,0,1),this}compose(t,n,r){const i=this.elements,o=n._x,s=n._y,a=n._z,l=n._w,u=o+o,h=s+s,p=a+a,c=o*u,f=o*h,m=o*p,y=s*h,v=s*p,g=a*p,x=l*u,b=l*h,w=l*p,T=r.x,R=r.y,C=r.z;return i[0]=(1-(y+g))*T,i[1]=(f+w)*T,i[2]=(m-b)*T,i[3]=0,i[4]=(f-w)*R,i[5]=(1-(c+g))*R,i[6]=(v+x)*R,i[7]=0,i[8]=(m+b)*C,i[9]=(v-x)*C,i[10]=(1-(c+y))*C,i[11]=0,i[12]=t.x,i[13]=t.y,i[14]=t.z,i[15]=1,this}decompose(t,n,r){const i=this.elements;let o=Th.set(i[0],i[1],i[2]).length();const s=Th.set(i[4],i[5],i[6]).length(),a=Th.set(i[8],i[9],i[10]).length();this.determinant()<0&&(o=-o),t.x=i[12],t.y=i[13],t.z=i[14],ol.copy(this);const u=1/o,h=1/s,p=1/a;return ol.elements[0]*=u,ol.elements[1]*=u,ol.elements[2]*=u,ol.elements[4]*=h,ol.elements[5]*=h,ol.elements[6]*=h,ol.elements[8]*=p,ol.elements[9]*=p,ol.elements[10]*=p,n.setFromRotationMatrix(ol),r.x=o,r.y=s,r.z=a,this}makePerspective(t,n,r,i,o,s,a=dl){const l=this.elements,u=2*o/(n-t),h=2*o/(r-i),p=(n+t)/(n-t),c=(r+i)/(r-i);let f,m;if(a===dl)f=-(s+o)/(s-o),m=-2*s*o/(s-o);else if(a===xg)f=-s/(s-o),m=-s*o/(s-o);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return l[0]=u,l[4]=0,l[8]=p,l[12]=0,l[1]=0,l[5]=h,l[9]=c,l[13]=0,l[2]=0,l[6]=0,l[10]=f,l[14]=m,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(t,n,r,i,o,s,a=dl){const l=this.elements,u=1/(n-t),h=1/(r-i),p=1/(s-o),c=(n+t)*u,f=(r+i)*h;let m,y;if(a===dl)m=(s+o)*p,y=-2*p;else if(a===xg)m=o*p,y=-1*p;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return l[0]=2*u,l[4]=0,l[8]=0,l[12]=-c,l[1]=0,l[5]=2*h,l[9]=0,l[13]=-f,l[2]=0,l[6]=0,l[10]=y,l[14]=-m,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(t){const n=this.elements,r=t.elements;for(let i=0;i<16;i++)if(n[i]!==r[i])return!1;return!0}fromArray(t,n=0){for(let r=0;r<16;r++)this.elements[r]=t[r+n];return this}toArray(t=[],n=0){const r=this.elements;return t[n]=r[0],t[n+1]=r[1],t[n+2]=r[2],t[n+3]=r[3],t[n+4]=r[4],t[n+5]=r[5],t[n+6]=r[6],t[n+7]=r[7],t[n+8]=r[8],t[n+9]=r[9],t[n+10]=r[10],t[n+11]=r[11],t[n+12]=r[12],t[n+13]=r[13],t[n+14]=r[14],t[n+15]=r[15],t}}const Th=new Oe,ol=new Cr,C3=new Oe(0,0,0),R3=new Oe(1,1,1),Sc=new Oe,Hy=new Oe,Ko=new Oe,QS=new Cr,ZS=new ds;class ua{constructor(t=0,n=0,r=0,i=ua.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=n,this._z=r,this._order=i}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,n,r,i=this._order){return this._x=t,this._y=n,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,n=this._order,r=!0){const i=t.elements,o=i[0],s=i[4],a=i[8],l=i[1],u=i[5],h=i[9],p=i[2],c=i[6],f=i[10];switch(n){case"XYZ":this._y=Math.asin(Ur(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-h,f),this._z=Math.atan2(-s,o)):(this._x=Math.atan2(c,u),this._z=0);break;case"YXZ":this._x=Math.asin(-Ur(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(a,f),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-p,o),this._z=0);break;case"ZXY":this._x=Math.asin(Ur(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(-p,f),this._z=Math.atan2(-s,u)):(this._y=0,this._z=Math.atan2(l,o));break;case"ZYX":this._y=Math.asin(-Ur(p,-1,1)),Math.abs(p)<.9999999?(this._x=Math.atan2(c,f),this._z=Math.atan2(l,o)):(this._x=0,this._z=Math.atan2(-s,u));break;case"YZX":this._z=Math.asin(Ur(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-h,u),this._y=Math.atan2(-p,o)):(this._x=0,this._y=Math.atan2(a,f));break;case"XZY":this._z=Math.asin(-Ur(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(c,u),this._y=Math.atan2(a,o)):(this._x=Math.atan2(-h,f),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,r===!0&&this._onChangeCallback(),this}setFromQuaternion(t,n,r){return QS.makeRotationFromQuaternion(t),this.setFromRotationMatrix(QS,n,r)}setFromVector3(t,n=this._order){return this.set(t.x,t.y,t.z,n)}reorder(t){return ZS.setFromEuler(this),this.setFromQuaternion(ZS,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],t[3]!==void 0&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],n=0){return t[n]=this._x,t[n+1]=this._y,t[n+2]=this._z,t[n+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}ua.DEFAULT_ORDER="XYZ";class hd{constructor(){this.mask=1}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return(this.mask&t.mask)!==0}isEnabled(t){return(this.mask&(1<<t|0))!==0}}let P3=0;const $S=new Oe,Ch=new ds,Su=new Cr,zy=new Oe,bm=new Oe,I3=new Oe,j3=new ds,eM=new Oe(1,0,0),tM=new Oe(0,1,0),rM=new Oe(0,0,1),nM={type:"added"},L3={type:"removed"},Rh={type:"childadded",child:null},R1={type:"childremoved",child:null};class pn extends Wl{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:P3++}),this.uuid=aa(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=pn.DEFAULT_UP.clone();const t=new Oe,n=new ua,r=new ds,i=new Oe(1,1,1);function o(){r.setFromEuler(n,!1)}function s(){n.setFromQuaternion(r,void 0,!1)}n._onChange(o),r._onChange(s),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new Cr},normalMatrix:{value:new Vr}}),this.matrix=new Cr,this.matrixWorld=new Cr,this.matrixAutoUpdate=pn.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=pn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new hd,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,n){this.quaternion.setFromAxisAngle(t,n)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,n){return Ch.setFromAxisAngle(t,n),this.quaternion.multiply(Ch),this}rotateOnWorldAxis(t,n){return Ch.setFromAxisAngle(t,n),this.quaternion.premultiply(Ch),this}rotateX(t){return this.rotateOnAxis(eM,t)}rotateY(t){return this.rotateOnAxis(tM,t)}rotateZ(t){return this.rotateOnAxis(rM,t)}translateOnAxis(t,n){return $S.copy(t).applyQuaternion(this.quaternion),this.position.add($S.multiplyScalar(n)),this}translateX(t){return this.translateOnAxis(eM,t)}translateY(t){return this.translateOnAxis(tM,t)}translateZ(t){return this.translateOnAxis(rM,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(Su.copy(this.matrixWorld).invert())}lookAt(t,n,r){t.isVector3?zy.copy(t):zy.set(t,n,r);const i=this.parent;this.updateWorldMatrix(!0,!1),bm.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Su.lookAt(bm,zy,this.up):Su.lookAt(zy,bm,this.up),this.quaternion.setFromRotationMatrix(Su),i&&(Su.extractRotation(i.matrixWorld),Ch.setFromRotationMatrix(Su),this.quaternion.premultiply(Ch.invert()))}add(t){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(t.removeFromParent(),t.parent=this,this.children.push(t),t.dispatchEvent(nM),Rh.child=t,this.dispatchEvent(Rh),Rh.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const n=this.children.indexOf(t);return n!==-1&&(t.parent=null,this.children.splice(n,1),t.dispatchEvent(L3),R1.child=t,this.dispatchEvent(R1),R1.child=null),this}removeFromParent(){const t=this.parent;return t!==null&&t.remove(this),this}clear(){return this.remove(...this.children)}attach(t){return this.updateWorldMatrix(!0,!1),Su.copy(this.matrixWorld).invert(),t.parent!==null&&(t.parent.updateWorldMatrix(!0,!1),Su.multiply(t.parent.matrixWorld)),t.applyMatrix4(Su),t.removeFromParent(),t.parent=this,this.children.push(t),t.updateWorldMatrix(!1,!0),t.dispatchEvent(nM),Rh.child=t,this.dispatchEvent(Rh),Rh.child=null,this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,n){if(this[t]===n)return this;for(let r=0,i=this.children.length;r<i;r++){const s=this.children[r].getObjectByProperty(t,n);if(s!==void 0)return s}}getObjectsByProperty(t,n,r=[]){this[t]===n&&r.push(this);const i=this.children;for(let o=0,s=i.length;o<s;o++)i[o].getObjectsByProperty(t,n,r);return r}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(bm,t,I3),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(bm,j3,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return t.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(t){t(this);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].traverse(t)}traverseVisible(t){if(this.visible===!1)return;t(this);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].traverseVisible(t)}traverseAncestors(t){const n=this.parent;n!==null&&(t(n),n.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,t=!0);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].updateMatrixWorld(t)}updateWorldMatrix(t,n){const r=this.parent;if(t===!0&&r!==null&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),n===!0){const i=this.children;for(let o=0,s=i.length;o<s;o++)i[o].updateWorldMatrix(!1,!0)}}toJSON(t){const n=t===void 0||typeof t=="string",r={};n&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.visibility=this._visibility,i.active=this._active,i.bounds=this._bounds.map(a=>({boxInitialized:a.boxInitialized,boxMin:a.box.min.toArray(),boxMax:a.box.max.toArray(),sphereInitialized:a.sphereInitialized,sphereRadius:a.sphere.radius,sphereCenter:a.sphere.center.toArray()})),i.maxInstanceCount=this._maxInstanceCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.geometryCount=this._geometryCount,i.matricesTexture=this._matricesTexture.toJSON(t),this._colorsTexture!==null&&(i.colorsTexture=this._colorsTexture.toJSON(t)),this.boundingSphere!==null&&(i.boundingSphere={center:i.boundingSphere.center.toArray(),radius:i.boundingSphere.radius}),this.boundingBox!==null&&(i.boundingBox={min:i.boundingBox.min.toArray(),max:i.boundingBox.max.toArray()}));function o(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(t)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=o(t.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let u=0,h=l.length;u<h;u++){const p=l[u];o(t.shapes,p)}else o(t.shapes,l)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(o(t.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,u=this.material.length;l<u;l++)a.push(o(t.materials,this.material[l]));i.material=a}else i.material=o(t.materials,this.material);if(this.children.length>0){i.children=[];for(let a=0;a<this.children.length;a++)i.children.push(this.children[a].toJSON(t).object)}if(this.animations.length>0){i.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];i.animations.push(o(t.animations,l))}}if(n){const a=s(t.geometries),l=s(t.materials),u=s(t.textures),h=s(t.images),p=s(t.shapes),c=s(t.skeletons),f=s(t.animations),m=s(t.nodes);a.length>0&&(r.geometries=a),l.length>0&&(r.materials=l),u.length>0&&(r.textures=u),h.length>0&&(r.images=h),p.length>0&&(r.shapes=p),c.length>0&&(r.skeletons=c),f.length>0&&(r.animations=f),m.length>0&&(r.nodes=m)}return r.object=i,r;function s(a){const l=[];for(const u in a){const h=a[u];delete h.metadata,l.push(h)}return l}}clone(t){return new this.constructor().copy(this,t)}copy(t,n=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.animations=t.animations.slice(),this.userData=JSON.parse(JSON.stringify(t.userData)),n===!0)for(let r=0;r<t.children.length;r++){const i=t.children[r];this.add(i.clone())}return this}}pn.DEFAULT_UP=new Oe(0,1,0);pn.DEFAULT_MATRIX_AUTO_UPDATE=!0;pn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const al=new Oe,Mu=new Oe,P1=new Oe,Au=new Oe,Ph=new Oe,Ih=new Oe,iM=new Oe,I1=new Oe,j1=new Oe,L1=new Oe,D1=new bn,B1=new bn,k1=new bn;class Io{constructor(t=new Oe,n=new Oe,r=new Oe){this.a=t,this.b=n,this.c=r}static getNormal(t,n,r,i){i.subVectors(r,n),al.subVectors(t,n),i.cross(al);const o=i.lengthSq();return o>0?i.multiplyScalar(1/Math.sqrt(o)):i.set(0,0,0)}static getBarycoord(t,n,r,i,o){al.subVectors(i,n),Mu.subVectors(r,n),P1.subVectors(t,n);const s=al.dot(al),a=al.dot(Mu),l=al.dot(P1),u=Mu.dot(Mu),h=Mu.dot(P1),p=s*u-a*a;if(p===0)return o.set(0,0,0),null;const c=1/p,f=(u*l-a*h)*c,m=(s*h-a*l)*c;return o.set(1-f-m,m,f)}static containsPoint(t,n,r,i){return this.getBarycoord(t,n,r,i,Au)===null?!1:Au.x>=0&&Au.y>=0&&Au.x+Au.y<=1}static getInterpolation(t,n,r,i,o,s,a,l){return this.getBarycoord(t,n,r,i,Au)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(o,Au.x),l.addScaledVector(s,Au.y),l.addScaledVector(a,Au.z),l)}static getInterpolatedAttribute(t,n,r,i,o,s){return D1.setScalar(0),B1.setScalar(0),k1.setScalar(0),D1.fromBufferAttribute(t,n),B1.fromBufferAttribute(t,r),k1.fromBufferAttribute(t,i),s.setScalar(0),s.addScaledVector(D1,o.x),s.addScaledVector(B1,o.y),s.addScaledVector(k1,o.z),s}static isFrontFacing(t,n,r,i){return al.subVectors(r,n),Mu.subVectors(t,n),al.cross(Mu).dot(i)<0}set(t,n,r){return this.a.copy(t),this.b.copy(n),this.c.copy(r),this}setFromPointsAndIndices(t,n,r,i){return this.a.copy(t[n]),this.b.copy(t[r]),this.c.copy(t[i]),this}setFromAttributeAndIndices(t,n,r,i){return this.a.fromBufferAttribute(t,n),this.b.fromBufferAttribute(t,r),this.c.fromBufferAttribute(t,i),this}clone(){return new this.constructor().copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return al.subVectors(this.c,this.b),Mu.subVectors(this.a,this.b),al.cross(Mu).length()*.5}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return Io.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,n){return Io.getBarycoord(t,this.a,this.b,this.c,n)}getInterpolation(t,n,r,i,o){return Io.getInterpolation(t,this.a,this.b,this.c,n,r,i,o)}containsPoint(t){return Io.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return Io.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,n){const r=this.a,i=this.b,o=this.c;let s,a;Ph.subVectors(i,r),Ih.subVectors(o,r),I1.subVectors(t,r);const l=Ph.dot(I1),u=Ih.dot(I1);if(l<=0&&u<=0)return n.copy(r);j1.subVectors(t,i);const h=Ph.dot(j1),p=Ih.dot(j1);if(h>=0&&p<=h)return n.copy(i);const c=l*p-h*u;if(c<=0&&l>=0&&h<=0)return s=l/(l-h),n.copy(r).addScaledVector(Ph,s);L1.subVectors(t,o);const f=Ph.dot(L1),m=Ih.dot(L1);if(m>=0&&f<=m)return n.copy(o);const y=f*u-l*m;if(y<=0&&u>=0&&m<=0)return a=u/(u-m),n.copy(r).addScaledVector(Ih,a);const v=h*m-f*p;if(v<=0&&p-h>=0&&f-m>=0)return iM.subVectors(o,i),a=(p-h)/(p-h+(f-m)),n.copy(i).addScaledVector(iM,a);const g=1/(v+y+c);return s=y*g,a=c*g,n.copy(r).addScaledVector(Ph,s).addScaledVector(Ih,a)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}const UE={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Mc={h:0,s:0,l:0},Vy={h:0,s:0,l:0};function O1(d,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?d+(t-d)*6*n:n<1/2?t:n<2/3?d+(t-d)*6*(2/3-n):d}class nr{constructor(t,n,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(t,n,r)}set(t,n,r){if(n===void 0&&r===void 0){const i=t;i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i)}else this.setRGB(t,n,r);return this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,n=Es){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(t&255)/255,vn.toWorkingColorSpace(this,n),this}setRGB(t,n,r,i=vn.workingColorSpace){return this.r=t,this.g=n,this.b=r,vn.toWorkingColorSpace(this,i),this}setHSL(t,n,r,i=vn.workingColorSpace){if(t=Qb(t,1),n=Ur(n,0,1),r=Ur(r,0,1),n===0)this.r=this.g=this.b=r;else{const o=r<=.5?r*(1+n):r+n-r*n,s=2*r-o;this.r=O1(s,o,t+1/3),this.g=O1(s,o,t),this.b=O1(s,o,t-1/3)}return vn.toWorkingColorSpace(this,i),this}setStyle(t,n=Es){function r(o){o!==void 0&&parseFloat(o)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(t)){let o;const s=i[1],a=i[2];switch(s){case"rgb":case"rgba":if(o=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(o[4]),this.setRGB(Math.min(255,parseInt(o[1],10))/255,Math.min(255,parseInt(o[2],10))/255,Math.min(255,parseInt(o[3],10))/255,n);if(o=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(o[4]),this.setRGB(Math.min(100,parseInt(o[1],10))/100,Math.min(100,parseInt(o[2],10))/100,Math.min(100,parseInt(o[3],10))/100,n);break;case"hsl":case"hsla":if(o=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(o[4]),this.setHSL(parseFloat(o[1])/360,parseFloat(o[2])/100,parseFloat(o[3])/100,n);break;default:console.warn("THREE.Color: Unknown color model "+t)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(t)){const o=i[1],s=o.length;if(s===3)return this.setRGB(parseInt(o.charAt(0),16)/15,parseInt(o.charAt(1),16)/15,parseInt(o.charAt(2),16)/15,n);if(s===6)return this.setHex(parseInt(o,16),n);console.warn("THREE.Color: Invalid hex color "+t)}else if(t&&t.length>0)return this.setColorName(t,n);return this}setColorName(t,n=Es){const r=UE[t.toLowerCase()];return r!==void 0?this.setHex(r,n):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=Fu(t.r),this.g=Fu(t.g),this.b=Fu(t.b),this}copyLinearToSRGB(t){return this.r=sp(t.r),this.g=sp(t.g),this.b=sp(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=Es){return vn.fromWorkingColorSpace(Os.copy(this),t),Math.round(Ur(Os.r*255,0,255))*65536+Math.round(Ur(Os.g*255,0,255))*256+Math.round(Ur(Os.b*255,0,255))}getHexString(t=Es){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,n=vn.workingColorSpace){vn.fromWorkingColorSpace(Os.copy(this),n);const r=Os.r,i=Os.g,o=Os.b,s=Math.max(r,i,o),a=Math.min(r,i,o);let l,u;const h=(a+s)/2;if(a===s)l=0,u=0;else{const p=s-a;switch(u=h<=.5?p/(s+a):p/(2-s-a),s){case r:l=(i-o)/p+(i<o?6:0);break;case i:l=(o-r)/p+2;break;case o:l=(r-i)/p+4;break}l/=6}return t.h=l,t.s=u,t.l=h,t}getRGB(t,n=vn.workingColorSpace){return vn.fromWorkingColorSpace(Os.copy(this),n),t.r=Os.r,t.g=Os.g,t.b=Os.b,t}getStyle(t=Es){vn.fromWorkingColorSpace(Os.copy(this),t);const n=Os.r,r=Os.g,i=Os.b;return t!==Es?`color(${t} ${n.toFixed(3)} ${r.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(n*255)},${Math.round(r*255)},${Math.round(i*255)})`}offsetHSL(t,n,r){return this.getHSL(Mc),this.setHSL(Mc.h+t,Mc.s+n,Mc.l+r)}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,n){return this.r=t.r+n.r,this.g=t.g+n.g,this.b=t.b+n.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,n){return this.r+=(t.r-this.r)*n,this.g+=(t.g-this.g)*n,this.b+=(t.b-this.b)*n,this}lerpColors(t,n,r){return this.r=t.r+(n.r-t.r)*r,this.g=t.g+(n.g-t.g)*r,this.b=t.b+(n.b-t.b)*r,this}lerpHSL(t,n){this.getHSL(Mc),t.getHSL(Vy);const r=eg(Mc.h,Vy.h,n),i=eg(Mc.s,Vy.s,n),o=eg(Mc.l,Vy.l,n);return this.setHSL(r,i,o),this}setFromVector3(t){return this.r=t.x,this.g=t.y,this.b=t.z,this}applyMatrix3(t){const n=this.r,r=this.g,i=this.b,o=t.elements;return this.r=o[0]*n+o[3]*r+o[6]*i,this.g=o[1]*n+o[4]*r+o[7]*i,this.b=o[2]*n+o[5]*r+o[8]*i,this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,n=0){return this.r=t[n],this.g=t[n+1],this.b=t[n+2],this}toArray(t=[],n=0){return t[n]=this.r,t[n+1]=this.g,t[n+2]=this.b,t}fromBufferAttribute(t,n){return this.r=t.getX(n),this.g=t.getY(n),this.b=t.getZ(n),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Os=new nr;nr.NAMES=UE;let D3=0;class Qi extends Wl{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:D3++}),this.uuid=aa(),this.name="",this.type="Material",this.blending=cd,this.side=Hl,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=ov,this.blendDst=av,this.blendEquation=Ic,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new nr(0,0,0),this.blendAlpha=0,this.depthFunc=wd,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=Kx,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Jf,this.stencilZFail=Jf,this.stencilZPass=Jf,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(t!==void 0)for(const n in t){const r=t[n];if(r===void 0){console.warn(`THREE.Material: parameter '${n}' has value of undefined.`);continue}const i=this[n];if(i===void 0){console.warn(`THREE.Material: '${n}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[n]=r}}toJSON(t){const n=t===void 0||typeof t=="string";n&&(t={textures:{},images:{}});const r={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(r.dispersion=this.dispersion),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(t).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(t).uuid),this.anisotropy!==void 0&&(r.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(r.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(r.anisotropyMap=this.anisotropyMap.toJSON(t).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(t).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(t).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(t).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(t).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(t).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(t).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapRotation!==void 0&&(r.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(t).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(t).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(t).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==cd&&(r.blending=this.blending),this.side!==Hl&&(r.side=this.side),this.vertexColors===!0&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=!0),this.blendSrc!==ov&&(r.blendSrc=this.blendSrc),this.blendDst!==av&&(r.blendDst=this.blendDst),this.blendEquation!==Ic&&(r.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(r.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(r.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(r.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(r.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(r.blendAlpha=this.blendAlpha),this.depthFunc!==wd&&(r.depthFunc=this.depthFunc),this.depthTest===!1&&(r.depthTest=this.depthTest),this.depthWrite===!1&&(r.depthWrite=this.depthWrite),this.colorWrite===!1&&(r.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(r.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==Kx&&(r.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(r.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(r.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Jf&&(r.stencilFail=this.stencilFail),this.stencilZFail!==Jf&&(r.stencilZFail=this.stencilZFail),this.stencilZPass!==Jf&&(r.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(r.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaHash===!0&&(r.alphaHash=!0),this.alphaToCoverage===!0&&(r.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=!0),this.forceSinglePass===!0&&(r.forceSinglePass=!0),this.wireframe===!0&&(r.wireframe=!0),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=!0),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function i(o){const s=[];for(const a in o){const l=o[a];delete l.metadata,s.push(l)}return s}if(n){const o=i(t.textures),s=i(t.images);o.length>0&&(r.textures=o),s.length>0&&(r.images=s)}return r}clone(){return new this.constructor().copy(this)}copy(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.blendColor.copy(t.blendColor),this.blendAlpha=t.blendAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const n=t.clippingPlanes;let r=null;if(n!==null){const i=n.length;r=new Array(i);for(let o=0;o!==i;++o)r[o]=n[o].clone()}return this.clippingPlanes=r,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaHash=t.alphaHash,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.forceSinglePass=t.forceSinglePass,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){t===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}}class sa extends Qi{constructor(t){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new nr(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ua,this.combine=Og,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}const ju=B3();function B3(){const d=new ArrayBuffer(4),t=new Float32Array(d),n=new Uint32Array(d),r=new Uint32Array(512),i=new Uint32Array(512);for(let l=0;l<256;++l){const u=l-127;u<-27?(r[l]=0,r[l|256]=32768,i[l]=24,i[l|256]=24):u<-14?(r[l]=1024>>-u-14,r[l|256]=1024>>-u-14|32768,i[l]=-u-1,i[l|256]=-u-1):u<=15?(r[l]=u+15<<10,r[l|256]=u+15<<10|32768,i[l]=13,i[l|256]=13):u<128?(r[l]=31744,r[l|256]=64512,i[l]=24,i[l|256]=24):(r[l]=31744,r[l|256]=64512,i[l]=13,i[l|256]=13)}const o=new Uint32Array(2048),s=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let u=l<<13,h=0;for(;!(u&8388608);)u<<=1,h-=8388608;u&=-8388609,h+=947912704,o[l]=u|h}for(let l=1024;l<2048;++l)o[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)s[l]=l<<23;s[31]=1199570944,s[32]=2147483648;for(let l=33;l<63;++l)s[l]=2147483648+(l-32<<23);s[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:t,uint32View:n,baseTable:r,shiftTable:i,mantissaTable:o,exponentTable:s,offsetTable:a}}function Ro(d){Math.abs(d)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),d=Ur(d,-65504,65504),ju.floatView[0]=d;const t=ju.uint32View[0],n=t>>23&511;return ju.baseTable[n]+((t&8388607)>>ju.shiftTable[n])}function Fm(d){const t=d>>10;return ju.uint32View[0]=ju.mantissaTable[ju.offsetTable[t]+(d&1023)]+ju.exponentTable[t],ju.floatView[0]}const k3={toHalfFloat:Ro,fromHalfFloat:Fm},ki=new Oe,Wy=new Ct;class wn{constructor(t,n,r=!1){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=t,this.itemSize=n,this.count=t!==void 0?t.length/n:0,this.normalized=r,this.usage=_g,this.updateRanges=[],this.gpuType=jo,this.version=0}onUploadCallback(){}set needsUpdate(t){t===!0&&this.version++}setUsage(t){return this.usage=t,this}addUpdateRange(t,n){this.updateRanges.push({start:t,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this.gpuType=t.gpuType,this}copyAt(t,n,r){t*=this.itemSize,r*=n.itemSize;for(let i=0,o=this.itemSize;i<o;i++)this.array[t+i]=n.array[r+i];return this}copyArray(t){return this.array.set(t),this}applyMatrix3(t){if(this.itemSize===2)for(let n=0,r=this.count;n<r;n++)Wy.fromBufferAttribute(this,n),Wy.applyMatrix3(t),this.setXY(n,Wy.x,Wy.y);else if(this.itemSize===3)for(let n=0,r=this.count;n<r;n++)ki.fromBufferAttribute(this,n),ki.applyMatrix3(t),this.setXYZ(n,ki.x,ki.y,ki.z);return this}applyMatrix4(t){for(let n=0,r=this.count;n<r;n++)ki.fromBufferAttribute(this,n),ki.applyMatrix4(t),this.setXYZ(n,ki.x,ki.y,ki.z);return this}applyNormalMatrix(t){for(let n=0,r=this.count;n<r;n++)ki.fromBufferAttribute(this,n),ki.applyNormalMatrix(t),this.setXYZ(n,ki.x,ki.y,ki.z);return this}transformDirection(t){for(let n=0,r=this.count;n<r;n++)ki.fromBufferAttribute(this,n),ki.transformDirection(t),this.setXYZ(n,ki.x,ki.y,ki.z);return this}set(t,n=0){return this.array.set(t,n),this}getComponent(t,n){let r=this.array[t*this.itemSize+n];return this.normalized&&(r=fo(r,this.array)),r}setComponent(t,n,r){return this.normalized&&(r=Yr(r,this.array)),this.array[t*this.itemSize+n]=r,this}getX(t){let n=this.array[t*this.itemSize];return this.normalized&&(n=fo(n,this.array)),n}setX(t,n){return this.normalized&&(n=Yr(n,this.array)),this.array[t*this.itemSize]=n,this}getY(t){let n=this.array[t*this.itemSize+1];return this.normalized&&(n=fo(n,this.array)),n}setY(t,n){return this.normalized&&(n=Yr(n,this.array)),this.array[t*this.itemSize+1]=n,this}getZ(t){let n=this.array[t*this.itemSize+2];return this.normalized&&(n=fo(n,this.array)),n}setZ(t,n){return this.normalized&&(n=Yr(n,this.array)),this.array[t*this.itemSize+2]=n,this}getW(t){let n=this.array[t*this.itemSize+3];return this.normalized&&(n=fo(n,this.array)),n}setW(t,n){return this.normalized&&(n=Yr(n,this.array)),this.array[t*this.itemSize+3]=n,this}setXY(t,n,r){return t*=this.itemSize,this.normalized&&(n=Yr(n,this.array),r=Yr(r,this.array)),this.array[t+0]=n,this.array[t+1]=r,this}setXYZ(t,n,r,i){return t*=this.itemSize,this.normalized&&(n=Yr(n,this.array),r=Yr(r,this.array),i=Yr(i,this.array)),this.array[t+0]=n,this.array[t+1]=r,this.array[t+2]=i,this}setXYZW(t,n,r,i,o){return t*=this.itemSize,this.normalized&&(n=Yr(n,this.array),r=Yr(r,this.array),i=Yr(i,this.array),o=Yr(o,this.array)),this.array[t+0]=n,this.array[t+1]=r,this.array[t+2]=i,this.array[t+3]=o,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(t.name=this.name),this.usage!==_g&&(t.usage=this.usage),t}}class O3 extends wn{constructor(t,n,r){super(new Int8Array(t),n,r)}}class F3 extends wn{constructor(t,n,r){super(new Uint8Array(t),n,r)}}class N3 extends wn{constructor(t,n,r){super(new Uint8ClampedArray(t),n,r)}}class U3 extends wn{constructor(t,n,r){super(new Int16Array(t),n,r)}}class Zb extends wn{constructor(t,n,r){super(new Uint16Array(t),n,r)}}class G3 extends wn{constructor(t,n,r){super(new Int32Array(t),n,r)}}class $b extends wn{constructor(t,n,r){super(new Uint32Array(t),n,r)}}class H3 extends wn{constructor(t,n,r){super(new Uint16Array(t),n,r),this.isFloat16BufferAttribute=!0}getX(t){let n=Fm(this.array[t*this.itemSize]);return this.normalized&&(n=fo(n,this.array)),n}setX(t,n){return this.normalized&&(n=Yr(n,this.array)),this.array[t*this.itemSize]=Ro(n),this}getY(t){let n=Fm(this.array[t*this.itemSize+1]);return this.normalized&&(n=fo(n,this.array)),n}setY(t,n){return this.normalized&&(n=Yr(n,this.array)),this.array[t*this.itemSize+1]=Ro(n),this}getZ(t){let n=Fm(this.array[t*this.itemSize+2]);return this.normalized&&(n=fo(n,this.array)),n}setZ(t,n){return this.normalized&&(n=Yr(n,this.array)),this.array[t*this.itemSize+2]=Ro(n),this}getW(t){let n=Fm(this.array[t*this.itemSize+3]);return this.normalized&&(n=fo(n,this.array)),n}setW(t,n){return this.normalized&&(n=Yr(n,this.array)),this.array[t*this.itemSize+3]=Ro(n),this}setXY(t,n,r){return t*=this.itemSize,this.normalized&&(n=Yr(n,this.array),r=Yr(r,this.array)),this.array[t+0]=Ro(n),this.array[t+1]=Ro(r),this}setXYZ(t,n,r,i){return t*=this.itemSize,this.normalized&&(n=Yr(n,this.array),r=Yr(r,this.array),i=Yr(i,this.array)),this.array[t+0]=Ro(n),this.array[t+1]=Ro(r),this.array[t+2]=Ro(i),this}setXYZW(t,n,r,i,o){return t*=this.itemSize,this.normalized&&(n=Yr(n,this.array),r=Yr(r,this.array),i=Yr(i,this.array),o=Yr(o,this.array)),this.array[t+0]=Ro(n),this.array[t+1]=Ro(r),this.array[t+2]=Ro(i),this.array[t+3]=Ro(o),this}}class _r extends wn{constructor(t,n,r){super(new Float32Array(t),n,r)}}let z3=0;const Ca=new Cr,F1=new pn,jh=new Oe,Qo=new Ws,wm=new Ws,ls=new Oe;class Wr extends Wl{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:z3++}),this.uuid=aa(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return Array.isArray(t)?this.index=new(OE(t)?$b:Zb)(t,1):this.index=t,this}setIndirect(t){return this.indirect=t,this}getIndirect(){return this.indirect}getAttribute(t){return this.attributes[t]}setAttribute(t,n){return this.attributes[t]=n,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return this.attributes[t]!==void 0}addGroup(t,n,r=0){this.groups.push({start:t,count:n,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(t,n){this.drawRange.start=t,this.drawRange.count=n}applyMatrix4(t){const n=this.attributes.position;n!==void 0&&(n.applyMatrix4(t),n.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const o=new Vr().getNormalMatrix(t);r.applyNormalMatrix(o),r.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(t),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(t){return Ca.makeRotationFromQuaternion(t),this.applyMatrix4(Ca),this}rotateX(t){return Ca.makeRotationX(t),this.applyMatrix4(Ca),this}rotateY(t){return Ca.makeRotationY(t),this.applyMatrix4(Ca),this}rotateZ(t){return Ca.makeRotationZ(t),this.applyMatrix4(Ca),this}translate(t,n,r){return Ca.makeTranslation(t,n,r),this.applyMatrix4(Ca),this}scale(t,n,r){return Ca.makeScale(t,n,r),this.applyMatrix4(Ca),this}lookAt(t){return F1.lookAt(t),F1.updateMatrix(),this.applyMatrix4(F1.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(jh).negate(),this.translate(jh.x,jh.y,jh.z),this}setFromPoints(t){const n=this.getAttribute("position");if(n===void 0){const r=[];for(let i=0,o=t.length;i<o;i++){const s=t[i];r.push(s.x,s.y,s.z||0)}this.setAttribute("position",new _r(r,3))}else{const r=Math.min(t.length,n.count);for(let i=0;i<r;i++){const o=t[i];n.setXYZ(i,o.x,o.y,o.z||0)}t.length>n.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),n.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Ws);const t=this.attributes.position,n=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new Oe(-1/0,-1/0,-1/0),new Oe(1/0,1/0,1/0));return}if(t!==void 0){if(this.boundingBox.setFromBufferAttribute(t),n)for(let r=0,i=n.length;r<i;r++){const o=n[r];Qo.setFromBufferAttribute(o),this.morphTargetsRelative?(ls.addVectors(this.boundingBox.min,Qo.min),this.boundingBox.expandByPoint(ls),ls.addVectors(this.boundingBox.max,Qo.max),this.boundingBox.expandByPoint(ls)):(this.boundingBox.expandByPoint(Qo.min),this.boundingBox.expandByPoint(Qo.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Cs);const t=this.attributes.position,n=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new Oe,1/0);return}if(t){const r=this.boundingSphere.center;if(Qo.setFromBufferAttribute(t),n)for(let o=0,s=n.length;o<s;o++){const a=n[o];wm.setFromBufferAttribute(a),this.morphTargetsRelative?(ls.addVectors(Qo.min,wm.min),Qo.expandByPoint(ls),ls.addVectors(Qo.max,wm.max),Qo.expandByPoint(ls)):(Qo.expandByPoint(wm.min),Qo.expandByPoint(wm.max))}Qo.getCenter(r);let i=0;for(let o=0,s=t.count;o<s;o++)ls.fromBufferAttribute(t,o),i=Math.max(i,r.distanceToSquared(ls));if(n)for(let o=0,s=n.length;o<s;o++){const a=n[o],l=this.morphTargetsRelative;for(let u=0,h=a.count;u<h;u++)ls.fromBufferAttribute(a,u),l&&(jh.fromBufferAttribute(t,u),ls.add(jh)),i=Math.max(i,r.distanceToSquared(ls))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const t=this.index,n=this.attributes;if(t===null||n.position===void 0||n.normal===void 0||n.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=n.position,i=n.normal,o=n.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new wn(new Float32Array(4*r.count),4));const s=this.getAttribute("tangent"),a=[],l=[];for(let P=0;P<r.count;P++)a[P]=new Oe,l[P]=new Oe;const u=new Oe,h=new Oe,p=new Oe,c=new Ct,f=new Ct,m=new Ct,y=new Oe,v=new Oe;function g(P,I,D){u.fromBufferAttribute(r,P),h.fromBufferAttribute(r,I),p.fromBufferAttribute(r,D),c.fromBufferAttribute(o,P),f.fromBufferAttribute(o,I),m.fromBufferAttribute(o,D),h.sub(u),p.sub(u),f.sub(c),m.sub(c);const j=1/(f.x*m.y-m.x*f.y);isFinite(j)&&(y.copy(h).multiplyScalar(m.y).addScaledVector(p,-f.y).multiplyScalar(j),v.copy(p).multiplyScalar(f.x).addScaledVector(h,-m.x).multiplyScalar(j),a[P].add(y),a[I].add(y),a[D].add(y),l[P].add(v),l[I].add(v),l[D].add(v))}let x=this.groups;x.length===0&&(x=[{start:0,count:t.count}]);for(let P=0,I=x.length;P<I;++P){const D=x[P],j=D.start,N=D.count;for(let O=j,W=j+N;O<W;O+=3)g(t.getX(O+0),t.getX(O+1),t.getX(O+2))}const b=new Oe,w=new Oe,T=new Oe,R=new Oe;function C(P){T.fromBufferAttribute(i,P),R.copy(T);const I=a[P];b.copy(I),b.sub(T.multiplyScalar(T.dot(I))).normalize(),w.crossVectors(R,I);const j=w.dot(l[P])<0?-1:1;s.setXYZW(P,b.x,b.y,b.z,j)}for(let P=0,I=x.length;P<I;++P){const D=x[P],j=D.start,N=D.count;for(let O=j,W=j+N;O<W;O+=3)C(t.getX(O+0)),C(t.getX(O+1)),C(t.getX(O+2))}}computeVertexNormals(){const t=this.index,n=this.getAttribute("position");if(n!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new wn(new Float32Array(n.count*3),3),this.setAttribute("normal",r);else for(let c=0,f=r.count;c<f;c++)r.setXYZ(c,0,0,0);const i=new Oe,o=new Oe,s=new Oe,a=new Oe,l=new Oe,u=new Oe,h=new Oe,p=new Oe;if(t)for(let c=0,f=t.count;c<f;c+=3){const m=t.getX(c+0),y=t.getX(c+1),v=t.getX(c+2);i.fromBufferAttribute(n,m),o.fromBufferAttribute(n,y),s.fromBufferAttribute(n,v),h.subVectors(s,o),p.subVectors(i,o),h.cross(p),a.fromBufferAttribute(r,m),l.fromBufferAttribute(r,y),u.fromBufferAttribute(r,v),a.add(h),l.add(h),u.add(h),r.setXYZ(m,a.x,a.y,a.z),r.setXYZ(y,l.x,l.y,l.z),r.setXYZ(v,u.x,u.y,u.z)}else for(let c=0,f=n.count;c<f;c+=3)i.fromBufferAttribute(n,c+0),o.fromBufferAttribute(n,c+1),s.fromBufferAttribute(n,c+2),h.subVectors(s,o),p.subVectors(i,o),h.cross(p),r.setXYZ(c+0,h.x,h.y,h.z),r.setXYZ(c+1,h.x,h.y,h.z),r.setXYZ(c+2,h.x,h.y,h.z);this.normalizeNormals(),r.needsUpdate=!0}}normalizeNormals(){const t=this.attributes.normal;for(let n=0,r=t.count;n<r;n++)ls.fromBufferAttribute(t,n),ls.normalize(),t.setXYZ(n,ls.x,ls.y,ls.z)}toNonIndexed(){function t(a,l){const u=a.array,h=a.itemSize,p=a.normalized,c=new u.constructor(l.length*h);let f=0,m=0;for(let y=0,v=l.length;y<v;y++){a.isInterleavedBufferAttribute?f=l[y]*a.data.stride+a.offset:f=l[y]*h;for(let g=0;g<h;g++)c[m++]=u[f++]}return new wn(c,h,p)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const n=new Wr,r=this.index.array,i=this.attributes;for(const a in i){const l=i[a],u=t(l,r);n.setAttribute(a,u)}const o=this.morphAttributes;for(const a in o){const l=[],u=o[a];for(let h=0,p=u.length;h<p;h++){const c=u[h],f=t(c,r);l.push(f)}n.morphAttributes[a]=l}n.morphTargetsRelative=this.morphTargetsRelative;const s=this.groups;for(let a=0,l=s.length;a<l;a++){const u=s[a];n.addGroup(u.start,u.count,u.materialIndex)}return n}toJSON(){const t={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,this.name!==""&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const u in l)l[u]!==void 0&&(t[u]=l[u]);return t}t.data={attributes:{}};const n=this.index;n!==null&&(t.data.index={type:n.array.constructor.name,array:Array.prototype.slice.call(n.array)});const r=this.attributes;for(const l in r){const u=r[l];t.data.attributes[l]=u.toJSON(t.data)}const i={};let o=!1;for(const l in this.morphAttributes){const u=this.morphAttributes[l],h=[];for(let p=0,c=u.length;p<c;p++){const f=u[p];h.push(f.toJSON(t.data))}h.length>0&&(i[l]=h,o=!0)}o&&(t.data.morphAttributes=i,t.data.morphTargetsRelative=this.morphTargetsRelative);const s=this.groups;s.length>0&&(t.data.groups=JSON.parse(JSON.stringify(s)));const a=this.boundingSphere;return a!==null&&(t.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),t}clone(){return new this.constructor().copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const n={};this.name=t.name;const r=t.index;r!==null&&this.setIndex(r.clone(n));const i=t.attributes;for(const u in i){const h=i[u];this.setAttribute(u,h.clone(n))}const o=t.morphAttributes;for(const u in o){const h=[],p=o[u];for(let c=0,f=p.length;c<f;c++)h.push(p[c].clone(n));this.morphAttributes[u]=h}this.morphTargetsRelative=t.morphTargetsRelative;const s=t.groups;for(let u=0,h=s.length;u<h;u++){const p=s[u];this.addGroup(p.start,p.count,p.materialIndex)}const a=t.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=t.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const sM=new Cr,Lf=new Bd,Xy=new Cs,oM=new Oe,Yy=new Oe,qy=new Oe,Jy=new Oe,N1=new Oe,Ky=new Oe,aM=new Oe,Qy=new Oe;class Ti extends pn{constructor(t=new Wr,n=new sa){super(),this.isMesh=!0,this.type="Mesh",this.geometry=t,this.material=n,this.updateMorphTargets()}copy(t,n){return super.copy(t,n),t.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),t.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,s=i.length;o<s;o++){const a=i[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=o}}}}getVertexPosition(t,n){const r=this.geometry,i=r.attributes.position,o=r.morphAttributes.position,s=r.morphTargetsRelative;n.fromBufferAttribute(i,t);const a=this.morphTargetInfluences;if(o&&a){Ky.set(0,0,0);for(let l=0,u=o.length;l<u;l++){const h=a[l],p=o[l];h!==0&&(N1.fromBufferAttribute(p,t),s?Ky.addScaledVector(N1,h):Ky.addScaledVector(N1.sub(n),h))}n.add(Ky)}return n}raycast(t,n){const r=this.geometry,i=this.material,o=this.matrixWorld;i!==void 0&&(r.boundingSphere===null&&r.computeBoundingSphere(),Xy.copy(r.boundingSphere),Xy.applyMatrix4(o),Lf.copy(t.ray).recast(t.near),!(Xy.containsPoint(Lf.origin)===!1&&(Lf.intersectSphere(Xy,oM)===null||Lf.origin.distanceToSquared(oM)>(t.far-t.near)**2))&&(sM.copy(o).invert(),Lf.copy(t.ray).applyMatrix4(sM),!(r.boundingBox!==null&&Lf.intersectsBox(r.boundingBox)===!1)&&this._computeIntersections(t,n,Lf)))}_computeIntersections(t,n,r){let i;const o=this.geometry,s=this.material,a=o.index,l=o.attributes.position,u=o.attributes.uv,h=o.attributes.uv1,p=o.attributes.normal,c=o.groups,f=o.drawRange;if(a!==null)if(Array.isArray(s))for(let m=0,y=c.length;m<y;m++){const v=c[m],g=s[v.materialIndex],x=Math.max(v.start,f.start),b=Math.min(a.count,Math.min(v.start+v.count,f.start+f.count));for(let w=x,T=b;w<T;w+=3){const R=a.getX(w),C=a.getX(w+1),P=a.getX(w+2);i=Zy(this,g,t,r,u,h,p,R,C,P),i&&(i.faceIndex=Math.floor(w/3),i.face.materialIndex=v.materialIndex,n.push(i))}}else{const m=Math.max(0,f.start),y=Math.min(a.count,f.start+f.count);for(let v=m,g=y;v<g;v+=3){const x=a.getX(v),b=a.getX(v+1),w=a.getX(v+2);i=Zy(this,s,t,r,u,h,p,x,b,w),i&&(i.faceIndex=Math.floor(v/3),n.push(i))}}else if(l!==void 0)if(Array.isArray(s))for(let m=0,y=c.length;m<y;m++){const v=c[m],g=s[v.materialIndex],x=Math.max(v.start,f.start),b=Math.min(l.count,Math.min(v.start+v.count,f.start+f.count));for(let w=x,T=b;w<T;w+=3){const R=w,C=w+1,P=w+2;i=Zy(this,g,t,r,u,h,p,R,C,P),i&&(i.faceIndex=Math.floor(w/3),i.face.materialIndex=v.materialIndex,n.push(i))}}else{const m=Math.max(0,f.start),y=Math.min(l.count,f.start+f.count);for(let v=m,g=y;v<g;v+=3){const x=v,b=v+1,w=v+2;i=Zy(this,s,t,r,u,h,p,x,b,w),i&&(i.faceIndex=Math.floor(v/3),n.push(i))}}}}function V3(d,t,n,r,i,o,s,a){let l;if(t.side===mo?l=r.intersectTriangle(s,o,i,!0,a):l=r.intersectTriangle(i,o,s,t.side===Hl,a),l===null)return null;Qy.copy(a),Qy.applyMatrix4(d.matrixWorld);const u=n.ray.origin.distanceTo(Qy);return u<n.near||u>n.far?null:{distance:u,point:Qy.clone(),object:d}}function Zy(d,t,n,r,i,o,s,a,l,u){d.getVertexPosition(a,Yy),d.getVertexPosition(l,qy),d.getVertexPosition(u,Jy);const h=V3(d,t,n,r,Yy,qy,Jy,aM);if(h){const p=new Oe;Io.getBarycoord(aM,Yy,qy,Jy,p),i&&(h.uv=Io.getInterpolatedAttribute(i,a,l,u,p,new Ct)),o&&(h.uv1=Io.getInterpolatedAttribute(o,a,l,u,p,new Ct)),s&&(h.normal=Io.getInterpolatedAttribute(s,a,l,u,p,new Oe),h.normal.dot(r.direction)>0&&h.normal.multiplyScalar(-1));const c={a,b:l,c:u,normal:new Oe,materialIndex:0};Io.getNormal(Yy,qy,Jy,c.normal),h.face=c,h.barycoord=p}return h}class kd extends Wr{constructor(t=1,n=1,r=1,i=1,o=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:n,depth:r,widthSegments:i,heightSegments:o,depthSegments:s};const a=this;i=Math.floor(i),o=Math.floor(o),s=Math.floor(s);const l=[],u=[],h=[],p=[];let c=0,f=0;m("z","y","x",-1,-1,r,n,t,s,o,0),m("z","y","x",1,-1,r,n,-t,s,o,1),m("x","z","y",1,1,t,r,n,i,s,2),m("x","z","y",1,-1,t,r,-n,i,s,3),m("x","y","z",1,-1,t,n,r,i,o,4),m("x","y","z",-1,-1,t,n,-r,i,o,5),this.setIndex(l),this.setAttribute("position",new _r(u,3)),this.setAttribute("normal",new _r(h,3)),this.setAttribute("uv",new _r(p,2));function m(y,v,g,x,b,w,T,R,C,P,I){const D=w/C,j=T/P,N=w/2,O=T/2,W=R/2,X=C+1,J=P+1;let ee=0,V=0;const q=new Oe;for(let Y=0;Y<J;Y++){const Z=Y*j-O;for(let ce=0;ce<X;ce++){const B=ce*D-N;q[y]=B*x,q[v]=Z*b,q[g]=W,u.push(q.x,q.y,q.z),q[y]=0,q[v]=0,q[g]=R>0?1:-1,h.push(q.x,q.y,q.z),p.push(ce/C),p.push(1-Y/P),ee+=1}}for(let Y=0;Y<P;Y++)for(let Z=0;Z<C;Z++){const ce=c+Z+X*Y,B=c+Z+X*(Y+1),U=c+(Z+1)+X*(Y+1),K=c+(Z+1)+X*Y;l.push(ce,B,K),l.push(B,U,K),V+=6}a.addGroup(f,V,I),f+=V,c+=ee}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new kd(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}}function vp(d){const t={};for(const n in d){t[n]={};for(const r in d[n]){const i=d[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),t[n][r]=null):t[n][r]=i.clone():Array.isArray(i)?t[n][r]=i.slice():t[n][r]=i}}return t}function ao(d){const t={};for(let n=0;n<d.length;n++){const r=vp(d[n]);for(const i in r)t[i]=r[i]}return t}function W3(d){const t=[];for(let n=0;n<d.length;n++)t.push(d[n].clone());return t}function GE(d){const t=d.getRenderTarget();return t===null?d.outputColorSpace:t.isXRRenderTarget===!0?t.texture.colorSpace:vn.workingColorSpace}const HE={clone:vp,merge:ao};var X3=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,Y3=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class pl extends Qi{constructor(t){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=X3,this.fragmentShader=Y3,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,t!==void 0&&this.setValues(t)}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=vp(t.uniforms),this.uniformsGroups=W3(t.uniformsGroups),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.fog=t.fog,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){const n=super.toJSON(t);n.glslVersion=this.glslVersion,n.uniforms={};for(const i in this.uniforms){const s=this.uniforms[i].value;s&&s.isTexture?n.uniforms[i]={type:"t",value:s.toJSON(t).uuid}:s&&s.isColor?n.uniforms[i]={type:"c",value:s.getHex()}:s&&s.isVector2?n.uniforms[i]={type:"v2",value:s.toArray()}:s&&s.isVector3?n.uniforms[i]={type:"v3",value:s.toArray()}:s&&s.isVector4?n.uniforms[i]={type:"v4",value:s.toArray()}:s&&s.isMatrix3?n.uniforms[i]={type:"m3",value:s.toArray()}:s&&s.isMatrix4?n.uniforms[i]={type:"m4",value:s.toArray()}:n.uniforms[i]={value:s}}Object.keys(this.defines).length>0&&(n.defines=this.defines),n.vertexShader=this.vertexShader,n.fragmentShader=this.fragmentShader,n.lights=this.lights,n.clipping=this.clipping;const r={};for(const i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(n.extensions=r),n}}class Ug extends pn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Cr,this.projectionMatrix=new Cr,this.projectionMatrixInverse=new Cr,this.coordinateSystem=dl}copy(t,n){return super.copy(t,n),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this.coordinateSystem=t.coordinateSystem,this}getWorldDirection(t){return super.getWorldDirection(t).negate()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,n){super.updateWorldMatrix(t,n),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const Ac=new Oe,lM=new Ct,uM=new Ct;class yi extends Ug{constructor(t=50,n=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=n,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,n){return super.copy(t,n),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=t.view===null?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){const n=.5*this.getFilmHeight()/t;this.fov=yp*2*Math.atan(n),this.updateProjectionMatrix()}getFocalLength(){const t=Math.tan(dd*.5*this.fov);return .5*this.getFilmHeight()/t}getEffectiveFOV(){return yp*2*Math.atan(Math.tan(dd*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(t,n,r){Ac.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(Ac.x,Ac.y).multiplyScalar(-t/Ac.z),Ac.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),r.set(Ac.x,Ac.y).multiplyScalar(-t/Ac.z)}getViewSize(t,n){return this.getViewBounds(t,lM,uM),n.subVectors(uM,lM)}setViewOffset(t,n,r,i,o,s){this.aspect=t/n,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=i,this.view.width=o,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=this.near;let n=t*Math.tan(dd*.5*this.fov)/this.zoom,r=2*n,i=this.aspect*r,o=-.5*i;const s=this.view;if(this.view!==null&&this.view.enabled){const l=s.fullWidth,u=s.fullHeight;o+=s.offsetX*i/l,n-=s.offsetY*r/u,i*=s.width/l,r*=s.height/u}const a=this.filmOffset;a!==0&&(o+=t*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(o,o+i,n,n-r,t,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const n=super.toJSON(t);return n.object.fov=this.fov,n.object.zoom=this.zoom,n.object.near=this.near,n.object.far=this.far,n.object.focus=this.focus,n.object.aspect=this.aspect,this.view!==null&&(n.object.view=Object.assign({},this.view)),n.object.filmGauge=this.filmGauge,n.object.filmOffset=this.filmOffset,n}}const Lh=-90,Dh=1;class zE extends pn{constructor(t,n,r){super(),this.type="CubeCamera",this.renderTarget=r,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new yi(Lh,Dh,t,n);i.layers=this.layers,this.add(i);const o=new yi(Lh,Dh,t,n);o.layers=this.layers,this.add(o);const s=new yi(Lh,Dh,t,n);s.layers=this.layers,this.add(s);const a=new yi(Lh,Dh,t,n);a.layers=this.layers,this.add(a);const l=new yi(Lh,Dh,t,n);l.layers=this.layers,this.add(l);const u=new yi(Lh,Dh,t,n);u.layers=this.layers,this.add(u)}updateCoordinateSystem(){const t=this.coordinateSystem,n=this.children.concat(),[r,i,o,s,a,l]=n;for(const u of n)this.remove(u);if(t===dl)r.up.set(0,1,0),r.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),o.up.set(0,0,-1),o.lookAt(0,1,0),s.up.set(0,0,1),s.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(t===xg)r.up.set(0,-1,0),r.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),o.up.set(0,0,1),o.lookAt(0,1,0),s.up.set(0,0,-1),s.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+t);for(const u of n)this.add(u),u.updateMatrixWorld()}update(t,n){this.parent===null&&this.updateMatrixWorld();const{renderTarget:r,activeMipmapLevel:i}=this;this.coordinateSystem!==t.coordinateSystem&&(this.coordinateSystem=t.coordinateSystem,this.updateCoordinateSystem());const[o,s,a,l,u,h]=this.children,p=t.getRenderTarget(),c=t.getActiveCubeFace(),f=t.getActiveMipmapLevel(),m=t.xr.enabled;t.xr.enabled=!1;const y=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,t.setRenderTarget(r,0,i),t.render(n,o),t.setRenderTarget(r,1,i),t.render(n,s),t.setRenderTarget(r,2,i),t.render(n,a),t.setRenderTarget(r,3,i),t.render(n,l),t.setRenderTarget(r,4,i),t.render(n,u),r.texture.generateMipmaps=y,t.setRenderTarget(r,5,i),t.render(n,h),t.setRenderTarget(p,c,f),t.xr.enabled=m,r.texture.needsPMREMUpdate=!0}}class Gg extends ei{constructor(t,n,r,i,o,s,a,l,u,h){t=t!==void 0?t:[],n=n!==void 0?n:Hu,super(t,n,r,i,o,s,a,l,u,h),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(t){this.image=t}}class VE extends zl{constructor(t=1,n={}){super(t,t,n),this.isWebGLCubeRenderTarget=!0;const r={width:t,height:t,depth:1},i=[r,r,r,r,r,r];this.texture=new Gg(i,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=n.generateMipmaps!==void 0?n.generateMipmaps:!1,this.texture.minFilter=n.minFilter!==void 0?n.minFilter:Ei}fromEquirectangularTexture(t,n){this.texture.type=n.type,this.texture.colorSpace=n.colorSpace,this.texture.generateMipmaps=n.generateMipmaps,this.texture.minFilter=n.minFilter,this.texture.magFilter=n.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new kd(5,5,5),o=new pl({name:"CubemapFromEquirect",uniforms:vp(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:mo,blending:Ou});o.uniforms.tEquirect.value=n;const s=new Ti(i,o),a=n.minFilter;return n.minFilter===La&&(n.minFilter=Ei),new zE(1,10,this).update(t,s),n.minFilter=a,s.geometry.dispose(),s.material.dispose(),this}clear(t,n,r,i){const o=t.getRenderTarget();for(let s=0;s<6;s++)t.setRenderTarget(this,s),t.clear(n,r,i);t.setRenderTarget(o)}}class v_{constructor(t,n=25e-5){this.isFogExp2=!0,this.name="",this.color=new nr(t),this.density=n}clone(){return new v_(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class __{constructor(t,n=1,r=1e3){this.isFog=!0,this.name="",this.color=new nr(t),this.near=n,this.far=r}clone(){return new __(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class ew extends pn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new ua,this.environmentIntensity=1,this.environmentRotation=new ua,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,n){return super.copy(t,n),t.background!==null&&(this.background=t.background.clone()),t.environment!==null&&(this.environment=t.environment.clone()),t.fog!==null&&(this.fog=t.fog.clone()),this.backgroundBlurriness=t.backgroundBlurriness,this.backgroundIntensity=t.backgroundIntensity,this.backgroundRotation.copy(t.backgroundRotation),this.environmentIntensity=t.environmentIntensity,this.environmentRotation.copy(t.environmentRotation),t.overrideMaterial!==null&&(this.overrideMaterial=t.overrideMaterial.clone()),this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const n=super.toJSON(t);return this.fog!==null&&(n.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(n.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(n.object.backgroundIntensity=this.backgroundIntensity),n.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(n.object.environmentIntensity=this.environmentIntensity),n.object.environmentRotation=this.environmentRotation.toArray(),n}}class Hg{constructor(t,n){this.isInterleavedBuffer=!0,this.array=t,this.stride=n,this.count=t!==void 0?t.length/n:0,this.usage=_g,this.updateRanges=[],this.version=0,this.uuid=aa()}onUploadCallback(){}set needsUpdate(t){t===!0&&this.version++}setUsage(t){return this.usage=t,this}addUpdateRange(t,n){this.updateRanges.push({start:t,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this}copyAt(t,n,r){t*=this.stride,r*=n.stride;for(let i=0,o=this.stride;i<o;i++)this.array[t+i]=n.array[r+i];return this}set(t,n=0){return this.array.set(t,n),this}clone(t){t.arrayBuffers===void 0&&(t.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=aa()),t.arrayBuffers[this.array.buffer._uuid]===void 0&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const n=new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(n,this.stride);return r.setUsage(this.usage),r}onUpload(t){return this.onUploadCallback=t,this}toJSON(t){return t.arrayBuffers===void 0&&(t.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=aa()),t.arrayBuffers[this.array.buffer._uuid]===void 0&&(t.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const io=new Oe;class zc{constructor(t,n,r,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=t,this.itemSize=n,this.offset=r,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(t){this.data.needsUpdate=t}applyMatrix4(t){for(let n=0,r=this.data.count;n<r;n++)io.fromBufferAttribute(this,n),io.applyMatrix4(t),this.setXYZ(n,io.x,io.y,io.z);return this}applyNormalMatrix(t){for(let n=0,r=this.count;n<r;n++)io.fromBufferAttribute(this,n),io.applyNormalMatrix(t),this.setXYZ(n,io.x,io.y,io.z);return this}transformDirection(t){for(let n=0,r=this.count;n<r;n++)io.fromBufferAttribute(this,n),io.transformDirection(t),this.setXYZ(n,io.x,io.y,io.z);return this}getComponent(t,n){let r=this.array[t*this.data.stride+this.offset+n];return this.normalized&&(r=fo(r,this.array)),r}setComponent(t,n,r){return this.normalized&&(r=Yr(r,this.array)),this.data.array[t*this.data.stride+this.offset+n]=r,this}setX(t,n){return this.normalized&&(n=Yr(n,this.array)),this.data.array[t*this.data.stride+this.offset]=n,this}setY(t,n){return this.normalized&&(n=Yr(n,this.array)),this.data.array[t*this.data.stride+this.offset+1]=n,this}setZ(t,n){return this.normalized&&(n=Yr(n,this.array)),this.data.array[t*this.data.stride+this.offset+2]=n,this}setW(t,n){return this.normalized&&(n=Yr(n,this.array)),this.data.array[t*this.data.stride+this.offset+3]=n,this}getX(t){let n=this.data.array[t*this.data.stride+this.offset];return this.normalized&&(n=fo(n,this.array)),n}getY(t){let n=this.data.array[t*this.data.stride+this.offset+1];return this.normalized&&(n=fo(n,this.array)),n}getZ(t){let n=this.data.array[t*this.data.stride+this.offset+2];return this.normalized&&(n=fo(n,this.array)),n}getW(t){let n=this.data.array[t*this.data.stride+this.offset+3];return this.normalized&&(n=fo(n,this.array)),n}setXY(t,n,r){return t=t*this.data.stride+this.offset,this.normalized&&(n=Yr(n,this.array),r=Yr(r,this.array)),this.data.array[t+0]=n,this.data.array[t+1]=r,this}setXYZ(t,n,r,i){return t=t*this.data.stride+this.offset,this.normalized&&(n=Yr(n,this.array),r=Yr(r,this.array),i=Yr(i,this.array)),this.data.array[t+0]=n,this.data.array[t+1]=r,this.data.array[t+2]=i,this}setXYZW(t,n,r,i,o){return t=t*this.data.stride+this.offset,this.normalized&&(n=Yr(n,this.array),r=Yr(r,this.array),i=Yr(i,this.array),o=Yr(o,this.array)),this.data.array[t+0]=n,this.data.array[t+1]=r,this.data.array[t+2]=i,this.data.array[t+3]=o,this}clone(t){if(t===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)n.push(this.data.array[i+o])}return new wn(new this.array.constructor(n),this.itemSize,this.normalized)}else return t.interleavedBuffers===void 0&&(t.interleavedBuffers={}),t.interleavedBuffers[this.data.uuid]===void 0&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new zc(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(t){if(t===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)n.push(this.data.array[i+o])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:n,normalized:this.normalized}}else return t.interleavedBuffers===void 0&&(t.interleavedBuffers={}),t.interleavedBuffers[this.data.uuid]===void 0&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class tw extends Qi{constructor(t){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new nr(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}}let Bh;const Sm=new Oe,kh=new Oe,Oh=new Oe,Fh=new Ct,Mm=new Ct,WE=new Cr,$y=new Oe,Am=new Oe,e0=new Oe,cM=new Ct,U1=new Ct,fM=new Ct;let XE=class extends pn{constructor(t=new tw){if(super(),this.isSprite=!0,this.type="Sprite",Bh===void 0){Bh=new Wr;const n=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),r=new Hg(n,5);Bh.setIndex([0,1,2,0,2,3]),Bh.setAttribute("position",new zc(r,3,0,!1)),Bh.setAttribute("uv",new zc(r,2,3,!1))}this.geometry=Bh,this.material=t,this.center=new Ct(.5,.5)}raycast(t,n){t.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),kh.setFromMatrixScale(this.matrixWorld),WE.copy(t.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(t.camera.matrixWorldInverse,this.matrixWorld),Oh.setFromMatrixPosition(this.modelViewMatrix),t.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&kh.multiplyScalar(-Oh.z);const r=this.material.rotation;let i,o;r!==0&&(o=Math.cos(r),i=Math.sin(r));const s=this.center;t0($y.set(-.5,-.5,0),Oh,s,kh,i,o),t0(Am.set(.5,-.5,0),Oh,s,kh,i,o),t0(e0.set(.5,.5,0),Oh,s,kh,i,o),cM.set(0,0),U1.set(1,0),fM.set(1,1);let a=t.ray.intersectTriangle($y,Am,e0,!1,Sm);if(a===null&&(t0(Am.set(-.5,.5,0),Oh,s,kh,i,o),U1.set(0,1),a=t.ray.intersectTriangle($y,e0,Am,!1,Sm),a===null))return;const l=t.ray.origin.distanceTo(Sm);l<t.near||l>t.far||n.push({distance:l,point:Sm.clone(),uv:Io.getInterpolation(Sm,$y,Am,e0,cM,U1,fM,new Ct),face:null,object:this})}copy(t,n){return super.copy(t,n),t.center!==void 0&&this.center.copy(t.center),this.material=t.material,this}};function t0(d,t,n,r,i,o){Fh.subVectors(d,n).addScalar(.5).multiply(r),i!==void 0?(Mm.x=o*Fh.x-i*Fh.y,Mm.y=i*Fh.x+o*Fh.y):Mm.copy(Fh),d.copy(t),d.x+=Mm.x,d.y+=Mm.y,d.applyMatrix4(WE)}const r0=new Oe,dM=new Oe;class YE extends pn{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(t){super.copy(t,!1);const n=t.levels;for(let r=0,i=n.length;r<i;r++){const o=n[r];this.addLevel(o.object.clone(),o.distance,o.hysteresis)}return this.autoUpdate=t.autoUpdate,this}addLevel(t,n=0,r=0){n=Math.abs(n);const i=this.levels;let o;for(o=0;o<i.length&&!(n<i[o].distance);o++);return i.splice(o,0,{distance:n,hysteresis:r,object:t}),this.add(t),this}removeLevel(t){const n=this.levels;for(let r=0;r<n.length;r++)if(n[r].distance===t){const i=n.splice(r,1);return this.remove(i[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(t){const n=this.levels;if(n.length>0){let r,i;for(r=1,i=n.length;r<i;r++){let o=n[r].distance;if(n[r].object.visible&&(o-=o*n[r].hysteresis),t<o)break}return n[r-1].object}return null}raycast(t,n){if(this.levels.length>0){r0.setFromMatrixPosition(this.matrixWorld);const i=t.ray.origin.distanceTo(r0);this.getObjectForDistance(i).raycast(t,n)}}update(t){const n=this.levels;if(n.length>1){r0.setFromMatrixPosition(t.matrixWorld),dM.setFromMatrixPosition(this.matrixWorld);const r=r0.distanceTo(dM)/t.zoom;n[0].object.visible=!0;let i,o;for(i=1,o=n.length;i<o;i++){let s=n[i].distance;if(n[i].object.visible&&(s-=s*n[i].hysteresis),r>=s)n[i-1].object.visible=!1,n[i].object.visible=!0;else break}for(this._currentLevel=i-1;i<o;i++)n[i].object.visible=!1}}toJSON(t){const n=super.toJSON(t);this.autoUpdate===!1&&(n.object.autoUpdate=!1),n.object.levels=[];const r=this.levels;for(let i=0,o=r.length;i<o;i++){const s=r[i];n.object.levels.push({object:s.object.uuid,distance:s.distance,hysteresis:s.hysteresis})}return n}}const hM=new Oe,pM=new bn,mM=new bn,q3=new Oe,gM=new Cr,n0=new Oe,G1=new Cs,yM=new Cr,H1=new Bd;class rw extends Ti{constructor(t,n){super(t,n),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=Jx,this.bindMatrix=new Cr,this.bindMatrixInverse=new Cr,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const t=this.geometry;this.boundingBox===null&&(this.boundingBox=new Ws),this.boundingBox.makeEmpty();const n=t.getAttribute("position");for(let r=0;r<n.count;r++)this.getVertexPosition(r,n0),this.boundingBox.expandByPoint(n0)}computeBoundingSphere(){const t=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Cs),this.boundingSphere.makeEmpty();const n=t.getAttribute("position");for(let r=0;r<n.count;r++)this.getVertexPosition(r,n0),this.boundingSphere.expandByPoint(n0)}copy(t,n){return super.copy(t,n),this.bindMode=t.bindMode,this.bindMatrix.copy(t.bindMatrix),this.bindMatrixInverse.copy(t.bindMatrixInverse),this.skeleton=t.skeleton,t.boundingBox!==null&&(this.boundingBox=t.boundingBox.clone()),t.boundingSphere!==null&&(this.boundingSphere=t.boundingSphere.clone()),this}raycast(t,n){const r=this.material,i=this.matrixWorld;r!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),G1.copy(this.boundingSphere),G1.applyMatrix4(i),t.ray.intersectsSphere(G1)!==!1&&(yM.copy(i).invert(),H1.copy(t.ray).applyMatrix4(yM),!(this.boundingBox!==null&&H1.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(t,n,H1)))}getVertexPosition(t,n){return super.getVertexPosition(t,n),this.applyBoneTransform(t,n),n}bind(t,n){this.skeleton=t,n===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),n=this.matrixWorld),this.bindMatrix.copy(n),this.bindMatrixInverse.copy(n).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const t=new bn,n=this.geometry.attributes.skinWeight;for(let r=0,i=n.count;r<i;r++){t.fromBufferAttribute(n,r);const o=1/t.manhattanLength();o!==1/0?t.multiplyScalar(o):t.set(1,0,0,0),n.setXYZW(r,t.x,t.y,t.z,t.w)}}updateMatrixWorld(t){super.updateMatrixWorld(t),this.bindMode===Jx?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===bE?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(t,n){const r=this.skeleton,i=this.geometry;pM.fromBufferAttribute(i.attributes.skinIndex,t),mM.fromBufferAttribute(i.attributes.skinWeight,t),hM.copy(n).applyMatrix4(this.bindMatrix),n.set(0,0,0);for(let o=0;o<4;o++){const s=mM.getComponent(o);if(s!==0){const a=pM.getComponent(o);gM.multiplyMatrices(r.bones[a].matrixWorld,r.boneInverses[a]),n.addScaledVector(q3.copy(hM).applyMatrix4(gM),s)}}return n.applyMatrix4(this.bindMatrixInverse)}}class x_ extends pn{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Ol extends ei{constructor(t=null,n=1,r=1,i,o,s,a,l,u=fs,h=fs,p,c){super(null,s,a,l,u,h,i,o,p,c),this.isDataTexture=!0,this.image={data:t,width:n,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const vM=new Cr,J3=new Cr;class zg{constructor(t=[],n=[]){this.uuid=aa(),this.bones=t.slice(0),this.boneInverses=n,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const t=this.bones,n=this.boneInverses;if(this.boneMatrices=new Float32Array(t.length*16),n.length===0)this.calculateInverses();else if(t.length!==n.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let r=0,i=this.bones.length;r<i;r++)this.boneInverses.push(new Cr)}}calculateInverses(){this.boneInverses.length=0;for(let t=0,n=this.bones.length;t<n;t++){const r=new Cr;this.bones[t]&&r.copy(this.bones[t].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let t=0,n=this.bones.length;t<n;t++){const r=this.bones[t];r&&r.matrixWorld.copy(this.boneInverses[t]).invert()}for(let t=0,n=this.bones.length;t<n;t++){const r=this.bones[t];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){const t=this.bones,n=this.boneInverses,r=this.boneMatrices,i=this.boneTexture;for(let o=0,s=t.length;o<s;o++){const a=t[o]?t[o].matrixWorld:J3;vM.multiplyMatrices(a,n[o]),vM.toArray(r,o*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new zg(this.bones,this.boneInverses)}computeBoneTexture(){let t=Math.sqrt(this.bones.length*4);t=Math.ceil(t/4)*4,t=Math.max(t,4);const n=new Float32Array(t*t*4);n.set(this.boneMatrices);const r=new Ol(n,t,t,zs,jo);return r.needsUpdate=!0,this.boneMatrices=n,this.boneTexture=r,this}getBoneByName(t){for(let n=0,r=this.bones.length;n<r;n++){const i=this.bones[n];if(i.name===t)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(t,n){this.uuid=t.uuid;for(let r=0,i=t.bones.length;r<i;r++){const o=t.bones[r];let s=n[o];s===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",o),s=new x_),this.bones.push(s),this.boneInverses.push(new Cr().fromArray(t.boneInverses[r]))}return this.init(),this}toJSON(){const t={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};t.uuid=this.uuid;const n=this.bones,r=this.boneInverses;for(let i=0,o=n.length;i<o;i++){const s=n[i];t.bones.push(s.uuid);const a=r[i];t.boneInverses.push(a.toArray())}return t}}class Ed extends wn{constructor(t,n,r,i=1){super(t,n,r),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}toJSON(){const t=super.toJSON();return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}}const Nh=new Cr,_M=new Cr,i0=[],xM=new Ws,K3=new Cr,Em=new Ti,Tm=new Cs;class nw extends Ti{constructor(t,n,r){super(t,n),this.isInstancedMesh=!0,this.instanceMatrix=new Ed(new Float32Array(r*16),16),this.instanceColor=null,this.morphTexture=null,this.count=r,this.boundingBox=null,this.boundingSphere=null;for(let i=0;i<r;i++)this.setMatrixAt(i,K3)}computeBoundingBox(){const t=this.geometry,n=this.count;this.boundingBox===null&&(this.boundingBox=new Ws),t.boundingBox===null&&t.computeBoundingBox(),this.boundingBox.makeEmpty();for(let r=0;r<n;r++)this.getMatrixAt(r,Nh),xM.copy(t.boundingBox).applyMatrix4(Nh),this.boundingBox.union(xM)}computeBoundingSphere(){const t=this.geometry,n=this.count;this.boundingSphere===null&&(this.boundingSphere=new Cs),t.boundingSphere===null&&t.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let r=0;r<n;r++)this.getMatrixAt(r,Nh),Tm.copy(t.boundingSphere).applyMatrix4(Nh),this.boundingSphere.union(Tm)}copy(t,n){return super.copy(t,n),this.instanceMatrix.copy(t.instanceMatrix),t.morphTexture!==null&&(this.morphTexture=t.morphTexture.clone()),t.instanceColor!==null&&(this.instanceColor=t.instanceColor.clone()),this.count=t.count,t.boundingBox!==null&&(this.boundingBox=t.boundingBox.clone()),t.boundingSphere!==null&&(this.boundingSphere=t.boundingSphere.clone()),this}getColorAt(t,n){n.fromArray(this.instanceColor.array,t*3)}getMatrixAt(t,n){n.fromArray(this.instanceMatrix.array,t*16)}getMorphAt(t,n){const r=n.morphTargetInfluences,i=this.morphTexture.source.data.data,o=r.length+1,s=t*o+1;for(let a=0;a<r.length;a++)r[a]=i[s+a]}raycast(t,n){const r=this.matrixWorld,i=this.count;if(Em.geometry=this.geometry,Em.material=this.material,Em.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Tm.copy(this.boundingSphere),Tm.applyMatrix4(r),t.ray.intersectsSphere(Tm)!==!1))for(let o=0;o<i;o++){this.getMatrixAt(o,Nh),_M.multiplyMatrices(r,Nh),Em.matrixWorld=_M,Em.raycast(t,i0);for(let s=0,a=i0.length;s<a;s++){const l=i0[s];l.instanceId=o,l.object=this,n.push(l)}i0.length=0}}setColorAt(t,n){this.instanceColor===null&&(this.instanceColor=new Ed(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),n.toArray(this.instanceColor.array,t*3)}setMatrixAt(t,n){n.toArray(this.instanceMatrix.array,t*16)}setMorphAt(t,n){const r=n.morphTargetInfluences,i=r.length+1;this.morphTexture===null&&(this.morphTexture=new Ol(new Float32Array(i*this.count),i,this.count,d_,jo));const o=this.morphTexture.source.data.data;let s=0;for(let u=0;u<r.length;u++)s+=r[u];const a=this.geometry.morphTargetsRelative?1:1-s,l=i*t;o[l]=a,o.set(r,l+1)}updateMorphTargets(){}dispose(){return this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null),this}}const z1=new Oe,Q3=new Oe,Z3=new Vr;class Ru{constructor(t=new Oe(1,0,0),n=0){this.isPlane=!0,this.normal=t,this.constant=n}set(t,n){return this.normal.copy(t),this.constant=n,this}setComponents(t,n,r,i){return this.normal.set(t,n,r),this.constant=i,this}setFromNormalAndCoplanarPoint(t,n){return this.normal.copy(t),this.constant=-n.dot(this.normal),this}setFromCoplanarPoints(t,n,r){const i=z1.subVectors(r,n).cross(Q3.subVectors(t,n)).normalize();return this.setFromNormalAndCoplanarPoint(i,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,n){return n.copy(t).addScaledVector(this.normal,-this.distanceToPoint(t))}intersectLine(t,n){const r=t.delta(z1),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(t.start)===0?n.copy(t.start):null;const o=-(t.start.dot(this.normal)+this.constant)/i;return o<0||o>1?null:n.copy(t.start).addScaledVector(r,o)}intersectsLine(t){const n=this.distanceToPoint(t.start),r=this.distanceToPoint(t.end);return n<0&&r>0||r<0&&n>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,n){const r=n||Z3.getNormalMatrix(t),i=this.coplanarPoint(z1).applyMatrix4(t),o=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(o),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Df=new Cs,s0=new Oe;class Vg{constructor(t=new Ru,n=new Ru,r=new Ru,i=new Ru,o=new Ru,s=new Ru){this.planes=[t,n,r,i,o,s]}set(t,n,r,i,o,s){const a=this.planes;return a[0].copy(t),a[1].copy(n),a[2].copy(r),a[3].copy(i),a[4].copy(o),a[5].copy(s),this}copy(t){const n=this.planes;for(let r=0;r<6;r++)n[r].copy(t.planes[r]);return this}setFromProjectionMatrix(t,n=dl){const r=this.planes,i=t.elements,o=i[0],s=i[1],a=i[2],l=i[3],u=i[4],h=i[5],p=i[6],c=i[7],f=i[8],m=i[9],y=i[10],v=i[11],g=i[12],x=i[13],b=i[14],w=i[15];if(r[0].setComponents(l-o,c-u,v-f,w-g).normalize(),r[1].setComponents(l+o,c+u,v+f,w+g).normalize(),r[2].setComponents(l+s,c+h,v+m,w+x).normalize(),r[3].setComponents(l-s,c-h,v-m,w-x).normalize(),r[4].setComponents(l-a,c-p,v-y,w-b).normalize(),n===dl)r[5].setComponents(l+a,c+p,v+y,w+b).normalize();else if(n===xg)r[5].setComponents(a,p,y,b).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+n);return this}intersectsObject(t){if(t.boundingSphere!==void 0)t.boundingSphere===null&&t.computeBoundingSphere(),Df.copy(t.boundingSphere).applyMatrix4(t.matrixWorld);else{const n=t.geometry;n.boundingSphere===null&&n.computeBoundingSphere(),Df.copy(n.boundingSphere).applyMatrix4(t.matrixWorld)}return this.intersectsSphere(Df)}intersectsSprite(t){return Df.center.set(0,0,0),Df.radius=.7071067811865476,Df.applyMatrix4(t.matrixWorld),this.intersectsSphere(Df)}intersectsSphere(t){const n=this.planes,r=t.center,i=-t.radius;for(let o=0;o<6;o++)if(n[o].distanceToPoint(r)<i)return!1;return!0}intersectsBox(t){const n=this.planes;for(let r=0;r<6;r++){const i=n[r];if(s0.x=i.normal.x>0?t.max.x:t.min.x,s0.y=i.normal.y>0?t.max.y:t.min.y,s0.z=i.normal.z>0?t.max.z:t.min.z,i.distanceToPoint(s0)<0)return!1}return!0}containsPoint(t){const n=this.planes;for(let r=0;r<6;r++)if(n[r].distanceToPoint(t)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function V1(d,t){return d-t}function $3(d,t){return d.z-t.z}function eI(d,t){return t.z-d.z}class tI{constructor(){this.index=0,this.pool=[],this.list=[]}push(t,n,r,i){const o=this.pool,s=this.list;this.index>=o.length&&o.push({start:-1,count:-1,z:-1,index:-1});const a=o[this.index];s.push(a),this.index++,a.start=t,a.count=n,a.z=r,a.index=i}reset(){this.list.length=0,this.index=0}}const Co=new Cr,rI=new nr(1,1,1),W1=new Vg,o0=new Ws,Bf=new Cs,Cm=new Oe,bM=new Oe,nI=new Oe,X1=new tI,Fs=new Ti,a0=[];function iI(d,t,n=0){const r=t.itemSize;if(d.isInterleavedBufferAttribute||d.array.constructor!==t.array.constructor){const i=d.count;for(let o=0;o<i;o++)for(let s=0;s<r;s++)t.setComponent(o+n,s,d.getComponent(o,s))}else t.array.set(d.array,n*r);t.needsUpdate=!0}function kf(d,t){if(d.constructor!==t.constructor){const n=Math.min(d.length,t.length);for(let r=0;r<n;r++)t[r]=d[r]}else{const n=Math.min(d.length,t.length);t.set(new d.constructor(d.buffer,0,n))}}class qE extends Ti{get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}constructor(t,n,r=n*2,i){super(new Wr,i),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=t,this._maxVertexCount=n,this._maxIndexCount=r,this._multiDrawCounts=new Int32Array(t),this._multiDrawStarts=new Int32Array(t),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}_initMatricesTexture(){let t=Math.sqrt(this._maxInstanceCount*4);t=Math.ceil(t/4)*4,t=Math.max(t,4);const n=new Float32Array(t*t*4),r=new Ol(n,t,t,zs,jo);this._matricesTexture=r}_initIndirectTexture(){let t=Math.sqrt(this._maxInstanceCount);t=Math.ceil(t);const n=new Uint32Array(t*t),r=new Ol(n,t,t,Fg,zu);this._indirectTexture=r}_initColorsTexture(){let t=Math.sqrt(this._maxInstanceCount);t=Math.ceil(t);const n=new Float32Array(t*t*4).fill(1),r=new Ol(n,t,t,zs,jo);r.colorSpace=vn.workingColorSpace,this._colorsTexture=r}_initializeGeometry(t){const n=this.geometry,r=this._maxVertexCount,i=this._maxIndexCount;if(this._geometryInitialized===!1){for(const o in t.attributes){const s=t.getAttribute(o),{array:a,itemSize:l,normalized:u}=s,h=new a.constructor(r*l),p=new wn(h,l,u);n.setAttribute(o,p)}if(t.getIndex()!==null){const o=r>65535?new Uint32Array(i):new Uint16Array(i);n.setIndex(new wn(o,1))}this._geometryInitialized=!0}}_validateGeometry(t){const n=this.geometry;if(!!t.getIndex()!=!!n.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const r in n.attributes){if(!t.hasAttribute(r))throw new Error(`THREE.BatchedMesh: Added geometry missing "${r}". All geometries must have consistent attributes.`);const i=t.getAttribute(r),o=n.getAttribute(r);if(i.itemSize!==o.itemSize||i.normalized!==o.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(t){const n=this._instanceInfo;if(t<0||t>=n.length||n[t].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${t}. Instance is either out of range or has been deleted.`)}validateGeometryId(t){const n=this._geometryInfo;if(t<0||t>=n.length||n[t].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${t}. Geometry is either out of range or has been deleted.`)}setCustomSort(t){return this.customSort=t,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Ws);const t=this.boundingBox,n=this._instanceInfo;t.makeEmpty();for(let r=0,i=n.length;r<i;r++){if(n[r].active===!1)continue;const o=n[r].geometryIndex;this.getMatrixAt(r,Co),this.getBoundingBoxAt(o,o0).applyMatrix4(Co),t.union(o0)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Cs);const t=this.boundingSphere,n=this._instanceInfo;t.makeEmpty();for(let r=0,i=n.length;r<i;r++){if(n[r].active===!1)continue;const o=n[r].geometryIndex;this.getMatrixAt(r,Co),this.getBoundingSphereAt(o,Bf).applyMatrix4(Co),t.union(Bf)}}addInstance(t){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const r={visible:!0,active:!0,geometryIndex:t};let i=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(V1),i=this._availableInstanceIds.shift(),this._instanceInfo[i]=r):(i=this._instanceInfo.length,this._instanceInfo.push(r));const o=this._matricesTexture;Co.identity().toArray(o.image.data,i*16),o.needsUpdate=!0;const s=this._colorsTexture;return s&&(rI.toArray(s.image.data,i*4),s.needsUpdate=!0),this._visibilityChanged=!0,i}addGeometry(t,n=-1,r=-1){this._initializeGeometry(t),this._validateGeometry(t);const i={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},o=this._geometryInfo;i.vertexStart=this._nextVertexStart,i.reservedVertexCount=n===-1?t.getAttribute("position").count:n;const s=t.getIndex();if(s!==null&&(i.indexStart=this._nextIndexStart,i.reservedIndexCount=r===-1?s.count:r),i.indexStart!==-1&&i.indexStart+i.reservedIndexCount>this._maxIndexCount||i.vertexStart+i.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let l;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(V1),l=this._availableGeometryIds.shift(),o[l]=i):(l=this._geometryCount,this._geometryCount++,o.push(i)),this.setGeometryAt(l,t),this._nextIndexStart=i.indexStart+i.reservedIndexCount,this._nextVertexStart=i.vertexStart+i.reservedVertexCount,l}setGeometryAt(t,n){if(t>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(n);const r=this.geometry,i=r.getIndex()!==null,o=r.getIndex(),s=n.getIndex(),a=this._geometryInfo[t];if(i&&s.count>a.reservedIndexCount||n.attributes.position.count>a.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const l=a.vertexStart,u=a.reservedVertexCount;a.vertexCount=n.getAttribute("position").count;for(const h in r.attributes){const p=n.getAttribute(h),c=r.getAttribute(h);iI(p,c,l);const f=p.itemSize;for(let m=p.count,y=u;m<y;m++){const v=l+m;for(let g=0;g<f;g++)c.setComponent(v,g,0)}c.needsUpdate=!0,c.addUpdateRange(l*f,u*f)}if(i){const h=a.indexStart,p=a.reservedIndexCount;a.indexCount=n.getIndex().count;for(let c=0;c<s.count;c++)o.setX(h+c,l+s.getX(c));for(let c=s.count,f=p;c<f;c++)o.setX(h+c,l);o.needsUpdate=!0,o.addUpdateRange(h,a.reservedIndexCount)}return a.start=i?a.indexStart:a.vertexStart,a.count=i?a.indexCount:a.vertexCount,a.boundingBox=null,n.boundingBox!==null&&(a.boundingBox=n.boundingBox.clone()),a.boundingSphere=null,n.boundingSphere!==null&&(a.boundingSphere=n.boundingSphere.clone()),this._visibilityChanged=!0,t}deleteGeometry(t){const n=this._geometryInfo;if(t>=n.length||n[t].active===!1)return this;const r=this._instanceInfo;for(let i=0,o=r.length;i<o;i++)r[i].geometryIndex===t&&this.deleteInstance(i);return n[t].active=!1,this._availableGeometryIds.push(t),this._visibilityChanged=!0,this}deleteInstance(t){return this.validateInstanceId(t),this._instanceInfo[t].active=!1,this._availableInstanceIds.push(t),this._visibilityChanged=!0,this}optimize(){let t=0,n=0;const r=this._geometryInfo,i=r.map((s,a)=>a).sort((s,a)=>r[s].vertexStart-r[a].vertexStart),o=this.geometry;for(let s=0,a=r.length;s<a;s++){const l=i[s],u=r[l];if(u.active!==!1){if(o.index!==null){if(u.indexStart!==n){const{indexStart:h,vertexStart:p,reservedIndexCount:c}=u,f=o.index,m=f.array,y=t-p;for(let v=h;v<h+c;v++)m[v]=m[v]+y;f.array.copyWithin(n,h,h+c),f.addUpdateRange(n,c),u.indexStart=n}n+=u.reservedIndexCount}if(u.vertexStart!==t){const{vertexStart:h,reservedVertexCount:p}=u,c=o.attributes;for(const f in c){const m=c[f],{array:y,itemSize:v}=m;y.copyWithin(t*v,h*v,(h+p)*v),m.addUpdateRange(t*v,p*v)}u.vertexStart=t}t+=u.reservedVertexCount,u.start=o.index?u.indexStart:u.vertexStart,this._nextIndexStart=o.index?u.indexStart+u.reservedIndexCount:0,this._nextVertexStart=u.vertexStart+u.reservedVertexCount}}return this}getBoundingBoxAt(t,n){if(t>=this._geometryCount)return null;const r=this.geometry,i=this._geometryInfo[t];if(i.boundingBox===null){const o=new Ws,s=r.index,a=r.attributes.position;for(let l=i.start,u=i.start+i.count;l<u;l++){let h=l;s&&(h=s.getX(h)),o.expandByPoint(Cm.fromBufferAttribute(a,h))}i.boundingBox=o}return n.copy(i.boundingBox),n}getBoundingSphereAt(t,n){if(t>=this._geometryCount)return null;const r=this.geometry,i=this._geometryInfo[t];if(i.boundingSphere===null){const o=new Cs;this.getBoundingBoxAt(t,o0),o0.getCenter(o.center);const s=r.index,a=r.attributes.position;let l=0;for(let u=i.start,h=i.start+i.count;u<h;u++){let p=u;s&&(p=s.getX(p)),Cm.fromBufferAttribute(a,p),l=Math.max(l,o.center.distanceToSquared(Cm))}o.radius=Math.sqrt(l),i.boundingSphere=o}return n.copy(i.boundingSphere),n}setMatrixAt(t,n){this.validateInstanceId(t);const r=this._matricesTexture,i=this._matricesTexture.image.data;return n.toArray(i,t*16),r.needsUpdate=!0,this}getMatrixAt(t,n){return this.validateInstanceId(t),n.fromArray(this._matricesTexture.image.data,t*16)}setColorAt(t,n){return this.validateInstanceId(t),this._colorsTexture===null&&this._initColorsTexture(),n.toArray(this._colorsTexture.image.data,t*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(t,n){return this.validateInstanceId(t),n.fromArray(this._colorsTexture.image.data,t*4)}setVisibleAt(t,n){return this.validateInstanceId(t),this._instanceInfo[t].visible===n?this:(this._instanceInfo[t].visible=n,this._visibilityChanged=!0,this)}getVisibleAt(t){return this.validateInstanceId(t),this._instanceInfo[t].visible}setGeometryIdAt(t,n){return this.validateInstanceId(t),this.validateGeometryId(n),this._instanceInfo[t].geometryIndex=n,this}getGeometryIdAt(t){return this.validateInstanceId(t),this._instanceInfo[t].geometryIndex}getGeometryRangeAt(t,n={}){this.validateGeometryId(t);const r=this._geometryInfo[t];return n.vertexStart=r.vertexStart,n.vertexCount=r.vertexCount,n.reservedVertexCount=r.reservedVertexCount,n.indexStart=r.indexStart,n.indexCount=r.indexCount,n.reservedIndexCount=r.reservedIndexCount,n.start=r.start,n.count=r.count,n}setInstanceCount(t){const n=this._availableInstanceIds,r=this._instanceInfo;for(n.sort(V1);n[n.length-1]===r.length;)r.pop(),n.pop();if(t<r.length)throw new Error(`BatchedMesh: Instance ids outside the range ${t} are being used. Cannot shrink instance count.`);const i=new Int32Array(t),o=new Int32Array(t);kf(this._multiDrawCounts,i),kf(this._multiDrawStarts,o),this._multiDrawCounts=i,this._multiDrawStarts=o,this._maxInstanceCount=t;const s=this._indirectTexture,a=this._matricesTexture,l=this._colorsTexture;s.dispose(),this._initIndirectTexture(),kf(s.image.data,this._indirectTexture.image.data),a.dispose(),this._initMatricesTexture(),kf(a.image.data,this._matricesTexture.image.data),l&&(l.dispose(),this._initColorsTexture(),kf(l.image.data,this._colorsTexture.image.data))}setGeometrySize(t,n){const r=[...this._geometryInfo].filter(a=>a.active);if(Math.max(...r.map(a=>a.vertexStart+a.reservedVertexCount))>t)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${n}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...r.map(l=>l.indexStart+l.reservedIndexCount))>n)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${n}. Cannot shrink further.`);const o=this.geometry;o.dispose(),this._maxVertexCount=t,this._maxIndexCount=n,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new Wr,this._initializeGeometry(o));const s=this.geometry;o.index&&kf(o.index.array,s.index.array);for(const a in o.attributes)kf(o.attributes[a].array,s.attributes[a].array)}raycast(t,n){const r=this._instanceInfo,i=this._geometryInfo,o=this.matrixWorld,s=this.geometry;Fs.material=this.material,Fs.geometry.index=s.index,Fs.geometry.attributes=s.attributes,Fs.geometry.boundingBox===null&&(Fs.geometry.boundingBox=new Ws),Fs.geometry.boundingSphere===null&&(Fs.geometry.boundingSphere=new Cs);for(let a=0,l=r.length;a<l;a++){if(!r[a].visible||!r[a].active)continue;const u=r[a].geometryIndex,h=i[u];Fs.geometry.setDrawRange(h.start,h.count),this.getMatrixAt(a,Fs.matrixWorld).premultiply(o),this.getBoundingBoxAt(u,Fs.geometry.boundingBox),this.getBoundingSphereAt(u,Fs.geometry.boundingSphere),Fs.raycast(t,a0);for(let p=0,c=a0.length;p<c;p++){const f=a0[p];f.object=this,f.batchId=a,n.push(f)}a0.length=0}Fs.material=null,Fs.geometry.index=null,Fs.geometry.attributes={},Fs.geometry.setDrawRange(0,1/0)}copy(t){return super.copy(t),this.geometry=t.geometry.clone(),this.perObjectFrustumCulled=t.perObjectFrustumCulled,this.sortObjects=t.sortObjects,this.boundingBox=t.boundingBox!==null?t.boundingBox.clone():null,this.boundingSphere=t.boundingSphere!==null?t.boundingSphere.clone():null,this._geometryInfo=t._geometryInfo.map(n=>({...n,boundingBox:n.boundingBox!==null?n.boundingBox.clone():null,boundingSphere:n.boundingSphere!==null?n.boundingSphere.clone():null})),this._instanceInfo=t._instanceInfo.map(n=>({...n})),this._maxInstanceCount=t._maxInstanceCount,this._maxVertexCount=t._maxVertexCount,this._maxIndexCount=t._maxIndexCount,this._geometryInitialized=t._geometryInitialized,this._geometryCount=t._geometryCount,this._multiDrawCounts=t._multiDrawCounts.slice(),this._multiDrawStarts=t._multiDrawStarts.slice(),this._matricesTexture=t._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=t._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null),this}onBeforeRender(t,n,r,i,o){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const s=i.getIndex(),a=s===null?1:s.array.BYTES_PER_ELEMENT,l=this._instanceInfo,u=this._multiDrawStarts,h=this._multiDrawCounts,p=this._geometryInfo,c=this.perObjectFrustumCulled,f=this._indirectTexture,m=f.image.data;c&&(Co.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse).multiply(this.matrixWorld),W1.setFromProjectionMatrix(Co,t.coordinateSystem));let y=0;if(this.sortObjects){Co.copy(this.matrixWorld).invert(),Cm.setFromMatrixPosition(r.matrixWorld).applyMatrix4(Co),bM.set(0,0,-1).transformDirection(r.matrixWorld).transformDirection(Co);for(let x=0,b=l.length;x<b;x++)if(l[x].visible&&l[x].active){const w=l[x].geometryIndex;this.getMatrixAt(x,Co),this.getBoundingSphereAt(w,Bf).applyMatrix4(Co);let T=!1;if(c&&(T=!W1.intersectsSphere(Bf)),!T){const R=p[w],C=nI.subVectors(Bf.center,Cm).dot(bM);X1.push(R.start,R.count,C,x)}}const v=X1.list,g=this.customSort;g===null?v.sort(o.transparent?eI:$3):g.call(this,v,r);for(let x=0,b=v.length;x<b;x++){const w=v[x];u[y]=w.start*a,h[y]=w.count,m[y]=w.index,y++}X1.reset()}else for(let v=0,g=l.length;v<g;v++)if(l[v].visible&&l[v].active){const x=l[v].geometryIndex;let b=!1;if(c&&(this.getMatrixAt(v,Co),this.getBoundingSphereAt(x,Bf).applyMatrix4(Co),b=!W1.intersectsSphere(Bf)),!b){const w=p[x];u[y]=w.start*a,h[y]=w.count,m[y]=v,y++}}f.needsUpdate=!0,this._multiDrawCount=y,this._visibilityChanged=!1}onBeforeShadow(t,n,r,i,o,s){this.onBeforeRender(t,null,i,o,s)}}class Ys extends Qi{constructor(t){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new nr(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.fog=t.fog,this}}const Hv=new Oe,zv=new Oe,wM=new Cr,Rm=new Bd,l0=new Cs,Y1=new Oe,SM=new Oe;class Vu extends pn{constructor(t=new Wr,n=new Ys){super(),this.isLine=!0,this.type="Line",this.geometry=t,this.material=n,this.updateMorphTargets()}copy(t,n){return super.copy(t,n),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}computeLineDistances(){const t=this.geometry;if(t.index===null){const n=t.attributes.position,r=[0];for(let i=1,o=n.count;i<o;i++)Hv.fromBufferAttribute(n,i-1),zv.fromBufferAttribute(n,i),r[i]=r[i-1],r[i]+=Hv.distanceTo(zv);t.setAttribute("lineDistance",new _r(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(t,n){const r=this.geometry,i=this.matrixWorld,o=t.params.Line.threshold,s=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),l0.copy(r.boundingSphere),l0.applyMatrix4(i),l0.radius+=o,t.ray.intersectsSphere(l0)===!1)return;wM.copy(i).invert(),Rm.copy(t.ray).applyMatrix4(wM);const a=o/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,u=this.isLineSegments?2:1,h=r.index,c=r.attributes.position;if(h!==null){const f=Math.max(0,s.start),m=Math.min(h.count,s.start+s.count);for(let y=f,v=m-1;y<v;y+=u){const g=h.getX(y),x=h.getX(y+1),b=u0(this,t,Rm,l,g,x);b&&n.push(b)}if(this.isLineLoop){const y=h.getX(m-1),v=h.getX(f),g=u0(this,t,Rm,l,y,v);g&&n.push(g)}}else{const f=Math.max(0,s.start),m=Math.min(c.count,s.start+s.count);for(let y=f,v=m-1;y<v;y+=u){const g=u0(this,t,Rm,l,y,y+1);g&&n.push(g)}if(this.isLineLoop){const y=u0(this,t,Rm,l,m-1,f);y&&n.push(y)}}}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,s=i.length;o<s;o++){const a=i[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=o}}}}}function u0(d,t,n,r,i,o){const s=d.geometry.attributes.position;if(Hv.fromBufferAttribute(s,i),zv.fromBufferAttribute(s,o),n.distanceSqToSegment(Hv,zv,Y1,SM)>r)return;Y1.applyMatrix4(d.matrixWorld);const l=t.ray.origin.distanceTo(Y1);if(!(l<t.near||l>t.far))return{distance:l,point:SM.clone().applyMatrix4(d.matrixWorld),index:i,face:null,faceIndex:null,barycoord:null,object:d}}const MM=new Oe,AM=new Oe;class gl extends Vu{constructor(t,n){super(t,n),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const t=this.geometry;if(t.index===null){const n=t.attributes.position,r=[];for(let i=0,o=n.count;i<o;i+=2)MM.fromBufferAttribute(n,i),AM.fromBufferAttribute(n,i+1),r[i]=i===0?0:r[i-1],r[i+1]=r[i]+MM.distanceTo(AM);t.setAttribute("lineDistance",new _r(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class iw extends Vu{constructor(t,n){super(t,n),this.isLineLoop=!0,this.type="LineLoop"}}class b_ extends Qi{constructor(t){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new nr(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}}const EM=new Cr,Zx=new Bd,c0=new Cs,f0=new Oe;class sw extends pn{constructor(t=new Wr,n=new b_){super(),this.isPoints=!0,this.type="Points",this.geometry=t,this.material=n,this.updateMorphTargets()}copy(t,n){return super.copy(t,n),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}raycast(t,n){const r=this.geometry,i=this.matrixWorld,o=t.params.Points.threshold,s=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),c0.copy(r.boundingSphere),c0.applyMatrix4(i),c0.radius+=o,t.ray.intersectsSphere(c0)===!1)return;EM.copy(i).invert(),Zx.copy(t.ray).applyMatrix4(EM);const a=o/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,u=r.index,p=r.attributes.position;if(u!==null){const c=Math.max(0,s.start),f=Math.min(u.count,s.start+s.count);for(let m=c,y=f;m<y;m++){const v=u.getX(m);f0.fromBufferAttribute(p,v),TM(f0,v,l,i,t,n,this)}}else{const c=Math.max(0,s.start),f=Math.min(p.count,s.start+s.count);for(let m=c,y=f;m<y;m++)f0.fromBufferAttribute(p,m),TM(f0,m,l,i,t,n,this)}}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,s=i.length;o<s;o++){const a=i[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=o}}}}}function TM(d,t,n,r,i,o,s){const a=Zx.distanceSqToPoint(d);if(a<n){const l=new Oe;Zx.closestPointToPoint(d,l),l.applyMatrix4(r);const u=i.ray.origin.distanceTo(l);if(u<i.near||u>i.far)return;o.push({distance:u,distanceToRay:Math.sqrt(a),point:l,index:t,face:null,faceIndex:null,barycoord:null,object:s})}}class Du extends pn{constructor(){super(),this.isGroup=!0,this.type="Group"}}class sI extends ei{constructor(t,n,r,i,o,s,a,l,u){super(t,n,r,i,o,s,a,l,u),this.isVideoTexture=!0,this.minFilter=s!==void 0?s:Ei,this.magFilter=o!==void 0?o:Ei,this.generateMipmaps=!1;const h=this;function p(){h.needsUpdate=!0,t.requestVideoFrameCallback(p)}"requestVideoFrameCallback"in t&&t.requestVideoFrameCallback(p)}clone(){return new this.constructor(this.image).copy(this)}update(){const t=this.image;"requestVideoFrameCallback"in t===!1&&t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class oI extends ei{constructor(t,n){super({width:t,height:n}),this.isFramebufferTexture=!0,this.magFilter=fs,this.minFilter=fs,this.generateMipmaps=!1,this.needsUpdate=!0}}class w_ extends ei{constructor(t,n,r,i,o,s,a,l,u,h,p,c){super(null,s,a,l,u,h,i,o,p,c),this.isCompressedTexture=!0,this.image={width:n,height:r},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1}}class aI extends w_{constructor(t,n,r,i,o,s){super(t,n,r,o,s),this.isCompressedArrayTexture=!0,this.image.depth=i,this.wrapR=ia,this.layerUpdates=new Set}addLayerUpdate(t){this.layerUpdates.add(t)}clearLayerUpdates(){this.layerUpdates.clear()}}class lI extends w_{constructor(t,n,r){super(void 0,t[0].width,t[0].height,n,r,Hu),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=t}}class JE extends ei{constructor(t,n,r,i,o,s,a,l,u){super(t,n,r,i,o,s,a,l,u),this.isCanvasTexture=!0,this.needsUpdate=!0}}class ow extends ei{constructor(t,n,r,i,o,s,a,l,u,h=fd){if(h!==fd&&h!==Md)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&h===fd&&(r=zu),r===void 0&&h===Md&&(r=Sd),super(null,i,o,s,a,l,h,r,u),this.isDepthTexture=!0,this.image={width:t,height:n},this.magFilter=a!==void 0?a:fs,this.minFilter=l!==void 0?l:fs,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(t){return super.copy(t),this.compareFunction=t.compareFunction,this}toJSON(t){const n=super.toJSON(t);return this.compareFunction!==null&&(n.compareFunction=this.compareFunction),n}}class yl{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(t,n){const r=this.getUtoTmapping(t);return this.getPoint(r,n)}getPoints(t=5){const n=[];for(let r=0;r<=t;r++)n.push(this.getPoint(r/t));return n}getSpacedPoints(t=5){const n=[];for(let r=0;r<=t;r++)n.push(this.getPointAt(r/t));return n}getLength(){const t=this.getLengths();return t[t.length-1]}getLengths(t=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const n=[];let r,i=this.getPoint(0),o=0;n.push(0);for(let s=1;s<=t;s++)r=this.getPoint(s/t),o+=r.distanceTo(i),n.push(o),i=r;return this.cacheArcLengths=n,n}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(t,n){const r=this.getLengths();let i=0;const o=r.length;let s;n?s=n:s=t*r[o-1];let a=0,l=o-1,u;for(;a<=l;)if(i=Math.floor(a+(l-a)/2),u=r[i]-s,u<0)a=i+1;else if(u>0)l=i-1;else{l=i;break}if(i=l,r[i]===s)return i/(o-1);const h=r[i],c=r[i+1]-h,f=(s-h)/c;return(i+f)/(o-1)}getTangent(t,n){let i=t-1e-4,o=t+1e-4;i<0&&(i=0),o>1&&(o=1);const s=this.getPoint(i),a=this.getPoint(o),l=n||(s.isVector2?new Ct:new Oe);return l.copy(a).sub(s).normalize(),l}getTangentAt(t,n){const r=this.getUtoTmapping(t);return this.getTangent(r,n)}computeFrenetFrames(t,n){const r=new Oe,i=[],o=[],s=[],a=new Oe,l=new Cr;for(let f=0;f<=t;f++){const m=f/t;i[f]=this.getTangentAt(m,new Oe)}o[0]=new Oe,s[0]=new Oe;let u=Number.MAX_VALUE;const h=Math.abs(i[0].x),p=Math.abs(i[0].y),c=Math.abs(i[0].z);h<=u&&(u=h,r.set(1,0,0)),p<=u&&(u=p,r.set(0,1,0)),c<=u&&r.set(0,0,1),a.crossVectors(i[0],r).normalize(),o[0].crossVectors(i[0],a),s[0].crossVectors(i[0],o[0]);for(let f=1;f<=t;f++){if(o[f]=o[f-1].clone(),s[f]=s[f-1].clone(),a.crossVectors(i[f-1],i[f]),a.length()>Number.EPSILON){a.normalize();const m=Math.acos(Ur(i[f-1].dot(i[f]),-1,1));o[f].applyMatrix4(l.makeRotationAxis(a,m))}s[f].crossVectors(i[f],o[f])}if(n===!0){let f=Math.acos(Ur(o[0].dot(o[t]),-1,1));f/=t,i[0].dot(a.crossVectors(o[0],o[t]))>0&&(f=-f);for(let m=1;m<=t;m++)o[m].applyMatrix4(l.makeRotationAxis(i[m],f*m)),s[m].crossVectors(i[m],o[m])}return{tangents:i,normals:o,binormals:s}}clone(){return new this.constructor().copy(this)}copy(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}toJSON(){const t={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t}fromJSON(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}class S_ extends yl{constructor(t=0,n=0,r=1,i=1,o=0,s=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=t,this.aY=n,this.xRadius=r,this.yRadius=i,this.aStartAngle=o,this.aEndAngle=s,this.aClockwise=a,this.aRotation=l}getPoint(t,n=new Ct){const r=n,i=Math.PI*2;let o=this.aEndAngle-this.aStartAngle;const s=Math.abs(o)<Number.EPSILON;for(;o<0;)o+=i;for(;o>i;)o-=i;o<Number.EPSILON&&(s?o=0:o=i),this.aClockwise===!0&&!s&&(o===i?o=-i:o=o-i);const a=this.aStartAngle+t*o;let l=this.aX+this.xRadius*Math.cos(a),u=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const h=Math.cos(this.aRotation),p=Math.sin(this.aRotation),c=l-this.aX,f=u-this.aY;l=c*h-f*p+this.aX,u=c*p+f*h+this.aY}return r.set(l,u)}copy(t){return super.copy(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}toJSON(){const t=super.toJSON();return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t}fromJSON(t){return super.fromJSON(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}}class KE extends S_{constructor(t,n,r,i,o,s){super(t,n,r,r,i,o,s),this.isArcCurve=!0,this.type="ArcCurve"}}function aw(){let d=0,t=0,n=0,r=0;function i(o,s,a,l){d=o,t=a,n=-3*o+3*s-2*a-l,r=2*o-2*s+a+l}return{initCatmullRom:function(o,s,a,l,u){i(s,a,u*(a-o),u*(l-s))},initNonuniformCatmullRom:function(o,s,a,l,u,h,p){let c=(s-o)/u-(a-o)/(u+h)+(a-s)/h,f=(a-s)/h-(l-s)/(h+p)+(l-a)/p;c*=h,f*=h,i(s,a,c,f)},calc:function(o){const s=o*o,a=s*o;return d+t*o+n*s+r*a}}}const d0=new Oe,q1=new aw,J1=new aw,K1=new aw;class QE extends yl{constructor(t=[],n=!1,r="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=t,this.closed=n,this.curveType=r,this.tension=i}getPoint(t,n=new Oe){const r=n,i=this.points,o=i.length,s=(o-(this.closed?0:1))*t;let a=Math.floor(s),l=s-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/o)+1)*o:l===0&&a===o-1&&(a=o-2,l=1);let u,h;this.closed||a>0?u=i[(a-1)%o]:(d0.subVectors(i[0],i[1]).add(i[0]),u=d0);const p=i[a%o],c=i[(a+1)%o];if(this.closed||a+2<o?h=i[(a+2)%o]:(d0.subVectors(i[o-1],i[o-2]).add(i[o-1]),h=d0),this.curveType==="centripetal"||this.curveType==="chordal"){const f=this.curveType==="chordal"?.5:.25;let m=Math.pow(u.distanceToSquared(p),f),y=Math.pow(p.distanceToSquared(c),f),v=Math.pow(c.distanceToSquared(h),f);y<1e-4&&(y=1),m<1e-4&&(m=y),v<1e-4&&(v=y),q1.initNonuniformCatmullRom(u.x,p.x,c.x,h.x,m,y,v),J1.initNonuniformCatmullRom(u.y,p.y,c.y,h.y,m,y,v),K1.initNonuniformCatmullRom(u.z,p.z,c.z,h.z,m,y,v)}else this.curveType==="catmullrom"&&(q1.initCatmullRom(u.x,p.x,c.x,h.x,this.tension),J1.initCatmullRom(u.y,p.y,c.y,h.y,this.tension),K1.initCatmullRom(u.z,p.z,c.z,h.z,this.tension));return r.set(q1.calc(l),J1.calc(l),K1.calc(l)),r}copy(t){super.copy(t),this.points=[];for(let n=0,r=t.points.length;n<r;n++){const i=t.points[n];this.points.push(i.clone())}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}toJSON(){const t=super.toJSON();t.points=[];for(let n=0,r=this.points.length;n<r;n++){const i=this.points[n];t.points.push(i.toArray())}return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t}fromJSON(t){super.fromJSON(t),this.points=[];for(let n=0,r=t.points.length;n<r;n++){const i=t.points[n];this.points.push(new Oe().fromArray(i))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}}function CM(d,t,n,r,i){const o=(r-t)*.5,s=(i-n)*.5,a=d*d,l=d*a;return(2*n-2*r+o+s)*l+(-3*n+3*r-2*o-s)*a+o*d+n}function uI(d,t){const n=1-d;return n*n*t}function cI(d,t){return 2*(1-d)*d*t}function fI(d,t){return d*d*t}function tg(d,t,n,r){return uI(d,t)+cI(d,n)+fI(d,r)}function dI(d,t){const n=1-d;return n*n*n*t}function hI(d,t){const n=1-d;return 3*n*n*d*t}function pI(d,t){return 3*(1-d)*d*d*t}function mI(d,t){return d*d*d*t}function rg(d,t,n,r,i){return dI(d,t)+hI(d,n)+pI(d,r)+mI(d,i)}class lw extends yl{constructor(t=new Ct,n=new Ct,r=new Ct,i=new Ct){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=t,this.v1=n,this.v2=r,this.v3=i}getPoint(t,n=new Ct){const r=n,i=this.v0,o=this.v1,s=this.v2,a=this.v3;return r.set(rg(t,i.x,o.x,s.x,a.x),rg(t,i.y,o.y,s.y,a.y)),r}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}class ZE extends yl{constructor(t=new Oe,n=new Oe,r=new Oe,i=new Oe){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=t,this.v1=n,this.v2=r,this.v3=i}getPoint(t,n=new Oe){const r=n,i=this.v0,o=this.v1,s=this.v2,a=this.v3;return r.set(rg(t,i.x,o.x,s.x,a.x),rg(t,i.y,o.y,s.y,a.y),rg(t,i.z,o.z,s.z,a.z)),r}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}class uw extends yl{constructor(t=new Ct,n=new Ct){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=t,this.v2=n}getPoint(t,n=new Ct){const r=n;return t===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(t).add(this.v1)),r}getPointAt(t,n){return this.getPoint(t,n)}getTangent(t,n=new Ct){return n.subVectors(this.v2,this.v1).normalize()}getTangentAt(t,n){return this.getTangent(t,n)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class $E extends yl{constructor(t=new Oe,n=new Oe){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=t,this.v2=n}getPoint(t,n=new Oe){const r=n;return t===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(t).add(this.v1)),r}getPointAt(t,n){return this.getPoint(t,n)}getTangent(t,n=new Oe){return n.subVectors(this.v2,this.v1).normalize()}getTangentAt(t,n){return this.getTangent(t,n)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class cw extends yl{constructor(t=new Ct,n=new Ct,r=new Ct){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=t,this.v1=n,this.v2=r}getPoint(t,n=new Ct){const r=n,i=this.v0,o=this.v1,s=this.v2;return r.set(tg(t,i.x,o.x,s.x),tg(t,i.y,o.y,s.y)),r}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class fw extends yl{constructor(t=new Oe,n=new Oe,r=new Oe){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=t,this.v1=n,this.v2=r}getPoint(t,n=new Oe){const r=n,i=this.v0,o=this.v1,s=this.v2;return r.set(tg(t,i.x,o.x,s.x),tg(t,i.y,o.y,s.y),tg(t,i.z,o.z,s.z)),r}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class dw extends yl{constructor(t=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=t}getPoint(t,n=new Ct){const r=n,i=this.points,o=(i.length-1)*t,s=Math.floor(o),a=o-s,l=i[s===0?s:s-1],u=i[s],h=i[s>i.length-2?i.length-1:s+1],p=i[s>i.length-3?i.length-1:s+2];return r.set(CM(a,l.x,u.x,h.x,p.x),CM(a,l.y,u.y,h.y,p.y)),r}copy(t){super.copy(t),this.points=[];for(let n=0,r=t.points.length;n<r;n++){const i=t.points[n];this.points.push(i.clone())}return this}toJSON(){const t=super.toJSON();t.points=[];for(let n=0,r=this.points.length;n<r;n++){const i=this.points[n];t.points.push(i.toArray())}return t}fromJSON(t){super.fromJSON(t),this.points=[];for(let n=0,r=t.points.length;n<r;n++){const i=t.points[n];this.points.push(new Ct().fromArray(i))}return this}}var Vv=Object.freeze({__proto__:null,ArcCurve:KE,CatmullRomCurve3:QE,CubicBezierCurve:lw,CubicBezierCurve3:ZE,EllipseCurve:S_,LineCurve:uw,LineCurve3:$E,QuadraticBezierCurve:cw,QuadraticBezierCurve3:fw,SplineCurve:dw});class eT extends yl{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(t){this.curves.push(t)}closePath(){const t=this.curves[0].getPoint(0),n=this.curves[this.curves.length-1].getPoint(1);if(!t.equals(n)){const r=t.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new Vv[r](n,t))}return this}getPoint(t,n){const r=t*this.getLength(),i=this.getCurveLengths();let o=0;for(;o<i.length;){if(i[o]>=r){const s=i[o]-r,a=this.curves[o],l=a.getLength(),u=l===0?0:1-s/l;return a.getPointAt(u,n)}o++}return null}getLength(){const t=this.getCurveLengths();return t[t.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const t=[];let n=0;for(let r=0,i=this.curves.length;r<i;r++)n+=this.curves[r].getLength(),t.push(n);return this.cacheLengths=t,t}getSpacedPoints(t=40){const n=[];for(let r=0;r<=t;r++)n.push(this.getPoint(r/t));return this.autoClose&&n.push(n[0]),n}getPoints(t=12){const n=[];let r;for(let i=0,o=this.curves;i<o.length;i++){const s=o[i],a=s.isEllipseCurve?t*2:s.isLineCurve||s.isLineCurve3?1:s.isSplineCurve?t*s.points.length:t,l=s.getPoints(a);for(let u=0;u<l.length;u++){const h=l[u];r&&r.equals(h)||(n.push(h),r=h)}}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n}copy(t){super.copy(t),this.curves=[];for(let n=0,r=t.curves.length;n<r;n++){const i=t.curves[n];this.curves.push(i.clone())}return this.autoClose=t.autoClose,this}toJSON(){const t=super.toJSON();t.autoClose=this.autoClose,t.curves=[];for(let n=0,r=this.curves.length;n<r;n++){const i=this.curves[n];t.curves.push(i.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.autoClose=t.autoClose,this.curves=[];for(let n=0,r=t.curves.length;n<r;n++){const i=t.curves[n];this.curves.push(new Vv[i.type]().fromJSON(i))}return this}}class wg extends eT{constructor(t){super(),this.type="Path",this.currentPoint=new Ct,t&&this.setFromPoints(t)}setFromPoints(t){this.moveTo(t[0].x,t[0].y);for(let n=1,r=t.length;n<r;n++)this.lineTo(t[n].x,t[n].y);return this}moveTo(t,n){return this.currentPoint.set(t,n),this}lineTo(t,n){const r=new uw(this.currentPoint.clone(),new Ct(t,n));return this.curves.push(r),this.currentPoint.set(t,n),this}quadraticCurveTo(t,n,r,i){const o=new cw(this.currentPoint.clone(),new Ct(t,n),new Ct(r,i));return this.curves.push(o),this.currentPoint.set(r,i),this}bezierCurveTo(t,n,r,i,o,s){const a=new lw(this.currentPoint.clone(),new Ct(t,n),new Ct(r,i),new Ct(o,s));return this.curves.push(a),this.currentPoint.set(o,s),this}splineThru(t){const n=[this.currentPoint.clone()].concat(t),r=new dw(n);return this.curves.push(r),this.currentPoint.copy(t[t.length-1]),this}arc(t,n,r,i,o,s){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(t+a,n+l,r,i,o,s),this}absarc(t,n,r,i,o,s){return this.absellipse(t,n,r,r,i,o,s),this}ellipse(t,n,r,i,o,s,a,l){const u=this.currentPoint.x,h=this.currentPoint.y;return this.absellipse(t+u,n+h,r,i,o,s,a,l),this}absellipse(t,n,r,i,o,s,a,l){const u=new S_(t,n,r,i,o,s,a,l);if(this.curves.length>0){const p=u.getPoint(0);p.equals(this.currentPoint)||this.lineTo(p.x,p.y)}this.curves.push(u);const h=u.getPoint(1);return this.currentPoint.copy(h),this}copy(t){return super.copy(t),this.currentPoint.copy(t.currentPoint),this}toJSON(){const t=super.toJSON();return t.currentPoint=this.currentPoint.toArray(),t}fromJSON(t){return super.fromJSON(t),this.currentPoint.fromArray(t.currentPoint),this}}class Wg extends Wr{constructor(t=[new Ct(0,-.5),new Ct(.5,0),new Ct(0,.5)],n=12,r=0,i=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:t,segments:n,phiStart:r,phiLength:i},n=Math.floor(n),i=Ur(i,0,Math.PI*2);const o=[],s=[],a=[],l=[],u=[],h=1/n,p=new Oe,c=new Ct,f=new Oe,m=new Oe,y=new Oe;let v=0,g=0;for(let x=0;x<=t.length-1;x++)switch(x){case 0:v=t[x+1].x-t[x].x,g=t[x+1].y-t[x].y,f.x=g*1,f.y=-v,f.z=g*0,y.copy(f),f.normalize(),l.push(f.x,f.y,f.z);break;case t.length-1:l.push(y.x,y.y,y.z);break;default:v=t[x+1].x-t[x].x,g=t[x+1].y-t[x].y,f.x=g*1,f.y=-v,f.z=g*0,m.copy(f),f.x+=y.x,f.y+=y.y,f.z+=y.z,f.normalize(),l.push(f.x,f.y,f.z),y.copy(m)}for(let x=0;x<=n;x++){const b=r+x*h*i,w=Math.sin(b),T=Math.cos(b);for(let R=0;R<=t.length-1;R++){p.x=t[R].x*w,p.y=t[R].y,p.z=t[R].x*T,s.push(p.x,p.y,p.z),c.x=x/n,c.y=R/(t.length-1),a.push(c.x,c.y);const C=l[3*R+0]*w,P=l[3*R+1],I=l[3*R+0]*T;u.push(C,P,I)}}for(let x=0;x<n;x++)for(let b=0;b<t.length-1;b++){const w=b+x*t.length,T=w,R=w+t.length,C=w+t.length+1,P=w+1;o.push(T,R,P),o.push(C,P,R)}this.setIndex(o),this.setAttribute("position",new _r(s,3)),this.setAttribute("uv",new _r(a,2)),this.setAttribute("normal",new _r(u,3))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Wg(t.points,t.segments,t.phiStart,t.phiLength)}}class M_ extends Wg{constructor(t=1,n=1,r=4,i=8){const o=new wg;o.absarc(0,-n/2,t,Math.PI*1.5,0),o.absarc(0,n/2,t,0,Math.PI*.5),super(o.getPoints(r),i),this.type="CapsuleGeometry",this.parameters={radius:t,length:n,capSegments:r,radialSegments:i}}static fromJSON(t){return new M_(t.radius,t.length,t.capSegments,t.radialSegments)}}class A_ extends Wr{constructor(t=1,n=32,r=0,i=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:t,segments:n,thetaStart:r,thetaLength:i},n=Math.max(3,n);const o=[],s=[],a=[],l=[],u=new Oe,h=new Ct;s.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let p=0,c=3;p<=n;p++,c+=3){const f=r+p/n*i;u.x=t*Math.cos(f),u.y=t*Math.sin(f),s.push(u.x,u.y,u.z),a.push(0,0,1),h.x=(s[c]/t+1)/2,h.y=(s[c+1]/t+1)/2,l.push(h.x,h.y)}for(let p=1;p<=n;p++)o.push(p,p+1,0);this.setIndex(o),this.setAttribute("position",new _r(s,3)),this.setAttribute("normal",new _r(a,3)),this.setAttribute("uv",new _r(l,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new A_(t.radius,t.segments,t.thetaStart,t.thetaLength)}}class Pp extends Wr{constructor(t=1,n=1,r=1,i=32,o=1,s=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:n,height:r,radialSegments:i,heightSegments:o,openEnded:s,thetaStart:a,thetaLength:l};const u=this;i=Math.floor(i),o=Math.floor(o);const h=[],p=[],c=[],f=[];let m=0;const y=[],v=r/2;let g=0;x(),s===!1&&(t>0&&b(!0),n>0&&b(!1)),this.setIndex(h),this.setAttribute("position",new _r(p,3)),this.setAttribute("normal",new _r(c,3)),this.setAttribute("uv",new _r(f,2));function x(){const w=new Oe,T=new Oe;let R=0;const C=(n-t)/r;for(let P=0;P<=o;P++){const I=[],D=P/o,j=D*(n-t)+t;for(let N=0;N<=i;N++){const O=N/i,W=O*l+a,X=Math.sin(W),J=Math.cos(W);T.x=j*X,T.y=-D*r+v,T.z=j*J,p.push(T.x,T.y,T.z),w.set(X,C,J).normalize(),c.push(w.x,w.y,w.z),f.push(O,1-D),I.push(m++)}y.push(I)}for(let P=0;P<i;P++)for(let I=0;I<o;I++){const D=y[I][P],j=y[I+1][P],N=y[I+1][P+1],O=y[I][P+1];(t>0||I!==0)&&(h.push(D,j,O),R+=3),(n>0||I!==o-1)&&(h.push(j,N,O),R+=3)}u.addGroup(g,R,0),g+=R}function b(w){const T=m,R=new Ct,C=new Oe;let P=0;const I=w===!0?t:n,D=w===!0?1:-1;for(let N=1;N<=i;N++)p.push(0,v*D,0),c.push(0,D,0),f.push(.5,.5),m++;const j=m;for(let N=0;N<=i;N++){const W=N/i*l+a,X=Math.cos(W),J=Math.sin(W);C.x=I*J,C.y=v*D,C.z=I*X,p.push(C.x,C.y,C.z),c.push(0,D,0),R.x=X*.5+.5,R.y=J*.5*D+.5,f.push(R.x,R.y),m++}for(let N=0;N<i;N++){const O=T+N,W=j+N;w===!0?h.push(W,W+1,O):h.push(W+1,W,O),P+=3}u.addGroup(g,P,w===!0?1:2),g+=P}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Pp(t.radiusTop,t.radiusBottom,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}}class E_ extends Pp{constructor(t=1,n=1,r=32,i=1,o=!1,s=0,a=Math.PI*2){super(0,t,n,r,i,o,s,a),this.type="ConeGeometry",this.parameters={radius:t,height:n,radialSegments:r,heightSegments:i,openEnded:o,thetaStart:s,thetaLength:a}}static fromJSON(t){return new E_(t.radius,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}}class qc extends Wr{constructor(t=[],n=[],r=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:t,indices:n,radius:r,detail:i};const o=[],s=[];a(i),u(r),h(),this.setAttribute("position",new _r(o,3)),this.setAttribute("normal",new _r(o.slice(),3)),this.setAttribute("uv",new _r(s,2)),i===0?this.computeVertexNormals():this.normalizeNormals();function a(x){const b=new Oe,w=new Oe,T=new Oe;for(let R=0;R<n.length;R+=3)f(n[R+0],b),f(n[R+1],w),f(n[R+2],T),l(b,w,T,x)}function l(x,b,w,T){const R=T+1,C=[];for(let P=0;P<=R;P++){C[P]=[];const I=x.clone().lerp(w,P/R),D=b.clone().lerp(w,P/R),j=R-P;for(let N=0;N<=j;N++)N===0&&P===R?C[P][N]=I:C[P][N]=I.clone().lerp(D,N/j)}for(let P=0;P<R;P++)for(let I=0;I<2*(R-P)-1;I++){const D=Math.floor(I/2);I%2===0?(c(C[P][D+1]),c(C[P+1][D]),c(C[P][D])):(c(C[P][D+1]),c(C[P+1][D+1]),c(C[P+1][D]))}}function u(x){const b=new Oe;for(let w=0;w<o.length;w+=3)b.x=o[w+0],b.y=o[w+1],b.z=o[w+2],b.normalize().multiplyScalar(x),o[w+0]=b.x,o[w+1]=b.y,o[w+2]=b.z}function h(){const x=new Oe;for(let b=0;b<o.length;b+=3){x.x=o[b+0],x.y=o[b+1],x.z=o[b+2];const w=v(x)/2/Math.PI+.5,T=g(x)/Math.PI+.5;s.push(w,1-T)}m(),p()}function p(){for(let x=0;x<s.length;x+=6){const b=s[x+0],w=s[x+2],T=s[x+4],R=Math.max(b,w,T),C=Math.min(b,w,T);R>.9&&C<.1&&(b<.2&&(s[x+0]+=1),w<.2&&(s[x+2]+=1),T<.2&&(s[x+4]+=1))}}function c(x){o.push(x.x,x.y,x.z)}function f(x,b){const w=x*3;b.x=t[w+0],b.y=t[w+1],b.z=t[w+2]}function m(){const x=new Oe,b=new Oe,w=new Oe,T=new Oe,R=new Ct,C=new Ct,P=new Ct;for(let I=0,D=0;I<o.length;I+=9,D+=6){x.set(o[I+0],o[I+1],o[I+2]),b.set(o[I+3],o[I+4],o[I+5]),w.set(o[I+6],o[I+7],o[I+8]),R.set(s[D+0],s[D+1]),C.set(s[D+2],s[D+3]),P.set(s[D+4],s[D+5]),T.copy(x).add(b).add(w).divideScalar(3);const j=v(T);y(R,D+0,x,j),y(C,D+2,b,j),y(P,D+4,w,j)}}function y(x,b,w,T){T<0&&x.x===1&&(s[b]=x.x-1),w.x===0&&w.z===0&&(s[b]=T/2/Math.PI+.5)}function v(x){return Math.atan2(x.z,-x.x)}function g(x){return Math.atan2(-x.y,Math.sqrt(x.x*x.x+x.z*x.z))}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new qc(t.vertices,t.indices,t.radius,t.details)}}class T_ extends qc{constructor(t=1,n=0){const r=(1+Math.sqrt(5))/2,i=1/r,o=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-r,0,-i,r,0,i,-r,0,i,r,-i,-r,0,-i,r,0,i,-r,0,i,r,0,-r,0,-i,r,0,-i,-r,0,i,r,0,i],s=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(o,s,t,n),this.type="DodecahedronGeometry",this.parameters={radius:t,detail:n}}static fromJSON(t){return new T_(t.radius,t.detail)}}const h0=new Oe,p0=new Oe,Q1=new Oe,m0=new Io;class tT extends Wr{constructor(t=null,n=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:t,thresholdAngle:n},t!==null){const i=Math.pow(10,4),o=Math.cos(dd*n),s=t.getIndex(),a=t.getAttribute("position"),l=s?s.count:a.count,u=[0,0,0],h=["a","b","c"],p=new Array(3),c={},f=[];for(let m=0;m<l;m+=3){s?(u[0]=s.getX(m),u[1]=s.getX(m+1),u[2]=s.getX(m+2)):(u[0]=m,u[1]=m+1,u[2]=m+2);const{a:y,b:v,c:g}=m0;if(y.fromBufferAttribute(a,u[0]),v.fromBufferAttribute(a,u[1]),g.fromBufferAttribute(a,u[2]),m0.getNormal(Q1),p[0]=`${Math.round(y.x*i)},${Math.round(y.y*i)},${Math.round(y.z*i)}`,p[1]=`${Math.round(v.x*i)},${Math.round(v.y*i)},${Math.round(v.z*i)}`,p[2]=`${Math.round(g.x*i)},${Math.round(g.y*i)},${Math.round(g.z*i)}`,!(p[0]===p[1]||p[1]===p[2]||p[2]===p[0]))for(let x=0;x<3;x++){const b=(x+1)%3,w=p[x],T=p[b],R=m0[h[x]],C=m0[h[b]],P=`${w}_${T}`,I=`${T}_${w}`;I in c&&c[I]?(Q1.dot(c[I].normal)<=o&&(f.push(R.x,R.y,R.z),f.push(C.x,C.y,C.z)),c[I]=null):P in c||(c[P]={index0:u[x],index1:u[b],normal:Q1.clone()})}}for(const m in c)if(c[m]){const{index0:y,index1:v}=c[m];h0.fromBufferAttribute(a,y),p0.fromBufferAttribute(a,v),f.push(h0.x,h0.y,h0.z),f.push(p0.x,p0.y,p0.z)}this.setAttribute("position",new _r(f,3))}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}}class pd extends wg{constructor(t){super(t),this.uuid=aa(),this.type="Shape",this.holes=[]}getPointsHoles(t){const n=[];for(let r=0,i=this.holes.length;r<i;r++)n[r]=this.holes[r].getPoints(t);return n}extractPoints(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}}copy(t){super.copy(t),this.holes=[];for(let n=0,r=t.holes.length;n<r;n++){const i=t.holes[n];this.holes.push(i.clone())}return this}toJSON(){const t=super.toJSON();t.uuid=this.uuid,t.holes=[];for(let n=0,r=this.holes.length;n<r;n++){const i=this.holes[n];t.holes.push(i.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.uuid=t.uuid,this.holes=[];for(let n=0,r=t.holes.length;n<r;n++){const i=t.holes[n];this.holes.push(new wg().fromJSON(i))}return this}}const gI={triangulate:function(d,t,n=2){const r=t&&t.length,i=r?t[0]*n:d.length;let o=rT(d,0,i,n,!0);const s=[];if(!o||o.next===o.prev)return s;let a,l,u,h,p,c,f;if(r&&(o=bI(d,t,o,n)),d.length>80*n){a=u=d[0],l=h=d[1];for(let m=n;m<i;m+=n)p=d[m],c=d[m+1],p<a&&(a=p),c<l&&(l=c),p>u&&(u=p),c>h&&(h=c);f=Math.max(u-a,h-l),f=f!==0?32767/f:0}return Sg(o,s,n,a,l,f,0),s}};function rT(d,t,n,r,i){let o,s;if(i===jI(d,t,n,r)>0)for(o=t;o<n;o+=r)s=RM(o,d[o],d[o+1],s);else for(o=n-r;o>=t;o-=r)s=RM(o,d[o],d[o+1],s);return s&&C_(s,s.next)&&(Ag(s),s=s.next),s}function Td(d,t){if(!d)return d;t||(t=d);let n=d,r;do if(r=!1,!n.steiner&&(C_(n,n.next)||ui(n.prev,n,n.next)===0)){if(Ag(n),n=t=n.prev,n===n.next)break;r=!0}else n=n.next;while(r||n!==t);return t}function Sg(d,t,n,r,i,o,s){if(!d)return;!s&&o&&EI(d,r,i,o);let a=d,l,u;for(;d.prev!==d.next;){if(l=d.prev,u=d.next,o?vI(d,r,i,o):yI(d)){t.push(l.i/n|0),t.push(d.i/n|0),t.push(u.i/n|0),Ag(d),d=u.next,a=u.next;continue}if(d=u,d===a){s?s===1?(d=_I(Td(d),t,n),Sg(d,t,n,r,i,o,2)):s===2&&xI(d,t,n,r,i,o):Sg(Td(d),t,n,r,i,o,1);break}}}function yI(d){const t=d.prev,n=d,r=d.next;if(ui(t,n,r)>=0)return!1;const i=t.x,o=n.x,s=r.x,a=t.y,l=n.y,u=r.y,h=i<o?i<s?i:s:o<s?o:s,p=a<l?a<u?a:u:l<u?l:u,c=i>o?i>s?i:s:o>s?o:s,f=a>l?a>u?a:u:l>u?l:u;let m=r.next;for(;m!==t;){if(m.x>=h&&m.x<=c&&m.y>=p&&m.y<=f&&Zh(i,a,o,l,s,u,m.x,m.y)&&ui(m.prev,m,m.next)>=0)return!1;m=m.next}return!0}function vI(d,t,n,r){const i=d.prev,o=d,s=d.next;if(ui(i,o,s)>=0)return!1;const a=i.x,l=o.x,u=s.x,h=i.y,p=o.y,c=s.y,f=a<l?a<u?a:u:l<u?l:u,m=h<p?h<c?h:c:p<c?p:c,y=a>l?a>u?a:u:l>u?l:u,v=h>p?h>c?h:c:p>c?p:c,g=$x(f,m,t,n,r),x=$x(y,v,t,n,r);let b=d.prevZ,w=d.nextZ;for(;b&&b.z>=g&&w&&w.z<=x;){if(b.x>=f&&b.x<=y&&b.y>=m&&b.y<=v&&b!==i&&b!==s&&Zh(a,h,l,p,u,c,b.x,b.y)&&ui(b.prev,b,b.next)>=0||(b=b.prevZ,w.x>=f&&w.x<=y&&w.y>=m&&w.y<=v&&w!==i&&w!==s&&Zh(a,h,l,p,u,c,w.x,w.y)&&ui(w.prev,w,w.next)>=0))return!1;w=w.nextZ}for(;b&&b.z>=g;){if(b.x>=f&&b.x<=y&&b.y>=m&&b.y<=v&&b!==i&&b!==s&&Zh(a,h,l,p,u,c,b.x,b.y)&&ui(b.prev,b,b.next)>=0)return!1;b=b.prevZ}for(;w&&w.z<=x;){if(w.x>=f&&w.x<=y&&w.y>=m&&w.y<=v&&w!==i&&w!==s&&Zh(a,h,l,p,u,c,w.x,w.y)&&ui(w.prev,w,w.next)>=0)return!1;w=w.nextZ}return!0}function _I(d,t,n){let r=d;do{const i=r.prev,o=r.next.next;!C_(i,o)&&nT(i,r,r.next,o)&&Mg(i,o)&&Mg(o,i)&&(t.push(i.i/n|0),t.push(r.i/n|0),t.push(o.i/n|0),Ag(r),Ag(r.next),r=d=o),r=r.next}while(r!==d);return Td(r)}function xI(d,t,n,r,i,o){let s=d;do{let a=s.next.next;for(;a!==s.prev;){if(s.i!==a.i&&RI(s,a)){let l=iT(s,a);s=Td(s,s.next),l=Td(l,l.next),Sg(s,t,n,r,i,o,0),Sg(l,t,n,r,i,o,0);return}a=a.next}s=s.next}while(s!==d)}function bI(d,t,n,r){const i=[];let o,s,a,l,u;for(o=0,s=t.length;o<s;o++)a=t[o]*r,l=o<s-1?t[o+1]*r:d.length,u=rT(d,a,l,r,!1),u===u.next&&(u.steiner=!0),i.push(CI(u));for(i.sort(wI),o=0;o<i.length;o++)n=SI(i[o],n);return n}function wI(d,t){return d.x-t.x}function SI(d,t){const n=MI(d,t);if(!n)return t;const r=iT(n,d);return Td(r,r.next),Td(n,n.next)}function MI(d,t){let n=t,r=-1/0,i;const o=d.x,s=d.y;do{if(s<=n.y&&s>=n.next.y&&n.next.y!==n.y){const c=n.x+(s-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(c<=o&&c>r&&(r=c,i=n.x<n.next.x?n:n.next,c===o))return i}n=n.next}while(n!==t);if(!i)return null;const a=i,l=i.x,u=i.y;let h=1/0,p;n=i;do o>=n.x&&n.x>=l&&o!==n.x&&Zh(s<u?o:r,s,l,u,s<u?r:o,s,n.x,n.y)&&(p=Math.abs(s-n.y)/(o-n.x),Mg(n,d)&&(p<h||p===h&&(n.x>i.x||n.x===i.x&&AI(i,n)))&&(i=n,h=p)),n=n.next;while(n!==a);return i}function AI(d,t){return ui(d.prev,d,t.prev)<0&&ui(t.next,d,d.next)<0}function EI(d,t,n,r){let i=d;do i.z===0&&(i.z=$x(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==d);i.prevZ.nextZ=null,i.prevZ=null,TI(i)}function TI(d){let t,n,r,i,o,s,a,l,u=1;do{for(n=d,d=null,o=null,s=0;n;){for(s++,r=n,a=0,t=0;t<u&&(a++,r=r.nextZ,!!r);t++);for(l=u;a>0||l>0&&r;)a!==0&&(l===0||!r||n.z<=r.z)?(i=n,n=n.nextZ,a--):(i=r,r=r.nextZ,l--),o?o.nextZ=i:d=i,i.prevZ=o,o=i;n=r}o.nextZ=null,u*=2}while(s>1);return d}function $x(d,t,n,r,i){return d=(d-n)*i|0,t=(t-r)*i|0,d=(d|d<<8)&16711935,d=(d|d<<4)&252645135,d=(d|d<<2)&858993459,d=(d|d<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,d|t<<1}function CI(d){let t=d,n=d;do(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next;while(t!==d);return n}function Zh(d,t,n,r,i,o,s,a){return(i-s)*(t-a)>=(d-s)*(o-a)&&(d-s)*(r-a)>=(n-s)*(t-a)&&(n-s)*(o-a)>=(i-s)*(r-a)}function RI(d,t){return d.next.i!==t.i&&d.prev.i!==t.i&&!PI(d,t)&&(Mg(d,t)&&Mg(t,d)&&II(d,t)&&(ui(d.prev,d,t.prev)||ui(d,t.prev,t))||C_(d,t)&&ui(d.prev,d,d.next)>0&&ui(t.prev,t,t.next)>0)}function ui(d,t,n){return(t.y-d.y)*(n.x-t.x)-(t.x-d.x)*(n.y-t.y)}function C_(d,t){return d.x===t.x&&d.y===t.y}function nT(d,t,n,r){const i=y0(ui(d,t,n)),o=y0(ui(d,t,r)),s=y0(ui(n,r,d)),a=y0(ui(n,r,t));return!!(i!==o&&s!==a||i===0&&g0(d,n,t)||o===0&&g0(d,r,t)||s===0&&g0(n,d,r)||a===0&&g0(n,t,r))}function g0(d,t,n){return t.x<=Math.max(d.x,n.x)&&t.x>=Math.min(d.x,n.x)&&t.y<=Math.max(d.y,n.y)&&t.y>=Math.min(d.y,n.y)}function y0(d){return d>0?1:d<0?-1:0}function PI(d,t){let n=d;do{if(n.i!==d.i&&n.next.i!==d.i&&n.i!==t.i&&n.next.i!==t.i&&nT(n,n.next,d,t))return!0;n=n.next}while(n!==d);return!1}function Mg(d,t){return ui(d.prev,d,d.next)<0?ui(d,t,d.next)>=0&&ui(d,d.prev,t)>=0:ui(d,t,d.prev)<0||ui(d,d.next,t)<0}function II(d,t){let n=d,r=!1;const i=(d.x+t.x)/2,o=(d.y+t.y)/2;do n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next;while(n!==d);return r}function iT(d,t){const n=new eb(d.i,d.x,d.y),r=new eb(t.i,t.x,t.y),i=d.next,o=t.prev;return d.next=t,t.prev=d,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function RM(d,t,n,r){const i=new eb(d,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function Ag(d){d.next.prev=d.prev,d.prev.next=d.next,d.prevZ&&(d.prevZ.nextZ=d.nextZ),d.nextZ&&(d.nextZ.prevZ=d.prevZ)}function eb(d,t,n){this.i=d,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function jI(d,t,n,r){let i=0;for(let o=t,s=n-r;o<n;o+=r)i+=(d[s]-d[o])*(d[o+1]+d[s+1]),s=o;return i}class Fl{static area(t){const n=t.length;let r=0;for(let i=n-1,o=0;o<n;i=o++)r+=t[i].x*t[o].y-t[o].x*t[i].y;return r*.5}static isClockWise(t){return Fl.area(t)<0}static triangulateShape(t,n){const r=[],i=[],o=[];PM(t),IM(r,t);let s=t.length;n.forEach(PM);for(let l=0;l<n.length;l++)i.push(s),s+=n[l].length,IM(r,n[l]);const a=gI.triangulate(r,i);for(let l=0;l<a.length;l+=3)o.push(a.slice(l,l+3));return o}}function PM(d){const t=d.length;t>2&&d[t-1].equals(d[0])&&d.pop()}function IM(d,t){for(let n=0;n<t.length;n++)d.push(t[n].x),d.push(t[n].y)}class R_ extends Wr{constructor(t=new pd([new Ct(.5,.5),new Ct(-.5,.5),new Ct(-.5,-.5),new Ct(.5,-.5)]),n={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:t,options:n},t=Array.isArray(t)?t:[t];const r=this,i=[],o=[];for(let a=0,l=t.length;a<l;a++){const u=t[a];s(u)}this.setAttribute("position",new _r(i,3)),this.setAttribute("uv",new _r(o,2)),this.computeVertexNormals();function s(a){const l=[],u=n.curveSegments!==void 0?n.curveSegments:12,h=n.steps!==void 0?n.steps:1,p=n.depth!==void 0?n.depth:1;let c=n.bevelEnabled!==void 0?n.bevelEnabled:!0,f=n.bevelThickness!==void 0?n.bevelThickness:.2,m=n.bevelSize!==void 0?n.bevelSize:f-.1,y=n.bevelOffset!==void 0?n.bevelOffset:0,v=n.bevelSegments!==void 0?n.bevelSegments:3;const g=n.extrudePath,x=n.UVGenerator!==void 0?n.UVGenerator:LI;let b,w=!1,T,R,C,P;g&&(b=g.getSpacedPoints(h),w=!0,c=!1,T=g.computeFrenetFrames(h,!1),R=new Oe,C=new Oe,P=new Oe),c||(v=0,f=0,m=0,y=0);const I=a.extractPoints(u);let D=I.shape;const j=I.holes;if(!Fl.isClockWise(D)){D=D.reverse();for(let xe=0,ve=j.length;xe<ve;xe++){const ne=j[xe];Fl.isClockWise(ne)&&(j[xe]=ne.reverse())}}const O=Fl.triangulateShape(D,j),W=D;for(let xe=0,ve=j.length;xe<ve;xe++){const ne=j[xe];D=D.concat(ne)}function X(xe,ve,ne){return ve||console.error("THREE.ExtrudeGeometry: vec does not exist"),xe.clone().addScaledVector(ve,ne)}const J=D.length,ee=O.length;function V(xe,ve,ne){let Te,Pe,Ae;const je=xe.x-ve.x,Ue=xe.y-ve.y,Ge=ne.x-xe.x,_e=ne.y-xe.y,fe=je*je+Ue*Ue,We=je*_e-Ue*Ge;if(Math.abs(We)>Number.EPSILON){const Ke=Math.sqrt(fe),$e=Math.sqrt(Ge*Ge+_e*_e),et=ve.x-Ue/Ke,ht=ve.y+je/Ke,Be=ne.x-_e/$e,rt=ne.y+Ge/$e,Ye=((Be-et)*_e-(rt-ht)*Ge)/(je*_e-Ue*Ge);Te=et+je*Ye-xe.x,Pe=ht+Ue*Ye-xe.y;const de=Te*Te+Pe*Pe;if(de<=2)return new Ct(Te,Pe);Ae=Math.sqrt(de/2)}else{let Ke=!1;je>Number.EPSILON?Ge>Number.EPSILON&&(Ke=!0):je<-Number.EPSILON?Ge<-Number.EPSILON&&(Ke=!0):Math.sign(Ue)===Math.sign(_e)&&(Ke=!0),Ke?(Te=-Ue,Pe=je,Ae=Math.sqrt(fe)):(Te=je,Pe=Ue,Ae=Math.sqrt(fe/2))}return new Ct(Te/Ae,Pe/Ae)}const q=[];for(let xe=0,ve=W.length,ne=ve-1,Te=xe+1;xe<ve;xe++,ne++,Te++)ne===ve&&(ne=0),Te===ve&&(Te=0),q[xe]=V(W[xe],W[ne],W[Te]);const Y=[];let Z,ce=q.concat();for(let xe=0,ve=j.length;xe<ve;xe++){const ne=j[xe];Z=[];for(let Te=0,Pe=ne.length,Ae=Pe-1,je=Te+1;Te<Pe;Te++,Ae++,je++)Ae===Pe&&(Ae=0),je===Pe&&(je=0),Z[Te]=V(ne[Te],ne[Ae],ne[je]);Y.push(Z),ce=ce.concat(Z)}for(let xe=0;xe<v;xe++){const ve=xe/v,ne=f*Math.cos(ve*Math.PI/2),Te=m*Math.sin(ve*Math.PI/2)+y;for(let Pe=0,Ae=W.length;Pe<Ae;Pe++){const je=X(W[Pe],q[Pe],Te);ae(je.x,je.y,-ne)}for(let Pe=0,Ae=j.length;Pe<Ae;Pe++){const je=j[Pe];Z=Y[Pe];for(let Ue=0,Ge=je.length;Ue<Ge;Ue++){const _e=X(je[Ue],Z[Ue],Te);ae(_e.x,_e.y,-ne)}}}const B=m+y;for(let xe=0;xe<J;xe++){const ve=c?X(D[xe],ce[xe],B):D[xe];w?(C.copy(T.normals[0]).multiplyScalar(ve.x),R.copy(T.binormals[0]).multiplyScalar(ve.y),P.copy(b[0]).add(C).add(R),ae(P.x,P.y,P.z)):ae(ve.x,ve.y,0)}for(let xe=1;xe<=h;xe++)for(let ve=0;ve<J;ve++){const ne=c?X(D[ve],ce[ve],B):D[ve];w?(C.copy(T.normals[xe]).multiplyScalar(ne.x),R.copy(T.binormals[xe]).multiplyScalar(ne.y),P.copy(b[xe]).add(C).add(R),ae(P.x,P.y,P.z)):ae(ne.x,ne.y,p/h*xe)}for(let xe=v-1;xe>=0;xe--){const ve=xe/v,ne=f*Math.cos(ve*Math.PI/2),Te=m*Math.sin(ve*Math.PI/2)+y;for(let Pe=0,Ae=W.length;Pe<Ae;Pe++){const je=X(W[Pe],q[Pe],Te);ae(je.x,je.y,p+ne)}for(let Pe=0,Ae=j.length;Pe<Ae;Pe++){const je=j[Pe];Z=Y[Pe];for(let Ue=0,Ge=je.length;Ue<Ge;Ue++){const _e=X(je[Ue],Z[Ue],Te);w?ae(_e.x,_e.y+b[h-1].y,b[h-1].x+ne):ae(_e.x,_e.y,p+ne)}}}U(),K();function U(){const xe=i.length/3;if(c){let ve=0,ne=J*ve;for(let Te=0;Te<ee;Te++){const Pe=O[Te];pe(Pe[2]+ne,Pe[1]+ne,Pe[0]+ne)}ve=h+v*2,ne=J*ve;for(let Te=0;Te<ee;Te++){const Pe=O[Te];pe(Pe[0]+ne,Pe[1]+ne,Pe[2]+ne)}}else{for(let ve=0;ve<ee;ve++){const ne=O[ve];pe(ne[2],ne[1],ne[0])}for(let ve=0;ve<ee;ve++){const ne=O[ve];pe(ne[0]+J*h,ne[1]+J*h,ne[2]+J*h)}}r.addGroup(xe,i.length/3-xe,0)}function K(){const xe=i.length/3;let ve=0;re(W,ve),ve+=W.length;for(let ne=0,Te=j.length;ne<Te;ne++){const Pe=j[ne];re(Pe,ve),ve+=Pe.length}r.addGroup(xe,i.length/3-xe,1)}function re(xe,ve){let ne=xe.length;for(;--ne>=0;){const Te=ne;let Pe=ne-1;Pe<0&&(Pe=xe.length-1);for(let Ae=0,je=h+v*2;Ae<je;Ae++){const Ue=J*Ae,Ge=J*(Ae+1),_e=ve+Te+Ue,fe=ve+Pe+Ue,We=ve+Pe+Ge,Ke=ve+Te+Ge;ye(_e,fe,We,Ke)}}}function ae(xe,ve,ne){l.push(xe),l.push(ve),l.push(ne)}function pe(xe,ve,ne){Re(xe),Re(ve),Re(ne);const Te=i.length/3,Pe=x.generateTopUV(r,i,Te-3,Te-2,Te-1);Me(Pe[0]),Me(Pe[1]),Me(Pe[2])}function ye(xe,ve,ne,Te){Re(xe),Re(ve),Re(Te),Re(ve),Re(ne),Re(Te);const Pe=i.length/3,Ae=x.generateSideWallUV(r,i,Pe-6,Pe-3,Pe-2,Pe-1);Me(Ae[0]),Me(Ae[1]),Me(Ae[3]),Me(Ae[1]),Me(Ae[2]),Me(Ae[3])}function Re(xe){i.push(l[xe*3+0]),i.push(l[xe*3+1]),i.push(l[xe*3+2])}function Me(xe){o.push(xe.x),o.push(xe.y)}}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}toJSON(){const t=super.toJSON(),n=this.parameters.shapes,r=this.parameters.options;return DI(n,r,t)}static fromJSON(t,n){const r=[];for(let o=0,s=t.shapes.length;o<s;o++){const a=n[t.shapes[o]];r.push(a)}const i=t.options.extrudePath;return i!==void 0&&(t.options.extrudePath=new Vv[i.type]().fromJSON(i)),new R_(r,t.options)}}const LI={generateTopUV:function(d,t,n,r,i){const o=t[n*3],s=t[n*3+1],a=t[r*3],l=t[r*3+1],u=t[i*3],h=t[i*3+1];return[new Ct(o,s),new Ct(a,l),new Ct(u,h)]},generateSideWallUV:function(d,t,n,r,i,o){const s=t[n*3],a=t[n*3+1],l=t[n*3+2],u=t[r*3],h=t[r*3+1],p=t[r*3+2],c=t[i*3],f=t[i*3+1],m=t[i*3+2],y=t[o*3],v=t[o*3+1],g=t[o*3+2];return Math.abs(a-h)<Math.abs(s-u)?[new Ct(s,1-l),new Ct(u,1-p),new Ct(c,1-m),new Ct(y,1-g)]:[new Ct(a,1-l),new Ct(h,1-p),new Ct(f,1-m),new Ct(v,1-g)]}};function DI(d,t,n){if(n.shapes=[],Array.isArray(d))for(let r=0,i=d.length;r<i;r++){const o=d[r];n.shapes.push(o.uuid)}else n.shapes.push(d.uuid);return n.options=Object.assign({},t),t.extrudePath!==void 0&&(n.options.extrudePath=t.extrudePath.toJSON()),n}class P_ extends qc{constructor(t=1,n=0){const r=(1+Math.sqrt(5))/2,i=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],o=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(i,o,t,n),this.type="IcosahedronGeometry",this.parameters={radius:t,detail:n}}static fromJSON(t){return new P_(t.radius,t.detail)}}class Xg extends qc{constructor(t=1,n=0){const r=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],i=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(r,i,t,n),this.type="OctahedronGeometry",this.parameters={radius:t,detail:n}}static fromJSON(t){return new Xg(t.radius,t.detail)}}class Ip extends Wr{constructor(t=1,n=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:t,height:n,widthSegments:r,heightSegments:i};const o=t/2,s=n/2,a=Math.floor(r),l=Math.floor(i),u=a+1,h=l+1,p=t/a,c=n/l,f=[],m=[],y=[],v=[];for(let g=0;g<h;g++){const x=g*c-s;for(let b=0;b<u;b++){const w=b*p-o;m.push(w,-x,0),y.push(0,0,1),v.push(b/a),v.push(1-g/l)}}for(let g=0;g<l;g++)for(let x=0;x<a;x++){const b=x+u*g,w=x+u*(g+1),T=x+1+u*(g+1),R=x+1+u*g;f.push(b,w,R),f.push(w,T,R)}this.setIndex(f),this.setAttribute("position",new _r(m,3)),this.setAttribute("normal",new _r(y,3)),this.setAttribute("uv",new _r(v,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Ip(t.width,t.height,t.widthSegments,t.heightSegments)}}class I_ extends Wr{constructor(t=.5,n=1,r=32,i=1,o=0,s=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:t,outerRadius:n,thetaSegments:r,phiSegments:i,thetaStart:o,thetaLength:s},r=Math.max(3,r),i=Math.max(1,i);const a=[],l=[],u=[],h=[];let p=t;const c=(n-t)/i,f=new Oe,m=new Ct;for(let y=0;y<=i;y++){for(let v=0;v<=r;v++){const g=o+v/r*s;f.x=p*Math.cos(g),f.y=p*Math.sin(g),l.push(f.x,f.y,f.z),u.push(0,0,1),m.x=(f.x/n+1)/2,m.y=(f.y/n+1)/2,h.push(m.x,m.y)}p+=c}for(let y=0;y<i;y++){const v=y*(r+1);for(let g=0;g<r;g++){const x=g+v,b=x,w=x+r+1,T=x+r+2,R=x+1;a.push(b,w,R),a.push(w,T,R)}}this.setIndex(a),this.setAttribute("position",new _r(l,3)),this.setAttribute("normal",new _r(u,3)),this.setAttribute("uv",new _r(h,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new I_(t.innerRadius,t.outerRadius,t.thetaSegments,t.phiSegments,t.thetaStart,t.thetaLength)}}class j_ extends Wr{constructor(t=new pd([new Ct(0,.5),new Ct(-.5,-.5),new Ct(.5,-.5)]),n=12){super(),this.type="ShapeGeometry",this.parameters={shapes:t,curveSegments:n};const r=[],i=[],o=[],s=[];let a=0,l=0;if(Array.isArray(t)===!1)u(t);else for(let h=0;h<t.length;h++)u(t[h]),this.addGroup(a,l,h),a+=l,l=0;this.setIndex(r),this.setAttribute("position",new _r(i,3)),this.setAttribute("normal",new _r(o,3)),this.setAttribute("uv",new _r(s,2));function u(h){const p=i.length/3,c=h.extractPoints(n);let f=c.shape;const m=c.holes;Fl.isClockWise(f)===!1&&(f=f.reverse());for(let v=0,g=m.length;v<g;v++){const x=m[v];Fl.isClockWise(x)===!0&&(m[v]=x.reverse())}const y=Fl.triangulateShape(f,m);for(let v=0,g=m.length;v<g;v++){const x=m[v];f=f.concat(x)}for(let v=0,g=f.length;v<g;v++){const x=f[v];i.push(x.x,x.y,0),o.push(0,0,1),s.push(x.x,x.y)}for(let v=0,g=y.length;v<g;v++){const x=y[v],b=x[0]+p,w=x[1]+p,T=x[2]+p;r.push(b,w,T),l+=3}}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}toJSON(){const t=super.toJSON(),n=this.parameters.shapes;return BI(n,t)}static fromJSON(t,n){const r=[];for(let i=0,o=t.shapes.length;i<o;i++){const s=n[t.shapes[i]];r.push(s)}return new j_(r,t.curveSegments)}}function BI(d,t){if(t.shapes=[],Array.isArray(d))for(let n=0,r=d.length;n<r;n++){const i=d[n];t.shapes.push(i.uuid)}else t.shapes.push(d.uuid);return t}class Yg extends Wr{constructor(t=1,n=32,r=16,i=0,o=Math.PI*2,s=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:n,heightSegments:r,phiStart:i,phiLength:o,thetaStart:s,thetaLength:a},n=Math.max(3,Math.floor(n)),r=Math.max(2,Math.floor(r));const l=Math.min(s+a,Math.PI);let u=0;const h=[],p=new Oe,c=new Oe,f=[],m=[],y=[],v=[];for(let g=0;g<=r;g++){const x=[],b=g/r;let w=0;g===0&&s===0?w=.5/n:g===r&&l===Math.PI&&(w=-.5/n);for(let T=0;T<=n;T++){const R=T/n;p.x=-t*Math.cos(i+R*o)*Math.sin(s+b*a),p.y=t*Math.cos(s+b*a),p.z=t*Math.sin(i+R*o)*Math.sin(s+b*a),m.push(p.x,p.y,p.z),c.copy(p).normalize(),y.push(c.x,c.y,c.z),v.push(R+w,1-b),x.push(u++)}h.push(x)}for(let g=0;g<r;g++)for(let x=0;x<n;x++){const b=h[g][x+1],w=h[g][x],T=h[g+1][x],R=h[g+1][x+1];(g!==0||s>0)&&f.push(b,w,R),(g!==r-1||l<Math.PI)&&f.push(w,T,R)}this.setIndex(f),this.setAttribute("position",new _r(m,3)),this.setAttribute("normal",new _r(y,3)),this.setAttribute("uv",new _r(v,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Yg(t.radius,t.widthSegments,t.heightSegments,t.phiStart,t.phiLength,t.thetaStart,t.thetaLength)}}class L_ extends qc{constructor(t=1,n=0){const r=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],i=[2,1,0,0,3,2,1,3,0,2,3,1];super(r,i,t,n),this.type="TetrahedronGeometry",this.parameters={radius:t,detail:n}}static fromJSON(t){return new L_(t.radius,t.detail)}}class D_ extends Wr{constructor(t=1,n=.4,r=12,i=48,o=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:t,tube:n,radialSegments:r,tubularSegments:i,arc:o},r=Math.floor(r),i=Math.floor(i);const s=[],a=[],l=[],u=[],h=new Oe,p=new Oe,c=new Oe;for(let f=0;f<=r;f++)for(let m=0;m<=i;m++){const y=m/i*o,v=f/r*Math.PI*2;p.x=(t+n*Math.cos(v))*Math.cos(y),p.y=(t+n*Math.cos(v))*Math.sin(y),p.z=n*Math.sin(v),a.push(p.x,p.y,p.z),h.x=t*Math.cos(y),h.y=t*Math.sin(y),c.subVectors(p,h).normalize(),l.push(c.x,c.y,c.z),u.push(m/i),u.push(f/r)}for(let f=1;f<=r;f++)for(let m=1;m<=i;m++){const y=(i+1)*f+m-1,v=(i+1)*(f-1)+m-1,g=(i+1)*(f-1)+m,x=(i+1)*f+m;s.push(y,v,x),s.push(v,g,x)}this.setIndex(s),this.setAttribute("position",new _r(a,3)),this.setAttribute("normal",new _r(l,3)),this.setAttribute("uv",new _r(u,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new D_(t.radius,t.tube,t.radialSegments,t.tubularSegments,t.arc)}}class B_ extends Wr{constructor(t=1,n=.4,r=64,i=8,o=2,s=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:t,tube:n,tubularSegments:r,radialSegments:i,p:o,q:s},r=Math.floor(r),i=Math.floor(i);const a=[],l=[],u=[],h=[],p=new Oe,c=new Oe,f=new Oe,m=new Oe,y=new Oe,v=new Oe,g=new Oe;for(let b=0;b<=r;++b){const w=b/r*o*Math.PI*2;x(w,o,s,t,f),x(w+.01,o,s,t,m),v.subVectors(m,f),g.addVectors(m,f),y.crossVectors(v,g),g.crossVectors(y,v),y.normalize(),g.normalize();for(let T=0;T<=i;++T){const R=T/i*Math.PI*2,C=-n*Math.cos(R),P=n*Math.sin(R);p.x=f.x+(C*g.x+P*y.x),p.y=f.y+(C*g.y+P*y.y),p.z=f.z+(C*g.z+P*y.z),l.push(p.x,p.y,p.z),c.subVectors(p,f).normalize(),u.push(c.x,c.y,c.z),h.push(b/r),h.push(T/i)}}for(let b=1;b<=r;b++)for(let w=1;w<=i;w++){const T=(i+1)*(b-1)+(w-1),R=(i+1)*b+(w-1),C=(i+1)*b+w,P=(i+1)*(b-1)+w;a.push(T,R,P),a.push(R,C,P)}this.setIndex(a),this.setAttribute("position",new _r(l,3)),this.setAttribute("normal",new _r(u,3)),this.setAttribute("uv",new _r(h,2));function x(b,w,T,R,C){const P=Math.cos(b),I=Math.sin(b),D=T/w*b,j=Math.cos(D);C.x=R*(2+j)*.5*P,C.y=R*(2+j)*I*.5,C.z=R*Math.sin(D)*.5}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new B_(t.radius,t.tube,t.tubularSegments,t.radialSegments,t.p,t.q)}}class k_ extends Wr{constructor(t=new fw(new Oe(-1,-1,0),new Oe(-1,1,0),new Oe(1,1,0)),n=64,r=1,i=8,o=!1){super(),this.type="TubeGeometry",this.parameters={path:t,tubularSegments:n,radius:r,radialSegments:i,closed:o};const s=t.computeFrenetFrames(n,o);this.tangents=s.tangents,this.normals=s.normals,this.binormals=s.binormals;const a=new Oe,l=new Oe,u=new Ct;let h=new Oe;const p=[],c=[],f=[],m=[];y(),this.setIndex(m),this.setAttribute("position",new _r(p,3)),this.setAttribute("normal",new _r(c,3)),this.setAttribute("uv",new _r(f,2));function y(){for(let b=0;b<n;b++)v(b);v(o===!1?n:0),x(),g()}function v(b){h=t.getPointAt(b/n,h);const w=s.normals[b],T=s.binormals[b];for(let R=0;R<=i;R++){const C=R/i*Math.PI*2,P=Math.sin(C),I=-Math.cos(C);l.x=I*w.x+P*T.x,l.y=I*w.y+P*T.y,l.z=I*w.z+P*T.z,l.normalize(),c.push(l.x,l.y,l.z),a.x=h.x+r*l.x,a.y=h.y+r*l.y,a.z=h.z+r*l.z,p.push(a.x,a.y,a.z)}}function g(){for(let b=1;b<=n;b++)for(let w=1;w<=i;w++){const T=(i+1)*(b-1)+(w-1),R=(i+1)*b+(w-1),C=(i+1)*b+w,P=(i+1)*(b-1)+w;m.push(T,R,P),m.push(R,C,P)}}function x(){for(let b=0;b<=n;b++)for(let w=0;w<=i;w++)u.x=b/n,u.y=w/i,f.push(u.x,u.y)}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}toJSON(){const t=super.toJSON();return t.path=this.parameters.path.toJSON(),t}static fromJSON(t){return new k_(new Vv[t.path.type]().fromJSON(t.path),t.tubularSegments,t.radius,t.radialSegments,t.closed)}}class sT extends Wr{constructor(t=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:t},t!==null){const n=[],r=new Set,i=new Oe,o=new Oe;if(t.index!==null){const s=t.attributes.position,a=t.index;let l=t.groups;l.length===0&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let u=0,h=l.length;u<h;++u){const p=l[u],c=p.start,f=p.count;for(let m=c,y=c+f;m<y;m+=3)for(let v=0;v<3;v++){const g=a.getX(m+v),x=a.getX(m+(v+1)%3);i.fromBufferAttribute(s,g),o.fromBufferAttribute(s,x),jM(i,o,r)===!0&&(n.push(i.x,i.y,i.z),n.push(o.x,o.y,o.z))}}}else{const s=t.attributes.position;for(let a=0,l=s.count/3;a<l;a++)for(let u=0;u<3;u++){const h=3*a+u,p=3*a+(u+1)%3;i.fromBufferAttribute(s,h),o.fromBufferAttribute(s,p),jM(i,o,r)===!0&&(n.push(i.x,i.y,i.z),n.push(o.x,o.y,o.z))}}this.setAttribute("position",new _r(n,3))}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}}function jM(d,t,n){const r=`${d.x},${d.y},${d.z}-${t.x},${t.y},${t.z}`,i=`${t.x},${t.y},${t.z}-${d.x},${d.y},${d.z}`;return n.has(r)===!0||n.has(i)===!0?!1:(n.add(r),n.add(i),!0)}var LM=Object.freeze({__proto__:null,BoxGeometry:kd,CapsuleGeometry:M_,CircleGeometry:A_,ConeGeometry:E_,CylinderGeometry:Pp,DodecahedronGeometry:T_,EdgesGeometry:tT,ExtrudeGeometry:R_,IcosahedronGeometry:P_,LatheGeometry:Wg,OctahedronGeometry:Xg,PlaneGeometry:Ip,PolyhedronGeometry:qc,RingGeometry:I_,ShapeGeometry:j_,SphereGeometry:Yg,TetrahedronGeometry:L_,TorusGeometry:D_,TorusKnotGeometry:B_,TubeGeometry:k_,WireframeGeometry:sT});class oT extends Qi{constructor(t){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new nr(0),this.transparent=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.fog=t.fog,this}}class aT extends pl{constructor(t){super(t),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class qg extends Qi{constructor(t){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new nr(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new nr(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Yc,this.normalScale=new Ct(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ua,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.envMapIntensity=t.envMapIntensity,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class ka extends qg{constructor(t){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Ct(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Ur(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(n){this.ior=(1+.4*n)/(1-.4*n)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new nr(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new nr(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new nr(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(t)}get anisotropy(){return this._anisotropy}set anisotropy(t){this._anisotropy>0!=t>0&&this.version++,this._anisotropy=t}get clearcoat(){return this._clearcoat}set clearcoat(t){this._clearcoat>0!=t>0&&this.version++,this._clearcoat=t}get iridescence(){return this._iridescence}set iridescence(t){this._iridescence>0!=t>0&&this.version++,this._iridescence=t}get dispersion(){return this._dispersion}set dispersion(t){this._dispersion>0!=t>0&&this.version++,this._dispersion=t}get sheen(){return this._sheen}set sheen(t){this._sheen>0!=t>0&&this.version++,this._sheen=t}get transmission(){return this._transmission}set transmission(t){this._transmission>0!=t>0&&this.version++,this._transmission=t}copy(t){return super.copy(t),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=t.anisotropy,this.anisotropyRotation=t.anisotropyRotation,this.anisotropyMap=t.anisotropyMap,this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.dispersion=t.dispersion,this.ior=t.ior,this.iridescence=t.iridescence,this.iridescenceMap=t.iridescenceMap,this.iridescenceIOR=t.iridescenceIOR,this.iridescenceThicknessRange=[...t.iridescenceThicknessRange],this.iridescenceThicknessMap=t.iridescenceThicknessMap,this.sheen=t.sheen,this.sheenColor.copy(t.sheenColor),this.sheenColorMap=t.sheenColorMap,this.sheenRoughness=t.sheenRoughness,this.sheenRoughnessMap=t.sheenRoughnessMap,this.transmission=t.transmission,this.transmissionMap=t.transmissionMap,this.thickness=t.thickness,this.thicknessMap=t.thicknessMap,this.attenuationDistance=t.attenuationDistance,this.attenuationColor.copy(t.attenuationColor),this.specularIntensity=t.specularIntensity,this.specularIntensityMap=t.specularIntensityMap,this.specularColor.copy(t.specularColor),this.specularColorMap=t.specularColorMap,this}}class lT extends Qi{constructor(t){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new nr(16777215),this.specular=new nr(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new nr(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Yc,this.normalScale=new Ct(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ua,this.combine=Og,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class uT extends Qi{constructor(t){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new nr(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new nr(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Yc,this.normalScale=new Ct(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.gradientMap=t.gradientMap,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}class cT extends Qi{constructor(t){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Yc,this.normalScale=new Ct(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(t)}copy(t){return super.copy(t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.flatShading=t.flatShading,this}}class fT extends Qi{constructor(t){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new nr(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new nr(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Yc,this.normalScale=new Ct(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ua,this.combine=Og,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class hw extends Qi{constructor(t){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=EE,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}}class pw extends Qi{constructor(t){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(t)}copy(t){return super.copy(t),this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}}class dT extends Qi{constructor(t){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new nr(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Yc,this.normalScale=new Ct(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={MATCAP:""},this.color.copy(t.color),this.matcap=t.matcap,this.map=t.map,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.flatShading=t.flatShading,this.fog=t.fog,this}}class hT extends Ys{constructor(t){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}copy(t){return super.copy(t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this}}function sd(d,t,n){return!d||!n&&d.constructor===t?d:typeof t.BYTES_PER_ELEMENT=="number"?new t(d):Array.prototype.slice.call(d)}function pT(d){return ArrayBuffer.isView(d)&&!(d instanceof DataView)}function mT(d){function t(i,o){return d[i]-d[o]}const n=d.length,r=new Array(n);for(let i=0;i!==n;++i)r[i]=i;return r.sort(t),r}function tb(d,t,n){const r=d.length,i=new d.constructor(r);for(let o=0,s=0;s!==r;++o){const a=n[o]*t;for(let l=0;l!==t;++l)i[s++]=d[a+l]}return i}function mw(d,t,n,r){let i=1,o=d[0];for(;o!==void 0&&o[r]===void 0;)o=d[i++];if(o===void 0)return;let s=o[r];if(s!==void 0)if(Array.isArray(s))do s=o[r],s!==void 0&&(t.push(o.time),n.push.apply(n,s)),o=d[i++];while(o!==void 0);else if(s.toArray!==void 0)do s=o[r],s!==void 0&&(t.push(o.time),s.toArray(n,n.length)),o=d[i++];while(o!==void 0);else do s=o[r],s!==void 0&&(t.push(o.time),n.push(s)),o=d[i++];while(o!==void 0)}function kI(d,t,n,r,i=30){const o=d.clone();o.name=t;const s=[];for(let l=0;l<o.tracks.length;++l){const u=o.tracks[l],h=u.getValueSize(),p=[],c=[];for(let f=0;f<u.times.length;++f){const m=u.times[f]*i;if(!(m<n||m>=r)){p.push(u.times[f]);for(let y=0;y<h;++y)c.push(u.values[f*h+y])}}p.length!==0&&(u.times=sd(p,u.times.constructor),u.values=sd(c,u.values.constructor),s.push(u))}o.tracks=s;let a=1/0;for(let l=0;l<o.tracks.length;++l)a>o.tracks[l].times[0]&&(a=o.tracks[l].times[0]);for(let l=0;l<o.tracks.length;++l)o.tracks[l].shift(-1*a);return o.resetDuration(),o}function OI(d,t=0,n=d,r=30){r<=0&&(r=30);const i=n.tracks.length,o=t/r;for(let s=0;s<i;++s){const a=n.tracks[s],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const u=d.tracks.find(function(g){return g.name===a.name&&g.ValueTypeName===l});if(u===void 0)continue;let h=0;const p=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(h=p/3);let c=0;const f=u.getValueSize();u.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(c=f/3);const m=a.times.length-1;let y;if(o<=a.times[0]){const g=h,x=p-h;y=a.values.slice(g,x)}else if(o>=a.times[m]){const g=m*p+h,x=g+p-h;y=a.values.slice(g,x)}else{const g=a.createInterpolant(),x=h,b=p-h;g.evaluate(o),y=g.resultBuffer.slice(x,b)}l==="quaternion"&&new ds().fromArray(y).normalize().conjugate().toArray(y);const v=u.times.length;for(let g=0;g<v;++g){const x=g*f+c;if(l==="quaternion")ds.multiplyQuaternionsFlat(u.values,x,y,0,u.values,x);else{const b=f-c*2;for(let w=0;w<b;++w)u.values[x+w]-=y[w]}}}return d.blendMode=qb,d}const FI={convertArray:sd,isTypedArray:pT,getKeyframeOrder:mT,sortedArray:tb,flattenJSON:mw,subclip:kI,makeClipAdditive:OI};class jp{constructor(t,n,r,i){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new n.constructor(r),this.sampleValues=n,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(t){const n=this.parameterPositions;let r=this._cachedIndex,i=n[r],o=n[r-1];e:{t:{let s;r:{n:if(!(t<i)){for(let a=r+2;;){if(i===void 0){if(t<o)break n;return r=n.length,this._cachedIndex=r,this.copySampleValue_(r-1)}if(r===a)break;if(o=i,i=n[++r],t<i)break t}s=n.length;break r}if(!(t>=o)){const a=n[1];t<a&&(r=2,o=a);for(let l=r-2;;){if(o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===l)break;if(i=o,o=n[--r-1],t>=o)break t}s=r,r=0;break r}break e}for(;r<s;){const a=r+s>>>1;t<n[a]?s=a:r=a+1}if(i=n[r],o=n[r-1],o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return r=n.length,this._cachedIndex=r,this.copySampleValue_(r-1)}this._cachedIndex=r,this.intervalChanged_(r,o,i)}return this.interpolate_(r,o,t,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){const n=this.resultBuffer,r=this.sampleValues,i=this.valueSize,o=t*i;for(let s=0;s!==i;++s)n[s]=r[o+s];return n}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class gT extends jp{constructor(t,n,r,i){super(t,n,r,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:rd,endingEnd:rd}}intervalChanged_(t,n,r){const i=this.parameterPositions;let o=t-2,s=t+1,a=i[o],l=i[s];if(a===void 0)switch(this.getSettings_().endingStart){case nd:o=t,a=2*n-r;break;case yg:o=i.length-2,a=n+i[o]-i[o+1];break;default:o=t,a=r}if(l===void 0)switch(this.getSettings_().endingEnd){case nd:s=t,l=2*r-n;break;case yg:s=1,l=r+i[1]-i[0];break;default:s=t-1,l=n}const u=(r-n)*.5,h=this.valueSize;this._weightPrev=u/(n-a),this._weightNext=u/(l-r),this._offsetPrev=o*h,this._offsetNext=s*h}interpolate_(t,n,r,i){const o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,l=t*a,u=l-a,h=this._offsetPrev,p=this._offsetNext,c=this._weightPrev,f=this._weightNext,m=(r-n)/(i-n),y=m*m,v=y*m,g=-c*v+2*c*y-c*m,x=(1+c)*v+(-1.5-2*c)*y+(-.5+c)*m+1,b=(-1-f)*v+(1.5+f)*y+.5*m,w=f*v-f*y;for(let T=0;T!==a;++T)o[T]=g*s[h+T]+x*s[u+T]+b*s[l+T]+w*s[p+T];return o}}class gw extends jp{constructor(t,n,r,i){super(t,n,r,i)}interpolate_(t,n,r,i){const o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,l=t*a,u=l-a,h=(r-n)/(i-n),p=1-h;for(let c=0;c!==a;++c)o[c]=s[u+c]*p+s[l+c]*h;return o}}class yT extends jp{constructor(t,n,r,i){super(t,n,r,i)}interpolate_(t){return this.copySampleValue_(t-1)}}class vl{constructor(t,n,r,i){if(t===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(n===void 0||n.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=sd(n,this.TimeBufferType),this.values=sd(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(t){const n=t.constructor;let r;if(n.toJSON!==this.toJSON)r=n.toJSON(t);else{r={name:t.name,times:sd(t.times,Array),values:sd(t.values,Array)};const i=t.getInterpolation();i!==t.DefaultInterpolation&&(r.interpolation=i)}return r.type=t.ValueTypeName,r}InterpolantFactoryMethodDiscrete(t){return new yT(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new gw(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new gT(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let n;switch(t){case mp:n=this.InterpolantFactoryMethodDiscrete;break;case gp:n=this.InterpolantFactoryMethodLinear;break;case q0:n=this.InterpolantFactoryMethodSmooth;break}if(n===void 0){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(t!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=n,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return mp;case this.InterpolantFactoryMethodLinear:return gp;case this.InterpolantFactoryMethodSmooth:return q0}}getValueSize(){return this.values.length/this.times.length}shift(t){if(t!==0){const n=this.times;for(let r=0,i=n.length;r!==i;++r)n[r]+=t}return this}scale(t){if(t!==1){const n=this.times;for(let r=0,i=n.length;r!==i;++r)n[r]*=t}return this}trim(t,n){const r=this.times,i=r.length;let o=0,s=i-1;for(;o!==i&&r[o]<t;)++o;for(;s!==-1&&r[s]>n;)--s;if(++s,o!==0||s!==i){o>=s&&(s=Math.max(s,1),o=s-1);const a=this.getValueSize();this.times=r.slice(o,s),this.values=this.values.slice(o*a,s*a)}return this}validate(){let t=!0;const n=this.getValueSize();n-Math.floor(n)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);const r=this.times,i=this.values,o=r.length;o===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);let s=null;for(let a=0;a!==o;a++){const l=r[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),t=!1;break}if(s!==null&&s>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,s),t=!1;break}s=l}if(i!==void 0&&pT(i))for(let a=0,l=i.length;a!==l;++a){const u=i[a];if(isNaN(u)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,u),t=!1;break}}return t}optimize(){const t=this.times.slice(),n=this.values.slice(),r=this.getValueSize(),i=this.getInterpolation()===q0,o=t.length-1;let s=1;for(let a=1;a<o;++a){let l=!1;const u=t[a],h=t[a+1];if(u!==h&&(a!==1||u!==t[0]))if(i)l=!0;else{const p=a*r,c=p-r,f=p+r;for(let m=0;m!==r;++m){const y=n[p+m];if(y!==n[c+m]||y!==n[f+m]){l=!0;break}}}if(l){if(a!==s){t[s]=t[a];const p=a*r,c=s*r;for(let f=0;f!==r;++f)n[c+f]=n[p+f]}++s}}if(o>0){t[s]=t[o];for(let a=o*r,l=s*r,u=0;u!==r;++u)n[l+u]=n[a+u];++s}return s!==t.length?(this.times=t.slice(0,s),this.values=n.slice(0,s*r)):(this.times=t,this.values=n),this}clone(){const t=this.times.slice(),n=this.values.slice(),r=this.constructor,i=new r(this.name,t,n);return i.createInterpolant=this.createInterpolant,i}}vl.prototype.TimeBufferType=Float32Array;vl.prototype.ValueBufferType=Float32Array;vl.prototype.DefaultInterpolation=gp;class Od extends vl{constructor(t,n,r){super(t,n,r)}}Od.prototype.ValueTypeName="bool";Od.prototype.ValueBufferType=Array;Od.prototype.DefaultInterpolation=mp;Od.prototype.InterpolantFactoryMethodLinear=void 0;Od.prototype.InterpolantFactoryMethodSmooth=void 0;class yw extends vl{}yw.prototype.ValueTypeName="color";class Cd extends vl{}Cd.prototype.ValueTypeName="number";class vT extends jp{constructor(t,n,r,i){super(t,n,r,i)}interpolate_(t,n,r,i){const o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,l=(r-n)/(i-n);let u=t*a;for(let h=u+a;u!==h;u+=4)ds.slerpFlat(o,0,s,u-a,s,u,l);return o}}class Rd extends vl{InterpolantFactoryMethodLinear(t){return new vT(this.times,this.values,this.getValueSize(),t)}}Rd.prototype.ValueTypeName="quaternion";Rd.prototype.InterpolantFactoryMethodSmooth=void 0;class Fd extends vl{constructor(t,n,r){super(t,n,r)}}Fd.prototype.ValueTypeName="string";Fd.prototype.ValueBufferType=Array;Fd.prototype.DefaultInterpolation=mp;Fd.prototype.InterpolantFactoryMethodLinear=void 0;Fd.prototype.InterpolantFactoryMethodSmooth=void 0;class Pd extends vl{}Pd.prototype.ValueTypeName="vector";class _p{constructor(t="",n=-1,r=[],i=m_){this.name=t,this.tracks=r,this.duration=n,this.blendMode=i,this.uuid=aa(),this.duration<0&&this.resetDuration()}static parse(t){const n=[],r=t.tracks,i=1/(t.fps||1);for(let s=0,a=r.length;s!==a;++s)n.push(UI(r[s]).scale(i));const o=new this(t.name,t.duration,n,t.blendMode);return o.uuid=t.uuid,o}static toJSON(t){const n=[],r=t.tracks,i={name:t.name,duration:t.duration,tracks:n,uuid:t.uuid,blendMode:t.blendMode};for(let o=0,s=r.length;o!==s;++o)n.push(vl.toJSON(r[o]));return i}static CreateFromMorphTargetSequence(t,n,r,i){const o=n.length,s=[];for(let a=0;a<o;a++){let l=[],u=[];l.push((a+o-1)%o,a,(a+1)%o),u.push(0,1,0);const h=mT(l);l=tb(l,1,h),u=tb(u,1,h),!i&&l[0]===0&&(l.push(o),u.push(u[0])),s.push(new Cd(".morphTargetInfluences["+n[a].name+"]",l,u).scale(1/r))}return new this(t,-1,s)}static findByName(t,n){let r=t;if(!Array.isArray(t)){const i=t;r=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<r.length;i++)if(r[i].name===n)return r[i];return null}static CreateClipsFromMorphTargetSequences(t,n,r){const i={},o=/^([\w-]*?)([\d]+)$/;for(let a=0,l=t.length;a<l;a++){const u=t[a],h=u.name.match(o);if(h&&h.length>1){const p=h[1];let c=i[p];c||(i[p]=c=[]),c.push(u)}}const s=[];for(const a in i)s.push(this.CreateFromMorphTargetSequence(a,i[a],n,r));return s}static parseAnimation(t,n){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const r=function(p,c,f,m,y){if(f.length!==0){const v=[],g=[];mw(f,v,g,m),v.length!==0&&y.push(new p(c,v,g))}},i=[],o=t.name||"default",s=t.fps||30,a=t.blendMode;let l=t.length||-1;const u=t.hierarchy||[];for(let p=0;p<u.length;p++){const c=u[p].keys;if(!(!c||c.length===0))if(c[0].morphTargets){const f={};let m;for(m=0;m<c.length;m++)if(c[m].morphTargets)for(let y=0;y<c[m].morphTargets.length;y++)f[c[m].morphTargets[y]]=-1;for(const y in f){const v=[],g=[];for(let x=0;x!==c[m].morphTargets.length;++x){const b=c[m];v.push(b.time),g.push(b.morphTarget===y?1:0)}i.push(new Cd(".morphTargetInfluence["+y+"]",v,g))}l=f.length*s}else{const f=".bones["+n[p].name+"]";r(Pd,f+".position",c,"pos",i),r(Rd,f+".quaternion",c,"rot",i),r(Pd,f+".scale",c,"scl",i)}}return i.length===0?null:new this(o,l,i,a)}resetDuration(){const t=this.tracks;let n=0;for(let r=0,i=t.length;r!==i;++r){const o=this.tracks[r];n=Math.max(n,o.times[o.times.length-1])}return this.duration=n,this}trim(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this}validate(){let t=!0;for(let n=0;n<this.tracks.length;n++)t=t&&this.tracks[n].validate();return t}optimize(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}clone(){const t=[];for(let n=0;n<this.tracks.length;n++)t.push(this.tracks[n].clone());return new this.constructor(this.name,this.duration,t,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function NI(d){switch(d.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Cd;case"vector":case"vector2":case"vector3":case"vector4":return Pd;case"color":return yw;case"quaternion":return Rd;case"bool":case"boolean":return Od;case"string":return Fd}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+d)}function UI(d){if(d.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=NI(d.type);if(d.times===void 0){const n=[],r=[];mw(d.keys,n,r,"value"),d.times=n,d.values=r}return t.parse!==void 0?t.parse(d):new t(d.name,d.times,d.values,d.interpolation)}const Bu={enabled:!1,files:{},add:function(d,t){this.enabled!==!1&&(this.files[d]=t)},get:function(d){if(this.enabled!==!1)return this.files[d]},remove:function(d){delete this.files[d]},clear:function(){this.files={}}};class vw{constructor(t,n,r){const i=this;let o=!1,s=0,a=0,l;const u=[];this.onStart=void 0,this.onLoad=t,this.onProgress=n,this.onError=r,this.itemStart=function(h){a++,o===!1&&i.onStart!==void 0&&i.onStart(h,s,a),o=!0},this.itemEnd=function(h){s++,i.onProgress!==void 0&&i.onProgress(h,s,a),s===a&&(o=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(h){i.onError!==void 0&&i.onError(h)},this.resolveURL=function(h){return l?l(h):h},this.setURLModifier=function(h){return l=h,this},this.addHandler=function(h,p){return u.push(h,p),this},this.removeHandler=function(h){const p=u.indexOf(h);return p!==-1&&u.splice(p,2),this},this.getHandler=function(h){for(let p=0,c=u.length;p<c;p+=2){const f=u[p],m=u[p+1];if(f.global&&(f.lastIndex=0),f.test(h))return m}return null}}}const $h=new vw;class qs{constructor(t){this.manager=t!==void 0?t:$h,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,n){const r=this;return new Promise(function(i,o){r.load(t,i,n,o)})}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}}qs.DEFAULT_MATERIAL_NAME="__DEFAULT";const Eu={};class GI extends Error{constructor(t,n){super(t),this.response=n}}class ca extends qs{constructor(t){super(t)}load(t,n,r,i){t===void 0&&(t=""),this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const o=Bu.get(t);if(o!==void 0)return this.manager.itemStart(t),setTimeout(()=>{n&&n(o),this.manager.itemEnd(t)},0),o;if(Eu[t]!==void 0){Eu[t].push({onLoad:n,onProgress:r,onError:i});return}Eu[t]=[],Eu[t].push({onLoad:n,onProgress:r,onError:i});const s=new Request(t,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(s).then(u=>{if(u.status===200||u.status===0){if(u.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||u.body===void 0||u.body.getReader===void 0)return u;const h=Eu[t],p=u.body.getReader(),c=u.headers.get("X-File-Size")||u.headers.get("Content-Length"),f=c?parseInt(c):0,m=f!==0;let y=0;const v=new ReadableStream({start(g){x();function x(){p.read().then(({done:b,value:w})=>{if(b)g.close();else{y+=w.byteLength;const T=new ProgressEvent("progress",{lengthComputable:m,loaded:y,total:f});for(let R=0,C=h.length;R<C;R++){const P=h[R];P.onProgress&&P.onProgress(T)}g.enqueue(w),x()}},b=>{g.error(b)})}}});return new Response(v)}else throw new GI(`fetch for "${u.url}" responded with ${u.status}: ${u.statusText}`,u)}).then(u=>{switch(l){case"arraybuffer":return u.arrayBuffer();case"blob":return u.blob();case"document":return u.text().then(h=>new DOMParser().parseFromString(h,a));case"json":return u.json();default:if(a===void 0)return u.text();{const p=/charset="?([^;"\s]*)"?/i.exec(a),c=p&&p[1]?p[1].toLowerCase():void 0,f=new TextDecoder(c);return u.arrayBuffer().then(m=>f.decode(m))}}}).then(u=>{Bu.add(t,u);const h=Eu[t];delete Eu[t];for(let p=0,c=h.length;p<c;p++){const f=h[p];f.onLoad&&f.onLoad(u)}}).catch(u=>{const h=Eu[t];if(h===void 0)throw this.manager.itemError(t),u;delete Eu[t];for(let p=0,c=h.length;p<c;p++){const f=h[p];f.onError&&f.onError(u)}this.manager.itemError(t)}).finally(()=>{this.manager.itemEnd(t)}),this.manager.itemStart(t)}setResponseType(t){return this.responseType=t,this}setMimeType(t){return this.mimeType=t,this}}class HI extends qs{constructor(t){super(t)}load(t,n,r,i){const o=this,s=new ca(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(t,function(a){try{n(o.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),o.manager.itemError(t)}},r,i)}parse(t){const n=[];for(let r=0;r<t.length;r++){const i=_p.parse(t[r]);n.push(i)}return n}}class zI extends qs{constructor(t){super(t)}load(t,n,r,i){const o=this,s=[],a=new w_,l=new ca(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(o.withCredentials);let u=0;function h(p){l.load(t[p],function(c){const f=o.parse(c,!0);s[p]={width:f.width,height:f.height,format:f.format,mipmaps:f.mipmaps},u+=1,u===6&&(f.mipmapCount===1&&(a.minFilter=Ei),a.image=s,a.format=f.format,a.needsUpdate=!0,n&&n(a))},r,i)}if(Array.isArray(t))for(let p=0,c=t.length;p<c;++p)h(p);else l.load(t,function(p){const c=o.parse(p,!0);if(c.isCubemap){const f=c.mipmaps.length/c.mipmapCount;for(let m=0;m<f;m++){s[m]={mipmaps:[]};for(let y=0;y<c.mipmapCount;y++)s[m].mipmaps.push(c.mipmaps[m*c.mipmapCount+y]),s[m].format=c.format,s[m].width=c.width,s[m].height=c.height}a.image=s}else a.image.width=c.width,a.image.height=c.height,a.mipmaps=c.mipmaps;c.mipmapCount===1&&(a.minFilter=Ei),a.format=c.format,a.needsUpdate=!0,n&&n(a)},r,i);return a}}class Eg extends qs{constructor(t){super(t)}load(t,n,r,i){this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const o=this,s=Bu.get(t);if(s!==void 0)return o.manager.itemStart(t),setTimeout(function(){n&&n(s),o.manager.itemEnd(t)},0),s;const a=bg("img");function l(){h(),Bu.add(t,this),n&&n(this),o.manager.itemEnd(t)}function u(p){h(),i&&i(p),o.manager.itemError(t),o.manager.itemEnd(t)}function h(){a.removeEventListener("load",l,!1),a.removeEventListener("error",u,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",u,!1),t.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),o.manager.itemStart(t),a.src=t,a}}class VI extends qs{constructor(t){super(t)}load(t,n,r,i){const o=new Gg;o.colorSpace=Es;const s=new Eg(this.manager);s.setCrossOrigin(this.crossOrigin),s.setPath(this.path);let a=0;function l(u){s.load(t[u],function(h){o.images[u]=h,a++,a===6&&(o.needsUpdate=!0,n&&n(o))},void 0,i)}for(let u=0;u<t.length;++u)l(u);return o}}class WI extends qs{constructor(t){super(t)}load(t,n,r,i){const o=this,s=new Ol,a=new ca(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(o.withCredentials),a.load(t,function(l){let u;try{u=o.parse(l)}catch(h){if(i!==void 0)i(h);else{console.error(h);return}}u.image!==void 0?s.image=u.image:u.data!==void 0&&(s.image.width=u.width,s.image.height=u.height,s.image.data=u.data),s.wrapS=u.wrapS!==void 0?u.wrapS:ia,s.wrapT=u.wrapT!==void 0?u.wrapT:ia,s.magFilter=u.magFilter!==void 0?u.magFilter:Ei,s.minFilter=u.minFilter!==void 0?u.minFilter:Ei,s.anisotropy=u.anisotropy!==void 0?u.anisotropy:1,u.colorSpace!==void 0&&(s.colorSpace=u.colorSpace),u.flipY!==void 0&&(s.flipY=u.flipY),u.format!==void 0&&(s.format=u.format),u.type!==void 0&&(s.type=u.type),u.mipmaps!==void 0&&(s.mipmaps=u.mipmaps,s.minFilter=La),u.mipmapCount===1&&(s.minFilter=Ei),u.generateMipmaps!==void 0&&(s.generateMipmaps=u.generateMipmaps),s.needsUpdate=!0,n&&n(s,u)},r,i),s}}class _T extends qs{constructor(t){super(t)}load(t,n,r,i){const o=new ei,s=new Eg(this.manager);return s.setCrossOrigin(this.crossOrigin),s.setPath(this.path),s.load(t,function(a){o.image=a,o.needsUpdate=!0,n!==void 0&&n(o)},r,i),o}}class Jc extends pn{constructor(t,n=1){super(),this.isLight=!0,this.type="Light",this.color=new nr(t),this.intensity=n}dispose(){}copy(t,n){return super.copy(t,n),this.color.copy(t.color),this.intensity=t.intensity,this}toJSON(t){const n=super.toJSON(t);return n.object.color=this.color.getHex(),n.object.intensity=this.intensity,this.groundColor!==void 0&&(n.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(n.object.distance=this.distance),this.angle!==void 0&&(n.object.angle=this.angle),this.decay!==void 0&&(n.object.decay=this.decay),this.penumbra!==void 0&&(n.object.penumbra=this.penumbra),this.shadow!==void 0&&(n.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(n.object.target=this.target.uuid),n}}class xT extends Jc{constructor(t,n,r){super(t,r),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(pn.DEFAULT_UP),this.updateMatrix(),this.groundColor=new nr(n)}copy(t,n){return super.copy(t,n),this.groundColor.copy(t.groundColor),this}}const Z1=new Cr,DM=new Oe,BM=new Oe;class _w{constructor(t){this.camera=t,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Ct(512,512),this.map=null,this.mapPass=null,this.matrix=new Cr,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Vg,this._frameExtents=new Ct(1,1),this._viewportCount=1,this._viewports=[new bn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(t){const n=this.camera,r=this.matrix;DM.setFromMatrixPosition(t.matrixWorld),n.position.copy(DM),BM.setFromMatrixPosition(t.target.matrixWorld),n.lookAt(BM),n.updateMatrixWorld(),Z1.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Z1),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(Z1)}getViewport(t){return this._viewports[t]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(t){return this.camera=t.camera.clone(),this.intensity=t.intensity,this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const t={};return this.intensity!==1&&(t.intensity=this.intensity),this.bias!==0&&(t.bias=this.bias),this.normalBias!==0&&(t.normalBias=this.normalBias),this.radius!==1&&(t.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}class XI extends _w{constructor(){super(new yi(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(t){const n=this.camera,r=yp*2*t.angle*this.focus,i=this.mapSize.width/this.mapSize.height,o=t.distance||n.far;(r!==n.fov||i!==n.aspect||o!==n.far)&&(n.fov=r,n.aspect=i,n.far=o,n.updateProjectionMatrix()),super.updateMatrices(t)}copy(t){return super.copy(t),this.focus=t.focus,this}}class xw extends Jc{constructor(t,n,r=0,i=Math.PI/3,o=0,s=2){super(t,n),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(pn.DEFAULT_UP),this.updateMatrix(),this.target=new pn,this.distance=r,this.angle=i,this.penumbra=o,this.decay=s,this.map=null,this.shadow=new XI}get power(){return this.intensity*Math.PI}set power(t){this.intensity=t/Math.PI}dispose(){this.shadow.dispose()}copy(t,n){return super.copy(t,n),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}const kM=new Cr,Pm=new Oe,$1=new Oe;class YI extends _w{constructor(){super(new yi(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Ct(4,2),this._viewportCount=6,this._viewports=[new bn(2,1,1,1),new bn(0,1,1,1),new bn(3,1,1,1),new bn(1,1,1,1),new bn(3,0,1,1),new bn(1,0,1,1)],this._cubeDirections=[new Oe(1,0,0),new Oe(-1,0,0),new Oe(0,0,1),new Oe(0,0,-1),new Oe(0,1,0),new Oe(0,-1,0)],this._cubeUps=[new Oe(0,1,0),new Oe(0,1,0),new Oe(0,1,0),new Oe(0,1,0),new Oe(0,0,1),new Oe(0,0,-1)]}updateMatrices(t,n=0){const r=this.camera,i=this.matrix,o=t.distance||r.far;o!==r.far&&(r.far=o,r.updateProjectionMatrix()),Pm.setFromMatrixPosition(t.matrixWorld),r.position.copy(Pm),$1.copy(r.position),$1.add(this._cubeDirections[n]),r.up.copy(this._cubeUps[n]),r.lookAt($1),r.updateMatrixWorld(),i.makeTranslation(-Pm.x,-Pm.y,-Pm.z),kM.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(kM)}}class bw extends Jc{constructor(t,n,r=0,i=2){super(t,n),this.isPointLight=!0,this.type="PointLight",this.distance=r,this.decay=i,this.shadow=new YI}get power(){return this.intensity*4*Math.PI}set power(t){this.intensity=t/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(t,n){return super.copy(t,n),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}class Nu extends Ug{constructor(t=-1,n=1,r=1,i=-1,o=.1,s=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=n,this.top=r,this.bottom=i,this.near=o,this.far=s,this.updateProjectionMatrix()}copy(t,n){return super.copy(t,n),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=t.view===null?null:Object.assign({},t.view),this}setViewOffset(t,n,r,i,o,s){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=i,this.view.width=o,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=(this.right-this.left)/(2*this.zoom),n=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let o=r-t,s=r+t,a=i+n,l=i-n;if(this.view!==null&&this.view.enabled){const u=(this.right-this.left)/this.view.fullWidth/this.zoom,h=(this.top-this.bottom)/this.view.fullHeight/this.zoom;o+=u*this.view.offsetX,s=o+u*this.view.width,a-=h*this.view.offsetY,l=a-h*this.view.height}this.projectionMatrix.makeOrthographic(o,s,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const n=super.toJSON(t);return n.object.zoom=this.zoom,n.object.left=this.left,n.object.right=this.right,n.object.top=this.top,n.object.bottom=this.bottom,n.object.near=this.near,n.object.far=this.far,this.view!==null&&(n.object.view=Object.assign({},this.view)),n}}class qI extends _w{constructor(){super(new Nu(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class ww extends Jc{constructor(t,n){super(t,n),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(pn.DEFAULT_UP),this.updateMatrix(),this.target=new pn,this.shadow=new qI}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}class bT extends Jc{constructor(t,n){super(t,n),this.isAmbientLight=!0,this.type="AmbientLight"}}class wT extends Jc{constructor(t,n,r=10,i=10){super(t,n),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=r,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(t){this.intensity=t/(this.width*this.height*Math.PI)}copy(t){return super.copy(t),this.width=t.width,this.height=t.height,this}toJSON(t){const n=super.toJSON(t);return n.object.width=this.width,n.object.height=this.height,n}}class ST{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let t=0;t<9;t++)this.coefficients.push(new Oe)}set(t){for(let n=0;n<9;n++)this.coefficients[n].copy(t[n]);return this}zero(){for(let t=0;t<9;t++)this.coefficients[t].set(0,0,0);return this}getAt(t,n){const r=t.x,i=t.y,o=t.z,s=this.coefficients;return n.copy(s[0]).multiplyScalar(.282095),n.addScaledVector(s[1],.488603*i),n.addScaledVector(s[2],.488603*o),n.addScaledVector(s[3],.488603*r),n.addScaledVector(s[4],1.092548*(r*i)),n.addScaledVector(s[5],1.092548*(i*o)),n.addScaledVector(s[6],.315392*(3*o*o-1)),n.addScaledVector(s[7],1.092548*(r*o)),n.addScaledVector(s[8],.546274*(r*r-i*i)),n}getIrradianceAt(t,n){const r=t.x,i=t.y,o=t.z,s=this.coefficients;return n.copy(s[0]).multiplyScalar(.886227),n.addScaledVector(s[1],2*.511664*i),n.addScaledVector(s[2],2*.511664*o),n.addScaledVector(s[3],2*.511664*r),n.addScaledVector(s[4],2*.429043*r*i),n.addScaledVector(s[5],2*.429043*i*o),n.addScaledVector(s[6],.743125*o*o-.247708),n.addScaledVector(s[7],2*.429043*r*o),n.addScaledVector(s[8],.429043*(r*r-i*i)),n}add(t){for(let n=0;n<9;n++)this.coefficients[n].add(t.coefficients[n]);return this}addScaledSH(t,n){for(let r=0;r<9;r++)this.coefficients[r].addScaledVector(t.coefficients[r],n);return this}scale(t){for(let n=0;n<9;n++)this.coefficients[n].multiplyScalar(t);return this}lerp(t,n){for(let r=0;r<9;r++)this.coefficients[r].lerp(t.coefficients[r],n);return this}equals(t){for(let n=0;n<9;n++)if(!this.coefficients[n].equals(t.coefficients[n]))return!1;return!0}copy(t){return this.set(t.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(t,n=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].fromArray(t,n+i*3);return this}toArray(t=[],n=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].toArray(t,n+i*3);return t}static getBasisAt(t,n){const r=t.x,i=t.y,o=t.z;n[0]=.282095,n[1]=.488603*i,n[2]=.488603*o,n[3]=.488603*r,n[4]=1.092548*r*i,n[5]=1.092548*i*o,n[6]=.315392*(3*o*o-1),n[7]=1.092548*r*o,n[8]=.546274*(r*r-i*i)}}class MT extends Jc{constructor(t=new ST,n=1){super(void 0,n),this.isLightProbe=!0,this.sh=t}copy(t){return super.copy(t),this.sh.copy(t.sh),this}fromJSON(t){return this.intensity=t.intensity,this.sh.fromArray(t.sh),this}toJSON(t){const n=super.toJSON(t);return n.object.sh=this.sh.toArray(),n}}class O_ extends qs{constructor(t){super(t),this.textures={}}load(t,n,r,i){const o=this,s=new ca(o.manager);s.setPath(o.path),s.setRequestHeader(o.requestHeader),s.setWithCredentials(o.withCredentials),s.load(t,function(a){try{n(o.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),o.manager.itemError(t)}},r,i)}parse(t){const n=this.textures;function r(o){return n[o]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",o),n[o]}const i=this.createMaterialFromType(t.type);if(t.uuid!==void 0&&(i.uuid=t.uuid),t.name!==void 0&&(i.name=t.name),t.color!==void 0&&i.color!==void 0&&i.color.setHex(t.color),t.roughness!==void 0&&(i.roughness=t.roughness),t.metalness!==void 0&&(i.metalness=t.metalness),t.sheen!==void 0&&(i.sheen=t.sheen),t.sheenColor!==void 0&&(i.sheenColor=new nr().setHex(t.sheenColor)),t.sheenRoughness!==void 0&&(i.sheenRoughness=t.sheenRoughness),t.emissive!==void 0&&i.emissive!==void 0&&i.emissive.setHex(t.emissive),t.specular!==void 0&&i.specular!==void 0&&i.specular.setHex(t.specular),t.specularIntensity!==void 0&&(i.specularIntensity=t.specularIntensity),t.specularColor!==void 0&&i.specularColor!==void 0&&i.specularColor.setHex(t.specularColor),t.shininess!==void 0&&(i.shininess=t.shininess),t.clearcoat!==void 0&&(i.clearcoat=t.clearcoat),t.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=t.clearcoatRoughness),t.dispersion!==void 0&&(i.dispersion=t.dispersion),t.iridescence!==void 0&&(i.iridescence=t.iridescence),t.iridescenceIOR!==void 0&&(i.iridescenceIOR=t.iridescenceIOR),t.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=t.iridescenceThicknessRange),t.transmission!==void 0&&(i.transmission=t.transmission),t.thickness!==void 0&&(i.thickness=t.thickness),t.attenuationDistance!==void 0&&(i.attenuationDistance=t.attenuationDistance),t.attenuationColor!==void 0&&i.attenuationColor!==void 0&&i.attenuationColor.setHex(t.attenuationColor),t.anisotropy!==void 0&&(i.anisotropy=t.anisotropy),t.anisotropyRotation!==void 0&&(i.anisotropyRotation=t.anisotropyRotation),t.fog!==void 0&&(i.fog=t.fog),t.flatShading!==void 0&&(i.flatShading=t.flatShading),t.blending!==void 0&&(i.blending=t.blending),t.combine!==void 0&&(i.combine=t.combine),t.side!==void 0&&(i.side=t.side),t.shadowSide!==void 0&&(i.shadowSide=t.shadowSide),t.opacity!==void 0&&(i.opacity=t.opacity),t.transparent!==void 0&&(i.transparent=t.transparent),t.alphaTest!==void 0&&(i.alphaTest=t.alphaTest),t.alphaHash!==void 0&&(i.alphaHash=t.alphaHash),t.depthFunc!==void 0&&(i.depthFunc=t.depthFunc),t.depthTest!==void 0&&(i.depthTest=t.depthTest),t.depthWrite!==void 0&&(i.depthWrite=t.depthWrite),t.colorWrite!==void 0&&(i.colorWrite=t.colorWrite),t.blendSrc!==void 0&&(i.blendSrc=t.blendSrc),t.blendDst!==void 0&&(i.blendDst=t.blendDst),t.blendEquation!==void 0&&(i.blendEquation=t.blendEquation),t.blendSrcAlpha!==void 0&&(i.blendSrcAlpha=t.blendSrcAlpha),t.blendDstAlpha!==void 0&&(i.blendDstAlpha=t.blendDstAlpha),t.blendEquationAlpha!==void 0&&(i.blendEquationAlpha=t.blendEquationAlpha),t.blendColor!==void 0&&i.blendColor!==void 0&&i.blendColor.setHex(t.blendColor),t.blendAlpha!==void 0&&(i.blendAlpha=t.blendAlpha),t.stencilWriteMask!==void 0&&(i.stencilWriteMask=t.stencilWriteMask),t.stencilFunc!==void 0&&(i.stencilFunc=t.stencilFunc),t.stencilRef!==void 0&&(i.stencilRef=t.stencilRef),t.stencilFuncMask!==void 0&&(i.stencilFuncMask=t.stencilFuncMask),t.stencilFail!==void 0&&(i.stencilFail=t.stencilFail),t.stencilZFail!==void 0&&(i.stencilZFail=t.stencilZFail),t.stencilZPass!==void 0&&(i.stencilZPass=t.stencilZPass),t.stencilWrite!==void 0&&(i.stencilWrite=t.stencilWrite),t.wireframe!==void 0&&(i.wireframe=t.wireframe),t.wireframeLinewidth!==void 0&&(i.wireframeLinewidth=t.wireframeLinewidth),t.wireframeLinecap!==void 0&&(i.wireframeLinecap=t.wireframeLinecap),t.wireframeLinejoin!==void 0&&(i.wireframeLinejoin=t.wireframeLinejoin),t.rotation!==void 0&&(i.rotation=t.rotation),t.linewidth!==void 0&&(i.linewidth=t.linewidth),t.dashSize!==void 0&&(i.dashSize=t.dashSize),t.gapSize!==void 0&&(i.gapSize=t.gapSize),t.scale!==void 0&&(i.scale=t.scale),t.polygonOffset!==void 0&&(i.polygonOffset=t.polygonOffset),t.polygonOffsetFactor!==void 0&&(i.polygonOffsetFactor=t.polygonOffsetFactor),t.polygonOffsetUnits!==void 0&&(i.polygonOffsetUnits=t.polygonOffsetUnits),t.dithering!==void 0&&(i.dithering=t.dithering),t.alphaToCoverage!==void 0&&(i.alphaToCoverage=t.alphaToCoverage),t.premultipliedAlpha!==void 0&&(i.premultipliedAlpha=t.premultipliedAlpha),t.forceSinglePass!==void 0&&(i.forceSinglePass=t.forceSinglePass),t.visible!==void 0&&(i.visible=t.visible),t.toneMapped!==void 0&&(i.toneMapped=t.toneMapped),t.userData!==void 0&&(i.userData=t.userData),t.vertexColors!==void 0&&(typeof t.vertexColors=="number"?i.vertexColors=t.vertexColors>0:i.vertexColors=t.vertexColors),t.uniforms!==void 0)for(const o in t.uniforms){const s=t.uniforms[o];switch(i.uniforms[o]={},s.type){case"t":i.uniforms[o].value=r(s.value);break;case"c":i.uniforms[o].value=new nr().setHex(s.value);break;case"v2":i.uniforms[o].value=new Ct().fromArray(s.value);break;case"v3":i.uniforms[o].value=new Oe().fromArray(s.value);break;case"v4":i.uniforms[o].value=new bn().fromArray(s.value);break;case"m3":i.uniforms[o].value=new Vr().fromArray(s.value);break;case"m4":i.uniforms[o].value=new Cr().fromArray(s.value);break;default:i.uniforms[o].value=s.value}}if(t.defines!==void 0&&(i.defines=t.defines),t.vertexShader!==void 0&&(i.vertexShader=t.vertexShader),t.fragmentShader!==void 0&&(i.fragmentShader=t.fragmentShader),t.glslVersion!==void 0&&(i.glslVersion=t.glslVersion),t.extensions!==void 0)for(const o in t.extensions)i.extensions[o]=t.extensions[o];if(t.lights!==void 0&&(i.lights=t.lights),t.clipping!==void 0&&(i.clipping=t.clipping),t.size!==void 0&&(i.size=t.size),t.sizeAttenuation!==void 0&&(i.sizeAttenuation=t.sizeAttenuation),t.map!==void 0&&(i.map=r(t.map)),t.matcap!==void 0&&(i.matcap=r(t.matcap)),t.alphaMap!==void 0&&(i.alphaMap=r(t.alphaMap)),t.bumpMap!==void 0&&(i.bumpMap=r(t.bumpMap)),t.bumpScale!==void 0&&(i.bumpScale=t.bumpScale),t.normalMap!==void 0&&(i.normalMap=r(t.normalMap)),t.normalMapType!==void 0&&(i.normalMapType=t.normalMapType),t.normalScale!==void 0){let o=t.normalScale;Array.isArray(o)===!1&&(o=[o,o]),i.normalScale=new Ct().fromArray(o)}return t.displacementMap!==void 0&&(i.displacementMap=r(t.displacementMap)),t.displacementScale!==void 0&&(i.displacementScale=t.displacementScale),t.displacementBias!==void 0&&(i.displacementBias=t.displacementBias),t.roughnessMap!==void 0&&(i.roughnessMap=r(t.roughnessMap)),t.metalnessMap!==void 0&&(i.metalnessMap=r(t.metalnessMap)),t.emissiveMap!==void 0&&(i.emissiveMap=r(t.emissiveMap)),t.emissiveIntensity!==void 0&&(i.emissiveIntensity=t.emissiveIntensity),t.specularMap!==void 0&&(i.specularMap=r(t.specularMap)),t.specularIntensityMap!==void 0&&(i.specularIntensityMap=r(t.specularIntensityMap)),t.specularColorMap!==void 0&&(i.specularColorMap=r(t.specularColorMap)),t.envMap!==void 0&&(i.envMap=r(t.envMap)),t.envMapRotation!==void 0&&i.envMapRotation.fromArray(t.envMapRotation),t.envMapIntensity!==void 0&&(i.envMapIntensity=t.envMapIntensity),t.reflectivity!==void 0&&(i.reflectivity=t.reflectivity),t.refractionRatio!==void 0&&(i.refractionRatio=t.refractionRatio),t.lightMap!==void 0&&(i.lightMap=r(t.lightMap)),t.lightMapIntensity!==void 0&&(i.lightMapIntensity=t.lightMapIntensity),t.aoMap!==void 0&&(i.aoMap=r(t.aoMap)),t.aoMapIntensity!==void 0&&(i.aoMapIntensity=t.aoMapIntensity),t.gradientMap!==void 0&&(i.gradientMap=r(t.gradientMap)),t.clearcoatMap!==void 0&&(i.clearcoatMap=r(t.clearcoatMap)),t.clearcoatRoughnessMap!==void 0&&(i.clearcoatRoughnessMap=r(t.clearcoatRoughnessMap)),t.clearcoatNormalMap!==void 0&&(i.clearcoatNormalMap=r(t.clearcoatNormalMap)),t.clearcoatNormalScale!==void 0&&(i.clearcoatNormalScale=new Ct().fromArray(t.clearcoatNormalScale)),t.iridescenceMap!==void 0&&(i.iridescenceMap=r(t.iridescenceMap)),t.iridescenceThicknessMap!==void 0&&(i.iridescenceThicknessMap=r(t.iridescenceThicknessMap)),t.transmissionMap!==void 0&&(i.transmissionMap=r(t.transmissionMap)),t.thicknessMap!==void 0&&(i.thicknessMap=r(t.thicknessMap)),t.anisotropyMap!==void 0&&(i.anisotropyMap=r(t.anisotropyMap)),t.sheenColorMap!==void 0&&(i.sheenColorMap=r(t.sheenColorMap)),t.sheenRoughnessMap!==void 0&&(i.sheenRoughnessMap=r(t.sheenRoughnessMap)),i}setTextures(t){return this.textures=t,this}createMaterialFromType(t){return O_.createMaterialFromType(t)}static createMaterialFromType(t){const n={ShadowMaterial:oT,SpriteMaterial:tw,RawShaderMaterial:aT,ShaderMaterial:pl,PointsMaterial:b_,MeshPhysicalMaterial:ka,MeshStandardMaterial:qg,MeshPhongMaterial:lT,MeshToonMaterial:uT,MeshNormalMaterial:cT,MeshLambertMaterial:fT,MeshDepthMaterial:hw,MeshDistanceMaterial:pw,MeshBasicMaterial:sa,MeshMatcapMaterial:dT,LineDashedMaterial:hT,LineBasicMaterial:Ys,Material:Qi};return new n[t]}}class Oc{static decodeText(t){if(console.warn("THREE.LoaderUtils: decodeText() has been deprecated with r165 and will be removed with r175. Use TextDecoder instead."),typeof TextDecoder<"u")return new TextDecoder().decode(t);let n="";for(let r=0,i=t.length;r<i;r++)n+=String.fromCharCode(t[r]);try{return decodeURIComponent(escape(n))}catch{return n}}static extractUrlBase(t){const n=t.lastIndexOf("/");return n===-1?"./":t.slice(0,n+1)}static resolveURL(t,n){return typeof t!="string"||t===""?"":(/^https?:\/\//i.test(n)&&/^\//.test(t)&&(n=n.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(t)||/^data:.*,.*$/i.test(t)||/^blob:.*$/i.test(t)?t:n+t)}}class AT extends Wr{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(t){return super.copy(t),this.instanceCount=t.instanceCount,this}toJSON(){const t=super.toJSON();return t.instanceCount=this.instanceCount,t.isInstancedBufferGeometry=!0,t}}class ET extends qs{constructor(t){super(t)}load(t,n,r,i){const o=this,s=new ca(o.manager);s.setPath(o.path),s.setRequestHeader(o.requestHeader),s.setWithCredentials(o.withCredentials),s.load(t,function(a){try{n(o.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),o.manager.itemError(t)}},r,i)}parse(t){const n={},r={};function i(f,m){if(n[m]!==void 0)return n[m];const v=f.interleavedBuffers[m],g=o(f,v.buffer),x=Qh(v.type,g),b=new Hg(x,v.stride);return b.uuid=v.uuid,n[m]=b,b}function o(f,m){if(r[m]!==void 0)return r[m];const v=f.arrayBuffers[m],g=new Uint32Array(v).buffer;return r[m]=g,g}const s=t.isInstancedBufferGeometry?new AT:new Wr,a=t.data.index;if(a!==void 0){const f=Qh(a.type,a.array);s.setIndex(new wn(f,1))}const l=t.data.attributes;for(const f in l){const m=l[f];let y;if(m.isInterleavedBufferAttribute){const v=i(t.data,m.data);y=new zc(v,m.itemSize,m.offset,m.normalized)}else{const v=Qh(m.type,m.array),g=m.isInstancedBufferAttribute?Ed:wn;y=new g(v,m.itemSize,m.normalized)}m.name!==void 0&&(y.name=m.name),m.usage!==void 0&&y.setUsage(m.usage),s.setAttribute(f,y)}const u=t.data.morphAttributes;if(u)for(const f in u){const m=u[f],y=[];for(let v=0,g=m.length;v<g;v++){const x=m[v];let b;if(x.isInterleavedBufferAttribute){const w=i(t.data,x.data);b=new zc(w,x.itemSize,x.offset,x.normalized)}else{const w=Qh(x.type,x.array);b=new wn(w,x.itemSize,x.normalized)}x.name!==void 0&&(b.name=x.name),y.push(b)}s.morphAttributes[f]=y}t.data.morphTargetsRelative&&(s.morphTargetsRelative=!0);const p=t.data.groups||t.data.drawcalls||t.data.offsets;if(p!==void 0)for(let f=0,m=p.length;f!==m;++f){const y=p[f];s.addGroup(y.start,y.count,y.materialIndex)}const c=t.data.boundingSphere;if(c!==void 0){const f=new Oe;c.center!==void 0&&f.fromArray(c.center),s.boundingSphere=new Cs(f,c.radius)}return t.name&&(s.name=t.name),t.userData&&(s.userData=t.userData),s}}class JI extends qs{constructor(t){super(t)}load(t,n,r,i){const o=this,s=this.path===""?Oc.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||s;const a=new ca(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(t,function(l){let u=null;try{u=JSON.parse(l)}catch(p){i!==void 0&&i(p),console.error("THREE:ObjectLoader: Can't parse "+t+".",p.message);return}const h=u.metadata;if(h===void 0||h.type===void 0||h.type.toLowerCase()==="geometry"){i!==void 0&&i(new Error("THREE.ObjectLoader: Can't load "+t)),console.error("THREE.ObjectLoader: Can't load "+t);return}o.parse(u,n)},r,i)}async loadAsync(t,n){const r=this,i=this.path===""?Oc.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||i;const o=new ca(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials);const s=await o.loadAsync(t,n),a=JSON.parse(s),l=a.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+t);return await r.parseAsync(a)}parse(t,n){const r=this.parseAnimations(t.animations),i=this.parseShapes(t.shapes),o=this.parseGeometries(t.geometries,i),s=this.parseImages(t.images,function(){n!==void 0&&n(u)}),a=this.parseTextures(t.textures,s),l=this.parseMaterials(t.materials,a),u=this.parseObject(t.object,o,l,a,r),h=this.parseSkeletons(t.skeletons,u);if(this.bindSkeletons(u,h),this.bindLightTargets(u),n!==void 0){let p=!1;for(const c in s)if(s[c].data instanceof HTMLImageElement){p=!0;break}p===!1&&n(u)}return u}async parseAsync(t){const n=this.parseAnimations(t.animations),r=this.parseShapes(t.shapes),i=this.parseGeometries(t.geometries,r),o=await this.parseImagesAsync(t.images),s=this.parseTextures(t.textures,o),a=this.parseMaterials(t.materials,s),l=this.parseObject(t.object,i,a,s,n),u=this.parseSkeletons(t.skeletons,l);return this.bindSkeletons(l,u),this.bindLightTargets(l),l}parseShapes(t){const n={};if(t!==void 0)for(let r=0,i=t.length;r<i;r++){const o=new pd().fromJSON(t[r]);n[o.uuid]=o}return n}parseSkeletons(t,n){const r={},i={};if(n.traverse(function(o){o.isBone&&(i[o.uuid]=o)}),t!==void 0)for(let o=0,s=t.length;o<s;o++){const a=new zg().fromJSON(t[o],i);r[a.uuid]=a}return r}parseGeometries(t,n){const r={};if(t!==void 0){const i=new ET;for(let o=0,s=t.length;o<s;o++){let a;const l=t[o];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":a=i.parse(l);break;default:l.type in LM?a=LM[l.type].fromJSON(l,n):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),l.userData!==void 0&&(a.userData=l.userData),r[l.uuid]=a}}return r}parseMaterials(t,n){const r={},i={};if(t!==void 0){const o=new O_;o.setTextures(n);for(let s=0,a=t.length;s<a;s++){const l=t[s];r[l.uuid]===void 0&&(r[l.uuid]=o.parse(l)),i[l.uuid]=r[l.uuid]}}return i}parseAnimations(t){const n={};if(t!==void 0)for(let r=0;r<t.length;r++){const i=t[r],o=_p.parse(i);n[o.uuid]=o}return n}parseImages(t,n){const r=this,i={};let o;function s(l){return r.manager.itemStart(l),o.load(l,function(){r.manager.itemEnd(l)},void 0,function(){r.manager.itemError(l),r.manager.itemEnd(l)})}function a(l){if(typeof l=="string"){const u=l,h=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u)?u:r.resourcePath+u;return s(h)}else return l.data?{data:Qh(l.type,l.data),width:l.width,height:l.height}:null}if(t!==void 0&&t.length>0){const l=new vw(n);o=new Eg(l),o.setCrossOrigin(this.crossOrigin);for(let u=0,h=t.length;u<h;u++){const p=t[u],c=p.url;if(Array.isArray(c)){const f=[];for(let m=0,y=c.length;m<y;m++){const v=c[m],g=a(v);g!==null&&(g instanceof HTMLImageElement?f.push(g):f.push(new Ol(g.data,g.width,g.height)))}i[p.uuid]=new id(f)}else{const f=a(p.url);i[p.uuid]=new id(f)}}}return i}async parseImagesAsync(t){const n=this,r={};let i;async function o(s){if(typeof s=="string"){const a=s,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:n.resourcePath+a;return await i.loadAsync(l)}else return s.data?{data:Qh(s.type,s.data),width:s.width,height:s.height}:null}if(t!==void 0&&t.length>0){i=new Eg(this.manager),i.setCrossOrigin(this.crossOrigin);for(let s=0,a=t.length;s<a;s++){const l=t[s],u=l.url;if(Array.isArray(u)){const h=[];for(let p=0,c=u.length;p<c;p++){const f=u[p],m=await o(f);m!==null&&(m instanceof HTMLImageElement?h.push(m):h.push(new Ol(m.data,m.width,m.height)))}r[l.uuid]=new id(h)}else{const h=await o(l.url);r[l.uuid]=new id(h)}}}return r}parseTextures(t,n){function r(o,s){return typeof o=="number"?o:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",o),s[o])}const i={};if(t!==void 0)for(let o=0,s=t.length;o<s;o++){const a=t[o];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),n[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const l=n[a.image],u=l.data;let h;Array.isArray(u)?(h=new Gg,u.length===6&&(h.needsUpdate=!0)):(u&&u.data?h=new Ol:h=new ei,u&&(h.needsUpdate=!0)),h.source=l,h.uuid=a.uuid,a.name!==void 0&&(h.name=a.name),a.mapping!==void 0&&(h.mapping=r(a.mapping,KI)),a.channel!==void 0&&(h.channel=a.channel),a.offset!==void 0&&h.offset.fromArray(a.offset),a.repeat!==void 0&&h.repeat.fromArray(a.repeat),a.center!==void 0&&h.center.fromArray(a.center),a.rotation!==void 0&&(h.rotation=a.rotation),a.wrap!==void 0&&(h.wrapS=r(a.wrap[0],OM),h.wrapT=r(a.wrap[1],OM)),a.format!==void 0&&(h.format=a.format),a.internalFormat!==void 0&&(h.internalFormat=a.internalFormat),a.type!==void 0&&(h.type=a.type),a.colorSpace!==void 0&&(h.colorSpace=a.colorSpace),a.minFilter!==void 0&&(h.minFilter=r(a.minFilter,FM)),a.magFilter!==void 0&&(h.magFilter=r(a.magFilter,FM)),a.anisotropy!==void 0&&(h.anisotropy=a.anisotropy),a.flipY!==void 0&&(h.flipY=a.flipY),a.generateMipmaps!==void 0&&(h.generateMipmaps=a.generateMipmaps),a.premultiplyAlpha!==void 0&&(h.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(h.unpackAlignment=a.unpackAlignment),a.compareFunction!==void 0&&(h.compareFunction=a.compareFunction),a.userData!==void 0&&(h.userData=a.userData),i[a.uuid]=h}return i}parseObject(t,n,r,i,o){let s;function a(c){return n[c]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",c),n[c]}function l(c){if(c!==void 0){if(Array.isArray(c)){const f=[];for(let m=0,y=c.length;m<y;m++){const v=c[m];r[v]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",v),f.push(r[v])}return f}return r[c]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",c),r[c]}}function u(c){return i[c]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",c),i[c]}let h,p;switch(t.type){case"Scene":s=new ew,t.background!==void 0&&(Number.isInteger(t.background)?s.background=new nr(t.background):s.background=u(t.background)),t.environment!==void 0&&(s.environment=u(t.environment)),t.fog!==void 0&&(t.fog.type==="Fog"?s.fog=new __(t.fog.color,t.fog.near,t.fog.far):t.fog.type==="FogExp2"&&(s.fog=new v_(t.fog.color,t.fog.density)),t.fog.name!==""&&(s.fog.name=t.fog.name)),t.backgroundBlurriness!==void 0&&(s.backgroundBlurriness=t.backgroundBlurriness),t.backgroundIntensity!==void 0&&(s.backgroundIntensity=t.backgroundIntensity),t.backgroundRotation!==void 0&&s.backgroundRotation.fromArray(t.backgroundRotation),t.environmentIntensity!==void 0&&(s.environmentIntensity=t.environmentIntensity),t.environmentRotation!==void 0&&s.environmentRotation.fromArray(t.environmentRotation);break;case"PerspectiveCamera":s=new yi(t.fov,t.aspect,t.near,t.far),t.focus!==void 0&&(s.focus=t.focus),t.zoom!==void 0&&(s.zoom=t.zoom),t.filmGauge!==void 0&&(s.filmGauge=t.filmGauge),t.filmOffset!==void 0&&(s.filmOffset=t.filmOffset),t.view!==void 0&&(s.view=Object.assign({},t.view));break;case"OrthographicCamera":s=new Nu(t.left,t.right,t.top,t.bottom,t.near,t.far),t.zoom!==void 0&&(s.zoom=t.zoom),t.view!==void 0&&(s.view=Object.assign({},t.view));break;case"AmbientLight":s=new bT(t.color,t.intensity);break;case"DirectionalLight":s=new ww(t.color,t.intensity),s.target=t.target||"";break;case"PointLight":s=new bw(t.color,t.intensity,t.distance,t.decay);break;case"RectAreaLight":s=new wT(t.color,t.intensity,t.width,t.height);break;case"SpotLight":s=new xw(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay),s.target=t.target||"";break;case"HemisphereLight":s=new xT(t.color,t.groundColor,t.intensity);break;case"LightProbe":s=new MT().fromJSON(t);break;case"SkinnedMesh":h=a(t.geometry),p=l(t.material),s=new rw(h,p),t.bindMode!==void 0&&(s.bindMode=t.bindMode),t.bindMatrix!==void 0&&s.bindMatrix.fromArray(t.bindMatrix),t.skeleton!==void 0&&(s.skeleton=t.skeleton);break;case"Mesh":h=a(t.geometry),p=l(t.material),s=new Ti(h,p);break;case"InstancedMesh":h=a(t.geometry),p=l(t.material);const c=t.count,f=t.instanceMatrix,m=t.instanceColor;s=new nw(h,p,c),s.instanceMatrix=new Ed(new Float32Array(f.array),16),m!==void 0&&(s.instanceColor=new Ed(new Float32Array(m.array),m.itemSize));break;case"BatchedMesh":h=a(t.geometry),p=l(t.material),s=new qE(t.maxInstanceCount,t.maxVertexCount,t.maxIndexCount,p),s.geometry=h,s.perObjectFrustumCulled=t.perObjectFrustumCulled,s.sortObjects=t.sortObjects,s._drawRanges=t.drawRanges,s._reservedRanges=t.reservedRanges,s._visibility=t.visibility,s._active=t.active,s._bounds=t.bounds.map(y=>{const v=new Ws;v.min.fromArray(y.boxMin),v.max.fromArray(y.boxMax);const g=new Cs;return g.radius=y.sphereRadius,g.center.fromArray(y.sphereCenter),{boxInitialized:y.boxInitialized,box:v,sphereInitialized:y.sphereInitialized,sphere:g}}),s._maxInstanceCount=t.maxInstanceCount,s._maxVertexCount=t.maxVertexCount,s._maxIndexCount=t.maxIndexCount,s._geometryInitialized=t.geometryInitialized,s._geometryCount=t.geometryCount,s._matricesTexture=u(t.matricesTexture.uuid),t.colorsTexture!==void 0&&(s._colorsTexture=u(t.colorsTexture.uuid));break;case"LOD":s=new YE;break;case"Line":s=new Vu(a(t.geometry),l(t.material));break;case"LineLoop":s=new iw(a(t.geometry),l(t.material));break;case"LineSegments":s=new gl(a(t.geometry),l(t.material));break;case"PointCloud":case"Points":s=new sw(a(t.geometry),l(t.material));break;case"Sprite":s=new XE(l(t.material));break;case"Group":s=new Du;break;case"Bone":s=new x_;break;default:s=new pn}if(s.uuid=t.uuid,t.name!==void 0&&(s.name=t.name),t.matrix!==void 0?(s.matrix.fromArray(t.matrix),t.matrixAutoUpdate!==void 0&&(s.matrixAutoUpdate=t.matrixAutoUpdate),s.matrixAutoUpdate&&s.matrix.decompose(s.position,s.quaternion,s.scale)):(t.position!==void 0&&s.position.fromArray(t.position),t.rotation!==void 0&&s.rotation.fromArray(t.rotation),t.quaternion!==void 0&&s.quaternion.fromArray(t.quaternion),t.scale!==void 0&&s.scale.fromArray(t.scale)),t.up!==void 0&&s.up.fromArray(t.up),t.castShadow!==void 0&&(s.castShadow=t.castShadow),t.receiveShadow!==void 0&&(s.receiveShadow=t.receiveShadow),t.shadow&&(t.shadow.intensity!==void 0&&(s.shadow.intensity=t.shadow.intensity),t.shadow.bias!==void 0&&(s.shadow.bias=t.shadow.bias),t.shadow.normalBias!==void 0&&(s.shadow.normalBias=t.shadow.normalBias),t.shadow.radius!==void 0&&(s.shadow.radius=t.shadow.radius),t.shadow.mapSize!==void 0&&s.shadow.mapSize.fromArray(t.shadow.mapSize),t.shadow.camera!==void 0&&(s.shadow.camera=this.parseObject(t.shadow.camera))),t.visible!==void 0&&(s.visible=t.visible),t.frustumCulled!==void 0&&(s.frustumCulled=t.frustumCulled),t.renderOrder!==void 0&&(s.renderOrder=t.renderOrder),t.userData!==void 0&&(s.userData=t.userData),t.layers!==void 0&&(s.layers.mask=t.layers),t.children!==void 0){const c=t.children;for(let f=0;f<c.length;f++)s.add(this.parseObject(c[f],n,r,i,o))}if(t.animations!==void 0){const c=t.animations;for(let f=0;f<c.length;f++){const m=c[f];s.animations.push(o[m])}}if(t.type==="LOD"){t.autoUpdate!==void 0&&(s.autoUpdate=t.autoUpdate);const c=t.levels;for(let f=0;f<c.length;f++){const m=c[f],y=s.getObjectByProperty("uuid",m.object);y!==void 0&&s.addLevel(y,m.distance,m.hysteresis)}}return s}bindSkeletons(t,n){Object.keys(n).length!==0&&t.traverse(function(r){if(r.isSkinnedMesh===!0&&r.skeleton!==void 0){const i=n[r.skeleton];i===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",r.skeleton):r.bind(i,r.bindMatrix)}})}bindLightTargets(t){t.traverse(function(n){if(n.isDirectionalLight||n.isSpotLight){const r=n.target,i=t.getObjectByProperty("uuid",r);i!==void 0?n.target=i:n.target=new pn}})}}const KI={UVMapping:a_,CubeReflectionMapping:Hu,CubeRefractionMapping:Gc,EquirectangularReflectionMapping:mg,EquirectangularRefractionMapping:gg,CubeUVReflectionMapping:Cp},OM={RepeatWrapping:Hc,ClampToEdgeWrapping:ia,MirroredRepeatWrapping:hp},FM={NearestFilter:fs,NearestMipmapNearestFilter:l_,NearestMipmapLinearFilter:td,LinearFilter:Ei,LinearMipmapNearestFilter:ip,LinearMipmapLinearFilter:La};class TT extends qs{constructor(t){super(t),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(t){return this.options=t,this}load(t,n,r,i){t===void 0&&(t=""),this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const o=this,s=Bu.get(t);if(s!==void 0){if(o.manager.itemStart(t),s.then){s.then(u=>{n&&n(u),o.manager.itemEnd(t)}).catch(u=>{i&&i(u)});return}return setTimeout(function(){n&&n(s),o.manager.itemEnd(t)},0),s}const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader;const l=fetch(t,a).then(function(u){return u.blob()}).then(function(u){return createImageBitmap(u,Object.assign(o.options,{colorSpaceConversion:"none"}))}).then(function(u){return Bu.add(t,u),n&&n(u),o.manager.itemEnd(t),u}).catch(function(u){i&&i(u),Bu.remove(t),o.manager.itemError(t),o.manager.itemEnd(t)});Bu.add(t,l),o.manager.itemStart(t)}}let v0;class Sw{static getContext(){return v0===void 0&&(v0=new(window.AudioContext||window.webkitAudioContext)),v0}static setContext(t){v0=t}}class QI extends qs{constructor(t){super(t)}load(t,n,r,i){const o=this,s=new ca(this.manager);s.setResponseType("arraybuffer"),s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(t,function(l){try{const u=l.slice(0);Sw.getContext().decodeAudioData(u,function(p){n(p)}).catch(a)}catch(u){a(u)}},r,i);function a(l){i?i(l):console.error(l),o.manager.itemError(t)}}}const NM=new Cr,UM=new Cr,Of=new Cr;class ZI{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new yi,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new yi,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(t){const n=this._cache;if(n.focus!==t.focus||n.fov!==t.fov||n.aspect!==t.aspect*this.aspect||n.near!==t.near||n.far!==t.far||n.zoom!==t.zoom||n.eyeSep!==this.eyeSep){n.focus=t.focus,n.fov=t.fov,n.aspect=t.aspect*this.aspect,n.near=t.near,n.far=t.far,n.zoom=t.zoom,n.eyeSep=this.eyeSep,Of.copy(t.projectionMatrix);const i=n.eyeSep/2,o=i*n.near/n.focus,s=n.near*Math.tan(dd*n.fov*.5)/n.zoom;let a,l;UM.elements[12]=-i,NM.elements[12]=i,a=-s*n.aspect+o,l=s*n.aspect+o,Of.elements[0]=2*n.near/(l-a),Of.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(Of),a=-s*n.aspect-o,l=s*n.aspect-o,Of.elements[0]=2*n.near/(l-a),Of.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(Of)}this.cameraL.matrixWorld.copy(t.matrixWorld).multiply(UM),this.cameraR.matrixWorld.copy(t.matrixWorld).multiply(NM)}}class CT extends yi{constructor(t=[]){super(),this.isArrayCamera=!0,this.cameras=t}}class Mw{constructor(t=!0){this.autoStart=t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=GM(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const n=GM();t=(n-this.oldTime)/1e3,this.oldTime=n,this.elapsedTime+=t}return t}}function GM(){return performance.now()}const Ff=new Oe,HM=new ds,$I=new Oe,Nf=new Oe;class ej extends pn{constructor(){super(),this.type="AudioListener",this.context=Sw.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Mw}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(t){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=t,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}updateMatrixWorld(t){super.updateMatrixWorld(t);const n=this.context.listener,r=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Ff,HM,$I),Nf.set(0,0,-1).applyQuaternion(HM),n.positionX){const i=this.context.currentTime+this.timeDelta;n.positionX.linearRampToValueAtTime(Ff.x,i),n.positionY.linearRampToValueAtTime(Ff.y,i),n.positionZ.linearRampToValueAtTime(Ff.z,i),n.forwardX.linearRampToValueAtTime(Nf.x,i),n.forwardY.linearRampToValueAtTime(Nf.y,i),n.forwardZ.linearRampToValueAtTime(Nf.z,i),n.upX.linearRampToValueAtTime(r.x,i),n.upY.linearRampToValueAtTime(r.y,i),n.upZ.linearRampToValueAtTime(r.z,i)}else n.setPosition(Ff.x,Ff.y,Ff.z),n.setOrientation(Nf.x,Nf.y,Nf.z,r.x,r.y,r.z)}}let RT=class extends pn{constructor(t){super(),this.type="Audio",this.listener=t,this.context=t.context,this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this}setMediaElementSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(t),this.connect(),this}setMediaStreamSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(t),this.connect(),this}setBuffer(t){return this.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this}play(t=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+t;const n=this.context.createBufferSource();return n.buffer=this.buffer,n.loop=this.loop,n.loopStart=this.loopStart,n.loopEnd=this.loopEnd,n.onended=this.onEnded.bind(this),n.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=n,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(t=0){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+t),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let t=1,n=this.filters.length;t<n;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let t=1,n=this.filters.length;t<n;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(t){return t||(t=[]),this._connected===!0?(this.disconnect(),this.filters=t.slice(),this.connect()):this.filters=t.slice(),this}setDetune(t){return this.detune=t,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(t){return this.setFilters(t?[t]:[])}setPlaybackRate(t){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=t,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(t){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=t,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(t){return this.loopStart=t,this}setLoopEnd(t){return this.loopEnd=t,this}getVolume(){return this.gain.gain.value}setVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}copy(t,n){return super.copy(t,n),t.sourceType!=="buffer"?(console.warn("THREE.Audio: Audio source type cannot be copied."),this):(this.autoplay=t.autoplay,this.buffer=t.buffer,this.detune=t.detune,this.loop=t.loop,this.loopStart=t.loopStart,this.loopEnd=t.loopEnd,this.offset=t.offset,this.duration=t.duration,this.playbackRate=t.playbackRate,this.hasPlaybackControl=t.hasPlaybackControl,this.sourceType=t.sourceType,this.filters=t.filters.slice(),this)}clone(t){return new this.constructor(this.listener).copy(this,t)}};const Uf=new Oe,zM=new ds,tj=new Oe,Gf=new Oe;class rj extends RT{constructor(t){super(t),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(t){return this.panner.refDistance=t,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(t){return this.panner.rolloffFactor=t,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(t){return this.panner.distanceModel=t,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(t){return this.panner.maxDistance=t,this}setDirectionalCone(t,n,r){return this.panner.coneInnerAngle=t,this.panner.coneOuterAngle=n,this.panner.coneOuterGain=r,this}updateMatrixWorld(t){if(super.updateMatrixWorld(t),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Uf,zM,tj),Gf.set(0,0,1).applyQuaternion(zM);const n=this.panner;if(n.positionX){const r=this.context.currentTime+this.listener.timeDelta;n.positionX.linearRampToValueAtTime(Uf.x,r),n.positionY.linearRampToValueAtTime(Uf.y,r),n.positionZ.linearRampToValueAtTime(Uf.z,r),n.orientationX.linearRampToValueAtTime(Gf.x,r),n.orientationY.linearRampToValueAtTime(Gf.y,r),n.orientationZ.linearRampToValueAtTime(Gf.z,r)}else n.setPosition(Uf.x,Uf.y,Uf.z),n.setOrientation(Gf.x,Gf.y,Gf.z)}}class nj{constructor(t,n=2048){this.analyser=t.context.createAnalyser(),this.analyser.fftSize=n,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let t=0;const n=this.getFrequencyData();for(let r=0;r<n.length;r++)t+=n[r];return t/n.length}}class PT{constructor(t,n,r){this.binding=t,this.valueSize=r;let i,o,s;switch(n){case"quaternion":i=this._slerp,o=this._slerpAdditive,s=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(r*6),this._workIndex=5;break;case"string":case"bool":i=this._select,o=this._select,s=this._setAdditiveIdentityOther,this.buffer=new Array(r*5);break;default:i=this._lerp,o=this._lerpAdditive,s=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(r*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=o,this._setIdentity=s,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(t,n){const r=this.buffer,i=this.valueSize,o=t*i+i;let s=this.cumulativeWeight;if(s===0){for(let a=0;a!==i;++a)r[o+a]=r[a];s=n}else{s+=n;const a=n/s;this._mixBufferRegion(r,o,0,a,i)}this.cumulativeWeight=s}accumulateAdditive(t){const n=this.buffer,r=this.valueSize,i=r*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(n,i,0,t,r),this.cumulativeWeightAdditive+=t}apply(t){const n=this.valueSize,r=this.buffer,i=t*n+n,o=this.cumulativeWeight,s=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,o<1){const l=n*this._origIndex;this._mixBufferRegion(r,i,l,1-o,n)}s>0&&this._mixBufferRegionAdditive(r,i,this._addIndex*n,1,n);for(let l=n,u=n+n;l!==u;++l)if(r[l]!==r[l+n]){a.setValue(r,i);break}}saveOriginalState(){const t=this.binding,n=this.buffer,r=this.valueSize,i=r*this._origIndex;t.getValue(n,i);for(let o=r,s=i;o!==s;++o)n[o]=n[i+o%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const t=this.valueSize*3;this.binding.setValue(this.buffer,t)}_setAdditiveIdentityNumeric(){const t=this._addIndex*this.valueSize,n=t+this.valueSize;for(let r=t;r<n;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const t=this._origIndex*this.valueSize,n=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[n+r]=this.buffer[t+r]}_select(t,n,r,i,o){if(i>=.5)for(let s=0;s!==o;++s)t[n+s]=t[r+s]}_slerp(t,n,r,i){ds.slerpFlat(t,n,t,n,t,r,i)}_slerpAdditive(t,n,r,i,o){const s=this._workIndex*o;ds.multiplyQuaternionsFlat(t,s,t,n,t,r),ds.slerpFlat(t,n,t,n,t,s,i)}_lerp(t,n,r,i,o){const s=1-i;for(let a=0;a!==o;++a){const l=n+a;t[l]=t[l]*s+t[r+a]*i}}_lerpAdditive(t,n,r,i,o){for(let s=0;s!==o;++s){const a=n+s;t[a]=t[a]+t[r+s]*i}}}const Aw="\\[\\]\\.:\\/",ij=new RegExp("["+Aw+"]","g"),Ew="[^"+Aw+"]",sj="[^"+Aw.replace("\\.","")+"]",oj=/((?:WC+[\/:])*)/.source.replace("WC",Ew),aj=/(WCOD+)?/.source.replace("WCOD",sj),lj=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Ew),uj=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Ew),cj=new RegExp("^"+oj+aj+lj+uj+"$"),fj=["material","materials","bones","map"];class dj{constructor(t,n,r){const i=r||yn.parseTrackName(n);this._targetGroup=t,this._bindings=t.subscribe_(n,i)}getValue(t,n){this.bind();const r=this._targetGroup.nCachedObjects_,i=this._bindings[r];i!==void 0&&i.getValue(t,n)}setValue(t,n){const r=this._bindings;for(let i=this._targetGroup.nCachedObjects_,o=r.length;i!==o;++i)r[i].setValue(t,n)}bind(){const t=this._bindings;for(let n=this._targetGroup.nCachedObjects_,r=t.length;n!==r;++n)t[n].bind()}unbind(){const t=this._bindings;for(let n=this._targetGroup.nCachedObjects_,r=t.length;n!==r;++n)t[n].unbind()}}class yn{constructor(t,n,r){this.path=n,this.parsedPath=r||yn.parseTrackName(n),this.node=yn.findNode(t,this.parsedPath.nodeName),this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,n,r){return t&&t.isAnimationObjectGroup?new yn.Composite(t,n,r):new yn(t,n,r)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(ij,"")}static parseTrackName(t){const n=cj.exec(t);if(n===null)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const r={nodeName:n[2],objectName:n[3],objectIndex:n[4],propertyName:n[5],propertyIndex:n[6]},i=r.nodeName&&r.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const o=r.nodeName.substring(i+1);fj.indexOf(o)!==-1&&(r.nodeName=r.nodeName.substring(0,i),r.objectName=o)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return r}static findNode(t,n){if(n===void 0||n===""||n==="."||n===-1||n===t.name||n===t.uuid)return t;if(t.skeleton){const r=t.skeleton.getBoneByName(n);if(r!==void 0)return r}if(t.children){const r=function(o){for(let s=0;s<o.length;s++){const a=o[s];if(a.name===n||a.uuid===n)return a;const l=r(a.children);if(l)return l}return null},i=r(t.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,n){t[n]=this.targetObject[this.propertyName]}_getValue_array(t,n){const r=this.resolvedProperty;for(let i=0,o=r.length;i!==o;++i)t[n++]=r[i]}_getValue_arrayElement(t,n){t[n]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,n){this.resolvedProperty.toArray(t,n)}_setValue_direct(t,n){this.targetObject[this.propertyName]=t[n]}_setValue_direct_setNeedsUpdate(t,n){this.targetObject[this.propertyName]=t[n],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,n){this.targetObject[this.propertyName]=t[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,n){const r=this.resolvedProperty;for(let i=0,o=r.length;i!==o;++i)r[i]=t[n++]}_setValue_array_setNeedsUpdate(t,n){const r=this.resolvedProperty;for(let i=0,o=r.length;i!==o;++i)r[i]=t[n++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,n){const r=this.resolvedProperty;for(let i=0,o=r.length;i!==o;++i)r[i]=t[n++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,n){this.resolvedProperty[this.propertyIndex]=t[n]}_setValue_arrayElement_setNeedsUpdate(t,n){this.resolvedProperty[this.propertyIndex]=t[n],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,n){this.resolvedProperty[this.propertyIndex]=t[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,n){this.resolvedProperty.fromArray(t,n)}_setValue_fromArray_setNeedsUpdate(t,n){this.resolvedProperty.fromArray(t,n),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,n){this.resolvedProperty.fromArray(t,n),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,n){this.bind(),this.getValue(t,n)}_setValue_unbound(t,n){this.bind(),this.setValue(t,n)}bind(){let t=this.node;const n=this.parsedPath,r=n.objectName,i=n.propertyName;let o=n.propertyIndex;if(t||(t=yn.findNode(this.rootNode,n.nodeName),this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(r){let u=n.objectIndex;switch(r){case"materials":if(!t.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}t=t.material.materials;break;case"bones":if(!t.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}t=t.skeleton.bones;for(let h=0;h<t.length;h++)if(t[h].name===u){u=h;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}t=t.material.map;break;default:if(t[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}t=t[r]}if(u!==void 0){if(t[u]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);return}t=t[u]}}const s=t[i];if(s===void 0){const u=n.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+u+"."+i+" but it wasn't found.",t);return}let a=this.Versioning.None;this.targetObject=t,t.isMaterial===!0?a=this.Versioning.NeedsUpdate:t.isObject3D===!0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(o!==void 0){if(i==="morphTargetInfluences"){if(!t.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!t.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}t.morphTargetDictionary[o]!==void 0&&(o=t.morphTargetDictionary[o])}l=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=o}else s.fromArray!==void 0&&s.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(l=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=i;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}yn.Composite=dj;yn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};yn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};yn.prototype.GetterByBindingType=[yn.prototype._getValue_direct,yn.prototype._getValue_array,yn.prototype._getValue_arrayElement,yn.prototype._getValue_toArray];yn.prototype.SetterByBindingTypeAndVersioning=[[yn.prototype._setValue_direct,yn.prototype._setValue_direct_setNeedsUpdate,yn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[yn.prototype._setValue_array,yn.prototype._setValue_array_setNeedsUpdate,yn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[yn.prototype._setValue_arrayElement,yn.prototype._setValue_arrayElement_setNeedsUpdate,yn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[yn.prototype._setValue_fromArray,yn.prototype._setValue_fromArray_setNeedsUpdate,yn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class hj{constructor(){this.isAnimationObjectGroup=!0,this.uuid=aa(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const t={};this._indicesByUUID=t;for(let r=0,i=arguments.length;r!==i;++r)t[arguments[r].uuid]=r;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const n=this;this.stats={objects:{get total(){return n._objects.length},get inUse(){return this.total-n.nCachedObjects_}},get bindingsPerObject(){return n._bindings.length}}}add(){const t=this._objects,n=this._indicesByUUID,r=this._paths,i=this._parsedPaths,o=this._bindings,s=o.length;let a,l=t.length,u=this.nCachedObjects_;for(let h=0,p=arguments.length;h!==p;++h){const c=arguments[h],f=c.uuid;let m=n[f];if(m===void 0){m=l++,n[f]=m,t.push(c);for(let y=0,v=s;y!==v;++y)o[y].push(new yn(c,r[y],i[y]))}else if(m<u){a=t[m];const y=--u,v=t[y];n[v.uuid]=m,t[m]=v,n[f]=y,t[y]=c;for(let g=0,x=s;g!==x;++g){const b=o[g],w=b[y];let T=b[m];b[m]=w,T===void 0&&(T=new yn(c,r[g],i[g])),b[y]=T}}else t[m]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=u}remove(){const t=this._objects,n=this._indicesByUUID,r=this._bindings,i=r.length;let o=this.nCachedObjects_;for(let s=0,a=arguments.length;s!==a;++s){const l=arguments[s],u=l.uuid,h=n[u];if(h!==void 0&&h>=o){const p=o++,c=t[p];n[c.uuid]=h,t[h]=c,n[u]=p,t[p]=l;for(let f=0,m=i;f!==m;++f){const y=r[f],v=y[p],g=y[h];y[h]=v,y[p]=g}}}this.nCachedObjects_=o}uncache(){const t=this._objects,n=this._indicesByUUID,r=this._bindings,i=r.length;let o=this.nCachedObjects_,s=t.length;for(let a=0,l=arguments.length;a!==l;++a){const u=arguments[a],h=u.uuid,p=n[h];if(p!==void 0)if(delete n[h],p<o){const c=--o,f=t[c],m=--s,y=t[m];n[f.uuid]=p,t[p]=f,n[y.uuid]=c,t[c]=y,t.pop();for(let v=0,g=i;v!==g;++v){const x=r[v],b=x[c],w=x[m];x[p]=b,x[c]=w,x.pop()}}else{const c=--s,f=t[c];c>0&&(n[f.uuid]=p),t[p]=f,t.pop();for(let m=0,y=i;m!==y;++m){const v=r[m];v[p]=v[c],v.pop()}}}this.nCachedObjects_=o}subscribe_(t,n){const r=this._bindingsIndicesByPath;let i=r[t];const o=this._bindings;if(i!==void 0)return o[i];const s=this._paths,a=this._parsedPaths,l=this._objects,u=l.length,h=this.nCachedObjects_,p=new Array(u);i=o.length,r[t]=i,s.push(t),a.push(n),o.push(p);for(let c=h,f=l.length;c!==f;++c){const m=l[c];p[c]=new yn(m,t,n)}return p}unsubscribe_(t){const n=this._bindingsIndicesByPath,r=n[t];if(r!==void 0){const i=this._paths,o=this._parsedPaths,s=this._bindings,a=s.length-1,l=s[a],u=t[a];n[u]=r,s[r]=l,s.pop(),o[r]=o[a],o.pop(),i[r]=i[a],i.pop()}}}class IT{constructor(t,n,r=null,i=n.blendMode){this._mixer=t,this._clip=n,this._localRoot=r,this.blendMode=i;const o=n.tracks,s=o.length,a=new Array(s),l={endingStart:rd,endingEnd:rd};for(let u=0;u!==s;++u){const h=o[u].createInterpolant(null);a[u]=h,h.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(s),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=SE,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(t){return this._startTime=t,this}setLoop(t,n){return this.loop=t,this.repetitions=n,this}setEffectiveWeight(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(t){return this._scheduleFading(t,0,1)}fadeOut(t){return this._scheduleFading(t,1,0)}crossFadeFrom(t,n,r){if(t.fadeOut(n),this.fadeIn(n),r){const i=this._clip.duration,o=t._clip.duration,s=o/i,a=i/o;t.warp(1,s,n),this.warp(a,1,n)}return this}crossFadeTo(t,n,r){return t.crossFadeFrom(this,n,r)}stopFading(){const t=this._weightInterpolant;return t!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}setEffectiveTimeScale(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(t){return this.timeScale=this._clip.duration/t,this.stopWarping()}syncWith(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()}halt(t){return this.warp(this._effectiveTimeScale,0,t)}warp(t,n,r){const i=this._mixer,o=i.time,s=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=i._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,u=a.sampleValues;return l[0]=o,l[1]=o+r,u[0]=t/s,u[1]=n/s,this}stopWarping(){const t=this._timeScaleInterpolant;return t!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(t,n,r,i){if(!this.enabled){this._updateWeight(t);return}const o=this._startTime;if(o!==null){const l=(t-o)*r;l<0||r===0?n=0:(this._startTime=null,n=r*l)}n*=this._updateTimeScale(t);const s=this._updateTime(n),a=this._updateWeight(t);if(a>0){const l=this._interpolants,u=this._propertyBindings;switch(this.blendMode){case qb:for(let h=0,p=l.length;h!==p;++h)l[h].evaluate(s),u[h].accumulateAdditive(a);break;case m_:default:for(let h=0,p=l.length;h!==p;++h)l[h].evaluate(s),u[h].accumulate(i,a)}}}_updateWeight(t){let n=0;if(this.enabled){n=this.weight;const r=this._weightInterpolant;if(r!==null){const i=r.evaluate(t)[0];n*=i,t>r.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=n,n}_updateTimeScale(t){let n=0;if(!this.paused){n=this.timeScale;const r=this._timeScaleInterpolant;if(r!==null){const i=r.evaluate(t)[0];n*=i,t>r.parameterPositions[1]&&(this.stopWarping(),n===0?this.paused=!0:this.timeScale=n)}}return this._effectiveTimeScale=n,n}_updateTime(t){const n=this._clip.duration,r=this.loop;let i=this.time+t,o=this._loopCount;const s=r===ME;if(t===0)return o===-1?i:s&&(o&1)===1?n-i:i;if(r===wE){o===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=n)i=n;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{if(o===-1&&(t>=0?(o=0,this._setEndings(!0,this.repetitions===0,s)):this._setEndings(this.repetitions===0,!0,s)),i>=n||i<0){const a=Math.floor(i/n);i-=n*a,o+=Math.abs(a);const l=this.repetitions-o;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=t>0?n:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(l===1){const u=t<0;this._setEndings(u,!u,s)}else this._setEndings(!1,!1,s);this._loopCount=o,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=i;if(s&&(o&1)===1)return n-i}return i}_setEndings(t,n,r){const i=this._interpolantSettings;r?(i.endingStart=nd,i.endingEnd=nd):(t?i.endingStart=this.zeroSlopeAtStart?nd:rd:i.endingStart=yg,n?i.endingEnd=this.zeroSlopeAtEnd?nd:rd:i.endingEnd=yg)}_scheduleFading(t,n,r){const i=this._mixer,o=i.time;let s=this._weightInterpolant;s===null&&(s=i._lendControlInterpolant(),this._weightInterpolant=s);const a=s.parameterPositions,l=s.sampleValues;return a[0]=o,l[0]=n,a[1]=o+t,l[1]=r,this}}const pj=new Float32Array(1);class mj extends Wl{constructor(t){super(),this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(t,n){const r=t._localRoot||this._root,i=t._clip.tracks,o=i.length,s=t._propertyBindings,a=t._interpolants,l=r.uuid,u=this._bindingsByRootAndName;let h=u[l];h===void 0&&(h={},u[l]=h);for(let p=0;p!==o;++p){const c=i[p],f=c.name;let m=h[f];if(m!==void 0)++m.referenceCount,s[p]=m;else{if(m=s[p],m!==void 0){m._cacheIndex===null&&(++m.referenceCount,this._addInactiveBinding(m,l,f));continue}const y=n&&n._propertyBindings[p].binding.parsedPath;m=new PT(yn.create(r,f,y),c.ValueTypeName,c.getValueSize()),++m.referenceCount,this._addInactiveBinding(m,l,f),s[p]=m}a[p].resultBuffer=m.buffer}}_activateAction(t){if(!this._isActiveAction(t)){if(t._cacheIndex===null){const r=(t._localRoot||this._root).uuid,i=t._clip.uuid,o=this._actionsByClip[i];this._bindAction(t,o&&o.knownActions[0]),this._addInactiveAction(t,i,r)}const n=t._propertyBindings;for(let r=0,i=n.length;r!==i;++r){const o=n[r];o.useCount++===0&&(this._lendBinding(o),o.saveOriginalState())}this._lendAction(t)}}_deactivateAction(t){if(this._isActiveAction(t)){const n=t._propertyBindings;for(let r=0,i=n.length;r!==i;++r){const o=n[r];--o.useCount===0&&(o.restoreOriginalState(),this._takeBackBinding(o))}this._takeBackAction(t)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}}_isActiveAction(t){const n=t._cacheIndex;return n!==null&&n<this._nActiveActions}_addInactiveAction(t,n,r){const i=this._actions,o=this._actionsByClip;let s=o[n];if(s===void 0)s={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,o[n]=s;else{const a=s.knownActions;t._byClipCacheIndex=a.length,a.push(t)}t._cacheIndex=i.length,i.push(t),s.actionByRoot[r]=t}_removeInactiveAction(t){const n=this._actions,r=n[n.length-1],i=t._cacheIndex;r._cacheIndex=i,n[i]=r,n.pop(),t._cacheIndex=null;const o=t._clip.uuid,s=this._actionsByClip,a=s[o],l=a.knownActions,u=l[l.length-1],h=t._byClipCacheIndex;u._byClipCacheIndex=h,l[h]=u,l.pop(),t._byClipCacheIndex=null;const p=a.actionByRoot,c=(t._localRoot||this._root).uuid;delete p[c],l.length===0&&delete s[o],this._removeInactiveBindingsForAction(t)}_removeInactiveBindingsForAction(t){const n=t._propertyBindings;for(let r=0,i=n.length;r!==i;++r){const o=n[r];--o.referenceCount===0&&this._removeInactiveBinding(o)}}_lendAction(t){const n=this._actions,r=t._cacheIndex,i=this._nActiveActions++,o=n[i];t._cacheIndex=i,n[i]=t,o._cacheIndex=r,n[r]=o}_takeBackAction(t){const n=this._actions,r=t._cacheIndex,i=--this._nActiveActions,o=n[i];t._cacheIndex=i,n[i]=t,o._cacheIndex=r,n[r]=o}_addInactiveBinding(t,n,r){const i=this._bindingsByRootAndName,o=this._bindings;let s=i[n];s===void 0&&(s={},i[n]=s),s[r]=t,t._cacheIndex=o.length,o.push(t)}_removeInactiveBinding(t){const n=this._bindings,r=t.binding,i=r.rootNode.uuid,o=r.path,s=this._bindingsByRootAndName,a=s[i],l=n[n.length-1],u=t._cacheIndex;l._cacheIndex=u,n[u]=l,n.pop(),delete a[o],Object.keys(a).length===0&&delete s[i]}_lendBinding(t){const n=this._bindings,r=t._cacheIndex,i=this._nActiveBindings++,o=n[i];t._cacheIndex=i,n[i]=t,o._cacheIndex=r,n[r]=o}_takeBackBinding(t){const n=this._bindings,r=t._cacheIndex,i=--this._nActiveBindings,o=n[i];t._cacheIndex=i,n[i]=t,o._cacheIndex=r,n[r]=o}_lendControlInterpolant(){const t=this._controlInterpolants,n=this._nActiveControlInterpolants++;let r=t[n];return r===void 0&&(r=new gw(new Float32Array(2),new Float32Array(2),1,pj),r.__cacheIndex=n,t[n]=r),r}_takeBackControlInterpolant(t){const n=this._controlInterpolants,r=t.__cacheIndex,i=--this._nActiveControlInterpolants,o=n[i];t.__cacheIndex=i,n[i]=t,o.__cacheIndex=r,n[r]=o}clipAction(t,n,r){const i=n||this._root,o=i.uuid;let s=typeof t=="string"?_p.findByName(i,t):t;const a=s!==null?s.uuid:t,l=this._actionsByClip[a];let u=null;if(r===void 0&&(s!==null?r=s.blendMode:r=m_),l!==void 0){const p=l.actionByRoot[o];if(p!==void 0&&p.blendMode===r)return p;u=l.knownActions[0],s===null&&(s=u._clip)}if(s===null)return null;const h=new IT(this,s,n,r);return this._bindAction(h,u),this._addInactiveAction(h,a,o),h}existingAction(t,n){const r=n||this._root,i=r.uuid,o=typeof t=="string"?_p.findByName(r,t):t,s=o?o.uuid:t,a=this._actionsByClip[s];return a!==void 0&&a.actionByRoot[i]||null}stopAllAction(){const t=this._actions,n=this._nActiveActions;for(let r=n-1;r>=0;--r)t[r].stop();return this}update(t){t*=this.timeScale;const n=this._actions,r=this._nActiveActions,i=this.time+=t,o=Math.sign(t),s=this._accuIndex^=1;for(let u=0;u!==r;++u)n[u]._update(i,t,o,s);const a=this._bindings,l=this._nActiveBindings;for(let u=0;u!==l;++u)a[u].apply(s);return this}setTime(t){this.time=0;for(let n=0;n<this._actions.length;n++)this._actions[n].time=0;return this.update(t)}getRoot(){return this._root}uncacheClip(t){const n=this._actions,r=t.uuid,i=this._actionsByClip,o=i[r];if(o!==void 0){const s=o.knownActions;for(let a=0,l=s.length;a!==l;++a){const u=s[a];this._deactivateAction(u);const h=u._cacheIndex,p=n[n.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,p._cacheIndex=h,n[h]=p,n.pop(),this._removeInactiveBindingsForAction(u)}delete i[r]}}uncacheRoot(t){const n=t.uuid,r=this._actionsByClip;for(const s in r){const a=r[s].actionByRoot,l=a[n];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const i=this._bindingsByRootAndName,o=i[n];if(o!==void 0)for(const s in o){const a=o[s];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(t,n){const r=this.existingAction(t,n);r!==null&&(this._deactivateAction(r),this._removeInactiveAction(r))}}class gj extends g_{constructor(t=1,n=1,r=1,i={}){super(t,n,i),this.isRenderTarget3D=!0,this.depth=r,this.texture=new y_(null,t,n,r),this.texture.isRenderTargetTexture=!0}}class yj extends g_{constructor(t=1,n=1,r=1,i={}){super(t,n,i),this.isRenderTargetArray=!0,this.depth=r,this.texture=new Ng(null,t,n,r),this.texture.isRenderTargetTexture=!0}}class Tw{constructor(t){this.value=t}clone(){return new Tw(this.value.clone===void 0?this.value:this.value.clone())}}let vj=0;class _j extends Wl{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:vj++}),this.name="",this.usage=_g,this.uniforms=[]}add(t){return this.uniforms.push(t),this}remove(t){const n=this.uniforms.indexOf(t);return n!==-1&&this.uniforms.splice(n,1),this}setName(t){return this.name=t,this}setUsage(t){return this.usage=t,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(t){this.name=t.name,this.usage=t.usage;const n=t.uniforms;this.uniforms.length=0;for(let r=0,i=n.length;r<i;r++){const o=Array.isArray(n[r])?n[r]:[n[r]];for(let s=0;s<o.length;s++)this.uniforms.push(o[s].clone())}return this}clone(){return new this.constructor().copy(this)}}class xj extends Hg{constructor(t,n,r=1){super(t,n),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=r}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}clone(t){const n=super.clone(t);return n.meshPerAttribute=this.meshPerAttribute,n}toJSON(t){const n=super.toJSON(t);return n.isInstancedInterleavedBuffer=!0,n.meshPerAttribute=this.meshPerAttribute,n}}class bj{constructor(t,n,r,i,o){this.isGLBufferAttribute=!0,this.name="",this.buffer=t,this.type=n,this.itemSize=r,this.elementSize=i,this.count=o,this.version=0}set needsUpdate(t){t===!0&&this.version++}setBuffer(t){return this.buffer=t,this}setType(t,n){return this.type=t,this.elementSize=n,this}setItemSize(t){return this.itemSize=t,this}setCount(t){return this.count=t,this}}const VM=new Cr;class jT{constructor(t,n,r=0,i=1/0){this.ray=new Bd(t,n),this.near=r,this.far=i,this.camera=null,this.layers=new hd,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(t,n){this.ray.set(t,n)}setFromCamera(t,n){n.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(n.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(n).sub(this.ray.origin).normalize(),this.camera=n):n.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(n.near+n.far)/(n.near-n.far)).unproject(n),this.ray.direction.set(0,0,-1).transformDirection(n.matrixWorld),this.camera=n):console.error("THREE.Raycaster: Unsupported camera type: "+n.type)}setFromXRController(t){return VM.identity().extractRotation(t.matrixWorld),this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(VM),this}intersectObject(t,n=!0,r=[]){return rb(t,this,r,n),r.sort(WM),r}intersectObjects(t,n=!0,r=[]){for(let i=0,o=t.length;i<o;i++)rb(t[i],this,r,n);return r.sort(WM),r}}function WM(d,t){return d.distance-t.distance}function rb(d,t,n,r){let i=!0;if(d.layers.test(t.layers)&&d.raycast(t,n)===!1&&(i=!1),i===!0&&r===!0){const o=d.children;for(let s=0,a=o.length;s<a;s++)rb(o[s],t,n,!0)}}class nb{constructor(t=1,n=0,r=0){return this.radius=t,this.phi=n,this.theta=r,this}set(t,n,r){return this.radius=t,this.phi=n,this.theta=r,this}copy(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this}makeSafe(){return this.phi=Ur(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,n,r){return this.radius=Math.sqrt(t*t+n*n+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,r),this.phi=Math.acos(Ur(n/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class wj{constructor(t=1,n=0,r=0){return this.radius=t,this.theta=n,this.y=r,this}set(t,n,r){return this.radius=t,this.theta=n,this.y=r,this}copy(t){return this.radius=t.radius,this.theta=t.theta,this.y=t.y,this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,n,r){return this.radius=Math.sqrt(t*t+r*r),this.theta=Math.atan2(t,r),this.y=n,this}clone(){return new this.constructor().copy(this)}}class Cw{constructor(t,n,r,i){Cw.prototype.isMatrix2=!0,this.elements=[1,0,0,1],t!==void 0&&this.set(t,n,r,i)}identity(){return this.set(1,0,0,1),this}fromArray(t,n=0){for(let r=0;r<4;r++)this.elements[r]=t[r+n];return this}set(t,n,r,i){const o=this.elements;return o[0]=t,o[2]=n,o[1]=r,o[3]=i,this}}const XM=new Ct;class Sj{constructor(t=new Ct(1/0,1/0),n=new Ct(-1/0,-1/0)){this.isBox2=!0,this.min=t,this.max=n}set(t,n){return this.min.copy(t),this.max.copy(n),this}setFromPoints(t){this.makeEmpty();for(let n=0,r=t.length;n<r;n++)this.expandByPoint(t[n]);return this}setFromCenterAndSize(t,n){const r=XM.copy(n).multiplyScalar(.5);return this.min.copy(t).sub(r),this.max.copy(t).add(r),this}clone(){return new this.constructor().copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(t){return this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}containsPoint(t){return t.x>=this.min.x&&t.x<=this.max.x&&t.y>=this.min.y&&t.y<=this.max.y}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y}getParameter(t,n){return n.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(t){return t.max.x>=this.min.x&&t.min.x<=this.max.x&&t.max.y>=this.min.y&&t.min.y<=this.max.y}clampPoint(t,n){return n.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,XM).distanceTo(t)}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const YM=new Oe,_0=new Oe;class Mj{constructor(t=new Oe,n=new Oe){this.start=t,this.end=n}set(t,n){return this.start.copy(t),this.end.copy(n),this}copy(t){return this.start.copy(t.start),this.end.copy(t.end),this}getCenter(t){return t.addVectors(this.start,this.end).multiplyScalar(.5)}delta(t){return t.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(t,n){return this.delta(n).multiplyScalar(t).add(this.start)}closestPointToPointParameter(t,n){YM.subVectors(t,this.start),_0.subVectors(this.end,this.start);const r=_0.dot(_0);let o=_0.dot(YM)/r;return n&&(o=Ur(o,0,1)),o}closestPointToPoint(t,n,r){const i=this.closestPointToPointParameter(t,n);return this.delta(r).multiplyScalar(i).add(this.start)}applyMatrix4(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this}equals(t){return t.start.equals(this.start)&&t.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const qM=new Oe;class Aj extends pn{constructor(t,n){super(),this.light=t,this.matrixAutoUpdate=!1,this.color=n,this.type="SpotLightHelper";const r=new Wr,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let s=0,a=1,l=32;s<l;s++,a++){const u=s/l*Math.PI*2,h=a/l*Math.PI*2;i.push(Math.cos(u),Math.sin(u),1,Math.cos(h),Math.sin(h),1)}r.setAttribute("position",new _r(i,3));const o=new Ys({fog:!1,toneMapped:!1});this.cone=new gl(r,o),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const t=this.light.distance?this.light.distance:1e3,n=t*Math.tan(this.light.angle);this.cone.scale.set(n,n,t),qM.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(qM),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Ec=new Oe,x0=new Cr,ex=new Cr;class Ej extends gl{constructor(t){const n=LT(t),r=new Wr,i=[],o=[],s=new nr(0,0,1),a=new nr(0,1,0);for(let u=0;u<n.length;u++){const h=n[u];h.parent&&h.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),o.push(s.r,s.g,s.b),o.push(a.r,a.g,a.b))}r.setAttribute("position",new _r(i,3)),r.setAttribute("color",new _r(o,3));const l=new Ys({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(r,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=t,this.bones=n,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(t){const n=this.bones,r=this.geometry,i=r.getAttribute("position");ex.copy(this.root.matrixWorld).invert();for(let o=0,s=0;o<n.length;o++){const a=n[o];a.parent&&a.parent.isBone&&(x0.multiplyMatrices(ex,a.matrixWorld),Ec.setFromMatrixPosition(x0),i.setXYZ(s,Ec.x,Ec.y,Ec.z),x0.multiplyMatrices(ex,a.parent.matrixWorld),Ec.setFromMatrixPosition(x0),i.setXYZ(s+1,Ec.x,Ec.y,Ec.z),s+=2)}r.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(t)}dispose(){this.geometry.dispose(),this.material.dispose()}}function LT(d){const t=[];d.isBone===!0&&t.push(d);for(let n=0;n<d.children.length;n++)t.push.apply(t,LT(d.children[n]));return t}class Tj extends Ti{constructor(t,n,r){const i=new Yg(n,4,2),o=new sa({wireframe:!0,fog:!1,toneMapped:!1});super(i,o),this.light=t,this.color=r,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const Cj=new Oe,JM=new nr,KM=new nr;class Rj extends pn{constructor(t,n,r){super(),this.light=t,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="HemisphereLightHelper";const i=new Xg(n);i.rotateY(Math.PI*.5),this.material=new sa({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const o=i.getAttribute("position"),s=new Float32Array(o.count*3);i.setAttribute("color",new wn(s,3)),this.add(new Ti(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const t=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const n=t.geometry.getAttribute("color");JM.copy(this.light.color),KM.copy(this.light.groundColor);for(let r=0,i=n.count;r<i;r++){const o=r<i/2?JM:KM;n.setXYZ(r,o.r,o.g,o.b)}n.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),t.lookAt(Cj.setFromMatrixPosition(this.light.matrixWorld).negate())}}class Pj extends gl{constructor(t=10,n=10,r=4473924,i=8947848){r=new nr(r),i=new nr(i);const o=n/2,s=t/n,a=t/2,l=[],u=[];for(let c=0,f=0,m=-a;c<=n;c++,m+=s){l.push(-a,0,m,a,0,m),l.push(m,0,-a,m,0,a);const y=c===o?r:i;y.toArray(u,f),f+=3,y.toArray(u,f),f+=3,y.toArray(u,f),f+=3,y.toArray(u,f),f+=3}const h=new Wr;h.setAttribute("position",new _r(l,3)),h.setAttribute("color",new _r(u,3));const p=new Ys({vertexColors:!0,toneMapped:!1});super(h,p),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class Ij extends gl{constructor(t=10,n=16,r=8,i=64,o=4473924,s=8947848){o=new nr(o),s=new nr(s);const a=[],l=[];if(n>1)for(let p=0;p<n;p++){const c=p/n*(Math.PI*2),f=Math.sin(c)*t,m=Math.cos(c)*t;a.push(0,0,0),a.push(f,0,m);const y=p&1?o:s;l.push(y.r,y.g,y.b),l.push(y.r,y.g,y.b)}for(let p=0;p<r;p++){const c=p&1?o:s,f=t-t/r*p;for(let m=0;m<i;m++){let y=m/i*(Math.PI*2),v=Math.sin(y)*f,g=Math.cos(y)*f;a.push(v,0,g),l.push(c.r,c.g,c.b),y=(m+1)/i*(Math.PI*2),v=Math.sin(y)*f,g=Math.cos(y)*f,a.push(v,0,g),l.push(c.r,c.g,c.b)}}const u=new Wr;u.setAttribute("position",new _r(a,3)),u.setAttribute("color",new _r(l,3));const h=new Ys({vertexColors:!0,toneMapped:!1});super(u,h),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const QM=new Oe,b0=new Oe,ZM=new Oe;class jj extends pn{constructor(t,n,r){super(),this.light=t,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="DirectionalLightHelper",n===void 0&&(n=1);let i=new Wr;i.setAttribute("position",new _r([-n,n,0,n,n,0,n,-n,0,-n,-n,0,-n,n,0],3));const o=new Ys({fog:!1,toneMapped:!1});this.lightPlane=new Vu(i,o),this.add(this.lightPlane),i=new Wr,i.setAttribute("position",new _r([0,0,0,0,0,1],3)),this.targetLine=new Vu(i,o),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),QM.setFromMatrixPosition(this.light.matrixWorld),b0.setFromMatrixPosition(this.light.target.matrixWorld),ZM.subVectors(b0,QM),this.lightPlane.lookAt(b0),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(b0),this.targetLine.scale.z=ZM.length()}}const w0=new Oe,gi=new Ug;class Lj extends gl{constructor(t){const n=new Wr,r=new Ys({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],o=[],s={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(m,y){l(m),l(y)}function l(m){i.push(0,0,0),o.push(0,0,0),s[m]===void 0&&(s[m]=[]),s[m].push(i.length/3-1)}n.setAttribute("position",new _r(i,3)),n.setAttribute("color",new _r(o,3)),super(n,r),this.type="CameraHelper",this.camera=t,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=s,this.update();const u=new nr(16755200),h=new nr(16711680),p=new nr(43775),c=new nr(16777215),f=new nr(3355443);this.setColors(u,h,p,c,f)}setColors(t,n,r,i,o){const a=this.geometry.getAttribute("color");a.setXYZ(0,t.r,t.g,t.b),a.setXYZ(1,t.r,t.g,t.b),a.setXYZ(2,t.r,t.g,t.b),a.setXYZ(3,t.r,t.g,t.b),a.setXYZ(4,t.r,t.g,t.b),a.setXYZ(5,t.r,t.g,t.b),a.setXYZ(6,t.r,t.g,t.b),a.setXYZ(7,t.r,t.g,t.b),a.setXYZ(8,t.r,t.g,t.b),a.setXYZ(9,t.r,t.g,t.b),a.setXYZ(10,t.r,t.g,t.b),a.setXYZ(11,t.r,t.g,t.b),a.setXYZ(12,t.r,t.g,t.b),a.setXYZ(13,t.r,t.g,t.b),a.setXYZ(14,t.r,t.g,t.b),a.setXYZ(15,t.r,t.g,t.b),a.setXYZ(16,t.r,t.g,t.b),a.setXYZ(17,t.r,t.g,t.b),a.setXYZ(18,t.r,t.g,t.b),a.setXYZ(19,t.r,t.g,t.b),a.setXYZ(20,t.r,t.g,t.b),a.setXYZ(21,t.r,t.g,t.b),a.setXYZ(22,t.r,t.g,t.b),a.setXYZ(23,t.r,t.g,t.b),a.setXYZ(24,n.r,n.g,n.b),a.setXYZ(25,n.r,n.g,n.b),a.setXYZ(26,n.r,n.g,n.b),a.setXYZ(27,n.r,n.g,n.b),a.setXYZ(28,n.r,n.g,n.b),a.setXYZ(29,n.r,n.g,n.b),a.setXYZ(30,n.r,n.g,n.b),a.setXYZ(31,n.r,n.g,n.b),a.setXYZ(32,r.r,r.g,r.b),a.setXYZ(33,r.r,r.g,r.b),a.setXYZ(34,r.r,r.g,r.b),a.setXYZ(35,r.r,r.g,r.b),a.setXYZ(36,r.r,r.g,r.b),a.setXYZ(37,r.r,r.g,r.b),a.setXYZ(38,i.r,i.g,i.b),a.setXYZ(39,i.r,i.g,i.b),a.setXYZ(40,o.r,o.g,o.b),a.setXYZ(41,o.r,o.g,o.b),a.setXYZ(42,o.r,o.g,o.b),a.setXYZ(43,o.r,o.g,o.b),a.setXYZ(44,o.r,o.g,o.b),a.setXYZ(45,o.r,o.g,o.b),a.setXYZ(46,o.r,o.g,o.b),a.setXYZ(47,o.r,o.g,o.b),a.setXYZ(48,o.r,o.g,o.b),a.setXYZ(49,o.r,o.g,o.b),a.needsUpdate=!0}update(){const t=this.geometry,n=this.pointMap,r=1,i=1;gi.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse);const o=this.camera.coordinateSystem===dl?-1:0;Mi("c",n,t,gi,0,0,o),Mi("t",n,t,gi,0,0,1),Mi("n1",n,t,gi,-1,-1,o),Mi("n2",n,t,gi,r,-1,o),Mi("n3",n,t,gi,-1,i,o),Mi("n4",n,t,gi,r,i,o),Mi("f1",n,t,gi,-1,-1,1),Mi("f2",n,t,gi,r,-1,1),Mi("f3",n,t,gi,-1,i,1),Mi("f4",n,t,gi,r,i,1),Mi("u1",n,t,gi,r*.7,i*1.1,o),Mi("u2",n,t,gi,-1*.7,i*1.1,o),Mi("u3",n,t,gi,0,i*2,o),Mi("cf1",n,t,gi,-1,0,1),Mi("cf2",n,t,gi,r,0,1),Mi("cf3",n,t,gi,0,-1,1),Mi("cf4",n,t,gi,0,i,1),Mi("cn1",n,t,gi,-1,0,o),Mi("cn2",n,t,gi,r,0,o),Mi("cn3",n,t,gi,0,-1,o),Mi("cn4",n,t,gi,0,i,o),t.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Mi(d,t,n,r,i,o,s){w0.set(i,o,s).unproject(r);const a=t[d];if(a!==void 0){const l=n.getAttribute("position");for(let u=0,h=a.length;u<h;u++)l.setXYZ(a[u],w0.x,w0.y,w0.z)}}const S0=new Ws;class Dj extends gl{constructor(t,n=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(8*3),o=new Wr;o.setIndex(new wn(r,1)),o.setAttribute("position",new wn(i,3)),super(o,new Ys({color:n,toneMapped:!1})),this.object=t,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(t){if(t!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&S0.setFromObject(this.object),S0.isEmpty())return;const n=S0.min,r=S0.max,i=this.geometry.attributes.position,o=i.array;o[0]=r.x,o[1]=r.y,o[2]=r.z,o[3]=n.x,o[4]=r.y,o[5]=r.z,o[6]=n.x,o[7]=n.y,o[8]=r.z,o[9]=r.x,o[10]=n.y,o[11]=r.z,o[12]=r.x,o[13]=r.y,o[14]=n.z,o[15]=n.x,o[16]=r.y,o[17]=n.z,o[18]=n.x,o[19]=n.y,o[20]=n.z,o[21]=r.x,o[22]=n.y,o[23]=n.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(t){return this.object=t,this.update(),this}copy(t,n){return super.copy(t,n),this.object=t.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Bj extends gl{constructor(t,n=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],o=new Wr;o.setIndex(new wn(r,1)),o.setAttribute("position",new _r(i,3)),super(o,new Ys({color:n,toneMapped:!1})),this.box=t,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(t){const n=this.box;n.isEmpty()||(n.getCenter(this.position),n.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(t))}dispose(){this.geometry.dispose(),this.material.dispose()}}class kj extends Vu{constructor(t,n=1,r=16776960){const i=r,o=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],s=new Wr;s.setAttribute("position",new _r(o,3)),s.computeBoundingSphere(),super(s,new Ys({color:i,toneMapped:!1})),this.type="PlaneHelper",this.plane=t,this.size=n;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new Wr;l.setAttribute("position",new _r(a,3)),l.computeBoundingSphere(),this.add(new Ti(l,new sa({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(t){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(t)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const $M=new Oe;let M0,tx;class Oj extends pn{constructor(t=new Oe(0,0,1),n=new Oe(0,0,0),r=1,i=16776960,o=r*.2,s=o*.2){super(),this.type="ArrowHelper",M0===void 0&&(M0=new Wr,M0.setAttribute("position",new _r([0,0,0,0,1,0],3)),tx=new Pp(0,.5,1,5,1),tx.translate(0,-.5,0)),this.position.copy(n),this.line=new Vu(M0,new Ys({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Ti(tx,new sa({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(t),this.setLength(r,o,s)}setDirection(t){if(t.y>.99999)this.quaternion.set(0,0,0,1);else if(t.y<-.99999)this.quaternion.set(1,0,0,0);else{$M.set(t.z,0,-t.x).normalize();const n=Math.acos(t.y);this.quaternion.setFromAxisAngle($M,n)}}setLength(t,n=t*.2,r=n*.2){this.line.scale.set(1,Math.max(1e-4,t-n),1),this.line.updateMatrix(),this.cone.scale.set(r,n,r),this.cone.position.y=t,this.cone.updateMatrix()}setColor(t){this.line.material.color.set(t),this.cone.material.color.set(t)}copy(t){return super.copy(t,!1),this.line.copy(t.line),this.cone.copy(t.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class Fj extends gl{constructor(t=1){const n=[0,0,0,t,0,0,0,0,0,0,t,0,0,0,0,0,0,t],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new Wr;i.setAttribute("position",new _r(n,3)),i.setAttribute("color",new _r(r,3));const o=new Ys({vertexColors:!0,toneMapped:!1});super(i,o),this.type="AxesHelper"}setColors(t,n,r){const i=new nr,o=this.geometry.attributes.color.array;return i.set(t),i.toArray(o,0),i.toArray(o,3),i.set(n),i.toArray(o,6),i.toArray(o,9),i.set(r),i.toArray(o,12),i.toArray(o,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Nj{constructor(){this.type="ShapePath",this.color=new nr,this.subPaths=[],this.currentPath=null}moveTo(t,n){return this.currentPath=new wg,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,n),this}lineTo(t,n){return this.currentPath.lineTo(t,n),this}quadraticCurveTo(t,n,r,i){return this.currentPath.quadraticCurveTo(t,n,r,i),this}bezierCurveTo(t,n,r,i,o,s){return this.currentPath.bezierCurveTo(t,n,r,i,o,s),this}splineThru(t){return this.currentPath.splineThru(t),this}toShapes(t){function n(g){const x=[];for(let b=0,w=g.length;b<w;b++){const T=g[b],R=new pd;R.curves=T.curves,x.push(R)}return x}function r(g,x){const b=x.length;let w=!1;for(let T=b-1,R=0;R<b;T=R++){let C=x[T],P=x[R],I=P.x-C.x,D=P.y-C.y;if(Math.abs(D)>Number.EPSILON){if(D<0&&(C=x[R],I=-I,P=x[T],D=-D),g.y<C.y||g.y>P.y)continue;if(g.y===C.y){if(g.x===C.x)return!0}else{const j=D*(g.x-C.x)-I*(g.y-C.y);if(j===0)return!0;if(j<0)continue;w=!w}}else{if(g.y!==C.y)continue;if(P.x<=g.x&&g.x<=C.x||C.x<=g.x&&g.x<=P.x)return!0}}return w}const i=Fl.isClockWise,o=this.subPaths;if(o.length===0)return[];let s,a,l;const u=[];if(o.length===1)return a=o[0],l=new pd,l.curves=a.curves,u.push(l),u;let h=!i(o[0].getPoints());h=t?!h:h;const p=[],c=[];let f=[],m=0,y;c[m]=void 0,f[m]=[];for(let g=0,x=o.length;g<x;g++)a=o[g],y=a.getPoints(),s=i(y),s=t?!s:s,s?(!h&&c[m]&&m++,c[m]={s:new pd,p:y},c[m].s.curves=a.curves,h&&m++,f[m]=[]):f[m].push({h:a,p:y[0]});if(!c[0])return n(o);if(c.length>1){let g=!1,x=0;for(let b=0,w=c.length;b<w;b++)p[b]=[];for(let b=0,w=c.length;b<w;b++){const T=f[b];for(let R=0;R<T.length;R++){const C=T[R];let P=!0;for(let I=0;I<c.length;I++)r(C.p,c[I].p)&&(b!==I&&x++,P?(P=!1,p[I].push(C)):g=!0);P&&p[b].push(C)}}x>0&&g===!1&&(f=p)}let v;for(let g=0,x=c.length;g<x;g++){l=c[g].s,u.push(l),v=f[g];for(let b=0,w=v.length;b<w;b++)l.holes.push(v[b].h)}return u}}class Uj extends Wl{constructor(t,n=null){super(),this.object=t,this.domElement=n,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(){}disconnect(){}dispose(){}update(){}}function Gj(d,t){const n=d.image&&d.image.width?d.image.width/d.image.height:1;return n>t?(d.repeat.x=1,d.repeat.y=n/t,d.offset.x=0,d.offset.y=(1-d.repeat.y)/2):(d.repeat.x=t/n,d.repeat.y=1,d.offset.x=(1-d.repeat.x)/2,d.offset.y=0),d}function Hj(d,t){const n=d.image&&d.image.width?d.image.width/d.image.height:1;return n>t?(d.repeat.x=t/n,d.repeat.y=1,d.offset.x=(1-d.repeat.x)/2,d.offset.y=0):(d.repeat.x=1,d.repeat.y=n/t,d.offset.x=0,d.offset.y=(1-d.repeat.y)/2),d}function zj(d){return d.repeat.x=1,d.repeat.y=1,d.offset.x=0,d.offset.y=0,d}function ib(d,t,n,r){const i=Vj(r);switch(n){case Hb:return d*t;case Vb:return d*t;case Wb:return d*t*2;case d_:return d*t/i.components*i.byteLength;case Fg:return d*t/i.components*i.byteLength;case Xb:return d*t*2/i.components*i.byteLength;case h_:return d*t*2/i.components*i.byteLength;case zb:return d*t*3/i.components*i.byteLength;case zs:return d*t*4/i.components*i.byteLength;case p_:return d*t*4/i.components*i.byteLength;case Jm:case Km:return Math.floor((d+3)/4)*Math.floor((t+3)/4)*8;case Qm:case Zm:return Math.floor((d+3)/4)*Math.floor((t+3)/4)*16;case gv:case vv:return Math.max(d,16)*Math.max(t,8)/4;case mv:case yv:return Math.max(d,8)*Math.max(t,8)/2;case _v:case xv:return Math.floor((d+3)/4)*Math.floor((t+3)/4)*8;case bv:return Math.floor((d+3)/4)*Math.floor((t+3)/4)*16;case wv:return Math.floor((d+3)/4)*Math.floor((t+3)/4)*16;case Sv:return Math.floor((d+4)/5)*Math.floor((t+3)/4)*16;case Mv:return Math.floor((d+4)/5)*Math.floor((t+4)/5)*16;case Av:return Math.floor((d+5)/6)*Math.floor((t+4)/5)*16;case Ev:return Math.floor((d+5)/6)*Math.floor((t+5)/6)*16;case Tv:return Math.floor((d+7)/8)*Math.floor((t+4)/5)*16;case Cv:return Math.floor((d+7)/8)*Math.floor((t+5)/6)*16;case Rv:return Math.floor((d+7)/8)*Math.floor((t+7)/8)*16;case Pv:return Math.floor((d+9)/10)*Math.floor((t+4)/5)*16;case Iv:return Math.floor((d+9)/10)*Math.floor((t+5)/6)*16;case jv:return Math.floor((d+9)/10)*Math.floor((t+7)/8)*16;case Lv:return Math.floor((d+9)/10)*Math.floor((t+9)/10)*16;case Dv:return Math.floor((d+11)/12)*Math.floor((t+9)/10)*16;case Bv:return Math.floor((d+11)/12)*Math.floor((t+11)/12)*16;case $m:case kv:case Ov:return Math.ceil(d/4)*Math.ceil(t/4)*16;case Yb:case Fv:return Math.ceil(d/4)*Math.ceil(t/4)*8;case Nv:case Uv:return Math.ceil(d/4)*Math.ceil(t/4)*16}throw new Error(`Unable to determine texture byte length for ${n} format.`)}function Vj(d){switch(d){case hl:case Nb:return{byteLength:1,components:1};case pp:case Ub:case Rp:return{byteLength:2,components:1};case c_:case f_:return{byteLength:2,components:4};case zu:case u_:case jo:return{byteLength:4,components:1};case Gb:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${d}.`)}const Wj={contain:Gj,cover:Hj,fill:zj,getByteLength:ib};typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:kg}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=kg);/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function DT(){let d=null,t=!1,n=null,r=null;function i(o,s){n(o,s),r=d.requestAnimationFrame(i)}return{start:function(){t!==!0&&n!==null&&(r=d.requestAnimationFrame(i),t=!0)},stop:function(){d.cancelAnimationFrame(r),t=!1},setAnimationLoop:function(o){n=o},setContext:function(o){d=o}}}function Xj(d){const t=new WeakMap;function n(a,l){const u=a.array,h=a.usage,p=u.byteLength,c=d.createBuffer();d.bindBuffer(l,c),d.bufferData(l,u,h),a.onUploadCallback();let f;if(u instanceof Float32Array)f=d.FLOAT;else if(u instanceof Uint16Array)a.isFloat16BufferAttribute?f=d.HALF_FLOAT:f=d.UNSIGNED_SHORT;else if(u instanceof Int16Array)f=d.SHORT;else if(u instanceof Uint32Array)f=d.UNSIGNED_INT;else if(u instanceof Int32Array)f=d.INT;else if(u instanceof Int8Array)f=d.BYTE;else if(u instanceof Uint8Array)f=d.UNSIGNED_BYTE;else if(u instanceof Uint8ClampedArray)f=d.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+u);return{buffer:c,type:f,bytesPerElement:u.BYTES_PER_ELEMENT,version:a.version,size:p}}function r(a,l,u){const h=l.array,p=l.updateRanges;if(d.bindBuffer(u,a),p.length===0)d.bufferSubData(u,0,h);else{p.sort((f,m)=>f.start-m.start);let c=0;for(let f=1;f<p.length;f++){const m=p[c],y=p[f];y.start<=m.start+m.count+1?m.count=Math.max(m.count,y.start+y.count-m.start):(++c,p[c]=y)}p.length=c+1;for(let f=0,m=p.length;f<m;f++){const y=p[f];d.bufferSubData(u,y.start*h.BYTES_PER_ELEMENT,h,y.start,y.count)}l.clearUpdateRanges()}l.onUploadCallback()}function i(a){return a.isInterleavedBufferAttribute&&(a=a.data),t.get(a)}function o(a){a.isInterleavedBufferAttribute&&(a=a.data);const l=t.get(a);l&&(d.deleteBuffer(l.buffer),t.delete(a))}function s(a,l){if(a.isInterleavedBufferAttribute&&(a=a.data),a.isGLBufferAttribute){const h=t.get(a);(!h||h.version<a.version)&&t.set(a,{buffer:a.buffer,type:a.type,bytesPerElement:a.elementSize,version:a.version});return}const u=t.get(a);if(u===void 0)t.set(a,n(a,l));else if(u.version<a.version){if(u.size!==a.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");r(u.buffer,a,l),u.version=a.version}}return{get:i,remove:o,update:s}}var Yj=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,qj=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,Jj=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,Kj=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Qj=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,Zj=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,$j=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,eL=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,tL=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,rL=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,nL=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,iL=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,sL=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,oL=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,aL=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,lL=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,uL=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,cL=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,fL=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,dL=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,hL=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,pL=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,mL=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,gL=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,yL=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,vL=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,_L=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,xL=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,bL=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,wL=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,SL="gl_FragColor = linearToOutputTexel( gl_FragColor );",ML=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,AL=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,EL=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,TL=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,CL=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,RL=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,PL=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,IL=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,jL=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,LL=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,DL=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,BL=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,kL=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,OL=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,FL=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,NL=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,UL=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,GL=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,HL=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,zL=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,VL=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,WL=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,XL=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,YL=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,qL=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,JL=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,KL=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,QL=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,ZL=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,$L=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,eD=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,tD=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,rD=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,nD=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,iD=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,sD=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,oD=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,aD=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,lD=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,uD=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,cD=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,fD=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,dD=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,hD=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,pD=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,mD=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,gD=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,yD=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,vD=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,_D=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,xD=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,bD=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,wD=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,SD=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,MD=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,AD=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,ED=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,TD=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,CD=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,RD=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,PD=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,ID=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,jD=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,LD=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,DD=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,BD=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,kD=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,OD=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,FD=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,ND=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,UD=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,GD=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,HD=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,zD=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,VD=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,WD=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const XD=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,YD=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,qD=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,JD=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,KD=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,QD=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,ZD=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,$D=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,eB=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,tB=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,rB=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,nB=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,iB=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,sB=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,oB=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,aB=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,lB=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,uB=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,cB=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,fB=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,dB=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,hB=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,pB=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,mB=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,gB=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,yB=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vB=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,_B=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,xB=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,bB=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,wB=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,SB=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,MB=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,AB=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Qr={alphahash_fragment:Yj,alphahash_pars_fragment:qj,alphamap_fragment:Jj,alphamap_pars_fragment:Kj,alphatest_fragment:Qj,alphatest_pars_fragment:Zj,aomap_fragment:$j,aomap_pars_fragment:eL,batching_pars_vertex:tL,batching_vertex:rL,begin_vertex:nL,beginnormal_vertex:iL,bsdfs:sL,iridescence_fragment:oL,bumpmap_pars_fragment:aL,clipping_planes_fragment:lL,clipping_planes_pars_fragment:uL,clipping_planes_pars_vertex:cL,clipping_planes_vertex:fL,color_fragment:dL,color_pars_fragment:hL,color_pars_vertex:pL,color_vertex:mL,common:gL,cube_uv_reflection_fragment:yL,defaultnormal_vertex:vL,displacementmap_pars_vertex:_L,displacementmap_vertex:xL,emissivemap_fragment:bL,emissivemap_pars_fragment:wL,colorspace_fragment:SL,colorspace_pars_fragment:ML,envmap_fragment:AL,envmap_common_pars_fragment:EL,envmap_pars_fragment:TL,envmap_pars_vertex:CL,envmap_physical_pars_fragment:NL,envmap_vertex:RL,fog_vertex:PL,fog_pars_vertex:IL,fog_fragment:jL,fog_pars_fragment:LL,gradientmap_pars_fragment:DL,lightmap_pars_fragment:BL,lights_lambert_fragment:kL,lights_lambert_pars_fragment:OL,lights_pars_begin:FL,lights_toon_fragment:UL,lights_toon_pars_fragment:GL,lights_phong_fragment:HL,lights_phong_pars_fragment:zL,lights_physical_fragment:VL,lights_physical_pars_fragment:WL,lights_fragment_begin:XL,lights_fragment_maps:YL,lights_fragment_end:qL,logdepthbuf_fragment:JL,logdepthbuf_pars_fragment:KL,logdepthbuf_pars_vertex:QL,logdepthbuf_vertex:ZL,map_fragment:$L,map_pars_fragment:eD,map_particle_fragment:tD,map_particle_pars_fragment:rD,metalnessmap_fragment:nD,metalnessmap_pars_fragment:iD,morphinstance_vertex:sD,morphcolor_vertex:oD,morphnormal_vertex:aD,morphtarget_pars_vertex:lD,morphtarget_vertex:uD,normal_fragment_begin:cD,normal_fragment_maps:fD,normal_pars_fragment:dD,normal_pars_vertex:hD,normal_vertex:pD,normalmap_pars_fragment:mD,clearcoat_normal_fragment_begin:gD,clearcoat_normal_fragment_maps:yD,clearcoat_pars_fragment:vD,iridescence_pars_fragment:_D,opaque_fragment:xD,packing:bD,premultiplied_alpha_fragment:wD,project_vertex:SD,dithering_fragment:MD,dithering_pars_fragment:AD,roughnessmap_fragment:ED,roughnessmap_pars_fragment:TD,shadowmap_pars_fragment:CD,shadowmap_pars_vertex:RD,shadowmap_vertex:PD,shadowmask_pars_fragment:ID,skinbase_vertex:jD,skinning_pars_vertex:LD,skinning_vertex:DD,skinnormal_vertex:BD,specularmap_fragment:kD,specularmap_pars_fragment:OD,tonemapping_fragment:FD,tonemapping_pars_fragment:ND,transmission_fragment:UD,transmission_pars_fragment:GD,uv_pars_fragment:HD,uv_pars_vertex:zD,uv_vertex:VD,worldpos_vertex:WD,background_vert:XD,background_frag:YD,backgroundCube_vert:qD,backgroundCube_frag:JD,cube_vert:KD,cube_frag:QD,depth_vert:ZD,depth_frag:$D,distanceRGBA_vert:eB,distanceRGBA_frag:tB,equirect_vert:rB,equirect_frag:nB,linedashed_vert:iB,linedashed_frag:sB,meshbasic_vert:oB,meshbasic_frag:aB,meshlambert_vert:lB,meshlambert_frag:uB,meshmatcap_vert:cB,meshmatcap_frag:fB,meshnormal_vert:dB,meshnormal_frag:hB,meshphong_vert:pB,meshphong_frag:mB,meshphysical_vert:gB,meshphysical_frag:yB,meshtoon_vert:vB,meshtoon_frag:_B,points_vert:xB,points_frag:bB,shadow_vert:wB,shadow_frag:SB,sprite_vert:MB,sprite_frag:AB},rr={common:{diffuse:{value:new nr(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Vr},alphaMap:{value:null},alphaMapTransform:{value:new Vr},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Vr}},envmap:{envMap:{value:null},envMapRotation:{value:new Vr},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Vr}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Vr}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Vr},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Vr},normalScale:{value:new Ct(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Vr},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Vr}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Vr}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Vr}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new nr(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new nr(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Vr},alphaTest:{value:0},uvTransform:{value:new Vr}},sprite:{diffuse:{value:new nr(16777215)},opacity:{value:1},center:{value:new Ct(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Vr},alphaMap:{value:null},alphaMapTransform:{value:new Vr},alphaTest:{value:0}}},cl={basic:{uniforms:ao([rr.common,rr.specularmap,rr.envmap,rr.aomap,rr.lightmap,rr.fog]),vertexShader:Qr.meshbasic_vert,fragmentShader:Qr.meshbasic_frag},lambert:{uniforms:ao([rr.common,rr.specularmap,rr.envmap,rr.aomap,rr.lightmap,rr.emissivemap,rr.bumpmap,rr.normalmap,rr.displacementmap,rr.fog,rr.lights,{emissive:{value:new nr(0)}}]),vertexShader:Qr.meshlambert_vert,fragmentShader:Qr.meshlambert_frag},phong:{uniforms:ao([rr.common,rr.specularmap,rr.envmap,rr.aomap,rr.lightmap,rr.emissivemap,rr.bumpmap,rr.normalmap,rr.displacementmap,rr.fog,rr.lights,{emissive:{value:new nr(0)},specular:{value:new nr(1118481)},shininess:{value:30}}]),vertexShader:Qr.meshphong_vert,fragmentShader:Qr.meshphong_frag},standard:{uniforms:ao([rr.common,rr.envmap,rr.aomap,rr.lightmap,rr.emissivemap,rr.bumpmap,rr.normalmap,rr.displacementmap,rr.roughnessmap,rr.metalnessmap,rr.fog,rr.lights,{emissive:{value:new nr(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Qr.meshphysical_vert,fragmentShader:Qr.meshphysical_frag},toon:{uniforms:ao([rr.common,rr.aomap,rr.lightmap,rr.emissivemap,rr.bumpmap,rr.normalmap,rr.displacementmap,rr.gradientmap,rr.fog,rr.lights,{emissive:{value:new nr(0)}}]),vertexShader:Qr.meshtoon_vert,fragmentShader:Qr.meshtoon_frag},matcap:{uniforms:ao([rr.common,rr.bumpmap,rr.normalmap,rr.displacementmap,rr.fog,{matcap:{value:null}}]),vertexShader:Qr.meshmatcap_vert,fragmentShader:Qr.meshmatcap_frag},points:{uniforms:ao([rr.points,rr.fog]),vertexShader:Qr.points_vert,fragmentShader:Qr.points_frag},dashed:{uniforms:ao([rr.common,rr.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Qr.linedashed_vert,fragmentShader:Qr.linedashed_frag},depth:{uniforms:ao([rr.common,rr.displacementmap]),vertexShader:Qr.depth_vert,fragmentShader:Qr.depth_frag},normal:{uniforms:ao([rr.common,rr.bumpmap,rr.normalmap,rr.displacementmap,{opacity:{value:1}}]),vertexShader:Qr.meshnormal_vert,fragmentShader:Qr.meshnormal_frag},sprite:{uniforms:ao([rr.sprite,rr.fog]),vertexShader:Qr.sprite_vert,fragmentShader:Qr.sprite_frag},background:{uniforms:{uvTransform:{value:new Vr},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Qr.background_vert,fragmentShader:Qr.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Vr}},vertexShader:Qr.backgroundCube_vert,fragmentShader:Qr.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Qr.cube_vert,fragmentShader:Qr.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Qr.equirect_vert,fragmentShader:Qr.equirect_frag},distanceRGBA:{uniforms:ao([rr.common,rr.displacementmap,{referencePosition:{value:new Oe},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Qr.distanceRGBA_vert,fragmentShader:Qr.distanceRGBA_frag},shadow:{uniforms:ao([rr.lights,rr.fog,{color:{value:new nr(0)},opacity:{value:1}}]),vertexShader:Qr.shadow_vert,fragmentShader:Qr.shadow_frag}};cl.physical={uniforms:ao([cl.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Vr},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Vr},clearcoatNormalScale:{value:new Ct(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Vr},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Vr},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Vr},sheen:{value:0},sheenColor:{value:new nr(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Vr},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Vr},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Vr},transmissionSamplerSize:{value:new Ct},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Vr},attenuationDistance:{value:0},attenuationColor:{value:new nr(0)},specularColor:{value:new nr(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Vr},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Vr},anisotropyVector:{value:new Ct},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Vr}}]),vertexShader:Qr.meshphysical_vert,fragmentShader:Qr.meshphysical_frag};const A0={r:0,b:0,g:0},Hf=new ua,EB=new Cr;function TB(d,t,n,r,i,o,s){const a=new nr(0);let l=o===!0?0:1,u,h,p=null,c=0,f=null;function m(b){let w=b.isScene===!0?b.background:null;return w&&w.isTexture&&(w=(b.backgroundBlurriness>0?n:t).get(w)),w}function y(b){let w=!1;const T=m(b);T===null?g(a,l):T&&T.isColor&&(g(T,1),w=!0);const R=d.xr.getEnvironmentBlendMode();R==="additive"?r.buffers.color.setClear(0,0,0,1,s):R==="alpha-blend"&&r.buffers.color.setClear(0,0,0,0,s),(d.autoClear||w)&&(r.buffers.depth.setTest(!0),r.buffers.depth.setMask(!0),r.buffers.color.setMask(!0),d.clear(d.autoClearColor,d.autoClearDepth,d.autoClearStencil))}function v(b,w){const T=m(w);T&&(T.isCubeTexture||T.mapping===Cp)?(h===void 0&&(h=new Ti(new kd(1,1,1),new pl({name:"BackgroundCubeMaterial",uniforms:vp(cl.backgroundCube.uniforms),vertexShader:cl.backgroundCube.vertexShader,fragmentShader:cl.backgroundCube.fragmentShader,side:mo,depthTest:!1,depthWrite:!1,fog:!1})),h.geometry.deleteAttribute("normal"),h.geometry.deleteAttribute("uv"),h.onBeforeRender=function(R,C,P){this.matrixWorld.copyPosition(P.matrixWorld)},Object.defineProperty(h.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(h)),Hf.copy(w.backgroundRotation),Hf.x*=-1,Hf.y*=-1,Hf.z*=-1,T.isCubeTexture&&T.isRenderTargetTexture===!1&&(Hf.y*=-1,Hf.z*=-1),h.material.uniforms.envMap.value=T,h.material.uniforms.flipEnvMap.value=T.isCubeTexture&&T.isRenderTargetTexture===!1?-1:1,h.material.uniforms.backgroundBlurriness.value=w.backgroundBlurriness,h.material.uniforms.backgroundIntensity.value=w.backgroundIntensity,h.material.uniforms.backgroundRotation.value.setFromMatrix4(EB.makeRotationFromEuler(Hf)),h.material.toneMapped=vn.getTransfer(T.colorSpace)!==Dn,(p!==T||c!==T.version||f!==d.toneMapping)&&(h.material.needsUpdate=!0,p=T,c=T.version,f=d.toneMapping),h.layers.enableAll(),b.unshift(h,h.geometry,h.material,0,0,null)):T&&T.isTexture&&(u===void 0&&(u=new Ti(new Ip(2,2),new pl({name:"BackgroundMaterial",uniforms:vp(cl.background.uniforms),vertexShader:cl.background.vertexShader,fragmentShader:cl.background.fragmentShader,side:Hl,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),Object.defineProperty(u.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(u)),u.material.uniforms.t2D.value=T,u.material.uniforms.backgroundIntensity.value=w.backgroundIntensity,u.material.toneMapped=vn.getTransfer(T.colorSpace)!==Dn,T.matrixAutoUpdate===!0&&T.updateMatrix(),u.material.uniforms.uvTransform.value.copy(T.matrix),(p!==T||c!==T.version||f!==d.toneMapping)&&(u.material.needsUpdate=!0,p=T,c=T.version,f=d.toneMapping),u.layers.enableAll(),b.unshift(u,u.geometry,u.material,0,0,null))}function g(b,w){b.getRGB(A0,GE(d)),r.buffers.color.setClear(A0.r,A0.g,A0.b,w,s)}function x(){h!==void 0&&(h.geometry.dispose(),h.material.dispose()),u!==void 0&&(u.geometry.dispose(),u.material.dispose())}return{getClearColor:function(){return a},setClearColor:function(b,w=1){a.set(b),l=w,g(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(b){l=b,g(a,l)},render:y,addToRenderList:v,dispose:x}}function CB(d,t){const n=d.getParameter(d.MAX_VERTEX_ATTRIBS),r={},i=c(null);let o=i,s=!1;function a(D,j,N,O,W){let X=!1;const J=p(O,N,j);o!==J&&(o=J,u(o.object)),X=f(D,O,N,W),X&&m(D,O,N,W),W!==null&&t.update(W,d.ELEMENT_ARRAY_BUFFER),(X||s)&&(s=!1,w(D,j,N,O),W!==null&&d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,t.get(W).buffer))}function l(){return d.createVertexArray()}function u(D){return d.bindVertexArray(D)}function h(D){return d.deleteVertexArray(D)}function p(D,j,N){const O=N.wireframe===!0;let W=r[D.id];W===void 0&&(W={},r[D.id]=W);let X=W[j.id];X===void 0&&(X={},W[j.id]=X);let J=X[O];return J===void 0&&(J=c(l()),X[O]=J),J}function c(D){const j=[],N=[],O=[];for(let W=0;W<n;W++)j[W]=0,N[W]=0,O[W]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:j,enabledAttributes:N,attributeDivisors:O,object:D,attributes:{},index:null}}function f(D,j,N,O){const W=o.attributes,X=j.attributes;let J=0;const ee=N.getAttributes();for(const V in ee)if(ee[V].location>=0){const Y=W[V];let Z=X[V];if(Z===void 0&&(V==="instanceMatrix"&&D.instanceMatrix&&(Z=D.instanceMatrix),V==="instanceColor"&&D.instanceColor&&(Z=D.instanceColor)),Y===void 0||Y.attribute!==Z||Z&&Y.data!==Z.data)return!0;J++}return o.attributesNum!==J||o.index!==O}function m(D,j,N,O){const W={},X=j.attributes;let J=0;const ee=N.getAttributes();for(const V in ee)if(ee[V].location>=0){let Y=X[V];Y===void 0&&(V==="instanceMatrix"&&D.instanceMatrix&&(Y=D.instanceMatrix),V==="instanceColor"&&D.instanceColor&&(Y=D.instanceColor));const Z={};Z.attribute=Y,Y&&Y.data&&(Z.data=Y.data),W[V]=Z,J++}o.attributes=W,o.attributesNum=J,o.index=O}function y(){const D=o.newAttributes;for(let j=0,N=D.length;j<N;j++)D[j]=0}function v(D){g(D,0)}function g(D,j){const N=o.newAttributes,O=o.enabledAttributes,W=o.attributeDivisors;N[D]=1,O[D]===0&&(d.enableVertexAttribArray(D),O[D]=1),W[D]!==j&&(d.vertexAttribDivisor(D,j),W[D]=j)}function x(){const D=o.newAttributes,j=o.enabledAttributes;for(let N=0,O=j.length;N<O;N++)j[N]!==D[N]&&(d.disableVertexAttribArray(N),j[N]=0)}function b(D,j,N,O,W,X,J){J===!0?d.vertexAttribIPointer(D,j,N,W,X):d.vertexAttribPointer(D,j,N,O,W,X)}function w(D,j,N,O){y();const W=O.attributes,X=N.getAttributes(),J=j.defaultAttributeValues;for(const ee in X){const V=X[ee];if(V.location>=0){let q=W[ee];if(q===void 0&&(ee==="instanceMatrix"&&D.instanceMatrix&&(q=D.instanceMatrix),ee==="instanceColor"&&D.instanceColor&&(q=D.instanceColor)),q!==void 0){const Y=q.normalized,Z=q.itemSize,ce=t.get(q);if(ce===void 0)continue;const B=ce.buffer,U=ce.type,K=ce.bytesPerElement,re=U===d.INT||U===d.UNSIGNED_INT||q.gpuType===u_;if(q.isInterleavedBufferAttribute){const ae=q.data,pe=ae.stride,ye=q.offset;if(ae.isInstancedInterleavedBuffer){for(let Re=0;Re<V.locationSize;Re++)g(V.location+Re,ae.meshPerAttribute);D.isInstancedMesh!==!0&&O._maxInstanceCount===void 0&&(O._maxInstanceCount=ae.meshPerAttribute*ae.count)}else for(let Re=0;Re<V.locationSize;Re++)v(V.location+Re);d.bindBuffer(d.ARRAY_BUFFER,B);for(let Re=0;Re<V.locationSize;Re++)b(V.location+Re,Z/V.locationSize,U,Y,pe*K,(ye+Z/V.locationSize*Re)*K,re)}else{if(q.isInstancedBufferAttribute){for(let ae=0;ae<V.locationSize;ae++)g(V.location+ae,q.meshPerAttribute);D.isInstancedMesh!==!0&&O._maxInstanceCount===void 0&&(O._maxInstanceCount=q.meshPerAttribute*q.count)}else for(let ae=0;ae<V.locationSize;ae++)v(V.location+ae);d.bindBuffer(d.ARRAY_BUFFER,B);for(let ae=0;ae<V.locationSize;ae++)b(V.location+ae,Z/V.locationSize,U,Y,Z*K,Z/V.locationSize*ae*K,re)}}else if(J!==void 0){const Y=J[ee];if(Y!==void 0)switch(Y.length){case 2:d.vertexAttrib2fv(V.location,Y);break;case 3:d.vertexAttrib3fv(V.location,Y);break;case 4:d.vertexAttrib4fv(V.location,Y);break;default:d.vertexAttrib1fv(V.location,Y)}}}}x()}function T(){P();for(const D in r){const j=r[D];for(const N in j){const O=j[N];for(const W in O)h(O[W].object),delete O[W];delete j[N]}delete r[D]}}function R(D){if(r[D.id]===void 0)return;const j=r[D.id];for(const N in j){const O=j[N];for(const W in O)h(O[W].object),delete O[W];delete j[N]}delete r[D.id]}function C(D){for(const j in r){const N=r[j];if(N[D.id]===void 0)continue;const O=N[D.id];for(const W in O)h(O[W].object),delete O[W];delete N[D.id]}}function P(){I(),s=!0,o!==i&&(o=i,u(o.object))}function I(){i.geometry=null,i.program=null,i.wireframe=!1}return{setup:a,reset:P,resetDefaultState:I,dispose:T,releaseStatesOfGeometry:R,releaseStatesOfProgram:C,initAttributes:y,enableAttribute:v,disableUnusedAttributes:x}}function RB(d,t,n){let r;function i(u){r=u}function o(u,h){d.drawArrays(r,u,h),n.update(h,r,1)}function s(u,h,p){p!==0&&(d.drawArraysInstanced(r,u,h,p),n.update(h,r,p))}function a(u,h,p){if(p===0)return;t.get("WEBGL_multi_draw").multiDrawArraysWEBGL(r,u,0,h,0,p);let f=0;for(let m=0;m<p;m++)f+=h[m];n.update(f,r,1)}function l(u,h,p,c){if(p===0)return;const f=t.get("WEBGL_multi_draw");if(f===null)for(let m=0;m<u.length;m++)s(u[m],h[m],c[m]);else{f.multiDrawArraysInstancedWEBGL(r,u,0,h,0,c,0,p);let m=0;for(let y=0;y<p;y++)m+=h[y]*c[y];n.update(m,r,1)}}this.setMode=i,this.render=o,this.renderInstances=s,this.renderMultiDraw=a,this.renderMultiDrawInstances=l}function PB(d,t,n,r){let i;function o(){if(i!==void 0)return i;if(t.has("EXT_texture_filter_anisotropic")===!0){const C=t.get("EXT_texture_filter_anisotropic");i=d.getParameter(C.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function s(C){return!(C!==zs&&r.convert(C)!==d.getParameter(d.IMPLEMENTATION_COLOR_READ_FORMAT))}function a(C){const P=C===Rp&&(t.has("EXT_color_buffer_half_float")||t.has("EXT_color_buffer_float"));return!(C!==hl&&r.convert(C)!==d.getParameter(d.IMPLEMENTATION_COLOR_READ_TYPE)&&C!==jo&&!P)}function l(C){if(C==="highp"){if(d.getShaderPrecisionFormat(d.VERTEX_SHADER,d.HIGH_FLOAT).precision>0&&d.getShaderPrecisionFormat(d.FRAGMENT_SHADER,d.HIGH_FLOAT).precision>0)return"highp";C="mediump"}return C==="mediump"&&d.getShaderPrecisionFormat(d.VERTEX_SHADER,d.MEDIUM_FLOAT).precision>0&&d.getShaderPrecisionFormat(d.FRAGMENT_SHADER,d.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let u=n.precision!==void 0?n.precision:"highp";const h=l(u);h!==u&&(console.warn("THREE.WebGLRenderer:",u,"not supported, using",h,"instead."),u=h);const p=n.logarithmicDepthBuffer===!0,c=n.reverseDepthBuffer===!0&&t.has("EXT_clip_control"),f=d.getParameter(d.MAX_TEXTURE_IMAGE_UNITS),m=d.getParameter(d.MAX_VERTEX_TEXTURE_IMAGE_UNITS),y=d.getParameter(d.MAX_TEXTURE_SIZE),v=d.getParameter(d.MAX_CUBE_MAP_TEXTURE_SIZE),g=d.getParameter(d.MAX_VERTEX_ATTRIBS),x=d.getParameter(d.MAX_VERTEX_UNIFORM_VECTORS),b=d.getParameter(d.MAX_VARYING_VECTORS),w=d.getParameter(d.MAX_FRAGMENT_UNIFORM_VECTORS),T=m>0,R=d.getParameter(d.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:o,getMaxPrecision:l,textureFormatReadable:s,textureTypeReadable:a,precision:u,logarithmicDepthBuffer:p,reverseDepthBuffer:c,maxTextures:f,maxVertexTextures:m,maxTextureSize:y,maxCubemapSize:v,maxAttributes:g,maxVertexUniforms:x,maxVaryings:b,maxFragmentUniforms:w,vertexTextures:T,maxSamples:R}}function IB(d){const t=this;let n=null,r=0,i=!1,o=!1;const s=new Ru,a=new Vr,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(p,c){const f=p.length!==0||c||r!==0||i;return i=c,r=p.length,f},this.beginShadows=function(){o=!0,h(null)},this.endShadows=function(){o=!1},this.setGlobalState=function(p,c){n=h(p,c,0)},this.setState=function(p,c,f){const m=p.clippingPlanes,y=p.clipIntersection,v=p.clipShadows,g=d.get(p);if(!i||m===null||m.length===0||o&&!v)o?h(null):u();else{const x=o?0:r,b=x*4;let w=g.clippingState||null;l.value=w,w=h(m,c,b,f);for(let T=0;T!==b;++T)w[T]=n[T];g.clippingState=w,this.numIntersection=y?this.numPlanes:0,this.numPlanes+=x}};function u(){l.value!==n&&(l.value=n,l.needsUpdate=r>0),t.numPlanes=r,t.numIntersection=0}function h(p,c,f,m){const y=p!==null?p.length:0;let v=null;if(y!==0){if(v=l.value,m!==!0||v===null){const g=f+y*4,x=c.matrixWorldInverse;a.getNormalMatrix(x),(v===null||v.length<g)&&(v=new Float32Array(g));for(let b=0,w=f;b!==y;++b,w+=4)s.copy(p[b]).applyMatrix4(x,a),s.normal.toArray(v,w),v[w+3]=s.constant}l.value=v,l.needsUpdate=!0}return t.numPlanes=y,t.numIntersection=0,v}}function jB(d){let t=new WeakMap;function n(s,a){return a===mg?s.mapping=Hu:a===gg&&(s.mapping=Gc),s}function r(s){if(s&&s.isTexture){const a=s.mapping;if(a===mg||a===gg)if(t.has(s)){const l=t.get(s).texture;return n(l,s.mapping)}else{const l=s.image;if(l&&l.height>0){const u=new VE(l.height);return u.fromEquirectangularTexture(d,s),t.set(s,u),s.addEventListener("dispose",i),n(u.texture,s.mapping)}else return null}}return s}function i(s){const a=s.target;a.removeEventListener("dispose",i);const l=t.get(a);l!==void 0&&(t.delete(a),l.dispose())}function o(){t=new WeakMap}return{get:r,dispose:o}}const ep=4,e2=[.125,.215,.35,.446,.526,.582],ed=20,rx=new Nu,t2=new nr;let nx=null,ix=0,sx=0,ox=!1;const Kf=(1+Math.sqrt(5))/2,Uh=1/Kf,r2=[new Oe(-Kf,Uh,0),new Oe(Kf,Uh,0),new Oe(-Uh,0,Kf),new Oe(Uh,0,Kf),new Oe(0,Kf,-Uh),new Oe(0,Kf,Uh),new Oe(-1,1,-1),new Oe(1,1,-1),new Oe(-1,1,1),new Oe(1,1,1)];class sb{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(t,n=0,r=.1,i=100){nx=this._renderer.getRenderTarget(),ix=this._renderer.getActiveCubeFace(),sx=this._renderer.getActiveMipmapLevel(),ox=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const o=this._allocateTargets();return o.depthBuffer=!0,this._sceneToCubeUV(t,r,i,o),n>0&&this._blur(o,0,0,n),this._applyPMREM(o),this._cleanup(o),o}fromEquirectangular(t,n=null){return this._fromTexture(t,n)}fromCubemap(t,n=null){return this._fromTexture(t,n)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=s2(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=i2(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(t){this._lodMax=Math.floor(Math.log2(t)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let t=0;t<this._lodPlanes.length;t++)this._lodPlanes[t].dispose()}_cleanup(t){this._renderer.setRenderTarget(nx,ix,sx),this._renderer.xr.enabled=ox,t.scissorTest=!1,E0(t,0,0,t.width,t.height)}_fromTexture(t,n){t.mapping===Hu||t.mapping===Gc?this._setSize(t.image.length===0?16:t.image[0].width||t.image[0].image.width):this._setSize(t.image.width/4),nx=this._renderer.getRenderTarget(),ix=this._renderer.getActiveCubeFace(),sx=this._renderer.getActiveMipmapLevel(),ox=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const r=n||this._allocateTargets();return this._textureToCubeUV(t,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const t=3*Math.max(this._cubeSize,112),n=4*this._cubeSize,r={magFilter:Ei,minFilter:Ei,generateMipmaps:!1,type:Rp,format:zs,colorSpace:Ad,depthBuffer:!1},i=n2(t,n,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==t||this._pingPongRenderTarget.height!==n){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=n2(t,n,r);const{_lodMax:o}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=LB(o)),this._blurMaterial=DB(o,t,n)}return i}_compileMaterial(t){const n=new Ti(this._lodPlanes[0],t);this._renderer.compile(n,rx)}_sceneToCubeUV(t,n,r,i){const a=new yi(90,1,n,r),l=[1,-1,1,1,1,1],u=[1,1,1,-1,-1,-1],h=this._renderer,p=h.autoClear,c=h.toneMapping;h.getClearColor(t2),h.toneMapping=kl,h.autoClear=!1;const f=new sa({name:"PMREM.Background",side:mo,depthWrite:!1,depthTest:!1}),m=new Ti(new kd,f);let y=!1;const v=t.background;v?v.isColor&&(f.color.copy(v),t.background=null,y=!0):(f.color.copy(t2),y=!0);for(let g=0;g<6;g++){const x=g%3;x===0?(a.up.set(0,l[g],0),a.lookAt(u[g],0,0)):x===1?(a.up.set(0,0,l[g]),a.lookAt(0,u[g],0)):(a.up.set(0,l[g],0),a.lookAt(0,0,u[g]));const b=this._cubeSize;E0(i,x*b,g>2?b:0,b,b),h.setRenderTarget(i),y&&h.render(m,a),h.render(t,a)}m.geometry.dispose(),m.material.dispose(),h.toneMapping=c,h.autoClear=p,t.background=v}_textureToCubeUV(t,n){const r=this._renderer,i=t.mapping===Hu||t.mapping===Gc;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=s2()),this._cubemapMaterial.uniforms.flipEnvMap.value=t.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=i2());const o=i?this._cubemapMaterial:this._equirectMaterial,s=new Ti(this._lodPlanes[0],o),a=o.uniforms;a.envMap.value=t;const l=this._cubeSize;E0(n,0,0,3*l,2*l),r.setRenderTarget(n),r.render(s,rx)}_applyPMREM(t){const n=this._renderer,r=n.autoClear;n.autoClear=!1;const i=this._lodPlanes.length;for(let o=1;o<i;o++){const s=Math.sqrt(this._sigmas[o]*this._sigmas[o]-this._sigmas[o-1]*this._sigmas[o-1]),a=r2[(i-o-1)%r2.length];this._blur(t,o-1,o,s,a)}n.autoClear=r}_blur(t,n,r,i,o){const s=this._pingPongRenderTarget;this._halfBlur(t,s,n,r,i,"latitudinal",o),this._halfBlur(s,t,r,r,i,"longitudinal",o)}_halfBlur(t,n,r,i,o,s,a){const l=this._renderer,u=this._blurMaterial;s!=="latitudinal"&&s!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const h=3,p=new Ti(this._lodPlanes[i],u),c=u.uniforms,f=this._sizeLods[r]-1,m=isFinite(o)?Math.PI/(2*f):2*Math.PI/(2*ed-1),y=o/m,v=isFinite(o)?1+Math.floor(h*y):ed;v>ed&&console.warn(`sigmaRadians, ${o}, is too large and will clip, as it requested ${v} samples when the maximum is set to ${ed}`);const g=[];let x=0;for(let C=0;C<ed;++C){const P=C/y,I=Math.exp(-P*P/2);g.push(I),C===0?x+=I:C<v&&(x+=2*I)}for(let C=0;C<g.length;C++)g[C]=g[C]/x;c.envMap.value=t.texture,c.samples.value=v,c.weights.value=g,c.latitudinal.value=s==="latitudinal",a&&(c.poleAxis.value=a);const{_lodMax:b}=this;c.dTheta.value=m,c.mipInt.value=b-r;const w=this._sizeLods[i],T=3*w*(i>b-ep?i-b+ep:0),R=4*(this._cubeSize-w);E0(n,T,R,3*w,2*w),l.setRenderTarget(n),l.render(p,rx)}}function LB(d){const t=[],n=[],r=[];let i=d;const o=d-ep+1+e2.length;for(let s=0;s<o;s++){const a=Math.pow(2,i);n.push(a);let l=1/a;s>d-ep?l=e2[s-d+ep-1]:s===0&&(l=0),r.push(l);const u=1/(a-2),h=-u,p=1+u,c=[h,h,p,h,p,p,h,h,p,p,h,p],f=6,m=6,y=3,v=2,g=1,x=new Float32Array(y*m*f),b=new Float32Array(v*m*f),w=new Float32Array(g*m*f);for(let R=0;R<f;R++){const C=R%3*2/3-1,P=R>2?0:-1,I=[C,P,0,C+2/3,P,0,C+2/3,P+1,0,C,P,0,C+2/3,P+1,0,C,P+1,0];x.set(I,y*m*R),b.set(c,v*m*R);const D=[R,R,R,R,R,R];w.set(D,g*m*R)}const T=new Wr;T.setAttribute("position",new wn(x,y)),T.setAttribute("uv",new wn(b,v)),T.setAttribute("faceIndex",new wn(w,g)),t.push(T),i>ep&&i--}return{lodPlanes:t,sizeLods:n,sigmas:r}}function n2(d,t,n){const r=new zl(d,t,n);return r.texture.mapping=Cp,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function E0(d,t,n,r,i){d.viewport.set(t,n,r,i),d.scissor.set(t,n,r,i)}function DB(d,t,n){const r=new Float32Array(ed),i=new Oe(0,1,0);return new pl({name:"SphericalGaussianBlur",defines:{n:ed,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${d}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:Rw(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Ou,depthTest:!1,depthWrite:!1})}function i2(){return new pl({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:Rw(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Ou,depthTest:!1,depthWrite:!1})}function s2(){return new pl({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:Rw(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Ou,depthTest:!1,depthWrite:!1})}function Rw(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function BB(d){let t=new WeakMap,n=null;function r(a){if(a&&a.isTexture){const l=a.mapping,u=l===mg||l===gg,h=l===Hu||l===Gc;if(u||h){let p=t.get(a);const c=p!==void 0?p.texture.pmremVersion:0;if(a.isRenderTargetTexture&&a.pmremVersion!==c)return n===null&&(n=new sb(d)),p=u?n.fromEquirectangular(a,p):n.fromCubemap(a,p),p.texture.pmremVersion=a.pmremVersion,t.set(a,p),p.texture;if(p!==void 0)return p.texture;{const f=a.image;return u&&f&&f.height>0||h&&f&&i(f)?(n===null&&(n=new sb(d)),p=u?n.fromEquirectangular(a):n.fromCubemap(a),p.texture.pmremVersion=a.pmremVersion,t.set(a,p),a.addEventListener("dispose",o),p.texture):null}}}return a}function i(a){let l=0;const u=6;for(let h=0;h<u;h++)a[h]!==void 0&&l++;return l===u}function o(a){const l=a.target;l.removeEventListener("dispose",o);const u=t.get(l);u!==void 0&&(t.delete(l),u.dispose())}function s(){t=new WeakMap,n!==null&&(n.dispose(),n=null)}return{get:r,dispose:s}}function kB(d){const t={};function n(r){if(t[r]!==void 0)return t[r];let i;switch(r){case"WEBGL_depth_texture":i=d.getExtension("WEBGL_depth_texture")||d.getExtension("MOZ_WEBGL_depth_texture")||d.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=d.getExtension("EXT_texture_filter_anisotropic")||d.getExtension("MOZ_EXT_texture_filter_anisotropic")||d.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=d.getExtension("WEBGL_compressed_texture_s3tc")||d.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||d.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=d.getExtension("WEBGL_compressed_texture_pvrtc")||d.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=d.getExtension(r)}return t[r]=i,i}return{has:function(r){return n(r)!==null},init:function(){n("EXT_color_buffer_float"),n("WEBGL_clip_cull_distance"),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture"),n("WEBGL_render_shared_exponent")},get:function(r){const i=n(r);return i===null&&Xh("THREE.WebGLRenderer: "+r+" extension not supported."),i}}}function OB(d,t,n,r){const i={},o=new WeakMap;function s(p){const c=p.target;c.index!==null&&t.remove(c.index);for(const m in c.attributes)t.remove(c.attributes[m]);c.removeEventListener("dispose",s),delete i[c.id];const f=o.get(c);f&&(t.remove(f),o.delete(c)),r.releaseStatesOfGeometry(c),c.isInstancedBufferGeometry===!0&&delete c._maxInstanceCount,n.memory.geometries--}function a(p,c){return i[c.id]===!0||(c.addEventListener("dispose",s),i[c.id]=!0,n.memory.geometries++),c}function l(p){const c=p.attributes;for(const f in c)t.update(c[f],d.ARRAY_BUFFER)}function u(p){const c=[],f=p.index,m=p.attributes.position;let y=0;if(f!==null){const x=f.array;y=f.version;for(let b=0,w=x.length;b<w;b+=3){const T=x[b+0],R=x[b+1],C=x[b+2];c.push(T,R,R,C,C,T)}}else if(m!==void 0){const x=m.array;y=m.version;for(let b=0,w=x.length/3-1;b<w;b+=3){const T=b+0,R=b+1,C=b+2;c.push(T,R,R,C,C,T)}}else return;const v=new(OE(c)?$b:Zb)(c,1);v.version=y;const g=o.get(p);g&&t.remove(g),o.set(p,v)}function h(p){const c=o.get(p);if(c){const f=p.index;f!==null&&c.version<f.version&&u(p)}else u(p);return o.get(p)}return{get:a,update:l,getWireframeAttribute:h}}function FB(d,t,n){let r;function i(c){r=c}let o,s;function a(c){o=c.type,s=c.bytesPerElement}function l(c,f){d.drawElements(r,f,o,c*s),n.update(f,r,1)}function u(c,f,m){m!==0&&(d.drawElementsInstanced(r,f,o,c*s,m),n.update(f,r,m))}function h(c,f,m){if(m===0)return;t.get("WEBGL_multi_draw").multiDrawElementsWEBGL(r,f,0,o,c,0,m);let v=0;for(let g=0;g<m;g++)v+=f[g];n.update(v,r,1)}function p(c,f,m,y){if(m===0)return;const v=t.get("WEBGL_multi_draw");if(v===null)for(let g=0;g<c.length;g++)u(c[g]/s,f[g],y[g]);else{v.multiDrawElementsInstancedWEBGL(r,f,0,o,c,0,y,0,m);let g=0;for(let x=0;x<m;x++)g+=f[x]*y[x];n.update(g,r,1)}}this.setMode=i,this.setIndex=a,this.render=l,this.renderInstances=u,this.renderMultiDraw=h,this.renderMultiDrawInstances=p}function NB(d){const t={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function r(o,s,a){switch(n.calls++,s){case d.TRIANGLES:n.triangles+=a*(o/3);break;case d.LINES:n.lines+=a*(o/2);break;case d.LINE_STRIP:n.lines+=a*(o-1);break;case d.LINE_LOOP:n.lines+=a*o;break;case d.POINTS:n.points+=a*o;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",s);break}}function i(){n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:t,render:n,programs:null,autoReset:!0,reset:i,update:r}}function UB(d,t,n){const r=new WeakMap,i=new bn;function o(s,a,l){const u=s.morphTargetInfluences,h=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,p=h!==void 0?h.length:0;let c=r.get(a);if(c===void 0||c.count!==p){let D=function(){P.dispose(),r.delete(a),a.removeEventListener("dispose",D)};var f=D;c!==void 0&&c.texture.dispose();const m=a.morphAttributes.position!==void 0,y=a.morphAttributes.normal!==void 0,v=a.morphAttributes.color!==void 0,g=a.morphAttributes.position||[],x=a.morphAttributes.normal||[],b=a.morphAttributes.color||[];let w=0;m===!0&&(w=1),y===!0&&(w=2),v===!0&&(w=3);let T=a.attributes.position.count*w,R=1;T>t.maxTextureSize&&(R=Math.ceil(T/t.maxTextureSize),T=t.maxTextureSize);const C=new Float32Array(T*R*4*p),P=new Ng(C,T,R,p);P.type=jo,P.needsUpdate=!0;const I=w*4;for(let j=0;j<p;j++){const N=g[j],O=x[j],W=b[j],X=T*R*4*j;for(let J=0;J<N.count;J++){const ee=J*I;m===!0&&(i.fromBufferAttribute(N,J),C[X+ee+0]=i.x,C[X+ee+1]=i.y,C[X+ee+2]=i.z,C[X+ee+3]=0),y===!0&&(i.fromBufferAttribute(O,J),C[X+ee+4]=i.x,C[X+ee+5]=i.y,C[X+ee+6]=i.z,C[X+ee+7]=0),v===!0&&(i.fromBufferAttribute(W,J),C[X+ee+8]=i.x,C[X+ee+9]=i.y,C[X+ee+10]=i.z,C[X+ee+11]=W.itemSize===4?i.w:1)}}c={count:p,texture:P,size:new Ct(T,R)},r.set(a,c),a.addEventListener("dispose",D)}if(s.isInstancedMesh===!0&&s.morphTexture!==null)l.getUniforms().setValue(d,"morphTexture",s.morphTexture,n);else{let m=0;for(let v=0;v<u.length;v++)m+=u[v];const y=a.morphTargetsRelative?1:1-m;l.getUniforms().setValue(d,"morphTargetBaseInfluence",y),l.getUniforms().setValue(d,"morphTargetInfluences",u)}l.getUniforms().setValue(d,"morphTargetsTexture",c.texture,n),l.getUniforms().setValue(d,"morphTargetsTextureSize",c.size)}return{update:o}}function GB(d,t,n,r){let i=new WeakMap;function o(l){const u=r.render.frame,h=l.geometry,p=t.get(l,h);if(i.get(p)!==u&&(t.update(p),i.set(p,u)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),i.get(l)!==u&&(n.update(l.instanceMatrix,d.ARRAY_BUFFER),l.instanceColor!==null&&n.update(l.instanceColor,d.ARRAY_BUFFER),i.set(l,u))),l.isSkinnedMesh){const c=l.skeleton;i.get(c)!==u&&(c.update(),i.set(c,u))}return p}function s(){i=new WeakMap}function a(l){const u=l.target;u.removeEventListener("dispose",a),n.remove(u.instanceMatrix),u.instanceColor!==null&&n.remove(u.instanceColor)}return{update:o,dispose:s}}const BT=new ei,o2=new ow(1,1),kT=new Ng,OT=new y_,FT=new Gg,a2=[],l2=[],u2=new Float32Array(16),c2=new Float32Array(9),f2=new Float32Array(4);function Lp(d,t,n){const r=d[0];if(r<=0||r>0)return d;const i=t*n;let o=a2[i];if(o===void 0&&(o=new Float32Array(i),a2[i]=o),t!==0){r.toArray(o,0);for(let s=1,a=0;s!==t;++s)a+=n,d[s].toArray(o,a)}return o}function Zi(d,t){if(d.length!==t.length)return!1;for(let n=0,r=d.length;n<r;n++)if(d[n]!==t[n])return!1;return!0}function $i(d,t){for(let n=0,r=t.length;n<r;n++)d[n]=t[n]}function F_(d,t){let n=l2[t];n===void 0&&(n=new Int32Array(t),l2[t]=n);for(let r=0;r!==t;++r)n[r]=d.allocateTextureUnit();return n}function HB(d,t){const n=this.cache;n[0]!==t&&(d.uniform1f(this.addr,t),n[0]=t)}function zB(d,t){const n=this.cache;if(t.x!==void 0)(n[0]!==t.x||n[1]!==t.y)&&(d.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Zi(n,t))return;d.uniform2fv(this.addr,t),$i(n,t)}}function VB(d,t){const n=this.cache;if(t.x!==void 0)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z)&&(d.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(t.r!==void 0)(n[0]!==t.r||n[1]!==t.g||n[2]!==t.b)&&(d.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(Zi(n,t))return;d.uniform3fv(this.addr,t),$i(n,t)}}function WB(d,t){const n=this.cache;if(t.x!==void 0)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z||n[3]!==t.w)&&(d.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Zi(n,t))return;d.uniform4fv(this.addr,t),$i(n,t)}}function XB(d,t){const n=this.cache,r=t.elements;if(r===void 0){if(Zi(n,t))return;d.uniformMatrix2fv(this.addr,!1,t),$i(n,t)}else{if(Zi(n,r))return;f2.set(r),d.uniformMatrix2fv(this.addr,!1,f2),$i(n,r)}}function YB(d,t){const n=this.cache,r=t.elements;if(r===void 0){if(Zi(n,t))return;d.uniformMatrix3fv(this.addr,!1,t),$i(n,t)}else{if(Zi(n,r))return;c2.set(r),d.uniformMatrix3fv(this.addr,!1,c2),$i(n,r)}}function qB(d,t){const n=this.cache,r=t.elements;if(r===void 0){if(Zi(n,t))return;d.uniformMatrix4fv(this.addr,!1,t),$i(n,t)}else{if(Zi(n,r))return;u2.set(r),d.uniformMatrix4fv(this.addr,!1,u2),$i(n,r)}}function JB(d,t){const n=this.cache;n[0]!==t&&(d.uniform1i(this.addr,t),n[0]=t)}function KB(d,t){const n=this.cache;if(t.x!==void 0)(n[0]!==t.x||n[1]!==t.y)&&(d.uniform2i(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Zi(n,t))return;d.uniform2iv(this.addr,t),$i(n,t)}}function QB(d,t){const n=this.cache;if(t.x!==void 0)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z)&&(d.uniform3i(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(Zi(n,t))return;d.uniform3iv(this.addr,t),$i(n,t)}}function ZB(d,t){const n=this.cache;if(t.x!==void 0)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z||n[3]!==t.w)&&(d.uniform4i(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Zi(n,t))return;d.uniform4iv(this.addr,t),$i(n,t)}}function $B(d,t){const n=this.cache;n[0]!==t&&(d.uniform1ui(this.addr,t),n[0]=t)}function ek(d,t){const n=this.cache;if(t.x!==void 0)(n[0]!==t.x||n[1]!==t.y)&&(d.uniform2ui(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Zi(n,t))return;d.uniform2uiv(this.addr,t),$i(n,t)}}function tk(d,t){const n=this.cache;if(t.x!==void 0)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z)&&(d.uniform3ui(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(Zi(n,t))return;d.uniform3uiv(this.addr,t),$i(n,t)}}function rk(d,t){const n=this.cache;if(t.x!==void 0)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z||n[3]!==t.w)&&(d.uniform4ui(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Zi(n,t))return;d.uniform4uiv(this.addr,t),$i(n,t)}}function nk(d,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(d.uniform1i(this.addr,i),r[0]=i);let o;this.type===d.SAMPLER_2D_SHADOW?(o2.compareFunction=Kb,o=o2):o=BT,n.setTexture2D(t||o,i)}function ik(d,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(d.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(t||OT,i)}function sk(d,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(d.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(t||FT,i)}function ok(d,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(d.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(t||kT,i)}function ak(d){switch(d){case 5126:return HB;case 35664:return zB;case 35665:return VB;case 35666:return WB;case 35674:return XB;case 35675:return YB;case 35676:return qB;case 5124:case 35670:return JB;case 35667:case 35671:return KB;case 35668:case 35672:return QB;case 35669:case 35673:return ZB;case 5125:return $B;case 36294:return ek;case 36295:return tk;case 36296:return rk;case 35678:case 36198:case 36298:case 36306:case 35682:return nk;case 35679:case 36299:case 36307:return ik;case 35680:case 36300:case 36308:case 36293:return sk;case 36289:case 36303:case 36311:case 36292:return ok}}function lk(d,t){d.uniform1fv(this.addr,t)}function uk(d,t){const n=Lp(t,this.size,2);d.uniform2fv(this.addr,n)}function ck(d,t){const n=Lp(t,this.size,3);d.uniform3fv(this.addr,n)}function fk(d,t){const n=Lp(t,this.size,4);d.uniform4fv(this.addr,n)}function dk(d,t){const n=Lp(t,this.size,4);d.uniformMatrix2fv(this.addr,!1,n)}function hk(d,t){const n=Lp(t,this.size,9);d.uniformMatrix3fv(this.addr,!1,n)}function pk(d,t){const n=Lp(t,this.size,16);d.uniformMatrix4fv(this.addr,!1,n)}function mk(d,t){d.uniform1iv(this.addr,t)}function gk(d,t){d.uniform2iv(this.addr,t)}function yk(d,t){d.uniform3iv(this.addr,t)}function vk(d,t){d.uniform4iv(this.addr,t)}function _k(d,t){d.uniform1uiv(this.addr,t)}function xk(d,t){d.uniform2uiv(this.addr,t)}function bk(d,t){d.uniform3uiv(this.addr,t)}function wk(d,t){d.uniform4uiv(this.addr,t)}function Sk(d,t,n){const r=this.cache,i=t.length,o=F_(n,i);Zi(r,o)||(d.uniform1iv(this.addr,o),$i(r,o));for(let s=0;s!==i;++s)n.setTexture2D(t[s]||BT,o[s])}function Mk(d,t,n){const r=this.cache,i=t.length,o=F_(n,i);Zi(r,o)||(d.uniform1iv(this.addr,o),$i(r,o));for(let s=0;s!==i;++s)n.setTexture3D(t[s]||OT,o[s])}function Ak(d,t,n){const r=this.cache,i=t.length,o=F_(n,i);Zi(r,o)||(d.uniform1iv(this.addr,o),$i(r,o));for(let s=0;s!==i;++s)n.setTextureCube(t[s]||FT,o[s])}function Ek(d,t,n){const r=this.cache,i=t.length,o=F_(n,i);Zi(r,o)||(d.uniform1iv(this.addr,o),$i(r,o));for(let s=0;s!==i;++s)n.setTexture2DArray(t[s]||kT,o[s])}function Tk(d){switch(d){case 5126:return lk;case 35664:return uk;case 35665:return ck;case 35666:return fk;case 35674:return dk;case 35675:return hk;case 35676:return pk;case 5124:case 35670:return mk;case 35667:case 35671:return gk;case 35668:case 35672:return yk;case 35669:case 35673:return vk;case 5125:return _k;case 36294:return xk;case 36295:return bk;case 36296:return wk;case 35678:case 36198:case 36298:case 36306:case 35682:return Sk;case 35679:case 36299:case 36307:return Mk;case 35680:case 36300:case 36308:case 36293:return Ak;case 36289:case 36303:case 36311:case 36292:return Ek}}class Ck{constructor(t,n,r){this.id=t,this.addr=r,this.cache=[],this.type=n.type,this.setValue=ak(n.type)}}class Rk{constructor(t,n,r){this.id=t,this.addr=r,this.cache=[],this.type=n.type,this.size=n.size,this.setValue=Tk(n.type)}}class Pk{constructor(t){this.id=t,this.seq=[],this.map={}}setValue(t,n,r){const i=this.seq;for(let o=0,s=i.length;o!==s;++o){const a=i[o];a.setValue(t,n[a.id],r)}}}const ax=/(\w+)(\])?(\[|\.)?/g;function d2(d,t){d.seq.push(t),d.map[t.id]=t}function Ik(d,t,n){const r=d.name,i=r.length;for(ax.lastIndex=0;;){const o=ax.exec(r),s=ax.lastIndex;let a=o[1];const l=o[2]==="]",u=o[3];if(l&&(a=a|0),u===void 0||u==="["&&s+2===i){d2(n,u===void 0?new Ck(a,d,t):new Rk(a,d,t));break}else{let p=n.map[a];p===void 0&&(p=new Pk(a),d2(n,p)),n=p}}}class J0{constructor(t,n){this.seq=[],this.map={};const r=t.getProgramParameter(n,t.ACTIVE_UNIFORMS);for(let i=0;i<r;++i){const o=t.getActiveUniform(n,i),s=t.getUniformLocation(n,o.name);Ik(o,s,this)}}setValue(t,n,r,i){const o=this.map[n];o!==void 0&&o.setValue(t,r,i)}setOptional(t,n,r){const i=n[r];i!==void 0&&this.setValue(t,r,i)}static upload(t,n,r,i){for(let o=0,s=n.length;o!==s;++o){const a=n[o],l=r[a.id];l.needsUpdate!==!1&&a.setValue(t,l.value,i)}}static seqWithValue(t,n){const r=[];for(let i=0,o=t.length;i!==o;++i){const s=t[i];s.id in n&&r.push(s)}return r}}function h2(d,t,n){const r=d.createShader(t);return d.shaderSource(r,n),d.compileShader(r),r}const jk=37297;let Lk=0;function Dk(d,t){const n=d.split(`
`),r=[],i=Math.max(t-6,0),o=Math.min(t+6,n.length);for(let s=i;s<o;s++){const a=s+1;r.push(`${a===t?">":" "} ${a}: ${n[s]}`)}return r.join(`
`)}const p2=new Vr;function Bk(d){vn._getMatrix(p2,vn.workingColorSpace,d);const t=`mat3( ${p2.elements.map(n=>n.toFixed(4))} )`;switch(vn.getTransfer(d)){case vg:return[t,"LinearTransferOETF"];case Dn:return[t,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",d),[t,"LinearTransferOETF"]}}function m2(d,t,n){const r=d.getShaderParameter(t,d.COMPILE_STATUS),i=d.getShaderInfoLog(t).trim();if(r&&i==="")return"";const o=/ERROR: 0:(\d+)/.exec(i);if(o){const s=parseInt(o[1]);return n.toUpperCase()+`

`+i+`

`+Dk(d.getShaderSource(t),s)}else return i}function kk(d,t){const n=Bk(t);return[`vec4 ${d}( vec4 value ) {`,`	return ${n[1]}( vec4( value.rgb * ${n[0]}, value.a ) );`,"}"].join(`
`)}function Ok(d,t){let n;switch(t){case mE:n="Linear";break;case gE:n="Reinhard";break;case yE:n="Cineon";break;case Fb:n="ACESFilmic";break;case _E:n="AgX";break;case xE:n="Neutral";break;case vE:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+d+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}const T0=new Oe;function Fk(){vn.getLuminanceCoefficients(T0);const d=T0.x.toFixed(4),t=T0.y.toFixed(4),n=T0.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${d}, ${t}, ${n} );`,"	return dot( weights, rgb );","}"].join(`
`)}function Nk(d){return[d.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",d.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(Nm).join(`
`)}function Uk(d){const t=[];for(const n in d){const r=d[n];r!==!1&&t.push("#define "+n+" "+r)}return t.join(`
`)}function Gk(d,t){const n={},r=d.getProgramParameter(t,d.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const o=d.getActiveAttrib(t,i),s=o.name;let a=1;o.type===d.FLOAT_MAT2&&(a=2),o.type===d.FLOAT_MAT3&&(a=3),o.type===d.FLOAT_MAT4&&(a=4),n[s]={type:o.type,location:d.getAttribLocation(t,s),locationSize:a}}return n}function Nm(d){return d!==""}function g2(d,t){const n=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return d.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function y2(d,t){return d.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const Hk=/^[ \t]*#include +<([\w\d./]+)>/gm;function ob(d){return d.replace(Hk,Vk)}const zk=new Map;function Vk(d,t){let n=Qr[t];if(n===void 0){const r=zk.get(t);if(r!==void 0)n=Qr[r],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',t,r);else throw new Error("Can not resolve #include <"+t+">")}return ob(n)}const Wk=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function v2(d){return d.replace(Wk,Xk)}function Xk(d,t,n,r){let i="";for(let o=parseInt(t);o<parseInt(n);o++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return i}function _2(d){let t=`precision ${d.precision} float;
	precision ${d.precision} int;
	precision ${d.precision} sampler2D;
	precision ${d.precision} samplerCube;
	precision ${d.precision} sampler3D;
	precision ${d.precision} sampler2DArray;
	precision ${d.precision} sampler2DShadow;
	precision ${d.precision} samplerCubeShadow;
	precision ${d.precision} sampler2DArrayShadow;
	precision ${d.precision} isampler2D;
	precision ${d.precision} isampler3D;
	precision ${d.precision} isamplerCube;
	precision ${d.precision} isampler2DArray;
	precision ${d.precision} usampler2D;
	precision ${d.precision} usampler3D;
	precision ${d.precision} usamplerCube;
	precision ${d.precision} usampler2DArray;
	`;return d.precision==="highp"?t+=`
#define HIGH_PRECISION`:d.precision==="mediump"?t+=`
#define MEDIUM_PRECISION`:d.precision==="lowp"&&(t+=`
#define LOW_PRECISION`),t}function Yk(d){let t="SHADOWMAP_TYPE_BASIC";return d.shadowMapType===o_?t="SHADOWMAP_TYPE_PCF":d.shadowMapType===qm?t="SHADOWMAP_TYPE_PCF_SOFT":d.shadowMapType===ul&&(t="SHADOWMAP_TYPE_VSM"),t}function qk(d){let t="ENVMAP_TYPE_CUBE";if(d.envMap)switch(d.envMapMode){case Hu:case Gc:t="ENVMAP_TYPE_CUBE";break;case Cp:t="ENVMAP_TYPE_CUBE_UV";break}return t}function Jk(d){let t="ENVMAP_MODE_REFLECTION";if(d.envMap)switch(d.envMapMode){case Gc:t="ENVMAP_MODE_REFRACTION";break}return t}function Kk(d){let t="ENVMAP_BLENDING_NONE";if(d.envMap)switch(d.combine){case Og:t="ENVMAP_BLENDING_MULTIPLY";break;case hE:t="ENVMAP_BLENDING_MIX";break;case pE:t="ENVMAP_BLENDING_ADD";break}return t}function Qk(d){const t=d.envMapCubeUVHeight;if(t===null)return null;const n=Math.log2(t)-2,r=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,n),7*16)),texelHeight:r,maxMip:n}}function Zk(d,t,n,r){const i=d.getContext(),o=n.defines;let s=n.vertexShader,a=n.fragmentShader;const l=Yk(n),u=qk(n),h=Jk(n),p=Kk(n),c=Qk(n),f=Nk(n),m=Uk(o),y=i.createProgram();let v,g,x=n.glslVersion?"#version "+n.glslVersion+`
`:"";n.isRawShaderMaterial?(v=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,m].filter(Nm).join(`
`),v.length>0&&(v+=`
`),g=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,m].filter(Nm).join(`
`),g.length>0&&(g+=`
`)):(v=[_2(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,m,n.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",n.batching?"#define USE_BATCHING":"",n.batchingColor?"#define USE_BATCHING_COLOR":"",n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.instancingMorph?"#define USE_INSTANCING_MORPH":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+h:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&n.flatShading===!1?"#define USE_MORPHNORMALS":"",n.morphColors?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Nm).join(`
`),g=[_2(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,m,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.envMap?"#define "+h:"",n.envMap?"#define "+p:"",c?"#define CUBEUV_TEXEL_WIDTH "+c.texelWidth:"",c?"#define CUBEUV_TEXEL_HEIGHT "+c.texelHeight:"",c?"#define CUBEUV_MAX_MIP "+c.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.dispersion?"#define USE_DISPERSION":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor||n.batchingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==kl?"#define TONE_MAPPING":"",n.toneMapping!==kl?Qr.tonemapping_pars_fragment:"",n.toneMapping!==kl?Ok("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",Qr.colorspace_pars_fragment,kk("linearToOutputTexel",n.outputColorSpace),Fk(),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"",`
`].filter(Nm).join(`
`)),s=ob(s),s=g2(s,n),s=y2(s,n),a=ob(a),a=g2(a,n),a=y2(a,n),s=v2(s),a=v2(a),n.isRawShaderMaterial!==!0&&(x=`#version 300 es
`,v=[f,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+v,g=["#define varying in",n.glslVersion===Qx?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===Qx?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+g);const b=x+v+s,w=x+g+a,T=h2(i,i.VERTEX_SHADER,b),R=h2(i,i.FRAGMENT_SHADER,w);i.attachShader(y,T),i.attachShader(y,R),n.index0AttributeName!==void 0?i.bindAttribLocation(y,0,n.index0AttributeName):n.morphTargets===!0&&i.bindAttribLocation(y,0,"position"),i.linkProgram(y);function C(j){if(d.debug.checkShaderErrors){const N=i.getProgramInfoLog(y).trim(),O=i.getShaderInfoLog(T).trim(),W=i.getShaderInfoLog(R).trim();let X=!0,J=!0;if(i.getProgramParameter(y,i.LINK_STATUS)===!1)if(X=!1,typeof d.debug.onShaderError=="function")d.debug.onShaderError(i,y,T,R);else{const ee=m2(i,T,"vertex"),V=m2(i,R,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(y,i.VALIDATE_STATUS)+`

Material Name: `+j.name+`
Material Type: `+j.type+`

Program Info Log: `+N+`
`+ee+`
`+V)}else N!==""?console.warn("THREE.WebGLProgram: Program Info Log:",N):(O===""||W==="")&&(J=!1);J&&(j.diagnostics={runnable:X,programLog:N,vertexShader:{log:O,prefix:v},fragmentShader:{log:W,prefix:g}})}i.deleteShader(T),i.deleteShader(R),P=new J0(i,y),I=Gk(i,y)}let P;this.getUniforms=function(){return P===void 0&&C(this),P};let I;this.getAttributes=function(){return I===void 0&&C(this),I};let D=n.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return D===!1&&(D=i.getProgramParameter(y,jk)),D},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(y),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=Lk++,this.cacheKey=t,this.usedTimes=1,this.program=y,this.vertexShader=T,this.fragmentShader=R,this}let $k=0;class eO{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(t){const n=t.vertexShader,r=t.fragmentShader,i=this._getShaderStage(n),o=this._getShaderStage(r),s=this._getShaderCacheForMaterial(t);return s.has(i)===!1&&(s.add(i),i.usedTimes++),s.has(o)===!1&&(s.add(o),o.usedTimes++),this}remove(t){const n=this.materialCache.get(t);for(const r of n)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(t),this}getVertexShaderID(t){return this._getShaderStage(t.vertexShader).id}getFragmentShaderID(t){return this._getShaderStage(t.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(t){const n=this.materialCache;let r=n.get(t);return r===void 0&&(r=new Set,n.set(t,r)),r}_getShaderStage(t){const n=this.shaderCache;let r=n.get(t);return r===void 0&&(r=new tO(t),n.set(t,r)),r}}class tO{constructor(t){this.id=$k++,this.code=t,this.usedTimes=0}}function rO(d,t,n,r,i,o,s){const a=new hd,l=new eO,u=new Set,h=[],p=i.logarithmicDepthBuffer,c=i.vertexTextures;let f=i.precision;const m={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function y(I){return u.add(I),I===0?"uv":`uv${I}`}function v(I,D,j,N,O){const W=N.fog,X=O.geometry,J=I.isMeshStandardMaterial?N.environment:null,ee=(I.isMeshStandardMaterial?n:t).get(I.envMap||J),V=ee&&ee.mapping===Cp?ee.image.height:null,q=m[I.type];I.precision!==null&&(f=i.getMaxPrecision(I.precision),f!==I.precision&&console.warn("THREE.WebGLProgram.getParameters:",I.precision,"not supported, using",f,"instead."));const Y=X.morphAttributes.position||X.morphAttributes.normal||X.morphAttributes.color,Z=Y!==void 0?Y.length:0;let ce=0;X.morphAttributes.position!==void 0&&(ce=1),X.morphAttributes.normal!==void 0&&(ce=2),X.morphAttributes.color!==void 0&&(ce=3);let B,U,K,re;if(q){const Bt=cl[q];B=Bt.vertexShader,U=Bt.fragmentShader}else B=I.vertexShader,U=I.fragmentShader,l.update(I),K=l.getVertexShaderID(I),re=l.getFragmentShaderID(I);const ae=d.getRenderTarget(),pe=d.state.buffers.depth.getReversed(),ye=O.isInstancedMesh===!0,Re=O.isBatchedMesh===!0,Me=!!I.map,xe=!!I.matcap,ve=!!ee,ne=!!I.aoMap,Te=!!I.lightMap,Pe=!!I.bumpMap,Ae=!!I.normalMap,je=!!I.displacementMap,Ue=!!I.emissiveMap,Ge=!!I.metalnessMap,_e=!!I.roughnessMap,fe=I.anisotropy>0,We=I.clearcoat>0,Ke=I.dispersion>0,$e=I.iridescence>0,et=I.sheen>0,ht=I.transmission>0,Be=fe&&!!I.anisotropyMap,rt=We&&!!I.clearcoatMap,Ye=We&&!!I.clearcoatNormalMap,de=We&&!!I.clearcoatRoughnessMap,ge=$e&&!!I.iridescenceMap,ue=$e&&!!I.iridescenceThicknessMap,Se=et&&!!I.sheenColorMap,De=et&&!!I.sheenRoughnessMap,be=!!I.specularMap,ke=!!I.specularColorMap,ot=!!I.specularIntensityMap,Ce=ht&&!!I.transmissionMap,it=ht&&!!I.thicknessMap,Xe=!!I.gradientMap,ut=!!I.alphaMap,bt=I.alphaTest>0,vt=!!I.alphaHash,Rt=!!I.extensions;let Dt=kl;I.toneMapped&&(ae===null||ae.isXRRenderTarget===!0)&&(Dt=d.toneMapping);const yr={shaderID:q,shaderType:I.type,shaderName:I.name,vertexShader:B,fragmentShader:U,defines:I.defines,customVertexShaderID:K,customFragmentShaderID:re,isRawShaderMaterial:I.isRawShaderMaterial===!0,glslVersion:I.glslVersion,precision:f,batching:Re,batchingColor:Re&&O._colorsTexture!==null,instancing:ye,instancingColor:ye&&O.instanceColor!==null,instancingMorph:ye&&O.morphTexture!==null,supportsVertexTextures:c,outputColorSpace:ae===null?d.outputColorSpace:ae.isXRRenderTarget===!0?ae.texture.colorSpace:Ad,alphaToCoverage:!!I.alphaToCoverage,map:Me,matcap:xe,envMap:ve,envMapMode:ve&&ee.mapping,envMapCubeUVHeight:V,aoMap:ne,lightMap:Te,bumpMap:Pe,normalMap:Ae,displacementMap:c&&je,emissiveMap:Ue,normalMapObjectSpace:Ae&&I.normalMapType===CE,normalMapTangentSpace:Ae&&I.normalMapType===Yc,metalnessMap:Ge,roughnessMap:_e,anisotropy:fe,anisotropyMap:Be,clearcoat:We,clearcoatMap:rt,clearcoatNormalMap:Ye,clearcoatRoughnessMap:de,dispersion:Ke,iridescence:$e,iridescenceMap:ge,iridescenceThicknessMap:ue,sheen:et,sheenColorMap:Se,sheenRoughnessMap:De,specularMap:be,specularColorMap:ke,specularIntensityMap:ot,transmission:ht,transmissionMap:Ce,thicknessMap:it,gradientMap:Xe,opaque:I.transparent===!1&&I.blending===cd&&I.alphaToCoverage===!1,alphaMap:ut,alphaTest:bt,alphaHash:vt,combine:I.combine,mapUv:Me&&y(I.map.channel),aoMapUv:ne&&y(I.aoMap.channel),lightMapUv:Te&&y(I.lightMap.channel),bumpMapUv:Pe&&y(I.bumpMap.channel),normalMapUv:Ae&&y(I.normalMap.channel),displacementMapUv:je&&y(I.displacementMap.channel),emissiveMapUv:Ue&&y(I.emissiveMap.channel),metalnessMapUv:Ge&&y(I.metalnessMap.channel),roughnessMapUv:_e&&y(I.roughnessMap.channel),anisotropyMapUv:Be&&y(I.anisotropyMap.channel),clearcoatMapUv:rt&&y(I.clearcoatMap.channel),clearcoatNormalMapUv:Ye&&y(I.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:de&&y(I.clearcoatRoughnessMap.channel),iridescenceMapUv:ge&&y(I.iridescenceMap.channel),iridescenceThicknessMapUv:ue&&y(I.iridescenceThicknessMap.channel),sheenColorMapUv:Se&&y(I.sheenColorMap.channel),sheenRoughnessMapUv:De&&y(I.sheenRoughnessMap.channel),specularMapUv:be&&y(I.specularMap.channel),specularColorMapUv:ke&&y(I.specularColorMap.channel),specularIntensityMapUv:ot&&y(I.specularIntensityMap.channel),transmissionMapUv:Ce&&y(I.transmissionMap.channel),thicknessMapUv:it&&y(I.thicknessMap.channel),alphaMapUv:ut&&y(I.alphaMap.channel),vertexTangents:!!X.attributes.tangent&&(Ae||fe),vertexColors:I.vertexColors,vertexAlphas:I.vertexColors===!0&&!!X.attributes.color&&X.attributes.color.itemSize===4,pointsUvs:O.isPoints===!0&&!!X.attributes.uv&&(Me||ut),fog:!!W,useFog:I.fog===!0,fogExp2:!!W&&W.isFogExp2,flatShading:I.flatShading===!0,sizeAttenuation:I.sizeAttenuation===!0,logarithmicDepthBuffer:p,reverseDepthBuffer:pe,skinning:O.isSkinnedMesh===!0,morphTargets:X.morphAttributes.position!==void 0,morphNormals:X.morphAttributes.normal!==void 0,morphColors:X.morphAttributes.color!==void 0,morphTargetsCount:Z,morphTextureStride:ce,numDirLights:D.directional.length,numPointLights:D.point.length,numSpotLights:D.spot.length,numSpotLightMaps:D.spotLightMap.length,numRectAreaLights:D.rectArea.length,numHemiLights:D.hemi.length,numDirLightShadows:D.directionalShadowMap.length,numPointLightShadows:D.pointShadowMap.length,numSpotLightShadows:D.spotShadowMap.length,numSpotLightShadowsWithMaps:D.numSpotLightShadowsWithMaps,numLightProbes:D.numLightProbes,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:I.dithering,shadowMapEnabled:d.shadowMap.enabled&&j.length>0,shadowMapType:d.shadowMap.type,toneMapping:Dt,decodeVideoTexture:Me&&I.map.isVideoTexture===!0&&vn.getTransfer(I.map.colorSpace)===Dn,decodeVideoTextureEmissive:Ue&&I.emissiveMap.isVideoTexture===!0&&vn.getTransfer(I.emissiveMap.colorSpace)===Dn,premultipliedAlpha:I.premultipliedAlpha,doubleSided:I.side===fl,flipSided:I.side===mo,useDepthPacking:I.depthPacking>=0,depthPacking:I.depthPacking||0,index0AttributeName:I.index0AttributeName,extensionClipCullDistance:Rt&&I.extensions.clipCullDistance===!0&&r.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(Rt&&I.extensions.multiDraw===!0||Re)&&r.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:r.has("KHR_parallel_shader_compile"),customProgramCacheKey:I.customProgramCacheKey()};return yr.vertexUv1s=u.has(1),yr.vertexUv2s=u.has(2),yr.vertexUv3s=u.has(3),u.clear(),yr}function g(I){const D=[];if(I.shaderID?D.push(I.shaderID):(D.push(I.customVertexShaderID),D.push(I.customFragmentShaderID)),I.defines!==void 0)for(const j in I.defines)D.push(j),D.push(I.defines[j]);return I.isRawShaderMaterial===!1&&(x(D,I),b(D,I),D.push(d.outputColorSpace)),D.push(I.customProgramCacheKey),D.join()}function x(I,D){I.push(D.precision),I.push(D.outputColorSpace),I.push(D.envMapMode),I.push(D.envMapCubeUVHeight),I.push(D.mapUv),I.push(D.alphaMapUv),I.push(D.lightMapUv),I.push(D.aoMapUv),I.push(D.bumpMapUv),I.push(D.normalMapUv),I.push(D.displacementMapUv),I.push(D.emissiveMapUv),I.push(D.metalnessMapUv),I.push(D.roughnessMapUv),I.push(D.anisotropyMapUv),I.push(D.clearcoatMapUv),I.push(D.clearcoatNormalMapUv),I.push(D.clearcoatRoughnessMapUv),I.push(D.iridescenceMapUv),I.push(D.iridescenceThicknessMapUv),I.push(D.sheenColorMapUv),I.push(D.sheenRoughnessMapUv),I.push(D.specularMapUv),I.push(D.specularColorMapUv),I.push(D.specularIntensityMapUv),I.push(D.transmissionMapUv),I.push(D.thicknessMapUv),I.push(D.combine),I.push(D.fogExp2),I.push(D.sizeAttenuation),I.push(D.morphTargetsCount),I.push(D.morphAttributeCount),I.push(D.numDirLights),I.push(D.numPointLights),I.push(D.numSpotLights),I.push(D.numSpotLightMaps),I.push(D.numHemiLights),I.push(D.numRectAreaLights),I.push(D.numDirLightShadows),I.push(D.numPointLightShadows),I.push(D.numSpotLightShadows),I.push(D.numSpotLightShadowsWithMaps),I.push(D.numLightProbes),I.push(D.shadowMapType),I.push(D.toneMapping),I.push(D.numClippingPlanes),I.push(D.numClipIntersection),I.push(D.depthPacking)}function b(I,D){a.disableAll(),D.supportsVertexTextures&&a.enable(0),D.instancing&&a.enable(1),D.instancingColor&&a.enable(2),D.instancingMorph&&a.enable(3),D.matcap&&a.enable(4),D.envMap&&a.enable(5),D.normalMapObjectSpace&&a.enable(6),D.normalMapTangentSpace&&a.enable(7),D.clearcoat&&a.enable(8),D.iridescence&&a.enable(9),D.alphaTest&&a.enable(10),D.vertexColors&&a.enable(11),D.vertexAlphas&&a.enable(12),D.vertexUv1s&&a.enable(13),D.vertexUv2s&&a.enable(14),D.vertexUv3s&&a.enable(15),D.vertexTangents&&a.enable(16),D.anisotropy&&a.enable(17),D.alphaHash&&a.enable(18),D.batching&&a.enable(19),D.dispersion&&a.enable(20),D.batchingColor&&a.enable(21),I.push(a.mask),a.disableAll(),D.fog&&a.enable(0),D.useFog&&a.enable(1),D.flatShading&&a.enable(2),D.logarithmicDepthBuffer&&a.enable(3),D.reverseDepthBuffer&&a.enable(4),D.skinning&&a.enable(5),D.morphTargets&&a.enable(6),D.morphNormals&&a.enable(7),D.morphColors&&a.enable(8),D.premultipliedAlpha&&a.enable(9),D.shadowMapEnabled&&a.enable(10),D.doubleSided&&a.enable(11),D.flipSided&&a.enable(12),D.useDepthPacking&&a.enable(13),D.dithering&&a.enable(14),D.transmission&&a.enable(15),D.sheen&&a.enable(16),D.opaque&&a.enable(17),D.pointsUvs&&a.enable(18),D.decodeVideoTexture&&a.enable(19),D.decodeVideoTextureEmissive&&a.enable(20),D.alphaToCoverage&&a.enable(21),I.push(a.mask)}function w(I){const D=m[I.type];let j;if(D){const N=cl[D];j=HE.clone(N.uniforms)}else j=I.uniforms;return j}function T(I,D){let j;for(let N=0,O=h.length;N<O;N++){const W=h[N];if(W.cacheKey===D){j=W,++j.usedTimes;break}}return j===void 0&&(j=new Zk(d,D,I,o),h.push(j)),j}function R(I){if(--I.usedTimes===0){const D=h.indexOf(I);h[D]=h[h.length-1],h.pop(),I.destroy()}}function C(I){l.remove(I)}function P(){l.dispose()}return{getParameters:v,getProgramCacheKey:g,getUniforms:w,acquireProgram:T,releaseProgram:R,releaseShaderCache:C,programs:h,dispose:P}}function nO(){let d=new WeakMap;function t(s){return d.has(s)}function n(s){let a=d.get(s);return a===void 0&&(a={},d.set(s,a)),a}function r(s){d.delete(s)}function i(s,a,l){d.get(s)[a]=l}function o(){d=new WeakMap}return{has:t,get:n,remove:r,update:i,dispose:o}}function iO(d,t){return d.groupOrder!==t.groupOrder?d.groupOrder-t.groupOrder:d.renderOrder!==t.renderOrder?d.renderOrder-t.renderOrder:d.material.id!==t.material.id?d.material.id-t.material.id:d.z!==t.z?d.z-t.z:d.id-t.id}function x2(d,t){return d.groupOrder!==t.groupOrder?d.groupOrder-t.groupOrder:d.renderOrder!==t.renderOrder?d.renderOrder-t.renderOrder:d.z!==t.z?t.z-d.z:d.id-t.id}function b2(){const d=[];let t=0;const n=[],r=[],i=[];function o(){t=0,n.length=0,r.length=0,i.length=0}function s(p,c,f,m,y,v){let g=d[t];return g===void 0?(g={id:p.id,object:p,geometry:c,material:f,groupOrder:m,renderOrder:p.renderOrder,z:y,group:v},d[t]=g):(g.id=p.id,g.object=p,g.geometry=c,g.material=f,g.groupOrder=m,g.renderOrder=p.renderOrder,g.z=y,g.group=v),t++,g}function a(p,c,f,m,y,v){const g=s(p,c,f,m,y,v);f.transmission>0?r.push(g):f.transparent===!0?i.push(g):n.push(g)}function l(p,c,f,m,y,v){const g=s(p,c,f,m,y,v);f.transmission>0?r.unshift(g):f.transparent===!0?i.unshift(g):n.unshift(g)}function u(p,c){n.length>1&&n.sort(p||iO),r.length>1&&r.sort(c||x2),i.length>1&&i.sort(c||x2)}function h(){for(let p=t,c=d.length;p<c;p++){const f=d[p];if(f.id===null)break;f.id=null,f.object=null,f.geometry=null,f.material=null,f.group=null}}return{opaque:n,transmissive:r,transparent:i,init:o,push:a,unshift:l,finish:h,sort:u}}function sO(){let d=new WeakMap;function t(r,i){const o=d.get(r);let s;return o===void 0?(s=new b2,d.set(r,[s])):i>=o.length?(s=new b2,o.push(s)):s=o[i],s}function n(){d=new WeakMap}return{get:t,dispose:n}}function oO(){const d={};return{get:function(t){if(d[t.id]!==void 0)return d[t.id];let n;switch(t.type){case"DirectionalLight":n={direction:new Oe,color:new nr};break;case"SpotLight":n={position:new Oe,direction:new Oe,color:new nr,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new Oe,color:new nr,distance:0,decay:0};break;case"HemisphereLight":n={direction:new Oe,skyColor:new nr,groundColor:new nr};break;case"RectAreaLight":n={color:new nr,position:new Oe,halfWidth:new Oe,halfHeight:new Oe};break}return d[t.id]=n,n}}}function aO(){const d={};return{get:function(t){if(d[t.id]!==void 0)return d[t.id];let n;switch(t.type){case"DirectionalLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ct};break;case"SpotLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ct};break;case"PointLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ct,shadowCameraNear:1,shadowCameraFar:1e3};break}return d[t.id]=n,n}}}let lO=0;function uO(d,t){return(t.castShadow?2:0)-(d.castShadow?2:0)+(t.map?1:0)-(d.map?1:0)}function cO(d){const t=new oO,n=aO(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let u=0;u<9;u++)r.probe.push(new Oe);const i=new Oe,o=new Cr,s=new Cr;function a(u){let h=0,p=0,c=0;for(let I=0;I<9;I++)r.probe[I].set(0,0,0);let f=0,m=0,y=0,v=0,g=0,x=0,b=0,w=0,T=0,R=0,C=0;u.sort(uO);for(let I=0,D=u.length;I<D;I++){const j=u[I],N=j.color,O=j.intensity,W=j.distance,X=j.shadow&&j.shadow.map?j.shadow.map.texture:null;if(j.isAmbientLight)h+=N.r*O,p+=N.g*O,c+=N.b*O;else if(j.isLightProbe){for(let J=0;J<9;J++)r.probe[J].addScaledVector(j.sh.coefficients[J],O);C++}else if(j.isDirectionalLight){const J=t.get(j);if(J.color.copy(j.color).multiplyScalar(j.intensity),j.castShadow){const ee=j.shadow,V=n.get(j);V.shadowIntensity=ee.intensity,V.shadowBias=ee.bias,V.shadowNormalBias=ee.normalBias,V.shadowRadius=ee.radius,V.shadowMapSize=ee.mapSize,r.directionalShadow[f]=V,r.directionalShadowMap[f]=X,r.directionalShadowMatrix[f]=j.shadow.matrix,x++}r.directional[f]=J,f++}else if(j.isSpotLight){const J=t.get(j);J.position.setFromMatrixPosition(j.matrixWorld),J.color.copy(N).multiplyScalar(O),J.distance=W,J.coneCos=Math.cos(j.angle),J.penumbraCos=Math.cos(j.angle*(1-j.penumbra)),J.decay=j.decay,r.spot[y]=J;const ee=j.shadow;if(j.map&&(r.spotLightMap[T]=j.map,T++,ee.updateMatrices(j),j.castShadow&&R++),r.spotLightMatrix[y]=ee.matrix,j.castShadow){const V=n.get(j);V.shadowIntensity=ee.intensity,V.shadowBias=ee.bias,V.shadowNormalBias=ee.normalBias,V.shadowRadius=ee.radius,V.shadowMapSize=ee.mapSize,r.spotShadow[y]=V,r.spotShadowMap[y]=X,w++}y++}else if(j.isRectAreaLight){const J=t.get(j);J.color.copy(N).multiplyScalar(O),J.halfWidth.set(j.width*.5,0,0),J.halfHeight.set(0,j.height*.5,0),r.rectArea[v]=J,v++}else if(j.isPointLight){const J=t.get(j);if(J.color.copy(j.color).multiplyScalar(j.intensity),J.distance=j.distance,J.decay=j.decay,j.castShadow){const ee=j.shadow,V=n.get(j);V.shadowIntensity=ee.intensity,V.shadowBias=ee.bias,V.shadowNormalBias=ee.normalBias,V.shadowRadius=ee.radius,V.shadowMapSize=ee.mapSize,V.shadowCameraNear=ee.camera.near,V.shadowCameraFar=ee.camera.far,r.pointShadow[m]=V,r.pointShadowMap[m]=X,r.pointShadowMatrix[m]=j.shadow.matrix,b++}r.point[m]=J,m++}else if(j.isHemisphereLight){const J=t.get(j);J.skyColor.copy(j.color).multiplyScalar(O),J.groundColor.copy(j.groundColor).multiplyScalar(O),r.hemi[g]=J,g++}}v>0&&(d.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=rr.LTC_FLOAT_1,r.rectAreaLTC2=rr.LTC_FLOAT_2):(r.rectAreaLTC1=rr.LTC_HALF_1,r.rectAreaLTC2=rr.LTC_HALF_2)),r.ambient[0]=h,r.ambient[1]=p,r.ambient[2]=c;const P=r.hash;(P.directionalLength!==f||P.pointLength!==m||P.spotLength!==y||P.rectAreaLength!==v||P.hemiLength!==g||P.numDirectionalShadows!==x||P.numPointShadows!==b||P.numSpotShadows!==w||P.numSpotMaps!==T||P.numLightProbes!==C)&&(r.directional.length=f,r.spot.length=y,r.rectArea.length=v,r.point.length=m,r.hemi.length=g,r.directionalShadow.length=x,r.directionalShadowMap.length=x,r.pointShadow.length=b,r.pointShadowMap.length=b,r.spotShadow.length=w,r.spotShadowMap.length=w,r.directionalShadowMatrix.length=x,r.pointShadowMatrix.length=b,r.spotLightMatrix.length=w+T-R,r.spotLightMap.length=T,r.numSpotLightShadowsWithMaps=R,r.numLightProbes=C,P.directionalLength=f,P.pointLength=m,P.spotLength=y,P.rectAreaLength=v,P.hemiLength=g,P.numDirectionalShadows=x,P.numPointShadows=b,P.numSpotShadows=w,P.numSpotMaps=T,P.numLightProbes=C,r.version=lO++)}function l(u,h){let p=0,c=0,f=0,m=0,y=0;const v=h.matrixWorldInverse;for(let g=0,x=u.length;g<x;g++){const b=u[g];if(b.isDirectionalLight){const w=r.directional[p];w.direction.setFromMatrixPosition(b.matrixWorld),i.setFromMatrixPosition(b.target.matrixWorld),w.direction.sub(i),w.direction.transformDirection(v),p++}else if(b.isSpotLight){const w=r.spot[f];w.position.setFromMatrixPosition(b.matrixWorld),w.position.applyMatrix4(v),w.direction.setFromMatrixPosition(b.matrixWorld),i.setFromMatrixPosition(b.target.matrixWorld),w.direction.sub(i),w.direction.transformDirection(v),f++}else if(b.isRectAreaLight){const w=r.rectArea[m];w.position.setFromMatrixPosition(b.matrixWorld),w.position.applyMatrix4(v),s.identity(),o.copy(b.matrixWorld),o.premultiply(v),s.extractRotation(o),w.halfWidth.set(b.width*.5,0,0),w.halfHeight.set(0,b.height*.5,0),w.halfWidth.applyMatrix4(s),w.halfHeight.applyMatrix4(s),m++}else if(b.isPointLight){const w=r.point[c];w.position.setFromMatrixPosition(b.matrixWorld),w.position.applyMatrix4(v),c++}else if(b.isHemisphereLight){const w=r.hemi[y];w.direction.setFromMatrixPosition(b.matrixWorld),w.direction.transformDirection(v),y++}}}return{setup:a,setupView:l,state:r}}function w2(d){const t=new cO(d),n=[],r=[];function i(h){u.camera=h,n.length=0,r.length=0}function o(h){n.push(h)}function s(h){r.push(h)}function a(){t.setup(n)}function l(h){t.setupView(n,h)}const u={lightsArray:n,shadowsArray:r,camera:null,lights:t,transmissionRenderTarget:{}};return{init:i,state:u,setupLights:a,setupLightsView:l,pushLight:o,pushShadow:s}}function fO(d){let t=new WeakMap;function n(i,o=0){const s=t.get(i);let a;return s===void 0?(a=new w2(d),t.set(i,[a])):o>=s.length?(a=new w2(d),s.push(a)):a=s[o],a}function r(){t=new WeakMap}return{get:n,dispose:r}}const dO=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,hO=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function pO(d,t,n){let r=new Vg;const i=new Ct,o=new Ct,s=new bn,a=new hw({depthPacking:TE}),l=new pw,u={},h=n.maxTextureSize,p={[Hl]:mo,[mo]:Hl,[fl]:fl},c=new pl({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Ct},radius:{value:4}},vertexShader:dO,fragmentShader:hO}),f=c.clone();f.defines.HORIZONTAL_PASS=1;const m=new Wr;m.setAttribute("position",new wn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const y=new Ti(m,c),v=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=o_;let g=this.type;this.render=function(R,C,P){if(v.enabled===!1||v.autoUpdate===!1&&v.needsUpdate===!1||R.length===0)return;const I=d.getRenderTarget(),D=d.getActiveCubeFace(),j=d.getActiveMipmapLevel(),N=d.state;N.setBlending(Ou),N.buffers.color.setClear(1,1,1,1),N.buffers.depth.setTest(!0),N.setScissorTest(!1);const O=g!==ul&&this.type===ul,W=g===ul&&this.type!==ul;for(let X=0,J=R.length;X<J;X++){const ee=R[X],V=ee.shadow;if(V===void 0){console.warn("THREE.WebGLShadowMap:",ee,"has no shadow.");continue}if(V.autoUpdate===!1&&V.needsUpdate===!1)continue;i.copy(V.mapSize);const q=V.getFrameExtents();if(i.multiply(q),o.copy(V.mapSize),(i.x>h||i.y>h)&&(i.x>h&&(o.x=Math.floor(h/q.x),i.x=o.x*q.x,V.mapSize.x=o.x),i.y>h&&(o.y=Math.floor(h/q.y),i.y=o.y*q.y,V.mapSize.y=o.y)),V.map===null||O===!0||W===!0){const Z=this.type!==ul?{minFilter:fs,magFilter:fs}:{};V.map!==null&&V.map.dispose(),V.map=new zl(i.x,i.y,Z),V.map.texture.name=ee.name+".shadowMap",V.camera.updateProjectionMatrix()}d.setRenderTarget(V.map),d.clear();const Y=V.getViewportCount();for(let Z=0;Z<Y;Z++){const ce=V.getViewport(Z);s.set(o.x*ce.x,o.y*ce.y,o.x*ce.z,o.y*ce.w),N.viewport(s),V.updateMatrices(ee,Z),r=V.getFrustum(),w(C,P,V.camera,ee,this.type)}V.isPointLightShadow!==!0&&this.type===ul&&x(V,P),V.needsUpdate=!1}g=this.type,v.needsUpdate=!1,d.setRenderTarget(I,D,j)};function x(R,C){const P=t.update(y);c.defines.VSM_SAMPLES!==R.blurSamples&&(c.defines.VSM_SAMPLES=R.blurSamples,f.defines.VSM_SAMPLES=R.blurSamples,c.needsUpdate=!0,f.needsUpdate=!0),R.mapPass===null&&(R.mapPass=new zl(i.x,i.y)),c.uniforms.shadow_pass.value=R.map.texture,c.uniforms.resolution.value=R.mapSize,c.uniforms.radius.value=R.radius,d.setRenderTarget(R.mapPass),d.clear(),d.renderBufferDirect(C,null,P,c,y,null),f.uniforms.shadow_pass.value=R.mapPass.texture,f.uniforms.resolution.value=R.mapSize,f.uniforms.radius.value=R.radius,d.setRenderTarget(R.map),d.clear(),d.renderBufferDirect(C,null,P,f,y,null)}function b(R,C,P,I){let D=null;const j=P.isPointLight===!0?R.customDistanceMaterial:R.customDepthMaterial;if(j!==void 0)D=j;else if(D=P.isPointLight===!0?l:a,d.localClippingEnabled&&C.clipShadows===!0&&Array.isArray(C.clippingPlanes)&&C.clippingPlanes.length!==0||C.displacementMap&&C.displacementScale!==0||C.alphaMap&&C.alphaTest>0||C.map&&C.alphaTest>0){const N=D.uuid,O=C.uuid;let W=u[N];W===void 0&&(W={},u[N]=W);let X=W[O];X===void 0&&(X=D.clone(),W[O]=X,C.addEventListener("dispose",T)),D=X}if(D.visible=C.visible,D.wireframe=C.wireframe,I===ul?D.side=C.shadowSide!==null?C.shadowSide:C.side:D.side=C.shadowSide!==null?C.shadowSide:p[C.side],D.alphaMap=C.alphaMap,D.alphaTest=C.alphaTest,D.map=C.map,D.clipShadows=C.clipShadows,D.clippingPlanes=C.clippingPlanes,D.clipIntersection=C.clipIntersection,D.displacementMap=C.displacementMap,D.displacementScale=C.displacementScale,D.displacementBias=C.displacementBias,D.wireframeLinewidth=C.wireframeLinewidth,D.linewidth=C.linewidth,P.isPointLight===!0&&D.isMeshDistanceMaterial===!0){const N=d.properties.get(D);N.light=P}return D}function w(R,C,P,I,D){if(R.visible===!1)return;if(R.layers.test(C.layers)&&(R.isMesh||R.isLine||R.isPoints)&&(R.castShadow||R.receiveShadow&&D===ul)&&(!R.frustumCulled||r.intersectsObject(R))){R.modelViewMatrix.multiplyMatrices(P.matrixWorldInverse,R.matrixWorld);const O=t.update(R),W=R.material;if(Array.isArray(W)){const X=O.groups;for(let J=0,ee=X.length;J<ee;J++){const V=X[J],q=W[V.materialIndex];if(q&&q.visible){const Y=b(R,q,I,D);R.onBeforeShadow(d,R,C,P,O,Y,V),d.renderBufferDirect(P,null,O,Y,R,V),R.onAfterShadow(d,R,C,P,O,Y,V)}}}else if(W.visible){const X=b(R,W,I,D);R.onBeforeShadow(d,R,C,P,O,X,null),d.renderBufferDirect(P,null,O,X,R,null),R.onAfterShadow(d,R,C,P,O,X,null)}}const N=R.children;for(let O=0,W=N.length;O<W;O++)w(N[O],C,P,I,D)}function T(R){R.target.removeEventListener("dispose",T);for(const P in u){const I=u[P],D=R.target.uuid;D in I&&(I[D].dispose(),delete I[D])}}}const mO={[lv]:uv,[cv]:hv,[fv]:pv,[wd]:dv,[uv]:lv,[hv]:cv,[pv]:fv,[dv]:wd};function gO(d,t){function n(){let Ce=!1;const it=new bn;let Xe=null;const ut=new bn(0,0,0,0);return{setMask:function(bt){Xe!==bt&&!Ce&&(d.colorMask(bt,bt,bt,bt),Xe=bt)},setLocked:function(bt){Ce=bt},setClear:function(bt,vt,Rt,Dt,yr){yr===!0&&(bt*=Dt,vt*=Dt,Rt*=Dt),it.set(bt,vt,Rt,Dt),ut.equals(it)===!1&&(d.clearColor(bt,vt,Rt,Dt),ut.copy(it))},reset:function(){Ce=!1,Xe=null,ut.set(-1,0,0,0)}}}function r(){let Ce=!1,it=!1,Xe=null,ut=null,bt=null;return{setReversed:function(vt){if(it!==vt){const Rt=t.get("EXT_clip_control");it?Rt.clipControlEXT(Rt.LOWER_LEFT_EXT,Rt.ZERO_TO_ONE_EXT):Rt.clipControlEXT(Rt.LOWER_LEFT_EXT,Rt.NEGATIVE_ONE_TO_ONE_EXT);const Dt=bt;bt=null,this.setClear(Dt)}it=vt},getReversed:function(){return it},setTest:function(vt){vt?ae(d.DEPTH_TEST):pe(d.DEPTH_TEST)},setMask:function(vt){Xe!==vt&&!Ce&&(d.depthMask(vt),Xe=vt)},setFunc:function(vt){if(it&&(vt=mO[vt]),ut!==vt){switch(vt){case lv:d.depthFunc(d.NEVER);break;case uv:d.depthFunc(d.ALWAYS);break;case cv:d.depthFunc(d.LESS);break;case wd:d.depthFunc(d.LEQUAL);break;case fv:d.depthFunc(d.EQUAL);break;case dv:d.depthFunc(d.GEQUAL);break;case hv:d.depthFunc(d.GREATER);break;case pv:d.depthFunc(d.NOTEQUAL);break;default:d.depthFunc(d.LEQUAL)}ut=vt}},setLocked:function(vt){Ce=vt},setClear:function(vt){bt!==vt&&(it&&(vt=1-vt),d.clearDepth(vt),bt=vt)},reset:function(){Ce=!1,Xe=null,ut=null,bt=null,it=!1}}}function i(){let Ce=!1,it=null,Xe=null,ut=null,bt=null,vt=null,Rt=null,Dt=null,yr=null;return{setTest:function(Bt){Ce||(Bt?ae(d.STENCIL_TEST):pe(d.STENCIL_TEST))},setMask:function(Bt){it!==Bt&&!Ce&&(d.stencilMask(Bt),it=Bt)},setFunc:function(Bt,Ut,Yt){(Xe!==Bt||ut!==Ut||bt!==Yt)&&(d.stencilFunc(Bt,Ut,Yt),Xe=Bt,ut=Ut,bt=Yt)},setOp:function(Bt,Ut,Yt){(vt!==Bt||Rt!==Ut||Dt!==Yt)&&(d.stencilOp(Bt,Ut,Yt),vt=Bt,Rt=Ut,Dt=Yt)},setLocked:function(Bt){Ce=Bt},setClear:function(Bt){yr!==Bt&&(d.clearStencil(Bt),yr=Bt)},reset:function(){Ce=!1,it=null,Xe=null,ut=null,bt=null,vt=null,Rt=null,Dt=null,yr=null}}}const o=new n,s=new r,a=new i,l=new WeakMap,u=new WeakMap;let h={},p={},c=new WeakMap,f=[],m=null,y=!1,v=null,g=null,x=null,b=null,w=null,T=null,R=null,C=new nr(0,0,0),P=0,I=!1,D=null,j=null,N=null,O=null,W=null;const X=d.getParameter(d.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let J=!1,ee=0;const V=d.getParameter(d.VERSION);V.indexOf("WebGL")!==-1?(ee=parseFloat(/^WebGL (\d)/.exec(V)[1]),J=ee>=1):V.indexOf("OpenGL ES")!==-1&&(ee=parseFloat(/^OpenGL ES (\d)/.exec(V)[1]),J=ee>=2);let q=null,Y={};const Z=d.getParameter(d.SCISSOR_BOX),ce=d.getParameter(d.VIEWPORT),B=new bn().fromArray(Z),U=new bn().fromArray(ce);function K(Ce,it,Xe,ut){const bt=new Uint8Array(4),vt=d.createTexture();d.bindTexture(Ce,vt),d.texParameteri(Ce,d.TEXTURE_MIN_FILTER,d.NEAREST),d.texParameteri(Ce,d.TEXTURE_MAG_FILTER,d.NEAREST);for(let Rt=0;Rt<Xe;Rt++)Ce===d.TEXTURE_3D||Ce===d.TEXTURE_2D_ARRAY?d.texImage3D(it,0,d.RGBA,1,1,ut,0,d.RGBA,d.UNSIGNED_BYTE,bt):d.texImage2D(it+Rt,0,d.RGBA,1,1,0,d.RGBA,d.UNSIGNED_BYTE,bt);return vt}const re={};re[d.TEXTURE_2D]=K(d.TEXTURE_2D,d.TEXTURE_2D,1),re[d.TEXTURE_CUBE_MAP]=K(d.TEXTURE_CUBE_MAP,d.TEXTURE_CUBE_MAP_POSITIVE_X,6),re[d.TEXTURE_2D_ARRAY]=K(d.TEXTURE_2D_ARRAY,d.TEXTURE_2D_ARRAY,1,1),re[d.TEXTURE_3D]=K(d.TEXTURE_3D,d.TEXTURE_3D,1,1),o.setClear(0,0,0,1),s.setClear(1),a.setClear(0),ae(d.DEPTH_TEST),s.setFunc(wd),Pe(!1),Ae(Wx),ae(d.CULL_FACE),ne(Ou);function ae(Ce){h[Ce]!==!0&&(d.enable(Ce),h[Ce]=!0)}function pe(Ce){h[Ce]!==!1&&(d.disable(Ce),h[Ce]=!1)}function ye(Ce,it){return p[Ce]!==it?(d.bindFramebuffer(Ce,it),p[Ce]=it,Ce===d.DRAW_FRAMEBUFFER&&(p[d.FRAMEBUFFER]=it),Ce===d.FRAMEBUFFER&&(p[d.DRAW_FRAMEBUFFER]=it),!0):!1}function Re(Ce,it){let Xe=f,ut=!1;if(Ce){Xe=c.get(it),Xe===void 0&&(Xe=[],c.set(it,Xe));const bt=Ce.textures;if(Xe.length!==bt.length||Xe[0]!==d.COLOR_ATTACHMENT0){for(let vt=0,Rt=bt.length;vt<Rt;vt++)Xe[vt]=d.COLOR_ATTACHMENT0+vt;Xe.length=bt.length,ut=!0}}else Xe[0]!==d.BACK&&(Xe[0]=d.BACK,ut=!0);ut&&d.drawBuffers(Xe)}function Me(Ce){return m!==Ce?(d.useProgram(Ce),m=Ce,!0):!1}const xe={[Ic]:d.FUNC_ADD,[KA]:d.FUNC_SUBTRACT,[QA]:d.FUNC_REVERSE_SUBTRACT};xe[ZA]=d.MIN,xe[$A]=d.MAX;const ve={[eE]:d.ZERO,[tE]:d.ONE,[rE]:d.SRC_COLOR,[ov]:d.SRC_ALPHA,[lE]:d.SRC_ALPHA_SATURATE,[oE]:d.DST_COLOR,[iE]:d.DST_ALPHA,[nE]:d.ONE_MINUS_SRC_COLOR,[av]:d.ONE_MINUS_SRC_ALPHA,[aE]:d.ONE_MINUS_DST_COLOR,[sE]:d.ONE_MINUS_DST_ALPHA,[uE]:d.CONSTANT_COLOR,[cE]:d.ONE_MINUS_CONSTANT_COLOR,[fE]:d.CONSTANT_ALPHA,[dE]:d.ONE_MINUS_CONSTANT_ALPHA};function ne(Ce,it,Xe,ut,bt,vt,Rt,Dt,yr,Bt){if(Ce===Ou){y===!0&&(pe(d.BLEND),y=!1);return}if(y===!1&&(ae(d.BLEND),y=!0),Ce!==JA){if(Ce!==v||Bt!==I){if((g!==Ic||w!==Ic)&&(d.blendEquation(d.FUNC_ADD),g=Ic,w=Ic),Bt)switch(Ce){case cd:d.blendFuncSeparate(d.ONE,d.ONE_MINUS_SRC_ALPHA,d.ONE,d.ONE_MINUS_SRC_ALPHA);break;case Xx:d.blendFunc(d.ONE,d.ONE);break;case Yx:d.blendFuncSeparate(d.ZERO,d.ONE_MINUS_SRC_COLOR,d.ZERO,d.ONE);break;case qx:d.blendFuncSeparate(d.ZERO,d.SRC_COLOR,d.ZERO,d.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",Ce);break}else switch(Ce){case cd:d.blendFuncSeparate(d.SRC_ALPHA,d.ONE_MINUS_SRC_ALPHA,d.ONE,d.ONE_MINUS_SRC_ALPHA);break;case Xx:d.blendFunc(d.SRC_ALPHA,d.ONE);break;case Yx:d.blendFuncSeparate(d.ZERO,d.ONE_MINUS_SRC_COLOR,d.ZERO,d.ONE);break;case qx:d.blendFunc(d.ZERO,d.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",Ce);break}x=null,b=null,T=null,R=null,C.set(0,0,0),P=0,v=Ce,I=Bt}return}bt=bt||it,vt=vt||Xe,Rt=Rt||ut,(it!==g||bt!==w)&&(d.blendEquationSeparate(xe[it],xe[bt]),g=it,w=bt),(Xe!==x||ut!==b||vt!==T||Rt!==R)&&(d.blendFuncSeparate(ve[Xe],ve[ut],ve[vt],ve[Rt]),x=Xe,b=ut,T=vt,R=Rt),(Dt.equals(C)===!1||yr!==P)&&(d.blendColor(Dt.r,Dt.g,Dt.b,yr),C.copy(Dt),P=yr),v=Ce,I=!1}function Te(Ce,it){Ce.side===fl?pe(d.CULL_FACE):ae(d.CULL_FACE);let Xe=Ce.side===mo;it&&(Xe=!Xe),Pe(Xe),Ce.blending===cd&&Ce.transparent===!1?ne(Ou):ne(Ce.blending,Ce.blendEquation,Ce.blendSrc,Ce.blendDst,Ce.blendEquationAlpha,Ce.blendSrcAlpha,Ce.blendDstAlpha,Ce.blendColor,Ce.blendAlpha,Ce.premultipliedAlpha),s.setFunc(Ce.depthFunc),s.setTest(Ce.depthTest),s.setMask(Ce.depthWrite),o.setMask(Ce.colorWrite);const ut=Ce.stencilWrite;a.setTest(ut),ut&&(a.setMask(Ce.stencilWriteMask),a.setFunc(Ce.stencilFunc,Ce.stencilRef,Ce.stencilFuncMask),a.setOp(Ce.stencilFail,Ce.stencilZFail,Ce.stencilZPass)),Ue(Ce.polygonOffset,Ce.polygonOffsetFactor,Ce.polygonOffsetUnits),Ce.alphaToCoverage===!0?ae(d.SAMPLE_ALPHA_TO_COVERAGE):pe(d.SAMPLE_ALPHA_TO_COVERAGE)}function Pe(Ce){D!==Ce&&(Ce?d.frontFace(d.CW):d.frontFace(d.CCW),D=Ce)}function Ae(Ce){Ce!==XA?(ae(d.CULL_FACE),Ce!==j&&(Ce===Wx?d.cullFace(d.BACK):Ce===YA?d.cullFace(d.FRONT):d.cullFace(d.FRONT_AND_BACK))):pe(d.CULL_FACE),j=Ce}function je(Ce){Ce!==N&&(J&&d.lineWidth(Ce),N=Ce)}function Ue(Ce,it,Xe){Ce?(ae(d.POLYGON_OFFSET_FILL),(O!==it||W!==Xe)&&(d.polygonOffset(it,Xe),O=it,W=Xe)):pe(d.POLYGON_OFFSET_FILL)}function Ge(Ce){Ce?ae(d.SCISSOR_TEST):pe(d.SCISSOR_TEST)}function _e(Ce){Ce===void 0&&(Ce=d.TEXTURE0+X-1),q!==Ce&&(d.activeTexture(Ce),q=Ce)}function fe(Ce,it,Xe){Xe===void 0&&(q===null?Xe=d.TEXTURE0+X-1:Xe=q);let ut=Y[Xe];ut===void 0&&(ut={type:void 0,texture:void 0},Y[Xe]=ut),(ut.type!==Ce||ut.texture!==it)&&(q!==Xe&&(d.activeTexture(Xe),q=Xe),d.bindTexture(Ce,it||re[Ce]),ut.type=Ce,ut.texture=it)}function We(){const Ce=Y[q];Ce!==void 0&&Ce.type!==void 0&&(d.bindTexture(Ce.type,null),Ce.type=void 0,Ce.texture=void 0)}function Ke(){try{d.compressedTexImage2D.apply(d,arguments)}catch(Ce){console.error("THREE.WebGLState:",Ce)}}function $e(){try{d.compressedTexImage3D.apply(d,arguments)}catch(Ce){console.error("THREE.WebGLState:",Ce)}}function et(){try{d.texSubImage2D.apply(d,arguments)}catch(Ce){console.error("THREE.WebGLState:",Ce)}}function ht(){try{d.texSubImage3D.apply(d,arguments)}catch(Ce){console.error("THREE.WebGLState:",Ce)}}function Be(){try{d.compressedTexSubImage2D.apply(d,arguments)}catch(Ce){console.error("THREE.WebGLState:",Ce)}}function rt(){try{d.compressedTexSubImage3D.apply(d,arguments)}catch(Ce){console.error("THREE.WebGLState:",Ce)}}function Ye(){try{d.texStorage2D.apply(d,arguments)}catch(Ce){console.error("THREE.WebGLState:",Ce)}}function de(){try{d.texStorage3D.apply(d,arguments)}catch(Ce){console.error("THREE.WebGLState:",Ce)}}function ge(){try{d.texImage2D.apply(d,arguments)}catch(Ce){console.error("THREE.WebGLState:",Ce)}}function ue(){try{d.texImage3D.apply(d,arguments)}catch(Ce){console.error("THREE.WebGLState:",Ce)}}function Se(Ce){B.equals(Ce)===!1&&(d.scissor(Ce.x,Ce.y,Ce.z,Ce.w),B.copy(Ce))}function De(Ce){U.equals(Ce)===!1&&(d.viewport(Ce.x,Ce.y,Ce.z,Ce.w),U.copy(Ce))}function be(Ce,it){let Xe=u.get(it);Xe===void 0&&(Xe=new WeakMap,u.set(it,Xe));let ut=Xe.get(Ce);ut===void 0&&(ut=d.getUniformBlockIndex(it,Ce.name),Xe.set(Ce,ut))}function ke(Ce,it){const ut=u.get(it).get(Ce);l.get(it)!==ut&&(d.uniformBlockBinding(it,ut,Ce.__bindingPointIndex),l.set(it,ut))}function ot(){d.disable(d.BLEND),d.disable(d.CULL_FACE),d.disable(d.DEPTH_TEST),d.disable(d.POLYGON_OFFSET_FILL),d.disable(d.SCISSOR_TEST),d.disable(d.STENCIL_TEST),d.disable(d.SAMPLE_ALPHA_TO_COVERAGE),d.blendEquation(d.FUNC_ADD),d.blendFunc(d.ONE,d.ZERO),d.blendFuncSeparate(d.ONE,d.ZERO,d.ONE,d.ZERO),d.blendColor(0,0,0,0),d.colorMask(!0,!0,!0,!0),d.clearColor(0,0,0,0),d.depthMask(!0),d.depthFunc(d.LESS),s.setReversed(!1),d.clearDepth(1),d.stencilMask(4294967295),d.stencilFunc(d.ALWAYS,0,4294967295),d.stencilOp(d.KEEP,d.KEEP,d.KEEP),d.clearStencil(0),d.cullFace(d.BACK),d.frontFace(d.CCW),d.polygonOffset(0,0),d.activeTexture(d.TEXTURE0),d.bindFramebuffer(d.FRAMEBUFFER,null),d.bindFramebuffer(d.DRAW_FRAMEBUFFER,null),d.bindFramebuffer(d.READ_FRAMEBUFFER,null),d.useProgram(null),d.lineWidth(1),d.scissor(0,0,d.canvas.width,d.canvas.height),d.viewport(0,0,d.canvas.width,d.canvas.height),h={},q=null,Y={},p={},c=new WeakMap,f=[],m=null,y=!1,v=null,g=null,x=null,b=null,w=null,T=null,R=null,C=new nr(0,0,0),P=0,I=!1,D=null,j=null,N=null,O=null,W=null,B.set(0,0,d.canvas.width,d.canvas.height),U.set(0,0,d.canvas.width,d.canvas.height),o.reset(),s.reset(),a.reset()}return{buffers:{color:o,depth:s,stencil:a},enable:ae,disable:pe,bindFramebuffer:ye,drawBuffers:Re,useProgram:Me,setBlending:ne,setMaterial:Te,setFlipSided:Pe,setCullFace:Ae,setLineWidth:je,setPolygonOffset:Ue,setScissorTest:Ge,activeTexture:_e,bindTexture:fe,unbindTexture:We,compressedTexImage2D:Ke,compressedTexImage3D:$e,texImage2D:ge,texImage3D:ue,updateUBOMapping:be,uniformBlockBinding:ke,texStorage2D:Ye,texStorage3D:de,texSubImage2D:et,texSubImage3D:ht,compressedTexSubImage2D:Be,compressedTexSubImage3D:rt,scissor:Se,viewport:De,reset:ot}}function yO(d,t,n,r,i,o,s){const a=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,l=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),u=new Ct,h=new WeakMap;let p;const c=new WeakMap;let f=!1;try{f=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function m(_e,fe){return f?new OffscreenCanvas(_e,fe):bg("canvas")}function y(_e,fe,We){let Ke=1;const $e=Ge(_e);if(($e.width>We||$e.height>We)&&(Ke=We/Math.max($e.width,$e.height)),Ke<1)if(typeof HTMLImageElement<"u"&&_e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&_e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&_e instanceof ImageBitmap||typeof VideoFrame<"u"&&_e instanceof VideoFrame){const et=Math.floor(Ke*$e.width),ht=Math.floor(Ke*$e.height);p===void 0&&(p=m(et,ht));const Be=fe?m(et,ht):p;return Be.width=et,Be.height=ht,Be.getContext("2d").drawImage(_e,0,0,et,ht),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+$e.width+"x"+$e.height+") to ("+et+"x"+ht+")."),Be}else return"data"in _e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+$e.width+"x"+$e.height+")."),_e;return _e}function v(_e){return _e.generateMipmaps}function g(_e){d.generateMipmap(_e)}function x(_e){return _e.isWebGLCubeRenderTarget?d.TEXTURE_CUBE_MAP:_e.isWebGL3DRenderTarget?d.TEXTURE_3D:_e.isWebGLArrayRenderTarget||_e.isCompressedArrayTexture?d.TEXTURE_2D_ARRAY:d.TEXTURE_2D}function b(_e,fe,We,Ke,$e=!1){if(_e!==null){if(d[_e]!==void 0)return d[_e];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+_e+"'")}let et=fe;if(fe===d.RED&&(We===d.FLOAT&&(et=d.R32F),We===d.HALF_FLOAT&&(et=d.R16F),We===d.UNSIGNED_BYTE&&(et=d.R8)),fe===d.RED_INTEGER&&(We===d.UNSIGNED_BYTE&&(et=d.R8UI),We===d.UNSIGNED_SHORT&&(et=d.R16UI),We===d.UNSIGNED_INT&&(et=d.R32UI),We===d.BYTE&&(et=d.R8I),We===d.SHORT&&(et=d.R16I),We===d.INT&&(et=d.R32I)),fe===d.RG&&(We===d.FLOAT&&(et=d.RG32F),We===d.HALF_FLOAT&&(et=d.RG16F),We===d.UNSIGNED_BYTE&&(et=d.RG8)),fe===d.RG_INTEGER&&(We===d.UNSIGNED_BYTE&&(et=d.RG8UI),We===d.UNSIGNED_SHORT&&(et=d.RG16UI),We===d.UNSIGNED_INT&&(et=d.RG32UI),We===d.BYTE&&(et=d.RG8I),We===d.SHORT&&(et=d.RG16I),We===d.INT&&(et=d.RG32I)),fe===d.RGB_INTEGER&&(We===d.UNSIGNED_BYTE&&(et=d.RGB8UI),We===d.UNSIGNED_SHORT&&(et=d.RGB16UI),We===d.UNSIGNED_INT&&(et=d.RGB32UI),We===d.BYTE&&(et=d.RGB8I),We===d.SHORT&&(et=d.RGB16I),We===d.INT&&(et=d.RGB32I)),fe===d.RGBA_INTEGER&&(We===d.UNSIGNED_BYTE&&(et=d.RGBA8UI),We===d.UNSIGNED_SHORT&&(et=d.RGBA16UI),We===d.UNSIGNED_INT&&(et=d.RGBA32UI),We===d.BYTE&&(et=d.RGBA8I),We===d.SHORT&&(et=d.RGBA16I),We===d.INT&&(et=d.RGBA32I)),fe===d.RGB&&We===d.UNSIGNED_INT_5_9_9_9_REV&&(et=d.RGB9_E5),fe===d.RGBA){const ht=$e?vg:vn.getTransfer(Ke);We===d.FLOAT&&(et=d.RGBA32F),We===d.HALF_FLOAT&&(et=d.RGBA16F),We===d.UNSIGNED_BYTE&&(et=ht===Dn?d.SRGB8_ALPHA8:d.RGBA8),We===d.UNSIGNED_SHORT_4_4_4_4&&(et=d.RGBA4),We===d.UNSIGNED_SHORT_5_5_5_1&&(et=d.RGB5_A1)}return(et===d.R16F||et===d.R32F||et===d.RG16F||et===d.RG32F||et===d.RGBA16F||et===d.RGBA32F)&&t.get("EXT_color_buffer_float"),et}function w(_e,fe){let We;return _e?fe===null||fe===zu||fe===Sd?We=d.DEPTH24_STENCIL8:fe===jo?We=d.DEPTH32F_STENCIL8:fe===pp&&(We=d.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):fe===null||fe===zu||fe===Sd?We=d.DEPTH_COMPONENT24:fe===jo?We=d.DEPTH_COMPONENT32F:fe===pp&&(We=d.DEPTH_COMPONENT16),We}function T(_e,fe){return v(_e)===!0||_e.isFramebufferTexture&&_e.minFilter!==fs&&_e.minFilter!==Ei?Math.log2(Math.max(fe.width,fe.height))+1:_e.mipmaps!==void 0&&_e.mipmaps.length>0?_e.mipmaps.length:_e.isCompressedTexture&&Array.isArray(_e.image)?fe.mipmaps.length:1}function R(_e){const fe=_e.target;fe.removeEventListener("dispose",R),P(fe),fe.isVideoTexture&&h.delete(fe)}function C(_e){const fe=_e.target;fe.removeEventListener("dispose",C),D(fe)}function P(_e){const fe=r.get(_e);if(fe.__webglInit===void 0)return;const We=_e.source,Ke=c.get(We);if(Ke){const $e=Ke[fe.__cacheKey];$e.usedTimes--,$e.usedTimes===0&&I(_e),Object.keys(Ke).length===0&&c.delete(We)}r.remove(_e)}function I(_e){const fe=r.get(_e);d.deleteTexture(fe.__webglTexture);const We=_e.source,Ke=c.get(We);delete Ke[fe.__cacheKey],s.memory.textures--}function D(_e){const fe=r.get(_e);if(_e.depthTexture&&(_e.depthTexture.dispose(),r.remove(_e.depthTexture)),_e.isWebGLCubeRenderTarget)for(let Ke=0;Ke<6;Ke++){if(Array.isArray(fe.__webglFramebuffer[Ke]))for(let $e=0;$e<fe.__webglFramebuffer[Ke].length;$e++)d.deleteFramebuffer(fe.__webglFramebuffer[Ke][$e]);else d.deleteFramebuffer(fe.__webglFramebuffer[Ke]);fe.__webglDepthbuffer&&d.deleteRenderbuffer(fe.__webglDepthbuffer[Ke])}else{if(Array.isArray(fe.__webglFramebuffer))for(let Ke=0;Ke<fe.__webglFramebuffer.length;Ke++)d.deleteFramebuffer(fe.__webglFramebuffer[Ke]);else d.deleteFramebuffer(fe.__webglFramebuffer);if(fe.__webglDepthbuffer&&d.deleteRenderbuffer(fe.__webglDepthbuffer),fe.__webglMultisampledFramebuffer&&d.deleteFramebuffer(fe.__webglMultisampledFramebuffer),fe.__webglColorRenderbuffer)for(let Ke=0;Ke<fe.__webglColorRenderbuffer.length;Ke++)fe.__webglColorRenderbuffer[Ke]&&d.deleteRenderbuffer(fe.__webglColorRenderbuffer[Ke]);fe.__webglDepthRenderbuffer&&d.deleteRenderbuffer(fe.__webglDepthRenderbuffer)}const We=_e.textures;for(let Ke=0,$e=We.length;Ke<$e;Ke++){const et=r.get(We[Ke]);et.__webglTexture&&(d.deleteTexture(et.__webglTexture),s.memory.textures--),r.remove(We[Ke])}r.remove(_e)}let j=0;function N(){j=0}function O(){const _e=j;return _e>=i.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+_e+" texture units while this GPU supports only "+i.maxTextures),j+=1,_e}function W(_e){const fe=[];return fe.push(_e.wrapS),fe.push(_e.wrapT),fe.push(_e.wrapR||0),fe.push(_e.magFilter),fe.push(_e.minFilter),fe.push(_e.anisotropy),fe.push(_e.internalFormat),fe.push(_e.format),fe.push(_e.type),fe.push(_e.generateMipmaps),fe.push(_e.premultiplyAlpha),fe.push(_e.flipY),fe.push(_e.unpackAlignment),fe.push(_e.colorSpace),fe.join()}function X(_e,fe){const We=r.get(_e);if(_e.isVideoTexture&&je(_e),_e.isRenderTargetTexture===!1&&_e.version>0&&We.__version!==_e.version){const Ke=_e.image;if(Ke===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Ke.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{U(We,_e,fe);return}}n.bindTexture(d.TEXTURE_2D,We.__webglTexture,d.TEXTURE0+fe)}function J(_e,fe){const We=r.get(_e);if(_e.version>0&&We.__version!==_e.version){U(We,_e,fe);return}n.bindTexture(d.TEXTURE_2D_ARRAY,We.__webglTexture,d.TEXTURE0+fe)}function ee(_e,fe){const We=r.get(_e);if(_e.version>0&&We.__version!==_e.version){U(We,_e,fe);return}n.bindTexture(d.TEXTURE_3D,We.__webglTexture,d.TEXTURE0+fe)}function V(_e,fe){const We=r.get(_e);if(_e.version>0&&We.__version!==_e.version){K(We,_e,fe);return}n.bindTexture(d.TEXTURE_CUBE_MAP,We.__webglTexture,d.TEXTURE0+fe)}const q={[Hc]:d.REPEAT,[ia]:d.CLAMP_TO_EDGE,[hp]:d.MIRRORED_REPEAT},Y={[fs]:d.NEAREST,[l_]:d.NEAREST_MIPMAP_NEAREST,[td]:d.NEAREST_MIPMAP_LINEAR,[Ei]:d.LINEAR,[ip]:d.LINEAR_MIPMAP_NEAREST,[La]:d.LINEAR_MIPMAP_LINEAR},Z={[RE]:d.NEVER,[BE]:d.ALWAYS,[PE]:d.LESS,[Kb]:d.LEQUAL,[IE]:d.EQUAL,[DE]:d.GEQUAL,[jE]:d.GREATER,[LE]:d.NOTEQUAL};function ce(_e,fe){if(fe.type===jo&&t.has("OES_texture_float_linear")===!1&&(fe.magFilter===Ei||fe.magFilter===ip||fe.magFilter===td||fe.magFilter===La||fe.minFilter===Ei||fe.minFilter===ip||fe.minFilter===td||fe.minFilter===La)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),d.texParameteri(_e,d.TEXTURE_WRAP_S,q[fe.wrapS]),d.texParameteri(_e,d.TEXTURE_WRAP_T,q[fe.wrapT]),(_e===d.TEXTURE_3D||_e===d.TEXTURE_2D_ARRAY)&&d.texParameteri(_e,d.TEXTURE_WRAP_R,q[fe.wrapR]),d.texParameteri(_e,d.TEXTURE_MAG_FILTER,Y[fe.magFilter]),d.texParameteri(_e,d.TEXTURE_MIN_FILTER,Y[fe.minFilter]),fe.compareFunction&&(d.texParameteri(_e,d.TEXTURE_COMPARE_MODE,d.COMPARE_REF_TO_TEXTURE),d.texParameteri(_e,d.TEXTURE_COMPARE_FUNC,Z[fe.compareFunction])),t.has("EXT_texture_filter_anisotropic")===!0){if(fe.magFilter===fs||fe.minFilter!==td&&fe.minFilter!==La||fe.type===jo&&t.has("OES_texture_float_linear")===!1)return;if(fe.anisotropy>1||r.get(fe).__currentAnisotropy){const We=t.get("EXT_texture_filter_anisotropic");d.texParameterf(_e,We.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(fe.anisotropy,i.getMaxAnisotropy())),r.get(fe).__currentAnisotropy=fe.anisotropy}}}function B(_e,fe){let We=!1;_e.__webglInit===void 0&&(_e.__webglInit=!0,fe.addEventListener("dispose",R));const Ke=fe.source;let $e=c.get(Ke);$e===void 0&&($e={},c.set(Ke,$e));const et=W(fe);if(et!==_e.__cacheKey){$e[et]===void 0&&($e[et]={texture:d.createTexture(),usedTimes:0},s.memory.textures++,We=!0),$e[et].usedTimes++;const ht=$e[_e.__cacheKey];ht!==void 0&&($e[_e.__cacheKey].usedTimes--,ht.usedTimes===0&&I(fe)),_e.__cacheKey=et,_e.__webglTexture=$e[et].texture}return We}function U(_e,fe,We){let Ke=d.TEXTURE_2D;(fe.isDataArrayTexture||fe.isCompressedArrayTexture)&&(Ke=d.TEXTURE_2D_ARRAY),fe.isData3DTexture&&(Ke=d.TEXTURE_3D);const $e=B(_e,fe),et=fe.source;n.bindTexture(Ke,_e.__webglTexture,d.TEXTURE0+We);const ht=r.get(et);if(et.version!==ht.__version||$e===!0){n.activeTexture(d.TEXTURE0+We);const Be=vn.getPrimaries(vn.workingColorSpace),rt=fe.colorSpace===Iu?null:vn.getPrimaries(fe.colorSpace),Ye=fe.colorSpace===Iu||Be===rt?d.NONE:d.BROWSER_DEFAULT_WEBGL;d.pixelStorei(d.UNPACK_FLIP_Y_WEBGL,fe.flipY),d.pixelStorei(d.UNPACK_PREMULTIPLY_ALPHA_WEBGL,fe.premultiplyAlpha),d.pixelStorei(d.UNPACK_ALIGNMENT,fe.unpackAlignment),d.pixelStorei(d.UNPACK_COLORSPACE_CONVERSION_WEBGL,Ye);let de=y(fe.image,!1,i.maxTextureSize);de=Ue(fe,de);const ge=o.convert(fe.format,fe.colorSpace),ue=o.convert(fe.type);let Se=b(fe.internalFormat,ge,ue,fe.colorSpace,fe.isVideoTexture);ce(Ke,fe);let De;const be=fe.mipmaps,ke=fe.isVideoTexture!==!0,ot=ht.__version===void 0||$e===!0,Ce=et.dataReady,it=T(fe,de);if(fe.isDepthTexture)Se=w(fe.format===Md,fe.type),ot&&(ke?n.texStorage2D(d.TEXTURE_2D,1,Se,de.width,de.height):n.texImage2D(d.TEXTURE_2D,0,Se,de.width,de.height,0,ge,ue,null));else if(fe.isDataTexture)if(be.length>0){ke&&ot&&n.texStorage2D(d.TEXTURE_2D,it,Se,be[0].width,be[0].height);for(let Xe=0,ut=be.length;Xe<ut;Xe++)De=be[Xe],ke?Ce&&n.texSubImage2D(d.TEXTURE_2D,Xe,0,0,De.width,De.height,ge,ue,De.data):n.texImage2D(d.TEXTURE_2D,Xe,Se,De.width,De.height,0,ge,ue,De.data);fe.generateMipmaps=!1}else ke?(ot&&n.texStorage2D(d.TEXTURE_2D,it,Se,de.width,de.height),Ce&&n.texSubImage2D(d.TEXTURE_2D,0,0,0,de.width,de.height,ge,ue,de.data)):n.texImage2D(d.TEXTURE_2D,0,Se,de.width,de.height,0,ge,ue,de.data);else if(fe.isCompressedTexture)if(fe.isCompressedArrayTexture){ke&&ot&&n.texStorage3D(d.TEXTURE_2D_ARRAY,it,Se,be[0].width,be[0].height,de.depth);for(let Xe=0,ut=be.length;Xe<ut;Xe++)if(De=be[Xe],fe.format!==zs)if(ge!==null)if(ke){if(Ce)if(fe.layerUpdates.size>0){const bt=ib(De.width,De.height,fe.format,fe.type);for(const vt of fe.layerUpdates){const Rt=De.data.subarray(vt*bt/De.data.BYTES_PER_ELEMENT,(vt+1)*bt/De.data.BYTES_PER_ELEMENT);n.compressedTexSubImage3D(d.TEXTURE_2D_ARRAY,Xe,0,0,vt,De.width,De.height,1,ge,Rt)}fe.clearLayerUpdates()}else n.compressedTexSubImage3D(d.TEXTURE_2D_ARRAY,Xe,0,0,0,De.width,De.height,de.depth,ge,De.data)}else n.compressedTexImage3D(d.TEXTURE_2D_ARRAY,Xe,Se,De.width,De.height,de.depth,0,De.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else ke?Ce&&n.texSubImage3D(d.TEXTURE_2D_ARRAY,Xe,0,0,0,De.width,De.height,de.depth,ge,ue,De.data):n.texImage3D(d.TEXTURE_2D_ARRAY,Xe,Se,De.width,De.height,de.depth,0,ge,ue,De.data)}else{ke&&ot&&n.texStorage2D(d.TEXTURE_2D,it,Se,be[0].width,be[0].height);for(let Xe=0,ut=be.length;Xe<ut;Xe++)De=be[Xe],fe.format!==zs?ge!==null?ke?Ce&&n.compressedTexSubImage2D(d.TEXTURE_2D,Xe,0,0,De.width,De.height,ge,De.data):n.compressedTexImage2D(d.TEXTURE_2D,Xe,Se,De.width,De.height,0,De.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):ke?Ce&&n.texSubImage2D(d.TEXTURE_2D,Xe,0,0,De.width,De.height,ge,ue,De.data):n.texImage2D(d.TEXTURE_2D,Xe,Se,De.width,De.height,0,ge,ue,De.data)}else if(fe.isDataArrayTexture)if(ke){if(ot&&n.texStorage3D(d.TEXTURE_2D_ARRAY,it,Se,de.width,de.height,de.depth),Ce)if(fe.layerUpdates.size>0){const Xe=ib(de.width,de.height,fe.format,fe.type);for(const ut of fe.layerUpdates){const bt=de.data.subarray(ut*Xe/de.data.BYTES_PER_ELEMENT,(ut+1)*Xe/de.data.BYTES_PER_ELEMENT);n.texSubImage3D(d.TEXTURE_2D_ARRAY,0,0,0,ut,de.width,de.height,1,ge,ue,bt)}fe.clearLayerUpdates()}else n.texSubImage3D(d.TEXTURE_2D_ARRAY,0,0,0,0,de.width,de.height,de.depth,ge,ue,de.data)}else n.texImage3D(d.TEXTURE_2D_ARRAY,0,Se,de.width,de.height,de.depth,0,ge,ue,de.data);else if(fe.isData3DTexture)ke?(ot&&n.texStorage3D(d.TEXTURE_3D,it,Se,de.width,de.height,de.depth),Ce&&n.texSubImage3D(d.TEXTURE_3D,0,0,0,0,de.width,de.height,de.depth,ge,ue,de.data)):n.texImage3D(d.TEXTURE_3D,0,Se,de.width,de.height,de.depth,0,ge,ue,de.data);else if(fe.isFramebufferTexture){if(ot)if(ke)n.texStorage2D(d.TEXTURE_2D,it,Se,de.width,de.height);else{let Xe=de.width,ut=de.height;for(let bt=0;bt<it;bt++)n.texImage2D(d.TEXTURE_2D,bt,Se,Xe,ut,0,ge,ue,null),Xe>>=1,ut>>=1}}else if(be.length>0){if(ke&&ot){const Xe=Ge(be[0]);n.texStorage2D(d.TEXTURE_2D,it,Se,Xe.width,Xe.height)}for(let Xe=0,ut=be.length;Xe<ut;Xe++)De=be[Xe],ke?Ce&&n.texSubImage2D(d.TEXTURE_2D,Xe,0,0,ge,ue,De):n.texImage2D(d.TEXTURE_2D,Xe,Se,ge,ue,De);fe.generateMipmaps=!1}else if(ke){if(ot){const Xe=Ge(de);n.texStorage2D(d.TEXTURE_2D,it,Se,Xe.width,Xe.height)}Ce&&n.texSubImage2D(d.TEXTURE_2D,0,0,0,ge,ue,de)}else n.texImage2D(d.TEXTURE_2D,0,Se,ge,ue,de);v(fe)&&g(Ke),ht.__version=et.version,fe.onUpdate&&fe.onUpdate(fe)}_e.__version=fe.version}function K(_e,fe,We){if(fe.image.length!==6)return;const Ke=B(_e,fe),$e=fe.source;n.bindTexture(d.TEXTURE_CUBE_MAP,_e.__webglTexture,d.TEXTURE0+We);const et=r.get($e);if($e.version!==et.__version||Ke===!0){n.activeTexture(d.TEXTURE0+We);const ht=vn.getPrimaries(vn.workingColorSpace),Be=fe.colorSpace===Iu?null:vn.getPrimaries(fe.colorSpace),rt=fe.colorSpace===Iu||ht===Be?d.NONE:d.BROWSER_DEFAULT_WEBGL;d.pixelStorei(d.UNPACK_FLIP_Y_WEBGL,fe.flipY),d.pixelStorei(d.UNPACK_PREMULTIPLY_ALPHA_WEBGL,fe.premultiplyAlpha),d.pixelStorei(d.UNPACK_ALIGNMENT,fe.unpackAlignment),d.pixelStorei(d.UNPACK_COLORSPACE_CONVERSION_WEBGL,rt);const Ye=fe.isCompressedTexture||fe.image[0].isCompressedTexture,de=fe.image[0]&&fe.image[0].isDataTexture,ge=[];for(let ut=0;ut<6;ut++)!Ye&&!de?ge[ut]=y(fe.image[ut],!0,i.maxCubemapSize):ge[ut]=de?fe.image[ut].image:fe.image[ut],ge[ut]=Ue(fe,ge[ut]);const ue=ge[0],Se=o.convert(fe.format,fe.colorSpace),De=o.convert(fe.type),be=b(fe.internalFormat,Se,De,fe.colorSpace),ke=fe.isVideoTexture!==!0,ot=et.__version===void 0||Ke===!0,Ce=$e.dataReady;let it=T(fe,ue);ce(d.TEXTURE_CUBE_MAP,fe);let Xe;if(Ye){ke&&ot&&n.texStorage2D(d.TEXTURE_CUBE_MAP,it,be,ue.width,ue.height);for(let ut=0;ut<6;ut++){Xe=ge[ut].mipmaps;for(let bt=0;bt<Xe.length;bt++){const vt=Xe[bt];fe.format!==zs?Se!==null?ke?Ce&&n.compressedTexSubImage2D(d.TEXTURE_CUBE_MAP_POSITIVE_X+ut,bt,0,0,vt.width,vt.height,Se,vt.data):n.compressedTexImage2D(d.TEXTURE_CUBE_MAP_POSITIVE_X+ut,bt,be,vt.width,vt.height,0,vt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):ke?Ce&&n.texSubImage2D(d.TEXTURE_CUBE_MAP_POSITIVE_X+ut,bt,0,0,vt.width,vt.height,Se,De,vt.data):n.texImage2D(d.TEXTURE_CUBE_MAP_POSITIVE_X+ut,bt,be,vt.width,vt.height,0,Se,De,vt.data)}}}else{if(Xe=fe.mipmaps,ke&&ot){Xe.length>0&&it++;const ut=Ge(ge[0]);n.texStorage2D(d.TEXTURE_CUBE_MAP,it,be,ut.width,ut.height)}for(let ut=0;ut<6;ut++)if(de){ke?Ce&&n.texSubImage2D(d.TEXTURE_CUBE_MAP_POSITIVE_X+ut,0,0,0,ge[ut].width,ge[ut].height,Se,De,ge[ut].data):n.texImage2D(d.TEXTURE_CUBE_MAP_POSITIVE_X+ut,0,be,ge[ut].width,ge[ut].height,0,Se,De,ge[ut].data);for(let bt=0;bt<Xe.length;bt++){const Rt=Xe[bt].image[ut].image;ke?Ce&&n.texSubImage2D(d.TEXTURE_CUBE_MAP_POSITIVE_X+ut,bt+1,0,0,Rt.width,Rt.height,Se,De,Rt.data):n.texImage2D(d.TEXTURE_CUBE_MAP_POSITIVE_X+ut,bt+1,be,Rt.width,Rt.height,0,Se,De,Rt.data)}}else{ke?Ce&&n.texSubImage2D(d.TEXTURE_CUBE_MAP_POSITIVE_X+ut,0,0,0,Se,De,ge[ut]):n.texImage2D(d.TEXTURE_CUBE_MAP_POSITIVE_X+ut,0,be,Se,De,ge[ut]);for(let bt=0;bt<Xe.length;bt++){const vt=Xe[bt];ke?Ce&&n.texSubImage2D(d.TEXTURE_CUBE_MAP_POSITIVE_X+ut,bt+1,0,0,Se,De,vt.image[ut]):n.texImage2D(d.TEXTURE_CUBE_MAP_POSITIVE_X+ut,bt+1,be,Se,De,vt.image[ut])}}}v(fe)&&g(d.TEXTURE_CUBE_MAP),et.__version=$e.version,fe.onUpdate&&fe.onUpdate(fe)}_e.__version=fe.version}function re(_e,fe,We,Ke,$e,et){const ht=o.convert(We.format,We.colorSpace),Be=o.convert(We.type),rt=b(We.internalFormat,ht,Be,We.colorSpace),Ye=r.get(fe),de=r.get(We);if(de.__renderTarget=fe,!Ye.__hasExternalTextures){const ge=Math.max(1,fe.width>>et),ue=Math.max(1,fe.height>>et);$e===d.TEXTURE_3D||$e===d.TEXTURE_2D_ARRAY?n.texImage3D($e,et,rt,ge,ue,fe.depth,0,ht,Be,null):n.texImage2D($e,et,rt,ge,ue,0,ht,Be,null)}n.bindFramebuffer(d.FRAMEBUFFER,_e),Ae(fe)?a.framebufferTexture2DMultisampleEXT(d.FRAMEBUFFER,Ke,$e,de.__webglTexture,0,Pe(fe)):($e===d.TEXTURE_2D||$e>=d.TEXTURE_CUBE_MAP_POSITIVE_X&&$e<=d.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&d.framebufferTexture2D(d.FRAMEBUFFER,Ke,$e,de.__webglTexture,et),n.bindFramebuffer(d.FRAMEBUFFER,null)}function ae(_e,fe,We){if(d.bindRenderbuffer(d.RENDERBUFFER,_e),fe.depthBuffer){const Ke=fe.depthTexture,$e=Ke&&Ke.isDepthTexture?Ke.type:null,et=w(fe.stencilBuffer,$e),ht=fe.stencilBuffer?d.DEPTH_STENCIL_ATTACHMENT:d.DEPTH_ATTACHMENT,Be=Pe(fe);Ae(fe)?a.renderbufferStorageMultisampleEXT(d.RENDERBUFFER,Be,et,fe.width,fe.height):We?d.renderbufferStorageMultisample(d.RENDERBUFFER,Be,et,fe.width,fe.height):d.renderbufferStorage(d.RENDERBUFFER,et,fe.width,fe.height),d.framebufferRenderbuffer(d.FRAMEBUFFER,ht,d.RENDERBUFFER,_e)}else{const Ke=fe.textures;for(let $e=0;$e<Ke.length;$e++){const et=Ke[$e],ht=o.convert(et.format,et.colorSpace),Be=o.convert(et.type),rt=b(et.internalFormat,ht,Be,et.colorSpace),Ye=Pe(fe);We&&Ae(fe)===!1?d.renderbufferStorageMultisample(d.RENDERBUFFER,Ye,rt,fe.width,fe.height):Ae(fe)?a.renderbufferStorageMultisampleEXT(d.RENDERBUFFER,Ye,rt,fe.width,fe.height):d.renderbufferStorage(d.RENDERBUFFER,rt,fe.width,fe.height)}}d.bindRenderbuffer(d.RENDERBUFFER,null)}function pe(_e,fe){if(fe&&fe.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(d.FRAMEBUFFER,_e),!(fe.depthTexture&&fe.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const Ke=r.get(fe.depthTexture);Ke.__renderTarget=fe,(!Ke.__webglTexture||fe.depthTexture.image.width!==fe.width||fe.depthTexture.image.height!==fe.height)&&(fe.depthTexture.image.width=fe.width,fe.depthTexture.image.height=fe.height,fe.depthTexture.needsUpdate=!0),X(fe.depthTexture,0);const $e=Ke.__webglTexture,et=Pe(fe);if(fe.depthTexture.format===fd)Ae(fe)?a.framebufferTexture2DMultisampleEXT(d.FRAMEBUFFER,d.DEPTH_ATTACHMENT,d.TEXTURE_2D,$e,0,et):d.framebufferTexture2D(d.FRAMEBUFFER,d.DEPTH_ATTACHMENT,d.TEXTURE_2D,$e,0);else if(fe.depthTexture.format===Md)Ae(fe)?a.framebufferTexture2DMultisampleEXT(d.FRAMEBUFFER,d.DEPTH_STENCIL_ATTACHMENT,d.TEXTURE_2D,$e,0,et):d.framebufferTexture2D(d.FRAMEBUFFER,d.DEPTH_STENCIL_ATTACHMENT,d.TEXTURE_2D,$e,0);else throw new Error("Unknown depthTexture format")}function ye(_e){const fe=r.get(_e),We=_e.isWebGLCubeRenderTarget===!0;if(fe.__boundDepthTexture!==_e.depthTexture){const Ke=_e.depthTexture;if(fe.__depthDisposeCallback&&fe.__depthDisposeCallback(),Ke){const $e=()=>{delete fe.__boundDepthTexture,delete fe.__depthDisposeCallback,Ke.removeEventListener("dispose",$e)};Ke.addEventListener("dispose",$e),fe.__depthDisposeCallback=$e}fe.__boundDepthTexture=Ke}if(_e.depthTexture&&!fe.__autoAllocateDepthBuffer){if(We)throw new Error("target.depthTexture not supported in Cube render targets");pe(fe.__webglFramebuffer,_e)}else if(We){fe.__webglDepthbuffer=[];for(let Ke=0;Ke<6;Ke++)if(n.bindFramebuffer(d.FRAMEBUFFER,fe.__webglFramebuffer[Ke]),fe.__webglDepthbuffer[Ke]===void 0)fe.__webglDepthbuffer[Ke]=d.createRenderbuffer(),ae(fe.__webglDepthbuffer[Ke],_e,!1);else{const $e=_e.stencilBuffer?d.DEPTH_STENCIL_ATTACHMENT:d.DEPTH_ATTACHMENT,et=fe.__webglDepthbuffer[Ke];d.bindRenderbuffer(d.RENDERBUFFER,et),d.framebufferRenderbuffer(d.FRAMEBUFFER,$e,d.RENDERBUFFER,et)}}else if(n.bindFramebuffer(d.FRAMEBUFFER,fe.__webglFramebuffer),fe.__webglDepthbuffer===void 0)fe.__webglDepthbuffer=d.createRenderbuffer(),ae(fe.__webglDepthbuffer,_e,!1);else{const Ke=_e.stencilBuffer?d.DEPTH_STENCIL_ATTACHMENT:d.DEPTH_ATTACHMENT,$e=fe.__webglDepthbuffer;d.bindRenderbuffer(d.RENDERBUFFER,$e),d.framebufferRenderbuffer(d.FRAMEBUFFER,Ke,d.RENDERBUFFER,$e)}n.bindFramebuffer(d.FRAMEBUFFER,null)}function Re(_e,fe,We){const Ke=r.get(_e);fe!==void 0&&re(Ke.__webglFramebuffer,_e,_e.texture,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,0),We!==void 0&&ye(_e)}function Me(_e){const fe=_e.texture,We=r.get(_e),Ke=r.get(fe);_e.addEventListener("dispose",C);const $e=_e.textures,et=_e.isWebGLCubeRenderTarget===!0,ht=$e.length>1;if(ht||(Ke.__webglTexture===void 0&&(Ke.__webglTexture=d.createTexture()),Ke.__version=fe.version,s.memory.textures++),et){We.__webglFramebuffer=[];for(let Be=0;Be<6;Be++)if(fe.mipmaps&&fe.mipmaps.length>0){We.__webglFramebuffer[Be]=[];for(let rt=0;rt<fe.mipmaps.length;rt++)We.__webglFramebuffer[Be][rt]=d.createFramebuffer()}else We.__webglFramebuffer[Be]=d.createFramebuffer()}else{if(fe.mipmaps&&fe.mipmaps.length>0){We.__webglFramebuffer=[];for(let Be=0;Be<fe.mipmaps.length;Be++)We.__webglFramebuffer[Be]=d.createFramebuffer()}else We.__webglFramebuffer=d.createFramebuffer();if(ht)for(let Be=0,rt=$e.length;Be<rt;Be++){const Ye=r.get($e[Be]);Ye.__webglTexture===void 0&&(Ye.__webglTexture=d.createTexture(),s.memory.textures++)}if(_e.samples>0&&Ae(_e)===!1){We.__webglMultisampledFramebuffer=d.createFramebuffer(),We.__webglColorRenderbuffer=[],n.bindFramebuffer(d.FRAMEBUFFER,We.__webglMultisampledFramebuffer);for(let Be=0;Be<$e.length;Be++){const rt=$e[Be];We.__webglColorRenderbuffer[Be]=d.createRenderbuffer(),d.bindRenderbuffer(d.RENDERBUFFER,We.__webglColorRenderbuffer[Be]);const Ye=o.convert(rt.format,rt.colorSpace),de=o.convert(rt.type),ge=b(rt.internalFormat,Ye,de,rt.colorSpace,_e.isXRRenderTarget===!0),ue=Pe(_e);d.renderbufferStorageMultisample(d.RENDERBUFFER,ue,ge,_e.width,_e.height),d.framebufferRenderbuffer(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0+Be,d.RENDERBUFFER,We.__webglColorRenderbuffer[Be])}d.bindRenderbuffer(d.RENDERBUFFER,null),_e.depthBuffer&&(We.__webglDepthRenderbuffer=d.createRenderbuffer(),ae(We.__webglDepthRenderbuffer,_e,!0)),n.bindFramebuffer(d.FRAMEBUFFER,null)}}if(et){n.bindTexture(d.TEXTURE_CUBE_MAP,Ke.__webglTexture),ce(d.TEXTURE_CUBE_MAP,fe);for(let Be=0;Be<6;Be++)if(fe.mipmaps&&fe.mipmaps.length>0)for(let rt=0;rt<fe.mipmaps.length;rt++)re(We.__webglFramebuffer[Be][rt],_e,fe,d.COLOR_ATTACHMENT0,d.TEXTURE_CUBE_MAP_POSITIVE_X+Be,rt);else re(We.__webglFramebuffer[Be],_e,fe,d.COLOR_ATTACHMENT0,d.TEXTURE_CUBE_MAP_POSITIVE_X+Be,0);v(fe)&&g(d.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(ht){for(let Be=0,rt=$e.length;Be<rt;Be++){const Ye=$e[Be],de=r.get(Ye);n.bindTexture(d.TEXTURE_2D,de.__webglTexture),ce(d.TEXTURE_2D,Ye),re(We.__webglFramebuffer,_e,Ye,d.COLOR_ATTACHMENT0+Be,d.TEXTURE_2D,0),v(Ye)&&g(d.TEXTURE_2D)}n.unbindTexture()}else{let Be=d.TEXTURE_2D;if((_e.isWebGL3DRenderTarget||_e.isWebGLArrayRenderTarget)&&(Be=_e.isWebGL3DRenderTarget?d.TEXTURE_3D:d.TEXTURE_2D_ARRAY),n.bindTexture(Be,Ke.__webglTexture),ce(Be,fe),fe.mipmaps&&fe.mipmaps.length>0)for(let rt=0;rt<fe.mipmaps.length;rt++)re(We.__webglFramebuffer[rt],_e,fe,d.COLOR_ATTACHMENT0,Be,rt);else re(We.__webglFramebuffer,_e,fe,d.COLOR_ATTACHMENT0,Be,0);v(fe)&&g(Be),n.unbindTexture()}_e.depthBuffer&&ye(_e)}function xe(_e){const fe=_e.textures;for(let We=0,Ke=fe.length;We<Ke;We++){const $e=fe[We];if(v($e)){const et=x(_e),ht=r.get($e).__webglTexture;n.bindTexture(et,ht),g(et),n.unbindTexture()}}}const ve=[],ne=[];function Te(_e){if(_e.samples>0){if(Ae(_e)===!1){const fe=_e.textures,We=_e.width,Ke=_e.height;let $e=d.COLOR_BUFFER_BIT;const et=_e.stencilBuffer?d.DEPTH_STENCIL_ATTACHMENT:d.DEPTH_ATTACHMENT,ht=r.get(_e),Be=fe.length>1;if(Be)for(let rt=0;rt<fe.length;rt++)n.bindFramebuffer(d.FRAMEBUFFER,ht.__webglMultisampledFramebuffer),d.framebufferRenderbuffer(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0+rt,d.RENDERBUFFER,null),n.bindFramebuffer(d.FRAMEBUFFER,ht.__webglFramebuffer),d.framebufferTexture2D(d.DRAW_FRAMEBUFFER,d.COLOR_ATTACHMENT0+rt,d.TEXTURE_2D,null,0);n.bindFramebuffer(d.READ_FRAMEBUFFER,ht.__webglMultisampledFramebuffer),n.bindFramebuffer(d.DRAW_FRAMEBUFFER,ht.__webglFramebuffer);for(let rt=0;rt<fe.length;rt++){if(_e.resolveDepthBuffer&&(_e.depthBuffer&&($e|=d.DEPTH_BUFFER_BIT),_e.stencilBuffer&&_e.resolveStencilBuffer&&($e|=d.STENCIL_BUFFER_BIT)),Be){d.framebufferRenderbuffer(d.READ_FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.RENDERBUFFER,ht.__webglColorRenderbuffer[rt]);const Ye=r.get(fe[rt]).__webglTexture;d.framebufferTexture2D(d.DRAW_FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,Ye,0)}d.blitFramebuffer(0,0,We,Ke,0,0,We,Ke,$e,d.NEAREST),l===!0&&(ve.length=0,ne.length=0,ve.push(d.COLOR_ATTACHMENT0+rt),_e.depthBuffer&&_e.resolveDepthBuffer===!1&&(ve.push(et),ne.push(et),d.invalidateFramebuffer(d.DRAW_FRAMEBUFFER,ne)),d.invalidateFramebuffer(d.READ_FRAMEBUFFER,ve))}if(n.bindFramebuffer(d.READ_FRAMEBUFFER,null),n.bindFramebuffer(d.DRAW_FRAMEBUFFER,null),Be)for(let rt=0;rt<fe.length;rt++){n.bindFramebuffer(d.FRAMEBUFFER,ht.__webglMultisampledFramebuffer),d.framebufferRenderbuffer(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0+rt,d.RENDERBUFFER,ht.__webglColorRenderbuffer[rt]);const Ye=r.get(fe[rt]).__webglTexture;n.bindFramebuffer(d.FRAMEBUFFER,ht.__webglFramebuffer),d.framebufferTexture2D(d.DRAW_FRAMEBUFFER,d.COLOR_ATTACHMENT0+rt,d.TEXTURE_2D,Ye,0)}n.bindFramebuffer(d.DRAW_FRAMEBUFFER,ht.__webglMultisampledFramebuffer)}else if(_e.depthBuffer&&_e.resolveDepthBuffer===!1&&l){const fe=_e.stencilBuffer?d.DEPTH_STENCIL_ATTACHMENT:d.DEPTH_ATTACHMENT;d.invalidateFramebuffer(d.DRAW_FRAMEBUFFER,[fe])}}}function Pe(_e){return Math.min(i.maxSamples,_e.samples)}function Ae(_e){const fe=r.get(_e);return _e.samples>0&&t.has("WEBGL_multisampled_render_to_texture")===!0&&fe.__useRenderToTexture!==!1}function je(_e){const fe=s.render.frame;h.get(_e)!==fe&&(h.set(_e,fe),_e.update())}function Ue(_e,fe){const We=_e.colorSpace,Ke=_e.format,$e=_e.type;return _e.isCompressedTexture===!0||_e.isVideoTexture===!0||We!==Ad&&We!==Iu&&(vn.getTransfer(We)===Dn?(Ke!==zs||$e!==hl)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",We)),fe}function Ge(_e){return typeof HTMLImageElement<"u"&&_e instanceof HTMLImageElement?(u.width=_e.naturalWidth||_e.width,u.height=_e.naturalHeight||_e.height):typeof VideoFrame<"u"&&_e instanceof VideoFrame?(u.width=_e.displayWidth,u.height=_e.displayHeight):(u.width=_e.width,u.height=_e.height),u}this.allocateTextureUnit=O,this.resetTextureUnits=N,this.setTexture2D=X,this.setTexture2DArray=J,this.setTexture3D=ee,this.setTextureCube=V,this.rebindTextures=Re,this.setupRenderTarget=Me,this.updateRenderTargetMipmap=xe,this.updateMultisampleRenderTarget=Te,this.setupDepthRenderbuffer=ye,this.setupFrameBufferTexture=re,this.useMultisampledRTT=Ae}function NT(d,t){function n(r,i=Iu){let o;const s=vn.getTransfer(i);if(r===hl)return d.UNSIGNED_BYTE;if(r===c_)return d.UNSIGNED_SHORT_4_4_4_4;if(r===f_)return d.UNSIGNED_SHORT_5_5_5_1;if(r===Gb)return d.UNSIGNED_INT_5_9_9_9_REV;if(r===Nb)return d.BYTE;if(r===Ub)return d.SHORT;if(r===pp)return d.UNSIGNED_SHORT;if(r===u_)return d.INT;if(r===zu)return d.UNSIGNED_INT;if(r===jo)return d.FLOAT;if(r===Rp)return d.HALF_FLOAT;if(r===Hb)return d.ALPHA;if(r===zb)return d.RGB;if(r===zs)return d.RGBA;if(r===Vb)return d.LUMINANCE;if(r===Wb)return d.LUMINANCE_ALPHA;if(r===fd)return d.DEPTH_COMPONENT;if(r===Md)return d.DEPTH_STENCIL;if(r===d_)return d.RED;if(r===Fg)return d.RED_INTEGER;if(r===Xb)return d.RG;if(r===h_)return d.RG_INTEGER;if(r===p_)return d.RGBA_INTEGER;if(r===Jm||r===Km||r===Qm||r===Zm)if(s===Dn)if(o=t.get("WEBGL_compressed_texture_s3tc_srgb"),o!==null){if(r===Jm)return o.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(r===Km)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(r===Qm)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(r===Zm)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(o=t.get("WEBGL_compressed_texture_s3tc"),o!==null){if(r===Jm)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(r===Km)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(r===Qm)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(r===Zm)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(r===mv||r===gv||r===yv||r===vv)if(o=t.get("WEBGL_compressed_texture_pvrtc"),o!==null){if(r===mv)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(r===gv)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(r===yv)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(r===vv)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(r===_v||r===xv||r===bv)if(o=t.get("WEBGL_compressed_texture_etc"),o!==null){if(r===_v||r===xv)return s===Dn?o.COMPRESSED_SRGB8_ETC2:o.COMPRESSED_RGB8_ETC2;if(r===bv)return s===Dn?o.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:o.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(r===wv||r===Sv||r===Mv||r===Av||r===Ev||r===Tv||r===Cv||r===Rv||r===Pv||r===Iv||r===jv||r===Lv||r===Dv||r===Bv)if(o=t.get("WEBGL_compressed_texture_astc"),o!==null){if(r===wv)return s===Dn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:o.COMPRESSED_RGBA_ASTC_4x4_KHR;if(r===Sv)return s===Dn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:o.COMPRESSED_RGBA_ASTC_5x4_KHR;if(r===Mv)return s===Dn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:o.COMPRESSED_RGBA_ASTC_5x5_KHR;if(r===Av)return s===Dn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:o.COMPRESSED_RGBA_ASTC_6x5_KHR;if(r===Ev)return s===Dn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:o.COMPRESSED_RGBA_ASTC_6x6_KHR;if(r===Tv)return s===Dn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:o.COMPRESSED_RGBA_ASTC_8x5_KHR;if(r===Cv)return s===Dn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:o.COMPRESSED_RGBA_ASTC_8x6_KHR;if(r===Rv)return s===Dn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:o.COMPRESSED_RGBA_ASTC_8x8_KHR;if(r===Pv)return s===Dn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:o.COMPRESSED_RGBA_ASTC_10x5_KHR;if(r===Iv)return s===Dn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:o.COMPRESSED_RGBA_ASTC_10x6_KHR;if(r===jv)return s===Dn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:o.COMPRESSED_RGBA_ASTC_10x8_KHR;if(r===Lv)return s===Dn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:o.COMPRESSED_RGBA_ASTC_10x10_KHR;if(r===Dv)return s===Dn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:o.COMPRESSED_RGBA_ASTC_12x10_KHR;if(r===Bv)return s===Dn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:o.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(r===$m||r===kv||r===Ov)if(o=t.get("EXT_texture_compression_bptc"),o!==null){if(r===$m)return s===Dn?o.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:o.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(r===kv)return o.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(r===Ov)return o.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(r===Yb||r===Fv||r===Nv||r===Uv)if(o=t.get("EXT_texture_compression_rgtc"),o!==null){if(r===$m)return o.COMPRESSED_RED_RGTC1_EXT;if(r===Fv)return o.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(r===Nv)return o.COMPRESSED_RED_GREEN_RGTC2_EXT;if(r===Uv)return o.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return r===Sd?d.UNSIGNED_INT_24_8:d[r]!==void 0?d[r]:null}return{convert:n}}const vO={type:"move"};class lx{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Du,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Du,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Oe,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Oe),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Du,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Oe,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Oe),this._grip}dispatchEvent(t){return this._targetRay!==null&&this._targetRay.dispatchEvent(t),this._grip!==null&&this._grip.dispatchEvent(t),this._hand!==null&&this._hand.dispatchEvent(t),this}connect(t){if(t&&t.hand){const n=this._hand;if(n)for(const r of t.hand.values())this._getHandJoint(n,r)}return this.dispatchEvent({type:"connected",data:t}),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(t,n,r){let i=null,o=null,s=null;const a=this._targetRay,l=this._grip,u=this._hand;if(t&&n.session.visibilityState!=="visible-blurred"){if(u&&t.hand){s=!0;for(const y of t.hand.values()){const v=n.getJointPose(y,r),g=this._getHandJoint(u,y);v!==null&&(g.matrix.fromArray(v.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),g.matrixWorldNeedsUpdate=!0,g.jointRadius=v.radius),g.visible=v!==null}const h=u.joints["index-finger-tip"],p=u.joints["thumb-tip"],c=h.position.distanceTo(p.position),f=.02,m=.005;u.inputState.pinching&&c>f+m?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!u.inputState.pinching&&c<=f-m&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else l!==null&&t.gripSpace&&(o=n.getPose(t.gripSpace,r),o!==null&&(l.matrix.fromArray(o.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,o.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(o.linearVelocity)):l.hasLinearVelocity=!1,o.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(o.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(i=n.getPose(t.targetRaySpace,r),i===null&&o!==null&&(i=o),i!==null&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(vO)))}return a!==null&&(a.visible=i!==null),l!==null&&(l.visible=o!==null),u!==null&&(u.visible=s!==null),this}_getHandJoint(t,n){if(t.joints[n.jointName]===void 0){const r=new Du;r.matrixAutoUpdate=!1,r.visible=!1,t.joints[n.jointName]=r,t.add(r)}return t.joints[n.jointName]}}const _O=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,xO=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class bO{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(t,n,r){if(this.texture===null){const i=new ei,o=t.properties.get(i);o.__webglTexture=n.texture,(n.depthNear!==r.depthNear||n.depthFar!==r.depthFar)&&(this.depthNear=n.depthNear,this.depthFar=n.depthFar),this.texture=i}}getMesh(t){if(this.texture!==null&&this.mesh===null){const n=t.cameras[0].viewport,r=new pl({vertexShader:_O,fragmentShader:xO,uniforms:{depthColor:{value:this.texture},depthWidth:{value:n.z},depthHeight:{value:n.w}}});this.mesh=new Ti(new Ip(20,20),r)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class wO extends Wl{constructor(t,n){super();const r=this;let i=null,o=1,s=null,a="local-floor",l=1,u=null,h=null,p=null,c=null,f=null,m=null;const y=new bO,v=n.getContextAttributes();let g=null,x=null;const b=[],w=[],T=new Ct;let R=null;const C=new yi;C.viewport=new bn;const P=new yi;P.viewport=new bn;const I=[C,P],D=new CT;let j=null,N=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(U){let K=b[U];return K===void 0&&(K=new lx,b[U]=K),K.getTargetRaySpace()},this.getControllerGrip=function(U){let K=b[U];return K===void 0&&(K=new lx,b[U]=K),K.getGripSpace()},this.getHand=function(U){let K=b[U];return K===void 0&&(K=new lx,b[U]=K),K.getHandSpace()};function O(U){const K=w.indexOf(U.inputSource);if(K===-1)return;const re=b[K];re!==void 0&&(re.update(U.inputSource,U.frame,u||s),re.dispatchEvent({type:U.type,data:U.inputSource}))}function W(){i.removeEventListener("select",O),i.removeEventListener("selectstart",O),i.removeEventListener("selectend",O),i.removeEventListener("squeeze",O),i.removeEventListener("squeezestart",O),i.removeEventListener("squeezeend",O),i.removeEventListener("end",W),i.removeEventListener("inputsourceschange",X);for(let U=0;U<b.length;U++){const K=w[U];K!==null&&(w[U]=null,b[U].disconnect(K))}j=null,N=null,y.reset(),t.setRenderTarget(g),f=null,c=null,p=null,i=null,x=null,B.stop(),r.isPresenting=!1,t.setPixelRatio(R),t.setSize(T.width,T.height,!1),r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(U){o=U,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(U){a=U,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return u||s},this.setReferenceSpace=function(U){u=U},this.getBaseLayer=function(){return c!==null?c:f},this.getBinding=function(){return p},this.getFrame=function(){return m},this.getSession=function(){return i},this.setSession=async function(U){if(i=U,i!==null){if(g=t.getRenderTarget(),i.addEventListener("select",O),i.addEventListener("selectstart",O),i.addEventListener("selectend",O),i.addEventListener("squeeze",O),i.addEventListener("squeezestart",O),i.addEventListener("squeezeend",O),i.addEventListener("end",W),i.addEventListener("inputsourceschange",X),v.xrCompatible!==!0&&await n.makeXRCompatible(),R=t.getPixelRatio(),t.getSize(T),i.enabledFeatures!==void 0&&i.enabledFeatures.includes("layers")){let re=null,ae=null,pe=null;v.depth&&(pe=v.stencil?n.DEPTH24_STENCIL8:n.DEPTH_COMPONENT24,re=v.stencil?Md:fd,ae=v.stencil?Sd:zu);const ye={colorFormat:n.RGBA8,depthFormat:pe,scaleFactor:o};p=new XRWebGLBinding(i,n),c=p.createProjectionLayer(ye),i.updateRenderState({layers:[c]}),t.setPixelRatio(1),t.setSize(c.textureWidth,c.textureHeight,!1),x=new zl(c.textureWidth,c.textureHeight,{format:zs,type:hl,depthTexture:new ow(c.textureWidth,c.textureHeight,ae,void 0,void 0,void 0,void 0,void 0,void 0,re),stencilBuffer:v.stencil,colorSpace:t.outputColorSpace,samples:v.antialias?4:0,resolveDepthBuffer:c.ignoreDepthValues===!1})}else{const re={antialias:v.antialias,alpha:!0,depth:v.depth,stencil:v.stencil,framebufferScaleFactor:o};f=new XRWebGLLayer(i,n,re),i.updateRenderState({baseLayer:f}),t.setPixelRatio(1),t.setSize(f.framebufferWidth,f.framebufferHeight,!1),x=new zl(f.framebufferWidth,f.framebufferHeight,{format:zs,type:hl,colorSpace:t.outputColorSpace,stencilBuffer:v.stencil})}x.isXRRenderTarget=!0,this.setFoveation(l),u=null,s=await i.requestReferenceSpace(a),B.setContext(i),B.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(i!==null)return i.environmentBlendMode},this.getDepthTexture=function(){return y.getDepthTexture()};function X(U){for(let K=0;K<U.removed.length;K++){const re=U.removed[K],ae=w.indexOf(re);ae>=0&&(w[ae]=null,b[ae].disconnect(re))}for(let K=0;K<U.added.length;K++){const re=U.added[K];let ae=w.indexOf(re);if(ae===-1){for(let ye=0;ye<b.length;ye++)if(ye>=w.length){w.push(re),ae=ye;break}else if(w[ye]===null){w[ye]=re,ae=ye;break}if(ae===-1)break}const pe=b[ae];pe&&pe.connect(re)}}const J=new Oe,ee=new Oe;function V(U,K,re){J.setFromMatrixPosition(K.matrixWorld),ee.setFromMatrixPosition(re.matrixWorld);const ae=J.distanceTo(ee),pe=K.projectionMatrix.elements,ye=re.projectionMatrix.elements,Re=pe[14]/(pe[10]-1),Me=pe[14]/(pe[10]+1),xe=(pe[9]+1)/pe[5],ve=(pe[9]-1)/pe[5],ne=(pe[8]-1)/pe[0],Te=(ye[8]+1)/ye[0],Pe=Re*ne,Ae=Re*Te,je=ae/(-ne+Te),Ue=je*-ne;if(K.matrixWorld.decompose(U.position,U.quaternion,U.scale),U.translateX(Ue),U.translateZ(je),U.matrixWorld.compose(U.position,U.quaternion,U.scale),U.matrixWorldInverse.copy(U.matrixWorld).invert(),pe[10]===-1)U.projectionMatrix.copy(K.projectionMatrix),U.projectionMatrixInverse.copy(K.projectionMatrixInverse);else{const Ge=Re+je,_e=Me+je,fe=Pe-Ue,We=Ae+(ae-Ue),Ke=xe*Me/_e*Ge,$e=ve*Me/_e*Ge;U.projectionMatrix.makePerspective(fe,We,Ke,$e,Ge,_e),U.projectionMatrixInverse.copy(U.projectionMatrix).invert()}}function q(U,K){K===null?U.matrixWorld.copy(U.matrix):U.matrixWorld.multiplyMatrices(K.matrixWorld,U.matrix),U.matrixWorldInverse.copy(U.matrixWorld).invert()}this.updateCamera=function(U){if(i===null)return;let K=U.near,re=U.far;y.texture!==null&&(y.depthNear>0&&(K=y.depthNear),y.depthFar>0&&(re=y.depthFar)),D.near=P.near=C.near=K,D.far=P.far=C.far=re,(j!==D.near||N!==D.far)&&(i.updateRenderState({depthNear:D.near,depthFar:D.far}),j=D.near,N=D.far),C.layers.mask=U.layers.mask|2,P.layers.mask=U.layers.mask|4,D.layers.mask=C.layers.mask|P.layers.mask;const ae=U.parent,pe=D.cameras;q(D,ae);for(let ye=0;ye<pe.length;ye++)q(pe[ye],ae);pe.length===2?V(D,C,P):D.projectionMatrix.copy(C.projectionMatrix),Y(U,D,ae)};function Y(U,K,re){re===null?U.matrix.copy(K.matrixWorld):(U.matrix.copy(re.matrixWorld),U.matrix.invert(),U.matrix.multiply(K.matrixWorld)),U.matrix.decompose(U.position,U.quaternion,U.scale),U.updateMatrixWorld(!0),U.projectionMatrix.copy(K.projectionMatrix),U.projectionMatrixInverse.copy(K.projectionMatrixInverse),U.isPerspectiveCamera&&(U.fov=yp*2*Math.atan(1/U.projectionMatrix.elements[5]),U.zoom=1)}this.getCamera=function(){return D},this.getFoveation=function(){if(!(c===null&&f===null))return l},this.setFoveation=function(U){l=U,c!==null&&(c.fixedFoveation=U),f!==null&&f.fixedFoveation!==void 0&&(f.fixedFoveation=U)},this.hasDepthSensing=function(){return y.texture!==null},this.getDepthSensingMesh=function(){return y.getMesh(D)};let Z=null;function ce(U,K){if(h=K.getViewerPose(u||s),m=K,h!==null){const re=h.views;f!==null&&(t.setRenderTargetFramebuffer(x,f.framebuffer),t.setRenderTarget(x));let ae=!1;re.length!==D.cameras.length&&(D.cameras.length=0,ae=!0);for(let ye=0;ye<re.length;ye++){const Re=re[ye];let Me=null;if(f!==null)Me=f.getViewport(Re);else{const ve=p.getViewSubImage(c,Re);Me=ve.viewport,ye===0&&(t.setRenderTargetTextures(x,ve.colorTexture,c.ignoreDepthValues?void 0:ve.depthStencilTexture),t.setRenderTarget(x))}let xe=I[ye];xe===void 0&&(xe=new yi,xe.layers.enable(ye),xe.viewport=new bn,I[ye]=xe),xe.matrix.fromArray(Re.transform.matrix),xe.matrix.decompose(xe.position,xe.quaternion,xe.scale),xe.projectionMatrix.fromArray(Re.projectionMatrix),xe.projectionMatrixInverse.copy(xe.projectionMatrix).invert(),xe.viewport.set(Me.x,Me.y,Me.width,Me.height),ye===0&&(D.matrix.copy(xe.matrix),D.matrix.decompose(D.position,D.quaternion,D.scale)),ae===!0&&D.cameras.push(xe)}const pe=i.enabledFeatures;if(pe&&pe.includes("depth-sensing")){const ye=p.getDepthInformation(re[0]);ye&&ye.isValid&&ye.texture&&y.init(t,ye,i.renderState)}}for(let re=0;re<b.length;re++){const ae=w[re],pe=b[re];ae!==null&&pe!==void 0&&pe.update(ae,K,u||s)}Z&&Z(U,K),K.detectedPlanes&&r.dispatchEvent({type:"planesdetected",data:K}),m=null}const B=new DT;B.setAnimationLoop(ce),this.setAnimationLoop=function(U){Z=U},this.dispose=function(){}}}const zf=new ua,SO=new Cr;function MO(d,t){function n(v,g){v.matrixAutoUpdate===!0&&v.updateMatrix(),g.value.copy(v.matrix)}function r(v,g){g.color.getRGB(v.fogColor.value,GE(d)),g.isFog?(v.fogNear.value=g.near,v.fogFar.value=g.far):g.isFogExp2&&(v.fogDensity.value=g.density)}function i(v,g,x,b,w){g.isMeshBasicMaterial||g.isMeshLambertMaterial?o(v,g):g.isMeshToonMaterial?(o(v,g),p(v,g)):g.isMeshPhongMaterial?(o(v,g),h(v,g)):g.isMeshStandardMaterial?(o(v,g),c(v,g),g.isMeshPhysicalMaterial&&f(v,g,w)):g.isMeshMatcapMaterial?(o(v,g),m(v,g)):g.isMeshDepthMaterial?o(v,g):g.isMeshDistanceMaterial?(o(v,g),y(v,g)):g.isMeshNormalMaterial?o(v,g):g.isLineBasicMaterial?(s(v,g),g.isLineDashedMaterial&&a(v,g)):g.isPointsMaterial?l(v,g,x,b):g.isSpriteMaterial?u(v,g):g.isShadowMaterial?(v.color.value.copy(g.color),v.opacity.value=g.opacity):g.isShaderMaterial&&(g.uniformsNeedUpdate=!1)}function o(v,g){v.opacity.value=g.opacity,g.color&&v.diffuse.value.copy(g.color),g.emissive&&v.emissive.value.copy(g.emissive).multiplyScalar(g.emissiveIntensity),g.map&&(v.map.value=g.map,n(g.map,v.mapTransform)),g.alphaMap&&(v.alphaMap.value=g.alphaMap,n(g.alphaMap,v.alphaMapTransform)),g.bumpMap&&(v.bumpMap.value=g.bumpMap,n(g.bumpMap,v.bumpMapTransform),v.bumpScale.value=g.bumpScale,g.side===mo&&(v.bumpScale.value*=-1)),g.normalMap&&(v.normalMap.value=g.normalMap,n(g.normalMap,v.normalMapTransform),v.normalScale.value.copy(g.normalScale),g.side===mo&&v.normalScale.value.negate()),g.displacementMap&&(v.displacementMap.value=g.displacementMap,n(g.displacementMap,v.displacementMapTransform),v.displacementScale.value=g.displacementScale,v.displacementBias.value=g.displacementBias),g.emissiveMap&&(v.emissiveMap.value=g.emissiveMap,n(g.emissiveMap,v.emissiveMapTransform)),g.specularMap&&(v.specularMap.value=g.specularMap,n(g.specularMap,v.specularMapTransform)),g.alphaTest>0&&(v.alphaTest.value=g.alphaTest);const x=t.get(g),b=x.envMap,w=x.envMapRotation;b&&(v.envMap.value=b,zf.copy(w),zf.x*=-1,zf.y*=-1,zf.z*=-1,b.isCubeTexture&&b.isRenderTargetTexture===!1&&(zf.y*=-1,zf.z*=-1),v.envMapRotation.value.setFromMatrix4(SO.makeRotationFromEuler(zf)),v.flipEnvMap.value=b.isCubeTexture&&b.isRenderTargetTexture===!1?-1:1,v.reflectivity.value=g.reflectivity,v.ior.value=g.ior,v.refractionRatio.value=g.refractionRatio),g.lightMap&&(v.lightMap.value=g.lightMap,v.lightMapIntensity.value=g.lightMapIntensity,n(g.lightMap,v.lightMapTransform)),g.aoMap&&(v.aoMap.value=g.aoMap,v.aoMapIntensity.value=g.aoMapIntensity,n(g.aoMap,v.aoMapTransform))}function s(v,g){v.diffuse.value.copy(g.color),v.opacity.value=g.opacity,g.map&&(v.map.value=g.map,n(g.map,v.mapTransform))}function a(v,g){v.dashSize.value=g.dashSize,v.totalSize.value=g.dashSize+g.gapSize,v.scale.value=g.scale}function l(v,g,x,b){v.diffuse.value.copy(g.color),v.opacity.value=g.opacity,v.size.value=g.size*x,v.scale.value=b*.5,g.map&&(v.map.value=g.map,n(g.map,v.uvTransform)),g.alphaMap&&(v.alphaMap.value=g.alphaMap,n(g.alphaMap,v.alphaMapTransform)),g.alphaTest>0&&(v.alphaTest.value=g.alphaTest)}function u(v,g){v.diffuse.value.copy(g.color),v.opacity.value=g.opacity,v.rotation.value=g.rotation,g.map&&(v.map.value=g.map,n(g.map,v.mapTransform)),g.alphaMap&&(v.alphaMap.value=g.alphaMap,n(g.alphaMap,v.alphaMapTransform)),g.alphaTest>0&&(v.alphaTest.value=g.alphaTest)}function h(v,g){v.specular.value.copy(g.specular),v.shininess.value=Math.max(g.shininess,1e-4)}function p(v,g){g.gradientMap&&(v.gradientMap.value=g.gradientMap)}function c(v,g){v.metalness.value=g.metalness,g.metalnessMap&&(v.metalnessMap.value=g.metalnessMap,n(g.metalnessMap,v.metalnessMapTransform)),v.roughness.value=g.roughness,g.roughnessMap&&(v.roughnessMap.value=g.roughnessMap,n(g.roughnessMap,v.roughnessMapTransform)),g.envMap&&(v.envMapIntensity.value=g.envMapIntensity)}function f(v,g,x){v.ior.value=g.ior,g.sheen>0&&(v.sheenColor.value.copy(g.sheenColor).multiplyScalar(g.sheen),v.sheenRoughness.value=g.sheenRoughness,g.sheenColorMap&&(v.sheenColorMap.value=g.sheenColorMap,n(g.sheenColorMap,v.sheenColorMapTransform)),g.sheenRoughnessMap&&(v.sheenRoughnessMap.value=g.sheenRoughnessMap,n(g.sheenRoughnessMap,v.sheenRoughnessMapTransform))),g.clearcoat>0&&(v.clearcoat.value=g.clearcoat,v.clearcoatRoughness.value=g.clearcoatRoughness,g.clearcoatMap&&(v.clearcoatMap.value=g.clearcoatMap,n(g.clearcoatMap,v.clearcoatMapTransform)),g.clearcoatRoughnessMap&&(v.clearcoatRoughnessMap.value=g.clearcoatRoughnessMap,n(g.clearcoatRoughnessMap,v.clearcoatRoughnessMapTransform)),g.clearcoatNormalMap&&(v.clearcoatNormalMap.value=g.clearcoatNormalMap,n(g.clearcoatNormalMap,v.clearcoatNormalMapTransform),v.clearcoatNormalScale.value.copy(g.clearcoatNormalScale),g.side===mo&&v.clearcoatNormalScale.value.negate())),g.dispersion>0&&(v.dispersion.value=g.dispersion),g.iridescence>0&&(v.iridescence.value=g.iridescence,v.iridescenceIOR.value=g.iridescenceIOR,v.iridescenceThicknessMinimum.value=g.iridescenceThicknessRange[0],v.iridescenceThicknessMaximum.value=g.iridescenceThicknessRange[1],g.iridescenceMap&&(v.iridescenceMap.value=g.iridescenceMap,n(g.iridescenceMap,v.iridescenceMapTransform)),g.iridescenceThicknessMap&&(v.iridescenceThicknessMap.value=g.iridescenceThicknessMap,n(g.iridescenceThicknessMap,v.iridescenceThicknessMapTransform))),g.transmission>0&&(v.transmission.value=g.transmission,v.transmissionSamplerMap.value=x.texture,v.transmissionSamplerSize.value.set(x.width,x.height),g.transmissionMap&&(v.transmissionMap.value=g.transmissionMap,n(g.transmissionMap,v.transmissionMapTransform)),v.thickness.value=g.thickness,g.thicknessMap&&(v.thicknessMap.value=g.thicknessMap,n(g.thicknessMap,v.thicknessMapTransform)),v.attenuationDistance.value=g.attenuationDistance,v.attenuationColor.value.copy(g.attenuationColor)),g.anisotropy>0&&(v.anisotropyVector.value.set(g.anisotropy*Math.cos(g.anisotropyRotation),g.anisotropy*Math.sin(g.anisotropyRotation)),g.anisotropyMap&&(v.anisotropyMap.value=g.anisotropyMap,n(g.anisotropyMap,v.anisotropyMapTransform))),v.specularIntensity.value=g.specularIntensity,v.specularColor.value.copy(g.specularColor),g.specularColorMap&&(v.specularColorMap.value=g.specularColorMap,n(g.specularColorMap,v.specularColorMapTransform)),g.specularIntensityMap&&(v.specularIntensityMap.value=g.specularIntensityMap,n(g.specularIntensityMap,v.specularIntensityMapTransform))}function m(v,g){g.matcap&&(v.matcap.value=g.matcap)}function y(v,g){const x=t.get(g).light;v.referencePosition.value.setFromMatrixPosition(x.matrixWorld),v.nearDistance.value=x.shadow.camera.near,v.farDistance.value=x.shadow.camera.far}return{refreshFogUniforms:r,refreshMaterialUniforms:i}}function AO(d,t,n,r){let i={},o={},s=[];const a=d.getParameter(d.MAX_UNIFORM_BUFFER_BINDINGS);function l(x,b){const w=b.program;r.uniformBlockBinding(x,w)}function u(x,b){let w=i[x.id];w===void 0&&(m(x),w=h(x),i[x.id]=w,x.addEventListener("dispose",v));const T=b.program;r.updateUBOMapping(x,T);const R=t.render.frame;o[x.id]!==R&&(c(x),o[x.id]=R)}function h(x){const b=p();x.__bindingPointIndex=b;const w=d.createBuffer(),T=x.__size,R=x.usage;return d.bindBuffer(d.UNIFORM_BUFFER,w),d.bufferData(d.UNIFORM_BUFFER,T,R),d.bindBuffer(d.UNIFORM_BUFFER,null),d.bindBufferBase(d.UNIFORM_BUFFER,b,w),w}function p(){for(let x=0;x<a;x++)if(s.indexOf(x)===-1)return s.push(x),x;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function c(x){const b=i[x.id],w=x.uniforms,T=x.__cache;d.bindBuffer(d.UNIFORM_BUFFER,b);for(let R=0,C=w.length;R<C;R++){const P=Array.isArray(w[R])?w[R]:[w[R]];for(let I=0,D=P.length;I<D;I++){const j=P[I];if(f(j,R,I,T)===!0){const N=j.__offset,O=Array.isArray(j.value)?j.value:[j.value];let W=0;for(let X=0;X<O.length;X++){const J=O[X],ee=y(J);typeof J=="number"||typeof J=="boolean"?(j.__data[0]=J,d.bufferSubData(d.UNIFORM_BUFFER,N+W,j.__data)):J.isMatrix3?(j.__data[0]=J.elements[0],j.__data[1]=J.elements[1],j.__data[2]=J.elements[2],j.__data[3]=0,j.__data[4]=J.elements[3],j.__data[5]=J.elements[4],j.__data[6]=J.elements[5],j.__data[7]=0,j.__data[8]=J.elements[6],j.__data[9]=J.elements[7],j.__data[10]=J.elements[8],j.__data[11]=0):(J.toArray(j.__data,W),W+=ee.storage/Float32Array.BYTES_PER_ELEMENT)}d.bufferSubData(d.UNIFORM_BUFFER,N,j.__data)}}}d.bindBuffer(d.UNIFORM_BUFFER,null)}function f(x,b,w,T){const R=x.value,C=b+"_"+w;if(T[C]===void 0)return typeof R=="number"||typeof R=="boolean"?T[C]=R:T[C]=R.clone(),!0;{const P=T[C];if(typeof R=="number"||typeof R=="boolean"){if(P!==R)return T[C]=R,!0}else if(P.equals(R)===!1)return P.copy(R),!0}return!1}function m(x){const b=x.uniforms;let w=0;const T=16;for(let C=0,P=b.length;C<P;C++){const I=Array.isArray(b[C])?b[C]:[b[C]];for(let D=0,j=I.length;D<j;D++){const N=I[D],O=Array.isArray(N.value)?N.value:[N.value];for(let W=0,X=O.length;W<X;W++){const J=O[W],ee=y(J),V=w%T,q=V%ee.boundary,Y=V+q;w+=q,Y!==0&&T-Y<ee.storage&&(w+=T-Y),N.__data=new Float32Array(ee.storage/Float32Array.BYTES_PER_ELEMENT),N.__offset=w,w+=ee.storage}}}const R=w%T;return R>0&&(w+=T-R),x.__size=w,x.__cache={},this}function y(x){const b={boundary:0,storage:0};return typeof x=="number"||typeof x=="boolean"?(b.boundary=4,b.storage=4):x.isVector2?(b.boundary=8,b.storage=8):x.isVector3||x.isColor?(b.boundary=16,b.storage=12):x.isVector4?(b.boundary=16,b.storage=16):x.isMatrix3?(b.boundary=48,b.storage=48):x.isMatrix4?(b.boundary=64,b.storage=64):x.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",x),b}function v(x){const b=x.target;b.removeEventListener("dispose",v);const w=s.indexOf(b.__bindingPointIndex);s.splice(w,1),d.deleteBuffer(i[b.id]),delete i[b.id],delete o[b.id]}function g(){for(const x in i)d.deleteBuffer(i[x]);s=[],i={},o={}}return{bind:l,update:u,dispose:g}}class UT{constructor(t={}){const{canvas:n=FE(),context:r=null,depth:i=!0,stencil:o=!1,alpha:s=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:u=!1,powerPreference:h="default",failIfMajorPerformanceCaveat:p=!1,reverseDepthBuffer:c=!1}=t;this.isWebGLRenderer=!0;let f;if(r!==null){if(typeof WebGLRenderingContext<"u"&&r instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");f=r.getContextAttributes().alpha}else f=s;const m=new Uint32Array(4),y=new Int32Array(4);let v=null,g=null;const x=[],b=[];this.domElement=n,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Es,this.toneMapping=kl,this.toneMappingExposure=1;const w=this;let T=!1,R=0,C=0,P=null,I=-1,D=null;const j=new bn,N=new bn;let O=null;const W=new nr(0);let X=0,J=n.width,ee=n.height,V=1,q=null,Y=null;const Z=new bn(0,0,J,ee),ce=new bn(0,0,J,ee);let B=!1;const U=new Vg;let K=!1,re=!1;this.transmissionResolutionScale=1;const ae=new Cr,pe=new Cr,ye=new Oe,Re=new bn,Me={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let xe=!1;function ve(){return P===null?V:1}let ne=r;function Te(me,Qe){return n.getContext(me,Qe)}try{const me={alpha:!0,depth:i,stencil:o,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:u,powerPreference:h,failIfMajorPerformanceCaveat:p};if("setAttribute"in n&&n.setAttribute("data-engine",`three.js r${kg}`),n.addEventListener("webglcontextlost",ut,!1),n.addEventListener("webglcontextrestored",bt,!1),n.addEventListener("webglcontextcreationerror",vt,!1),ne===null){const Qe="webgl2";if(ne=Te(Qe,me),ne===null)throw Te(Qe)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(me){throw console.error("THREE.WebGLRenderer: "+me.message),me}let Pe,Ae,je,Ue,Ge,_e,fe,We,Ke,$e,et,ht,Be,rt,Ye,de,ge,ue,Se,De,be,ke,ot,Ce;function it(){Pe=new kB(ne),Pe.init(),ke=new NT(ne,Pe),Ae=new PB(ne,Pe,t,ke),je=new gO(ne,Pe),Ae.reverseDepthBuffer&&c&&je.buffers.depth.setReversed(!0),Ue=new NB(ne),Ge=new nO,_e=new yO(ne,Pe,je,Ge,Ae,ke,Ue),fe=new jB(w),We=new BB(w),Ke=new Xj(ne),ot=new CB(ne,Ke),$e=new OB(ne,Ke,Ue,ot),et=new GB(ne,$e,Ke,Ue),Se=new UB(ne,Ae,_e),de=new IB(Ge),ht=new rO(w,fe,We,Pe,Ae,ot,de),Be=new MO(w,Ge),rt=new sO,Ye=new fO(Pe),ue=new TB(w,fe,We,je,et,f,l),ge=new pO(w,et,Ae),Ce=new AO(ne,Ue,Ae,je),De=new RB(ne,Pe,Ue),be=new FB(ne,Pe,Ue),Ue.programs=ht.programs,w.capabilities=Ae,w.extensions=Pe,w.properties=Ge,w.renderLists=rt,w.shadowMap=ge,w.state=je,w.info=Ue}it();const Xe=new wO(w,ne);this.xr=Xe,this.getContext=function(){return ne},this.getContextAttributes=function(){return ne.getContextAttributes()},this.forceContextLoss=function(){const me=Pe.get("WEBGL_lose_context");me&&me.loseContext()},this.forceContextRestore=function(){const me=Pe.get("WEBGL_lose_context");me&&me.restoreContext()},this.getPixelRatio=function(){return V},this.setPixelRatio=function(me){me!==void 0&&(V=me,this.setSize(J,ee,!1))},this.getSize=function(me){return me.set(J,ee)},this.setSize=function(me,Qe,qe=!0){if(Xe.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}J=me,ee=Qe,n.width=Math.floor(me*V),n.height=Math.floor(Qe*V),qe===!0&&(n.style.width=me+"px",n.style.height=Qe+"px"),this.setViewport(0,0,me,Qe)},this.getDrawingBufferSize=function(me){return me.set(J*V,ee*V).floor()},this.setDrawingBufferSize=function(me,Qe,qe){J=me,ee=Qe,V=qe,n.width=Math.floor(me*qe),n.height=Math.floor(Qe*qe),this.setViewport(0,0,me,Qe)},this.getCurrentViewport=function(me){return me.copy(j)},this.getViewport=function(me){return me.copy(Z)},this.setViewport=function(me,Qe,qe,Ze){me.isVector4?Z.set(me.x,me.y,me.z,me.w):Z.set(me,Qe,qe,Ze),je.viewport(j.copy(Z).multiplyScalar(V).round())},this.getScissor=function(me){return me.copy(ce)},this.setScissor=function(me,Qe,qe,Ze){me.isVector4?ce.set(me.x,me.y,me.z,me.w):ce.set(me,Qe,qe,Ze),je.scissor(N.copy(ce).multiplyScalar(V).round())},this.getScissorTest=function(){return B},this.setScissorTest=function(me){je.setScissorTest(B=me)},this.setOpaqueSort=function(me){q=me},this.setTransparentSort=function(me){Y=me},this.getClearColor=function(me){return me.copy(ue.getClearColor())},this.setClearColor=function(){ue.setClearColor.apply(ue,arguments)},this.getClearAlpha=function(){return ue.getClearAlpha()},this.setClearAlpha=function(){ue.setClearAlpha.apply(ue,arguments)},this.clear=function(me=!0,Qe=!0,qe=!0){let Ze=0;if(me){let Ne=!1;if(P!==null){const St=P.texture.format;Ne=St===p_||St===h_||St===Fg}if(Ne){const St=P.texture.type,jt=St===hl||St===zu||St===pp||St===Sd||St===c_||St===f_,Ft=ue.getClearColor(),Ht=ue.getClearAlpha(),Qt=Ft.r,Kt=Ft.g,It=Ft.b;jt?(m[0]=Qt,m[1]=Kt,m[2]=It,m[3]=Ht,ne.clearBufferuiv(ne.COLOR,0,m)):(y[0]=Qt,y[1]=Kt,y[2]=It,y[3]=Ht,ne.clearBufferiv(ne.COLOR,0,y))}else Ze|=ne.COLOR_BUFFER_BIT}Qe&&(Ze|=ne.DEPTH_BUFFER_BIT),qe&&(Ze|=ne.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),ne.clear(Ze)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){n.removeEventListener("webglcontextlost",ut,!1),n.removeEventListener("webglcontextrestored",bt,!1),n.removeEventListener("webglcontextcreationerror",vt,!1),ue.dispose(),rt.dispose(),Ye.dispose(),Ge.dispose(),fe.dispose(),We.dispose(),et.dispose(),ot.dispose(),Ce.dispose(),ht.dispose(),Xe.dispose(),Xe.removeEventListener("sessionstart",Pt),Xe.removeEventListener("sessionend",Wt),Jt.stop()};function ut(me){me.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),T=!0}function bt(){console.log("THREE.WebGLRenderer: Context Restored."),T=!1;const me=Ue.autoReset,Qe=ge.enabled,qe=ge.autoUpdate,Ze=ge.needsUpdate,Ne=ge.type;it(),Ue.autoReset=me,ge.enabled=Qe,ge.autoUpdate=qe,ge.needsUpdate=Ze,ge.type=Ne}function vt(me){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",me.statusMessage)}function Rt(me){const Qe=me.target;Qe.removeEventListener("dispose",Rt),Dt(Qe)}function Dt(me){yr(me),Ge.remove(me)}function yr(me){const Qe=Ge.get(me).programs;Qe!==void 0&&(Qe.forEach(function(qe){ht.releaseProgram(qe)}),me.isShaderMaterial&&ht.releaseShaderCache(me))}this.renderBufferDirect=function(me,Qe,qe,Ze,Ne,St){Qe===null&&(Qe=Me);const jt=Ne.isMesh&&Ne.matrixWorld.determinant()<0,Ft=Jn(me,Qe,qe,Ze,Ne);je.setMaterial(Ze,jt);let Ht=qe.index,Qt=1;if(Ze.wireframe===!0){if(Ht=$e.getWireframeAttribute(qe),Ht===void 0)return;Qt=2}const Kt=qe.drawRange,It=qe.attributes.position;let Xt=Kt.start*Qt,Sr=(Kt.start+Kt.count)*Qt;St!==null&&(Xt=Math.max(Xt,St.start*Qt),Sr=Math.min(Sr,(St.start+St.count)*Qt)),Ht!==null?(Xt=Math.max(Xt,0),Sr=Math.min(Sr,Ht.count)):It!=null&&(Xt=Math.max(Xt,0),Sr=Math.min(Sr,It.count));const Rr=Sr-Xt;if(Rr<0||Rr===1/0)return;ot.setup(Ne,Ze,Ft,qe,Ht);let Lr,Pr=De;if(Ht!==null&&(Lr=Ke.get(Ht),Pr=be,Pr.setIndex(Lr)),Ne.isMesh)Ze.wireframe===!0?(je.setLineWidth(Ze.wireframeLinewidth*ve()),Pr.setMode(ne.LINES)):Pr.setMode(ne.TRIANGLES);else if(Ne.isLine){let fr=Ze.linewidth;fr===void 0&&(fr=1),je.setLineWidth(fr*ve()),Ne.isLineSegments?Pr.setMode(ne.LINES):Ne.isLineLoop?Pr.setMode(ne.LINE_LOOP):Pr.setMode(ne.LINE_STRIP)}else Ne.isPoints?Pr.setMode(ne.POINTS):Ne.isSprite&&Pr.setMode(ne.TRIANGLES);if(Ne.isBatchedMesh)if(Ne._multiDrawInstances!==null)Pr.renderMultiDrawInstances(Ne._multiDrawStarts,Ne._multiDrawCounts,Ne._multiDrawCount,Ne._multiDrawInstances);else if(Pe.get("WEBGL_multi_draw"))Pr.renderMultiDraw(Ne._multiDrawStarts,Ne._multiDrawCounts,Ne._multiDrawCount);else{const fr=Ne._multiDrawStarts,Zr=Ne._multiDrawCounts,Or=Ne._multiDrawCount,ti=Ht?Ke.get(Ht).bytesPerElement:1,go=Ge.get(Ze).currentProgram.getUniforms();for(let ri=0;ri<Or;ri++)go.setValue(ne,"_gl_DrawID",ri),Pr.render(fr[ri]/ti,Zr[ri])}else if(Ne.isInstancedMesh)Pr.renderInstances(Xt,Rr,Ne.count);else if(qe.isInstancedBufferGeometry){const fr=qe._maxInstanceCount!==void 0?qe._maxInstanceCount:1/0,Zr=Math.min(qe.instanceCount,fr);Pr.renderInstances(Xt,Rr,Zr)}else Pr.render(Xt,Rr)};function Bt(me,Qe,qe){me.transparent===!0&&me.side===fl&&me.forceSinglePass===!1?(me.side=mo,me.needsUpdate=!0,an(me,Qe,qe),me.side=Hl,me.needsUpdate=!0,an(me,Qe,qe),me.side=fl):an(me,Qe,qe)}this.compile=function(me,Qe,qe=null){qe===null&&(qe=me),g=Ye.get(qe),g.init(Qe),b.push(g),qe.traverseVisible(function(Ne){Ne.isLight&&Ne.layers.test(Qe.layers)&&(g.pushLight(Ne),Ne.castShadow&&g.pushShadow(Ne))}),me!==qe&&me.traverseVisible(function(Ne){Ne.isLight&&Ne.layers.test(Qe.layers)&&(g.pushLight(Ne),Ne.castShadow&&g.pushShadow(Ne))}),g.setupLights();const Ze=new Set;return me.traverse(function(Ne){if(!(Ne.isMesh||Ne.isPoints||Ne.isLine||Ne.isSprite))return;const St=Ne.material;if(St)if(Array.isArray(St))for(let jt=0;jt<St.length;jt++){const Ft=St[jt];Bt(Ft,qe,Ne),Ze.add(Ft)}else Bt(St,qe,Ne),Ze.add(St)}),b.pop(),g=null,Ze},this.compileAsync=function(me,Qe,qe=null){const Ze=this.compile(me,Qe,qe);return new Promise(Ne=>{function St(){if(Ze.forEach(function(jt){Ge.get(jt).currentProgram.isReady()&&Ze.delete(jt)}),Ze.size===0){Ne(me);return}setTimeout(St,10)}Pe.get("KHR_parallel_shader_compile")!==null?St():setTimeout(St,10)})};let Ut=null;function Yt(me){Ut&&Ut(me)}function Pt(){Jt.stop()}function Wt(){Jt.start()}const Jt=new DT;Jt.setAnimationLoop(Yt),typeof self<"u"&&Jt.setContext(self),this.setAnimationLoop=function(me){Ut=me,Xe.setAnimationLoop(me),me===null?Jt.stop():Jt.start()},Xe.addEventListener("sessionstart",Pt),Xe.addEventListener("sessionend",Wt),this.render=function(me,Qe){if(Qe!==void 0&&Qe.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(T===!0)return;if(me.matrixWorldAutoUpdate===!0&&me.updateMatrixWorld(),Qe.parent===null&&Qe.matrixWorldAutoUpdate===!0&&Qe.updateMatrixWorld(),Xe.enabled===!0&&Xe.isPresenting===!0&&(Xe.cameraAutoUpdate===!0&&Xe.updateCamera(Qe),Qe=Xe.getCamera()),me.isScene===!0&&me.onBeforeRender(w,me,Qe,P),g=Ye.get(me,b.length),g.init(Qe),b.push(g),pe.multiplyMatrices(Qe.projectionMatrix,Qe.matrixWorldInverse),U.setFromProjectionMatrix(pe),re=this.localClippingEnabled,K=de.init(this.clippingPlanes,re),v=rt.get(me,x.length),v.init(),x.push(v),Xe.enabled===!0&&Xe.isPresenting===!0){const St=w.xr.getDepthSensingMesh();St!==null&&$t(St,Qe,-1/0,w.sortObjects)}$t(me,Qe,0,w.sortObjects),v.finish(),w.sortObjects===!0&&v.sort(q,Y),xe=Xe.enabled===!1||Xe.isPresenting===!1||Xe.hasDepthSensing()===!1,xe&&ue.addToRenderList(v,me),this.info.render.frame++,K===!0&&de.beginShadows();const qe=g.state.shadowsArray;ge.render(qe,me,Qe),K===!0&&de.endShadows(),this.info.autoReset===!0&&this.info.reset();const Ze=v.opaque,Ne=v.transmissive;if(g.setupLights(),Qe.isArrayCamera){const St=Qe.cameras;if(Ne.length>0)for(let jt=0,Ft=St.length;jt<Ft;jt++){const Ht=St[jt];cr(Ze,Ne,me,Ht)}xe&&ue.render(me);for(let jt=0,Ft=St.length;jt<Ft;jt++){const Ht=St[jt];br(v,me,Ht,Ht.viewport)}}else Ne.length>0&&cr(Ze,Ne,me,Qe),xe&&ue.render(me),br(v,me,Qe);P!==null&&C===0&&(_e.updateMultisampleRenderTarget(P),_e.updateRenderTargetMipmap(P)),me.isScene===!0&&me.onAfterRender(w,me,Qe),ot.resetDefaultState(),I=-1,D=null,b.pop(),b.length>0?(g=b[b.length-1],K===!0&&de.setGlobalState(w.clippingPlanes,g.state.camera)):g=null,x.pop(),x.length>0?v=x[x.length-1]:v=null};function $t(me,Qe,qe,Ze){if(me.visible===!1)return;if(me.layers.test(Qe.layers)){if(me.isGroup)qe=me.renderOrder;else if(me.isLOD)me.autoUpdate===!0&&me.update(Qe);else if(me.isLight)g.pushLight(me),me.castShadow&&g.pushShadow(me);else if(me.isSprite){if(!me.frustumCulled||U.intersectsSprite(me)){Ze&&Re.setFromMatrixPosition(me.matrixWorld).applyMatrix4(pe);const jt=et.update(me),Ft=me.material;Ft.visible&&v.push(me,jt,Ft,qe,Re.z,null)}}else if((me.isMesh||me.isLine||me.isPoints)&&(!me.frustumCulled||U.intersectsObject(me))){const jt=et.update(me),Ft=me.material;if(Ze&&(me.boundingSphere!==void 0?(me.boundingSphere===null&&me.computeBoundingSphere(),Re.copy(me.boundingSphere.center)):(jt.boundingSphere===null&&jt.computeBoundingSphere(),Re.copy(jt.boundingSphere.center)),Re.applyMatrix4(me.matrixWorld).applyMatrix4(pe)),Array.isArray(Ft)){const Ht=jt.groups;for(let Qt=0,Kt=Ht.length;Qt<Kt;Qt++){const It=Ht[Qt],Xt=Ft[It.materialIndex];Xt&&Xt.visible&&v.push(me,jt,Xt,qe,Re.z,It)}}else Ft.visible&&v.push(me,jt,Ft,qe,Re.z,null)}}const St=me.children;for(let jt=0,Ft=St.length;jt<Ft;jt++)$t(St[jt],Qe,qe,Ze)}function br(me,Qe,qe,Ze){const Ne=me.opaque,St=me.transmissive,jt=me.transparent;g.setupLightsView(qe),K===!0&&de.setGlobalState(w.clippingPlanes,qe),Ze&&je.viewport(j.copy(Ze)),Ne.length>0&&en(Ne,Qe,qe),St.length>0&&en(St,Qe,qe),jt.length>0&&en(jt,Qe,qe),je.buffers.depth.setTest(!0),je.buffers.depth.setMask(!0),je.buffers.color.setMask(!0),je.setPolygonOffset(!1)}function cr(me,Qe,qe,Ze){if((qe.isScene===!0?qe.overrideMaterial:null)!==null)return;g.state.transmissionRenderTarget[Ze.id]===void 0&&(g.state.transmissionRenderTarget[Ze.id]=new zl(1,1,{generateMipmaps:!0,type:Pe.has("EXT_color_buffer_half_float")||Pe.has("EXT_color_buffer_float")?Rp:hl,minFilter:La,samples:4,stencilBuffer:o,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:vn.workingColorSpace}));const St=g.state.transmissionRenderTarget[Ze.id],jt=Ze.viewport||j;St.setSize(jt.z*w.transmissionResolutionScale,jt.w*w.transmissionResolutionScale);const Ft=w.getRenderTarget();w.setRenderTarget(St),w.getClearColor(W),X=w.getClearAlpha(),X<1&&w.setClearColor(16777215,.5),w.clear(),xe&&ue.render(qe);const Ht=w.toneMapping;w.toneMapping=kl;const Qt=Ze.viewport;if(Ze.viewport!==void 0&&(Ze.viewport=void 0),g.setupLightsView(Ze),K===!0&&de.setGlobalState(w.clippingPlanes,Ze),en(me,qe,Ze),_e.updateMultisampleRenderTarget(St),_e.updateRenderTargetMipmap(St),Pe.has("WEBGL_multisampled_render_to_texture")===!1){let Kt=!1;for(let It=0,Xt=Qe.length;It<Xt;It++){const Sr=Qe[It],Rr=Sr.object,Lr=Sr.geometry,Pr=Sr.material,fr=Sr.group;if(Pr.side===fl&&Rr.layers.test(Ze.layers)){const Zr=Pr.side;Pr.side=mo,Pr.needsUpdate=!0,Pn(Rr,qe,Ze,Lr,Pr,fr),Pr.side=Zr,Pr.needsUpdate=!0,Kt=!0}}Kt===!0&&(_e.updateMultisampleRenderTarget(St),_e.updateRenderTargetMipmap(St))}w.setRenderTarget(Ft),w.setClearColor(W,X),Qt!==void 0&&(Ze.viewport=Qt),w.toneMapping=Ht}function en(me,Qe,qe){const Ze=Qe.isScene===!0?Qe.overrideMaterial:null;for(let Ne=0,St=me.length;Ne<St;Ne++){const jt=me[Ne],Ft=jt.object,Ht=jt.geometry,Qt=Ze===null?jt.material:Ze,Kt=jt.group;Ft.layers.test(qe.layers)&&Pn(Ft,Qe,qe,Ht,Qt,Kt)}}function Pn(me,Qe,qe,Ze,Ne,St){me.onBeforeRender(w,Qe,qe,Ze,Ne,St),me.modelViewMatrix.multiplyMatrices(qe.matrixWorldInverse,me.matrixWorld),me.normalMatrix.getNormalMatrix(me.modelViewMatrix),Ne.onBeforeRender(w,Qe,qe,Ze,me,St),Ne.transparent===!0&&Ne.side===fl&&Ne.forceSinglePass===!1?(Ne.side=mo,Ne.needsUpdate=!0,w.renderBufferDirect(qe,Qe,Ze,Ne,me,St),Ne.side=Hl,Ne.needsUpdate=!0,w.renderBufferDirect(qe,Qe,Ze,Ne,me,St),Ne.side=fl):w.renderBufferDirect(qe,Qe,Ze,Ne,me,St),me.onAfterRender(w,Qe,qe,Ze,Ne,St)}function an(me,Qe,qe){Qe.isScene!==!0&&(Qe=Me);const Ze=Ge.get(me),Ne=g.state.lights,St=g.state.shadowsArray,jt=Ne.state.version,Ft=ht.getParameters(me,Ne.state,St,Qe,qe),Ht=ht.getProgramCacheKey(Ft);let Qt=Ze.programs;Ze.environment=me.isMeshStandardMaterial?Qe.environment:null,Ze.fog=Qe.fog,Ze.envMap=(me.isMeshStandardMaterial?We:fe).get(me.envMap||Ze.environment),Ze.envMapRotation=Ze.environment!==null&&me.envMap===null?Qe.environmentRotation:me.envMapRotation,Qt===void 0&&(me.addEventListener("dispose",Rt),Qt=new Map,Ze.programs=Qt);let Kt=Qt.get(Ht);if(Kt!==void 0){if(Ze.currentProgram===Kt&&Ze.lightsStateVersion===jt)return jr(me,Ft),Kt}else Ft.uniforms=ht.getUniforms(me),me.onBeforeCompile(Ft,w),Kt=ht.acquireProgram(Ft,Ht),Qt.set(Ht,Kt),Ze.uniforms=Ft.uniforms;const It=Ze.uniforms;return(!me.isShaderMaterial&&!me.isRawShaderMaterial||me.clipping===!0)&&(It.clippingPlanes=de.uniform),jr(me,Ft),Ze.needsLights=Tt(me),Ze.lightsStateVersion=jt,Ze.needsLights&&(It.ambientLightColor.value=Ne.state.ambient,It.lightProbe.value=Ne.state.probe,It.directionalLights.value=Ne.state.directional,It.directionalLightShadows.value=Ne.state.directionalShadow,It.spotLights.value=Ne.state.spot,It.spotLightShadows.value=Ne.state.spotShadow,It.rectAreaLights.value=Ne.state.rectArea,It.ltc_1.value=Ne.state.rectAreaLTC1,It.ltc_2.value=Ne.state.rectAreaLTC2,It.pointLights.value=Ne.state.point,It.pointLightShadows.value=Ne.state.pointShadow,It.hemisphereLights.value=Ne.state.hemi,It.directionalShadowMap.value=Ne.state.directionalShadowMap,It.directionalShadowMatrix.value=Ne.state.directionalShadowMatrix,It.spotShadowMap.value=Ne.state.spotShadowMap,It.spotLightMatrix.value=Ne.state.spotLightMatrix,It.spotLightMap.value=Ne.state.spotLightMap,It.pointShadowMap.value=Ne.state.pointShadowMap,It.pointShadowMatrix.value=Ne.state.pointShadowMatrix),Ze.currentProgram=Kt,Ze.uniformsList=null,Kt}function un(me){if(me.uniformsList===null){const Qe=me.currentProgram.getUniforms();me.uniformsList=J0.seqWithValue(Qe.seq,me.uniforms)}return me.uniformsList}function jr(me,Qe){const qe=Ge.get(me);qe.outputColorSpace=Qe.outputColorSpace,qe.batching=Qe.batching,qe.batchingColor=Qe.batchingColor,qe.instancing=Qe.instancing,qe.instancingColor=Qe.instancingColor,qe.instancingMorph=Qe.instancingMorph,qe.skinning=Qe.skinning,qe.morphTargets=Qe.morphTargets,qe.morphNormals=Qe.morphNormals,qe.morphColors=Qe.morphColors,qe.morphTargetsCount=Qe.morphTargetsCount,qe.numClippingPlanes=Qe.numClippingPlanes,qe.numIntersection=Qe.numClipIntersection,qe.vertexAlphas=Qe.vertexAlphas,qe.vertexTangents=Qe.vertexTangents,qe.toneMapping=Qe.toneMapping}function Jn(me,Qe,qe,Ze,Ne){Qe.isScene!==!0&&(Qe=Me),_e.resetTextureUnits();const St=Qe.fog,jt=Ze.isMeshStandardMaterial?Qe.environment:null,Ft=P===null?w.outputColorSpace:P.isXRRenderTarget===!0?P.texture.colorSpace:Ad,Ht=(Ze.isMeshStandardMaterial?We:fe).get(Ze.envMap||jt),Qt=Ze.vertexColors===!0&&!!qe.attributes.color&&qe.attributes.color.itemSize===4,Kt=!!qe.attributes.tangent&&(!!Ze.normalMap||Ze.anisotropy>0),It=!!qe.morphAttributes.position,Xt=!!qe.morphAttributes.normal,Sr=!!qe.morphAttributes.color;let Rr=kl;Ze.toneMapped&&(P===null||P.isXRRenderTarget===!0)&&(Rr=w.toneMapping);const Lr=qe.morphAttributes.position||qe.morphAttributes.normal||qe.morphAttributes.color,Pr=Lr!==void 0?Lr.length:0,fr=Ge.get(Ze),Zr=g.state.lights;if(K===!0&&(re===!0||me!==D)){const di=me===D&&Ze.id===I;de.setState(Ze,me,di)}let Or=!1;Ze.version===fr.__version?(fr.needsLights&&fr.lightsStateVersion!==Zr.state.version||fr.outputColorSpace!==Ft||Ne.isBatchedMesh&&fr.batching===!1||!Ne.isBatchedMesh&&fr.batching===!0||Ne.isBatchedMesh&&fr.batchingColor===!0&&Ne.colorTexture===null||Ne.isBatchedMesh&&fr.batchingColor===!1&&Ne.colorTexture!==null||Ne.isInstancedMesh&&fr.instancing===!1||!Ne.isInstancedMesh&&fr.instancing===!0||Ne.isSkinnedMesh&&fr.skinning===!1||!Ne.isSkinnedMesh&&fr.skinning===!0||Ne.isInstancedMesh&&fr.instancingColor===!0&&Ne.instanceColor===null||Ne.isInstancedMesh&&fr.instancingColor===!1&&Ne.instanceColor!==null||Ne.isInstancedMesh&&fr.instancingMorph===!0&&Ne.morphTexture===null||Ne.isInstancedMesh&&fr.instancingMorph===!1&&Ne.morphTexture!==null||fr.envMap!==Ht||Ze.fog===!0&&fr.fog!==St||fr.numClippingPlanes!==void 0&&(fr.numClippingPlanes!==de.numPlanes||fr.numIntersection!==de.numIntersection)||fr.vertexAlphas!==Qt||fr.vertexTangents!==Kt||fr.morphTargets!==It||fr.morphNormals!==Xt||fr.morphColors!==Sr||fr.toneMapping!==Rr||fr.morphTargetsCount!==Pr)&&(Or=!0):(Or=!0,fr.__version=Ze.version);let ti=fr.currentProgram;Or===!0&&(ti=an(Ze,Qe,Ne));let go=!1,ri=!1,Js=!1;const Jr=ti.getUniforms(),fi=fr.uniforms;if(je.useProgram(ti.program)&&(go=!0,ri=!0,Js=!0),Ze.id!==I&&(I=Ze.id,ri=!0),go||D!==me){je.buffers.depth.getReversed()?(ae.copy(me.projectionMatrix),x3(ae),b3(ae),Jr.setValue(ne,"projectionMatrix",ae)):Jr.setValue(ne,"projectionMatrix",me.projectionMatrix),Jr.setValue(ne,"viewMatrix",me.matrixWorldInverse);const Bn=Jr.map.cameraPosition;Bn!==void 0&&Bn.setValue(ne,ye.setFromMatrixPosition(me.matrixWorld)),Ae.logarithmicDepthBuffer&&Jr.setValue(ne,"logDepthBufFC",2/(Math.log(me.far+1)/Math.LN2)),(Ze.isMeshPhongMaterial||Ze.isMeshToonMaterial||Ze.isMeshLambertMaterial||Ze.isMeshBasicMaterial||Ze.isMeshStandardMaterial||Ze.isShaderMaterial)&&Jr.setValue(ne,"isOrthographic",me.isOrthographicCamera===!0),D!==me&&(D=me,ri=!0,Js=!0)}if(Ne.isSkinnedMesh){Jr.setOptional(ne,Ne,"bindMatrix"),Jr.setOptional(ne,Ne,"bindMatrixInverse");const di=Ne.skeleton;di&&(di.boneTexture===null&&di.computeBoneTexture(),Jr.setValue(ne,"boneTexture",di.boneTexture,_e))}Ne.isBatchedMesh&&(Jr.setOptional(ne,Ne,"batchingTexture"),Jr.setValue(ne,"batchingTexture",Ne._matricesTexture,_e),Jr.setOptional(ne,Ne,"batchingIdTexture"),Jr.setValue(ne,"batchingIdTexture",Ne._indirectTexture,_e),Jr.setOptional(ne,Ne,"batchingColorTexture"),Ne._colorsTexture!==null&&Jr.setValue(ne,"batchingColorTexture",Ne._colorsTexture,_e));const ni=qe.morphAttributes;if((ni.position!==void 0||ni.normal!==void 0||ni.color!==void 0)&&Se.update(Ne,qe,ti),(ri||fr.receiveShadow!==Ne.receiveShadow)&&(fr.receiveShadow=Ne.receiveShadow,Jr.setValue(ne,"receiveShadow",Ne.receiveShadow)),Ze.isMeshGouraudMaterial&&Ze.envMap!==null&&(fi.envMap.value=Ht,fi.flipEnvMap.value=Ht.isCubeTexture&&Ht.isRenderTargetTexture===!1?-1:1),Ze.isMeshStandardMaterial&&Ze.envMap===null&&Qe.environment!==null&&(fi.envMapIntensity.value=Qe.environmentIntensity),ri&&(Jr.setValue(ne,"toneMappingExposure",w.toneMappingExposure),fr.needsLights&&Fe(fi,Js),St&&Ze.fog===!0&&Be.refreshFogUniforms(fi,St),Be.refreshMaterialUniforms(fi,Ze,V,ee,g.state.transmissionRenderTarget[me.id]),J0.upload(ne,un(fr),fi,_e)),Ze.isShaderMaterial&&Ze.uniformsNeedUpdate===!0&&(J0.upload(ne,un(fr),fi,_e),Ze.uniformsNeedUpdate=!1),Ze.isSpriteMaterial&&Jr.setValue(ne,"center",Ne.center),Jr.setValue(ne,"modelViewMatrix",Ne.modelViewMatrix),Jr.setValue(ne,"normalMatrix",Ne.normalMatrix),Jr.setValue(ne,"modelMatrix",Ne.matrixWorld),Ze.isShaderMaterial||Ze.isRawShaderMaterial){const di=Ze.uniformsGroups;for(let Bn=0,Gr=di.length;Bn<Gr;Bn++){const Nn=di[Bn];Ce.update(Nn,ti),Ce.bind(Nn,ti)}}return ti}function Fe(me,Qe){me.ambientLightColor.needsUpdate=Qe,me.lightProbe.needsUpdate=Qe,me.directionalLights.needsUpdate=Qe,me.directionalLightShadows.needsUpdate=Qe,me.pointLights.needsUpdate=Qe,me.pointLightShadows.needsUpdate=Qe,me.spotLights.needsUpdate=Qe,me.spotLightShadows.needsUpdate=Qe,me.rectAreaLights.needsUpdate=Qe,me.hemisphereLights.needsUpdate=Qe}function Tt(me){return me.isMeshLambertMaterial||me.isMeshToonMaterial||me.isMeshPhongMaterial||me.isMeshStandardMaterial||me.isShadowMaterial||me.isShaderMaterial&&me.lights===!0}this.getActiveCubeFace=function(){return R},this.getActiveMipmapLevel=function(){return C},this.getRenderTarget=function(){return P},this.setRenderTargetTextures=function(me,Qe,qe){Ge.get(me.texture).__webglTexture=Qe,Ge.get(me.depthTexture).__webglTexture=qe;const Ze=Ge.get(me);Ze.__hasExternalTextures=!0,Ze.__autoAllocateDepthBuffer=qe===void 0,Ze.__autoAllocateDepthBuffer||Pe.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Ze.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(me,Qe){const qe=Ge.get(me);qe.__webglFramebuffer=Qe,qe.__useDefaultFramebuffer=Qe===void 0};const Gt=ne.createFramebuffer();this.setRenderTarget=function(me,Qe=0,qe=0){P=me,R=Qe,C=qe;let Ze=!0,Ne=null,St=!1,jt=!1;if(me){const Ht=Ge.get(me);if(Ht.__useDefaultFramebuffer!==void 0)je.bindFramebuffer(ne.FRAMEBUFFER,null),Ze=!1;else if(Ht.__webglFramebuffer===void 0)_e.setupRenderTarget(me);else if(Ht.__hasExternalTextures)_e.rebindTextures(me,Ge.get(me.texture).__webglTexture,Ge.get(me.depthTexture).__webglTexture);else if(me.depthBuffer){const It=me.depthTexture;if(Ht.__boundDepthTexture!==It){if(It!==null&&Ge.has(It)&&(me.width!==It.image.width||me.height!==It.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");_e.setupDepthRenderbuffer(me)}}const Qt=me.texture;(Qt.isData3DTexture||Qt.isDataArrayTexture||Qt.isCompressedArrayTexture)&&(jt=!0);const Kt=Ge.get(me).__webglFramebuffer;me.isWebGLCubeRenderTarget?(Array.isArray(Kt[Qe])?Ne=Kt[Qe][qe]:Ne=Kt[Qe],St=!0):me.samples>0&&_e.useMultisampledRTT(me)===!1?Ne=Ge.get(me).__webglMultisampledFramebuffer:Array.isArray(Kt)?Ne=Kt[qe]:Ne=Kt,j.copy(me.viewport),N.copy(me.scissor),O=me.scissorTest}else j.copy(Z).multiplyScalar(V).floor(),N.copy(ce).multiplyScalar(V).floor(),O=B;if(qe!==0&&(Ne=Gt),je.bindFramebuffer(ne.FRAMEBUFFER,Ne)&&Ze&&je.drawBuffers(me,Ne),je.viewport(j),je.scissor(N),je.setScissorTest(O),St){const Ht=Ge.get(me.texture);ne.framebufferTexture2D(ne.FRAMEBUFFER,ne.COLOR_ATTACHMENT0,ne.TEXTURE_CUBE_MAP_POSITIVE_X+Qe,Ht.__webglTexture,qe)}else if(jt){const Ht=Ge.get(me.texture),Qt=Qe;ne.framebufferTextureLayer(ne.FRAMEBUFFER,ne.COLOR_ATTACHMENT0,Ht.__webglTexture,qe,Qt)}else if(me!==null&&qe!==0){const Ht=Ge.get(me.texture);ne.framebufferTexture2D(ne.FRAMEBUFFER,ne.COLOR_ATTACHMENT0,ne.TEXTURE_2D,Ht.__webglTexture,qe)}I=-1},this.readRenderTargetPixels=function(me,Qe,qe,Ze,Ne,St,jt){if(!(me&&me.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Ft=Ge.get(me).__webglFramebuffer;if(me.isWebGLCubeRenderTarget&&jt!==void 0&&(Ft=Ft[jt]),Ft){je.bindFramebuffer(ne.FRAMEBUFFER,Ft);try{const Ht=me.texture,Qt=Ht.format,Kt=Ht.type;if(!Ae.textureFormatReadable(Qt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Ae.textureTypeReadable(Kt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Qe>=0&&Qe<=me.width-Ze&&qe>=0&&qe<=me.height-Ne&&ne.readPixels(Qe,qe,Ze,Ne,ke.convert(Qt),ke.convert(Kt),St)}finally{const Ht=P!==null?Ge.get(P).__webglFramebuffer:null;je.bindFramebuffer(ne.FRAMEBUFFER,Ht)}}},this.readRenderTargetPixelsAsync=async function(me,Qe,qe,Ze,Ne,St,jt){if(!(me&&me.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Ft=Ge.get(me).__webglFramebuffer;if(me.isWebGLCubeRenderTarget&&jt!==void 0&&(Ft=Ft[jt]),Ft){const Ht=me.texture,Qt=Ht.format,Kt=Ht.type;if(!Ae.textureFormatReadable(Qt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Ae.textureTypeReadable(Kt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(Qe>=0&&Qe<=me.width-Ze&&qe>=0&&qe<=me.height-Ne){je.bindFramebuffer(ne.FRAMEBUFFER,Ft);const It=ne.createBuffer();ne.bindBuffer(ne.PIXEL_PACK_BUFFER,It),ne.bufferData(ne.PIXEL_PACK_BUFFER,St.byteLength,ne.STREAM_READ),ne.readPixels(Qe,qe,Ze,Ne,ke.convert(Qt),ke.convert(Kt),0);const Xt=P!==null?Ge.get(P).__webglFramebuffer:null;je.bindFramebuffer(ne.FRAMEBUFFER,Xt);const Sr=ne.fenceSync(ne.SYNC_GPU_COMMANDS_COMPLETE,0);return ne.flush(),await _3(ne,Sr,4),ne.bindBuffer(ne.PIXEL_PACK_BUFFER,It),ne.getBufferSubData(ne.PIXEL_PACK_BUFFER,0,St),ne.deleteBuffer(It),ne.deleteSync(Sr),St}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}},this.copyFramebufferToTexture=function(me,Qe=null,qe=0){me.isTexture!==!0&&(Xh("WebGLRenderer: copyFramebufferToTexture function signature has changed."),Qe=arguments[0]||null,me=arguments[1]);const Ze=Math.pow(2,-qe),Ne=Math.floor(me.image.width*Ze),St=Math.floor(me.image.height*Ze),jt=Qe!==null?Qe.x:0,Ft=Qe!==null?Qe.y:0;_e.setTexture2D(me,0),ne.copyTexSubImage2D(ne.TEXTURE_2D,qe,0,0,jt,Ft,Ne,St),je.unbindTexture()};const At=ne.createFramebuffer(),mr=ne.createFramebuffer();this.copyTextureToTexture=function(me,Qe,qe=null,Ze=null,Ne=0,St=null){me.isTexture!==!0&&(Xh("WebGLRenderer: copyTextureToTexture function signature has changed."),Ze=arguments[0]||null,me=arguments[1],Qe=arguments[2],St=arguments[3]||0,qe=null),St===null&&(Ne!==0?(Xh("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),St=Ne,Ne=0):St=0);let jt,Ft,Ht,Qt,Kt,It,Xt,Sr,Rr;const Lr=me.isCompressedTexture?me.mipmaps[St]:me.image;if(qe!==null)jt=qe.max.x-qe.min.x,Ft=qe.max.y-qe.min.y,Ht=qe.isBox3?qe.max.z-qe.min.z:1,Qt=qe.min.x,Kt=qe.min.y,It=qe.isBox3?qe.min.z:0;else{const ni=Math.pow(2,-Ne);jt=Math.floor(Lr.width*ni),Ft=Math.floor(Lr.height*ni),me.isDataArrayTexture?Ht=Lr.depth:me.isData3DTexture?Ht=Math.floor(Lr.depth*ni):Ht=1,Qt=0,Kt=0,It=0}Ze!==null?(Xt=Ze.x,Sr=Ze.y,Rr=Ze.z):(Xt=0,Sr=0,Rr=0);const Pr=ke.convert(Qe.format),fr=ke.convert(Qe.type);let Zr;Qe.isData3DTexture?(_e.setTexture3D(Qe,0),Zr=ne.TEXTURE_3D):Qe.isDataArrayTexture||Qe.isCompressedArrayTexture?(_e.setTexture2DArray(Qe,0),Zr=ne.TEXTURE_2D_ARRAY):(_e.setTexture2D(Qe,0),Zr=ne.TEXTURE_2D),ne.pixelStorei(ne.UNPACK_FLIP_Y_WEBGL,Qe.flipY),ne.pixelStorei(ne.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Qe.premultiplyAlpha),ne.pixelStorei(ne.UNPACK_ALIGNMENT,Qe.unpackAlignment);const Or=ne.getParameter(ne.UNPACK_ROW_LENGTH),ti=ne.getParameter(ne.UNPACK_IMAGE_HEIGHT),go=ne.getParameter(ne.UNPACK_SKIP_PIXELS),ri=ne.getParameter(ne.UNPACK_SKIP_ROWS),Js=ne.getParameter(ne.UNPACK_SKIP_IMAGES);ne.pixelStorei(ne.UNPACK_ROW_LENGTH,Lr.width),ne.pixelStorei(ne.UNPACK_IMAGE_HEIGHT,Lr.height),ne.pixelStorei(ne.UNPACK_SKIP_PIXELS,Qt),ne.pixelStorei(ne.UNPACK_SKIP_ROWS,Kt),ne.pixelStorei(ne.UNPACK_SKIP_IMAGES,It);const Jr=me.isDataArrayTexture||me.isData3DTexture,fi=Qe.isDataArrayTexture||Qe.isData3DTexture;if(me.isDepthTexture){const ni=Ge.get(me),di=Ge.get(Qe),Bn=Ge.get(ni.__renderTarget),Gr=Ge.get(di.__renderTarget);je.bindFramebuffer(ne.READ_FRAMEBUFFER,Bn.__webglFramebuffer),je.bindFramebuffer(ne.DRAW_FRAMEBUFFER,Gr.__webglFramebuffer);for(let Nn=0;Nn<Ht;Nn++)Jr&&(ne.framebufferTextureLayer(ne.READ_FRAMEBUFFER,ne.COLOR_ATTACHMENT0,Ge.get(me).__webglTexture,Ne,It+Nn),ne.framebufferTextureLayer(ne.DRAW_FRAMEBUFFER,ne.COLOR_ATTACHMENT0,Ge.get(Qe).__webglTexture,St,Rr+Nn)),ne.blitFramebuffer(Qt,Kt,jt,Ft,Xt,Sr,jt,Ft,ne.DEPTH_BUFFER_BIT,ne.NEAREST);je.bindFramebuffer(ne.READ_FRAMEBUFFER,null),je.bindFramebuffer(ne.DRAW_FRAMEBUFFER,null)}else if(Ne!==0||me.isRenderTargetTexture||Ge.has(me)){const ni=Ge.get(me),di=Ge.get(Qe);je.bindFramebuffer(ne.READ_FRAMEBUFFER,At),je.bindFramebuffer(ne.DRAW_FRAMEBUFFER,mr);for(let Bn=0;Bn<Ht;Bn++)Jr?ne.framebufferTextureLayer(ne.READ_FRAMEBUFFER,ne.COLOR_ATTACHMENT0,ni.__webglTexture,Ne,It+Bn):ne.framebufferTexture2D(ne.READ_FRAMEBUFFER,ne.COLOR_ATTACHMENT0,ne.TEXTURE_2D,ni.__webglTexture,Ne),fi?ne.framebufferTextureLayer(ne.DRAW_FRAMEBUFFER,ne.COLOR_ATTACHMENT0,di.__webglTexture,St,Rr+Bn):ne.framebufferTexture2D(ne.DRAW_FRAMEBUFFER,ne.COLOR_ATTACHMENT0,ne.TEXTURE_2D,di.__webglTexture,St),Ne!==0?ne.blitFramebuffer(Qt,Kt,jt,Ft,Xt,Sr,jt,Ft,ne.COLOR_BUFFER_BIT,ne.NEAREST):fi?ne.copyTexSubImage3D(Zr,St,Xt,Sr,Rr+Bn,Qt,Kt,jt,Ft):ne.copyTexSubImage2D(Zr,St,Xt,Sr,Qt,Kt,jt,Ft);je.bindFramebuffer(ne.READ_FRAMEBUFFER,null),je.bindFramebuffer(ne.DRAW_FRAMEBUFFER,null)}else fi?me.isDataTexture||me.isData3DTexture?ne.texSubImage3D(Zr,St,Xt,Sr,Rr,jt,Ft,Ht,Pr,fr,Lr.data):Qe.isCompressedArrayTexture?ne.compressedTexSubImage3D(Zr,St,Xt,Sr,Rr,jt,Ft,Ht,Pr,Lr.data):ne.texSubImage3D(Zr,St,Xt,Sr,Rr,jt,Ft,Ht,Pr,fr,Lr):me.isDataTexture?ne.texSubImage2D(ne.TEXTURE_2D,St,Xt,Sr,jt,Ft,Pr,fr,Lr.data):me.isCompressedTexture?ne.compressedTexSubImage2D(ne.TEXTURE_2D,St,Xt,Sr,Lr.width,Lr.height,Pr,Lr.data):ne.texSubImage2D(ne.TEXTURE_2D,St,Xt,Sr,jt,Ft,Pr,fr,Lr);ne.pixelStorei(ne.UNPACK_ROW_LENGTH,Or),ne.pixelStorei(ne.UNPACK_IMAGE_HEIGHT,ti),ne.pixelStorei(ne.UNPACK_SKIP_PIXELS,go),ne.pixelStorei(ne.UNPACK_SKIP_ROWS,ri),ne.pixelStorei(ne.UNPACK_SKIP_IMAGES,Js),St===0&&Qe.generateMipmaps&&ne.generateMipmap(Zr),je.unbindTexture()},this.copyTextureToTexture3D=function(me,Qe,qe=null,Ze=null,Ne=0){return me.isTexture!==!0&&(Xh("WebGLRenderer: copyTextureToTexture3D function signature has changed."),qe=arguments[0]||null,Ze=arguments[1]||null,me=arguments[2],Qe=arguments[3],Ne=arguments[4]||0),Xh('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(me,Qe,qe,Ze,Ne)},this.initRenderTarget=function(me){Ge.get(me).__webglFramebuffer===void 0&&_e.setupRenderTarget(me)},this.initTexture=function(me){me.isCubeTexture?_e.setTextureCube(me,0):me.isData3DTexture?_e.setTexture3D(me,0):me.isDataArrayTexture||me.isCompressedArrayTexture?_e.setTexture2DArray(me,0):_e.setTexture2D(me,0),je.unbindTexture()},this.resetState=function(){R=0,C=0,P=null,je.reset(),ot.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return dl}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(t){this._outputColorSpace=t;const n=this.getContext();n.drawingBufferColorspace=vn._getDrawingBufferColorSpace(t),n.unpackColorSpace=vn._getUnpackColorSpace()}}const EO=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:Fb,AddEquation:Ic,AddOperation:pE,AdditiveAnimationBlendMode:qb,AdditiveBlending:Xx,AgXToneMapping:_E,AlphaFormat:Hb,AlwaysCompare:BE,AlwaysDepth:uv,AlwaysStencilFunc:Kx,AmbientLight:bT,AnimationAction:IT,AnimationClip:_p,AnimationLoader:HI,AnimationMixer:mj,AnimationObjectGroup:hj,AnimationUtils:FI,ArcCurve:KE,ArrayCamera:CT,ArrowHelper:Oj,AttachedBindMode:Jx,Audio:RT,AudioAnalyser:nj,AudioContext:Sw,AudioListener:ej,AudioLoader:QI,AxesHelper:Fj,BackSide:mo,BasicDepthPacking:EE,BasicShadowMap:qA,BatchedMesh:qE,Bone:x_,BooleanKeyframeTrack:Od,Box2:Sj,Box3:Ws,Box3Helper:Bj,BoxGeometry:kd,BoxHelper:Dj,BufferAttribute:wn,BufferGeometry:Wr,BufferGeometryLoader:ET,ByteType:Nb,Cache:Bu,Camera:Ug,CameraHelper:Lj,CanvasTexture:JE,CapsuleGeometry:M_,CatmullRomCurve3:QE,CineonToneMapping:yE,CircleGeometry:A_,ClampToEdgeWrapping:ia,Clock:Mw,Color:nr,ColorKeyframeTrack:yw,ColorManagement:vn,CompressedArrayTexture:aI,CompressedCubeTexture:lI,CompressedTexture:w_,CompressedTextureLoader:zI,ConeGeometry:E_,ConstantAlphaFactor:fE,ConstantColorFactor:uE,Controls:Uj,CubeCamera:zE,CubeReflectionMapping:Hu,CubeRefractionMapping:Gc,CubeTexture:Gg,CubeTextureLoader:VI,CubeUVReflectionMapping:Cp,CubicBezierCurve:lw,CubicBezierCurve3:ZE,CubicInterpolant:gT,CullFaceBack:Wx,CullFaceFront:YA,CullFaceFrontBack:AP,CullFaceNone:XA,Curve:yl,CurvePath:eT,CustomBlending:JA,CustomToneMapping:vE,CylinderGeometry:Pp,Cylindrical:wj,Data3DTexture:y_,DataArrayTexture:Ng,DataTexture:Ol,DataTextureLoader:WI,DataUtils:k3,DecrementStencilOp:kP,DecrementWrapStencilOp:FP,DefaultLoadingManager:$h,DepthFormat:fd,DepthStencilFormat:Md,DepthTexture:ow,DetachedBindMode:bE,DirectionalLight:ww,DirectionalLightHelper:jj,DiscreteInterpolant:yT,DodecahedronGeometry:T_,DoubleSide:fl,DstAlphaFactor:iE,DstColorFactor:oE,DynamicCopyUsage:$P,DynamicDrawUsage:YP,DynamicReadUsage:KP,EdgesGeometry:tT,EllipseCurve:S_,EqualCompare:IE,EqualDepth:fv,EqualStencilFunc:HP,EquirectangularReflectionMapping:mg,EquirectangularRefractionMapping:gg,Euler:ua,EventDispatcher:Wl,ExtrudeGeometry:R_,FileLoader:ca,Float16BufferAttribute:H3,Float32BufferAttribute:_r,FloatType:jo,Fog:__,FogExp2:v_,FramebufferTexture:oI,FrontSide:Hl,Frustum:Vg,GLBufferAttribute:bj,GLSL1:t3,GLSL3:Qx,GreaterCompare:jE,GreaterDepth:hv,GreaterEqualCompare:DE,GreaterEqualDepth:dv,GreaterEqualStencilFunc:XP,GreaterStencilFunc:VP,GridHelper:Pj,Group:Du,HalfFloatType:Rp,HemisphereLight:xT,HemisphereLightHelper:Rj,IcosahedronGeometry:P_,ImageBitmapLoader:TT,ImageLoader:Eg,ImageUtils:NE,IncrementStencilOp:BP,IncrementWrapStencilOp:OP,InstancedBufferAttribute:Ed,InstancedBufferGeometry:AT,InstancedInterleavedBuffer:xj,InstancedMesh:nw,Int16BufferAttribute:U3,Int32BufferAttribute:G3,Int8BufferAttribute:O3,IntType:u_,InterleavedBuffer:Hg,InterleavedBufferAttribute:zc,Interpolant:jp,InterpolateDiscrete:mp,InterpolateLinear:gp,InterpolateSmooth:q0,InvertStencilOp:NP,KeepStencilOp:Jf,KeyframeTrack:vl,LOD:YE,LatheGeometry:Wg,Layers:hd,LessCompare:PE,LessDepth:cv,LessEqualCompare:Kb,LessEqualDepth:wd,LessEqualStencilFunc:zP,LessStencilFunc:GP,Light:Jc,LightProbe:MT,Line:Vu,Line3:Mj,LineBasicMaterial:Ys,LineCurve:uw,LineCurve3:$E,LineDashedMaterial:hT,LineLoop:iw,LineSegments:gl,LinearFilter:Ei,LinearInterpolant:gw,LinearMipMapLinearFilter:RP,LinearMipMapNearestFilter:CP,LinearMipmapLinearFilter:La,LinearMipmapNearestFilter:ip,LinearSRGBColorSpace:Ad,LinearToneMapping:mE,LinearTransfer:vg,Loader:qs,LoaderUtils:Oc,LoadingManager:vw,LoopOnce:wE,LoopPingPong:ME,LoopRepeat:SE,LuminanceAlphaFormat:Wb,LuminanceFormat:Vb,MOUSE:Yf,Material:Qi,MaterialLoader:O_,MathUtils:kE,Matrix2:Cw,Matrix3:Vr,Matrix4:Cr,MaxEquation:$A,Mesh:Ti,MeshBasicMaterial:sa,MeshDepthMaterial:hw,MeshDistanceMaterial:pw,MeshLambertMaterial:fT,MeshMatcapMaterial:dT,MeshNormalMaterial:cT,MeshPhongMaterial:lT,MeshPhysicalMaterial:ka,MeshStandardMaterial:qg,MeshToonMaterial:uT,MinEquation:ZA,MirroredRepeatWrapping:hp,MixOperation:hE,MultiplyBlending:qx,MultiplyOperation:Og,NearestFilter:fs,NearestMipMapLinearFilter:TP,NearestMipMapNearestFilter:EP,NearestMipmapLinearFilter:td,NearestMipmapNearestFilter:l_,NeutralToneMapping:xE,NeverCompare:RE,NeverDepth:lv,NeverStencilFunc:UP,NoBlending:Ou,NoColorSpace:Iu,NoToneMapping:kl,NormalAnimationBlendMode:m_,NormalBlending:cd,NotEqualCompare:LE,NotEqualDepth:pv,NotEqualStencilFunc:WP,NumberKeyframeTrack:Cd,Object3D:pn,ObjectLoader:JI,ObjectSpaceNormalMap:CE,OctahedronGeometry:Xg,OneFactor:tE,OneMinusConstantAlphaFactor:dE,OneMinusConstantColorFactor:cE,OneMinusDstAlphaFactor:sE,OneMinusDstColorFactor:aE,OneMinusSrcAlphaFactor:av,OneMinusSrcColorFactor:nE,OrthographicCamera:Nu,PCFShadowMap:o_,PCFSoftShadowMap:qm,PMREMGenerator:sb,Path:wg,PerspectiveCamera:yi,Plane:Ru,PlaneGeometry:Ip,PlaneHelper:kj,PointLight:bw,PointLightHelper:Tj,Points:sw,PointsMaterial:b_,PolarGridHelper:Ij,PolyhedronGeometry:qc,PositionalAudio:rj,PropertyBinding:yn,PropertyMixer:PT,QuadraticBezierCurve:cw,QuadraticBezierCurve3:fw,Quaternion:ds,QuaternionKeyframeTrack:Rd,QuaternionLinearInterpolant:vT,RED_GREEN_RGTC2_Format:Nv,RED_RGTC1_Format:Yb,REVISION:kg,RGBADepthPacking:TE,RGBAFormat:zs,RGBAIntegerFormat:p_,RGBA_ASTC_10x10_Format:Lv,RGBA_ASTC_10x5_Format:Pv,RGBA_ASTC_10x6_Format:Iv,RGBA_ASTC_10x8_Format:jv,RGBA_ASTC_12x10_Format:Dv,RGBA_ASTC_12x12_Format:Bv,RGBA_ASTC_4x4_Format:wv,RGBA_ASTC_5x4_Format:Sv,RGBA_ASTC_5x5_Format:Mv,RGBA_ASTC_6x5_Format:Av,RGBA_ASTC_6x6_Format:Ev,RGBA_ASTC_8x5_Format:Tv,RGBA_ASTC_8x6_Format:Cv,RGBA_ASTC_8x8_Format:Rv,RGBA_BPTC_Format:$m,RGBA_ETC2_EAC_Format:bv,RGBA_PVRTC_2BPPV1_Format:vv,RGBA_PVRTC_4BPPV1_Format:yv,RGBA_S3TC_DXT1_Format:Km,RGBA_S3TC_DXT3_Format:Qm,RGBA_S3TC_DXT5_Format:Zm,RGBDepthPacking:IP,RGBFormat:zb,RGBIntegerFormat:PP,RGB_BPTC_SIGNED_Format:kv,RGB_BPTC_UNSIGNED_Format:Ov,RGB_ETC1_Format:_v,RGB_ETC2_Format:xv,RGB_PVRTC_2BPPV1_Format:gv,RGB_PVRTC_4BPPV1_Format:mv,RGB_S3TC_DXT1_Format:Jm,RGDepthPacking:jP,RGFormat:Xb,RGIntegerFormat:h_,RawShaderMaterial:aT,Ray:Bd,Raycaster:jT,RectAreaLight:wT,RedFormat:d_,RedIntegerFormat:Fg,ReinhardToneMapping:gE,RenderTarget:g_,RenderTarget3D:gj,RenderTargetArray:yj,RepeatWrapping:Hc,ReplaceStencilOp:DP,ReverseSubtractEquation:QA,RingGeometry:I_,SIGNED_RED_GREEN_RGTC2_Format:Uv,SIGNED_RED_RGTC1_Format:Fv,SRGBColorSpace:Es,SRGBTransfer:Dn,Scene:ew,ShaderChunk:Qr,ShaderLib:cl,ShaderMaterial:pl,ShadowMaterial:oT,Shape:pd,ShapeGeometry:j_,ShapePath:Nj,ShapeUtils:Fl,ShortType:Ub,Skeleton:zg,SkeletonHelper:Ej,SkinnedMesh:rw,Source:id,Sphere:Cs,SphereGeometry:Yg,Spherical:nb,SphericalHarmonics3:ST,SplineCurve:dw,SpotLight:xw,SpotLightHelper:Aj,Sprite:XE,SpriteMaterial:tw,SrcAlphaFactor:ov,SrcAlphaSaturateFactor:lE,SrcColorFactor:rE,StaticCopyUsage:ZP,StaticDrawUsage:_g,StaticReadUsage:JP,StereoCamera:ZI,StreamCopyUsage:e3,StreamDrawUsage:qP,StreamReadUsage:QP,StringKeyframeTrack:Fd,SubtractEquation:KA,SubtractiveBlending:Yx,TOUCH:qf,TangentSpaceNormalMap:Yc,TetrahedronGeometry:L_,Texture:ei,TextureLoader:_T,TextureUtils:Wj,TorusGeometry:D_,TorusKnotGeometry:B_,Triangle:Io,TriangleFanDrawMode:Gv,TriangleStripDrawMode:Jb,TrianglesDrawMode:AE,TubeGeometry:k_,UVMapping:a_,Uint16BufferAttribute:Zb,Uint32BufferAttribute:$b,Uint8BufferAttribute:F3,Uint8ClampedBufferAttribute:N3,Uniform:Tw,UniformsGroup:_j,UniformsLib:rr,UniformsUtils:HE,UnsignedByteType:hl,UnsignedInt248Type:Sd,UnsignedInt5999Type:Gb,UnsignedIntType:zu,UnsignedShort4444Type:c_,UnsignedShort5551Type:f_,UnsignedShortType:pp,VSMShadowMap:ul,Vector2:Ct,Vector3:Oe,Vector4:bn,VectorKeyframeTrack:Pd,VideoTexture:sI,WebGL3DRenderTarget:E3,WebGLArrayRenderTarget:A3,WebGLCoordinateSystem:dl,WebGLCubeRenderTarget:VE,WebGLRenderTarget:zl,WebGLRenderer:UT,WebGLUtils:NT,WebGPUCoordinateSystem:xg,WireframeGeometry:sT,WrapAroundEnding:yg,ZeroCurvatureEnding:rd,ZeroFactor:eE,ZeroSlopeEnding:nd,ZeroStencilOp:LP,createCanvasElement:FE},Symbol.toStringTag,{value:"Module"}));function Tu(d){if(d===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d}function GT(d,t){d.prototype=Object.create(t.prototype),d.prototype.constructor=d,d.__proto__=t}/*!
 * GSAP 3.12.7
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var la={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},xp={duration:.5,overwrite:!1,delay:0},Pw,Rs,$n,Nl=1e8,Vs=1/Nl,ab=Math.PI*2,TO=ab/4,CO=0,HT=Math.sqrt,RO=Math.cos,PO=Math.sin,hs=function(t){return typeof t=="string"},vi=function(t){return typeof t=="function"},Wu=function(t){return typeof t=="number"},Iw=function(t){return typeof t>"u"},Vl=function(t){return typeof t=="object"},Lo=function(t){return t!==!1},jw=function(){return typeof window<"u"},C0=function(t){return vi(t)||hs(t)},zT=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},Xs=Array.isArray,lb=/(?:-?\.?\d|\.)+/gi,VT=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,tp=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,ux=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,WT=/[+-]=-?[.\d]+/,XT=/[^,'"\[\]\s]+/gi,IO=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,li,Il,ub,Lw,fa={},Wv={},YT,qT=function(t){return(Wv=bp(t,fa))&&Oo},Dw=function(t,n){return console.warn("Invalid property",t,"set to",n,"Missing plugin? gsap.registerPlugin()")},Tg=function(t,n){return!n&&console.warn(t)},JT=function(t,n){return t&&(fa[t]=n)&&Wv&&(Wv[t]=n)||fa},Cg=function(){return 0},jO={suppressEvents:!0,isStart:!0,kill:!1},K0={suppressEvents:!0,kill:!1},LO={suppressEvents:!0},Bw={},Fc=[],cb={},KT,ea={},cx={},S2=30,Q0=[],kw="",Ow=function(t){var n=t[0],r,i;if(Vl(n)||vi(n)||(t=[t]),!(r=(n._gsap||{}).harness)){for(i=Q0.length;i--&&!Q0[i].targetTest(n););r=Q0[i]}for(i=t.length;i--;)t[i]&&(t[i]._gsap||(t[i]._gsap=new xC(t[i],r)))||t.splice(i,1);return t},md=function(t){return t._gsap||Ow(Da(t))[0]._gsap},QT=function(t,n,r){return(r=t[n])&&vi(r)?t[n]():Iw(r)&&t.getAttribute&&t.getAttribute(n)||r},Do=function(t,n){return(t=t.split(",")).forEach(n)||t},Ai=function(t){return Math.round(t*1e5)/1e5||0},Ni=function(t){return Math.round(t*1e7)/1e7||0},op=function(t,n){var r=n.charAt(0),i=parseFloat(n.substr(2));return t=parseFloat(t),r==="+"?t+i:r==="-"?t-i:r==="*"?t*i:t/i},DO=function(t,n){for(var r=n.length,i=0;t.indexOf(n[i])<0&&++i<r;);return i<r},Xv=function(){var t=Fc.length,n=Fc.slice(0),r,i;for(cb={},Fc.length=0,r=0;r<t;r++)i=n[r],i&&i._lazy&&(i.render(i._lazy[0],i._lazy[1],!0)._lazy=0)},ZT=function(t,n,r,i){Fc.length&&!Rs&&Xv(),t.render(n,r,Rs&&n<0&&(t._initted||t._startAt)),Fc.length&&!Rs&&Xv()},$T=function(t){var n=parseFloat(t);return(n||n===0)&&(t+"").match(XT).length<2?n:hs(t)?t.trim():t},eC=function(t){return t},da=function(t,n){for(var r in n)r in t||(t[r]=n[r]);return t},BO=function(t){return function(n,r){for(var i in r)i in n||i==="duration"&&t||i==="ease"||(n[i]=r[i])}},bp=function(t,n){for(var r in n)t[r]=n[r];return t},M2=function d(t,n){for(var r in n)r!=="__proto__"&&r!=="constructor"&&r!=="prototype"&&(t[r]=Vl(n[r])?d(t[r]||(t[r]={}),n[r]):n[r]);return t},Yv=function(t,n){var r={},i;for(i in t)i in n||(r[i]=t[i]);return r},ng=function(t){var n=t.parent||li,r=t.keyframes?BO(Xs(t.keyframes)):da;if(Lo(t.inherit))for(;n;)r(t,n.vars.defaults),n=n.parent||n._dp;return t},kO=function(t,n){for(var r=t.length,i=r===n.length;i&&r--&&t[r]===n[r];);return r<0},tC=function(t,n,r,i,o){var s=t[i],a;if(o)for(a=n[o];s&&s[o]>a;)s=s._prev;return s?(n._next=s._next,s._next=n):(n._next=t[r],t[r]=n),n._next?n._next._prev=n:t[i]=n,n._prev=s,n.parent=n._dp=t,n},N_=function(t,n,r,i){r===void 0&&(r="_first"),i===void 0&&(i="_last");var o=n._prev,s=n._next;o?o._next=s:t[r]===n&&(t[r]=s),s?s._prev=o:t[i]===n&&(t[i]=o),n._next=n._prev=n.parent=null},Vc=function(t,n){t.parent&&(!n||t.parent.autoRemoveChildren)&&t.parent.remove&&t.parent.remove(t),t._act=0},gd=function(t,n){if(t&&(!n||n._end>t._dur||n._start<0))for(var r=t;r;)r._dirty=1,r=r.parent;return t},OO=function(t){for(var n=t.parent;n&&n.parent;)n._dirty=1,n.totalDuration(),n=n.parent;return t},fb=function(t,n,r,i){return t._startAt&&(Rs?t._startAt.revert(K0):t.vars.immediateRender&&!t.vars.autoRevert||t._startAt.render(n,!0,i))},FO=function d(t){return!t||t._ts&&d(t.parent)},A2=function(t){return t._repeat?wp(t._tTime,t=t.duration()+t._rDelay)*t:0},wp=function(t,n){var r=Math.floor(t=Ni(t/n));return t&&r===t?r-1:r},qv=function(t,n){return(t-n._start)*n._ts+(n._ts>=0?0:n._dirty?n.totalDuration():n._tDur)},U_=function(t){return t._end=Ni(t._start+(t._tDur/Math.abs(t._ts||t._rts||Vs)||0))},G_=function(t,n){var r=t._dp;return r&&r.smoothChildTiming&&t._ts&&(t._start=Ni(r._time-(t._ts>0?n/t._ts:((t._dirty?t.totalDuration():t._tDur)-n)/-t._ts)),U_(t),r._dirty||gd(r,t)),t},rC=function(t,n){var r;if((n._time||!n._dur&&n._initted||n._start<t._time&&(n._dur||!n.add))&&(r=qv(t.rawTime(),n),(!n._dur||Jg(0,n.totalDuration(),r)-n._tTime>Vs)&&n.render(r,!0)),gd(t,n)._dp&&t._initted&&t._time>=t._dur&&t._ts){if(t._dur<t.duration())for(r=t;r._dp;)r.rawTime()>=0&&r.totalTime(r._tTime),r=r._dp;t._zTime=-1e-8}},Ll=function(t,n,r,i){return n.parent&&Vc(n),n._start=Ni((Wu(r)?r:r||t!==li?Ra(t,r,n):t._time)+n._delay),n._end=Ni(n._start+(n.totalDuration()/Math.abs(n.timeScale())||0)),tC(t,n,"_first","_last",t._sort?"_start":0),db(n)||(t._recent=n),i||rC(t,n),t._ts<0&&G_(t,t._tTime),t},nC=function(t,n){return(fa.ScrollTrigger||Dw("scrollTrigger",n))&&fa.ScrollTrigger.create(n,t)},iC=function(t,n,r,i,o){if(Nw(t,n,o),!t._initted)return 1;if(!r&&t._pt&&!Rs&&(t._dur&&t.vars.lazy!==!1||!t._dur&&t.vars.lazy)&&KT!==ra.frame)return Fc.push(t),t._lazy=[o,i],1},NO=function d(t){var n=t.parent;return n&&n._ts&&n._initted&&!n._lock&&(n.rawTime()<0||d(n))},db=function(t){var n=t.data;return n==="isFromStart"||n==="isStart"},UO=function(t,n,r,i){var o=t.ratio,s=n<0||!n&&(!t._start&&NO(t)&&!(!t._initted&&db(t))||(t._ts<0||t._dp._ts<0)&&!db(t))?0:1,a=t._rDelay,l=0,u,h,p;if(a&&t._repeat&&(l=Jg(0,t._tDur,n),h=wp(l,a),t._yoyo&&h&1&&(s=1-s),h!==wp(t._tTime,a)&&(o=1-s,t.vars.repeatRefresh&&t._initted&&t.invalidate())),s!==o||Rs||i||t._zTime===Vs||!n&&t._zTime){if(!t._initted&&iC(t,n,i,r,l))return;for(p=t._zTime,t._zTime=n||(r?Vs:0),r||(r=n&&!p),t.ratio=s,t._from&&(s=1-s),t._time=0,t._tTime=l,u=t._pt;u;)u.r(s,u.d),u=u._next;n<0&&fb(t,n,r,!0),t._onUpdate&&!r&&oa(t,"onUpdate"),l&&t._repeat&&!r&&t.parent&&oa(t,"onRepeat"),(n>=t._tDur||n<0)&&t.ratio===s&&(s&&Vc(t,1),!r&&!Rs&&(oa(t,s?"onComplete":"onReverseComplete",!0),t._prom&&t._prom()))}else t._zTime||(t._zTime=n)},GO=function(t,n,r){var i;if(r>n)for(i=t._first;i&&i._start<=r;){if(i.data==="isPause"&&i._start>n)return i;i=i._next}else for(i=t._last;i&&i._start>=r;){if(i.data==="isPause"&&i._start<n)return i;i=i._prev}},Sp=function(t,n,r,i){var o=t._repeat,s=Ni(n)||0,a=t._tTime/t._tDur;return a&&!i&&(t._time*=s/t._dur),t._dur=s,t._tDur=o?o<0?1e10:Ni(s*(o+1)+t._rDelay*o):s,a>0&&!i&&G_(t,t._tTime=t._tDur*a),t.parent&&U_(t),r||gd(t.parent,t),t},E2=function(t){return t instanceof ho?gd(t):Sp(t,t._dur)},HO={_start:0,endTime:Cg,totalDuration:Cg},Ra=function d(t,n,r){var i=t.labels,o=t._recent||HO,s=t.duration()>=Nl?o.endTime(!1):t._dur,a,l,u;return hs(n)&&(isNaN(n)||n in i)?(l=n.charAt(0),u=n.substr(-1)==="%",a=n.indexOf("="),l==="<"||l===">"?(a>=0&&(n=n.replace(/=/,"")),(l==="<"?o._start:o.endTime(o._repeat>=0))+(parseFloat(n.substr(1))||0)*(u?(a<0?o:r).totalDuration()/100:1)):a<0?(n in i||(i[n]=s),i[n]):(l=parseFloat(n.charAt(a-1)+n.substr(a+1)),u&&r&&(l=l/100*(Xs(r)?r[0]:r).totalDuration()),a>1?d(t,n.substr(0,a-1),r)+l:s+l)):n==null?s:+n},ig=function(t,n,r){var i=Wu(n[1]),o=(i?2:1)+(t<2?0:1),s=n[o],a,l;if(i&&(s.duration=n[1]),s.parent=r,t){for(a=s,l=r;l&&!("immediateRender"in a);)a=l.vars.defaults||{},l=Lo(l.vars.inherit)&&l.parent;s.immediateRender=Lo(a.immediateRender),t<2?s.runBackwards=1:s.startAt=n[o-1]}return new Fi(n[0],s,n[o+1])},Kc=function(t,n){return t||t===0?n(t):n},Jg=function(t,n,r){return r<t?t:r>n?n:r},Gs=function(t,n){return!hs(t)||!(n=IO.exec(t))?"":n[1]},zO=function(t,n,r){return Kc(r,function(i){return Jg(t,n,i)})},hb=[].slice,sC=function(t,n){return t&&Vl(t)&&"length"in t&&(!n&&!t.length||t.length-1 in t&&Vl(t[0]))&&!t.nodeType&&t!==Il},VO=function(t,n,r){return r===void 0&&(r=[]),t.forEach(function(i){var o;return hs(i)&&!n||sC(i,1)?(o=r).push.apply(o,Da(i)):r.push(i)})||r},Da=function(t,n,r){return $n&&!n&&$n.selector?$n.selector(t):hs(t)&&!r&&(ub||!Mp())?hb.call((n||Lw).querySelectorAll(t),0):Xs(t)?VO(t,r):sC(t)?hb.call(t,0):t?[t]:[]},pb=function(t){return t=Da(t)[0]||Tg("Invalid scope")||{},function(n){var r=t.current||t.nativeElement||t;return Da(n,r.querySelectorAll?r:r===t?Tg("Invalid scope")||Lw.createElement("div"):t)}},oC=function(t){return t.sort(function(){return .5-Math.random()})},aC=function(t){if(vi(t))return t;var n=Vl(t)?t:{each:t},r=yd(n.ease),i=n.from||0,o=parseFloat(n.base)||0,s={},a=i>0&&i<1,l=isNaN(i)||a,u=n.axis,h=i,p=i;return hs(i)?h=p={center:.5,edges:.5,end:1}[i]||0:!a&&l&&(h=i[0],p=i[1]),function(c,f,m){var y=(m||n).length,v=s[y],g,x,b,w,T,R,C,P,I;if(!v){if(I=n.grid==="auto"?0:(n.grid||[1,Nl])[1],!I){for(C=-1e8;C<(C=m[I++].getBoundingClientRect().left)&&I<y;);I<y&&I--}for(v=s[y]=[],g=l?Math.min(I,y)*h-.5:i%I,x=I===Nl?0:l?y*p/I-.5:i/I|0,C=0,P=Nl,R=0;R<y;R++)b=R%I-g,w=x-(R/I|0),v[R]=T=u?Math.abs(u==="y"?w:b):HT(b*b+w*w),T>C&&(C=T),T<P&&(P=T);i==="random"&&oC(v),v.max=C-P,v.min=P,v.v=y=(parseFloat(n.amount)||parseFloat(n.each)*(I>y?y-1:u?u==="y"?y/I:I:Math.max(I,y/I))||0)*(i==="edges"?-1:1),v.b=y<0?o-y:o,v.u=Gs(n.amount||n.each)||0,r=r&&y<0?yC(r):r}return y=(v[c]-v.min)/v.max||0,Ni(v.b+(r?r(y):y)*v.v)+v.u}},mb=function(t){var n=Math.pow(10,((t+"").split(".")[1]||"").length);return function(r){var i=Ni(Math.round(parseFloat(r)/t)*t*n);return(i-i%1)/n+(Wu(r)?0:Gs(r))}},lC=function(t,n){var r=Xs(t),i,o;return!r&&Vl(t)&&(i=r=t.radius||Nl,t.values?(t=Da(t.values),(o=!Wu(t[0]))&&(i*=i)):t=mb(t.increment)),Kc(n,r?vi(t)?function(s){return o=t(s),Math.abs(o-s)<=i?o:s}:function(s){for(var a=parseFloat(o?s.x:s),l=parseFloat(o?s.y:0),u=Nl,h=0,p=t.length,c,f;p--;)o?(c=t[p].x-a,f=t[p].y-l,c=c*c+f*f):c=Math.abs(t[p]-a),c<u&&(u=c,h=p);return h=!i||u<=i?t[h]:s,o||h===s||Wu(s)?h:h+Gs(s)}:mb(t))},uC=function(t,n,r,i){return Kc(Xs(t)?!n:r===!0?!!(r=0):!i,function(){return Xs(t)?t[~~(Math.random()*t.length)]:(r=r||1e-5)&&(i=r<1?Math.pow(10,(r+"").length-2):1)&&Math.floor(Math.round((t-r/2+Math.random()*(n-t+r*.99))/r)*r*i)/i})},WO=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return function(i){return n.reduce(function(o,s){return s(o)},i)}},XO=function(t,n){return function(r){return t(parseFloat(r))+(n||Gs(r))}},YO=function(t,n,r){return fC(t,n,0,1,r)},cC=function(t,n,r){return Kc(r,function(i){return t[~~n(i)]})},qO=function d(t,n,r){var i=n-t;return Xs(t)?cC(t,d(0,t.length),n):Kc(r,function(o){return(i+(o-t)%i)%i+t})},JO=function d(t,n,r){var i=n-t,o=i*2;return Xs(t)?cC(t,d(0,t.length-1),n):Kc(r,function(s){return s=(o+(s-t)%o)%o||0,t+(s>i?o-s:s)})},Rg=function(t){for(var n=0,r="",i,o,s,a;~(i=t.indexOf("random(",n));)s=t.indexOf(")",i),a=t.charAt(i+7)==="[",o=t.substr(i+7,s-i-7).match(a?XT:lb),r+=t.substr(n,i-n)+uC(a?o:+o[0],a?0:+o[1],+o[2]||1e-5),n=s+1;return r+t.substr(n,t.length-n)},fC=function(t,n,r,i,o){var s=n-t,a=i-r;return Kc(o,function(l){return r+((l-t)/s*a||0)})},KO=function d(t,n,r,i){var o=isNaN(t+n)?0:function(f){return(1-f)*t+f*n};if(!o){var s=hs(t),a={},l,u,h,p,c;if(r===!0&&(i=1)&&(r=null),s)t={p:t},n={p:n};else if(Xs(t)&&!Xs(n)){for(h=[],p=t.length,c=p-2,u=1;u<p;u++)h.push(d(t[u-1],t[u]));p--,o=function(m){m*=p;var y=Math.min(c,~~m);return h[y](m-y)},r=n}else i||(t=bp(Xs(t)?[]:{},t));if(!h){for(l in n)Fw.call(a,t,l,"get",n[l]);o=function(m){return Hw(m,a)||(s?t.p:t)}}}return Kc(r,o)},T2=function(t,n,r){var i=t.labels,o=Nl,s,a,l;for(s in i)a=i[s]-n,a<0==!!r&&a&&o>(a=Math.abs(a))&&(l=s,o=a);return l},oa=function(t,n,r){var i=t.vars,o=i[n],s=$n,a=t._ctx,l,u,h;if(o)return l=i[n+"Params"],u=i.callbackScope||t,r&&Fc.length&&Xv(),a&&($n=a),h=l?o.apply(u,l):o.call(u),$n=s,h},Um=function(t){return Vc(t),t.scrollTrigger&&t.scrollTrigger.kill(!!Rs),t.progress()<1&&oa(t,"onInterrupt"),t},rp,dC=[],hC=function(t){if(t)if(t=!t.name&&t.default||t,jw()||t.headless){var n=t.name,r=vi(t),i=n&&!r&&t.init?function(){this._props=[]}:t,o={init:Cg,render:Hw,add:Fw,kill:dF,modifier:fF,rawVars:0},s={targetTest:0,get:0,getSetter:Gw,aliases:{},register:0};if(Mp(),t!==i){if(ea[n])return;da(i,da(Yv(t,o),s)),bp(i.prototype,bp(o,Yv(t,s))),ea[i.prop=n]=i,t.targetTest&&(Q0.push(i),Bw[n]=1),n=(n==="css"?"CSS":n.charAt(0).toUpperCase()+n.substr(1))+"Plugin"}JT(n,i),t.register&&t.register(Oo,i,Bo)}else dC.push(t)},zn=255,Gm={aqua:[0,zn,zn],lime:[0,zn,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,zn],navy:[0,0,128],white:[zn,zn,zn],olive:[128,128,0],yellow:[zn,zn,0],orange:[zn,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[zn,0,0],pink:[zn,192,203],cyan:[0,zn,zn],transparent:[zn,zn,zn,0]},fx=function(t,n,r){return t+=t<0?1:t>1?-1:0,(t*6<1?n+(r-n)*t*6:t<.5?r:t*3<2?n+(r-n)*(2/3-t)*6:n)*zn+.5|0},pC=function(t,n,r){var i=t?Wu(t)?[t>>16,t>>8&zn,t&zn]:0:Gm.black,o,s,a,l,u,h,p,c,f,m;if(!i){if(t.substr(-1)===","&&(t=t.substr(0,t.length-1)),Gm[t])i=Gm[t];else if(t.charAt(0)==="#"){if(t.length<6&&(o=t.charAt(1),s=t.charAt(2),a=t.charAt(3),t="#"+o+o+s+s+a+a+(t.length===5?t.charAt(4)+t.charAt(4):"")),t.length===9)return i=parseInt(t.substr(1,6),16),[i>>16,i>>8&zn,i&zn,parseInt(t.substr(7),16)/255];t=parseInt(t.substr(1),16),i=[t>>16,t>>8&zn,t&zn]}else if(t.substr(0,3)==="hsl"){if(i=m=t.match(lb),!n)l=+i[0]%360/360,u=+i[1]/100,h=+i[2]/100,s=h<=.5?h*(u+1):h+u-h*u,o=h*2-s,i.length>3&&(i[3]*=1),i[0]=fx(l+1/3,o,s),i[1]=fx(l,o,s),i[2]=fx(l-1/3,o,s);else if(~t.indexOf("="))return i=t.match(VT),r&&i.length<4&&(i[3]=1),i}else i=t.match(lb)||Gm.transparent;i=i.map(Number)}return n&&!m&&(o=i[0]/zn,s=i[1]/zn,a=i[2]/zn,p=Math.max(o,s,a),c=Math.min(o,s,a),h=(p+c)/2,p===c?l=u=0:(f=p-c,u=h>.5?f/(2-p-c):f/(p+c),l=p===o?(s-a)/f+(s<a?6:0):p===s?(a-o)/f+2:(o-s)/f+4,l*=60),i[0]=~~(l+.5),i[1]=~~(u*100+.5),i[2]=~~(h*100+.5)),r&&i.length<4&&(i[3]=1),i},mC=function(t){var n=[],r=[],i=-1;return t.split(Nc).forEach(function(o){var s=o.match(tp)||[];n.push.apply(n,s),r.push(i+=s.length+1)}),n.c=r,n},C2=function(t,n,r){var i="",o=(t+i).match(Nc),s=n?"hsla(":"rgba(",a=0,l,u,h,p;if(!o)return t;if(o=o.map(function(c){return(c=pC(c,n,1))&&s+(n?c[0]+","+c[1]+"%,"+c[2]+"%,"+c[3]:c.join(","))+")"}),r&&(h=mC(t),l=r.c,l.join(i)!==h.c.join(i)))for(u=t.replace(Nc,"1").split(tp),p=u.length-1;a<p;a++)i+=u[a]+(~l.indexOf(a)?o.shift()||s+"0,0,0,0)":(h.length?h:o.length?o:r).shift());if(!u)for(u=t.split(Nc),p=u.length-1;a<p;a++)i+=u[a]+o[a];return i+u[p]},Nc=function(){var d="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",t;for(t in Gm)d+="|"+t+"\\b";return new RegExp(d+")","gi")}(),QO=/hsl[a]?\(/,gC=function(t){var n=t.join(" "),r;if(Nc.lastIndex=0,Nc.test(n))return r=QO.test(n),t[1]=C2(t[1],r),t[0]=C2(t[0],r,mC(t[1])),!0},Pg,ra=function(){var d=Date.now,t=500,n=33,r=d(),i=r,o=1e3/240,s=o,a=[],l,u,h,p,c,f,m=function y(v){var g=d()-i,x=v===!0,b,w,T,R;if((g>t||g<0)&&(r+=g-n),i+=g,T=i-r,b=T-s,(b>0||x)&&(R=++p.frame,c=T-p.time*1e3,p.time=T=T/1e3,s+=b+(b>=o?4:o-b),w=1),x||(l=u(y)),w)for(f=0;f<a.length;f++)a[f](T,c,R,v)};return p={time:0,frame:0,tick:function(){m(!0)},deltaRatio:function(v){return c/(1e3/(v||60))},wake:function(){YT&&(!ub&&jw()&&(Il=ub=window,Lw=Il.document||{},fa.gsap=Oo,(Il.gsapVersions||(Il.gsapVersions=[])).push(Oo.version),qT(Wv||Il.GreenSockGlobals||!Il.gsap&&Il||{}),dC.forEach(hC)),h=typeof requestAnimationFrame<"u"&&requestAnimationFrame,l&&p.sleep(),u=h||function(v){return setTimeout(v,s-p.time*1e3+1|0)},Pg=1,m(2))},sleep:function(){(h?cancelAnimationFrame:clearTimeout)(l),Pg=0,u=Cg},lagSmoothing:function(v,g){t=v||1/0,n=Math.min(g||33,t)},fps:function(v){o=1e3/(v||240),s=p.time*1e3+o},add:function(v,g,x){var b=g?function(w,T,R,C){v(w,T,R,C),p.remove(b)}:v;return p.remove(v),a[x?"unshift":"push"](b),Mp(),b},remove:function(v,g){~(g=a.indexOf(v))&&a.splice(g,1)&&f>=g&&f--},_listeners:a},p}(),Mp=function(){return!Pg&&ra.wake()},hn={},ZO=/^[\d.\-M][\d.\-,\s]/,$O=/["']/g,eF=function(t){for(var n={},r=t.substr(1,t.length-3).split(":"),i=r[0],o=1,s=r.length,a,l,u;o<s;o++)l=r[o],a=o!==s-1?l.lastIndexOf(","):l.length,u=l.substr(0,a),n[i]=isNaN(u)?u.replace($O,"").trim():+u,i=l.substr(a+1).trim();return n},tF=function(t){var n=t.indexOf("(")+1,r=t.indexOf(")"),i=t.indexOf("(",n);return t.substring(n,~i&&i<r?t.indexOf(")",r+1):r)},rF=function(t){var n=(t+"").split("("),r=hn[n[0]];return r&&n.length>1&&r.config?r.config.apply(null,~t.indexOf("{")?[eF(n[1])]:tF(t).split(",").map($T)):hn._CE&&ZO.test(t)?hn._CE("",t):r},yC=function(t){return function(n){return 1-t(1-n)}},vC=function d(t,n){for(var r=t._first,i;r;)r instanceof ho?d(r,n):r.vars.yoyoEase&&(!r._yoyo||!r._repeat)&&r._yoyo!==n&&(r.timeline?d(r.timeline,n):(i=r._ease,r._ease=r._yEase,r._yEase=i,r._yoyo=n)),r=r._next},yd=function(t,n){return t&&(vi(t)?t:hn[t]||rF(t))||n},Nd=function(t,n,r,i){r===void 0&&(r=function(l){return 1-n(1-l)}),i===void 0&&(i=function(l){return l<.5?n(l*2)/2:1-n((1-l)*2)/2});var o={easeIn:n,easeOut:r,easeInOut:i},s;return Do(t,function(a){hn[a]=fa[a]=o,hn[s=a.toLowerCase()]=r;for(var l in o)hn[s+(l==="easeIn"?".in":l==="easeOut"?".out":".inOut")]=hn[a+"."+l]=o[l]}),o},_C=function(t){return function(n){return n<.5?(1-t(1-n*2))/2:.5+t((n-.5)*2)/2}},dx=function d(t,n,r){var i=n>=1?n:1,o=(r||(t?.3:.45))/(n<1?n:1),s=o/ab*(Math.asin(1/i)||0),a=function(h){return h===1?1:i*Math.pow(2,-10*h)*PO((h-s)*o)+1},l=t==="out"?a:t==="in"?function(u){return 1-a(1-u)}:_C(a);return o=ab/o,l.config=function(u,h){return d(t,u,h)},l},hx=function d(t,n){n===void 0&&(n=1.70158);var r=function(s){return s?--s*s*((n+1)*s+n)+1:0},i=t==="out"?r:t==="in"?function(o){return 1-r(1-o)}:_C(r);return i.config=function(o){return d(t,o)},i};Do("Linear,Quad,Cubic,Quart,Quint,Strong",function(d,t){var n=t<5?t+1:t;Nd(d+",Power"+(n-1),t?function(r){return Math.pow(r,n)}:function(r){return r},function(r){return 1-Math.pow(1-r,n)},function(r){return r<.5?Math.pow(r*2,n)/2:1-Math.pow((1-r)*2,n)/2})});hn.Linear.easeNone=hn.none=hn.Linear.easeIn;Nd("Elastic",dx("in"),dx("out"),dx());(function(d,t){var n=1/t,r=2*n,i=2.5*n,o=function(a){return a<n?d*a*a:a<r?d*Math.pow(a-1.5/t,2)+.75:a<i?d*(a-=2.25/t)*a+.9375:d*Math.pow(a-2.625/t,2)+.984375};Nd("Bounce",function(s){return 1-o(1-s)},o)})(7.5625,2.75);Nd("Expo",function(d){return Math.pow(2,10*(d-1))*d+d*d*d*d*d*d*(1-d)});Nd("Circ",function(d){return-(HT(1-d*d)-1)});Nd("Sine",function(d){return d===1?1:-RO(d*TO)+1});Nd("Back",hx("in"),hx("out"),hx());hn.SteppedEase=hn.steps=fa.SteppedEase={config:function(t,n){t===void 0&&(t=1);var r=1/t,i=t+(n?0:1),o=n?1:0,s=1-Vs;return function(a){return((i*Jg(0,s,a)|0)+o)*r}}};xp.ease=hn["quad.out"];Do("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(d){return kw+=d+","+d+"Params,"});var xC=function(t,n){this.id=CO++,t._gsap=this,this.target=t,this.harness=n,this.get=n?n.get:QT,this.set=n?n.getSetter:Gw},Ig=function(){function d(n){this.vars=n,this._delay=+n.delay||0,(this._repeat=n.repeat===1/0?-2:n.repeat||0)&&(this._rDelay=n.repeatDelay||0,this._yoyo=!!n.yoyo||!!n.yoyoEase),this._ts=1,Sp(this,+n.duration,1,1),this.data=n.data,$n&&(this._ctx=$n,$n.data.push(this)),Pg||ra.wake()}var t=d.prototype;return t.delay=function(r){return r||r===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+r-this._delay),this._delay=r,this):this._delay},t.duration=function(r){return arguments.length?this.totalDuration(this._repeat>0?r+(r+this._rDelay)*this._repeat:r):this.totalDuration()&&this._dur},t.totalDuration=function(r){return arguments.length?(this._dirty=0,Sp(this,this._repeat<0?r:(r-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},t.totalTime=function(r,i){if(Mp(),!arguments.length)return this._tTime;var o=this._dp;if(o&&o.smoothChildTiming&&this._ts){for(G_(this,r),!o._dp||o.parent||rC(o,this);o&&o.parent;)o.parent._time!==o._start+(o._ts>=0?o._tTime/o._ts:(o.totalDuration()-o._tTime)/-o._ts)&&o.totalTime(o._tTime,!0),o=o.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&r<this._tDur||this._ts<0&&r>0||!this._tDur&&!r)&&Ll(this._dp,this,this._start-this._delay)}return(this._tTime!==r||!this._dur&&!i||this._initted&&Math.abs(this._zTime)===Vs||!r&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=r),ZT(this,r,i)),this},t.time=function(r,i){return arguments.length?this.totalTime(Math.min(this.totalDuration(),r+A2(this))%(this._dur+this._rDelay)||(r?this._dur:0),i):this._time},t.totalProgress=function(r,i){return arguments.length?this.totalTime(this.totalDuration()*r,i):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>=0&&this._initted?1:0},t.progress=function(r,i){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-r:r)+A2(this),i):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},t.iteration=function(r,i){var o=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(r-1)*o,i):this._repeat?wp(this._tTime,o)+1:1},t.timeScale=function(r,i){if(!arguments.length)return this._rts===-1e-8?0:this._rts;if(this._rts===r)return this;var o=this.parent&&this._ts?qv(this.parent._time,this):this._tTime;return this._rts=+r||0,this._ts=this._ps||r===-1e-8?0:this._rts,this.totalTime(Jg(-Math.abs(this._delay),this._tDur,o),i!==!1),U_(this),OO(this)},t.paused=function(r){return arguments.length?(this._ps!==r&&(this._ps=r,r?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Mp(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==Vs&&(this._tTime-=Vs)))),this):this._ps},t.startTime=function(r){if(arguments.length){this._start=r;var i=this.parent||this._dp;return i&&(i._sort||!this.parent)&&Ll(i,this,r-this._delay),this}return this._start},t.endTime=function(r){return this._start+(Lo(r)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},t.rawTime=function(r){var i=this.parent||this._dp;return i?r&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?qv(i.rawTime(r),this):this._tTime:this._tTime},t.revert=function(r){r===void 0&&(r=LO);var i=Rs;return Rs=r,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(r),this.totalTime(-.01,r.suppressEvents)),this.data!=="nested"&&r.kill!==!1&&this.kill(),Rs=i,this},t.globalTime=function(r){for(var i=this,o=arguments.length?r:i.rawTime();i;)o=i._start+o/(Math.abs(i._ts)||1),i=i._dp;return!this.parent&&this._sat?this._sat.globalTime(r):o},t.repeat=function(r){return arguments.length?(this._repeat=r===1/0?-2:r,E2(this)):this._repeat===-2?1/0:this._repeat},t.repeatDelay=function(r){if(arguments.length){var i=this._time;return this._rDelay=r,E2(this),i?this.time(i):this}return this._rDelay},t.yoyo=function(r){return arguments.length?(this._yoyo=r,this):this._yoyo},t.seek=function(r,i){return this.totalTime(Ra(this,r),Lo(i))},t.restart=function(r,i){return this.play().totalTime(r?-this._delay:0,Lo(i)),this._dur||(this._zTime=-1e-8),this},t.play=function(r,i){return r!=null&&this.seek(r,i),this.reversed(!1).paused(!1)},t.reverse=function(r,i){return r!=null&&this.seek(r||this.totalDuration(),i),this.reversed(!0).paused(!1)},t.pause=function(r,i){return r!=null&&this.seek(r,i),this.paused(!0)},t.resume=function(){return this.paused(!1)},t.reversed=function(r){return arguments.length?(!!r!==this.reversed()&&this.timeScale(-this._rts||(r?-1e-8:0)),this):this._rts<0},t.invalidate=function(){return this._initted=this._act=0,this._zTime=-1e-8,this},t.isActive=function(){var r=this.parent||this._dp,i=this._start,o;return!!(!r||this._ts&&this._initted&&r.isActive()&&(o=r.rawTime(!0))>=i&&o<this.endTime(!0)-Vs)},t.eventCallback=function(r,i,o){var s=this.vars;return arguments.length>1?(i?(s[r]=i,o&&(s[r+"Params"]=o),r==="onUpdate"&&(this._onUpdate=i)):delete s[r],this):s[r]},t.then=function(r){var i=this;return new Promise(function(o){var s=vi(r)?r:eC,a=function(){var u=i.then;i.then=null,vi(s)&&(s=s(i))&&(s.then||s===i)&&(i.then=u),o(s),i.then=u};i._initted&&i.totalProgress()===1&&i._ts>=0||!i._tTime&&i._ts<0?a():i._prom=a})},t.kill=function(){Um(this)},d}();da(Ig.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-1e-8,_prom:0,_ps:!1,_rts:1});var ho=function(d){GT(t,d);function t(r,i){var o;return r===void 0&&(r={}),o=d.call(this,r)||this,o.labels={},o.smoothChildTiming=!!r.smoothChildTiming,o.autoRemoveChildren=!!r.autoRemoveChildren,o._sort=Lo(r.sortChildren),li&&Ll(r.parent||li,Tu(o),i),r.reversed&&o.reverse(),r.paused&&o.paused(!0),r.scrollTrigger&&nC(Tu(o),r.scrollTrigger),o}var n=t.prototype;return n.to=function(i,o,s){return ig(0,arguments,this),this},n.from=function(i,o,s){return ig(1,arguments,this),this},n.fromTo=function(i,o,s,a){return ig(2,arguments,this),this},n.set=function(i,o,s){return o.duration=0,o.parent=this,ng(o).repeatDelay||(o.repeat=0),o.immediateRender=!!o.immediateRender,new Fi(i,o,Ra(this,s),1),this},n.call=function(i,o,s){return Ll(this,Fi.delayedCall(0,i,o),s)},n.staggerTo=function(i,o,s,a,l,u,h){return s.duration=o,s.stagger=s.stagger||a,s.onComplete=u,s.onCompleteParams=h,s.parent=this,new Fi(i,s,Ra(this,l)),this},n.staggerFrom=function(i,o,s,a,l,u,h){return s.runBackwards=1,ng(s).immediateRender=Lo(s.immediateRender),this.staggerTo(i,o,s,a,l,u,h)},n.staggerFromTo=function(i,o,s,a,l,u,h,p){return a.startAt=s,ng(a).immediateRender=Lo(a.immediateRender),this.staggerTo(i,o,a,l,u,h,p)},n.render=function(i,o,s){var a=this._time,l=this._dirty?this.totalDuration():this._tDur,u=this._dur,h=i<=0?0:Ni(i),p=this._zTime<0!=i<0&&(this._initted||!u),c,f,m,y,v,g,x,b,w,T,R,C;if(this!==li&&h>l&&i>=0&&(h=l),h!==this._tTime||s||p){if(a!==this._time&&u&&(h+=this._time-a,i+=this._time-a),c=h,w=this._start,b=this._ts,g=!b,p&&(u||(a=this._zTime),(i||!o)&&(this._zTime=i)),this._repeat){if(R=this._yoyo,v=u+this._rDelay,this._repeat<-1&&i<0)return this.totalTime(v*100+i,o,s);if(c=Ni(h%v),h===l?(y=this._repeat,c=u):(T=Ni(h/v),y=~~T,y&&y===T&&(c=u,y--),c>u&&(c=u)),T=wp(this._tTime,v),!a&&this._tTime&&T!==y&&this._tTime-T*v-this._dur<=0&&(T=y),R&&y&1&&(c=u-c,C=1),y!==T&&!this._lock){var P=R&&T&1,I=P===(R&&y&1);if(y<T&&(P=!P),a=P?0:h%u?u:h,this._lock=1,this.render(a||(C?0:Ni(y*v)),o,!u)._lock=0,this._tTime=h,!o&&this.parent&&oa(this,"onRepeat"),this.vars.repeatRefresh&&!C&&(this.invalidate()._lock=1),a&&a!==this._time||g!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(u=this._dur,l=this._tDur,I&&(this._lock=2,a=P?u:-1e-4,this.render(a,!0),this.vars.repeatRefresh&&!C&&this.invalidate()),this._lock=0,!this._ts&&!g)return this;vC(this,C)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(x=GO(this,Ni(a),Ni(c)),x&&(h-=c-(c=x._start))),this._tTime=h,this._time=c,this._act=!b,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=i,a=0),!a&&c&&!o&&!y&&(oa(this,"onStart"),this._tTime!==h))return this;if(c>=a&&i>=0)for(f=this._first;f;){if(m=f._next,(f._act||c>=f._start)&&f._ts&&x!==f){if(f.parent!==this)return this.render(i,o,s);if(f.render(f._ts>0?(c-f._start)*f._ts:(f._dirty?f.totalDuration():f._tDur)+(c-f._start)*f._ts,o,s),c!==this._time||!this._ts&&!g){x=0,m&&(h+=this._zTime=-1e-8);break}}f=m}else{f=this._last;for(var D=i<0?i:c;f;){if(m=f._prev,(f._act||D<=f._end)&&f._ts&&x!==f){if(f.parent!==this)return this.render(i,o,s);if(f.render(f._ts>0?(D-f._start)*f._ts:(f._dirty?f.totalDuration():f._tDur)+(D-f._start)*f._ts,o,s||Rs&&(f._initted||f._startAt)),c!==this._time||!this._ts&&!g){x=0,m&&(h+=this._zTime=D?-1e-8:Vs);break}}f=m}}if(x&&!o&&(this.pause(),x.render(c>=a?0:-1e-8)._zTime=c>=a?1:-1,this._ts))return this._start=w,U_(this),this.render(i,o,s);this._onUpdate&&!o&&oa(this,"onUpdate",!0),(h===l&&this._tTime>=this.totalDuration()||!h&&a)&&(w===this._start||Math.abs(b)!==Math.abs(this._ts))&&(this._lock||((i||!u)&&(h===l&&this._ts>0||!h&&this._ts<0)&&Vc(this,1),!o&&!(i<0&&!a)&&(h||a||!l)&&(oa(this,h===l&&i>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(h<l&&this.timeScale()>0)&&this._prom())))}return this},n.add=function(i,o){var s=this;if(Wu(o)||(o=Ra(this,o,i)),!(i instanceof Ig)){if(Xs(i))return i.forEach(function(a){return s.add(a,o)}),this;if(hs(i))return this.addLabel(i,o);if(vi(i))i=Fi.delayedCall(0,i);else return this}return this!==i?Ll(this,i,o):this},n.getChildren=function(i,o,s,a){i===void 0&&(i=!0),o===void 0&&(o=!0),s===void 0&&(s=!0),a===void 0&&(a=-1e8);for(var l=[],u=this._first;u;)u._start>=a&&(u instanceof Fi?o&&l.push(u):(s&&l.push(u),i&&l.push.apply(l,u.getChildren(!0,o,s)))),u=u._next;return l},n.getById=function(i){for(var o=this.getChildren(1,1,1),s=o.length;s--;)if(o[s].vars.id===i)return o[s]},n.remove=function(i){return hs(i)?this.removeLabel(i):vi(i)?this.killTweensOf(i):(i.parent===this&&N_(this,i),i===this._recent&&(this._recent=this._last),gd(this))},n.totalTime=function(i,o){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=Ni(ra.time-(this._ts>0?i/this._ts:(this.totalDuration()-i)/-this._ts))),d.prototype.totalTime.call(this,i,o),this._forcing=0,this):this._tTime},n.addLabel=function(i,o){return this.labels[i]=Ra(this,o),this},n.removeLabel=function(i){return delete this.labels[i],this},n.addPause=function(i,o,s){var a=Fi.delayedCall(0,o||Cg,s);return a.data="isPause",this._hasPause=1,Ll(this,a,Ra(this,i))},n.removePause=function(i){var o=this._first;for(i=Ra(this,i);o;)o._start===i&&o.data==="isPause"&&Vc(o),o=o._next},n.killTweensOf=function(i,o,s){for(var a=this.getTweensOf(i,s),l=a.length;l--;)jc!==a[l]&&a[l].kill(i,o);return this},n.getTweensOf=function(i,o){for(var s=[],a=Da(i),l=this._first,u=Wu(o),h;l;)l instanceof Fi?DO(l._targets,a)&&(u?(!jc||l._initted&&l._ts)&&l.globalTime(0)<=o&&l.globalTime(l.totalDuration())>o:!o||l.isActive())&&s.push(l):(h=l.getTweensOf(a,o)).length&&s.push.apply(s,h),l=l._next;return s},n.tweenTo=function(i,o){o=o||{};var s=this,a=Ra(s,i),l=o,u=l.startAt,h=l.onStart,p=l.onStartParams,c=l.immediateRender,f,m=Fi.to(s,da({ease:o.ease||"none",lazy:!1,immediateRender:!1,time:a,overwrite:"auto",duration:o.duration||Math.abs((a-(u&&"time"in u?u.time:s._time))/s.timeScale())||Vs,onStart:function(){if(s.pause(),!f){var v=o.duration||Math.abs((a-(u&&"time"in u?u.time:s._time))/s.timeScale());m._dur!==v&&Sp(m,v,0,1).render(m._time,!0,!0),f=1}h&&h.apply(m,p||[])}},o));return c?m.render(0):m},n.tweenFromTo=function(i,o,s){return this.tweenTo(o,da({startAt:{time:Ra(this,i)}},s))},n.recent=function(){return this._recent},n.nextLabel=function(i){return i===void 0&&(i=this._time),T2(this,Ra(this,i))},n.previousLabel=function(i){return i===void 0&&(i=this._time),T2(this,Ra(this,i),1)},n.currentLabel=function(i){return arguments.length?this.seek(i,!0):this.previousLabel(this._time+Vs)},n.shiftChildren=function(i,o,s){s===void 0&&(s=0);for(var a=this._first,l=this.labels,u;a;)a._start>=s&&(a._start+=i,a._end+=i),a=a._next;if(o)for(u in l)l[u]>=s&&(l[u]+=i);return gd(this)},n.invalidate=function(i){var o=this._first;for(this._lock=0;o;)o.invalidate(i),o=o._next;return d.prototype.invalidate.call(this,i)},n.clear=function(i){i===void 0&&(i=!0);for(var o=this._first,s;o;)s=o._next,this.remove(o),o=s;return this._dp&&(this._time=this._tTime=this._pTime=0),i&&(this.labels={}),gd(this)},n.totalDuration=function(i){var o=0,s=this,a=s._last,l=Nl,u,h,p;if(arguments.length)return s.timeScale((s._repeat<0?s.duration():s.totalDuration())/(s.reversed()?-i:i));if(s._dirty){for(p=s.parent;a;)u=a._prev,a._dirty&&a.totalDuration(),h=a._start,h>l&&s._sort&&a._ts&&!s._lock?(s._lock=1,Ll(s,a,h-a._delay,1)._lock=0):l=h,h<0&&a._ts&&(o-=h,(!p&&!s._dp||p&&p.smoothChildTiming)&&(s._start+=h/s._ts,s._time-=h,s._tTime-=h),s.shiftChildren(-h,!1,-1/0),l=0),a._end>o&&a._ts&&(o=a._end),a=u;Sp(s,s===li&&s._time>o?s._time:o,1,1),s._dirty=0}return s._tDur},t.updateRoot=function(i){if(li._ts&&(ZT(li,qv(i,li)),KT=ra.frame),ra.frame>=S2){S2+=la.autoSleep||120;var o=li._first;if((!o||!o._ts)&&la.autoSleep&&ra._listeners.length<2){for(;o&&!o._ts;)o=o._next;o||ra.sleep()}}},t}(Ig);da(ho.prototype,{_lock:0,_hasPause:0,_forcing:0});var nF=function(t,n,r,i,o,s,a){var l=new Bo(this._pt,t,n,0,1,EC,null,o),u=0,h=0,p,c,f,m,y,v,g,x;for(l.b=r,l.e=i,r+="",i+="",(g=~i.indexOf("random("))&&(i=Rg(i)),s&&(x=[r,i],s(x,t,n),r=x[0],i=x[1]),c=r.match(ux)||[];p=ux.exec(i);)m=p[0],y=i.substring(u,p.index),f?f=(f+1)%5:y.substr(-5)==="rgba("&&(f=1),m!==c[h++]&&(v=parseFloat(c[h-1])||0,l._pt={_next:l._pt,p:y||h===1?y:",",s:v,c:m.charAt(1)==="="?op(v,m)-v:parseFloat(m)-v,m:f&&f<4?Math.round:0},u=ux.lastIndex);return l.c=u<i.length?i.substring(u,i.length):"",l.fp=a,(WT.test(i)||g)&&(l.e=0),this._pt=l,l},Fw=function(t,n,r,i,o,s,a,l,u,h){vi(i)&&(i=i(o||0,t,s));var p=t[n],c=r!=="get"?r:vi(p)?u?t[n.indexOf("set")||!vi(t["get"+n.substr(3)])?n:"get"+n.substr(3)](u):t[n]():p,f=vi(p)?u?lF:MC:Uw,m;if(hs(i)&&(~i.indexOf("random(")&&(i=Rg(i)),i.charAt(1)==="="&&(m=op(c,i)+(Gs(c)||0),(m||m===0)&&(i=m))),!h||c!==i||gb)return!isNaN(c*i)&&i!==""?(m=new Bo(this._pt,t,n,+c||0,i-(c||0),typeof p=="boolean"?cF:AC,0,f),u&&(m.fp=u),a&&m.modifier(a,this,t),this._pt=m):(!p&&!(n in t)&&Dw(n,i),nF.call(this,t,n,c,i,f,l||la.stringFilter,u))},iF=function(t,n,r,i,o){if(vi(t)&&(t=sg(t,o,n,r,i)),!Vl(t)||t.style&&t.nodeType||Xs(t)||zT(t))return hs(t)?sg(t,o,n,r,i):t;var s={},a;for(a in t)s[a]=sg(t[a],o,n,r,i);return s},bC=function(t,n,r,i,o,s){var a,l,u,h;if(ea[t]&&(a=new ea[t]).init(o,a.rawVars?n[t]:iF(n[t],i,o,s,r),r,i,s)!==!1&&(r._pt=l=new Bo(r._pt,o,t,0,1,a.render,a,0,a.priority),r!==rp))for(u=r._ptLookup[r._targets.indexOf(o)],h=a._props.length;h--;)u[a._props[h]]=l;return a},jc,gb,Nw=function d(t,n,r){var i=t.vars,o=i.ease,s=i.startAt,a=i.immediateRender,l=i.lazy,u=i.onUpdate,h=i.runBackwards,p=i.yoyoEase,c=i.keyframes,f=i.autoRevert,m=t._dur,y=t._startAt,v=t._targets,g=t.parent,x=g&&g.data==="nested"?g.vars.targets:v,b=t._overwrite==="auto"&&!Pw,w=t.timeline,T,R,C,P,I,D,j,N,O,W,X,J,ee;if(w&&(!c||!o)&&(o="none"),t._ease=yd(o,xp.ease),t._yEase=p?yC(yd(p===!0?o:p,xp.ease)):0,p&&t._yoyo&&!t._repeat&&(p=t._yEase,t._yEase=t._ease,t._ease=p),t._from=!w&&!!i.runBackwards,!w||c&&!i.stagger){if(N=v[0]?md(v[0]).harness:0,J=N&&i[N.prop],T=Yv(i,Bw),y&&(y._zTime<0&&y.progress(1),n<0&&h&&a&&!f?y.render(-1,!0):y.revert(h&&m?K0:jO),y._lazy=0),s){if(Vc(t._startAt=Fi.set(v,da({data:"isStart",overwrite:!1,parent:g,immediateRender:!0,lazy:!y&&Lo(l),startAt:null,delay:0,onUpdate:u&&function(){return oa(t,"onUpdate")},stagger:0},s))),t._startAt._dp=0,t._startAt._sat=t,n<0&&(Rs||!a&&!f)&&t._startAt.revert(K0),a&&m&&n<=0&&r<=0){n&&(t._zTime=n);return}}else if(h&&m&&!y){if(n&&(a=!1),C=da({overwrite:!1,data:"isFromStart",lazy:a&&!y&&Lo(l),immediateRender:a,stagger:0,parent:g},T),J&&(C[N.prop]=J),Vc(t._startAt=Fi.set(v,C)),t._startAt._dp=0,t._startAt._sat=t,n<0&&(Rs?t._startAt.revert(K0):t._startAt.render(-1,!0)),t._zTime=n,!a)d(t._startAt,Vs,Vs);else if(!n)return}for(t._pt=t._ptCache=0,l=m&&Lo(l)||l&&!m,R=0;R<v.length;R++){if(I=v[R],j=I._gsap||Ow(v)[R]._gsap,t._ptLookup[R]=W={},cb[j.id]&&Fc.length&&Xv(),X=x===v?R:x.indexOf(I),N&&(O=new N).init(I,J||T,t,X,x)!==!1&&(t._pt=P=new Bo(t._pt,I,O.name,0,1,O.render,O,0,O.priority),O._props.forEach(function(V){W[V]=P}),O.priority&&(D=1)),!N||J)for(C in T)ea[C]&&(O=bC(C,T,t,X,I,x))?O.priority&&(D=1):W[C]=P=Fw.call(t,I,C,"get",T[C],X,x,0,i.stringFilter);t._op&&t._op[R]&&t.kill(I,t._op[R]),b&&t._pt&&(jc=t,li.killTweensOf(I,W,t.globalTime(n)),ee=!t.parent,jc=0),t._pt&&l&&(cb[j.id]=1)}D&&TC(t),t._onInit&&t._onInit(t)}t._onUpdate=u,t._initted=(!t._op||t._pt)&&!ee,c&&n<=0&&w.render(Nl,!0,!0)},sF=function(t,n,r,i,o,s,a,l){var u=(t._pt&&t._ptCache||(t._ptCache={}))[n],h,p,c,f;if(!u)for(u=t._ptCache[n]=[],c=t._ptLookup,f=t._targets.length;f--;){if(h=c[f][n],h&&h.d&&h.d._pt)for(h=h.d._pt;h&&h.p!==n&&h.fp!==n;)h=h._next;if(!h)return gb=1,t.vars[n]="+=0",Nw(t,a),gb=0,l?Tg(n+" not eligible for reset"):1;u.push(h)}for(f=u.length;f--;)p=u[f],h=p._pt||p,h.s=(i||i===0)&&!o?i:h.s+(i||0)+s*h.c,h.c=r-h.s,p.e&&(p.e=Ai(r)+Gs(p.e)),p.b&&(p.b=h.s+Gs(p.b))},oF=function(t,n){var r=t[0]?md(t[0]).harness:0,i=r&&r.aliases,o,s,a,l;if(!i)return n;o=bp({},n);for(s in i)if(s in o)for(l=i[s].split(","),a=l.length;a--;)o[l[a]]=o[s];return o},aF=function(t,n,r,i){var o=n.ease||i||"power1.inOut",s,a;if(Xs(n))a=r[t]||(r[t]=[]),n.forEach(function(l,u){return a.push({t:u/(n.length-1)*100,v:l,e:o})});else for(s in n)a=r[s]||(r[s]=[]),s==="ease"||a.push({t:parseFloat(t),v:n[s],e:o})},sg=function(t,n,r,i,o){return vi(t)?t.call(n,r,i,o):hs(t)&&~t.indexOf("random(")?Rg(t):t},wC=kw+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",SC={};Do(wC+",id,stagger,delay,duration,paused,scrollTrigger",function(d){return SC[d]=1});var Fi=function(d){GT(t,d);function t(r,i,o,s){var a;typeof i=="number"&&(o.duration=i,i=o,o=null),a=d.call(this,s?i:ng(i))||this;var l=a.vars,u=l.duration,h=l.delay,p=l.immediateRender,c=l.stagger,f=l.overwrite,m=l.keyframes,y=l.defaults,v=l.scrollTrigger,g=l.yoyoEase,x=i.parent||li,b=(Xs(r)||zT(r)?Wu(r[0]):"length"in i)?[r]:Da(r),w,T,R,C,P,I,D,j;if(a._targets=b.length?Ow(b):Tg("GSAP target "+r+" not found. https://gsap.com",!la.nullTargetWarn)||[],a._ptLookup=[],a._overwrite=f,m||c||C0(u)||C0(h)){if(i=a.vars,w=a.timeline=new ho({data:"nested",defaults:y||{},targets:x&&x.data==="nested"?x.vars.targets:b}),w.kill(),w.parent=w._dp=Tu(a),w._start=0,c||C0(u)||C0(h)){if(C=b.length,D=c&&aC(c),Vl(c))for(P in c)~wC.indexOf(P)&&(j||(j={}),j[P]=c[P]);for(T=0;T<C;T++)R=Yv(i,SC),R.stagger=0,g&&(R.yoyoEase=g),j&&bp(R,j),I=b[T],R.duration=+sg(u,Tu(a),T,I,b),R.delay=(+sg(h,Tu(a),T,I,b)||0)-a._delay,!c&&C===1&&R.delay&&(a._delay=h=R.delay,a._start+=h,R.delay=0),w.to(I,R,D?D(T,I,b):0),w._ease=hn.none;w.duration()?u=h=0:a.timeline=0}else if(m){ng(da(w.vars.defaults,{ease:"none"})),w._ease=yd(m.ease||i.ease||"none");var N=0,O,W,X;if(Xs(m))m.forEach(function(J){return w.to(b,J,">")}),w.duration();else{R={};for(P in m)P==="ease"||P==="easeEach"||aF(P,m[P],R,m.easeEach);for(P in R)for(O=R[P].sort(function(J,ee){return J.t-ee.t}),N=0,T=0;T<O.length;T++)W=O[T],X={ease:W.e,duration:(W.t-(T?O[T-1].t:0))/100*u},X[P]=W.v,w.to(b,X,N),N+=X.duration;w.duration()<u&&w.to({},{duration:u-w.duration()})}}u||a.duration(u=w.duration())}else a.timeline=0;return f===!0&&!Pw&&(jc=Tu(a),li.killTweensOf(b),jc=0),Ll(x,Tu(a),o),i.reversed&&a.reverse(),i.paused&&a.paused(!0),(p||!u&&!m&&a._start===Ni(x._time)&&Lo(p)&&FO(Tu(a))&&x.data!=="nested")&&(a._tTime=-1e-8,a.render(Math.max(0,-h)||0)),v&&nC(Tu(a),v),a}var n=t.prototype;return n.render=function(i,o,s){var a=this._time,l=this._tDur,u=this._dur,h=i<0,p=i>l-Vs&&!h?l:i<Vs?0:i,c,f,m,y,v,g,x,b,w;if(!u)UO(this,i,o,s);else if(p!==this._tTime||!i||s||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==h||this._lazy){if(c=p,b=this.timeline,this._repeat){if(y=u+this._rDelay,this._repeat<-1&&h)return this.totalTime(y*100+i,o,s);if(c=Ni(p%y),p===l?(m=this._repeat,c=u):(v=Ni(p/y),m=~~v,m&&m===v?(c=u,m--):c>u&&(c=u)),g=this._yoyo&&m&1,g&&(w=this._yEase,c=u-c),v=wp(this._tTime,y),c===a&&!s&&this._initted&&m===v)return this._tTime=p,this;m!==v&&(b&&this._yEase&&vC(b,g),this.vars.repeatRefresh&&!g&&!this._lock&&c!==y&&this._initted&&(this._lock=s=1,this.render(Ni(y*m),!0).invalidate()._lock=0))}if(!this._initted){if(iC(this,h?i:c,s,o,p))return this._tTime=0,this;if(a!==this._time&&!(s&&this.vars.repeatRefresh&&m!==v))return this;if(u!==this._dur)return this.render(i,o,s)}if(this._tTime=p,this._time=c,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=x=(w||this._ease)(c/u),this._from&&(this.ratio=x=1-x),c&&!a&&!o&&!m&&(oa(this,"onStart"),this._tTime!==p))return this;for(f=this._pt;f;)f.r(x,f.d),f=f._next;b&&b.render(i<0?i:b._dur*b._ease(c/this._dur),o,s)||this._startAt&&(this._zTime=i),this._onUpdate&&!o&&(h&&fb(this,i,o,s),oa(this,"onUpdate")),this._repeat&&m!==v&&this.vars.onRepeat&&!o&&this.parent&&oa(this,"onRepeat"),(p===this._tDur||!p)&&this._tTime===p&&(h&&!this._onUpdate&&fb(this,i,!0,!0),(i||!u)&&(p===this._tDur&&this._ts>0||!p&&this._ts<0)&&Vc(this,1),!o&&!(h&&!a)&&(p||a||g)&&(oa(this,p===l?"onComplete":"onReverseComplete",!0),this._prom&&!(p<l&&this.timeScale()>0)&&this._prom()))}return this},n.targets=function(){return this._targets},n.invalidate=function(i){return(!i||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(i),d.prototype.invalidate.call(this,i)},n.resetTo=function(i,o,s,a,l){Pg||ra.wake(),this._ts||this.play();var u=Math.min(this._dur,(this._dp._time-this._start)*this._ts),h;return this._initted||Nw(this,u),h=this._ease(u/this._dur),sF(this,i,o,s,a,h,u,l)?this.resetTo(i,o,s,a,1):(G_(this,0),this.parent||tC(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},n.kill=function(i,o){if(o===void 0&&(o="all"),!i&&(!o||o==="all"))return this._lazy=this._pt=0,this.parent?Um(this):this.scrollTrigger&&this.scrollTrigger.kill(!!Rs),this;if(this.timeline){var s=this.timeline.totalDuration();return this.timeline.killTweensOf(i,o,jc&&jc.vars.overwrite!==!0)._first||Um(this),this.parent&&s!==this.timeline.totalDuration()&&Sp(this,this._dur*this.timeline._tDur/s,0,1),this}var a=this._targets,l=i?Da(i):a,u=this._ptLookup,h=this._pt,p,c,f,m,y,v,g;if((!o||o==="all")&&kO(a,l))return o==="all"&&(this._pt=0),Um(this);for(p=this._op=this._op||[],o!=="all"&&(hs(o)&&(y={},Do(o,function(x){return y[x]=1}),o=y),o=oF(a,o)),g=a.length;g--;)if(~l.indexOf(a[g])){c=u[g],o==="all"?(p[g]=o,m=c,f={}):(f=p[g]=p[g]||{},m=o);for(y in m)v=c&&c[y],v&&((!("kill"in v.d)||v.d.kill(y)===!0)&&N_(this,v,"_pt"),delete c[y]),f!=="all"&&(f[y]=1)}return this._initted&&!this._pt&&h&&Um(this),this},t.to=function(i,o){return new t(i,o,arguments[2])},t.from=function(i,o){return ig(1,arguments)},t.delayedCall=function(i,o,s,a){return new t(o,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:i,onComplete:o,onReverseComplete:o,onCompleteParams:s,onReverseCompleteParams:s,callbackScope:a})},t.fromTo=function(i,o,s){return ig(2,arguments)},t.set=function(i,o){return o.duration=0,o.repeatDelay||(o.repeat=0),new t(i,o)},t.killTweensOf=function(i,o,s){return li.killTweensOf(i,o,s)},t}(Ig);da(Fi.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});Do("staggerTo,staggerFrom,staggerFromTo",function(d){Fi[d]=function(){var t=new ho,n=hb.call(arguments,0);return n.splice(d==="staggerFromTo"?5:4,0,0),t[d].apply(t,n)}});var Uw=function(t,n,r){return t[n]=r},MC=function(t,n,r){return t[n](r)},lF=function(t,n,r,i){return t[n](i.fp,r)},uF=function(t,n,r){return t.setAttribute(n,r)},Gw=function(t,n){return vi(t[n])?MC:Iw(t[n])&&t.setAttribute?uF:Uw},AC=function(t,n){return n.set(n.t,n.p,Math.round((n.s+n.c*t)*1e6)/1e6,n)},cF=function(t,n){return n.set(n.t,n.p,!!(n.s+n.c*t),n)},EC=function(t,n){var r=n._pt,i="";if(!t&&n.b)i=n.b;else if(t===1&&n.e)i=n.e;else{for(;r;)i=r.p+(r.m?r.m(r.s+r.c*t):Math.round((r.s+r.c*t)*1e4)/1e4)+i,r=r._next;i+=n.c}n.set(n.t,n.p,i,n)},Hw=function(t,n){for(var r=n._pt;r;)r.r(t,r.d),r=r._next},fF=function(t,n,r,i){for(var o=this._pt,s;o;)s=o._next,o.p===i&&o.modifier(t,n,r),o=s},dF=function(t){for(var n=this._pt,r,i;n;)i=n._next,n.p===t&&!n.op||n.op===t?N_(this,n,"_pt"):n.dep||(r=1),n=i;return!r},hF=function(t,n,r,i){i.mSet(t,n,i.m.call(i.tween,r,i.mt),i)},TC=function(t){for(var n=t._pt,r,i,o,s;n;){for(r=n._next,i=o;i&&i.pr>n.pr;)i=i._next;(n._prev=i?i._prev:s)?n._prev._next=n:o=n,(n._next=i)?i._prev=n:s=n,n=r}t._pt=o},Bo=function(){function d(n,r,i,o,s,a,l,u,h){this.t=r,this.s=o,this.c=s,this.p=i,this.r=a||AC,this.d=l||this,this.set=u||Uw,this.pr=h||0,this._next=n,n&&(n._prev=this)}var t=d.prototype;return t.modifier=function(r,i,o){this.mSet=this.mSet||this.set,this.set=hF,this.m=r,this.mt=o,this.tween=i},d}();Do(kw+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(d){return Bw[d]=1});fa.TweenMax=fa.TweenLite=Fi;fa.TimelineLite=fa.TimelineMax=ho;li=new ho({sortChildren:!1,defaults:xp,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});la.stringFilter=gC;var vd=[],Z0={},pF=[],R2=0,mF=0,px=function(t){return(Z0[t]||pF).map(function(n){return n()})},yb=function(){var t=Date.now(),n=[];t-R2>2&&(px("matchMediaInit"),vd.forEach(function(r){var i=r.queries,o=r.conditions,s,a,l,u;for(a in i)s=Il.matchMedia(i[a]).matches,s&&(l=1),s!==o[a]&&(o[a]=s,u=1);u&&(r.revert(),l&&n.push(r))}),px("matchMediaRevert"),n.forEach(function(r){return r.onMatch(r,function(i){return r.add(null,i)})}),R2=t,px("matchMedia"))},CC=function(){function d(n,r){this.selector=r&&pb(r),this.data=[],this._r=[],this.isReverted=!1,this.id=mF++,n&&this.add(n)}var t=d.prototype;return t.add=function(r,i,o){vi(r)&&(o=i,i=r,r=vi);var s=this,a=function(){var u=$n,h=s.selector,p;return u&&u!==s&&u.data.push(s),o&&(s.selector=pb(o)),$n=s,p=i.apply(s,arguments),vi(p)&&s._r.push(p),$n=u,s.selector=h,s.isReverted=!1,p};return s.last=a,r===vi?a(s,function(l){return s.add(null,l)}):r?s[r]=a:a},t.ignore=function(r){var i=$n;$n=null,r(this),$n=i},t.getTweens=function(){var r=[];return this.data.forEach(function(i){return i instanceof d?r.push.apply(r,i.getTweens()):i instanceof Fi&&!(i.parent&&i.parent.data==="nested")&&r.push(i)}),r},t.clear=function(){this._r.length=this.data.length=0},t.kill=function(r,i){var o=this;if(r?function(){for(var a=o.getTweens(),l=o.data.length,u;l--;)u=o.data[l],u.data==="isFlip"&&(u.revert(),u.getChildren(!0,!0,!1).forEach(function(h){return a.splice(a.indexOf(h),1)}));for(a.map(function(h){return{g:h._dur||h._delay||h._sat&&!h._sat.vars.immediateRender?h.globalTime(0):-1/0,t:h}}).sort(function(h,p){return p.g-h.g||-1/0}).forEach(function(h){return h.t.revert(r)}),l=o.data.length;l--;)u=o.data[l],u instanceof ho?u.data!=="nested"&&(u.scrollTrigger&&u.scrollTrigger.revert(),u.kill()):!(u instanceof Fi)&&u.revert&&u.revert(r);o._r.forEach(function(h){return h(r,o)}),o.isReverted=!0}():this.data.forEach(function(a){return a.kill&&a.kill()}),this.clear(),i)for(var s=vd.length;s--;)vd[s].id===this.id&&vd.splice(s,1)},t.revert=function(r){this.kill(r||{})},d}(),gF=function(){function d(n){this.contexts=[],this.scope=n,$n&&$n.data.push(this)}var t=d.prototype;return t.add=function(r,i,o){Vl(r)||(r={matches:r});var s=new CC(0,o||this.scope),a=s.conditions={},l,u,h;$n&&!s.selector&&(s.selector=$n.selector),this.contexts.push(s),i=s.add("onMatch",i),s.queries=r;for(u in r)u==="all"?h=1:(l=Il.matchMedia(r[u]),l&&(vd.indexOf(s)<0&&vd.push(s),(a[u]=l.matches)&&(h=1),l.addListener?l.addListener(yb):l.addEventListener("change",yb)));return h&&i(s,function(p){return s.add(null,p)}),this},t.revert=function(r){this.kill(r||{})},t.kill=function(r){this.contexts.forEach(function(i){return i.kill(r,!0)})},d}(),Jv={registerPlugin:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];n.forEach(function(i){return hC(i)})},timeline:function(t){return new ho(t)},getTweensOf:function(t,n){return li.getTweensOf(t,n)},getProperty:function(t,n,r,i){hs(t)&&(t=Da(t)[0]);var o=md(t||{}).get,s=r?eC:$T;return r==="native"&&(r=""),t&&(n?s((ea[n]&&ea[n].get||o)(t,n,r,i)):function(a,l,u){return s((ea[a]&&ea[a].get||o)(t,a,l,u))})},quickSetter:function(t,n,r){if(t=Da(t),t.length>1){var i=t.map(function(h){return Oo.quickSetter(h,n,r)}),o=i.length;return function(h){for(var p=o;p--;)i[p](h)}}t=t[0]||{};var s=ea[n],a=md(t),l=a.harness&&(a.harness.aliases||{})[n]||n,u=s?function(h){var p=new s;rp._pt=0,p.init(t,r?h+r:h,rp,0,[t]),p.render(1,p),rp._pt&&Hw(1,rp)}:a.set(t,l);return s?u:function(h){return u(t,l,r?h+r:h,a,1)}},quickTo:function(t,n,r){var i,o=Oo.to(t,da((i={},i[n]="+=0.1",i.paused=!0,i.stagger=0,i),r||{})),s=function(l,u,h){return o.resetTo(n,l,u,h)};return s.tween=o,s},isTweening:function(t){return li.getTweensOf(t,!0).length>0},defaults:function(t){return t&&t.ease&&(t.ease=yd(t.ease,xp.ease)),M2(xp,t||{})},config:function(t){return M2(la,t||{})},registerEffect:function(t){var n=t.name,r=t.effect,i=t.plugins,o=t.defaults,s=t.extendTimeline;(i||"").split(",").forEach(function(a){return a&&!ea[a]&&!fa[a]&&Tg(n+" effect requires "+a+" plugin.")}),cx[n]=function(a,l,u){return r(Da(a),da(l||{},o),u)},s&&(ho.prototype[n]=function(a,l,u){return this.add(cx[n](a,Vl(l)?l:(u=l)&&{},this),u)})},registerEase:function(t,n){hn[t]=yd(n)},parseEase:function(t,n){return arguments.length?yd(t,n):hn},getById:function(t){return li.getById(t)},exportRoot:function(t,n){t===void 0&&(t={});var r=new ho(t),i,o;for(r.smoothChildTiming=Lo(t.smoothChildTiming),li.remove(r),r._dp=0,r._time=r._tTime=li._time,i=li._first;i;)o=i._next,(n||!(!i._dur&&i instanceof Fi&&i.vars.onComplete===i._targets[0]))&&Ll(r,i,i._start-i._delay),i=o;return Ll(li,r,0),r},context:function(t,n){return t?new CC(t,n):$n},matchMedia:function(t){return new gF(t)},matchMediaRefresh:function(){return vd.forEach(function(t){var n=t.conditions,r,i;for(i in n)n[i]&&(n[i]=!1,r=1);r&&t.revert()})||yb()},addEventListener:function(t,n){var r=Z0[t]||(Z0[t]=[]);~r.indexOf(n)||r.push(n)},removeEventListener:function(t,n){var r=Z0[t],i=r&&r.indexOf(n);i>=0&&r.splice(i,1)},utils:{wrap:qO,wrapYoyo:JO,distribute:aC,random:uC,snap:lC,normalize:YO,getUnit:Gs,clamp:zO,splitColor:pC,toArray:Da,selector:pb,mapRange:fC,pipe:WO,unitize:XO,interpolate:KO,shuffle:oC},install:qT,effects:cx,ticker:ra,updateRoot:ho.updateRoot,plugins:ea,globalTimeline:li,core:{PropTween:Bo,globals:JT,Tween:Fi,Timeline:ho,Animation:Ig,getCache:md,_removeLinkedListItem:N_,reverting:function(){return Rs},context:function(t){return t&&$n&&($n.data.push(t),t._ctx=$n),$n},suppressOverwrites:function(t){return Pw=t}}};Do("to,from,fromTo,delayedCall,set,killTweensOf",function(d){return Jv[d]=Fi[d]});ra.add(ho.updateRoot);rp=Jv.to({},{duration:0});var yF=function(t,n){for(var r=t._pt;r&&r.p!==n&&r.op!==n&&r.fp!==n;)r=r._next;return r},vF=function(t,n){var r=t._targets,i,o,s;for(i in n)for(o=r.length;o--;)s=t._ptLookup[o][i],s&&(s=s.d)&&(s._pt&&(s=yF(s,i)),s&&s.modifier&&s.modifier(n[i],t,r[o],i))},mx=function(t,n){return{name:t,rawVars:1,init:function(i,o,s){s._onInit=function(a){var l,u;if(hs(o)&&(l={},Do(o,function(h){return l[h]=1}),o=l),n){l={};for(u in o)l[u]=n(o[u]);o=l}vF(a,o)}}}},Oo=Jv.registerPlugin({name:"attr",init:function(t,n,r,i,o){var s,a,l;this.tween=r;for(s in n)l=t.getAttribute(s)||"",a=this.add(t,"setAttribute",(l||0)+"",n[s],i,o,0,0,s),a.op=s,a.b=l,this._props.push(s)},render:function(t,n){for(var r=n._pt;r;)Rs?r.set(r.t,r.p,r.b,r):r.r(t,r.d),r=r._next}},{name:"endArray",init:function(t,n){for(var r=n.length;r--;)this.add(t,r,t[r]||0,n[r],0,0,0,0,0,1)}},mx("roundProps",mb),mx("modifiers"),mx("snap",lC))||Jv;Fi.version=ho.version=Oo.version="3.12.7";YT=1;jw()&&Mp();hn.Power0;hn.Power1;hn.Power2;hn.Power3;hn.Power4;hn.Linear;hn.Quad;hn.Cubic;hn.Quart;hn.Quint;hn.Strong;hn.Elastic;hn.Back;hn.SteppedEase;hn.Bounce;hn.Sine;hn.Expo;hn.Circ;/*!
 * CSSPlugin 3.12.7
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var P2,Lc,ap,zw,od,I2,Vw,_F=function(){return typeof window<"u"},Xu={},Qf=180/Math.PI,lp=Math.PI/180,Gh=Math.atan2,j2=1e8,Ww=/([A-Z])/g,xF=/(left|right|width|margin|padding|x)/i,bF=/[\s,\(]\S/,Dl={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},vb=function(t,n){return n.set(n.t,n.p,Math.round((n.s+n.c*t)*1e4)/1e4+n.u,n)},wF=function(t,n){return n.set(n.t,n.p,t===1?n.e:Math.round((n.s+n.c*t)*1e4)/1e4+n.u,n)},SF=function(t,n){return n.set(n.t,n.p,t?Math.round((n.s+n.c*t)*1e4)/1e4+n.u:n.b,n)},MF=function(t,n){var r=n.s+n.c*t;n.set(n.t,n.p,~~(r+(r<0?-.5:.5))+n.u,n)},RC=function(t,n){return n.set(n.t,n.p,t?n.e:n.b,n)},PC=function(t,n){return n.set(n.t,n.p,t!==1?n.b:n.e,n)},AF=function(t,n,r){return t.style[n]=r},EF=function(t,n,r){return t.style.setProperty(n,r)},TF=function(t,n,r){return t._gsap[n]=r},CF=function(t,n,r){return t._gsap.scaleX=t._gsap.scaleY=r},RF=function(t,n,r,i,o){var s=t._gsap;s.scaleX=s.scaleY=r,s.renderTransform(o,s)},PF=function(t,n,r,i,o){var s=t._gsap;s[n]=r,s.renderTransform(o,s)},ci="transform",ko=ci+"Origin",IF=function d(t,n){var r=this,i=this.target,o=i.style,s=i._gsap;if(t in Xu&&o){if(this.tfm=this.tfm||{},t!=="transform")t=Dl[t]||t,~t.indexOf(",")?t.split(",").forEach(function(a){return r.tfm[a]=Pu(i,a)}):this.tfm[t]=s.x?s[t]:Pu(i,t),t===ko&&(this.tfm.zOrigin=s.zOrigin);else return Dl.transform.split(",").forEach(function(a){return d.call(r,a,n)});if(this.props.indexOf(ci)>=0)return;s.svg&&(this.svgo=i.getAttribute("data-svg-origin"),this.props.push(ko,n,"")),t=ci}(o||n)&&this.props.push(t,n,o[t])},IC=function(t){t.translate&&(t.removeProperty("translate"),t.removeProperty("scale"),t.removeProperty("rotate"))},jF=function(){var t=this.props,n=this.target,r=n.style,i=n._gsap,o,s;for(o=0;o<t.length;o+=3)t[o+1]?t[o+1]===2?n[t[o]](t[o+2]):n[t[o]]=t[o+2]:t[o+2]?r[t[o]]=t[o+2]:r.removeProperty(t[o].substr(0,2)==="--"?t[o]:t[o].replace(Ww,"-$1").toLowerCase());if(this.tfm){for(s in this.tfm)i[s]=this.tfm[s];i.svg&&(i.renderTransform(),n.setAttribute("data-svg-origin",this.svgo||"")),o=Vw(),(!o||!o.isStart)&&!r[ci]&&(IC(r),i.zOrigin&&r[ko]&&(r[ko]+=" "+i.zOrigin+"px",i.zOrigin=0,i.renderTransform()),i.uncache=1)}},jC=function(t,n){var r={target:t,props:[],revert:jF,save:IF};return t._gsap||Oo.core.getCache(t),n&&t.style&&t.nodeType&&n.split(",").forEach(function(i){return r.save(i)}),r},LC,_b=function(t,n){var r=Lc.createElementNS?Lc.createElementNS((n||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):Lc.createElement(t);return r&&r.style?r:Lc.createElement(t)},Ul=function d(t,n,r){var i=getComputedStyle(t);return i[n]||i.getPropertyValue(n.replace(Ww,"-$1").toLowerCase())||i.getPropertyValue(n)||!r&&d(t,Ap(n)||n,1)||""},L2="O,Moz,ms,Ms,Webkit".split(","),Ap=function(t,n,r){var i=n||od,o=i.style,s=5;if(t in o&&!r)return t;for(t=t.charAt(0).toUpperCase()+t.substr(1);s--&&!(L2[s]+t in o););return s<0?null:(s===3?"ms":s>=0?L2[s]:"")+t},xb=function(){_F()&&window.document&&(P2=window,Lc=P2.document,ap=Lc.documentElement,od=_b("div")||{style:{}},_b("div"),ci=Ap(ci),ko=ci+"Origin",od.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",LC=!!Ap("perspective"),Vw=Oo.core.reverting,zw=1)},D2=function(t){var n=t.ownerSVGElement,r=_b("svg",n&&n.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),i=t.cloneNode(!0),o;i.style.display="block",r.appendChild(i),ap.appendChild(r);try{o=i.getBBox()}catch{}return r.removeChild(i),ap.removeChild(r),o},B2=function(t,n){for(var r=n.length;r--;)if(t.hasAttribute(n[r]))return t.getAttribute(n[r])},DC=function(t){var n,r;try{n=t.getBBox()}catch{n=D2(t),r=1}return n&&(n.width||n.height)||r||(n=D2(t)),n&&!n.width&&!n.x&&!n.y?{x:+B2(t,["x","cx","x1"])||0,y:+B2(t,["y","cy","y1"])||0,width:0,height:0}:n},BC=function(t){return!!(t.getCTM&&(!t.parentNode||t.ownerSVGElement)&&DC(t))},Id=function(t,n){if(n){var r=t.style,i;n in Xu&&n!==ko&&(n=ci),r.removeProperty?(i=n.substr(0,2),(i==="ms"||n.substr(0,6)==="webkit")&&(n="-"+n),r.removeProperty(i==="--"?n:n.replace(Ww,"-$1").toLowerCase())):r.removeAttribute(n)}},Dc=function(t,n,r,i,o,s){var a=new Bo(t._pt,n,r,0,1,s?PC:RC);return t._pt=a,a.b=i,a.e=o,t._props.push(r),a},k2={deg:1,rad:1,turn:1},LF={grid:1,flex:1},Wc=function d(t,n,r,i){var o=parseFloat(r)||0,s=(r+"").trim().substr((o+"").length)||"px",a=od.style,l=xF.test(n),u=t.tagName.toLowerCase()==="svg",h=(u?"client":"offset")+(l?"Width":"Height"),p=100,c=i==="px",f=i==="%",m,y,v,g;if(i===s||!o||k2[i]||k2[s])return o;if(s!=="px"&&!c&&(o=d(t,n,r,"px")),g=t.getCTM&&BC(t),(f||s==="%")&&(Xu[n]||~n.indexOf("adius")))return m=g?t.getBBox()[l?"width":"height"]:t[h],Ai(f?o/m*p:o/100*m);if(a[l?"width":"height"]=p+(c?s:i),y=i!=="rem"&&~n.indexOf("adius")||i==="em"&&t.appendChild&&!u?t:t.parentNode,g&&(y=(t.ownerSVGElement||{}).parentNode),(!y||y===Lc||!y.appendChild)&&(y=Lc.body),v=y._gsap,v&&f&&v.width&&l&&v.time===ra.time&&!v.uncache)return Ai(o/v.width*p);if(f&&(n==="height"||n==="width")){var x=t.style[n];t.style[n]=p+i,m=t[h],x?t.style[n]=x:Id(t,n)}else(f||s==="%")&&!LF[Ul(y,"display")]&&(a.position=Ul(t,"position")),y===t&&(a.position="static"),y.appendChild(od),m=od[h],y.removeChild(od),a.position="absolute";return l&&f&&(v=md(y),v.time=ra.time,v.width=y[h]),Ai(c?m*o/p:m&&o?p/m*o:0)},Pu=function(t,n,r,i){var o;return zw||xb(),n in Dl&&n!=="transform"&&(n=Dl[n],~n.indexOf(",")&&(n=n.split(",")[0])),Xu[n]&&n!=="transform"?(o=Lg(t,i),o=n!=="transformOrigin"?o[n]:o.svg?o.origin:Qv(Ul(t,ko))+" "+o.zOrigin+"px"):(o=t.style[n],(!o||o==="auto"||i||~(o+"").indexOf("calc("))&&(o=Kv[n]&&Kv[n](t,n,r)||Ul(t,n)||QT(t,n)||(n==="opacity"?1:0))),r&&!~(o+"").trim().indexOf(" ")?Wc(t,n,o,r)+r:o},DF=function(t,n,r,i){if(!r||r==="none"){var o=Ap(n,t,1),s=o&&Ul(t,o,1);s&&s!==r?(n=o,r=s):n==="borderColor"&&(r=Ul(t,"borderTopColor"))}var a=new Bo(this._pt,t.style,n,0,1,EC),l=0,u=0,h,p,c,f,m,y,v,g,x,b,w,T;if(a.b=r,a.e=i,r+="",i+="",i==="auto"&&(y=t.style[n],t.style[n]=i,i=Ul(t,n)||i,y?t.style[n]=y:Id(t,n)),h=[r,i],gC(h),r=h[0],i=h[1],c=r.match(tp)||[],T=i.match(tp)||[],T.length){for(;p=tp.exec(i);)v=p[0],x=i.substring(l,p.index),m?m=(m+1)%5:(x.substr(-5)==="rgba("||x.substr(-5)==="hsla(")&&(m=1),v!==(y=c[u++]||"")&&(f=parseFloat(y)||0,w=y.substr((f+"").length),v.charAt(1)==="="&&(v=op(f,v)+w),g=parseFloat(v),b=v.substr((g+"").length),l=tp.lastIndex-b.length,b||(b=b||la.units[n]||w,l===i.length&&(i+=b,a.e+=b)),w!==b&&(f=Wc(t,n,y,b)||0),a._pt={_next:a._pt,p:x||u===1?x:",",s:f,c:g-f,m:m&&m<4||n==="zIndex"?Math.round:0});a.c=l<i.length?i.substring(l,i.length):""}else a.r=n==="display"&&i==="none"?PC:RC;return WT.test(i)&&(a.e=0),this._pt=a,a},O2={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},BF=function(t){var n=t.split(" "),r=n[0],i=n[1]||"50%";return(r==="top"||r==="bottom"||i==="left"||i==="right")&&(t=r,r=i,i=t),n[0]=O2[r]||r,n[1]=O2[i]||i,n.join(" ")},kF=function(t,n){if(n.tween&&n.tween._time===n.tween._dur){var r=n.t,i=r.style,o=n.u,s=r._gsap,a,l,u;if(o==="all"||o===!0)i.cssText="",l=1;else for(o=o.split(","),u=o.length;--u>-1;)a=o[u],Xu[a]&&(l=1,a=a==="transformOrigin"?ko:ci),Id(r,a);l&&(Id(r,ci),s&&(s.svg&&r.removeAttribute("transform"),i.scale=i.rotate=i.translate="none",Lg(r,1),s.uncache=1,IC(i)))}},Kv={clearProps:function(t,n,r,i,o){if(o.data!=="isFromStart"){var s=t._pt=new Bo(t._pt,n,r,0,0,kF);return s.u=i,s.pr=-10,s.tween=o,t._props.push(r),1}}},jg=[1,0,0,1,0,0],kC={},OC=function(t){return t==="matrix(1, 0, 0, 1, 0, 0)"||t==="none"||!t},F2=function(t){var n=Ul(t,ci);return OC(n)?jg:n.substr(7).match(VT).map(Ai)},Xw=function(t,n){var r=t._gsap||md(t),i=t.style,o=F2(t),s,a,l,u;return r.svg&&t.getAttribute("transform")?(l=t.transform.baseVal.consolidate().matrix,o=[l.a,l.b,l.c,l.d,l.e,l.f],o.join(",")==="1,0,0,1,0,0"?jg:o):(o===jg&&!t.offsetParent&&t!==ap&&!r.svg&&(l=i.display,i.display="block",s=t.parentNode,(!s||!t.offsetParent&&!t.getBoundingClientRect().width)&&(u=1,a=t.nextElementSibling,ap.appendChild(t)),o=F2(t),l?i.display=l:Id(t,"display"),u&&(a?s.insertBefore(t,a):s?s.appendChild(t):ap.removeChild(t))),n&&o.length>6?[o[0],o[1],o[4],o[5],o[12],o[13]]:o)},bb=function(t,n,r,i,o,s){var a=t._gsap,l=o||Xw(t,!0),u=a.xOrigin||0,h=a.yOrigin||0,p=a.xOffset||0,c=a.yOffset||0,f=l[0],m=l[1],y=l[2],v=l[3],g=l[4],x=l[5],b=n.split(" "),w=parseFloat(b[0])||0,T=parseFloat(b[1])||0,R,C,P,I;r?l!==jg&&(C=f*v-m*y)&&(P=w*(v/C)+T*(-y/C)+(y*x-v*g)/C,I=w*(-m/C)+T*(f/C)-(f*x-m*g)/C,w=P,T=I):(R=DC(t),w=R.x+(~b[0].indexOf("%")?w/100*R.width:w),T=R.y+(~(b[1]||b[0]).indexOf("%")?T/100*R.height:T)),i||i!==!1&&a.smooth?(g=w-u,x=T-h,a.xOffset=p+(g*f+x*y)-g,a.yOffset=c+(g*m+x*v)-x):a.xOffset=a.yOffset=0,a.xOrigin=w,a.yOrigin=T,a.smooth=!!i,a.origin=n,a.originIsAbsolute=!!r,t.style[ko]="0px 0px",s&&(Dc(s,a,"xOrigin",u,w),Dc(s,a,"yOrigin",h,T),Dc(s,a,"xOffset",p,a.xOffset),Dc(s,a,"yOffset",c,a.yOffset)),t.setAttribute("data-svg-origin",w+" "+T)},Lg=function(t,n){var r=t._gsap||new xC(t);if("x"in r&&!n&&!r.uncache)return r;var i=t.style,o=r.scaleX<0,s="px",a="deg",l=getComputedStyle(t),u=Ul(t,ko)||"0",h,p,c,f,m,y,v,g,x,b,w,T,R,C,P,I,D,j,N,O,W,X,J,ee,V,q,Y,Z,ce,B,U,K;return h=p=c=y=v=g=x=b=w=0,f=m=1,r.svg=!!(t.getCTM&&BC(t)),l.translate&&((l.translate!=="none"||l.scale!=="none"||l.rotate!=="none")&&(i[ci]=(l.translate!=="none"?"translate3d("+(l.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(l.rotate!=="none"?"rotate("+l.rotate+") ":"")+(l.scale!=="none"?"scale("+l.scale.split(" ").join(",")+") ":"")+(l[ci]!=="none"?l[ci]:"")),i.scale=i.rotate=i.translate="none"),C=Xw(t,r.svg),r.svg&&(r.uncache?(V=t.getBBox(),u=r.xOrigin-V.x+"px "+(r.yOrigin-V.y)+"px",ee=""):ee=!n&&t.getAttribute("data-svg-origin"),bb(t,ee||u,!!ee||r.originIsAbsolute,r.smooth!==!1,C)),T=r.xOrigin||0,R=r.yOrigin||0,C!==jg&&(j=C[0],N=C[1],O=C[2],W=C[3],h=X=C[4],p=J=C[5],C.length===6?(f=Math.sqrt(j*j+N*N),m=Math.sqrt(W*W+O*O),y=j||N?Gh(N,j)*Qf:0,x=O||W?Gh(O,W)*Qf+y:0,x&&(m*=Math.abs(Math.cos(x*lp))),r.svg&&(h-=T-(T*j+R*O),p-=R-(T*N+R*W))):(K=C[6],B=C[7],Y=C[8],Z=C[9],ce=C[10],U=C[11],h=C[12],p=C[13],c=C[14],P=Gh(K,ce),v=P*Qf,P&&(I=Math.cos(-P),D=Math.sin(-P),ee=X*I+Y*D,V=J*I+Z*D,q=K*I+ce*D,Y=X*-D+Y*I,Z=J*-D+Z*I,ce=K*-D+ce*I,U=B*-D+U*I,X=ee,J=V,K=q),P=Gh(-O,ce),g=P*Qf,P&&(I=Math.cos(-P),D=Math.sin(-P),ee=j*I-Y*D,V=N*I-Z*D,q=O*I-ce*D,U=W*D+U*I,j=ee,N=V,O=q),P=Gh(N,j),y=P*Qf,P&&(I=Math.cos(P),D=Math.sin(P),ee=j*I+N*D,V=X*I+J*D,N=N*I-j*D,J=J*I-X*D,j=ee,X=V),v&&Math.abs(v)+Math.abs(y)>359.9&&(v=y=0,g=180-g),f=Ai(Math.sqrt(j*j+N*N+O*O)),m=Ai(Math.sqrt(J*J+K*K)),P=Gh(X,J),x=Math.abs(P)>2e-4?P*Qf:0,w=U?1/(U<0?-U:U):0),r.svg&&(ee=t.getAttribute("transform"),r.forceCSS=t.setAttribute("transform","")||!OC(Ul(t,ci)),ee&&t.setAttribute("transform",ee))),Math.abs(x)>90&&Math.abs(x)<270&&(o?(f*=-1,x+=y<=0?180:-180,y+=y<=0?180:-180):(m*=-1,x+=x<=0?180:-180)),n=n||r.uncache,r.x=h-((r.xPercent=h&&(!n&&r.xPercent||(Math.round(t.offsetWidth/2)===Math.round(-h)?-50:0)))?t.offsetWidth*r.xPercent/100:0)+s,r.y=p-((r.yPercent=p&&(!n&&r.yPercent||(Math.round(t.offsetHeight/2)===Math.round(-p)?-50:0)))?t.offsetHeight*r.yPercent/100:0)+s,r.z=c+s,r.scaleX=Ai(f),r.scaleY=Ai(m),r.rotation=Ai(y)+a,r.rotationX=Ai(v)+a,r.rotationY=Ai(g)+a,r.skewX=x+a,r.skewY=b+a,r.transformPerspective=w+s,(r.zOrigin=parseFloat(u.split(" ")[2])||!n&&r.zOrigin||0)&&(i[ko]=Qv(u)),r.xOffset=r.yOffset=0,r.force3D=la.force3D,r.renderTransform=r.svg?FF:LC?FC:OF,r.uncache=0,r},Qv=function(t){return(t=t.split(" "))[0]+" "+t[1]},gx=function(t,n,r){var i=Gs(n);return Ai(parseFloat(n)+parseFloat(Wc(t,"x",r+"px",i)))+i},OF=function(t,n){n.z="0px",n.rotationY=n.rotationX="0deg",n.force3D=0,FC(t,n)},Vf="0deg",Im="0px",Wf=") ",FC=function(t,n){var r=n||this,i=r.xPercent,o=r.yPercent,s=r.x,a=r.y,l=r.z,u=r.rotation,h=r.rotationY,p=r.rotationX,c=r.skewX,f=r.skewY,m=r.scaleX,y=r.scaleY,v=r.transformPerspective,g=r.force3D,x=r.target,b=r.zOrigin,w="",T=g==="auto"&&t&&t!==1||g===!0;if(b&&(p!==Vf||h!==Vf)){var R=parseFloat(h)*lp,C=Math.sin(R),P=Math.cos(R),I;R=parseFloat(p)*lp,I=Math.cos(R),s=gx(x,s,C*I*-b),a=gx(x,a,-Math.sin(R)*-b),l=gx(x,l,P*I*-b+b)}v!==Im&&(w+="perspective("+v+Wf),(i||o)&&(w+="translate("+i+"%, "+o+"%) "),(T||s!==Im||a!==Im||l!==Im)&&(w+=l!==Im||T?"translate3d("+s+", "+a+", "+l+") ":"translate("+s+", "+a+Wf),u!==Vf&&(w+="rotate("+u+Wf),h!==Vf&&(w+="rotateY("+h+Wf),p!==Vf&&(w+="rotateX("+p+Wf),(c!==Vf||f!==Vf)&&(w+="skew("+c+", "+f+Wf),(m!==1||y!==1)&&(w+="scale("+m+", "+y+Wf),x.style[ci]=w||"translate(0, 0)"},FF=function(t,n){var r=n||this,i=r.xPercent,o=r.yPercent,s=r.x,a=r.y,l=r.rotation,u=r.skewX,h=r.skewY,p=r.scaleX,c=r.scaleY,f=r.target,m=r.xOrigin,y=r.yOrigin,v=r.xOffset,g=r.yOffset,x=r.forceCSS,b=parseFloat(s),w=parseFloat(a),T,R,C,P,I;l=parseFloat(l),u=parseFloat(u),h=parseFloat(h),h&&(h=parseFloat(h),u+=h,l+=h),l||u?(l*=lp,u*=lp,T=Math.cos(l)*p,R=Math.sin(l)*p,C=Math.sin(l-u)*-c,P=Math.cos(l-u)*c,u&&(h*=lp,I=Math.tan(u-h),I=Math.sqrt(1+I*I),C*=I,P*=I,h&&(I=Math.tan(h),I=Math.sqrt(1+I*I),T*=I,R*=I)),T=Ai(T),R=Ai(R),C=Ai(C),P=Ai(P)):(T=p,P=c,R=C=0),(b&&!~(s+"").indexOf("px")||w&&!~(a+"").indexOf("px"))&&(b=Wc(f,"x",s,"px"),w=Wc(f,"y",a,"px")),(m||y||v||g)&&(b=Ai(b+m-(m*T+y*C)+v),w=Ai(w+y-(m*R+y*P)+g)),(i||o)&&(I=f.getBBox(),b=Ai(b+i/100*I.width),w=Ai(w+o/100*I.height)),I="matrix("+T+","+R+","+C+","+P+","+b+","+w+")",f.setAttribute("transform",I),x&&(f.style[ci]=I)},NF=function(t,n,r,i,o){var s=360,a=hs(o),l=parseFloat(o)*(a&&~o.indexOf("rad")?Qf:1),u=l-i,h=i+u+"deg",p,c;return a&&(p=o.split("_")[1],p==="short"&&(u%=s,u!==u%(s/2)&&(u+=u<0?s:-360)),p==="cw"&&u<0?u=(u+s*j2)%s-~~(u/s)*s:p==="ccw"&&u>0&&(u=(u-s*j2)%s-~~(u/s)*s)),t._pt=c=new Bo(t._pt,n,r,i,u,wF),c.e=h,c.u="deg",t._props.push(r),c},N2=function(t,n){for(var r in n)t[r]=n[r];return t},UF=function(t,n,r){var i=N2({},r._gsap),o="perspective,force3D,transformOrigin,svgOrigin",s=r.style,a,l,u,h,p,c,f,m;i.svg?(u=r.getAttribute("transform"),r.setAttribute("transform",""),s[ci]=n,a=Lg(r,1),Id(r,ci),r.setAttribute("transform",u)):(u=getComputedStyle(r)[ci],s[ci]=n,a=Lg(r,1),s[ci]=u);for(l in Xu)u=i[l],h=a[l],u!==h&&o.indexOf(l)<0&&(f=Gs(u),m=Gs(h),p=f!==m?Wc(r,l,u,m):parseFloat(u),c=parseFloat(h),t._pt=new Bo(t._pt,a,l,p,c-p,vb),t._pt.u=m||0,t._props.push(l));N2(a,i)};Do("padding,margin,Width,Radius",function(d,t){var n="Top",r="Right",i="Bottom",o="Left",s=(t<3?[n,r,i,o]:[n+o,n+r,i+r,i+o]).map(function(a){return t<2?d+a:"border"+a+d});Kv[t>1?"border"+d:d]=function(a,l,u,h,p){var c,f;if(arguments.length<4)return c=s.map(function(m){return Pu(a,m,u)}),f=c.join(" "),f.split(c[0]).length===5?c[0]:f;c=(h+"").split(" "),f={},s.forEach(function(m,y){return f[m]=c[y]=c[y]||c[(y-1)/2|0]}),a.init(l,f,p)}});var NC={name:"css",register:xb,targetTest:function(t){return t.style&&t.nodeType},init:function(t,n,r,i,o){var s=this._props,a=t.style,l=r.vars.startAt,u,h,p,c,f,m,y,v,g,x,b,w,T,R,C,P;zw||xb(),this.styles=this.styles||jC(t),P=this.styles.props,this.tween=r;for(y in n)if(y!=="autoRound"&&(h=n[y],!(ea[y]&&bC(y,n,r,i,t,o)))){if(f=typeof h,m=Kv[y],f==="function"&&(h=h.call(r,i,t,o),f=typeof h),f==="string"&&~h.indexOf("random(")&&(h=Rg(h)),m)m(this,t,y,h,r)&&(C=1);else if(y.substr(0,2)==="--")u=(getComputedStyle(t).getPropertyValue(y)+"").trim(),h+="",Nc.lastIndex=0,Nc.test(u)||(v=Gs(u),g=Gs(h)),g?v!==g&&(u=Wc(t,y,u,g)+g):v&&(h+=v),this.add(a,"setProperty",u,h,i,o,0,0,y),s.push(y),P.push(y,0,a[y]);else if(f!=="undefined"){if(l&&y in l?(u=typeof l[y]=="function"?l[y].call(r,i,t,o):l[y],hs(u)&&~u.indexOf("random(")&&(u=Rg(u)),Gs(u+"")||u==="auto"||(u+=la.units[y]||Gs(Pu(t,y))||""),(u+"").charAt(1)==="="&&(u=Pu(t,y))):u=Pu(t,y),c=parseFloat(u),x=f==="string"&&h.charAt(1)==="="&&h.substr(0,2),x&&(h=h.substr(2)),p=parseFloat(h),y in Dl&&(y==="autoAlpha"&&(c===1&&Pu(t,"visibility")==="hidden"&&p&&(c=0),P.push("visibility",0,a.visibility),Dc(this,a,"visibility",c?"inherit":"hidden",p?"inherit":"hidden",!p)),y!=="scale"&&y!=="transform"&&(y=Dl[y],~y.indexOf(",")&&(y=y.split(",")[0]))),b=y in Xu,b){if(this.styles.save(y),w||(T=t._gsap,T.renderTransform&&!n.parseTransform||Lg(t,n.parseTransform),R=n.smoothOrigin!==!1&&T.smooth,w=this._pt=new Bo(this._pt,a,ci,0,1,T.renderTransform,T,0,-1),w.dep=1),y==="scale")this._pt=new Bo(this._pt,T,"scaleY",T.scaleY,(x?op(T.scaleY,x+p):p)-T.scaleY||0,vb),this._pt.u=0,s.push("scaleY",y),y+="X";else if(y==="transformOrigin"){P.push(ko,0,a[ko]),h=BF(h),T.svg?bb(t,h,0,R,0,this):(g=parseFloat(h.split(" ")[2])||0,g!==T.zOrigin&&Dc(this,T,"zOrigin",T.zOrigin,g),Dc(this,a,y,Qv(u),Qv(h)));continue}else if(y==="svgOrigin"){bb(t,h,1,R,0,this);continue}else if(y in kC){NF(this,T,y,c,x?op(c,x+h):h);continue}else if(y==="smoothOrigin"){Dc(this,T,"smooth",T.smooth,h);continue}else if(y==="force3D"){T[y]=h;continue}else if(y==="transform"){UF(this,h,t);continue}}else y in a||(y=Ap(y)||y);if(b||(p||p===0)&&(c||c===0)&&!bF.test(h)&&y in a)v=(u+"").substr((c+"").length),p||(p=0),g=Gs(h)||(y in la.units?la.units[y]:v),v!==g&&(c=Wc(t,y,u,g)),this._pt=new Bo(this._pt,b?T:a,y,c,(x?op(c,x+p):p)-c,!b&&(g==="px"||y==="zIndex")&&n.autoRound!==!1?MF:vb),this._pt.u=g||0,v!==g&&g!=="%"&&(this._pt.b=u,this._pt.r=SF);else if(y in a)DF.call(this,t,y,u,x?x+h:h);else if(y in t)this.add(t,y,u||t[y],x?x+h:h,i,o);else if(y!=="parseTransform"){Dw(y,h);continue}b||(y in a?P.push(y,0,a[y]):typeof t[y]=="function"?P.push(y,2,t[y]()):P.push(y,1,u||t[y])),s.push(y)}}C&&TC(this)},render:function(t,n){if(n.tween._time||!Vw())for(var r=n._pt;r;)r.r(t,r.d),r=r._next;else n.styles.revert()},get:Pu,aliases:Dl,getSetter:function(t,n,r){var i=Dl[n];return i&&i.indexOf(",")<0&&(n=i),n in Xu&&n!==ko&&(t._gsap.x||Pu(t,"x"))?r&&I2===r?n==="scale"?CF:TF:(I2=r||{})&&(n==="scale"?RF:PF):t.style&&!Iw(t.style[n])?AF:~n.indexOf("-")?EF:Gw(t,n)},core:{_removeProperty:Id,_getMatrix:Xw}};Oo.utils.checkPrefix=Ap;Oo.core.getStyleSaver=jC;(function(d,t,n,r){var i=Do(d+","+t+","+n,function(o){Xu[o]=1});Do(t,function(o){la.units[o]="deg",kC[o]=1}),Dl[i[13]]=d+","+t,Do(r,function(o){var s=o.split(":");Dl[s[1]]=i[s[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");Do("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(d){la.units[d]="px"});Oo.registerPlugin(NC);var ml=Oo.registerPlugin(NC)||Oo;ml.core.Tween;/*!
 * @gsap/react 2.1.2
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/let U2=typeof document<"u"?Ot.useLayoutEffect:Ot.useEffect,G2=d=>d&&!Array.isArray(d)&&typeof d=="object",R0=[],GF={},UC=ml;const Ud=(d,t=R0)=>{let n=GF;G2(d)?(n=d,d=null,t="dependencies"in n?n.dependencies:R0):G2(t)&&(n=t,t="dependencies"in n?n.dependencies:R0),d&&typeof d!="function"&&console.warn("First parameter must be a function or config object");const{scope:r,revertOnUpdate:i}=n,o=Ot.useRef(!1),s=Ot.useRef(UC.context(()=>{},r)),a=Ot.useRef(u=>s.current.add(null,u)),l=t&&t.length&&!i;return l&&U2(()=>(o.current=!0,()=>s.current.revert()),R0),U2(()=>{if(d&&s.current.add(d,r),!l||!o.current)return()=>s.current.revert()},t),{context:s.current,contextSafe:a.current}};Ud.register=d=>{UC=d};Ud.headless=!0;function HF(d,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(d,r.key,r)}}function zF(d,t,n){return HF(d.prototype,t),d}/*!
 * Observer 3.12.7
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var Ts,$0,na,Bc,kc,up,GC,Zf,og,HC,ku,ll,zC,VC=function(){return Ts||typeof window<"u"&&(Ts=window.gsap)&&Ts.registerPlugin&&Ts},WC=1,np=[],on=[],Gl=[],ag=Date.now,wb=function(t,n){return n},VF=function(){var t=og.core,n=t.bridge||{},r=t._scrollers,i=t._proxies;r.push.apply(r,on),i.push.apply(i,Gl),on=r,Gl=i,wb=function(s,a){return n[s](a)}},Uc=function(t,n){return~Gl.indexOf(t)&&Gl[Gl.indexOf(t)+1][n]},lg=function(t){return!!~HC.indexOf(t)},oo=function(t,n,r,i,o){return t.addEventListener(n,r,{passive:i!==!1,capture:!!o})},so=function(t,n,r,i){return t.removeEventListener(n,r,!!i)},P0="scrollLeft",I0="scrollTop",Sb=function(){return ku&&ku.isPressed||on.cache++},Zv=function(t,n){var r=function i(o){if(o||o===0){WC&&(na.history.scrollRestoration="manual");var s=ku&&ku.isPressed;o=i.v=Math.round(o)||(ku&&ku.iOS?1:0),t(o),i.cacheID=on.cache,s&&wb("ss",o)}else(n||on.cache!==i.cacheID||wb("ref"))&&(i.cacheID=on.cache,i.v=t());return i.v+i.offset};return r.offset=0,t&&r},po={s:P0,p:"left",p2:"Left",os:"right",os2:"Right",d:"width",d2:"Width",a:"x",sc:Zv(function(d){return arguments.length?na.scrollTo(d,Ki.sc()):na.pageXOffset||Bc[P0]||kc[P0]||up[P0]||0})},Ki={s:I0,p:"top",p2:"Top",os:"bottom",os2:"Bottom",d:"height",d2:"Height",a:"y",op:po,sc:Zv(function(d){return arguments.length?na.scrollTo(po.sc(),d):na.pageYOffset||Bc[I0]||kc[I0]||up[I0]||0})},Po=function(t,n){return(n&&n._ctx&&n._ctx.selector||Ts.utils.toArray)(t)[0]||(typeof t=="string"&&Ts.config().nullTargetWarn!==!1?console.warn("Element not found:",t):null)},Xc=function(t,n){var r=n.s,i=n.sc;lg(t)&&(t=Bc.scrollingElement||kc);var o=on.indexOf(t),s=i===Ki.sc?1:2;!~o&&(o=on.push(t)-1),on[o+s]||oo(t,"scroll",Sb);var a=on[o+s],l=a||(on[o+s]=Zv(Uc(t,r),!0)||(lg(t)?i:Zv(function(u){return arguments.length?t[r]=u:t[r]})));return l.target=t,a||(l.smooth=Ts.getProperty(t,"scrollBehavior")==="smooth"),l},Mb=function(t,n,r){var i=t,o=t,s=ag(),a=s,l=n||50,u=Math.max(500,l*3),h=function(m,y){var v=ag();y||v-s>l?(o=i,i=m,a=s,s=v):r?i+=m:i=o+(m-o)/(v-a)*(s-a)},p=function(){o=i=r?0:i,a=s=0},c=function(m){var y=a,v=o,g=ag();return(m||m===0)&&m!==i&&h(m),s===a||g-a>u?0:(i+(r?v:-v))/((r?g:s)-y)*1e3};return{update:h,reset:p,getVelocity:c}},jm=function(t,n){return n&&!t._gsapAllow&&t.preventDefault(),t.changedTouches?t.changedTouches[0]:t},H2=function(t){var n=Math.max.apply(Math,t),r=Math.min.apply(Math,t);return Math.abs(n)>=Math.abs(r)?n:r},XC=function(){og=Ts.core.globals().ScrollTrigger,og&&og.core&&VF()},YC=function(t){return Ts=t||VC(),!$0&&Ts&&typeof document<"u"&&document.body&&(na=window,Bc=document,kc=Bc.documentElement,up=Bc.body,HC=[na,Bc,kc,up],Ts.utils.clamp,zC=Ts.core.context||function(){},Zf="onpointerenter"in up?"pointer":"mouse",GC=Ci.isTouch=na.matchMedia&&na.matchMedia("(hover: none), (pointer: coarse)").matches?1:"ontouchstart"in na||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0?2:0,ll=Ci.eventTypes=("ontouchstart"in kc?"touchstart,touchmove,touchcancel,touchend":"onpointerdown"in kc?"pointerdown,pointermove,pointercancel,pointerup":"mousedown,mousemove,mouseup,mouseup").split(","),setTimeout(function(){return WC=0},500),XC(),$0=1),$0};po.op=Ki;on.cache=0;var Ci=function(){function d(n){this.init(n)}var t=d.prototype;return t.init=function(r){$0||YC(Ts)||console.warn("Please gsap.registerPlugin(Observer)"),og||XC();var i=r.tolerance,o=r.dragMinimum,s=r.type,a=r.target,l=r.lineHeight,u=r.debounce,h=r.preventDefault,p=r.onStop,c=r.onStopDelay,f=r.ignore,m=r.wheelSpeed,y=r.event,v=r.onDragStart,g=r.onDragEnd,x=r.onDrag,b=r.onPress,w=r.onRelease,T=r.onRight,R=r.onLeft,C=r.onUp,P=r.onDown,I=r.onChangeX,D=r.onChangeY,j=r.onChange,N=r.onToggleX,O=r.onToggleY,W=r.onHover,X=r.onHoverEnd,J=r.onMove,ee=r.ignoreCheck,V=r.isNormalizer,q=r.onGestureStart,Y=r.onGestureEnd,Z=r.onWheel,ce=r.onEnable,B=r.onDisable,U=r.onClick,K=r.scrollSpeed,re=r.capture,ae=r.allowClicks,pe=r.lockAxis,ye=r.onLockAxis;this.target=a=Po(a)||kc,this.vars=r,f&&(f=Ts.utils.toArray(f)),i=i||1e-9,o=o||0,m=m||1,K=K||1,s=s||"wheel,touch,pointer",u=u!==!1,l||(l=parseFloat(na.getComputedStyle(up).lineHeight)||22);var Re,Me,xe,ve,ne,Te,Pe,Ae=this,je=0,Ue=0,Ge=r.passive||!h&&r.passive!==!1,_e=Xc(a,po),fe=Xc(a,Ki),We=_e(),Ke=fe(),$e=~s.indexOf("touch")&&!~s.indexOf("pointer")&&ll[0]==="pointerdown",et=lg(a),ht=a.ownerDocument||Bc,Be=[0,0,0],rt=[0,0,0],Ye=0,de=function(){return Ye=ag()},ge=function(Ut,Yt){return(Ae.event=Ut)&&f&&~f.indexOf(Ut.target)||Yt&&$e&&Ut.pointerType!=="touch"||ee&&ee(Ut,Yt)},ue=function(){Ae._vx.reset(),Ae._vy.reset(),Me.pause(),p&&p(Ae)},Se=function(){var Ut=Ae.deltaX=H2(Be),Yt=Ae.deltaY=H2(rt),Pt=Math.abs(Ut)>=i,Wt=Math.abs(Yt)>=i;j&&(Pt||Wt)&&j(Ae,Ut,Yt,Be,rt),Pt&&(T&&Ae.deltaX>0&&T(Ae),R&&Ae.deltaX<0&&R(Ae),I&&I(Ae),N&&Ae.deltaX<0!=je<0&&N(Ae),je=Ae.deltaX,Be[0]=Be[1]=Be[2]=0),Wt&&(P&&Ae.deltaY>0&&P(Ae),C&&Ae.deltaY<0&&C(Ae),D&&D(Ae),O&&Ae.deltaY<0!=Ue<0&&O(Ae),Ue=Ae.deltaY,rt[0]=rt[1]=rt[2]=0),(ve||xe)&&(J&&J(Ae),xe&&(v&&xe===1&&v(Ae),x&&x(Ae),xe=0),ve=!1),Te&&!(Te=!1)&&ye&&ye(Ae),ne&&(Z(Ae),ne=!1),Re=0},De=function(Ut,Yt,Pt){Be[Pt]+=Ut,rt[Pt]+=Yt,Ae._vx.update(Ut),Ae._vy.update(Yt),u?Re||(Re=requestAnimationFrame(Se)):Se()},be=function(Ut,Yt){pe&&!Pe&&(Ae.axis=Pe=Math.abs(Ut)>Math.abs(Yt)?"x":"y",Te=!0),Pe!=="y"&&(Be[2]+=Ut,Ae._vx.update(Ut,!0)),Pe!=="x"&&(rt[2]+=Yt,Ae._vy.update(Yt,!0)),u?Re||(Re=requestAnimationFrame(Se)):Se()},ke=function(Ut){if(!ge(Ut,1)){Ut=jm(Ut,h);var Yt=Ut.clientX,Pt=Ut.clientY,Wt=Yt-Ae.x,Jt=Pt-Ae.y,$t=Ae.isDragging;Ae.x=Yt,Ae.y=Pt,($t||(Wt||Jt)&&(Math.abs(Ae.startX-Yt)>=o||Math.abs(Ae.startY-Pt)>=o))&&(xe=$t?2:1,$t||(Ae.isDragging=!0),be(Wt,Jt))}},ot=Ae.onPress=function(Bt){ge(Bt,1)||Bt&&Bt.button||(Ae.axis=Pe=null,Me.pause(),Ae.isPressed=!0,Bt=jm(Bt),je=Ue=0,Ae.startX=Ae.x=Bt.clientX,Ae.startY=Ae.y=Bt.clientY,Ae._vx.reset(),Ae._vy.reset(),oo(V?a:ht,ll[1],ke,Ge,!0),Ae.deltaX=Ae.deltaY=0,b&&b(Ae))},Ce=Ae.onRelease=function(Bt){if(!ge(Bt,1)){so(V?a:ht,ll[1],ke,!0);var Ut=!isNaN(Ae.y-Ae.startY),Yt=Ae.isDragging,Pt=Yt&&(Math.abs(Ae.x-Ae.startX)>3||Math.abs(Ae.y-Ae.startY)>3),Wt=jm(Bt);!Pt&&Ut&&(Ae._vx.reset(),Ae._vy.reset(),h&&ae&&Ts.delayedCall(.08,function(){if(ag()-Ye>300&&!Bt.defaultPrevented){if(Bt.target.click)Bt.target.click();else if(ht.createEvent){var Jt=ht.createEvent("MouseEvents");Jt.initMouseEvent("click",!0,!0,na,1,Wt.screenX,Wt.screenY,Wt.clientX,Wt.clientY,!1,!1,!1,!1,0,null),Bt.target.dispatchEvent(Jt)}}})),Ae.isDragging=Ae.isGesturing=Ae.isPressed=!1,p&&Yt&&!V&&Me.restart(!0),xe&&Se(),g&&Yt&&g(Ae),w&&w(Ae,Pt)}},it=function(Ut){return Ut.touches&&Ut.touches.length>1&&(Ae.isGesturing=!0)&&q(Ut,Ae.isDragging)},Xe=function(){return(Ae.isGesturing=!1)||Y(Ae)},ut=function(Ut){if(!ge(Ut)){var Yt=_e(),Pt=fe();De((Yt-We)*K,(Pt-Ke)*K,1),We=Yt,Ke=Pt,p&&Me.restart(!0)}},bt=function(Ut){if(!ge(Ut)){Ut=jm(Ut,h),Z&&(ne=!0);var Yt=(Ut.deltaMode===1?l:Ut.deltaMode===2?na.innerHeight:1)*m;De(Ut.deltaX*Yt,Ut.deltaY*Yt,0),p&&!V&&Me.restart(!0)}},vt=function(Ut){if(!ge(Ut)){var Yt=Ut.clientX,Pt=Ut.clientY,Wt=Yt-Ae.x,Jt=Pt-Ae.y;Ae.x=Yt,Ae.y=Pt,ve=!0,p&&Me.restart(!0),(Wt||Jt)&&be(Wt,Jt)}},Rt=function(Ut){Ae.event=Ut,W(Ae)},Dt=function(Ut){Ae.event=Ut,X(Ae)},yr=function(Ut){return ge(Ut)||jm(Ut,h)&&U(Ae)};Me=Ae._dc=Ts.delayedCall(c||.25,ue).pause(),Ae.deltaX=Ae.deltaY=0,Ae._vx=Mb(0,50,!0),Ae._vy=Mb(0,50,!0),Ae.scrollX=_e,Ae.scrollY=fe,Ae.isDragging=Ae.isGesturing=Ae.isPressed=!1,zC(this),Ae.enable=function(Bt){return Ae.isEnabled||(oo(et?ht:a,"scroll",Sb),s.indexOf("scroll")>=0&&oo(et?ht:a,"scroll",ut,Ge,re),s.indexOf("wheel")>=0&&oo(a,"wheel",bt,Ge,re),(s.indexOf("touch")>=0&&GC||s.indexOf("pointer")>=0)&&(oo(a,ll[0],ot,Ge,re),oo(ht,ll[2],Ce),oo(ht,ll[3],Ce),ae&&oo(a,"click",de,!0,!0),U&&oo(a,"click",yr),q&&oo(ht,"gesturestart",it),Y&&oo(ht,"gestureend",Xe),W&&oo(a,Zf+"enter",Rt),X&&oo(a,Zf+"leave",Dt),J&&oo(a,Zf+"move",vt)),Ae.isEnabled=!0,Ae.isDragging=Ae.isGesturing=Ae.isPressed=ve=xe=!1,Ae._vx.reset(),Ae._vy.reset(),We=_e(),Ke=fe(),Bt&&Bt.type&&ot(Bt),ce&&ce(Ae)),Ae},Ae.disable=function(){Ae.isEnabled&&(np.filter(function(Bt){return Bt!==Ae&&lg(Bt.target)}).length||so(et?ht:a,"scroll",Sb),Ae.isPressed&&(Ae._vx.reset(),Ae._vy.reset(),so(V?a:ht,ll[1],ke,!0)),so(et?ht:a,"scroll",ut,re),so(a,"wheel",bt,re),so(a,ll[0],ot,re),so(ht,ll[2],Ce),so(ht,ll[3],Ce),so(a,"click",de,!0),so(a,"click",yr),so(ht,"gesturestart",it),so(ht,"gestureend",Xe),so(a,Zf+"enter",Rt),so(a,Zf+"leave",Dt),so(a,Zf+"move",vt),Ae.isEnabled=Ae.isPressed=Ae.isDragging=!1,B&&B(Ae))},Ae.kill=Ae.revert=function(){Ae.disable();var Bt=np.indexOf(Ae);Bt>=0&&np.splice(Bt,1),ku===Ae&&(ku=0)},np.push(Ae),V&&lg(a)&&(ku=Ae),Ae.enable(y)},zF(d,[{key:"velocityX",get:function(){return this._vx.getVelocity()}},{key:"velocityY",get:function(){return this._vy.getVelocity()}}]),d}();Ci.version="3.12.7";Ci.create=function(d){return new Ci(d)};Ci.register=YC;Ci.getAll=function(){return np.slice()};Ci.getById=function(d){return np.filter(function(t){return t.vars.id===d})[0]};VC()&&Ts.registerPlugin(Ci);/*!
 * ScrollTrigger 3.12.7
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var hr,Yh,sn,Xn,ta,Rn,Yw,$v,Dg,ug,Hm,j0,Ns,H_,Ab,uo,z2,V2,qh,qC,yx,JC,lo,Eb,KC,QC,Pc,Tb,qw,cp,Jw,e_,Cb,vx,L0=1,Us=Date.now,_x=Us(),Ba=0,zm=0,W2=function(t,n,r){var i=$o(t)&&(t.substr(0,6)==="clamp("||t.indexOf("max")>-1);return r["_"+n+"Clamp"]=i,i?t.substr(6,t.length-7):t},X2=function(t,n){return n&&(!$o(t)||t.substr(0,6)!=="clamp(")?"clamp("+t+")":t},WF=function d(){return zm&&requestAnimationFrame(d)},Y2=function(){return H_=1},q2=function(){return H_=0},jl=function(t){return t},Vm=function(t){return Math.round(t*1e5)/1e5||0},ZC=function(){return typeof window<"u"},$C=function(){return hr||ZC()&&(hr=window.gsap)&&hr.registerPlugin&&hr},jd=function(t){return!!~Yw.indexOf(t)},eR=function(t){return(t==="Height"?Jw:sn["inner"+t])||ta["client"+t]||Rn["client"+t]},tR=function(t){return Uc(t,"getBoundingClientRect")||(jd(t)?function(){return iv.width=sn.innerWidth,iv.height=Jw,iv}:function(){return Lu(t)})},XF=function(t,n,r){var i=r.d,o=r.d2,s=r.a;return(s=Uc(t,"getBoundingClientRect"))?function(){return s()[i]}:function(){return(n?eR(o):t["client"+o])||0}},YF=function(t,n){return!n||~Gl.indexOf(t)?tR(t):function(){return iv}},Bl=function(t,n){var r=n.s,i=n.d2,o=n.d,s=n.a;return Math.max(0,(r="scroll"+i)&&(s=Uc(t,r))?s()-tR(t)()[o]:jd(t)?(ta[r]||Rn[r])-eR(i):t[r]-t["offset"+i])},D0=function(t,n){for(var r=0;r<qh.length;r+=3)(!n||~n.indexOf(qh[r+1]))&&t(qh[r],qh[r+1],qh[r+2])},$o=function(t){return typeof t=="string"},Hs=function(t){return typeof t=="function"},Wm=function(t){return typeof t=="number"},$f=function(t){return typeof t=="object"},Lm=function(t,n,r){return t&&t.progress(n?0:1)&&r&&t.pause()},xx=function(t,n){if(t.enabled){var r=t._ctx?t._ctx.add(function(){return n(t)}):n(t);r&&r.totalTime&&(t.callbackAnimation=r)}},Hh=Math.abs,rR="left",nR="top",Kw="right",Qw="bottom",_d="width",xd="height",cg="Right",fg="Left",dg="Top",hg="Bottom",Oi="padding",Ia="margin",Ep="Width",Zw="Height",Ji="px",ja=function(t){return sn.getComputedStyle(t)},qF=function(t){var n=ja(t).position;t.style.position=n==="absolute"||n==="fixed"?n:"relative"},J2=function(t,n){for(var r in n)r in t||(t[r]=n[r]);return t},Lu=function(t,n){var r=n&&ja(t)[Ab]!=="matrix(1, 0, 0, 1, 0, 0)"&&hr.to(t,{x:0,y:0,xPercent:0,yPercent:0,rotation:0,rotationX:0,rotationY:0,scale:1,skewX:0,skewY:0}).progress(1),i=t.getBoundingClientRect();return r&&r.progress(0).kill(),i},t_=function(t,n){var r=n.d2;return t["offset"+r]||t["client"+r]||0},iR=function(t){var n=[],r=t.labels,i=t.duration(),o;for(o in r)n.push(r[o]/i);return n},JF=function(t){return function(n){return hr.utils.snap(iR(t),n)}},$w=function(t){var n=hr.utils.snap(t),r=Array.isArray(t)&&t.slice(0).sort(function(i,o){return i-o});return r?function(i,o,s){s===void 0&&(s=.001);var a;if(!o)return n(i);if(o>0){for(i-=s,a=0;a<r.length;a++)if(r[a]>=i)return r[a];return r[a-1]}else for(a=r.length,i+=s;a--;)if(r[a]<=i)return r[a];return r[0]}:function(i,o,s){s===void 0&&(s=.001);var a=n(i);return!o||Math.abs(a-i)<s||a-i<0==o<0?a:n(o<0?i-t:i+t)}},KF=function(t){return function(n,r){return $w(iR(t))(n,r.direction)}},B0=function(t,n,r,i){return r.split(",").forEach(function(o){return t(n,o,i)})},cs=function(t,n,r,i,o){return t.addEventListener(n,r,{passive:!i,capture:!!o})},us=function(t,n,r,i){return t.removeEventListener(n,r,!!i)},k0=function(t,n,r){r=r&&r.wheelHandler,r&&(t(n,"wheel",r),t(n,"touchmove",r))},K2={startColor:"green",endColor:"red",indent:0,fontSize:"16px",fontWeight:"normal"},O0={toggleActions:"play",anticipatePin:0},r_={top:0,left:0,center:.5,bottom:1,right:1},ev=function(t,n){if($o(t)){var r=t.indexOf("="),i=~r?+(t.charAt(r-1)+1)*parseFloat(t.substr(r+1)):0;~r&&(t.indexOf("%")>r&&(i*=n/100),t=t.substr(0,r-1)),t=i+(t in r_?r_[t]*n:~t.indexOf("%")?parseFloat(t)*n/100:parseFloat(t)||0)}return t},F0=function(t,n,r,i,o,s,a,l){var u=o.startColor,h=o.endColor,p=o.fontSize,c=o.indent,f=o.fontWeight,m=Xn.createElement("div"),y=jd(r)||Uc(r,"pinType")==="fixed",v=t.indexOf("scroller")!==-1,g=y?Rn:r,x=t.indexOf("start")!==-1,b=x?u:h,w="border-color:"+b+";font-size:"+p+";color:"+b+";font-weight:"+f+";pointer-events:none;white-space:nowrap;font-family:sans-serif,Arial;z-index:1000;padding:4px 8px;border-width:0;border-style:solid;";return w+="position:"+((v||l)&&y?"fixed;":"absolute;"),(v||l||!y)&&(w+=(i===Ki?Kw:Qw)+":"+(s+parseFloat(c))+"px;"),a&&(w+="box-sizing:border-box;text-align:left;width:"+a.offsetWidth+"px;"),m._isStart=x,m.setAttribute("class","gsap-marker-"+t+(n?" marker-"+n:"")),m.style.cssText=w,m.innerText=n||n===0?t+"-"+n:t,g.children[0]?g.insertBefore(m,g.children[0]):g.appendChild(m),m._offset=m["offset"+i.op.d2],tv(m,0,i,x),m},tv=function(t,n,r,i){var o={display:"block"},s=r[i?"os2":"p2"],a=r[i?"p2":"os2"];t._isFlipped=i,o[r.a+"Percent"]=i?-100:0,o[r.a]=i?"1px":0,o["border"+s+Ep]=1,o["border"+a+Ep]=0,o[r.p]=n+"px",hr.set(t,o)},$r=[],Rb={},Bg,Q2=function(){return Us()-Ba>34&&(Bg||(Bg=requestAnimationFrame(Uu)))},zh=function(){(!lo||!lo.isPressed||lo.startX>Rn.clientWidth)&&(on.cache++,lo?Bg||(Bg=requestAnimationFrame(Uu)):Uu(),Ba||Dd("scrollStart"),Ba=Us())},bx=function(){QC=sn.innerWidth,KC=sn.innerHeight},Xm=function(t){on.cache++,(t===!0||!Ns&&!JC&&!Xn.fullscreenElement&&!Xn.webkitFullscreenElement&&(!Eb||QC!==sn.innerWidth||Math.abs(sn.innerHeight-KC)>sn.innerHeight*.25))&&$v.restart(!0)},Ld={},QF=[],sR=function d(){return us(qr,"scrollEnd",d)||ad(!0)},Dd=function(t){return Ld[t]&&Ld[t].map(function(n){return n()})||QF},Zo=[],oR=function(t){for(var n=0;n<Zo.length;n+=5)(!t||Zo[n+4]&&Zo[n+4].query===t)&&(Zo[n].style.cssText=Zo[n+1],Zo[n].getBBox&&Zo[n].setAttribute("transform",Zo[n+2]||""),Zo[n+3].uncache=1)},eS=function(t,n){var r;for(uo=0;uo<$r.length;uo++)r=$r[uo],r&&(!n||r._ctx===n)&&(t?r.kill(1):r.revert(!0,!0));e_=!0,n&&oR(n),n||Dd("revert")},aR=function(t,n){on.cache++,(n||!co)&&on.forEach(function(r){return Hs(r)&&r.cacheID++&&(r.rec=0)}),$o(t)&&(sn.history.scrollRestoration=qw=t)},co,bd=0,Z2,ZF=function(){if(Z2!==bd){var t=Z2=bd;requestAnimationFrame(function(){return t===bd&&ad(!0)})}},lR=function(){Rn.appendChild(cp),Jw=!lo&&cp.offsetHeight||sn.innerHeight,Rn.removeChild(cp)},$2=function(t){return Dg(".gsap-marker-start, .gsap-marker-end, .gsap-marker-scroller-start, .gsap-marker-scroller-end").forEach(function(n){return n.style.display=t?"none":"block"})},ad=function(t,n){if(ta=Xn.documentElement,Rn=Xn.body,Yw=[sn,Xn,ta,Rn],Ba&&!t&&!e_){cs(qr,"scrollEnd",sR);return}lR(),co=qr.isRefreshing=!0,on.forEach(function(i){return Hs(i)&&++i.cacheID&&(i.rec=i())});var r=Dd("refreshInit");qC&&qr.sort(),n||eS(),on.forEach(function(i){Hs(i)&&(i.smooth&&(i.target.style.scrollBehavior="auto"),i(0))}),$r.slice(0).forEach(function(i){return i.refresh()}),e_=!1,$r.forEach(function(i){if(i._subPinOffset&&i.pin){var o=i.vars.horizontal?"offsetWidth":"offsetHeight",s=i.pin[o];i.revert(!0,1),i.adjustPinSpacing(i.pin[o]-s),i.refresh()}}),Cb=1,$2(!0),$r.forEach(function(i){var o=Bl(i.scroller,i._dir),s=i.vars.end==="max"||i._endClamp&&i.end>o,a=i._startClamp&&i.start>=o;(s||a)&&i.setPositions(a?o-1:i.start,s?Math.max(a?o:i.start+1,o):i.end,!0)}),$2(!1),Cb=0,r.forEach(function(i){return i&&i.render&&i.render(-1)}),on.forEach(function(i){Hs(i)&&(i.smooth&&requestAnimationFrame(function(){return i.target.style.scrollBehavior="smooth"}),i.rec&&i(i.rec))}),aR(qw,1),$v.pause(),bd++,co=2,Uu(2),$r.forEach(function(i){return Hs(i.vars.onRefresh)&&i.vars.onRefresh(i)}),co=qr.isRefreshing=!1,Dd("refresh")},Pb=0,rv=1,pg,Uu=function(t){if(t===2||!co&&!e_){qr.isUpdating=!0,pg&&pg.update(0);var n=$r.length,r=Us(),i=r-_x>=50,o=n&&$r[0].scroll();if(rv=Pb>o?-1:1,co||(Pb=o),i&&(Ba&&!H_&&r-Ba>200&&(Ba=0,Dd("scrollEnd")),Hm=_x,_x=r),rv<0){for(uo=n;uo-- >0;)$r[uo]&&$r[uo].update(0,i);rv=1}else for(uo=0;uo<n;uo++)$r[uo]&&$r[uo].update(0,i);qr.isUpdating=!1}Bg=0},Ib=[rR,nR,Qw,Kw,Ia+hg,Ia+cg,Ia+dg,Ia+fg,"display","flexShrink","float","zIndex","gridColumnStart","gridColumnEnd","gridRowStart","gridRowEnd","gridArea","justifySelf","alignSelf","placeSelf","order"],nv=Ib.concat([_d,xd,"boxSizing","max"+Ep,"max"+Zw,"position",Ia,Oi,Oi+dg,Oi+cg,Oi+hg,Oi+fg]),$F=function(t,n,r){fp(r);var i=t._gsap;if(i.spacerIsNative)fp(i.spacerState);else if(t._gsap.swappedIn){var o=n.parentNode;o&&(o.insertBefore(t,n),o.removeChild(n))}t._gsap.swappedIn=!1},wx=function(t,n,r,i){if(!t._gsap.swappedIn){for(var o=Ib.length,s=n.style,a=t.style,l;o--;)l=Ib[o],s[l]=r[l];s.position=r.position==="absolute"?"absolute":"relative",r.display==="inline"&&(s.display="inline-block"),a[Qw]=a[Kw]="auto",s.flexBasis=r.flexBasis||"auto",s.overflow="visible",s.boxSizing="border-box",s[_d]=t_(t,po)+Ji,s[xd]=t_(t,Ki)+Ji,s[Oi]=a[Ia]=a[nR]=a[rR]="0",fp(i),a[_d]=a["max"+Ep]=r[_d],a[xd]=a["max"+Zw]=r[xd],a[Oi]=r[Oi],t.parentNode!==n&&(t.parentNode.insertBefore(n,t),n.appendChild(t)),t._gsap.swappedIn=!0}},eN=/([A-Z])/g,fp=function(t){if(t){var n=t.t.style,r=t.length,i=0,o,s;for((t.t._gsap||hr.core.getCache(t.t)).uncache=1;i<r;i+=2)s=t[i+1],o=t[i],s?n[o]=s:n[o]&&n.removeProperty(o.replace(eN,"-$1").toLowerCase())}},N0=function(t){for(var n=nv.length,r=t.style,i=[],o=0;o<n;o++)i.push(nv[o],r[nv[o]]);return i.t=t,i},tN=function(t,n,r){for(var i=[],o=t.length,s=r?8:0,a;s<o;s+=2)a=t[s],i.push(a,a in n?n[a]:t[s+1]);return i.t=t.t,i},iv={left:0,top:0},eA=function(t,n,r,i,o,s,a,l,u,h,p,c,f,m){Hs(t)&&(t=t(l)),$o(t)&&t.substr(0,3)==="max"&&(t=c+(t.charAt(4)==="="?ev("0"+t.substr(3),r):0));var y=f?f.time():0,v,g,x;if(f&&f.seek(0),isNaN(t)||(t=+t),Wm(t))f&&(t=hr.utils.mapRange(f.scrollTrigger.start,f.scrollTrigger.end,0,c,t)),a&&tv(a,r,i,!0);else{Hs(n)&&(n=n(l));var b=(t||"0").split(" "),w,T,R,C;x=Po(n,l)||Rn,w=Lu(x)||{},(!w||!w.left&&!w.top)&&ja(x).display==="none"&&(C=x.style.display,x.style.display="block",w=Lu(x),C?x.style.display=C:x.style.removeProperty("display")),T=ev(b[0],w[i.d]),R=ev(b[1]||"0",r),t=w[i.p]-u[i.p]-h+T+o-R,a&&tv(a,R,i,r-R<20||a._isStart&&R>20),r-=r-R}if(m&&(l[m]=t||-.001,t<0&&(t=0)),s){var P=t+r,I=s._isStart;v="scroll"+i.d2,tv(s,P,i,I&&P>20||!I&&(p?Math.max(Rn[v],ta[v]):s.parentNode[v])<=P+1),p&&(u=Lu(a),p&&(s.style[i.op.p]=u[i.op.p]-i.op.m-s._offset+Ji))}return f&&x&&(v=Lu(x),f.seek(c),g=Lu(x),f._caScrollDist=v[i.p]-g[i.p],t=t/f._caScrollDist*c),f&&f.seek(y),f?t:Math.round(t)},rN=/(webkit|moz|length|cssText|inset)/i,tA=function(t,n,r,i){if(t.parentNode!==n){var o=t.style,s,a;if(n===Rn){t._stOrig=o.cssText,a=ja(t);for(s in a)!+s&&!rN.test(s)&&a[s]&&typeof o[s]=="string"&&s!=="0"&&(o[s]=a[s]);o.top=r,o.left=i}else o.cssText=t._stOrig;hr.core.getCache(t).uncache=1,n.appendChild(t)}},uR=function(t,n,r){var i=n,o=i;return function(s){var a=Math.round(t());return a!==i&&a!==o&&Math.abs(a-i)>3&&Math.abs(a-o)>3&&(s=a,r&&r()),o=i,i=Math.round(s),i}},U0=function(t,n,r){var i={};i[n.p]="+="+r,hr.set(t,i)},rA=function(t,n){var r=Xc(t,n),i="_scroll"+n.p2,o=function s(a,l,u,h,p){var c=s.tween,f=l.onComplete,m={};u=u||r();var y=uR(r,u,function(){c.kill(),s.tween=0});return p=h&&p||0,h=h||a-u,c&&c.kill(),l[i]=a,l.inherit=!1,l.modifiers=m,m[i]=function(){return y(u+h*c.ratio+p*c.ratio*c.ratio)},l.onUpdate=function(){on.cache++,s.tween&&Uu()},l.onComplete=function(){s.tween=0,f&&f.call(c)},c=s.tween=hr.to(t,l),c};return t[i]=r,r.wheelHandler=function(){return o.tween&&o.tween.kill()&&(o.tween=0)},cs(t,"wheel",r.wheelHandler),qr.isTouch&&cs(t,"touchmove",r.wheelHandler),o},qr=function(){function d(n,r){Yh||d.register(hr)||console.warn("Please gsap.registerPlugin(ScrollTrigger)"),Tb(this),this.init(n,r)}var t=d.prototype;return t.init=function(r,i){if(this.progress=this.start=0,this.vars&&this.kill(!0,!0),!zm){this.update=this.refresh=this.kill=jl;return}r=J2($o(r)||Wm(r)||r.nodeType?{trigger:r}:r,O0);var o=r,s=o.onUpdate,a=o.toggleClass,l=o.id,u=o.onToggle,h=o.onRefresh,p=o.scrub,c=o.trigger,f=o.pin,m=o.pinSpacing,y=o.invalidateOnRefresh,v=o.anticipatePin,g=o.onScrubComplete,x=o.onSnapComplete,b=o.once,w=o.snap,T=o.pinReparent,R=o.pinSpacer,C=o.containerAnimation,P=o.fastScrollEnd,I=o.preventOverlaps,D=r.horizontal||r.containerAnimation&&r.horizontal!==!1?po:Ki,j=!p&&p!==0,N=Po(r.scroller||sn),O=hr.core.getCache(N),W=jd(N),X=("pinType"in r?r.pinType:Uc(N,"pinType")||W&&"fixed")==="fixed",J=[r.onEnter,r.onLeave,r.onEnterBack,r.onLeaveBack],ee=j&&r.toggleActions.split(" "),V="markers"in r?r.markers:O0.markers,q=W?0:parseFloat(ja(N)["border"+D.p2+Ep])||0,Y=this,Z=r.onRefreshInit&&function(){return r.onRefreshInit(Y)},ce=XF(N,W,D),B=YF(N,W),U=0,K=0,re=0,ae=Xc(N,D),pe,ye,Re,Me,xe,ve,ne,Te,Pe,Ae,je,Ue,Ge,_e,fe,We,Ke,$e,et,ht,Be,rt,Ye,de,ge,ue,Se,De,be,ke,ot,Ce,it,Xe,ut,bt,vt,Rt,Dt;if(Y._startClamp=Y._endClamp=!1,Y._dir=D,v*=45,Y.scroller=N,Y.scroll=C?C.time.bind(C):ae,Me=ae(),Y.vars=r,i=i||r.animation,"refreshPriority"in r&&(qC=1,r.refreshPriority===-9999&&(pg=Y)),O.tweenScroll=O.tweenScroll||{top:rA(N,Ki),left:rA(N,po)},Y.tweenTo=pe=O.tweenScroll[D.p],Y.scrubDuration=function(Pt){it=Wm(Pt)&&Pt,it?Ce?Ce.duration(Pt):Ce=hr.to(i,{ease:"expo",totalProgress:"+=0",inherit:!1,duration:it,paused:!0,onComplete:function(){return g&&g(Y)}}):(Ce&&Ce.progress(1).kill(),Ce=0)},i&&(i.vars.lazy=!1,i._initted&&!Y.isReverted||i.vars.immediateRender!==!1&&r.immediateRender!==!1&&i.duration()&&i.render(0,!0,!0),Y.animation=i.pause(),i.scrollTrigger=Y,Y.scrubDuration(p),ke=0,l||(l=i.vars.id)),w&&((!$f(w)||w.push)&&(w={snapTo:w}),"scrollBehavior"in Rn.style&&hr.set(W?[Rn,ta]:N,{scrollBehavior:"auto"}),on.forEach(function(Pt){return Hs(Pt)&&Pt.target===(W?Xn.scrollingElement||ta:N)&&(Pt.smooth=!1)}),Re=Hs(w.snapTo)?w.snapTo:w.snapTo==="labels"?JF(i):w.snapTo==="labelsDirectional"?KF(i):w.directional!==!1?function(Pt,Wt){return $w(w.snapTo)(Pt,Us()-K<500?0:Wt.direction)}:hr.utils.snap(w.snapTo),Xe=w.duration||{min:.1,max:2},Xe=$f(Xe)?ug(Xe.min,Xe.max):ug(Xe,Xe),ut=hr.delayedCall(w.delay||it/2||.1,function(){var Pt=ae(),Wt=Us()-K<500,Jt=pe.tween;if((Wt||Math.abs(Y.getVelocity())<10)&&!Jt&&!H_&&U!==Pt){var $t=(Pt-ve)/_e,br=i&&!j?i.totalProgress():$t,cr=Wt?0:(br-ot)/(Us()-Hm)*1e3||0,en=hr.utils.clamp(-$t,1-$t,Hh(cr/2)*cr/.185),Pn=$t+(w.inertia===!1?0:en),an,un,jr=w,Jn=jr.onStart,Fe=jr.onInterrupt,Tt=jr.onComplete;if(an=Re(Pn,Y),Wm(an)||(an=Pn),un=Math.max(0,Math.round(ve+an*_e)),Pt<=ne&&Pt>=ve&&un!==Pt){if(Jt&&!Jt._initted&&Jt.data<=Hh(un-Pt))return;w.inertia===!1&&(en=an-$t),pe(un,{duration:Xe(Hh(Math.max(Hh(Pn-br),Hh(an-br))*.185/cr/.05||0)),ease:w.ease||"power3",data:Hh(un-Pt),onInterrupt:function(){return ut.restart(!0)&&Fe&&Fe(Y)},onComplete:function(){Y.update(),U=ae(),i&&!j&&(Ce?Ce.resetTo("totalProgress",an,i._tTime/i._tDur):i.progress(an)),ke=ot=i&&!j?i.totalProgress():Y.progress,x&&x(Y),Tt&&Tt(Y)}},Pt,en*_e,un-Pt-en*_e),Jn&&Jn(Y,pe.tween)}}else Y.isActive&&U!==Pt&&ut.restart(!0)}).pause()),l&&(Rb[l]=Y),c=Y.trigger=Po(c||f!==!0&&f),Dt=c&&c._gsap&&c._gsap.stRevert,Dt&&(Dt=Dt(Y)),f=f===!0?c:Po(f),$o(a)&&(a={targets:c,className:a}),f&&(m===!1||m===Ia||(m=!m&&f.parentNode&&f.parentNode.style&&ja(f.parentNode).display==="flex"?!1:Oi),Y.pin=f,ye=hr.core.getCache(f),ye.spacer?fe=ye.pinState:(R&&(R=Po(R),R&&!R.nodeType&&(R=R.current||R.nativeElement),ye.spacerIsNative=!!R,R&&(ye.spacerState=N0(R))),ye.spacer=$e=R||Xn.createElement("div"),$e.classList.add("pin-spacer"),l&&$e.classList.add("pin-spacer-"+l),ye.pinState=fe=N0(f)),r.force3D!==!1&&hr.set(f,{force3D:!0}),Y.spacer=$e=ye.spacer,be=ja(f),de=be[m+D.os2],ht=hr.getProperty(f),Be=hr.quickSetter(f,D.a,Ji),wx(f,$e,be),Ke=N0(f)),V){Ue=$f(V)?J2(V,K2):K2,Ae=F0("scroller-start",l,N,D,Ue,0),je=F0("scroller-end",l,N,D,Ue,0,Ae),et=Ae["offset"+D.op.d2];var yr=Po(Uc(N,"content")||N);Te=this.markerStart=F0("start",l,yr,D,Ue,et,0,C),Pe=this.markerEnd=F0("end",l,yr,D,Ue,et,0,C),C&&(Rt=hr.quickSetter([Te,Pe],D.a,Ji)),!X&&!(Gl.length&&Uc(N,"fixedMarkers")===!0)&&(qF(W?Rn:N),hr.set([Ae,je],{force3D:!0}),ue=hr.quickSetter(Ae,D.a,Ji),De=hr.quickSetter(je,D.a,Ji))}if(C){var Bt=C.vars.onUpdate,Ut=C.vars.onUpdateParams;C.eventCallback("onUpdate",function(){Y.update(0,0,1),Bt&&Bt.apply(C,Ut||[])})}if(Y.previous=function(){return $r[$r.indexOf(Y)-1]},Y.next=function(){return $r[$r.indexOf(Y)+1]},Y.revert=function(Pt,Wt){if(!Wt)return Y.kill(!0);var Jt=Pt!==!1||!Y.enabled,$t=Ns;Jt!==Y.isReverted&&(Jt&&(bt=Math.max(ae(),Y.scroll.rec||0),re=Y.progress,vt=i&&i.progress()),Te&&[Te,Pe,Ae,je].forEach(function(br){return br.style.display=Jt?"none":"block"}),Jt&&(Ns=Y,Y.update(Jt)),f&&(!T||!Y.isActive)&&(Jt?$F(f,$e,fe):wx(f,$e,ja(f),ge)),Jt||Y.update(Jt),Ns=$t,Y.isReverted=Jt)},Y.refresh=function(Pt,Wt,Jt,$t){if(!((Ns||!Y.enabled)&&!Wt)){if(f&&Pt&&Ba){cs(d,"scrollEnd",sR);return}!co&&Z&&Z(Y),Ns=Y,pe.tween&&!Jt&&(pe.tween.kill(),pe.tween=0),Ce&&Ce.pause(),y&&i&&i.revert({kill:!1}).invalidate(),Y.isReverted||Y.revert(!0,!0),Y._subPinOffset=!1;var br=ce(),cr=B(),en=C?C.duration():Bl(N,D),Pn=_e<=.01,an=0,un=$t||0,jr=$f(Jt)?Jt.end:r.end,Jn=r.endTrigger||c,Fe=$f(Jt)?Jt.start:r.start||(r.start===0||!c?0:f?"0 0":"0 100%"),Tt=Y.pinnedContainer=r.pinnedContainer&&Po(r.pinnedContainer,Y),Gt=c&&Math.max(0,$r.indexOf(Y))||0,At=Gt,mr,me,Qe,qe,Ze,Ne,St,jt,Ft,Ht,Qt,Kt,It;for(V&&$f(Jt)&&(Kt=hr.getProperty(Ae,D.p),It=hr.getProperty(je,D.p));At-- >0;)Ne=$r[At],Ne.end||Ne.refresh(0,1)||(Ns=Y),St=Ne.pin,St&&(St===c||St===f||St===Tt)&&!Ne.isReverted&&(Ht||(Ht=[]),Ht.unshift(Ne),Ne.revert(!0,!0)),Ne!==$r[At]&&(Gt--,At--);for(Hs(Fe)&&(Fe=Fe(Y)),Fe=W2(Fe,"start",Y),ve=eA(Fe,c,br,D,ae(),Te,Ae,Y,cr,q,X,en,C,Y._startClamp&&"_startClamp")||(f?-.001:0),Hs(jr)&&(jr=jr(Y)),$o(jr)&&!jr.indexOf("+=")&&(~jr.indexOf(" ")?jr=($o(Fe)?Fe.split(" ")[0]:"")+jr:(an=ev(jr.substr(2),br),jr=$o(Fe)?Fe:(C?hr.utils.mapRange(0,C.duration(),C.scrollTrigger.start,C.scrollTrigger.end,ve):ve)+an,Jn=c)),jr=W2(jr,"end",Y),ne=Math.max(ve,eA(jr||(Jn?"100% 0":en),Jn,br,D,ae()+an,Pe,je,Y,cr,q,X,en,C,Y._endClamp&&"_endClamp"))||-.001,an=0,At=Gt;At--;)Ne=$r[At],St=Ne.pin,St&&Ne.start-Ne._pinPush<=ve&&!C&&Ne.end>0&&(mr=Ne.end-(Y._startClamp?Math.max(0,Ne.start):Ne.start),(St===c&&Ne.start-Ne._pinPush<ve||St===Tt)&&isNaN(Fe)&&(an+=mr*(1-Ne.progress)),St===f&&(un+=mr));if(ve+=an,ne+=an,Y._startClamp&&(Y._startClamp+=an),Y._endClamp&&!co&&(Y._endClamp=ne||-.001,ne=Math.min(ne,Bl(N,D))),_e=ne-ve||(ve-=.01)&&.001,Pn&&(re=hr.utils.clamp(0,1,hr.utils.normalize(ve,ne,bt))),Y._pinPush=un,Te&&an&&(mr={},mr[D.a]="+="+an,Tt&&(mr[D.p]="-="+ae()),hr.set([Te,Pe],mr)),f&&!(Cb&&Y.end>=Bl(N,D)))mr=ja(f),qe=D===Ki,Qe=ae(),rt=parseFloat(ht(D.a))+un,!en&&ne>1&&(Qt=(W?Xn.scrollingElement||ta:N).style,Qt={style:Qt,value:Qt["overflow"+D.a.toUpperCase()]},W&&ja(Rn)["overflow"+D.a.toUpperCase()]!=="scroll"&&(Qt.style["overflow"+D.a.toUpperCase()]="scroll")),wx(f,$e,mr),Ke=N0(f),me=Lu(f,!0),jt=X&&Xc(N,qe?po:Ki)(),m?(ge=[m+D.os2,_e+un+Ji],ge.t=$e,At=m===Oi?t_(f,D)+_e+un:0,At&&(ge.push(D.d,At+Ji),$e.style.flexBasis!=="auto"&&($e.style.flexBasis=At+Ji)),fp(ge),Tt&&$r.forEach(function(Xt){Xt.pin===Tt&&Xt.vars.pinSpacing!==!1&&(Xt._subPinOffset=!0)}),X&&ae(bt)):(At=t_(f,D),At&&$e.style.flexBasis!=="auto"&&($e.style.flexBasis=At+Ji)),X&&(Ze={top:me.top+(qe?Qe-ve:jt)+Ji,left:me.left+(qe?jt:Qe-ve)+Ji,boxSizing:"border-box",position:"fixed"},Ze[_d]=Ze["max"+Ep]=Math.ceil(me.width)+Ji,Ze[xd]=Ze["max"+Zw]=Math.ceil(me.height)+Ji,Ze[Ia]=Ze[Ia+dg]=Ze[Ia+cg]=Ze[Ia+hg]=Ze[Ia+fg]="0",Ze[Oi]=mr[Oi],Ze[Oi+dg]=mr[Oi+dg],Ze[Oi+cg]=mr[Oi+cg],Ze[Oi+hg]=mr[Oi+hg],Ze[Oi+fg]=mr[Oi+fg],We=tN(fe,Ze,T),co&&ae(0)),i?(Ft=i._initted,yx(1),i.render(i.duration(),!0,!0),Ye=ht(D.a)-rt+_e+un,Se=Math.abs(_e-Ye)>1,X&&Se&&We.splice(We.length-2,2),i.render(0,!0,!0),Ft||i.invalidate(!0),i.parent||i.totalTime(i.totalTime()),yx(0)):Ye=_e,Qt&&(Qt.value?Qt.style["overflow"+D.a.toUpperCase()]=Qt.value:Qt.style.removeProperty("overflow-"+D.a));else if(c&&ae()&&!C)for(me=c.parentNode;me&&me!==Rn;)me._pinOffset&&(ve-=me._pinOffset,ne-=me._pinOffset),me=me.parentNode;Ht&&Ht.forEach(function(Xt){return Xt.revert(!1,!0)}),Y.start=ve,Y.end=ne,Me=xe=co?bt:ae(),!C&&!co&&(Me<bt&&ae(bt),Y.scroll.rec=0),Y.revert(!1,!0),K=Us(),ut&&(U=-1,ut.restart(!0)),Ns=0,i&&j&&(i._initted||vt)&&i.progress()!==vt&&i.progress(vt||0,!0).render(i.time(),!0,!0),(Pn||re!==Y.progress||C||y||i&&!i._initted)&&(i&&!j&&i.totalProgress(C&&ve<-.001&&!re?hr.utils.normalize(ve,ne,0):re,!0),Y.progress=Pn||(Me-ve)/_e===re?0:re),f&&m&&($e._pinOffset=Math.round(Y.progress*Ye)),Ce&&Ce.invalidate(),isNaN(Kt)||(Kt-=hr.getProperty(Ae,D.p),It-=hr.getProperty(je,D.p),U0(Ae,D,Kt),U0(Te,D,Kt-($t||0)),U0(je,D,It),U0(Pe,D,It-($t||0))),Pn&&!co&&Y.update(),h&&!co&&!Ge&&(Ge=!0,h(Y),Ge=!1)}},Y.getVelocity=function(){return(ae()-xe)/(Us()-Hm)*1e3||0},Y.endAnimation=function(){Lm(Y.callbackAnimation),i&&(Ce?Ce.progress(1):i.paused()?j||Lm(i,Y.direction<0,1):Lm(i,i.reversed()))},Y.labelToScroll=function(Pt){return i&&i.labels&&(ve||Y.refresh()||ve)+i.labels[Pt]/i.duration()*_e||0},Y.getTrailing=function(Pt){var Wt=$r.indexOf(Y),Jt=Y.direction>0?$r.slice(0,Wt).reverse():$r.slice(Wt+1);return($o(Pt)?Jt.filter(function($t){return $t.vars.preventOverlaps===Pt}):Jt).filter(function($t){return Y.direction>0?$t.end<=ve:$t.start>=ne})},Y.update=function(Pt,Wt,Jt){if(!(C&&!Jt&&!Pt)){var $t=co===!0?bt:Y.scroll(),br=Pt?0:($t-ve)/_e,cr=br<0?0:br>1?1:br||0,en=Y.progress,Pn,an,un,jr,Jn,Fe,Tt,Gt;if(Wt&&(xe=Me,Me=C?ae():$t,w&&(ot=ke,ke=i&&!j?i.totalProgress():cr)),v&&f&&!Ns&&!L0&&Ba&&(!cr&&ve<$t+($t-xe)/(Us()-Hm)*v?cr=1e-4:cr===1&&ne>$t+($t-xe)/(Us()-Hm)*v&&(cr=.9999)),cr!==en&&Y.enabled){if(Pn=Y.isActive=!!cr&&cr<1,an=!!en&&en<1,Fe=Pn!==an,Jn=Fe||!!cr!=!!en,Y.direction=cr>en?1:-1,Y.progress=cr,Jn&&!Ns&&(un=cr&&!en?0:cr===1?1:en===1?2:3,j&&(jr=!Fe&&ee[un+1]!=="none"&&ee[un+1]||ee[un],Gt=i&&(jr==="complete"||jr==="reset"||jr in i))),I&&(Fe||Gt)&&(Gt||p||!i)&&(Hs(I)?I(Y):Y.getTrailing(I).forEach(function(Qe){return Qe.endAnimation()})),j||(Ce&&!Ns&&!L0?(Ce._dp._time-Ce._start!==Ce._time&&Ce.render(Ce._dp._time-Ce._start),Ce.resetTo?Ce.resetTo("totalProgress",cr,i._tTime/i._tDur):(Ce.vars.totalProgress=cr,Ce.invalidate().restart())):i&&i.totalProgress(cr,!!(Ns&&(K||Pt)))),f){if(Pt&&m&&($e.style[m+D.os2]=de),!X)Be(Vm(rt+Ye*cr));else if(Jn){if(Tt=!Pt&&cr>en&&ne+1>$t&&$t+1>=Bl(N,D),T)if(!Pt&&(Pn||Tt)){var At=Lu(f,!0),mr=$t-ve;tA(f,Rn,At.top+(D===Ki?mr:0)+Ji,At.left+(D===Ki?0:mr)+Ji)}else tA(f,$e);fp(Pn||Tt?We:Ke),Se&&cr<1&&Pn||Be(rt+(cr===1&&!Tt?Ye:0))}}w&&!pe.tween&&!Ns&&!L0&&ut.restart(!0),a&&(Fe||b&&cr&&(cr<1||!vx))&&Dg(a.targets).forEach(function(Qe){return Qe.classList[Pn||b?"add":"remove"](a.className)}),s&&!j&&!Pt&&s(Y),Jn&&!Ns?(j&&(Gt&&(jr==="complete"?i.pause().totalProgress(1):jr==="reset"?i.restart(!0).pause():jr==="restart"?i.restart(!0):i[jr]()),s&&s(Y)),(Fe||!vx)&&(u&&Fe&&xx(Y,u),J[un]&&xx(Y,J[un]),b&&(cr===1?Y.kill(!1,1):J[un]=0),Fe||(un=cr===1?1:3,J[un]&&xx(Y,J[un]))),P&&!Pn&&Math.abs(Y.getVelocity())>(Wm(P)?P:2500)&&(Lm(Y.callbackAnimation),Ce?Ce.progress(1):Lm(i,jr==="reverse"?1:!cr,1))):j&&s&&!Ns&&s(Y)}if(De){var me=C?$t/C.duration()*(C._caScrollDist||0):$t;ue(me+(Ae._isFlipped?1:0)),De(me)}Rt&&Rt(-$t/C.duration()*(C._caScrollDist||0))}},Y.enable=function(Pt,Wt){Y.enabled||(Y.enabled=!0,cs(N,"resize",Xm),W||cs(N,"scroll",zh),Z&&cs(d,"refreshInit",Z),Pt!==!1&&(Y.progress=re=0,Me=xe=U=ae()),Wt!==!1&&Y.refresh())},Y.getTween=function(Pt){return Pt&&pe?pe.tween:Ce},Y.setPositions=function(Pt,Wt,Jt,$t){if(C){var br=C.scrollTrigger,cr=C.duration(),en=br.end-br.start;Pt=br.start+en*Pt/cr,Wt=br.start+en*Wt/cr}Y.refresh(!1,!1,{start:X2(Pt,Jt&&!!Y._startClamp),end:X2(Wt,Jt&&!!Y._endClamp)},$t),Y.update()},Y.adjustPinSpacing=function(Pt){if(ge&&Pt){var Wt=ge.indexOf(D.d)+1;ge[Wt]=parseFloat(ge[Wt])+Pt+Ji,ge[1]=parseFloat(ge[1])+Pt+Ji,fp(ge)}},Y.disable=function(Pt,Wt){if(Y.enabled&&(Pt!==!1&&Y.revert(!0,!0),Y.enabled=Y.isActive=!1,Wt||Ce&&Ce.pause(),bt=0,ye&&(ye.uncache=1),Z&&us(d,"refreshInit",Z),ut&&(ut.pause(),pe.tween&&pe.tween.kill()&&(pe.tween=0)),!W)){for(var Jt=$r.length;Jt--;)if($r[Jt].scroller===N&&$r[Jt]!==Y)return;us(N,"resize",Xm),W||us(N,"scroll",zh)}},Y.kill=function(Pt,Wt){Y.disable(Pt,Wt),Ce&&!Wt&&Ce.kill(),l&&delete Rb[l];var Jt=$r.indexOf(Y);Jt>=0&&$r.splice(Jt,1),Jt===uo&&rv>0&&uo--,Jt=0,$r.forEach(function($t){return $t.scroller===Y.scroller&&(Jt=1)}),Jt||co||(Y.scroll.rec=0),i&&(i.scrollTrigger=null,Pt&&i.revert({kill:!1}),Wt||i.kill()),Te&&[Te,Pe,Ae,je].forEach(function($t){return $t.parentNode&&$t.parentNode.removeChild($t)}),pg===Y&&(pg=0),f&&(ye&&(ye.uncache=1),Jt=0,$r.forEach(function($t){return $t.pin===f&&Jt++}),Jt||(ye.spacer=0)),r.onKill&&r.onKill(Y)},$r.push(Y),Y.enable(!1,!1),Dt&&Dt(Y),i&&i.add&&!_e){var Yt=Y.update;Y.update=function(){Y.update=Yt,on.cache++,ve||ne||Y.refresh()},hr.delayedCall(.01,Y.update),_e=.01,ve=ne=0}else Y.refresh();f&&ZF()},d.register=function(r){return Yh||(hr=r||$C(),ZC()&&window.document&&d.enable(),Yh=zm),Yh},d.defaults=function(r){if(r)for(var i in r)O0[i]=r[i];return O0},d.disable=function(r,i){zm=0,$r.forEach(function(s){return s[i?"kill":"disable"](r)}),us(sn,"wheel",zh),us(Xn,"scroll",zh),clearInterval(j0),us(Xn,"touchcancel",jl),us(Rn,"touchstart",jl),B0(us,Xn,"pointerdown,touchstart,mousedown",Y2),B0(us,Xn,"pointerup,touchend,mouseup",q2),$v.kill(),D0(us);for(var o=0;o<on.length;o+=3)k0(us,on[o],on[o+1]),k0(us,on[o],on[o+2])},d.enable=function(){if(sn=window,Xn=document,ta=Xn.documentElement,Rn=Xn.body,hr&&(Dg=hr.utils.toArray,ug=hr.utils.clamp,Tb=hr.core.context||jl,yx=hr.core.suppressOverwrites||jl,qw=sn.history.scrollRestoration||"auto",Pb=sn.pageYOffset||0,hr.core.globals("ScrollTrigger",d),Rn)){zm=1,cp=document.createElement("div"),cp.style.height="100vh",cp.style.position="absolute",lR(),WF(),Ci.register(hr),d.isTouch=Ci.isTouch,Pc=Ci.isTouch&&/(iPad|iPhone|iPod|Mac)/g.test(navigator.userAgent),Eb=Ci.isTouch===1,cs(sn,"wheel",zh),Yw=[sn,Xn,ta,Rn],hr.matchMedia?(d.matchMedia=function(u){var h=hr.matchMedia(),p;for(p in u)h.add(p,u[p]);return h},hr.addEventListener("matchMediaInit",function(){return eS()}),hr.addEventListener("matchMediaRevert",function(){return oR()}),hr.addEventListener("matchMedia",function(){ad(0,1),Dd("matchMedia")}),hr.matchMedia().add("(orientation: portrait)",function(){return bx(),bx})):console.warn("Requires GSAP 3.11.0 or later"),bx(),cs(Xn,"scroll",zh);var r=Rn.hasAttribute("style"),i=Rn.style,o=i.borderTopStyle,s=hr.core.Animation.prototype,a,l;for(s.revert||Object.defineProperty(s,"revert",{value:function(){return this.time(-.01,!0)}}),i.borderTopStyle="solid",a=Lu(Rn),Ki.m=Math.round(a.top+Ki.sc())||0,po.m=Math.round(a.left+po.sc())||0,o?i.borderTopStyle=o:i.removeProperty("border-top-style"),r||(Rn.setAttribute("style",""),Rn.removeAttribute("style")),j0=setInterval(Q2,250),hr.delayedCall(.5,function(){return L0=0}),cs(Xn,"touchcancel",jl),cs(Rn,"touchstart",jl),B0(cs,Xn,"pointerdown,touchstart,mousedown",Y2),B0(cs,Xn,"pointerup,touchend,mouseup",q2),Ab=hr.utils.checkPrefix("transform"),nv.push(Ab),Yh=Us(),$v=hr.delayedCall(.2,ad).pause(),qh=[Xn,"visibilitychange",function(){var u=sn.innerWidth,h=sn.innerHeight;Xn.hidden?(z2=u,V2=h):(z2!==u||V2!==h)&&Xm()},Xn,"DOMContentLoaded",ad,sn,"load",ad,sn,"resize",Xm],D0(cs),$r.forEach(function(u){return u.enable(0,1)}),l=0;l<on.length;l+=3)k0(us,on[l],on[l+1]),k0(us,on[l],on[l+2])}},d.config=function(r){"limitCallbacks"in r&&(vx=!!r.limitCallbacks);var i=r.syncInterval;i&&clearInterval(j0)||(j0=i)&&setInterval(Q2,i),"ignoreMobileResize"in r&&(Eb=d.isTouch===1&&r.ignoreMobileResize),"autoRefreshEvents"in r&&(D0(us)||D0(cs,r.autoRefreshEvents||"none"),JC=(r.autoRefreshEvents+"").indexOf("resize")===-1)},d.scrollerProxy=function(r,i){var o=Po(r),s=on.indexOf(o),a=jd(o);~s&&on.splice(s,a?6:2),i&&(a?Gl.unshift(sn,i,Rn,i,ta,i):Gl.unshift(o,i))},d.clearMatchMedia=function(r){$r.forEach(function(i){return i._ctx&&i._ctx.query===r&&i._ctx.kill(!0,!0)})},d.isInViewport=function(r,i,o){var s=($o(r)?Po(r):r).getBoundingClientRect(),a=s[o?_d:xd]*i||0;return o?s.right-a>0&&s.left+a<sn.innerWidth:s.bottom-a>0&&s.top+a<sn.innerHeight},d.positionInViewport=function(r,i,o){$o(r)&&(r=Po(r));var s=r.getBoundingClientRect(),a=s[o?_d:xd],l=i==null?a/2:i in r_?r_[i]*a:~i.indexOf("%")?parseFloat(i)*a/100:parseFloat(i)||0;return o?(s.left+l)/sn.innerWidth:(s.top+l)/sn.innerHeight},d.killAll=function(r){if($r.slice(0).forEach(function(o){return o.vars.id!=="ScrollSmoother"&&o.kill()}),r!==!0){var i=Ld.killAll||[];Ld={},i.forEach(function(o){return o()})}},d}();qr.version="3.12.7";qr.saveStyles=function(d){return d?Dg(d).forEach(function(t){if(t&&t.style){var n=Zo.indexOf(t);n>=0&&Zo.splice(n,5),Zo.push(t,t.style.cssText,t.getBBox&&t.getAttribute("transform"),hr.core.getCache(t),Tb())}}):Zo};qr.revert=function(d,t){return eS(!d,t)};qr.create=function(d,t){return new qr(d,t)};qr.refresh=function(d){return d?Xm(!0):(Yh||qr.register())&&ad(!0)};qr.update=function(d){return++on.cache&&Uu(d===!0?2:0)};qr.clearScrollMemory=aR;qr.maxScroll=function(d,t){return Bl(d,t?po:Ki)};qr.getScrollFunc=function(d,t){return Xc(Po(d),t?po:Ki)};qr.getById=function(d){return Rb[d]};qr.getAll=function(){return $r.filter(function(d){return d.vars.id!=="ScrollSmoother"})};qr.isScrolling=function(){return!!Ba};qr.snapDirectional=$w;qr.addEventListener=function(d,t){var n=Ld[d]||(Ld[d]=[]);~n.indexOf(t)||n.push(t)};qr.removeEventListener=function(d,t){var n=Ld[d],r=n&&n.indexOf(t);r>=0&&n.splice(r,1)};qr.batch=function(d,t){var n=[],r={},i=t.interval||.016,o=t.batchMax||1e9,s=function(u,h){var p=[],c=[],f=hr.delayedCall(i,function(){h(p,c),p=[],c=[]}).pause();return function(m){p.length||f.restart(!0),p.push(m.trigger),c.push(m),o<=p.length&&f.progress(1)}},a;for(a in t)r[a]=a.substr(0,2)==="on"&&Hs(t[a])&&a!=="onRefreshInit"?s(a,t[a]):t[a];return Hs(o)&&(o=o(),cs(qr,"refresh",function(){return o=t.batchMax()})),Dg(d).forEach(function(l){var u={};for(a in r)u[a]=r[a];u.trigger=l,n.push(qr.create(u))}),n};var nA=function(t,n,r,i){return n>i?t(i):n<0&&t(0),r>i?(i-n)/(r-n):r<0?n/(n-r):1},Sx=function d(t,n){n===!0?t.style.removeProperty("touch-action"):t.style.touchAction=n===!0?"auto":n?"pan-"+n+(Ci.isTouch?" pinch-zoom":""):"none",t===ta&&d(Rn,n)},G0={auto:1,scroll:1},nN=function(t){var n=t.event,r=t.target,i=t.axis,o=(n.changedTouches?n.changedTouches[0]:n).target,s=o._gsap||hr.core.getCache(o),a=Us(),l;if(!s._isScrollT||a-s._isScrollT>2e3){for(;o&&o!==Rn&&(o.scrollHeight<=o.clientHeight&&o.scrollWidth<=o.clientWidth||!(G0[(l=ja(o)).overflowY]||G0[l.overflowX]));)o=o.parentNode;s._isScroll=o&&o!==r&&!jd(o)&&(G0[(l=ja(o)).overflowY]||G0[l.overflowX]),s._isScrollT=a}(s._isScroll||i==="x")&&(n.stopPropagation(),n._gsapAllow=!0)},cR=function(t,n,r,i){return Ci.create({target:t,capture:!0,debounce:!1,lockAxis:!0,type:n,onWheel:i=i&&nN,onPress:i,onDrag:i,onScroll:i,onEnable:function(){return r&&cs(Xn,Ci.eventTypes[0],sA,!1,!0)},onDisable:function(){return us(Xn,Ci.eventTypes[0],sA,!0)}})},iN=/(input|label|select|textarea)/i,iA,sA=function(t){var n=iN.test(t.target.tagName);(n||iA)&&(t._gsapAllow=!0,iA=n)},sN=function(t){$f(t)||(t={}),t.preventDefault=t.isNormalizer=t.allowClicks=!0,t.type||(t.type="wheel,touch"),t.debounce=!!t.debounce,t.id=t.id||"normalizer";var n=t,r=n.normalizeScrollX,i=n.momentum,o=n.allowNestedScroll,s=n.onRelease,a,l,u=Po(t.target)||ta,h=hr.core.globals().ScrollSmoother,p=h&&h.get(),c=Pc&&(t.content&&Po(t.content)||p&&t.content!==!1&&!p.smooth()&&p.content()),f=Xc(u,Ki),m=Xc(u,po),y=1,v=(Ci.isTouch&&sn.visualViewport?sn.visualViewport.scale*sn.visualViewport.width:sn.outerWidth)/sn.innerWidth,g=0,x=Hs(i)?function(){return i(a)}:function(){return i||2.8},b,w,T=cR(u,t.type,!0,o),R=function(){return w=!1},C=jl,P=jl,I=function(){l=Bl(u,Ki),P=ug(Pc?1:0,l),r&&(C=ug(0,Bl(u,po))),b=bd},D=function(){c._gsap.y=Vm(parseFloat(c._gsap.y)+f.offset)+"px",c.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+parseFloat(c._gsap.y)+", 0, 1)",f.offset=f.cacheID=0},j=function(){if(w){requestAnimationFrame(R);var V=Vm(a.deltaY/2),q=P(f.v-V);if(c&&q!==f.v+f.offset){f.offset=q-f.v;var Y=Vm((parseFloat(c&&c._gsap.y)||0)-f.offset);c.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+Y+", 0, 1)",c._gsap.y=Y+"px",f.cacheID=on.cache,Uu()}return!0}f.offset&&D(),w=!0},N,O,W,X,J=function(){I(),N.isActive()&&N.vars.scrollY>l&&(f()>l?N.progress(1)&&f(l):N.resetTo("scrollY",l))};return c&&hr.set(c,{y:"+=0"}),t.ignoreCheck=function(ee){return Pc&&ee.type==="touchmove"&&j()||y>1.05&&ee.type!=="touchstart"||a.isGesturing||ee.touches&&ee.touches.length>1},t.onPress=function(){w=!1;var ee=y;y=Vm((sn.visualViewport&&sn.visualViewport.scale||1)/v),N.pause(),ee!==y&&Sx(u,y>1.01?!0:r?!1:"x"),O=m(),W=f(),I(),b=bd},t.onRelease=t.onGestureStart=function(ee,V){if(f.offset&&D(),!V)X.restart(!0);else{on.cache++;var q=x(),Y,Z;r&&(Y=m(),Z=Y+q*.05*-ee.velocityX/.227,q*=nA(m,Y,Z,Bl(u,po)),N.vars.scrollX=C(Z)),Y=f(),Z=Y+q*.05*-ee.velocityY/.227,q*=nA(f,Y,Z,Bl(u,Ki)),N.vars.scrollY=P(Z),N.invalidate().duration(q).play(.01),(Pc&&N.vars.scrollY>=l||Y>=l-1)&&hr.to({},{onUpdate:J,duration:q})}s&&s(ee)},t.onWheel=function(){N._ts&&N.pause(),Us()-g>1e3&&(b=0,g=Us())},t.onChange=function(ee,V,q,Y,Z){if(bd!==b&&I(),V&&r&&m(C(Y[2]===V?O+(ee.startX-ee.x):m()+V-Y[1])),q){f.offset&&D();var ce=Z[2]===q,B=ce?W+ee.startY-ee.y:f()+q-Z[1],U=P(B);ce&&B!==U&&(W+=U-B),f(U)}(q||V)&&Uu()},t.onEnable=function(){Sx(u,r?!1:"x"),qr.addEventListener("refresh",J),cs(sn,"resize",J),f.smooth&&(f.target.style.scrollBehavior="auto",f.smooth=m.smooth=!1),T.enable()},t.onDisable=function(){Sx(u,!0),us(sn,"resize",J),qr.removeEventListener("refresh",J),T.kill()},t.lockAxis=t.lockAxis!==!1,a=new Ci(t),a.iOS=Pc,Pc&&!f()&&f(1),Pc&&hr.ticker.add(jl),X=a._dc,N=hr.to(a,{ease:"power4",paused:!0,inherit:!1,scrollX:r?"+=0.1":"+=0",scrollY:"+=0.1",modifiers:{scrollY:uR(f,f(),function(){return N.pause()})},onUpdate:Uu,onComplete:X.vars.onComplete}),a};qr.sort=function(d){if(Hs(d))return $r.sort(d);var t=sn.pageYOffset||0;return qr.getAll().forEach(function(n){return n._sortY=n.trigger?t+n.trigger.getBoundingClientRect().top:n.start+sn.innerHeight}),$r.sort(d||function(n,r){return(n.vars.refreshPriority||0)*-1e6+(n.vars.containerAnimation?1e6:n._sortY)-((r.vars.containerAnimation?1e6:r._sortY)+(r.vars.refreshPriority||0)*-1e6)})};qr.observe=function(d){return new Ci(d)};qr.normalizeScroll=function(d){if(typeof d>"u")return lo;if(d===!0&&lo)return lo.enable();if(d===!1){lo&&lo.kill(),lo=d;return}var t=d instanceof Ci?d:sN(d);return lo&&lo.target===t.target&&lo.kill(),jd(t.target)&&(lo=t),t};qr.core={_getVelocityProp:Mb,_inputObserver:cR,_scrollers:on,_proxies:Gl,bridge:{ss:function(){Ba||Dd("scrollStart"),Ba=Us()},ref:function(){return Ns}}};$C()&&hr.registerPlugin(qr);ml.registerPlugin(Ud,qr);function oN({text:d,speed:t=.1}){const[n,r]=Ot.useState(!0),i=Ot.useRef();return Ot.useEffect(()=>{const o=document.getElementsByClassName("spriteLayer")[0],s=new MutationObserver(()=>{o&&o.style.display==="none"&&r(!1)});return s.observe(o,{attributes:!0,attributeFilter:["style"]}),()=>{s.disconnect()}},[]),Ot.useEffect(()=>{if(!n){const o=ml.timeline({onComplete:()=>{setTimeout(()=>{i.current.style.animationPlayState="paused",i.current.style.borderRight="none"},2e3)},scrollTrigger:{trigger:i.current,onEnter:()=>{i.current.innerHTML="",i.current.style.animationPlayState="running",i.current.style.borderRight="1ch solid var(--font-color)",o.restart()}}});for(let s=0;s<d.length;s++){const a=document.createElement("span");d[s]===" "?a.innerHTML="&nbsp;":a.textContent=d[s],o.to(i.current,{duration:t,onStart:()=>{i.current.appendChild(a)}})}}},[n,d,t]),Zt.jsx("div",{className:"typewriter-container",ref:i})}function aN(){const d=Ot.useRef(null);return Ot.useEffect(()=>{const t=d.current,n=t.getContext("2d");function r(){t.width=window.innerWidth,t.height=window.innerHeight,i()}function i(){const s=n.createImageData(t.width,t.height),a=s.data;for(let l=0;l<a.length;l+=4){const u=Math.random()*255;a[l]=u,a[l+1]=u,a[l+2]=u,a[l+3]=20}n.putImageData(s,0,0)}r();const o=setInterval(i,200);return window.addEventListener("resize",r),()=>{clearInterval(o),window.removeEventListener("resize",r)}},[]),Zt.jsx("canvas",{ref:d,className:"absolute inset-0 w-full h-full pointer-events-none z-0"})}ml.registerPlugin(Ud,qr);function lN({isLoaded:d}){const t=Ot.useRef(),n=Ot.useRef(),r=Ot.useRef(),i=Ot.useRef(),o=Ot.useRef();let s=!1;Ot.useEffect(()=>{const u=(p,c=.5)=>({onStart:()=>{p.current.style.opacity=1},onComplete:()=>{p.current.style.opacity=0},duration:c}),h=ml.timeline({repeat:-1,onRepeat:()=>{if(s){h.kill();const p=ml.timeline({onComplete:()=>{p.kill()}}).to(t.current,u(t,.5)).to(n.current,u(n,.15)).to(t.current,u(t,.15)).to(n.current,u(n,.5)).to(r.current,{onStart:()=>{r.current.style.opacity=1,i.current.style.opacity=0,o.current.style.opacity=100}})}}}).to(t.current,u(t)).to(n.current,u(n))},[]);const a=()=>{s=!0},l=()=>{new Audio("animal-crossing.mp3").play(),document.getElementsByClassName("spriteLayer")[0].style.display="none",document.getElementsByClassName("r3fLayer")[0].style.opacity=100};return Ot.useEffect(()=>{a()},[d]),Zt.jsxs("div",{className:"h-screen flex items-center justify-center relative",children:[Zt.jsx("div",{className:"absolute",ref:i,children:"loading tamagotchi ..."}),Zt.jsx("div",{className:"absolute opacity-0 top-0 left-0 h-screen w-screen flex items-center justify-center cursor-pointer",ref:o,onClick:l,children:Zt.jsx("div",{className:"text-center",children:"click to enter with music"})}),Zt.jsx("img",{src:"sprite/birth/1.png",className:"birth1 birth",ref:t}),Zt.jsx("img",{src:"sprite/birth/2.png",className:"birth2 birth",ref:n}),Zt.jsx("img",{src:"sprite/birth/3.png",className:"birth3 birth opacity-0",ref:r})]})}ml.registerPlugin(Ud,qr);ml.registerPlugin(Ud,qr);ml.registerPlugin(qr);var Mx={exports:{}},Tc={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oA;function uN(){return oA||(oA=1,Tc.ConcurrentRoot=1,Tc.ContinuousEventPriority=4,Tc.DefaultEventPriority=16,Tc.DiscreteEventPriority=1,Tc.IdleEventPriority=536870912,Tc.LegacyRoot=0),Tc}var aA;function cN(){return aA||(aA=1,Mx.exports=uN()),Mx.exports}var Ym=cN();function fN(d){let t;const n=new Set,r=(u,h)=>{const p=typeof u=="function"?u(t):u;if(p!==t){const c=t;t=h?p:Object.assign({},t,p),n.forEach(f=>f(t,c))}},i=()=>t,o=(u,h=i,p=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let c=h(t);function f(){const m=h(t);if(!p(c,m)){const y=c;u(c=m,y)}}return n.add(f),()=>n.delete(f)},l={setState:r,getState:i,subscribe:(u,h,p)=>h||p?o(u,h,p):(n.add(u),()=>n.delete(u)),destroy:()=>n.clear()};return t=d(r,i,l),l}const dN=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),lA=dN?Ot.useEffect:Ot.useLayoutEffect;function hN(d){const t=typeof d=="function"?fN(d):d,n=(r=t.getState,i=Object.is)=>{const[,o]=Ot.useReducer(v=>v+1,0),s=t.getState(),a=Ot.useRef(s),l=Ot.useRef(r),u=Ot.useRef(i),h=Ot.useRef(!1),p=Ot.useRef();p.current===void 0&&(p.current=r(s));let c,f=!1;(a.current!==s||l.current!==r||u.current!==i||h.current)&&(c=r(s),f=!i(p.current,c)),lA(()=>{f&&(p.current=c),a.current=s,l.current=r,u.current=i,h.current=!1});const m=Ot.useRef(s);lA(()=>{const v=()=>{try{const x=t.getState(),b=l.current(x);u.current(p.current,b)||(a.current=x,p.current=b,o())}catch{h.current=!0,o()}},g=t.subscribe(v);return t.getState()!==m.current&&v(),g},[]);const y=f?c:p.current;return Ot.useDebugValue(y),y};return Object.assign(n,t),n[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const r=[n,t];return{next(){const i=r.length<=0;return{value:r.shift(),done:i}}}},n}const pN=d=>typeof d=="object"&&typeof d.then=="function",ld=[];function fR(d,t,n=(r,i)=>r===i){if(d===t)return!0;if(!d||!t)return!1;const r=d.length;if(t.length!==r)return!1;for(let i=0;i<r;i++)if(!n(d[i],t[i]))return!1;return!0}function dR(d,t=null,n=!1,r={}){t===null&&(t=[d]);for(const o of ld)if(fR(t,o.keys,o.equal)){if(n)return;if(Object.prototype.hasOwnProperty.call(o,"error"))throw o.error;if(Object.prototype.hasOwnProperty.call(o,"response"))return r.lifespan&&r.lifespan>0&&(o.timeout&&clearTimeout(o.timeout),o.timeout=setTimeout(o.remove,r.lifespan)),o.response;if(!n)throw o.promise}const i={keys:t,equal:r.equal,remove:()=>{const o=ld.indexOf(i);o!==-1&&ld.splice(o,1)},promise:(pN(d)?d:d(...t)).then(o=>{i.response=o,r.lifespan&&r.lifespan>0&&(i.timeout=setTimeout(i.remove,r.lifespan))}).catch(o=>i.error=o)};if(ld.push(i),!n)throw i.promise}const mN=(d,t,n)=>dR(d,t,!1,n),gN=(d,t,n)=>void dR(d,t,!0,n),yN=d=>{if(d===void 0||d.length===0)ld.splice(0,ld.length);else{const t=ld.find(n=>fR(d,n.keys,n.equal));t&&t.remove()}};var Ax={exports:{}},Ex={exports:{}},Tx={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uA;function vN(){return uA||(uA=1,function(d){function t(V,q){var Y=V.length;V.push(q);e:for(;0<Y;){var Z=Y-1>>>1,ce=V[Z];if(0<i(ce,q))V[Z]=q,V[Y]=ce,Y=Z;else break e}}function n(V){return V.length===0?null:V[0]}function r(V){if(V.length===0)return null;var q=V[0],Y=V.pop();if(Y!==q){V[0]=Y;e:for(var Z=0,ce=V.length,B=ce>>>1;Z<B;){var U=2*(Z+1)-1,K=V[U],re=U+1,ae=V[re];if(0>i(K,Y))re<ce&&0>i(ae,K)?(V[Z]=ae,V[re]=Y,Z=re):(V[Z]=K,V[U]=Y,Z=U);else if(re<ce&&0>i(ae,Y))V[Z]=ae,V[re]=Y,Z=re;else break e}}return q}function i(V,q){var Y=V.sortIndex-q.sortIndex;return Y!==0?Y:V.id-q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;d.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();d.unstable_now=function(){return s.now()-a}}var l=[],u=[],h=1,p=null,c=3,f=!1,m=!1,y=!1,v=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(V){for(var q=n(u);q!==null;){if(q.callback===null)r(u);else if(q.startTime<=V)r(u),q.sortIndex=q.expirationTime,t(l,q);else break;q=n(u)}}function w(V){if(y=!1,b(V),!m)if(n(l)!==null)m=!0,J(T);else{var q=n(u);q!==null&&ee(w,q.startTime-V)}}function T(V,q){m=!1,y&&(y=!1,g(P),P=-1),f=!0;var Y=c;try{for(b(q),p=n(l);p!==null&&(!(p.expirationTime>q)||V&&!j());){var Z=p.callback;if(typeof Z=="function"){p.callback=null,c=p.priorityLevel;var ce=Z(p.expirationTime<=q);q=d.unstable_now(),typeof ce=="function"?p.callback=ce:p===n(l)&&r(l),b(q)}else r(l);p=n(l)}if(p!==null)var B=!0;else{var U=n(u);U!==null&&ee(w,U.startTime-q),B=!1}return B}finally{p=null,c=Y,f=!1}}var R=!1,C=null,P=-1,I=5,D=-1;function j(){return!(d.unstable_now()-D<I)}function N(){if(C!==null){var V=d.unstable_now();D=V;var q=!0;try{q=C(!0,V)}finally{q?O():(R=!1,C=null)}}else R=!1}var O;if(typeof x=="function")O=function(){x(N)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,X=W.port2;W.port1.onmessage=N,O=function(){X.postMessage(null)}}else O=function(){v(N,0)};function J(V){C=V,R||(R=!0,O())}function ee(V,q){P=v(function(){V(d.unstable_now())},q)}d.unstable_IdlePriority=5,d.unstable_ImmediatePriority=1,d.unstable_LowPriority=4,d.unstable_NormalPriority=3,d.unstable_Profiling=null,d.unstable_UserBlockingPriority=2,d.unstable_cancelCallback=function(V){V.callback=null},d.unstable_continueExecution=function(){m||f||(m=!0,J(T))},d.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<V?Math.floor(1e3/V):5},d.unstable_getCurrentPriorityLevel=function(){return c},d.unstable_getFirstCallbackNode=function(){return n(l)},d.unstable_next=function(V){switch(c){case 1:case 2:case 3:var q=3;break;default:q=c}var Y=c;c=q;try{return V()}finally{c=Y}},d.unstable_pauseExecution=function(){},d.unstable_requestPaint=function(){},d.unstable_runWithPriority=function(V,q){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var Y=c;c=V;try{return q()}finally{c=Y}},d.unstable_scheduleCallback=function(V,q,Y){var Z=d.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?Z+Y:Z):Y=Z,V){case 1:var ce=-1;break;case 2:ce=250;break;case 5:ce=1073741823;break;case 4:ce=1e4;break;default:ce=5e3}return ce=Y+ce,V={id:h++,callback:q,priorityLevel:V,startTime:Y,expirationTime:ce,sortIndex:-1},Y>Z?(V.sortIndex=Y,t(u,V),n(l)===null&&V===n(u)&&(y?(g(P),P=-1):y=!0,ee(w,Y-Z))):(V.sortIndex=ce,t(l,V),m||f||(m=!0,J(T))),V},d.unstable_shouldYield=j,d.unstable_wrapCallback=function(V){var q=c;return function(){var Y=c;c=q;try{return V.apply(this,arguments)}finally{c=Y}}}}(Tx)),Tx}var cA;function _N(){return cA||(cA=1,Ex.exports=vN()),Ex.exports}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cx,fA;function xN(){return fA||(fA=1,Cx=function(t){var n={},r=s_(),i=_N(),o=Object.assign;function s(M){for(var A="https://reactjs.org/docs/error-decoder.html?invariant="+M,G=1;G<arguments.length;G++)A+="&args[]="+encodeURIComponent(arguments[G]);return"Minified React error #"+M+"; visit "+A+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),u=Symbol.for("react.portal"),h=Symbol.for("react.fragment"),p=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),f=Symbol.for("react.provider"),m=Symbol.for("react.context"),y=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),g=Symbol.for("react.suspense_list"),x=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),w=Symbol.for("react.offscreen"),T=Symbol.iterator;function R(M){return M===null||typeof M!="object"?null:(M=T&&M[T]||M["@@iterator"],typeof M=="function"?M:null)}function C(M){if(M==null)return null;if(typeof M=="function")return M.displayName||M.name||null;if(typeof M=="string")return M;switch(M){case h:return"Fragment";case u:return"Portal";case c:return"Profiler";case p:return"StrictMode";case v:return"Suspense";case g:return"SuspenseList"}if(typeof M=="object")switch(M.$$typeof){case m:return(M.displayName||"Context")+".Consumer";case f:return(M._context.displayName||"Context")+".Provider";case y:var A=M.render;return M=M.displayName,M||(M=A.displayName||A.name||"",M=M!==""?"ForwardRef("+M+")":"ForwardRef"),M;case x:return A=M.displayName||null,A!==null?A:C(M.type)||"Memo";case b:A=M._payload,M=M._init;try{return C(M(A))}catch{}}return null}function P(M){var A=M.type;switch(M.tag){case 24:return"Cache";case 9:return(A.displayName||"Context")+".Consumer";case 10:return(A._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return M=A.render,M=M.displayName||M.name||"",A.displayName||(M!==""?"ForwardRef("+M+")":"ForwardRef");case 7:return"Fragment";case 5:return A;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return C(A);case 8:return A===p?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof A=="function")return A.displayName||A.name||null;if(typeof A=="string")return A}return null}function I(M){var A=M,G=M;if(M.alternate)for(;A.return;)A=A.return;else{M=A;do A=M,A.flags&4098&&(G=A.return),M=A.return;while(M)}return A.tag===3?G:null}function D(M){if(I(M)!==M)throw Error(s(188))}function j(M){var A=M.alternate;if(!A){if(A=I(M),A===null)throw Error(s(188));return A!==M?null:M}for(var G=M,Q=A;;){var ie=G.return;if(ie===null)break;var he=ie.alternate;if(he===null){if(Q=ie.return,Q!==null){G=Q;continue}break}if(ie.child===he.child){for(he=ie.child;he;){if(he===G)return D(ie),M;if(he===Q)return D(ie),A;he=he.sibling}throw Error(s(188))}if(G.return!==Q.return)G=ie,Q=he;else{for(var ze=!1,lt=ie.child;lt;){if(lt===G){ze=!0,G=ie,Q=he;break}if(lt===Q){ze=!0,Q=ie,G=he;break}lt=lt.sibling}if(!ze){for(lt=he.child;lt;){if(lt===G){ze=!0,G=he,Q=ie;break}if(lt===Q){ze=!0,Q=he,G=ie;break}lt=lt.sibling}if(!ze)throw Error(s(189))}}if(G.alternate!==Q)throw Error(s(190))}if(G.tag!==3)throw Error(s(188));return G.stateNode.current===G?M:A}function N(M){return M=j(M),M!==null?O(M):null}function O(M){if(M.tag===5||M.tag===6)return M;for(M=M.child;M!==null;){var A=O(M);if(A!==null)return A;M=M.sibling}return null}function W(M){if(M.tag===5||M.tag===6)return M;for(M=M.child;M!==null;){if(M.tag!==4){var A=W(M);if(A!==null)return A}M=M.sibling}return null}var X=Array.isArray,J=t.getPublicInstance,ee=t.getRootHostContext,V=t.getChildHostContext,q=t.prepareForCommit,Y=t.resetAfterCommit,Z=t.createInstance,ce=t.appendInitialChild,B=t.finalizeInitialChildren,U=t.prepareUpdate,K=t.shouldSetTextContent,re=t.createTextInstance,ae=t.scheduleTimeout,pe=t.cancelTimeout,ye=t.noTimeout,Re=t.isPrimaryRenderer,Me=t.supportsMutation,xe=t.supportsPersistence,ve=t.supportsHydration,ne=t.getInstanceFromNode,Te=t.preparePortalMount,Pe=t.getCurrentEventPriority,Ae=t.detachDeletedInstance,je=t.supportsMicrotasks,Ue=t.scheduleMicrotask,Ge=t.supportsTestSelectors,_e=t.findFiberRoot,fe=t.getBoundingRect,We=t.getTextContent,Ke=t.isHiddenSubtree,$e=t.matchAccessibilityRole,et=t.setFocusIfFocusable,ht=t.setupIntersectionObserver,Be=t.appendChild,rt=t.appendChildToContainer,Ye=t.commitTextUpdate,de=t.commitMount,ge=t.commitUpdate,ue=t.insertBefore,Se=t.insertInContainerBefore,De=t.removeChild,be=t.removeChildFromContainer,ke=t.resetTextContent,ot=t.hideInstance,Ce=t.hideTextInstance,it=t.unhideInstance,Xe=t.unhideTextInstance,ut=t.clearContainer,bt=t.cloneInstance,vt=t.createContainerChildSet,Rt=t.appendChildToContainerChildSet,Dt=t.finalizeContainerChildren,yr=t.replaceContainerChildren,Bt=t.cloneHiddenInstance,Ut=t.cloneHiddenTextInstance,Yt=t.canHydrateInstance,Pt=t.canHydrateTextInstance,Wt=t.canHydrateSuspenseInstance,Jt=t.isSuspenseInstancePending,$t=t.isSuspenseInstanceFallback,br=t.registerSuspenseInstanceRetry,cr=t.getNextHydratableSibling,en=t.getFirstHydratableChild,Pn=t.getFirstHydratableChildWithinContainer,an=t.getFirstHydratableChildWithinSuspenseInstance,un=t.hydrateInstance,jr=t.hydrateTextInstance,Jn=t.hydrateSuspenseInstance,Fe=t.getNextHydratableInstanceAfterSuspenseInstance,Tt=t.commitHydratedContainer,Gt=t.commitHydratedSuspenseInstance,At=t.clearSuspenseBoundary,mr=t.clearSuspenseBoundaryFromContainer,me=t.shouldDeleteUnhydratedTailInstances,Qe=t.didNotMatchHydratedContainerTextInstance,qe=t.didNotMatchHydratedTextInstance,Ze;function Ne(M){if(Ze===void 0)try{throw Error()}catch(G){var A=G.stack.trim().match(/\n( *(at )?)/);Ze=A&&A[1]||""}return`
`+Ze+M}var St=!1;function jt(M,A){if(!M||St)return"";St=!0;var G=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(A)if(A=function(){throw Error()},Object.defineProperty(A.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(A,[])}catch(zt){var Q=zt}Reflect.construct(M,[],A)}else{try{A.call()}catch(zt){Q=zt}M.call(A.prototype)}else{try{throw Error()}catch(zt){Q=zt}M()}}catch(zt){if(zt&&Q&&typeof zt.stack=="string"){for(var ie=zt.stack.split(`
`),he=Q.stack.split(`
`),ze=ie.length-1,lt=he.length-1;1<=ze&&0<=lt&&ie[ze]!==he[lt];)lt--;for(;1<=ze&&0<=lt;ze--,lt--)if(ie[ze]!==he[lt]){if(ze!==1||lt!==1)do if(ze--,lt--,0>lt||ie[ze]!==he[lt]){var Mt=`
`+ie[ze].replace(" at new "," at ");return M.displayName&&Mt.includes("<anonymous>")&&(Mt=Mt.replace("<anonymous>",M.displayName)),Mt}while(1<=ze&&0<=lt);break}}}finally{St=!1,Error.prepareStackTrace=G}return(M=M?M.displayName||M.name:"")?Ne(M):""}var Ft=Object.prototype.hasOwnProperty,Ht=[],Qt=-1;function Kt(M){return{current:M}}function It(M){0>Qt||(M.current=Ht[Qt],Ht[Qt]=null,Qt--)}function Xt(M,A){Qt++,Ht[Qt]=M.current,M.current=A}var Sr={},Rr=Kt(Sr),Lr=Kt(!1),Pr=Sr;function fr(M,A){var G=M.type.contextTypes;if(!G)return Sr;var Q=M.stateNode;if(Q&&Q.__reactInternalMemoizedUnmaskedChildContext===A)return Q.__reactInternalMemoizedMaskedChildContext;var ie={},he;for(he in G)ie[he]=A[he];return Q&&(M=M.stateNode,M.__reactInternalMemoizedUnmaskedChildContext=A,M.__reactInternalMemoizedMaskedChildContext=ie),ie}function Zr(M){return M=M.childContextTypes,M!=null}function Or(){It(Lr),It(Rr)}function ti(M,A,G){if(Rr.current!==Sr)throw Error(s(168));Xt(Rr,A),Xt(Lr,G)}function go(M,A,G){var Q=M.stateNode;if(A=A.childContextTypes,typeof Q.getChildContext!="function")return G;Q=Q.getChildContext();for(var ie in Q)if(!(ie in A))throw Error(s(108,P(M)||"Unknown",ie));return o({},G,Q)}function ri(M){return M=(M=M.stateNode)&&M.__reactInternalMemoizedMergedChildContext||Sr,Pr=Rr.current,Xt(Rr,M),Xt(Lr,Lr.current),!0}function Js(M,A,G){var Q=M.stateNode;if(!Q)throw Error(s(169));G?(M=go(M,A,Pr),Q.__reactInternalMemoizedMergedChildContext=M,It(Lr),It(Rr),Xt(Rr,M)):It(Lr),Xt(Lr,G)}var Jr=Math.clz32?Math.clz32:di,fi=Math.log,ni=Math.LN2;function di(M){return M>>>=0,M===0?32:31-(fi(M)/ni|0)|0}var Bn=64,Gr=4194304;function Nn(M){switch(M&-M){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return M&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return M&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return M}}function _l(M,A){var G=M.pendingLanes;if(G===0)return 0;var Q=0,ie=M.suspendedLanes,he=M.pingedLanes,ze=G&268435455;if(ze!==0){var lt=ze&~ie;lt!==0?Q=Nn(lt):(he&=ze,he!==0&&(Q=Nn(he)))}else ze=G&~ie,ze!==0?Q=Nn(ze):he!==0&&(Q=Nn(he));if(Q===0)return 0;if(A!==0&&A!==Q&&!(A&ie)&&(ie=Q&-Q,he=A&-A,ie>=he||ie===16&&(he&4194240)!==0))return A;if(Q&4&&(Q|=G&16),A=M.entangledLanes,A!==0)for(M=M.entanglements,A&=Q;0<A;)G=31-Jr(A),ie=1<<G,Q|=M[G],A&=~ie;return Q}function Yu(M,A){switch(M){case 1:case 2:case 4:return A+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return A+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Oa(M,A){for(var G=M.suspendedLanes,Q=M.pingedLanes,ie=M.expirationTimes,he=M.pendingLanes;0<he;){var ze=31-Jr(he),lt=1<<ze,Mt=ie[ze];Mt===-1?(!(lt&G)||lt&Q)&&(ie[ze]=Yu(lt,A)):Mt<=A&&(M.expiredLanes|=lt),he&=~lt}}function Xl(M){return M=M.pendingLanes&-1073741825,M!==0?M:M&1073741824?1073741824:0}function qu(M){for(var A=[],G=0;31>G;G++)A.push(M);return A}function Fo(M,A,G){M.pendingLanes|=A,A!==536870912&&(M.suspendedLanes=0,M.pingedLanes=0),M=M.eventTimes,A=31-Jr(A),M[A]=G}function Yl(M,A){var G=M.pendingLanes&~A;M.pendingLanes=A,M.suspendedLanes=0,M.pingedLanes=0,M.expiredLanes&=A,M.mutableReadLanes&=A,M.entangledLanes&=A,A=M.entanglements;var Q=M.eventTimes;for(M=M.expirationTimes;0<G;){var ie=31-Jr(G),he=1<<ie;A[ie]=0,Q[ie]=-1,M[ie]=-1,G&=~he}}function yo(M,A){var G=M.entangledLanes|=A;for(M=M.entanglements;G;){var Q=31-Jr(G),ie=1<<Q;ie&A|M[Q]&A&&(M[Q]|=A),G&=~ie}}var Fr=0;function vo(M){return M&=-M,1<M?4<M?M&268435455?16:536870912:4:1}var Fa=i.unstable_scheduleCallback,Na=i.unstable_cancelCallback,ha=i.unstable_shouldYield,Dp=i.unstable_requestPaint,ii=i.unstable_now,Ua=i.unstable_ImmediatePriority,Gd=i.unstable_UserBlockingPriority,ps=i.unstable_NormalPriority,Ps=i.unstable_IdlePriority,No=null,es=null;function ms(M){if(es&&typeof es.onCommitFiberRoot=="function")try{es.onCommitFiberRoot(No,M,void 0,(M.current.flags&128)===128)}catch{}}function Uo(M,A){return M===A&&(M!==0||1/M===1/A)||M!==M&&A!==A}var Ui=typeof Object.is=="function"?Object.is:Uo,si=null,Ga=!1,Ju=!1;function ql(M){si===null?si=[M]:si.push(M)}function Jl(M){Ga=!0,ql(M)}function gs(){if(!Ju&&si!==null){Ju=!0;var M=0,A=Fr;try{var G=si;for(Fr=1;M<G.length;M++){var Q=G[M];do Q=Q(!0);while(Q!==null)}si=null,Ga=!1}catch(ie){throw si!==null&&(si=si.slice(M+1)),Fa(Ua,gs),ie}finally{Fr=A,Ju=!1}}return null}var Qc=a.ReactCurrentBatchConfig;function Is(M,A){if(Ui(M,A))return!0;if(typeof M!="object"||M===null||typeof A!="object"||A===null)return!1;var G=Object.keys(M),Q=Object.keys(A);if(G.length!==Q.length)return!1;for(Q=0;Q<G.length;Q++){var ie=G[Q];if(!Ft.call(A,ie)||!Ui(M[ie],A[ie]))return!1}return!0}function Kl(M){switch(M.tag){case 5:return Ne(M.type);case 16:return Ne("Lazy");case 13:return Ne("Suspense");case 19:return Ne("SuspenseList");case 0:case 2:case 15:return M=jt(M.type,!1),M;case 11:return M=jt(M.type.render,!1),M;case 1:return M=jt(M.type,!0),M;default:return""}}function Gi(M,A){if(M&&M.defaultProps){A=o({},A),M=M.defaultProps;for(var G in M)A[G]===void 0&&(A[G]=M[G]);return A}return A}var xl=Kt(null),pa=null,_o=null,Ql=null;function Ri(){Ql=_o=pa=null}function ma(M,A,G){Re?(Xt(xl,A._currentValue),A._currentValue=G):(Xt(xl,A._currentValue2),A._currentValue2=G)}function bl(M){var A=xl.current;It(xl),Re?M._currentValue=A:M._currentValue2=A}function ga(M,A,G){for(;M!==null;){var Q=M.alternate;if((M.childLanes&A)!==A?(M.childLanes|=A,Q!==null&&(Q.childLanes|=A)):Q!==null&&(Q.childLanes&A)!==A&&(Q.childLanes|=A),M===G)break;M=M.return}}function ya(M,A){pa=M,Ql=_o=null,M=M.dependencies,M!==null&&M.firstContext!==null&&(M.lanes&A&&(Li=!0),M.firstContext=null)}function _i(M){var A=Re?M._currentValue:M._currentValue2;if(Ql!==M)if(M={context:M,memoizedValue:A,next:null},_o===null){if(pa===null)throw Error(s(308));_o=M,pa.dependencies={lanes:0,firstContext:M}}else _o=_o.next=M;return A}var ts=null,ys=!1;function vs(M){M.updateQueue={baseState:M.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function xo(M,A){M=M.updateQueue,A.updateQueue===M&&(A.updateQueue={baseState:M.baseState,firstBaseUpdate:M.firstBaseUpdate,lastBaseUpdate:M.lastBaseUpdate,shared:M.shared,effects:M.effects})}function er(M,A){return{eventTime:M,lane:A,tag:0,payload:null,callback:null,next:null}}function va(M,A){var G=M.updateQueue;G!==null&&(G=G.shared,ai!==null&&M.mode&1&&!(zr&2)?(M=G.interleaved,M===null?(A.next=A,ts===null?ts=[G]:ts.push(G)):(A.next=M.next,M.next=A),G.interleaved=A):(M=G.pending,M===null?A.next=A:(A.next=M.next,M.next=A),G.pending=A))}function Zl(M,A,G){if(A=A.updateQueue,A!==null&&(A=A.shared,(G&4194240)!==0)){var Q=A.lanes;Q&=M.pendingLanes,G|=Q,A.lanes=G,yo(M,G)}}function Go(M,A){var G=M.updateQueue,Q=M.alternate;if(Q!==null&&(Q=Q.updateQueue,G===Q)){var ie=null,he=null;if(G=G.firstBaseUpdate,G!==null){do{var ze={eventTime:G.eventTime,lane:G.lane,tag:G.tag,payload:G.payload,callback:G.callback,next:null};he===null?ie=he=ze:he=he.next=ze,G=G.next}while(G!==null);he===null?ie=he=A:he=he.next=A}else ie=he=A;G={baseState:Q.baseState,firstBaseUpdate:ie,lastBaseUpdate:he,shared:Q.shared,effects:Q.effects},M.updateQueue=G;return}M=G.lastBaseUpdate,M===null?G.firstBaseUpdate=A:M.next=A,G.lastBaseUpdate=A}function Ku(M,A,G,Q){var ie=M.updateQueue;ys=!1;var he=ie.firstBaseUpdate,ze=ie.lastBaseUpdate,lt=ie.shared.pending;if(lt!==null){ie.shared.pending=null;var Mt=lt,zt=Mt.next;Mt.next=null,ze===null?he=zt:ze.next=zt,ze=Mt;var ur=M.alternate;ur!==null&&(ur=ur.updateQueue,lt=ur.lastBaseUpdate,lt!==ze&&(lt===null?ur.firstBaseUpdate=zt:lt.next=zt,ur.lastBaseUpdate=Mt))}if(he!==null){var Dr=ie.baseState;ze=0,ur=zt=Mt=null,lt=he;do{var Mr=lt.lane,Xr=lt.eventTime;if((Q&Mr)===Mr){ur!==null&&(ur=ur.next={eventTime:Xr,lane:0,tag:lt.tag,payload:lt.payload,callback:lt.callback,next:null});e:{var ir=M,Yi=lt;switch(Mr=A,Xr=G,Yi.tag){case 1:if(ir=Yi.payload,typeof ir=="function"){Dr=ir.call(Xr,Dr,Mr);break e}Dr=ir;break e;case 3:ir.flags=ir.flags&-65537|128;case 0:if(ir=Yi.payload,Mr=typeof ir=="function"?ir.call(Xr,Dr,Mr):ir,Mr==null)break e;Dr=o({},Dr,Mr);break e;case 2:ys=!0}}lt.callback!==null&&lt.lane!==0&&(M.flags|=64,Mr=ie.effects,Mr===null?ie.effects=[lt]:Mr.push(lt))}else Xr={eventTime:Xr,lane:Mr,tag:lt.tag,payload:lt.payload,callback:lt.callback,next:null},ur===null?(zt=ur=Xr,Mt=Dr):ur=ur.next=Xr,ze|=Mr;if(lt=lt.next,lt===null){if(lt=ie.shared.pending,lt===null)break;Mr=lt,lt=Mr.next,Mr.next=null,ie.lastBaseUpdate=Mr,ie.shared.pending=null}}while(!0);if(ur===null&&(Mt=Dr),ie.baseState=Mt,ie.firstBaseUpdate=zt,ie.lastBaseUpdate=ur,A=ie.shared.interleaved,A!==null){ie=A;do ze|=ie.lane,ie=ie.next;while(ie!==A)}else he===null&&(ie.shared.lanes=0);Sa|=ze,M.lanes=ze,M.memoizedState=Dr}}function Hd(M,A,G){if(M=A.effects,A.effects=null,M!==null)for(A=0;A<M.length;A++){var Q=M[A],ie=Q.callback;if(ie!==null){if(Q.callback=null,Q=G,typeof ie!="function")throw Error(s(191,ie));ie.call(Q)}}}var Sn=new r.Component().refs;function Qu(M,A,G,Q){A=M.memoizedState,G=G(Q,A),G=G==null?A:o({},A,G),M.memoizedState=G,M.lanes===0&&(M.updateQueue.baseState=G)}var Zu={isMounted:function(M){return(M=M._reactInternals)?I(M)===M:!1},enqueueSetState:function(M,A,G){M=M._reactInternals;var Q=gn(),ie=Yo(M),he=er(Q,ie);he.payload=A,G!=null&&(he.callback=G),va(M,he),A=ss(M,ie,Q),A!==null&&Zl(A,M,ie)},enqueueReplaceState:function(M,A,G){M=M._reactInternals;var Q=gn(),ie=Yo(M),he=er(Q,ie);he.tag=1,he.payload=A,G!=null&&(he.callback=G),va(M,he),A=ss(M,ie,Q),A!==null&&Zl(A,M,ie)},enqueueForceUpdate:function(M,A){M=M._reactInternals;var G=gn(),Q=Yo(M),ie=er(G,Q);ie.tag=2,A!=null&&(ie.callback=A),va(M,ie),A=ss(M,Q,G),A!==null&&Zl(A,M,Q)}};function _s(M,A,G,Q,ie,he,ze){return M=M.stateNode,typeof M.shouldComponentUpdate=="function"?M.shouldComponentUpdate(Q,he,ze):A.prototype&&A.prototype.isPureReactComponent?!Is(G,Q)||!Is(ie,he):!0}function zd(M,A,G){var Q=!1,ie=Sr,he=A.contextType;return typeof he=="object"&&he!==null?he=_i(he):(ie=Zr(A)?Pr:Rr.current,Q=A.contextTypes,he=(Q=Q!=null)?fr(M,ie):Sr),A=new A(G,he),M.memoizedState=A.state!==null&&A.state!==void 0?A.state:null,A.updater=Zu,M.stateNode=A,A._reactInternals=M,Q&&(M=M.stateNode,M.__reactInternalMemoizedUnmaskedChildContext=ie,M.__reactInternalMemoizedMaskedChildContext=he),A}function Vd(M,A,G,Q){M=A.state,typeof A.componentWillReceiveProps=="function"&&A.componentWillReceiveProps(G,Q),typeof A.UNSAFE_componentWillReceiveProps=="function"&&A.UNSAFE_componentWillReceiveProps(G,Q),A.state!==M&&Zu.enqueueReplaceState(A,A.state,null)}function Zc(M,A,G,Q){var ie=M.stateNode;ie.props=G,ie.state=M.memoizedState,ie.refs=Sn,vs(M);var he=A.contextType;typeof he=="object"&&he!==null?ie.context=_i(he):(he=Zr(A)?Pr:Rr.current,ie.context=fr(M,he)),ie.state=M.memoizedState,he=A.getDerivedStateFromProps,typeof he=="function"&&(Qu(M,A,he,G),ie.state=M.memoizedState),typeof A.getDerivedStateFromProps=="function"||typeof ie.getSnapshotBeforeUpdate=="function"||typeof ie.UNSAFE_componentWillMount!="function"&&typeof ie.componentWillMount!="function"||(A=ie.state,typeof ie.componentWillMount=="function"&&ie.componentWillMount(),typeof ie.UNSAFE_componentWillMount=="function"&&ie.UNSAFE_componentWillMount(),A!==ie.state&&Zu.enqueueReplaceState(ie,ie.state,null),Ku(M,G,ie,Q),ie.state=M.memoizedState),typeof ie.componentDidMount=="function"&&(M.flags|=4194308)}var wl=[],_a=0,$u=null,$l=0,fn=[],Hi=0,E=null,k=1,F="";function z(M,A){wl[_a++]=$l,wl[_a++]=$u,$u=M,$l=A}function $(M,A,G){fn[Hi++]=k,fn[Hi++]=F,fn[Hi++]=E,E=M;var Q=k;M=F;var ie=32-Jr(Q)-1;Q&=~(1<<ie),G+=1;var he=32-Jr(A)+ie;if(30<he){var ze=ie-ie%5;he=(Q&(1<<ze)-1).toString(32),Q>>=ze,ie-=ze,k=1<<32-Jr(A)+ie|G<<ie|Q,F=he+M}else k=1<<he|G<<ie|Q,F=M}function se(M){M.return!==null&&(z(M,1),$(M,1,0))}function le(M){for(;M===$u;)$u=wl[--_a],wl[_a]=null,$l=wl[--_a],wl[_a]=null;for(;M===E;)E=fn[--Hi],fn[Hi]=null,F=fn[--Hi],fn[Hi]=null,k=fn[--Hi],fn[Hi]=null}var we=null,Le=null,Ie=!1,Je=!1,at=null;function nt(M,A){var G=to(5,null,null,0);G.elementType="DELETED",G.stateNode=A,G.return=M,A=M.deletions,A===null?(M.deletions=[G],M.flags|=16):A.push(G)}function He(M,A){switch(M.tag){case 5:return A=Yt(A,M.type,M.pendingProps),A!==null?(M.stateNode=A,we=M,Le=en(A),!0):!1;case 6:return A=Pt(A,M.pendingProps),A!==null?(M.stateNode=A,we=M,Le=null,!0):!1;case 13:if(A=Wt(A),A!==null){var G=E!==null?{id:k,overflow:F}:null;return M.memoizedState={dehydrated:A,treeContext:G,retryLane:1073741824},G=to(18,null,null,0),G.stateNode=A,G.return=M,M.child=G,we=M,Le=null,!0}return!1;default:return!1}}function Et(M){return(M.mode&1)!==0&&(M.flags&128)===0}function pt(M){if(Ie){var A=Le;if(A){var G=A;if(!He(M,A)){if(Et(M))throw Error(s(418));A=cr(G);var Q=we;A&&He(M,A)?nt(Q,G):(M.flags=M.flags&-4097|2,Ie=!1,we=M)}}else{if(Et(M))throw Error(s(418));M.flags=M.flags&-4097|2,Ie=!1,we=M}}}function xt(M){for(M=M.return;M!==null&&M.tag!==5&&M.tag!==3&&M.tag!==13;)M=M.return;we=M}function dt(M){if(!ve||M!==we)return!1;if(!Ie)return xt(M),Ie=!0,!1;if(M.tag!==3&&(M.tag!==5||me(M.type)&&!K(M.type,M.memoizedProps))){var A=Le;if(A){if(Et(M)){for(M=Le;M;)M=cr(M);throw Error(s(418))}for(;A;)nt(M,A),A=cr(A)}}if(xt(M),M.tag===13){if(!ve)throw Error(s(316));if(M=M.memoizedState,M=M!==null?M.dehydrated:null,!M)throw Error(s(317));Le=Fe(M)}else Le=we?cr(M.stateNode):null;return!0}function ft(){ve&&(Le=we=null,Je=Ie=!1)}function ar(M){at===null?at=[M]:at.push(M)}function wr(M,A,G){if(M=G.ref,M!==null&&typeof M!="function"&&typeof M!="object"){if(G._owner){if(G=G._owner,G){if(G.tag!==1)throw Error(s(309));var Q=G.stateNode}if(!Q)throw Error(s(147,M));var ie=Q,he=""+M;return A!==null&&A.ref!==null&&typeof A.ref=="function"&&A.ref._stringRef===he?A.ref:(A=function(ze){var lt=ie.refs;lt===Sn&&(lt=ie.refs={}),ze===null?delete lt[he]:lt[he]=ze},A._stringRef=he,A)}if(typeof M!="string")throw Error(s(284));if(!G._owner)throw Error(s(290,M))}return M}function sr(M,A){throw M=Object.prototype.toString.call(A),Error(s(31,M==="[object Object]"?"object with keys {"+Object.keys(A).join(", ")+"}":M))}function lr(M){var A=M._init;return A(M._payload)}function kr(M){function A(yt,ct){if(M){var wt=yt.deletions;wt===null?(yt.deletions=[ct],yt.flags|=16):wt.push(ct)}}function G(yt,ct){if(!M)return null;for(;ct!==null;)A(yt,ct),ct=ct.sibling;return null}function Q(yt,ct){for(yt=new Map;ct!==null;)ct.key!==null?yt.set(ct.key,ct):yt.set(ct.index,ct),ct=ct.sibling;return yt}function ie(yt,ct){return yt=el(yt,ct),yt.index=0,yt.sibling=null,yt}function he(yt,ct,wt){return yt.index=wt,M?(wt=yt.alternate,wt!==null?(wt=wt.index,wt<ct?(yt.flags|=2,ct):wt):(yt.flags|=2,ct)):(yt.flags|=1048576,ct)}function ze(yt){return M&&yt.alternate===null&&(yt.flags|=2),yt}function lt(yt,ct,wt,tr){return ct===null||ct.tag!==6?(ct=mh(wt,yt.mode,tr),ct.return=yt,ct):(ct=ie(ct,wt),ct.return=yt,ct)}function Mt(yt,ct,wt,tr){var vr=wt.type;return vr===h?ur(yt,ct,wt.props.children,tr,wt.key):ct!==null&&(ct.elementType===vr||typeof vr=="object"&&vr!==null&&vr.$$typeof===b&&lr(vr)===ct.type)?(tr=ie(ct,wt.props),tr.ref=wr(yt,ct,wt),tr.return=yt,tr):(tr=ph(wt.type,wt.key,wt.props,null,yt.mode,tr),tr.ref=wr(yt,ct,wt),tr.return=yt,tr)}function zt(yt,ct,wt,tr){return ct===null||ct.tag!==4||ct.stateNode.containerInfo!==wt.containerInfo||ct.stateNode.implementation!==wt.implementation?(ct=gh(wt,yt.mode,tr),ct.return=yt,ct):(ct=ie(ct,wt.children||[]),ct.return=yt,ct)}function ur(yt,ct,wt,tr,vr){return ct===null||ct.tag!==7?(ct=vu(wt,yt.mode,tr,vr),ct.return=yt,ct):(ct=ie(ct,wt),ct.return=yt,ct)}function Dr(yt,ct,wt){if(typeof ct=="string"&&ct!==""||typeof ct=="number")return ct=mh(""+ct,yt.mode,wt),ct.return=yt,ct;if(typeof ct=="object"&&ct!==null){switch(ct.$$typeof){case l:return wt=ph(ct.type,ct.key,ct.props,null,yt.mode,wt),wt.ref=wr(yt,null,ct),wt.return=yt,wt;case u:return ct=gh(ct,yt.mode,wt),ct.return=yt,ct;case b:var tr=ct._init;return Dr(yt,tr(ct._payload),wt)}if(X(ct)||R(ct))return ct=vu(ct,yt.mode,wt,null),ct.return=yt,ct;sr(yt,ct)}return null}function Mr(yt,ct,wt,tr){var vr=ct!==null?ct.key:null;if(typeof wt=="string"&&wt!==""||typeof wt=="number")return vr!==null?null:lt(yt,ct,""+wt,tr);if(typeof wt=="object"&&wt!==null){switch(wt.$$typeof){case l:return wt.key===vr?Mt(yt,ct,wt,tr):null;case u:return wt.key===vr?zt(yt,ct,wt,tr):null;case b:return vr=wt._init,Mr(yt,ct,vr(wt._payload),tr)}if(X(wt)||R(wt))return vr!==null?null:ur(yt,ct,wt,tr,null);sr(yt,wt)}return null}function Xr(yt,ct,wt,tr,vr){if(typeof tr=="string"&&tr!==""||typeof tr=="number")return yt=yt.get(wt)||null,lt(ct,yt,""+tr,vr);if(typeof tr=="object"&&tr!==null){switch(tr.$$typeof){case l:return yt=yt.get(tr.key===null?wt:tr.key)||null,Mt(ct,yt,tr,vr);case u:return yt=yt.get(tr.key===null?wt:tr.key)||null,zt(ct,yt,tr,vr);case b:var Nr=tr._init;return Xr(yt,ct,wt,Nr(tr._payload),vr)}if(X(tr)||R(tr))return yt=yt.get(wt)||null,ur(ct,yt,tr,vr,null);sr(ct,tr)}return null}function ir(yt,ct,wt,tr){for(var vr=null,Nr=null,Br=ct,dn=ct=0,pi=null;Br!==null&&dn<wt.length;dn++){Br.index>dn?(pi=Br,Br=null):pi=Br.sibling;var cn=Mr(yt,Br,wt[dn],tr);if(cn===null){Br===null&&(Br=pi);break}M&&Br&&cn.alternate===null&&A(yt,Br),ct=he(cn,ct,dn),Nr===null?vr=cn:Nr.sibling=cn,Nr=cn,Br=pi}if(dn===wt.length)return G(yt,Br),Ie&&z(yt,dn),vr;if(Br===null){for(;dn<wt.length;dn++)Br=Dr(yt,wt[dn],tr),Br!==null&&(ct=he(Br,ct,dn),Nr===null?vr=Br:Nr.sibling=Br,Nr=Br);return Ie&&z(yt,dn),vr}for(Br=Q(yt,Br);dn<wt.length;dn++)pi=Xr(Br,yt,dn,wt[dn],tr),pi!==null&&(M&&pi.alternate!==null&&Br.delete(pi.key===null?dn:pi.key),ct=he(pi,ct,dn),Nr===null?vr=pi:Nr.sibling=pi,Nr=pi);return M&&Br.forEach(function(tl){return A(yt,tl)}),Ie&&z(yt,dn),vr}function Yi(yt,ct,wt,tr){var vr=R(wt);if(typeof vr!="function")throw Error(s(150));if(wt=vr.call(wt),wt==null)throw Error(s(151));for(var Nr=vr=null,Br=ct,dn=ct=0,pi=null,cn=wt.next();Br!==null&&!cn.done;dn++,cn=wt.next()){Br.index>dn?(pi=Br,Br=null):pi=Br.sibling;var tl=Mr(yt,Br,cn.value,tr);if(tl===null){Br===null&&(Br=pi);break}M&&Br&&tl.alternate===null&&A(yt,Br),ct=he(tl,ct,dn),Nr===null?vr=tl:Nr.sibling=tl,Nr=tl,Br=pi}if(cn.done)return G(yt,Br),Ie&&z(yt,dn),vr;if(Br===null){for(;!cn.done;dn++,cn=wt.next())cn=Dr(yt,cn.value,tr),cn!==null&&(ct=he(cn,ct,dn),Nr===null?vr=cn:Nr.sibling=cn,Nr=cn);return Ie&&z(yt,dn),vr}for(Br=Q(yt,Br);!cn.done;dn++,cn=wt.next())cn=Xr(Br,yt,dn,cn.value,tr),cn!==null&&(M&&cn.alternate!==null&&Br.delete(cn.key===null?dn:cn.key),ct=he(cn,ct,dn),Nr===null?vr=cn:Nr.sibling=cn,Nr=cn);return M&&Br.forEach(function(cm){return A(yt,cm)}),Ie&&z(yt,dn),vr}function ro(yt,ct,wt,tr){if(typeof wt=="object"&&wt!==null&&wt.type===h&&wt.key===null&&(wt=wt.props.children),typeof wt=="object"&&wt!==null){switch(wt.$$typeof){case l:e:{for(var vr=wt.key,Nr=ct;Nr!==null;){if(Nr.key===vr){if(vr=wt.type,vr===h){if(Nr.tag===7){G(yt,Nr.sibling),ct=ie(Nr,wt.props.children),ct.return=yt,yt=ct;break e}}else if(Nr.elementType===vr||typeof vr=="object"&&vr!==null&&vr.$$typeof===b&&lr(vr)===Nr.type){G(yt,Nr.sibling),ct=ie(Nr,wt.props),ct.ref=wr(yt,Nr,wt),ct.return=yt,yt=ct;break e}G(yt,Nr);break}else A(yt,Nr);Nr=Nr.sibling}wt.type===h?(ct=vu(wt.props.children,yt.mode,tr,wt.key),ct.return=yt,yt=ct):(tr=ph(wt.type,wt.key,wt.props,null,yt.mode,tr),tr.ref=wr(yt,ct,wt),tr.return=yt,yt=tr)}return ze(yt);case u:e:{for(Nr=wt.key;ct!==null;){if(ct.key===Nr)if(ct.tag===4&&ct.stateNode.containerInfo===wt.containerInfo&&ct.stateNode.implementation===wt.implementation){G(yt,ct.sibling),ct=ie(ct,wt.children||[]),ct.return=yt,yt=ct;break e}else{G(yt,ct);break}else A(yt,ct);ct=ct.sibling}ct=gh(wt,yt.mode,tr),ct.return=yt,yt=ct}return ze(yt);case b:return Nr=wt._init,ro(yt,ct,Nr(wt._payload),tr)}if(X(wt))return ir(yt,ct,wt,tr);if(R(wt))return Yi(yt,ct,wt,tr);sr(yt,wt)}return typeof wt=="string"&&wt!==""||typeof wt=="number"?(wt=""+wt,ct!==null&&ct.tag===6?(G(yt,ct.sibling),ct=ie(ct,wt),ct.return=yt,yt=ct):(G(yt,ct),ct=mh(wt,yt.mode,tr),ct.return=yt,yt=ct),ze(yt)):G(yt,ct)}return ro}var tn=kr(!0),Un=kr(!1),In={},_n=Kt(In),Vn=Kt(In),xi=Kt(In);function Kr(M){if(M===In)throw Error(s(174));return M}function Mn(M,A){Xt(xi,A),Xt(Vn,M),Xt(_n,In),M=ee(A),It(_n),Xt(_n,M)}function rn(){It(_n),It(Vn),It(xi)}function bi(M){var A=Kr(xi.current),G=Kr(_n.current);A=V(G,M.type,A),G!==A&&(Xt(Vn,M),Xt(_n,A))}function jn(M){Vn.current===M&&(It(_n),It(Vn))}var Hr=Kt(0);function An(M){for(var A=M;A!==null;){if(A.tag===13){var G=A.memoizedState;if(G!==null&&(G=G.dehydrated,G===null||Jt(G)||$t(G)))return A}else if(A.tag===19&&A.memoizedProps.revealOrder!==void 0){if(A.flags&128)return A}else if(A.child!==null){A.child.return=A,A=A.child;continue}if(A===M)break;for(;A.sibling===null;){if(A.return===null||A.return===M)return null;A=A.return}A.sibling.return=A.return,A=A.sibling}return null}var mn=[];function Ks(){for(var M=0;M<mn.length;M++){var A=mn[M];Re?A._workInProgressVersionPrimary=null:A._workInProgressVersionSecondary=null}mn.length=0}var bo=a.ReactCurrentDispatcher,rs=a.ReactCurrentBatchConfig,eu=0,qn=null,Pi=null,Ii=null,Wd=!1,xa=!1,tu=0,$c=0;function ji(){throw Error(s(321))}function Xd(M,A){if(A===null)return!1;for(var G=0;G<A.length&&G<M.length;G++)if(!Ui(M[G],A[G]))return!1;return!0}function ec(M,A,G,Q,ie,he){if(eu=he,qn=A,A.memoizedState=null,A.updateQueue=null,A.lanes=0,bo.current=M===null||M.memoizedState===null?Up:Gp,M=G(Q,ie),xa){he=0;do{if(xa=!1,tu=0,25<=he)throw Error(s(301));he+=1,Ii=Pi=null,A.updateQueue=null,bo.current=Hp,M=G(Q,ie)}while(xa)}if(bo.current=ic,A=Pi!==null&&Pi.next!==null,eu=0,Ii=Pi=qn=null,Wd=!1,A)throw Error(s(300));return M}function Sl(){var M=tu!==0;return tu=0,M}function Ho(){var M={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ii===null?qn.memoizedState=Ii=M:Ii=Ii.next=M,Ii}function zo(){if(Pi===null){var M=qn.alternate;M=M!==null?M.memoizedState:null}else M=Pi.next;var A=Ii===null?qn.memoizedState:Ii.next;if(A!==null)Ii=A,Pi=M;else{if(M===null)throw Error(s(310));Pi=M,M={memoizedState:Pi.memoizedState,baseState:Pi.baseState,baseQueue:Pi.baseQueue,queue:Pi.queue,next:null},Ii===null?qn.memoizedState=Ii=M:Ii=Ii.next=M}return Ii}function ba(M,A){return typeof A=="function"?A(M):A}function ef(M){var A=zo(),G=A.queue;if(G===null)throw Error(s(311));G.lastRenderedReducer=M;var Q=Pi,ie=Q.baseQueue,he=G.pending;if(he!==null){if(ie!==null){var ze=ie.next;ie.next=he.next,he.next=ze}Q.baseQueue=ie=he,G.pending=null}if(ie!==null){he=ie.next,Q=Q.baseState;var lt=ze=null,Mt=null,zt=he;do{var ur=zt.lane;if((eu&ur)===ur)Mt!==null&&(Mt=Mt.next={lane:0,action:zt.action,hasEagerState:zt.hasEagerState,eagerState:zt.eagerState,next:null}),Q=zt.hasEagerState?zt.eagerState:M(Q,zt.action);else{var Dr={lane:ur,action:zt.action,hasEagerState:zt.hasEagerState,eagerState:zt.eagerState,next:null};Mt===null?(lt=Mt=Dr,ze=Q):Mt=Mt.next=Dr,qn.lanes|=ur,Sa|=ur}zt=zt.next}while(zt!==null&&zt!==he);Mt===null?ze=Q:Mt.next=lt,Ui(Q,A.memoizedState)||(Li=!0),A.memoizedState=Q,A.baseState=ze,A.baseQueue=Mt,G.lastRenderedState=Q}if(M=G.interleaved,M!==null){ie=M;do he=ie.lane,qn.lanes|=he,Sa|=he,ie=ie.next;while(ie!==M)}else ie===null&&(G.lanes=0);return[A.memoizedState,G.dispatch]}function tf(M){var A=zo(),G=A.queue;if(G===null)throw Error(s(311));G.lastRenderedReducer=M;var Q=G.dispatch,ie=G.pending,he=A.memoizedState;if(ie!==null){G.pending=null;var ze=ie=ie.next;do he=M(he,ze.action),ze=ze.next;while(ze!==ie);Ui(he,A.memoizedState)||(Li=!0),A.memoizedState=he,A.baseQueue===null&&(A.baseState=he),G.lastRenderedState=he}return[he,Q]}function Bp(){}function kp(M,A){var G=qn,Q=zo(),ie=A(),he=!Ui(Q.memoizedState,ie);if(he&&(Q.memoizedState=ie,Li=!0),Q=Q.queue,tc(Ha.bind(null,G,Q,M),[M]),Q.getSnapshot!==A||he||Ii!==null&&Ii.memoizedState.tag&1){if(G.flags|=2048,nf(9,Fp.bind(null,G,Q,ie,A),void 0,null),ai===null)throw Error(s(349));eu&30||Op(G,A,ie)}return ie}function Op(M,A,G){M.flags|=16384,M={getSnapshot:A,value:G},A=qn.updateQueue,A===null?(A={lastEffect:null,stores:null},qn.updateQueue=A,A.stores=[M]):(G=A.stores,G===null?A.stores=[M]:G.push(M))}function Fp(M,A,G,Q){A.value=G,A.getSnapshot=Q,Yd(A)&&ss(M,1,-1)}function Ha(M,A,G){return G(function(){Yd(A)&&ss(M,1,-1)})}function Yd(M){var A=M.getSnapshot;M=M.value;try{var G=A();return!Ui(M,G)}catch{return!0}}function rf(M){var A=Ho();return typeof M=="function"&&(M=M()),A.memoizedState=A.baseState=M,M={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ba,lastRenderedState:M},A.queue=M,M=M.dispatch=z_.bind(null,qn,M),[A.memoizedState,M]}function nf(M,A,G,Q){return M={tag:M,create:A,destroy:G,deps:Q,next:null},A=qn.updateQueue,A===null?(A={lastEffect:null,stores:null},qn.updateQueue=A,A.lastEffect=M.next=M):(G=A.lastEffect,G===null?A.lastEffect=M.next=M:(Q=G.next,G.next=M,M.next=Q,A.lastEffect=M)),M}function $g(){return zo().memoizedState}function Ml(M,A,G,Q){var ie=Ho();qn.flags|=M,ie.memoizedState=nf(1|A,G,void 0,Q===void 0?null:Q)}function qd(M,A,G,Q){var ie=zo();Q=Q===void 0?null:Q;var he=void 0;if(Pi!==null){var ze=Pi.memoizedState;if(he=ze.destroy,Q!==null&&Xd(Q,ze.deps)){ie.memoizedState=nf(A,G,he,Q);return}}qn.flags|=M,ie.memoizedState=nf(1|A,G,he,Q)}function Jd(M,A){return Ml(8390656,8,M,A)}function tc(M,A){return qd(2048,8,M,A)}function kn(M,A){return qd(4,2,M,A)}function Kd(M,A){return qd(4,4,M,A)}function sf(M,A){if(typeof A=="function")return M=M(),A(M),function(){A(null)};if(A!=null)return M=M(),A.current=M,function(){A.current=null}}function rc(M,A,G){return G=G!=null?G.concat([M]):null,qd(4,4,sf.bind(null,A,M),G)}function Qd(){}function Zd(M,A){var G=zo();A=A===void 0?null:A;var Q=G.memoizedState;return Q!==null&&A!==null&&Xd(A,Q[1])?Q[0]:(G.memoizedState=[M,A],M)}function nc(M,A){var G=zo();A=A===void 0?null:A;var Q=G.memoizedState;return Q!==null&&A!==null&&Xd(A,Q[1])?Q[0]:(M=M(),G.memoizedState=[M,A],M)}function $d(M,A){var G=Fr;Fr=G!==0&&4>G?G:4,M(!0);var Q=rs.transition;rs.transition={};try{M(!1),A()}finally{Fr=G,rs.transition=Q}}function ru(){return zo().memoizedState}function ey(M,A,G){var Q=Yo(M);G={lane:Q,action:G,hasEagerState:!1,eagerState:null,next:null},ty(M)?Np(A,G):(of(M,A,G),G=gn(),M=ss(M,Q,G),M!==null&&af(M,A,Q))}function z_(M,A,G){var Q=Yo(M),ie={lane:Q,action:G,hasEagerState:!1,eagerState:null,next:null};if(ty(M))Np(A,ie);else{of(M,A,ie);var he=M.alternate;if(M.lanes===0&&(he===null||he.lanes===0)&&(he=A.lastRenderedReducer,he!==null))try{var ze=A.lastRenderedState,lt=he(ze,G);if(ie.hasEagerState=!0,ie.eagerState=lt,Ui(lt,ze))return}catch{}finally{}G=gn(),M=ss(M,Q,G),M!==null&&af(M,A,Q)}}function ty(M){var A=M.alternate;return M===qn||A!==null&&A===qn}function Np(M,A){xa=Wd=!0;var G=M.pending;G===null?A.next=A:(A.next=G.next,G.next=A),M.pending=A}function of(M,A,G){ai!==null&&M.mode&1&&!(zr&2)?(M=A.interleaved,M===null?(G.next=G,ts===null?ts=[A]:ts.push(A)):(G.next=M.next,M.next=G),A.interleaved=G):(M=A.pending,M===null?G.next=G:(G.next=M.next,M.next=G),A.pending=G)}function af(M,A,G){if(G&4194240){var Q=A.lanes;Q&=M.pendingLanes,G|=Q,A.lanes=G,yo(M,G)}}var ic={readContext:_i,useCallback:ji,useContext:ji,useEffect:ji,useImperativeHandle:ji,useInsertionEffect:ji,useLayoutEffect:ji,useMemo:ji,useReducer:ji,useRef:ji,useState:ji,useDebugValue:ji,useDeferredValue:ji,useTransition:ji,useMutableSource:ji,useSyncExternalStore:ji,useId:ji,unstable_isNewReconciler:!1},Up={readContext:_i,useCallback:function(M,A){return Ho().memoizedState=[M,A===void 0?null:A],M},useContext:_i,useEffect:Jd,useImperativeHandle:function(M,A,G){return G=G!=null?G.concat([M]):null,Ml(4194308,4,sf.bind(null,A,M),G)},useLayoutEffect:function(M,A){return Ml(4194308,4,M,A)},useInsertionEffect:function(M,A){return Ml(4,2,M,A)},useMemo:function(M,A){var G=Ho();return A=A===void 0?null:A,M=M(),G.memoizedState=[M,A],M},useReducer:function(M,A,G){var Q=Ho();return A=G!==void 0?G(A):A,Q.memoizedState=Q.baseState=A,M={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:M,lastRenderedState:A},Q.queue=M,M=M.dispatch=ey.bind(null,qn,M),[Q.memoizedState,M]},useRef:function(M){var A=Ho();return M={current:M},A.memoizedState=M},useState:rf,useDebugValue:Qd,useDeferredValue:function(M){var A=rf(M),G=A[0],Q=A[1];return Jd(function(){var ie=rs.transition;rs.transition={};try{Q(M)}finally{rs.transition=ie}},[M]),G},useTransition:function(){var M=rf(!1),A=M[0];return M=$d.bind(null,M[1]),Ho().memoizedState=M,[A,M]},useMutableSource:function(){},useSyncExternalStore:function(M,A,G){var Q=qn,ie=Ho();if(Ie){if(G===void 0)throw Error(s(407));G=G()}else{if(G=A(),ai===null)throw Error(s(349));eu&30||Op(Q,A,G)}ie.memoizedState=G;var he={value:G,getSnapshot:A};return ie.queue=he,Jd(Ha.bind(null,Q,he,M),[M]),Q.flags|=2048,nf(9,Fp.bind(null,Q,he,G,A),void 0,null),G},useId:function(){var M=Ho(),A=ai.identifierPrefix;if(Ie){var G=F,Q=k;G=(Q&~(1<<32-Jr(Q)-1)).toString(32)+G,A=":"+A+"R"+G,G=tu++,0<G&&(A+="H"+G.toString(32)),A+=":"}else G=$c++,A=":"+A+"r"+G.toString(32)+":";return M.memoizedState=A},unstable_isNewReconciler:!1},Gp={readContext:_i,useCallback:Zd,useContext:_i,useEffect:tc,useImperativeHandle:rc,useInsertionEffect:kn,useLayoutEffect:Kd,useMemo:nc,useReducer:ef,useRef:$g,useState:function(){return ef(ba)},useDebugValue:Qd,useDeferredValue:function(M){var A=ef(ba),G=A[0],Q=A[1];return tc(function(){var ie=rs.transition;rs.transition={};try{Q(M)}finally{rs.transition=ie}},[M]),G},useTransition:function(){var M=ef(ba)[0],A=zo().memoizedState;return[M,A]},useMutableSource:Bp,useSyncExternalStore:kp,useId:ru,unstable_isNewReconciler:!1},Hp={readContext:_i,useCallback:Zd,useContext:_i,useEffect:tc,useImperativeHandle:rc,useInsertionEffect:kn,useLayoutEffect:Kd,useMemo:nc,useReducer:tf,useRef:$g,useState:function(){return tf(ba)},useDebugValue:Qd,useDeferredValue:function(M){var A=tf(ba),G=A[0],Q=A[1];return tc(function(){var ie=rs.transition;rs.transition={};try{Q(M)}finally{rs.transition=ie}},[M]),G},useTransition:function(){var M=tf(ba)[0],A=zo().memoizedState;return[M,A]},useMutableSource:Bp,useSyncExternalStore:kp,useId:ru,unstable_isNewReconciler:!1};function zp(M,A){try{var G="",Q=A;do G+=Kl(Q),Q=Q.return;while(Q);var ie=G}catch(he){ie=`
Error generating stack: `+he.message+`
`+he.stack}return{value:M,source:A,stack:ie}}function eh(M,A){try{console.error(A.value)}catch(G){setTimeout(function(){throw G})}}var V_=typeof WeakMap=="function"?WeakMap:Map;function ry(M,A,G){G=er(-1,G),G.tag=3,G.payload={element:null};var Q=A.value;return G.callback=function(){cc||(cc=!0,Hn=Q),eh(M,A)},G}function th(M,A,G){G=er(-1,G),G.tag=3;var Q=M.type.getDerivedStateFromError;if(typeof Q=="function"){var ie=A.value;G.payload=function(){return Q(ie)},G.callback=function(){eh(M,A)}}var he=M.stateNode;return he!==null&&typeof he.componentDidCatch=="function"&&(G.callback=function(){eh(M,A),typeof Q!="function"&&(Xo===null?Xo=new Set([this]):Xo.add(this));var ze=A.stack;this.componentDidCatch(A.value,{componentStack:ze!==null?ze:""})}),G}function za(M,A,G){var Q=M.pingCache;if(Q===null){Q=M.pingCache=new V_;var ie=new Set;Q.set(A,ie)}else ie=Q.get(A),ie===void 0&&(ie=new Set,Q.set(A,ie));ie.has(G)||(ie.add(G),M=am.bind(null,M,A,G),A.then(M,M))}function Vp(M){do{var A;if((A=M.tag===13)&&(A=M.memoizedState,A=A!==null?A.dehydrated!==null:!0),A)return M;M=M.return}while(M!==null);return null}function nu(M,A,G,Q,ie){return M.mode&1?(M.flags|=65536,M.lanes=ie,M):(M===A?M.flags|=65536:(M.flags|=128,G.flags|=131072,G.flags&=-52805,G.tag===1&&(G.alternate===null?G.tag=17:(A=er(-1,1),A.tag=2,va(G,A))),G.lanes|=1),M)}function wi(M){M.flags|=4}function sc(M,A){if(M!==null&&M.child===A.child)return!0;if(A.flags&16)return!1;for(M=A.child;M!==null;){if(M.flags&12854||M.subtreeFlags&12854)return!1;M=M.sibling}return!0}var Qs,iu,rh,nh;if(Me)Qs=function(M,A){for(var G=A.child;G!==null;){if(G.tag===5||G.tag===6)ce(M,G.stateNode);else if(G.tag!==4&&G.child!==null){G.child.return=G,G=G.child;continue}if(G===A)break;for(;G.sibling===null;){if(G.return===null||G.return===A)return;G=G.return}G.sibling.return=G.return,G=G.sibling}},iu=function(){},rh=function(M,A,G,Q,ie){if(M=M.memoizedProps,M!==Q){var he=A.stateNode,ze=Kr(_n.current);G=U(he,G,M,Q,ie,ze),(A.updateQueue=G)&&wi(A)}},nh=function(M,A,G,Q){G!==Q&&wi(A)};else if(xe){Qs=function(M,A,G,Q){for(var ie=A.child;ie!==null;){if(ie.tag===5){var he=ie.stateNode;G&&Q&&(he=Bt(he,ie.type,ie.memoizedProps,ie)),ce(M,he)}else if(ie.tag===6)he=ie.stateNode,G&&Q&&(he=Ut(he,ie.memoizedProps,ie)),ce(M,he);else if(ie.tag!==4){if(ie.tag===22&&ie.memoizedState!==null)he=ie.child,he!==null&&(he.return=ie),Qs(M,ie,!0,!0);else if(ie.child!==null){ie.child.return=ie,ie=ie.child;continue}}if(ie===A)break;for(;ie.sibling===null;){if(ie.return===null||ie.return===A)return;ie=ie.return}ie.sibling.return=ie.return,ie=ie.sibling}};var Al=function(M,A,G,Q){for(var ie=A.child;ie!==null;){if(ie.tag===5){var he=ie.stateNode;G&&Q&&(he=Bt(he,ie.type,ie.memoizedProps,ie)),Rt(M,he)}else if(ie.tag===6)he=ie.stateNode,G&&Q&&(he=Ut(he,ie.memoizedProps,ie)),Rt(M,he);else if(ie.tag!==4){if(ie.tag===22&&ie.memoizedState!==null)he=ie.child,he!==null&&(he.return=ie),Al(M,ie,!0,!0);else if(ie.child!==null){ie.child.return=ie,ie=ie.child;continue}}if(ie===A)break;for(;ie.sibling===null;){if(ie.return===null||ie.return===A)return;ie=ie.return}ie.sibling.return=ie.return,ie=ie.sibling}};iu=function(M,A){var G=A.stateNode;if(!sc(M,A)){M=G.containerInfo;var Q=vt(M);Al(Q,A,!1,!1),G.pendingChildren=Q,wi(A),Dt(M,Q)}},rh=function(M,A,G,Q,ie){var he=M.stateNode,ze=M.memoizedProps;if((M=sc(M,A))&&ze===Q)A.stateNode=he;else{var lt=A.stateNode,Mt=Kr(_n.current),zt=null;ze!==Q&&(zt=U(lt,G,ze,Q,ie,Mt)),M&&zt===null?A.stateNode=he:(he=bt(he,zt,G,ze,Q,A,M,lt),B(he,G,Q,ie,Mt)&&wi(A),A.stateNode=he,M?wi(A):Qs(he,A,!1,!1))}},nh=function(M,A,G,Q){G!==Q?(M=Kr(xi.current),G=Kr(_n.current),A.stateNode=re(Q,M,G,A),wi(A)):A.stateNode=M.stateNode}}else iu=function(){},rh=function(){},nh=function(){};function Va(M,A){if(!Ie)switch(M.tailMode){case"hidden":A=M.tail;for(var G=null;A!==null;)A.alternate!==null&&(G=A),A=A.sibling;G===null?M.tail=null:G.sibling=null;break;case"collapsed":G=M.tail;for(var Q=null;G!==null;)G.alternate!==null&&(Q=G),G=G.sibling;Q===null?A||M.tail===null?M.tail=null:M.tail.sibling=null:Q.sibling=null}}function oi(M){var A=M.alternate!==null&&M.alternate.child===M.child,G=0,Q=0;if(A)for(var ie=M.child;ie!==null;)G|=ie.lanes|ie.childLanes,Q|=ie.subtreeFlags&14680064,Q|=ie.flags&14680064,ie.return=M,ie=ie.sibling;else for(ie=M.child;ie!==null;)G|=ie.lanes|ie.childLanes,Q|=ie.subtreeFlags,Q|=ie.flags,ie.return=M,ie=ie.sibling;return M.subtreeFlags|=Q,M.childLanes=G,A}function ih(M,A,G){var Q=A.pendingProps;switch(le(A),A.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return oi(A),null;case 1:return Zr(A.type)&&Or(),oi(A),null;case 3:return Q=A.stateNode,rn(),It(Lr),It(Rr),Ks(),Q.pendingContext&&(Q.context=Q.pendingContext,Q.pendingContext=null),(M===null||M.child===null)&&(dt(A)?wi(A):M===null||M.memoizedState.isDehydrated&&!(A.flags&256)||(A.flags|=1024,at!==null&&(xf(at),at=null))),iu(M,A),oi(A),null;case 5:jn(A),G=Kr(xi.current);var ie=A.type;if(M!==null&&A.stateNode!=null)rh(M,A,ie,Q,G),M.ref!==A.ref&&(A.flags|=512,A.flags|=2097152);else{if(!Q){if(A.stateNode===null)throw Error(s(166));return oi(A),null}if(M=Kr(_n.current),dt(A)){if(!ve)throw Error(s(175));M=un(A.stateNode,A.type,A.memoizedProps,G,M,A,!Je),A.updateQueue=M,M!==null&&wi(A)}else{var he=Z(ie,Q,G,M,A);Qs(he,A,!1,!1),A.stateNode=he,B(he,ie,Q,G,M)&&wi(A)}A.ref!==null&&(A.flags|=512,A.flags|=2097152)}return oi(A),null;case 6:if(M&&A.stateNode!=null)nh(M,A,M.memoizedProps,Q);else{if(typeof Q!="string"&&A.stateNode===null)throw Error(s(166));if(M=Kr(xi.current),G=Kr(_n.current),dt(A)){if(!ve)throw Error(s(176));if(M=A.stateNode,Q=A.memoizedProps,(G=jr(M,Q,A,!Je))&&(ie=we,ie!==null))switch(he=(ie.mode&1)!==0,ie.tag){case 3:Qe(ie.stateNode.containerInfo,M,Q,he);break;case 5:qe(ie.type,ie.memoizedProps,ie.stateNode,M,Q,he)}G&&wi(A)}else A.stateNode=re(Q,M,G,A)}return oi(A),null;case 13:if(It(Hr),Q=A.memoizedState,Ie&&Le!==null&&A.mode&1&&!(A.flags&128)){for(M=Le;M;)M=cr(M);return ft(),A.flags|=98560,A}if(Q!==null&&Q.dehydrated!==null){if(Q=dt(A),M===null){if(!Q)throw Error(s(318));if(!ve)throw Error(s(344));if(M=A.memoizedState,M=M!==null?M.dehydrated:null,!M)throw Error(s(317));Jn(M,A)}else ft(),!(A.flags&128)&&(A.memoizedState=null),A.flags|=4;return oi(A),null}return at!==null&&(xf(at),at=null),A.flags&128?(A.lanes=G,A):(Q=Q!==null,G=!1,M===null?dt(A):G=M.memoizedState!==null,Q&&!G&&(A.child.flags|=8192,A.mode&1&&(M===null||Hr.current&1?Qn===0&&(Qn=3):fh())),A.updateQueue!==null&&(A.flags|=4),oi(A),null);case 4:return rn(),iu(M,A),M===null&&Te(A.stateNode.containerInfo),oi(A),null;case 10:return bl(A.type._context),oi(A),null;case 17:return Zr(A.type)&&Or(),oi(A),null;case 19:if(It(Hr),ie=A.memoizedState,ie===null)return oi(A),null;if(Q=(A.flags&128)!==0,he=ie.rendering,he===null)if(Q)Va(ie,!1);else{if(Qn!==0||M!==null&&M.flags&128)for(M=A.child;M!==null;){if(he=An(M),he!==null){for(A.flags|=128,Va(ie,!1),M=he.updateQueue,M!==null&&(A.updateQueue=M,A.flags|=4),A.subtreeFlags=0,M=G,Q=A.child;Q!==null;)G=Q,ie=M,G.flags&=14680066,he=G.alternate,he===null?(G.childLanes=0,G.lanes=ie,G.child=null,G.subtreeFlags=0,G.memoizedProps=null,G.memoizedState=null,G.updateQueue=null,G.dependencies=null,G.stateNode=null):(G.childLanes=he.childLanes,G.lanes=he.lanes,G.child=he.child,G.subtreeFlags=0,G.deletions=null,G.memoizedProps=he.memoizedProps,G.memoizedState=he.memoizedState,G.updateQueue=he.updateQueue,G.type=he.type,ie=he.dependencies,G.dependencies=ie===null?null:{lanes:ie.lanes,firstContext:ie.firstContext}),Q=Q.sibling;return Xt(Hr,Hr.current&1|2),A.child}M=M.sibling}ie.tail!==null&&ii()>Cl&&(A.flags|=128,Q=!0,Va(ie,!1),A.lanes=4194304)}else{if(!Q)if(M=An(he),M!==null){if(A.flags|=128,Q=!0,M=M.updateQueue,M!==null&&(A.updateQueue=M,A.flags|=4),Va(ie,!0),ie.tail===null&&ie.tailMode==="hidden"&&!he.alternate&&!Ie)return oi(A),null}else 2*ii()-ie.renderingStartTime>Cl&&G!==1073741824&&(A.flags|=128,Q=!0,Va(ie,!1),A.lanes=4194304);ie.isBackwards?(he.sibling=A.child,A.child=he):(M=ie.last,M!==null?M.sibling=he:A.child=he,ie.last=he)}return ie.tail!==null?(A=ie.tail,ie.rendering=A,ie.tail=A.sibling,ie.renderingStartTime=ii(),A.sibling=null,M=Hr.current,Xt(Hr,Q?M&1|2:M&1),A):(oi(A),null);case 22:case 23:return bf(),Q=A.memoizedState!==null,M!==null&&M.memoizedState!==null!==Q&&(A.flags|=8192),Q&&A.mode&1?is&1073741824&&(oi(A),Me&&A.subtreeFlags&6&&(A.flags|=8192)):oi(A),null;case 24:return null;case 25:return null}throw Error(s(156,A.tag))}var Wp=a.ReactCurrentOwner,Li=!1;function Kn(M,A,G,Q){A.child=M===null?Un(A,null,G,Q):tn(A,M.child,G,Q)}function On(M,A,G,Q,ie){G=G.render;var he=A.ref;return ya(A,ie),Q=ec(M,A,G,Q,he,ie),G=Sl(),M!==null&&!Li?(A.updateQueue=M.updateQueue,A.flags&=-2053,M.lanes&=~ie,js(M,A,ie)):(Ie&&G&&se(A),A.flags|=1,Kn(M,A,Q,ie),A.child)}function Ln(M,A,G,Q,ie){if(M===null){var he=G.type;return typeof he=="function"&&!hh(he)&&he.defaultProps===void 0&&G.compare===null&&G.defaultProps===void 0?(A.tag=15,A.type=he,Wa(M,A,he,Q,ie)):(M=ph(G.type,null,Q,A,A.mode,ie),M.ref=A.ref,M.return=A,A.child=M)}if(he=M.child,!(M.lanes&ie)){var ze=he.memoizedProps;if(G=G.compare,G=G!==null?G:Is,G(ze,Q)&&M.ref===A.ref)return js(M,A,ie)}return A.flags|=1,M=el(he,Q),M.ref=A.ref,M.return=A,A.child=M}function Wa(M,A,G,Q,ie){if(M!==null&&Is(M.memoizedProps,Q)&&M.ref===A.ref)if(Li=!1,(M.lanes&ie)!==0)M.flags&131072&&(Li=!0);else return A.lanes=M.lanes,js(M,A,ie);return Xa(M,A,G,Q,ie)}function zi(M,A,G){var Q=A.pendingProps,ie=Q.children,he=M!==null?M.memoizedState:null;if(Q.mode==="hidden")if(!(A.mode&1))A.memoizedState={baseLanes:0,cachePool:null},Xt(hu,is),is|=G;else if(G&1073741824)A.memoizedState={baseLanes:0,cachePool:null},Q=he!==null?he.baseLanes:G,Xt(hu,is),is|=Q;else return M=he!==null?he.baseLanes|G:G,A.lanes=A.childLanes=1073741824,A.memoizedState={baseLanes:M,cachePool:null},A.updateQueue=null,Xt(hu,is),is|=M,null;else he!==null?(Q=he.baseLanes|G,A.memoizedState=null):Q=G,Xt(hu,is),is|=Q;return Kn(M,A,ie,G),A.child}function xs(M,A){var G=A.ref;(M===null&&G!==null||M!==null&&M.ref!==G)&&(A.flags|=512,A.flags|=2097152)}function Xa(M,A,G,Q,ie){var he=Zr(G)?Pr:Rr.current;return he=fr(A,he),ya(A,ie),G=ec(M,A,G,Q,he,ie),Q=Sl(),M!==null&&!Li?(A.updateQueue=M.updateQueue,A.flags&=-2053,M.lanes&=~ie,js(M,A,ie)):(Ie&&Q&&se(A),A.flags|=1,Kn(M,A,G,ie),A.child)}function su(M,A,G,Q,ie){if(Zr(G)){var he=!0;ri(A)}else he=!1;if(ya(A,ie),A.stateNode===null)M!==null&&(M.alternate=null,A.alternate=null,A.flags|=2),zd(A,G,Q),Zc(A,G,Q,ie),Q=!0;else if(M===null){var ze=A.stateNode,lt=A.memoizedProps;ze.props=lt;var Mt=ze.context,zt=G.contextType;typeof zt=="object"&&zt!==null?zt=_i(zt):(zt=Zr(G)?Pr:Rr.current,zt=fr(A,zt));var ur=G.getDerivedStateFromProps,Dr=typeof ur=="function"||typeof ze.getSnapshotBeforeUpdate=="function";Dr||typeof ze.UNSAFE_componentWillReceiveProps!="function"&&typeof ze.componentWillReceiveProps!="function"||(lt!==Q||Mt!==zt)&&Vd(A,ze,Q,zt),ys=!1;var Mr=A.memoizedState;ze.state=Mr,Ku(A,Q,ze,ie),Mt=A.memoizedState,lt!==Q||Mr!==Mt||Lr.current||ys?(typeof ur=="function"&&(Qu(A,G,ur,Q),Mt=A.memoizedState),(lt=ys||_s(A,G,lt,Q,Mr,Mt,zt))?(Dr||typeof ze.UNSAFE_componentWillMount!="function"&&typeof ze.componentWillMount!="function"||(typeof ze.componentWillMount=="function"&&ze.componentWillMount(),typeof ze.UNSAFE_componentWillMount=="function"&&ze.UNSAFE_componentWillMount()),typeof ze.componentDidMount=="function"&&(A.flags|=4194308)):(typeof ze.componentDidMount=="function"&&(A.flags|=4194308),A.memoizedProps=Q,A.memoizedState=Mt),ze.props=Q,ze.state=Mt,ze.context=zt,Q=lt):(typeof ze.componentDidMount=="function"&&(A.flags|=4194308),Q=!1)}else{ze=A.stateNode,xo(M,A),lt=A.memoizedProps,zt=A.type===A.elementType?lt:Gi(A.type,lt),ze.props=zt,Dr=A.pendingProps,Mr=ze.context,Mt=G.contextType,typeof Mt=="object"&&Mt!==null?Mt=_i(Mt):(Mt=Zr(G)?Pr:Rr.current,Mt=fr(A,Mt));var Xr=G.getDerivedStateFromProps;(ur=typeof Xr=="function"||typeof ze.getSnapshotBeforeUpdate=="function")||typeof ze.UNSAFE_componentWillReceiveProps!="function"&&typeof ze.componentWillReceiveProps!="function"||(lt!==Dr||Mr!==Mt)&&Vd(A,ze,Q,Mt),ys=!1,Mr=A.memoizedState,ze.state=Mr,Ku(A,Q,ze,ie);var ir=A.memoizedState;lt!==Dr||Mr!==ir||Lr.current||ys?(typeof Xr=="function"&&(Qu(A,G,Xr,Q),ir=A.memoizedState),(zt=ys||_s(A,G,zt,Q,Mr,ir,Mt)||!1)?(ur||typeof ze.UNSAFE_componentWillUpdate!="function"&&typeof ze.componentWillUpdate!="function"||(typeof ze.componentWillUpdate=="function"&&ze.componentWillUpdate(Q,ir,Mt),typeof ze.UNSAFE_componentWillUpdate=="function"&&ze.UNSAFE_componentWillUpdate(Q,ir,Mt)),typeof ze.componentDidUpdate=="function"&&(A.flags|=4),typeof ze.getSnapshotBeforeUpdate=="function"&&(A.flags|=1024)):(typeof ze.componentDidUpdate!="function"||lt===M.memoizedProps&&Mr===M.memoizedState||(A.flags|=4),typeof ze.getSnapshotBeforeUpdate!="function"||lt===M.memoizedProps&&Mr===M.memoizedState||(A.flags|=1024),A.memoizedProps=Q,A.memoizedState=ir),ze.props=Q,ze.state=ir,ze.context=Mt,Q=zt):(typeof ze.componentDidUpdate!="function"||lt===M.memoizedProps&&Mr===M.memoizedState||(A.flags|=4),typeof ze.getSnapshotBeforeUpdate!="function"||lt===M.memoizedProps&&Mr===M.memoizedState||(A.flags|=1024),Q=!1)}return ns(M,A,G,Q,he,ie)}function ns(M,A,G,Q,ie,he){xs(M,A);var ze=(A.flags&128)!==0;if(!Q&&!ze)return ie&&Js(A,G,!1),js(M,A,he);Q=A.stateNode,Wp.current=A;var lt=ze&&typeof G.getDerivedStateFromError!="function"?null:Q.render();return A.flags|=1,M!==null&&ze?(A.child=tn(A,M.child,null,he),A.child=tn(A,null,lt,he)):Kn(M,A,lt,he),A.memoizedState=Q.state,ie&&Js(A,G,!0),A.child}function lf(M){var A=M.stateNode;A.pendingContext?ti(M,A.pendingContext,A.pendingContext!==A.context):A.context&&ti(M,A.context,!1),Mn(M,A.containerInfo)}function Xp(M,A,G,Q,ie){return ft(),ar(ie),A.flags|=256,Kn(M,A,G,Q),A.child}var uf={dehydrated:null,treeContext:null,retryLane:0};function ou(M){return{baseLanes:M,cachePool:null}}function Yp(M,A,G){var Q=A.pendingProps,ie=Hr.current,he=!1,ze=(A.flags&128)!==0,lt;if((lt=ze)||(lt=M!==null&&M.memoizedState===null?!1:(ie&2)!==0),lt?(he=!0,A.flags&=-129):(M===null||M.memoizedState!==null)&&(ie|=1),Xt(Hr,ie&1),M===null)return pt(A),M=A.memoizedState,M!==null&&(M=M.dehydrated,M!==null)?(A.mode&1?$t(M)?A.lanes=8:A.lanes=1073741824:A.lanes=1,null):(ie=Q.children,M=Q.fallback,he?(Q=A.mode,he=A.child,ie={mode:"hidden",children:ie},!(Q&1)&&he!==null?(he.childLanes=0,he.pendingProps=ie):he=Mf(ie,Q,0,null),M=vu(M,Q,G,null),he.return=A,M.return=A,he.sibling=M,A.child=he,A.child.memoizedState=ou(G),A.memoizedState=uf,M):Vo(A,ie));if(ie=M.memoizedState,ie!==null){if(lt=ie.dehydrated,lt!==null){if(ze)return A.flags&256?(A.flags&=-257,ff(M,A,G,Error(s(422)))):A.memoizedState!==null?(A.child=M.child,A.flags|=128,null):(he=Q.fallback,ie=A.mode,Q=Mf({mode:"visible",children:Q.children},ie,0,null),he=vu(he,ie,G,null),he.flags|=2,Q.return=A,he.return=A,Q.sibling=he,A.child=Q,A.mode&1&&tn(A,M.child,null,G),A.child.memoizedState=ou(G),A.memoizedState=uf,he);if(!(A.mode&1))A=ff(M,A,G,null);else if($t(lt))A=ff(M,A,G,Error(s(419)));else if(Q=(G&M.childLanes)!==0,Li||Q){if(Q=ai,Q!==null){switch(G&-G){case 4:he=2;break;case 16:he=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:he=32;break;case 536870912:he=268435456;break;default:he=0}Q=he&(Q.suspendedLanes|G)?0:he,Q!==0&&Q!==ie.retryLane&&(ie.retryLane=Q,ss(M,Q,-1))}fh(),A=ff(M,A,G,Error(s(421)))}else Jt(lt)?(A.flags|=128,A.child=M.child,A=ay.bind(null,M),br(lt,A),A=null):(G=ie.treeContext,ve&&(Le=an(lt),we=A,Ie=!0,at=null,Je=!1,G!==null&&(fn[Hi++]=k,fn[Hi++]=F,fn[Hi++]=E,k=G.id,F=G.overflow,E=A)),A=Vo(A,A.pendingProps.children),A.flags|=4096);return A}return he?(Q=sh(M,A,Q.children,Q.fallback,G),he=A.child,ie=M.child.memoizedState,he.memoizedState=ie===null?ou(G):{baseLanes:ie.baseLanes|G,cachePool:null},he.childLanes=M.childLanes&~G,A.memoizedState=uf,Q):(G=cf(M,A,Q.children,G),A.memoizedState=null,G)}return he?(Q=sh(M,A,Q.children,Q.fallback,G),he=A.child,ie=M.child.memoizedState,he.memoizedState=ie===null?ou(G):{baseLanes:ie.baseLanes|G,cachePool:null},he.childLanes=M.childLanes&~G,A.memoizedState=uf,Q):(G=cf(M,A,Q.children,G),A.memoizedState=null,G)}function Vo(M,A){return A=Mf({mode:"visible",children:A},M.mode,0,null),A.return=M,M.child=A}function cf(M,A,G,Q){var ie=M.child;return M=ie.sibling,G=el(ie,{mode:"visible",children:G}),!(A.mode&1)&&(G.lanes=Q),G.return=A,G.sibling=null,M!==null&&(Q=A.deletions,Q===null?(A.deletions=[M],A.flags|=16):Q.push(M)),A.child=G}function sh(M,A,G,Q,ie){var he=A.mode;M=M.child;var ze=M.sibling,lt={mode:"hidden",children:G};return!(he&1)&&A.child!==M?(G=A.child,G.childLanes=0,G.pendingProps=lt,A.deletions=null):(G=el(M,lt),G.subtreeFlags=M.subtreeFlags&14680064),ze!==null?Q=el(ze,Q):(Q=vu(Q,he,ie,null),Q.flags|=2),Q.return=A,G.return=A,G.sibling=Q,A.child=G,Q}function ff(M,A,G,Q){return Q!==null&&ar(Q),tn(A,M.child,null,G),M=Vo(A,A.pendingProps.children),M.flags|=2,A.memoizedState=null,M}function ny(M,A,G){M.lanes|=A;var Q=M.alternate;Q!==null&&(Q.lanes|=A),ga(M.return,A,G)}function wa(M,A,G,Q,ie){var he=M.memoizedState;he===null?M.memoizedState={isBackwards:A,rendering:null,renderingStartTime:0,last:Q,tail:G,tailMode:ie}:(he.isBackwards=A,he.rendering=null,he.renderingStartTime=0,he.last=Q,he.tail=G,he.tailMode=ie)}function au(M,A,G){var Q=A.pendingProps,ie=Q.revealOrder,he=Q.tail;if(Kn(M,A,Q.children,G),Q=Hr.current,Q&2)Q=Q&1|2,A.flags|=128;else{if(M!==null&&M.flags&128)e:for(M=A.child;M!==null;){if(M.tag===13)M.memoizedState!==null&&ny(M,G,A);else if(M.tag===19)ny(M,G,A);else if(M.child!==null){M.child.return=M,M=M.child;continue}if(M===A)break e;for(;M.sibling===null;){if(M.return===null||M.return===A)break e;M=M.return}M.sibling.return=M.return,M=M.sibling}Q&=1}if(Xt(Hr,Q),!(A.mode&1))A.memoizedState=null;else switch(ie){case"forwards":for(G=A.child,ie=null;G!==null;)M=G.alternate,M!==null&&An(M)===null&&(ie=G),G=G.sibling;G=ie,G===null?(ie=A.child,A.child=null):(ie=G.sibling,G.sibling=null),wa(A,!1,ie,G,he);break;case"backwards":for(G=null,ie=A.child,A.child=null;ie!==null;){if(M=ie.alternate,M!==null&&An(M)===null){A.child=ie;break}M=ie.sibling,ie.sibling=G,G=ie,ie=M}wa(A,!0,G,null,he);break;case"together":wa(A,!1,null,null,void 0);break;default:A.memoizedState=null}return A.child}function js(M,A,G){if(M!==null&&(A.dependencies=M.dependencies),Sa|=A.lanes,!(G&A.childLanes))return null;if(M!==null&&A.child!==M.child)throw Error(s(153));if(A.child!==null){for(M=A.child,G=el(M,M.pendingProps),A.child=G,G.return=A;M.sibling!==null;)M=M.sibling,G=G.sibling=el(M,M.pendingProps),G.return=A;G.sibling=null}return A.child}function oh(M,A,G){switch(A.tag){case 3:lf(A),ft();break;case 5:bi(A);break;case 1:Zr(A.type)&&ri(A);break;case 4:Mn(A,A.stateNode.containerInfo);break;case 10:ma(A,A.type._context,A.memoizedProps.value);break;case 13:var Q=A.memoizedState;if(Q!==null)return Q.dehydrated!==null?(Xt(Hr,Hr.current&1),A.flags|=128,null):G&A.child.childLanes?Yp(M,A,G):(Xt(Hr,Hr.current&1),M=js(M,A,G),M!==null?M.sibling:null);Xt(Hr,Hr.current&1);break;case 19:if(Q=(G&A.childLanes)!==0,M.flags&128){if(Q)return au(M,A,G);A.flags|=128}var ie=A.memoizedState;if(ie!==null&&(ie.rendering=null,ie.tail=null,ie.lastEffect=null),Xt(Hr,Hr.current),Q)break;return null;case 22:case 23:return A.lanes=0,zi(M,A,G)}return js(M,A,G)}function ah(M,A){switch(le(A),A.tag){case 1:return Zr(A.type)&&Or(),M=A.flags,M&65536?(A.flags=M&-65537|128,A):null;case 3:return rn(),It(Lr),It(Rr),Ks(),M=A.flags,M&65536&&!(M&128)?(A.flags=M&-65537|128,A):null;case 5:return jn(A),null;case 13:if(It(Hr),M=A.memoizedState,M!==null&&M.dehydrated!==null){if(A.alternate===null)throw Error(s(340));ft()}return M=A.flags,M&65536?(A.flags=M&-65537|128,A):null;case 19:return It(Hr),null;case 4:return rn(),null;case 10:return bl(A.type._context),null;case 22:case 23:return bf(),null;case 24:return null;default:return null}}var bs=!1,Di=!1,lu=typeof WeakSet=="function"?WeakSet:Set,qt=null;function wo(M,A){var G=M.ref;if(G!==null)if(typeof G=="function")try{G(null)}catch(Q){Ss(M,A,Q)}else G.current=null}function Ya(M,A,G){try{G()}catch(Q){Ss(M,A,Q)}}var qp=!1;function Jp(M,A){for(q(M.containerInfo),qt=A;qt!==null;)if(M=qt,A=M.child,(M.subtreeFlags&1028)!==0&&A!==null)A.return=M,qt=A;else for(;qt!==null;){M=qt;try{var G=M.alternate;if(M.flags&1024)switch(M.tag){case 0:case 11:case 15:break;case 1:if(G!==null){var Q=G.memoizedProps,ie=G.memoizedState,he=M.stateNode,ze=he.getSnapshotBeforeUpdate(M.elementType===M.type?Q:Gi(M.type,Q),ie);he.__reactInternalSnapshotBeforeUpdate=ze}break;case 3:Me&&ut(M.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(s(163))}}catch(lt){Ss(M,M.return,lt)}if(A=M.sibling,A!==null){A.return=M.return,qt=A;break}qt=M.return}return G=qp,qp=!1,G}function qa(M,A,G){var Q=A.updateQueue;if(Q=Q!==null?Q.lastEffect:null,Q!==null){var ie=Q=Q.next;do{if((ie.tag&M)===M){var he=ie.destroy;ie.destroy=void 0,he!==void 0&&Ya(A,G,he)}ie=ie.next}while(ie!==Q)}}function Vi(M,A){if(A=A.updateQueue,A=A!==null?A.lastEffect:null,A!==null){var G=A=A.next;do{if((G.tag&M)===M){var Q=G.create;G.destroy=Q()}G=G.next}while(G!==A)}}function ws(M){var A=M.ref;if(A!==null){var G=M.stateNode;switch(M.tag){case 5:M=J(G);break;default:M=G}typeof A=="function"?A(M):A.current=M}}function Gn(M,A,G){if(es&&typeof es.onCommitFiberUnmount=="function")try{es.onCommitFiberUnmount(No,A)}catch{}switch(A.tag){case 0:case 11:case 14:case 15:if(M=A.updateQueue,M!==null&&(M=M.lastEffect,M!==null)){var Q=M=M.next;do{var ie=Q,he=ie.destroy;ie=ie.tag,he!==void 0&&(ie&2||ie&4)&&Ya(A,G,he),Q=Q.next}while(Q!==M)}break;case 1:if(wo(A,G),M=A.stateNode,typeof M.componentWillUnmount=="function")try{M.props=A.memoizedProps,M.state=A.memoizedState,M.componentWillUnmount()}catch(ze){Ss(A,G,ze)}break;case 5:wo(A,G);break;case 4:Me?Zp(M,A,G):xe&&xe&&(A=A.stateNode.containerInfo,G=vt(A),yr(A,G))}}function So(M,A,G){for(var Q=A;;)if(Gn(M,Q,G),Q.child===null||Me&&Q.tag===4){if(Q===A)break;for(;Q.sibling===null;){if(Q.return===null||Q.return===A)return;Q=Q.return}Q.sibling.return=Q.return,Q=Q.sibling}else Q.child.return=Q,Q=Q.child}function Kp(M){var A=M.alternate;A!==null&&(M.alternate=null,Kp(A)),M.child=null,M.deletions=null,M.sibling=null,M.tag===5&&(A=M.stateNode,A!==null&&Ae(A)),M.stateNode=null,M.return=null,M.dependencies=null,M.memoizedProps=null,M.memoizedState=null,M.pendingProps=null,M.stateNode=null,M.updateQueue=null}function Qp(M){return M.tag===5||M.tag===3||M.tag===4}function lh(M){e:for(;;){for(;M.sibling===null;){if(M.return===null||Qp(M.return))return null;M=M.return}for(M.sibling.return=M.return,M=M.sibling;M.tag!==5&&M.tag!==6&&M.tag!==18;){if(M.flags&2||M.child===null||M.tag===4)continue e;M.child.return=M,M=M.child}if(!(M.flags&2))return M.stateNode}}function uh(M){if(Me){e:{for(var A=M.return;A!==null;){if(Qp(A))break e;A=A.return}throw Error(s(160))}var G=A;switch(G.tag){case 5:A=G.stateNode,G.flags&32&&(ke(A),G.flags&=-33),G=lh(M),oc(M,G,A);break;case 3:case 4:A=G.stateNode.containerInfo,G=lh(M),ch(M,G,A);break;default:throw Error(s(161))}}}function ch(M,A,G){var Q=M.tag;if(Q===5||Q===6)M=M.stateNode,A?Se(G,M,A):rt(G,M);else if(Q!==4&&(M=M.child,M!==null))for(ch(M,A,G),M=M.sibling;M!==null;)ch(M,A,G),M=M.sibling}function oc(M,A,G){var Q=M.tag;if(Q===5||Q===6)M=M.stateNode,A?ue(G,M,A):Be(G,M);else if(Q!==4&&(M=M.child,M!==null))for(oc(M,A,G),M=M.sibling;M!==null;)oc(M,A,G),M=M.sibling}function Zp(M,A,G){for(var Q=A,ie=!1,he,ze;;){if(!ie){ie=Q.return;e:for(;;){if(ie===null)throw Error(s(160));switch(he=ie.stateNode,ie.tag){case 5:ze=!1;break e;case 3:he=he.containerInfo,ze=!0;break e;case 4:he=he.containerInfo,ze=!0;break e}ie=ie.return}ie=!0}if(Q.tag===5||Q.tag===6)So(M,Q,G),ze?be(he,Q.stateNode):De(he,Q.stateNode);else if(Q.tag===18)ze?mr(he,Q.stateNode):At(he,Q.stateNode);else if(Q.tag===4){if(Q.child!==null){he=Q.stateNode.containerInfo,ze=!0,Q.child.return=Q,Q=Q.child;continue}}else if(Gn(M,Q,G),Q.child!==null){Q.child.return=Q,Q=Q.child;continue}if(Q===A)break;for(;Q.sibling===null;){if(Q.return===null||Q.return===A)return;Q=Q.return,Q.tag===4&&(ie=!1)}Q.sibling.return=Q.return,Q=Q.sibling}}function El(M,A){if(Me){switch(A.tag){case 0:case 11:case 14:case 15:qa(3,A,A.return),Vi(3,A),qa(5,A,A.return);return;case 1:return;case 5:var G=A.stateNode;if(G!=null){var Q=A.memoizedProps;M=M!==null?M.memoizedProps:Q;var ie=A.type,he=A.updateQueue;A.updateQueue=null,he!==null&&ge(G,he,ie,M,Q,A)}return;case 6:if(A.stateNode===null)throw Error(s(162));G=A.memoizedProps,Ye(A.stateNode,M!==null?M.memoizedProps:G,G);return;case 3:ve&&M!==null&&M.memoizedState.isDehydrated&&Tt(A.stateNode.containerInfo);return;case 12:return;case 13:ac(A);return;case 19:ac(A);return;case 17:return}throw Error(s(163))}switch(A.tag){case 0:case 11:case 14:case 15:qa(3,A,A.return),Vi(3,A),qa(5,A,A.return);return;case 12:return;case 13:ac(A);return;case 19:ac(A);return;case 3:ve&&M!==null&&M.memoizedState.isDehydrated&&Tt(A.stateNode.containerInfo);break;case 22:case 23:return}e:if(xe){switch(A.tag){case 1:case 5:case 6:break e;case 3:case 4:A=A.stateNode,yr(A.containerInfo,A.pendingChildren);break e}throw Error(s(163))}}function ac(M){var A=M.updateQueue;if(A!==null){M.updateQueue=null;var G=M.stateNode;G===null&&(G=M.stateNode=new lu),A.forEach(function(Q){var ie=ly.bind(null,M,Q);G.has(Q)||(G.add(Q),Q.then(ie,ie))})}}function W_(M,A){for(qt=A;qt!==null;){A=qt;var G=A.deletions;if(G!==null)for(var Q=0;Q<G.length;Q++){var ie=G[Q];try{var he=M;Me?Zp(he,ie,A):So(he,ie,A);var ze=ie.alternate;ze!==null&&(ze.return=null),ie.return=null}catch(vr){Ss(ie,A,vr)}}if(G=A.child,A.subtreeFlags&12854&&G!==null)G.return=A,qt=G;else for(;qt!==null;){A=qt;try{var lt=A.flags;if(lt&32&&Me&&ke(A.stateNode),lt&512){var Mt=A.alternate;if(Mt!==null){var zt=Mt.ref;zt!==null&&(typeof zt=="function"?zt(null):zt.current=null)}}if(lt&8192)switch(A.tag){case 13:if(A.memoizedState!==null){var ur=A.alternate;(ur===null||ur.memoizedState===null)&&(vf=ii())}break;case 22:var Dr=A.memoizedState!==null,Mr=A.alternate,Xr=Mr!==null&&Mr.memoizedState!==null;if(G=A,Me){e:if(Q=G,ie=Dr,he=null,Me)for(var ir=Q;;){if(ir.tag===5){if(he===null){he=ir;var Yi=ir.stateNode;ie?ot(Yi):it(ir.stateNode,ir.memoizedProps)}}else if(ir.tag===6){if(he===null){var ro=ir.stateNode;ie?Ce(ro):Xe(ro,ir.memoizedProps)}}else if((ir.tag!==22&&ir.tag!==23||ir.memoizedState===null||ir===Q)&&ir.child!==null){ir.child.return=ir,ir=ir.child;continue}if(ir===Q)break;for(;ir.sibling===null;){if(ir.return===null||ir.return===Q)break e;he===ir&&(he=null),ir=ir.return}he===ir&&(he=null),ir.sibling.return=ir.return,ir=ir.sibling}}if(Dr&&!Xr&&G.mode&1){qt=G;for(var yt=G.child;yt!==null;){for(G=qt=yt;qt!==null;){Q=qt;var ct=Q.child;switch(Q.tag){case 0:case 11:case 14:case 15:qa(4,Q,Q.return);break;case 1:wo(Q,Q.return);var wt=Q.stateNode;if(typeof wt.componentWillUnmount=="function"){var tr=Q.return;try{wt.props=Q.memoizedProps,wt.state=Q.memoizedState,wt.componentWillUnmount()}catch(vr){Ss(Q,tr,vr)}}break;case 5:wo(Q,Q.return);break;case 22:if(Q.memoizedState!==null){em(G);continue}}ct!==null?(ct.return=Q,qt=ct):em(G)}yt=yt.sibling}}}switch(lt&4102){case 2:uh(A),A.flags&=-3;break;case 6:uh(A),A.flags&=-3,El(A.alternate,A);break;case 4096:A.flags&=-4097;break;case 4100:A.flags&=-4097,El(A.alternate,A);break;case 4:El(A.alternate,A)}}catch(vr){Ss(A,A.return,vr)}if(G=A.sibling,G!==null){G.return=A.return,qt=G;break}qt=A.return}}}function df(M,A,G){qt=M,hf(M)}function hf(M,A,G){for(var Q=(M.mode&1)!==0;qt!==null;){var ie=qt,he=ie.child;if(ie.tag===22&&Q){var ze=ie.memoizedState!==null||bs;if(!ze){var lt=ie.alternate,Mt=lt!==null&&lt.memoizedState!==null||Di;lt=bs;var zt=Di;if(bs=ze,(Di=Mt)&&!zt)for(qt=ie;qt!==null;)ze=qt,Mt=ze.child,ze.tag===22&&ze.memoizedState!==null?uu(ie):Mt!==null?(Mt.return=ze,qt=Mt):uu(ie);for(;he!==null;)qt=he,hf(he),he=he.sibling;qt=ie,bs=lt,Di=zt}$p(M)}else ie.subtreeFlags&8772&&he!==null?(he.return=ie,qt=he):$p(M)}}function $p(M){for(;qt!==null;){var A=qt;if(A.flags&8772){var G=A.alternate;try{if(A.flags&8772)switch(A.tag){case 0:case 11:case 15:Di||Vi(5,A);break;case 1:var Q=A.stateNode;if(A.flags&4&&!Di)if(G===null)Q.componentDidMount();else{var ie=A.elementType===A.type?G.memoizedProps:Gi(A.type,G.memoizedProps);Q.componentDidUpdate(ie,G.memoizedState,Q.__reactInternalSnapshotBeforeUpdate)}var he=A.updateQueue;he!==null&&Hd(A,he,Q);break;case 3:var ze=A.updateQueue;if(ze!==null){if(G=null,A.child!==null)switch(A.child.tag){case 5:G=J(A.child.stateNode);break;case 1:G=A.child.stateNode}Hd(A,ze,G)}break;case 5:var lt=A.stateNode;G===null&&A.flags&4&&de(lt,A.type,A.memoizedProps,A);break;case 6:break;case 4:break;case 12:break;case 13:if(ve&&A.memoizedState===null){var Mt=A.alternate;if(Mt!==null){var zt=Mt.memoizedState;if(zt!==null){var ur=zt.dehydrated;ur!==null&&Gt(ur)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(s(163))}Di||A.flags&512&&ws(A)}catch(Dr){Ss(A,A.return,Dr)}}if(A===M){qt=null;break}if(G=A.sibling,G!==null){G.return=A.return,qt=G;break}qt=A.return}}function em(M){for(;qt!==null;){var A=qt;if(A===M){qt=null;break}var G=A.sibling;if(G!==null){G.return=A.return,qt=G;break}qt=A.return}}function uu(M){for(;qt!==null;){var A=qt;try{switch(A.tag){case 0:case 11:case 15:var G=A.return;try{Vi(4,A)}catch(Mt){Ss(A,G,Mt)}break;case 1:var Q=A.stateNode;if(typeof Q.componentDidMount=="function"){var ie=A.return;try{Q.componentDidMount()}catch(Mt){Ss(A,ie,Mt)}}var he=A.return;try{ws(A)}catch(Mt){Ss(A,he,Mt)}break;case 5:var ze=A.return;try{ws(A)}catch(Mt){Ss(A,ze,Mt)}}}catch(Mt){Ss(A,A.return,Mt)}if(A===M){qt=null;break}var lt=A.sibling;if(lt!==null){lt.return=A.return,qt=lt;break}qt=A.return}}var pf=0,cu=1,fu=2,Ja=3,lc=4;if(typeof Symbol=="function"&&Symbol.for){var du=Symbol.for;pf=du("selector.component"),cu=du("selector.has_pseudo_class"),fu=du("selector.role"),Ja=du("selector.test_id"),lc=du("selector.text")}function mf(M){var A=ne(M);if(A!=null){if(typeof A.memoizedProps["data-testname"]!="string")throw Error(s(364));return A}if(M=_e(M),M===null)throw Error(s(362));return M.stateNode.current}function gf(M,A){switch(A.$$typeof){case pf:if(M.type===A.value)return!0;break;case cu:e:{A=A.value,M=[M,0];for(var G=0;G<M.length;){var Q=M[G++],ie=M[G++],he=A[ie];if(Q.tag!==5||!Ke(Q)){for(;he!=null&&gf(Q,he);)ie++,he=A[ie];if(ie===A.length){A=!0;break e}else for(Q=Q.child;Q!==null;)M.push(Q,ie),Q=Q.sibling}}A=!1}return A;case fu:if(M.tag===5&&$e(M.stateNode,A.value))return!0;break;case lc:if((M.tag===5||M.tag===6)&&(M=We(M),M!==null&&0<=M.indexOf(A.value)))return!0;break;case Ja:if(M.tag===5&&(M=M.memoizedProps["data-testname"],typeof M=="string"&&M.toLowerCase()===A.value.toLowerCase()))return!0;break;default:throw Error(s(365))}return!1}function Tl(M){switch(M.$$typeof){case pf:return"<"+(C(M.value)||"Unknown")+">";case cu:return":has("+(Tl(M)||"")+")";case fu:return'[role="'+M.value+'"]';case lc:return'"'+M.value+'"';case Ja:return'[data-testname="'+M.value+'"]';default:throw Error(s(365))}}function Zs(M,A){var G=[];M=[M,0];for(var Q=0;Q<M.length;){var ie=M[Q++],he=M[Q++],ze=A[he];if(ie.tag!==5||!Ke(ie)){for(;ze!=null&&gf(ie,ze);)he++,ze=A[he];if(he===A.length)G.push(ie);else for(ie=ie.child;ie!==null;)M.push(ie,he),ie=ie.sibling}}return G}function Ka(M,A){if(!Ge)throw Error(s(363));M=mf(M),M=Zs(M,A),A=[],M=Array.from(M);for(var G=0;G<M.length;){var Q=M[G++];if(Q.tag===5)Ke(Q)||A.push(Q.stateNode);else for(Q=Q.child;Q!==null;)M.push(Q),Q=Q.sibling}return A}var tm=Math.ceil,yf=a.ReactCurrentDispatcher,Wo=a.ReactCurrentOwner,Tn=a.ReactCurrentBatchConfig,zr=0,ai=null,Cn=null,Wn=0,is=0,hu=Kt(0),Qn=0,uc=null,Sa=0,$s=0,pu=0,Qa=null,hi=null,vf=0,Cl=1/0;function mu(){Cl=ii()+500}var cc=!1,Hn=null,Xo=null,fc=!1,Ma=null,gu=0,yu=0,Za=null,Fn=-1,Zn=0;function gn(){return zr&6?ii():Fn!==-1?Fn:Fn=ii()}function Yo(M){return M.mode&1?zr&2&&Wn!==0?Wn&-Wn:Qc.transition!==null?(Zn===0&&(M=Bn,Bn<<=1,!(Bn&4194240)&&(Bn=64),Zn=M),Zn):(M=Fr,M!==0?M:Pe()):1}function ss(M,A,G){if(50<yu)throw yu=0,Za=null,Error(s(185));var Q=Rl(M,A);return Q===null?null:(Fo(Q,A,G),(!(zr&2)||Q!==ai)&&(Q===ai&&(!(zr&2)&&($s|=A),Qn===4&&Xi(Q,Wn)),Ls(Q,G),A===1&&zr===0&&!(M.mode&1)&&(mu(),Ga&&gs())),Q)}function Rl(M,A){M.lanes|=A;var G=M.alternate;for(G!==null&&(G.lanes|=A),G=M,M=M.return;M!==null;)M.childLanes|=A,G=M.alternate,G!==null&&(G.childLanes|=A),G=M,M=M.return;return G.tag===3?G.stateNode:null}function Ls(M,A){var G=M.callbackNode;Oa(M,A);var Q=_l(M,M===ai?Wn:0);if(Q===0)G!==null&&Na(G),M.callbackNode=null,M.callbackPriority=0;else if(A=Q&-Q,M.callbackPriority!==A){if(G!=null&&Na(G),A===1)M.tag===0?Jl(eo.bind(null,M)):ql(eo.bind(null,M)),je?Ue(function(){zr===0&&gs()}):Fa(Ua,gs),G=null;else{switch(vo(Q)){case 1:G=Ua;break;case 4:G=Gd;break;case 16:G=ps;break;case 536870912:G=Ps;break;default:G=ps}G=dh(G,Wi.bind(null,M))}M.callbackPriority=A,M.callbackNode=G}}function Wi(M,A){if(Fn=-1,Zn=0,zr&6)throw Error(s(327));var G=M.callbackNode;if(Aa()&&M.callbackNode!==G)return null;var Q=_l(M,M===ai?Wn:0);if(Q===0)return null;if(Q&30||Q&M.expiredLanes||A)A=wf(M,Q);else{A=Q;var ie=zr;zr|=2;var he=im();(ai!==M||Wn!==A)&&(mu(),$a(M,A));do try{sy();break}catch(lt){nm(M,lt)}while(!0);Ri(),yf.current=he,zr=ie,Cn!==null?A=0:(ai=null,Wn=0,A=Qn)}if(A!==0){if(A===2&&(ie=Xl(M),ie!==0&&(Q=ie,A=_f(M,ie))),A===1)throw G=uc,$a(M,0),Xi(M,Q),Ls(M,ii()),G;if(A===6)Xi(M,Q);else{if(ie=M.current.alternate,!(Q&30)&&!rm(ie)&&(A=wf(M,Q),A===2&&(he=Xl(M),he!==0&&(Q=he,A=_f(M,he))),A===1))throw G=uc,$a(M,0),Xi(M,Q),Ls(M,ii()),G;switch(M.finishedWork=ie,M.finishedLanes=Q,A){case 0:case 1:throw Error(s(345));case 2:qo(M,hi);break;case 3:if(Xi(M,Q),(Q&130023424)===Q&&(A=vf+500-ii(),10<A)){if(_l(M,0)!==0)break;if(ie=M.suspendedLanes,(ie&Q)!==Q){gn(),M.pingedLanes|=M.suspendedLanes&ie;break}M.timeoutHandle=ae(qo.bind(null,M,hi),A);break}qo(M,hi);break;case 4:if(Xi(M,Q),(Q&4194240)===Q)break;for(A=M.eventTimes,ie=-1;0<Q;){var ze=31-Jr(Q);he=1<<ze,ze=A[ze],ze>ie&&(ie=ze),Q&=~he}if(Q=ie,Q=ii()-Q,Q=(120>Q?120:480>Q?480:1080>Q?1080:1920>Q?1920:3e3>Q?3e3:4320>Q?4320:1960*tm(Q/1960))-Q,10<Q){M.timeoutHandle=ae(qo.bind(null,M,hi),Q);break}qo(M,hi);break;case 5:qo(M,hi);break;default:throw Error(s(329))}}}return Ls(M,ii()),M.callbackNode===G?Wi.bind(null,M):null}function _f(M,A){var G=Qa;return M.current.memoizedState.isDehydrated&&($a(M,A).flags|=256),M=wf(M,A),M!==2&&(A=hi,hi=G,A!==null&&xf(A)),M}function xf(M){hi===null?hi=M:hi.push.apply(hi,M)}function rm(M){for(var A=M;;){if(A.flags&16384){var G=A.updateQueue;if(G!==null&&(G=G.stores,G!==null))for(var Q=0;Q<G.length;Q++){var ie=G[Q],he=ie.getSnapshot;ie=ie.value;try{if(!Ui(he(),ie))return!1}catch{return!1}}}if(G=A.child,A.subtreeFlags&16384&&G!==null)G.return=A,A=G;else{if(A===M)break;for(;A.sibling===null;){if(A.return===null||A.return===M)return!0;A=A.return}A.sibling.return=A.return,A=A.sibling}}return!0}function Xi(M,A){for(A&=~pu,A&=~$s,M.suspendedLanes|=A,M.pingedLanes&=~A,M=M.expirationTimes;0<A;){var G=31-Jr(A),Q=1<<G;M[G]=-1,A&=~Q}}function eo(M){if(zr&6)throw Error(s(327));Aa();var A=_l(M,0);if(!(A&1))return Ls(M,ii()),null;var G=wf(M,A);if(M.tag!==0&&G===2){var Q=Xl(M);Q!==0&&(A=Q,G=_f(M,Q))}if(G===1)throw G=uc,$a(M,0),Xi(M,A),Ls(M,ii()),G;if(G===6)throw Error(s(345));return M.finishedWork=M.current.alternate,M.finishedLanes=A,qo(M,hi),Ls(M,ii()),null}function dc(M){Ma!==null&&Ma.tag===0&&!(zr&6)&&Aa();var A=zr;zr|=1;var G=Tn.transition,Q=Fr;try{if(Tn.transition=null,Fr=1,M)return M()}finally{Fr=Q,Tn.transition=G,zr=A,!(zr&6)&&gs()}}function bf(){is=hu.current,It(hu)}function $a(M,A){M.finishedWork=null,M.finishedLanes=0;var G=M.timeoutHandle;if(G!==ye&&(M.timeoutHandle=ye,pe(G)),Cn!==null)for(G=Cn.return;G!==null;){var Q=G;switch(le(Q),Q.tag){case 1:Q=Q.type.childContextTypes,Q!=null&&Or();break;case 3:rn(),It(Lr),It(Rr),Ks();break;case 5:jn(Q);break;case 4:rn();break;case 13:It(Hr);break;case 19:It(Hr);break;case 10:bl(Q.type._context);break;case 22:case 23:bf()}G=G.return}if(ai=M,Cn=M=el(M.current,null),Wn=is=A,Qn=0,uc=null,pu=$s=Sa=0,hi=Qa=null,ts!==null){for(A=0;A<ts.length;A++)if(G=ts[A],Q=G.interleaved,Q!==null){G.interleaved=null;var ie=Q.next,he=G.pending;if(he!==null){var ze=he.next;he.next=ie,Q.next=ze}G.pending=Q}ts=null}return M}function nm(M,A){do{var G=Cn;try{if(Ri(),bo.current=ic,Wd){for(var Q=qn.memoizedState;Q!==null;){var ie=Q.queue;ie!==null&&(ie.pending=null),Q=Q.next}Wd=!1}if(eu=0,Ii=Pi=qn=null,xa=!1,tu=0,Wo.current=null,G===null||G.return===null){Qn=1,uc=A,Cn=null;break}e:{var he=M,ze=G.return,lt=G,Mt=A;if(A=Wn,lt.flags|=32768,Mt!==null&&typeof Mt=="object"&&typeof Mt.then=="function"){var zt=Mt,ur=lt,Dr=ur.tag;if(!(ur.mode&1)&&(Dr===0||Dr===11||Dr===15)){var Mr=ur.alternate;Mr?(ur.updateQueue=Mr.updateQueue,ur.memoizedState=Mr.memoizedState,ur.lanes=Mr.lanes):(ur.updateQueue=null,ur.memoizedState=null)}var Xr=Vp(ze);if(Xr!==null){Xr.flags&=-257,nu(Xr,ze,lt,he,A),Xr.mode&1&&za(he,zt,A),A=Xr,Mt=zt;var ir=A.updateQueue;if(ir===null){var Yi=new Set;Yi.add(Mt),A.updateQueue=Yi}else ir.add(Mt);break e}else{if(!(A&1)){za(he,zt,A),fh();break e}Mt=Error(s(426))}}else if(Ie&&lt.mode&1){var ro=Vp(ze);if(ro!==null){!(ro.flags&65536)&&(ro.flags|=256),nu(ro,ze,lt,he,A),ar(Mt);break e}}he=Mt,Qn!==4&&(Qn=2),Qa===null?Qa=[he]:Qa.push(he),Mt=zp(Mt,lt),lt=ze;do{switch(lt.tag){case 3:lt.flags|=65536,A&=-A,lt.lanes|=A;var yt=ry(lt,Mt,A);Go(lt,yt);break e;case 1:he=Mt;var ct=lt.type,wt=lt.stateNode;if(!(lt.flags&128)&&(typeof ct.getDerivedStateFromError=="function"||wt!==null&&typeof wt.componentDidCatch=="function"&&(Xo===null||!Xo.has(wt)))){lt.flags|=65536,A&=-A,lt.lanes|=A;var tr=th(lt,he,A);Go(lt,tr);break e}}lt=lt.return}while(lt!==null)}om(G)}catch(vr){A=vr,Cn===G&&G!==null&&(Cn=G=G.return);continue}break}while(!0)}function im(){var M=yf.current;return yf.current=ic,M===null?ic:M}function fh(){(Qn===0||Qn===3||Qn===2)&&(Qn=4),ai===null||!(Sa&268435455)&&!($s&268435455)||Xi(ai,Wn)}function wf(M,A){var G=zr;zr|=2;var Q=im();ai===M&&Wn===A||$a(M,A);do try{iy();break}catch(ie){nm(M,ie)}while(!0);if(Ri(),zr=G,yf.current=Q,Cn!==null)throw Error(s(261));return ai=null,Wn=0,Qn}function iy(){for(;Cn!==null;)sm(Cn)}function sy(){for(;Cn!==null&&!ha();)sm(Cn)}function sm(M){var A=um(M.alternate,M,is);M.memoizedProps=M.pendingProps,A===null?om(M):Cn=A,Wo.current=null}function om(M){var A=M;do{var G=A.alternate;if(M=A.return,A.flags&32768){if(G=ah(G,A),G!==null){G.flags&=32767,Cn=G;return}if(M!==null)M.flags|=32768,M.subtreeFlags=0,M.deletions=null;else{Qn=6,Cn=null;return}}else if(G=ih(G,A,is),G!==null){Cn=G;return}if(A=A.sibling,A!==null){Cn=A;return}Cn=A=M}while(A!==null);Qn===0&&(Qn=5)}function qo(M,A){var G=Fr,Q=Tn.transition;try{Tn.transition=null,Fr=1,oy(M,A,G)}finally{Tn.transition=Q,Fr=G}return null}function oy(M,A,G){do Aa();while(Ma!==null);if(zr&6)throw Error(s(327));var Q=M.finishedWork,ie=M.finishedLanes;if(Q===null)return null;if(M.finishedWork=null,M.finishedLanes=0,Q===M.current)throw Error(s(177));M.callbackNode=null,M.callbackPriority=0;var he=Q.lanes|Q.childLanes;if(Yl(M,he),M===ai&&(Cn=ai=null,Wn=0),!(Q.subtreeFlags&2064)&&!(Q.flags&2064)||fc||(fc=!0,dh(ps,function(){return Aa(),null})),he=(Q.flags&15990)!==0,Q.subtreeFlags&15990||he){he=Tn.transition,Tn.transition=null;var ze=Fr;Fr=1;var lt=zr;zr|=4,Wo.current=null,Jp(M,Q),W_(M,Q),Y(M.containerInfo),M.current=Q,df(Q),Dp(),zr=lt,Fr=ze,Tn.transition=he}else M.current=Q;if(fc&&(fc=!1,Ma=M,gu=ie),he=M.pendingLanes,he===0&&(Xo=null),ms(Q.stateNode),Ls(M,ii()),A!==null)for(G=M.onRecoverableError,Q=0;Q<A.length;Q++)G(A[Q]);if(cc)throw cc=!1,M=Hn,Hn=null,M;return gu&1&&M.tag!==0&&Aa(),he=M.pendingLanes,he&1?M===Za?yu++:(yu=0,Za=M):yu=0,gs(),null}function Aa(){if(Ma!==null){var M=vo(gu),A=Tn.transition,G=Fr;try{if(Tn.transition=null,Fr=16>M?16:M,Ma===null)var Q=!1;else{if(M=Ma,Ma=null,gu=0,zr&6)throw Error(s(331));var ie=zr;for(zr|=4,qt=M.current;qt!==null;){var he=qt,ze=he.child;if(qt.flags&16){var lt=he.deletions;if(lt!==null){for(var Mt=0;Mt<lt.length;Mt++){var zt=lt[Mt];for(qt=zt;qt!==null;){var ur=qt;switch(ur.tag){case 0:case 11:case 15:qa(8,ur,he)}var Dr=ur.child;if(Dr!==null)Dr.return=ur,qt=Dr;else for(;qt!==null;){ur=qt;var Mr=ur.sibling,Xr=ur.return;if(Kp(ur),ur===zt){qt=null;break}if(Mr!==null){Mr.return=Xr,qt=Mr;break}qt=Xr}}}var ir=he.alternate;if(ir!==null){var Yi=ir.child;if(Yi!==null){ir.child=null;do{var ro=Yi.sibling;Yi.sibling=null,Yi=ro}while(Yi!==null)}}qt=he}}if(he.subtreeFlags&2064&&ze!==null)ze.return=he,qt=ze;else e:for(;qt!==null;){if(he=qt,he.flags&2048)switch(he.tag){case 0:case 11:case 15:qa(9,he,he.return)}var yt=he.sibling;if(yt!==null){yt.return=he.return,qt=yt;break e}qt=he.return}}var ct=M.current;for(qt=ct;qt!==null;){ze=qt;var wt=ze.child;if(ze.subtreeFlags&2064&&wt!==null)wt.return=ze,qt=wt;else e:for(ze=ct;qt!==null;){if(lt=qt,lt.flags&2048)try{switch(lt.tag){case 0:case 11:case 15:Vi(9,lt)}}catch(vr){Ss(lt,lt.return,vr)}if(lt===ze){qt=null;break e}var tr=lt.sibling;if(tr!==null){tr.return=lt.return,qt=tr;break e}qt=lt.return}}if(zr=ie,gs(),es&&typeof es.onPostCommitFiberRoot=="function")try{es.onPostCommitFiberRoot(No,M)}catch{}Q=!0}return Q}finally{Fr=G,Tn.transition=A}}return!1}function Sf(M,A,G){A=zp(G,A),A=ry(M,A,1),va(M,A),A=gn(),M=Rl(M,1),M!==null&&(Fo(M,1,A),Ls(M,A))}function Ss(M,A,G){if(M.tag===3)Sf(M,M,G);else for(;A!==null;){if(A.tag===3){Sf(A,M,G);break}else if(A.tag===1){var Q=A.stateNode;if(typeof A.type.getDerivedStateFromError=="function"||typeof Q.componentDidCatch=="function"&&(Xo===null||!Xo.has(Q))){M=zp(G,M),M=th(A,M,1),va(A,M),M=gn(),A=Rl(A,1),A!==null&&(Fo(A,1,M),Ls(A,M));break}}A=A.return}}function am(M,A,G){var Q=M.pingCache;Q!==null&&Q.delete(A),A=gn(),M.pingedLanes|=M.suspendedLanes&G,ai===M&&(Wn&G)===G&&(Qn===4||Qn===3&&(Wn&130023424)===Wn&&500>ii()-vf?$a(M,0):pu|=G),Ls(M,A)}function lm(M,A){A===0&&(M.mode&1?(A=Gr,Gr<<=1,!(Gr&130023424)&&(Gr=4194304)):A=1);var G=gn();M=Rl(M,A),M!==null&&(Fo(M,A,G),Ls(M,G))}function ay(M){var A=M.memoizedState,G=0;A!==null&&(G=A.retryLane),lm(M,G)}function ly(M,A){var G=0;switch(M.tag){case 13:var Q=M.stateNode,ie=M.memoizedState;ie!==null&&(G=ie.retryLane);break;case 19:Q=M.stateNode;break;default:throw Error(s(314))}Q!==null&&Q.delete(A),lm(M,G)}var um;um=function(M,A,G){if(M!==null)if(M.memoizedProps!==A.pendingProps||Lr.current)Li=!0;else{if(!(M.lanes&G)&&!(A.flags&128))return Li=!1,oh(M,A,G);Li=!!(M.flags&131072)}else Li=!1,Ie&&A.flags&1048576&&$(A,$l,A.index);switch(A.lanes=0,A.tag){case 2:var Q=A.type;M!==null&&(M.alternate=null,A.alternate=null,A.flags|=2),M=A.pendingProps;var ie=fr(A,Rr.current);ya(A,G),ie=ec(null,A,Q,M,ie,G);var he=Sl();return A.flags|=1,typeof ie=="object"&&ie!==null&&typeof ie.render=="function"&&ie.$$typeof===void 0?(A.tag=1,A.memoizedState=null,A.updateQueue=null,Zr(Q)?(he=!0,ri(A)):he=!1,A.memoizedState=ie.state!==null&&ie.state!==void 0?ie.state:null,vs(A),ie.updater=Zu,A.stateNode=ie,ie._reactInternals=A,Zc(A,Q,M,G),A=ns(null,A,Q,!0,he,G)):(A.tag=0,Ie&&he&&se(A),Kn(null,A,ie,G),A=A.child),A;case 16:Q=A.elementType;e:{switch(M!==null&&(M.alternate=null,A.alternate=null,A.flags|=2),M=A.pendingProps,ie=Q._init,Q=ie(Q._payload),A.type=Q,ie=A.tag=X_(Q),M=Gi(Q,M),ie){case 0:A=Xa(null,A,Q,M,G);break e;case 1:A=su(null,A,Q,M,G);break e;case 11:A=On(null,A,Q,M,G);break e;case 14:A=Ln(null,A,Q,Gi(Q.type,M),G);break e}throw Error(s(306,Q,""))}return A;case 0:return Q=A.type,ie=A.pendingProps,ie=A.elementType===Q?ie:Gi(Q,ie),Xa(M,A,Q,ie,G);case 1:return Q=A.type,ie=A.pendingProps,ie=A.elementType===Q?ie:Gi(Q,ie),su(M,A,Q,ie,G);case 3:e:{if(lf(A),M===null)throw Error(s(387));Q=A.pendingProps,he=A.memoizedState,ie=he.element,xo(M,A),Ku(A,Q,null,G);var ze=A.memoizedState;if(Q=ze.element,ve&&he.isDehydrated)if(he={element:Q,isDehydrated:!1,cache:ze.cache,transitions:ze.transitions},A.updateQueue.baseState=he,A.memoizedState=he,A.flags&256){ie=Error(s(423)),A=Xp(M,A,Q,G,ie);break e}else if(Q!==ie){ie=Error(s(424)),A=Xp(M,A,Q,G,ie);break e}else for(ve&&(Le=Pn(A.stateNode.containerInfo),we=A,Ie=!0,at=null,Je=!1),G=Un(A,null,Q,G),A.child=G;G;)G.flags=G.flags&-3|4096,G=G.sibling;else{if(ft(),Q===ie){A=js(M,A,G);break e}Kn(M,A,Q,G)}A=A.child}return A;case 5:return bi(A),M===null&&pt(A),Q=A.type,ie=A.pendingProps,he=M!==null?M.memoizedProps:null,ze=ie.children,K(Q,ie)?ze=null:he!==null&&K(Q,he)&&(A.flags|=32),xs(M,A),Kn(M,A,ze,G),A.child;case 6:return M===null&&pt(A),null;case 13:return Yp(M,A,G);case 4:return Mn(A,A.stateNode.containerInfo),Q=A.pendingProps,M===null?A.child=tn(A,null,Q,G):Kn(M,A,Q,G),A.child;case 11:return Q=A.type,ie=A.pendingProps,ie=A.elementType===Q?ie:Gi(Q,ie),On(M,A,Q,ie,G);case 7:return Kn(M,A,A.pendingProps,G),A.child;case 8:return Kn(M,A,A.pendingProps.children,G),A.child;case 12:return Kn(M,A,A.pendingProps.children,G),A.child;case 10:e:{if(Q=A.type._context,ie=A.pendingProps,he=A.memoizedProps,ze=ie.value,ma(A,Q,ze),he!==null)if(Ui(he.value,ze)){if(he.children===ie.children&&!Lr.current){A=js(M,A,G);break e}}else for(he=A.child,he!==null&&(he.return=A);he!==null;){var lt=he.dependencies;if(lt!==null){ze=he.child;for(var Mt=lt.firstContext;Mt!==null;){if(Mt.context===Q){if(he.tag===1){Mt=er(-1,G&-G),Mt.tag=2;var zt=he.updateQueue;if(zt!==null){zt=zt.shared;var ur=zt.pending;ur===null?Mt.next=Mt:(Mt.next=ur.next,ur.next=Mt),zt.pending=Mt}}he.lanes|=G,Mt=he.alternate,Mt!==null&&(Mt.lanes|=G),ga(he.return,G,A),lt.lanes|=G;break}Mt=Mt.next}}else if(he.tag===10)ze=he.type===A.type?null:he.child;else if(he.tag===18){if(ze=he.return,ze===null)throw Error(s(341));ze.lanes|=G,lt=ze.alternate,lt!==null&&(lt.lanes|=G),ga(ze,G,A),ze=he.sibling}else ze=he.child;if(ze!==null)ze.return=he;else for(ze=he;ze!==null;){if(ze===A){ze=null;break}if(he=ze.sibling,he!==null){he.return=ze.return,ze=he;break}ze=ze.return}he=ze}Kn(M,A,ie.children,G),A=A.child}return A;case 9:return ie=A.type,Q=A.pendingProps.children,ya(A,G),ie=_i(ie),Q=Q(ie),A.flags|=1,Kn(M,A,Q,G),A.child;case 14:return Q=A.type,ie=Gi(Q,A.pendingProps),ie=Gi(Q.type,ie),Ln(M,A,Q,ie,G);case 15:return Wa(M,A,A.type,A.pendingProps,G);case 17:return Q=A.type,ie=A.pendingProps,ie=A.elementType===Q?ie:Gi(Q,ie),M!==null&&(M.alternate=null,A.alternate=null,A.flags|=2),A.tag=1,Zr(Q)?(M=!0,ri(A)):M=!1,ya(A,G),zd(A,Q,ie),Zc(A,Q,ie,G),ns(null,A,Q,!0,M,G);case 19:return au(M,A,G);case 22:return zi(M,A,G)}throw Error(s(156,A.tag))};function dh(M,A){return Fa(M,A)}function uy(M,A,G,Q){this.tag=M,this.key=G,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=A,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=Q,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function to(M,A,G,Q){return new uy(M,A,G,Q)}function hh(M){return M=M.prototype,!(!M||!M.isReactComponent)}function X_(M){if(typeof M=="function")return hh(M)?1:0;if(M!=null){if(M=M.$$typeof,M===y)return 11;if(M===x)return 14}return 2}function el(M,A){var G=M.alternate;return G===null?(G=to(M.tag,A,M.key,M.mode),G.elementType=M.elementType,G.type=M.type,G.stateNode=M.stateNode,G.alternate=M,M.alternate=G):(G.pendingProps=A,G.type=M.type,G.flags=0,G.subtreeFlags=0,G.deletions=null),G.flags=M.flags&14680064,G.childLanes=M.childLanes,G.lanes=M.lanes,G.child=M.child,G.memoizedProps=M.memoizedProps,G.memoizedState=M.memoizedState,G.updateQueue=M.updateQueue,A=M.dependencies,G.dependencies=A===null?null:{lanes:A.lanes,firstContext:A.firstContext},G.sibling=M.sibling,G.index=M.index,G.ref=M.ref,G}function ph(M,A,G,Q,ie,he){var ze=2;if(Q=M,typeof M=="function")hh(M)&&(ze=1);else if(typeof M=="string")ze=5;else e:switch(M){case h:return vu(G.children,ie,he,A);case p:ze=8,ie|=8;break;case c:return M=to(12,G,A,ie|2),M.elementType=c,M.lanes=he,M;case v:return M=to(13,G,A,ie),M.elementType=v,M.lanes=he,M;case g:return M=to(19,G,A,ie),M.elementType=g,M.lanes=he,M;case w:return Mf(G,ie,he,A);default:if(typeof M=="object"&&M!==null)switch(M.$$typeof){case f:ze=10;break e;case m:ze=9;break e;case y:ze=11;break e;case x:ze=14;break e;case b:ze=16,Q=null;break e}throw Error(s(130,M==null?M:typeof M,""))}return A=to(ze,G,A,ie),A.elementType=M,A.type=Q,A.lanes=he,A}function vu(M,A,G,Q){return M=to(7,M,Q,A),M.lanes=G,M}function Mf(M,A,G,Q){return M=to(22,M,Q,A),M.elementType=w,M.lanes=G,M.stateNode={},M}function mh(M,A,G){return M=to(6,M,null,A),M.lanes=G,M}function gh(M,A,G){return A=to(4,M.children!==null?M.children:[],M.key,A),A.lanes=G,A.stateNode={containerInfo:M.containerInfo,pendingChildren:null,implementation:M.implementation},A}function yh(M,A,G,Q,ie){this.tag=A,this.containerInfo=M,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=ye,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=qu(0),this.expirationTimes=qu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qu(0),this.identifierPrefix=Q,this.onRecoverableError=ie,ve&&(this.mutableSourceEagerHydrationData=null)}function cy(M,A,G,Q,ie,he,ze,lt,Mt){return M=new yh(M,A,G,lt,Mt),A===1?(A=1,he===!0&&(A|=8)):A=0,he=to(3,null,null,A),M.current=he,he.stateNode=M,he.memoizedState={element:Q,isDehydrated:G,cache:null,transitions:null},vs(he),M}function fy(M){if(!M)return Sr;M=M._reactInternals;e:{if(I(M)!==M||M.tag!==1)throw Error(s(170));var A=M;do{switch(A.tag){case 3:A=A.stateNode.context;break e;case 1:if(Zr(A.type)){A=A.stateNode.__reactInternalMemoizedMergedChildContext;break e}}A=A.return}while(A!==null);throw Error(s(171))}if(M.tag===1){var G=M.type;if(Zr(G))return go(M,G,A)}return A}function dy(M){var A=M._reactInternals;if(A===void 0)throw typeof M.render=="function"?Error(s(188)):(M=Object.keys(M).join(","),Error(s(268,M)));return M=N(A),M===null?null:M.stateNode}function Mo(M,A){if(M=M.memoizedState,M!==null&&M.dehydrated!==null){var G=M.retryLane;M.retryLane=G!==0&&G<A?G:A}}function Af(M,A){Mo(M,A),(M=M.alternate)&&Mo(M,A)}function vh(M){return M=N(M),M===null?null:M.stateNode}function hy(){return null}return n.attemptContinuousHydration=function(M){if(M.tag===13){var A=gn();ss(M,134217728,A),Af(M,134217728)}},n.attemptHydrationAtCurrentPriority=function(M){if(M.tag===13){var A=gn(),G=Yo(M);ss(M,G,A),Af(M,G)}},n.attemptSynchronousHydration=function(M){switch(M.tag){case 3:var A=M.stateNode;if(A.current.memoizedState.isDehydrated){var G=Nn(A.pendingLanes);G!==0&&(yo(A,G|1),Ls(A,ii()),!(zr&6)&&(mu(),gs()))}break;case 13:var Q=gn();dc(function(){return ss(M,1,Q)}),Af(M,1)}},n.batchedUpdates=function(M,A){var G=zr;zr|=1;try{return M(A)}finally{zr=G,zr===0&&(mu(),Ga&&gs())}},n.createComponentSelector=function(M){return{$$typeof:pf,value:M}},n.createContainer=function(M,A,G,Q,ie,he,ze){return cy(M,A,!1,null,G,Q,ie,he,ze)},n.createHasPseudoClassSelector=function(M){return{$$typeof:cu,value:M}},n.createHydrationContainer=function(M,A,G,Q,ie,he,ze,lt,Mt){return M=cy(G,Q,!0,M,ie,he,ze,lt,Mt),M.context=fy(null),G=M.current,Q=gn(),ie=Yo(G),he=er(Q,ie),he.callback=A??null,va(G,he),M.current.lanes=ie,Fo(M,ie,Q),Ls(M,Q),M},n.createPortal=function(M,A,G){var Q=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:Q==null?null:""+Q,children:M,containerInfo:A,implementation:G}},n.createRoleSelector=function(M){return{$$typeof:fu,value:M}},n.createTestNameSelector=function(M){return{$$typeof:Ja,value:M}},n.createTextSelector=function(M){return{$$typeof:lc,value:M}},n.deferredUpdates=function(M){var A=Fr,G=Tn.transition;try{return Tn.transition=null,Fr=16,M()}finally{Fr=A,Tn.transition=G}},n.discreteUpdates=function(M,A,G,Q,ie){var he=Fr,ze=Tn.transition;try{return Tn.transition=null,Fr=1,M(A,G,Q,ie)}finally{Fr=he,Tn.transition=ze,zr===0&&mu()}},n.findAllNodes=Ka,n.findBoundingRects=function(M,A){if(!Ge)throw Error(s(363));A=Ka(M,A),M=[];for(var G=0;G<A.length;G++)M.push(fe(A[G]));for(A=M.length-1;0<A;A--){G=M[A];for(var Q=G.x,ie=Q+G.width,he=G.y,ze=he+G.height,lt=A-1;0<=lt;lt--)if(A!==lt){var Mt=M[lt],zt=Mt.x,ur=zt+Mt.width,Dr=Mt.y,Mr=Dr+Mt.height;if(Q>=zt&&he>=Dr&&ie<=ur&&ze<=Mr){M.splice(A,1);break}else if(Q!==zt||G.width!==Mt.width||Mr<he||Dr>ze){if(!(he!==Dr||G.height!==Mt.height||ur<Q||zt>ie)){zt>Q&&(Mt.width+=zt-Q,Mt.x=Q),ur<ie&&(Mt.width=ie-zt),M.splice(A,1);break}}else{Dr>he&&(Mt.height+=Dr-he,Mt.y=he),Mr<ze&&(Mt.height=ze-Dr),M.splice(A,1);break}}}return M},n.findHostInstance=dy,n.findHostInstanceWithNoPortals=function(M){return M=j(M),M=M!==null?W(M):null,M===null?null:M.stateNode},n.findHostInstanceWithWarning=function(M){return dy(M)},n.flushControlled=function(M){var A=zr;zr|=1;var G=Tn.transition,Q=Fr;try{Tn.transition=null,Fr=1,M()}finally{Fr=Q,Tn.transition=G,zr=A,zr===0&&(mu(),gs())}},n.flushPassiveEffects=Aa,n.flushSync=dc,n.focusWithin=function(M,A){if(!Ge)throw Error(s(363));for(M=mf(M),A=Zs(M,A),A=Array.from(A),M=0;M<A.length;){var G=A[M++];if(!Ke(G)){if(G.tag===5&&et(G.stateNode))return!0;for(G=G.child;G!==null;)A.push(G),G=G.sibling}}return!1},n.getCurrentUpdatePriority=function(){return Fr},n.getFindAllNodesFailureDescription=function(M,A){if(!Ge)throw Error(s(363));var G=0,Q=[];M=[mf(M),0];for(var ie=0;ie<M.length;){var he=M[ie++],ze=M[ie++],lt=A[ze];if((he.tag!==5||!Ke(he))&&(gf(he,lt)&&(Q.push(Tl(lt)),ze++,ze>G&&(G=ze)),ze<A.length))for(he=he.child;he!==null;)M.push(he,ze),he=he.sibling}if(G<A.length){for(M=[];G<A.length;G++)M.push(Tl(A[G]));return`findAllNodes was able to match part of the selector:
  `+(Q.join(" > ")+`

No matching component was found for:
  `)+M.join(" > ")}return null},n.getPublicRootInstance=function(M){if(M=M.current,!M.child)return null;switch(M.child.tag){case 5:return J(M.child.stateNode);default:return M.child.stateNode}},n.injectIntoDevTools=function(M){if(M={bundleType:M.bundleType,version:M.version,rendererPackageName:M.rendererPackageName,rendererConfig:M.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:vh,findFiberByHostInstance:M.findFiberByHostInstance||hy,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")M=!1;else{var A=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(A.isDisabled||!A.supportsFiber)M=!0;else{try{No=A.inject(M),es=A}catch{}M=!!A.checkDCE}}return M},n.isAlreadyRendering=function(){return!1},n.observeVisibleRects=function(M,A,G,Q){if(!Ge)throw Error(s(363));M=Ka(M,A);var ie=ht(M,G,Q).disconnect;return{disconnect:function(){ie()}}},n.registerMutableSourceForHydration=function(M,A){var G=A._getVersion;G=G(A._source),M.mutableSourceEagerHydrationData==null?M.mutableSourceEagerHydrationData=[A,G]:M.mutableSourceEagerHydrationData.push(A,G)},n.runWithPriority=function(M,A){var G=Fr;try{return Fr=M,A()}finally{Fr=G}},n.shouldError=function(){return null},n.shouldSuspend=function(){return!1},n.updateContainer=function(M,A,G,Q){var ie=A.current,he=gn(),ze=Yo(ie);return G=fy(G),A.context===null?A.context=G:A.pendingContext=G,A=er(he,ze),A.payload={element:M},Q=Q===void 0?null:Q,Q!==null&&(A.callback=Q),va(ie,A),M=ss(ie,ze,he),M!==null&&Zl(M,ie,ze),ze},n}),Cx}var dA;function bN(){return dA||(dA=1,Ax.exports=xN()),Ax.exports}var wN=bN();const SN=Ob(wN);var Rx={exports:{}},Px={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hA;function MN(){return hA||(hA=1,function(d){function t(V,q){var Y=V.length;V.push(q);e:for(;0<Y;){var Z=Y-1>>>1,ce=V[Z];if(0<i(ce,q))V[Z]=q,V[Y]=ce,Y=Z;else break e}}function n(V){return V.length===0?null:V[0]}function r(V){if(V.length===0)return null;var q=V[0],Y=V.pop();if(Y!==q){V[0]=Y;e:for(var Z=0,ce=V.length,B=ce>>>1;Z<B;){var U=2*(Z+1)-1,K=V[U],re=U+1,ae=V[re];if(0>i(K,Y))re<ce&&0>i(ae,K)?(V[Z]=ae,V[re]=Y,Z=re):(V[Z]=K,V[U]=Y,Z=U);else if(re<ce&&0>i(ae,Y))V[Z]=ae,V[re]=Y,Z=re;else break e}}return q}function i(V,q){var Y=V.sortIndex-q.sortIndex;return Y!==0?Y:V.id-q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;d.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();d.unstable_now=function(){return s.now()-a}}var l=[],u=[],h=1,p=null,c=3,f=!1,m=!1,y=!1,v=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(V){for(var q=n(u);q!==null;){if(q.callback===null)r(u);else if(q.startTime<=V)r(u),q.sortIndex=q.expirationTime,t(l,q);else break;q=n(u)}}function w(V){if(y=!1,b(V),!m)if(n(l)!==null)m=!0,J(T);else{var q=n(u);q!==null&&ee(w,q.startTime-V)}}function T(V,q){m=!1,y&&(y=!1,g(P),P=-1),f=!0;var Y=c;try{for(b(q),p=n(l);p!==null&&(!(p.expirationTime>q)||V&&!j());){var Z=p.callback;if(typeof Z=="function"){p.callback=null,c=p.priorityLevel;var ce=Z(p.expirationTime<=q);q=d.unstable_now(),typeof ce=="function"?p.callback=ce:p===n(l)&&r(l),b(q)}else r(l);p=n(l)}if(p!==null)var B=!0;else{var U=n(u);U!==null&&ee(w,U.startTime-q),B=!1}return B}finally{p=null,c=Y,f=!1}}var R=!1,C=null,P=-1,I=5,D=-1;function j(){return!(d.unstable_now()-D<I)}function N(){if(C!==null){var V=d.unstable_now();D=V;var q=!0;try{q=C(!0,V)}finally{q?O():(R=!1,C=null)}}else R=!1}var O;if(typeof x=="function")O=function(){x(N)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,X=W.port2;W.port1.onmessage=N,O=function(){X.postMessage(null)}}else O=function(){v(N,0)};function J(V){C=V,R||(R=!0,O())}function ee(V,q){P=v(function(){V(d.unstable_now())},q)}d.unstable_IdlePriority=5,d.unstable_ImmediatePriority=1,d.unstable_LowPriority=4,d.unstable_NormalPriority=3,d.unstable_Profiling=null,d.unstable_UserBlockingPriority=2,d.unstable_cancelCallback=function(V){V.callback=null},d.unstable_continueExecution=function(){m||f||(m=!0,J(T))},d.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<V?Math.floor(1e3/V):5},d.unstable_getCurrentPriorityLevel=function(){return c},d.unstable_getFirstCallbackNode=function(){return n(l)},d.unstable_next=function(V){switch(c){case 1:case 2:case 3:var q=3;break;default:q=c}var Y=c;c=q;try{return V()}finally{c=Y}},d.unstable_pauseExecution=function(){},d.unstable_requestPaint=function(){},d.unstable_runWithPriority=function(V,q){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var Y=c;c=V;try{return q()}finally{c=Y}},d.unstable_scheduleCallback=function(V,q,Y){var Z=d.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?Z+Y:Z):Y=Z,V){case 1:var ce=-1;break;case 2:ce=250;break;case 5:ce=1073741823;break;case 4:ce=1e4;break;default:ce=5e3}return ce=Y+ce,V={id:h++,callback:q,priorityLevel:V,startTime:Y,expirationTime:ce,sortIndex:-1},Y>Z?(V.sortIndex=Y,t(u,V),n(l)===null&&V===n(u)&&(y?(g(P),P=-1):y=!0,ee(w,Y-Z))):(V.sortIndex=ce,t(l,V),m||f||(m=!0,J(T))),V},d.unstable_shouldYield=j,d.unstable_wrapCallback=function(V){var q=c;return function(){var Y=c;c=q;try{return V.apply(this,arguments)}finally{c=Y}}}}(Px)),Px}var pA;function AN(){return pA||(pA=1,Rx.exports=MN()),Rx.exports}var mA=AN();const tS={},EN=d=>void Object.assign(tS,d);function TN(d,t){function n(h,{args:p=[],attach:c,...f},m){let y=`${h[0].toUpperCase()}${h.slice(1)}`,v;if(h==="primitive"){if(f.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const g=f.object;v=Jh(g,{type:h,root:m,attach:c,primitive:!0})}else{const g=tS[y];if(!g)throw new Error(`R3F: ${y} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(p))throw new Error("R3F: The args prop must be an array!");v=Jh(new g(...p),{type:h,root:m,attach:c,memoizedProps:{args:p}})}return v.__r3f.attach===void 0&&(v.isBufferGeometry?v.__r3f.attach="geometry":v.isMaterial&&(v.__r3f.attach="material")),y!=="inject"&&Lx(v,f),v}function r(h,p){let c=!1;if(p){var f,m;(f=p.__r3f)!=null&&f.attach?jx(h,p,p.__r3f.attach):p.isObject3D&&h.isObject3D&&(h.add(p),c=!0),c||(m=h.__r3f)==null||m.objects.push(p),p.__r3f||Jh(p,{}),p.__r3f.parent=h,Lb(p),Kh(p)}}function i(h,p,c){let f=!1;if(p){var m,y;if((m=p.__r3f)!=null&&m.attach)jx(h,p,p.__r3f.attach);else if(p.isObject3D&&h.isObject3D){p.parent=h,p.dispatchEvent({type:"added"}),h.dispatchEvent({type:"childadded",child:p});const v=h.children.filter(x=>x!==p),g=v.indexOf(c);h.children=[...v.slice(0,g),p,...v.slice(g)],f=!0}f||(y=h.__r3f)==null||y.objects.push(p),p.__r3f||Jh(p,{}),p.__r3f.parent=h,Lb(p),Kh(p)}}function o(h,p,c=!1){h&&[...h].forEach(f=>s(p,f,c))}function s(h,p,c){if(p){var f,m,y;if(p.__r3f&&(p.__r3f.parent=null),(f=h.__r3f)!=null&&f.objects&&(h.__r3f.objects=h.__r3f.objects.filter(w=>w!==p)),(m=p.__r3f)!=null&&m.attach)xA(h,p,p.__r3f.attach);else if(p.isObject3D&&h.isObject3D){var v;h.remove(p),(v=p.__r3f)!=null&&v.root&&BN(sv(p),p)}const x=(y=p.__r3f)==null?void 0:y.primitive,b=!x&&(c===void 0?p.dispose!==null:c);if(!x){var g;o((g=p.__r3f)==null?void 0:g.objects,p,b),o(p.children,p,b)}if(delete p.__r3f,b&&p.dispose&&p.type!=="Scene"){const w=()=>{try{p.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?mA.unstable_scheduleCallback(mA.unstable_IdlePriority,w):w()}Kh(h)}}function a(h,p,c,f){var m;const y=(m=h.__r3f)==null?void 0:m.parent;if(!y)return;const v=n(p,c,h.__r3f.root);if(h.children){for(const g of h.children)g.__r3f&&r(v,g);h.children=h.children.filter(g=>!g.__r3f)}h.__r3f.objects.forEach(g=>r(v,g)),h.__r3f.objects=[],h.__r3f.autoRemovedBeforeAppend||s(y,h),v.parent&&(v.__r3f.autoRemovedBeforeAppend=!0),r(y,v),v.raycast&&v.__r3f.eventCount&&sv(v).getState().internal.interaction.push(v),[f,f.alternate].forEach(g=>{g!==null&&(g.stateNode=v,g.ref&&(typeof g.ref=="function"?g.ref(v):g.ref.current=v))})}const l=()=>{};return{reconciler:SN({createInstance:n,removeChild:s,appendChild:r,appendInitialChild:r,insertBefore:i,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(h,p)=>{if(!p)return;const c=h.getState().scene;c.__r3f&&(c.__r3f.root=h,r(c,p))},removeChildFromContainer:(h,p)=>{p&&s(h.getState().scene,p)},insertInContainerBefore:(h,p,c)=>{if(!p||!c)return;const f=h.getState().scene;f.__r3f&&i(f,p,c)},getRootHostContext:()=>null,getChildHostContext:h=>h,finalizeInitialChildren(h){var p;return!!((p=h==null?void 0:h.__r3f)!=null?p:{}).handlers},prepareUpdate(h,p,c,f){var m;if(((m=h==null?void 0:h.__r3f)!=null?m:{}).primitive&&f.object&&f.object!==h)return[!0];{const{args:v=[],children:g,...x}=f,{args:b=[],children:w,...T}=c;if(!Array.isArray(v))throw new Error("R3F: the args prop must be an array!");if(v.some((C,P)=>C!==b[P]))return[!0];const R=_R(h,x,T,!0);return R.changes.length?[!1,R]:null}},commitUpdate(h,[p,c],f,m,y,v){p?a(h,f,y,v):Lx(h,c)},commitMount(h,p,c,f){var m;const y=(m=h.__r3f)!=null?m:{};h.raycast&&y.handlers&&y.eventCount&&sv(h).getState().internal.interaction.push(h)},getPublicInstance:h=>h,prepareForCommit:()=>null,preparePortalMount:h=>Jh(h.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(h){var p;const{attach:c,parent:f}=(p=h.__r3f)!=null?p:{};c&&f&&xA(f,h,c),h.isObject3D&&(h.visible=!1),Kh(h)},unhideInstance(h,p){var c;const{attach:f,parent:m}=(c=h.__r3f)!=null?c:{};f&&m&&jx(m,h,f),(h.isObject3D&&p.visible==null||p.visible)&&(h.visible=!0),Kh(h)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>t(),beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&Yn.fun(performance.now)?performance.now:Yn.fun(Date.now)?Date.now:()=>0,scheduleTimeout:Yn.fun(setTimeout)?setTimeout:void 0,cancelTimeout:Yn.fun(clearTimeout)?clearTimeout:void 0}),applyProps:Lx}}var gA,yA;const Ix=d=>"colorSpace"in d||"outputColorSpace"in d,hR=()=>{var d;return(d=tS.ColorManagement)!=null?d:null},pR=d=>d&&d.isOrthographicCamera,CN=d=>d&&d.hasOwnProperty("current"),Kg=typeof window<"u"&&((gA=window.document)!=null&&gA.createElement||((yA=window.navigator)==null?void 0:yA.product)==="ReactNative")?Ot.useLayoutEffect:Ot.useEffect;function mR(d){const t=Ot.useRef(d);return Kg(()=>void(t.current=d),[d]),t}function RN({set:d}){return Kg(()=>(d(new Promise(()=>null)),()=>d(!1)),[d]),null}class gR extends Ot.Component{constructor(...t){super(...t),this.state={error:!1}}componentDidCatch(t){this.props.set(t)}render(){return this.state.error?null:this.props.children}}gR.getDerivedStateFromError=()=>({error:!0});const yR="__default",vA=new Map,PN=d=>d&&!!d.memoized&&!!d.changes;function vR(d){var t;const n=typeof window<"u"?(t=window.devicePixelRatio)!=null?t:2:1;return Array.isArray(d)?Math.min(Math.max(d[0],n),d[1]):d}const Dm=d=>{var t;return(t=d.__r3f)==null?void 0:t.root.getState()};function sv(d){let t=d.__r3f.root;for(;t.getState().previousRoot;)t=t.getState().previousRoot;return t}const Yn={obj:d=>d===Object(d)&&!Yn.arr(d)&&typeof d!="function",fun:d=>typeof d=="function",str:d=>typeof d=="string",num:d=>typeof d=="number",boo:d=>typeof d=="boolean",und:d=>d===void 0,arr:d=>Array.isArray(d),equ(d,t,{arrays:n="shallow",objects:r="reference",strict:i=!0}={}){if(typeof d!=typeof t||!!d!=!!t)return!1;if(Yn.str(d)||Yn.num(d)||Yn.boo(d))return d===t;const o=Yn.obj(d);if(o&&r==="reference")return d===t;const s=Yn.arr(d);if(s&&n==="reference")return d===t;if((s||o)&&d===t)return!0;let a;for(a in d)if(!(a in t))return!1;if(o&&n==="shallow"&&r==="shallow"){for(a in i?t:d)if(!Yn.equ(d[a],t[a],{strict:i,objects:"reference"}))return!1}else for(a in i?t:d)if(d[a]!==t[a])return!1;if(Yn.und(a)){if(s&&d.length===0&&t.length===0||o&&Object.keys(d).length===0&&Object.keys(t).length===0)return!0;if(d!==t)return!1}return!0}};function IN(d){const t={nodes:{},materials:{}};return d&&d.traverse(n=>{n.name&&(t.nodes[n.name]=n),n.material&&!t.materials[n.material.name]&&(t.materials[n.material.name]=n.material)}),t}function jN(d){d.dispose&&d.type!=="Scene"&&d.dispose();for(const t in d)t.dispose==null||t.dispose(),delete d[t]}function Jh(d,t){const n=d;return n.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...t},d}function jb(d,t){let n=d;if(t.includes("-")){const r=t.split("-"),i=r.pop();return n=r.reduce((o,s)=>o[s],d),{target:n,key:i}}else return{target:n,key:t}}const _A=/-\d+$/;function jx(d,t,n){if(Yn.str(n)){if(_A.test(n)){const o=n.replace(_A,""),{target:s,key:a}=jb(d,o);Array.isArray(s[a])||(s[a]=[])}const{target:r,key:i}=jb(d,n);t.__r3f.previousAttach=r[i],r[i]=t}else t.__r3f.previousAttach=n(d,t)}function xA(d,t,n){var r,i;if(Yn.str(n)){const{target:o,key:s}=jb(d,n),a=t.__r3f.previousAttach;a===void 0?delete o[s]:o[s]=a}else(r=t.__r3f)==null||r.previousAttach==null||r.previousAttach(d,t);(i=t.__r3f)==null||delete i.previousAttach}function _R(d,{children:t,key:n,ref:r,...i},{children:o,key:s,ref:a,...l}={},u=!1){const h=d.__r3f,p=Object.entries(i),c=[];if(u){const m=Object.keys(l);for(let y=0;y<m.length;y++)i.hasOwnProperty(m[y])||p.unshift([m[y],yR+"remove"])}p.forEach(([m,y])=>{var v;if((v=d.__r3f)!=null&&v.primitive&&m==="object"||Yn.equ(y,l[m]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(m))return c.push([m,y,!0,[]]);let g=[];m.includes("-")&&(g=m.split("-")),c.push([m,y,!1,g]);for(const x in i){const b=i[x];x.startsWith(`${m}-`)&&c.push([x,b,!1,x.split("-")])}});const f={...i};return h!=null&&h.memoizedProps&&h!=null&&h.memoizedProps.args&&(f.args=h.memoizedProps.args),h!=null&&h.memoizedProps&&h!=null&&h.memoizedProps.attach&&(f.attach=h.memoizedProps.attach),{memoized:f,changes:c}}function Lx(d,t){var n;const r=d.__r3f,i=r==null?void 0:r.root,o=i==null||i.getState==null?void 0:i.getState(),{memoized:s,changes:a}=PN(t)?t:_R(d,t),l=r==null?void 0:r.eventCount;d.__r3f&&(d.__r3f.memoizedProps=s);for(let c=0;c<a.length;c++){let[f,m,y,v]=a[c];if(Ix(d)){const w="srgb",T="srgb-linear";f==="encoding"?(f="colorSpace",m=m===3001?w:T):f==="outputEncoding"&&(f="outputColorSpace",m=m===3001?w:T)}let g=d,x=g[f];if(v.length&&(x=v.reduce((b,w)=>b[w],d),!(x&&x.set))){const[b,...w]=v.reverse();g=w.reverse().reduce((T,R)=>T[R],d),f=b}if(m===yR+"remove")if(g.constructor){let b=vA.get(g.constructor);b||(b=new g.constructor,vA.set(g.constructor,b)),m=b[f]}else m=0;if(y&&r)m?r.handlers[f]=m:delete r.handlers[f],r.eventCount=Object.keys(r.handlers).length;else if(x&&x.set&&(x.copy||x instanceof hd)){if(Array.isArray(m))x.fromArray?x.fromArray(m):x.set(...m);else if(x.copy&&m&&m.constructor&&x.constructor===m.constructor)x.copy(m);else if(m!==void 0){var u;const b=(u=x)==null?void 0:u.isColor;!b&&x.setScalar?x.setScalar(m):x instanceof hd&&m instanceof hd?x.mask=m.mask:x.set(m),!hR()&&o&&!o.linear&&b&&x.convertSRGBToLinear()}}else{var h;if(g[f]=m,(h=g[f])!=null&&h.isTexture&&g[f].format===zs&&g[f].type===hl&&o){const b=g[f];Ix(b)&&Ix(o.gl)?b.colorSpace=o.gl.outputColorSpace:b.encoding=o.gl.outputEncoding}}Kh(d)}if(r&&r.parent&&d.raycast&&l!==r.eventCount){const c=sv(d).getState().internal,f=c.interaction.indexOf(d);f>-1&&c.interaction.splice(f,1),r.eventCount&&c.interaction.push(d)}return!(a.length===1&&a[0][0]==="onUpdate")&&a.length&&(n=d.__r3f)!=null&&n.parent&&Lb(d),d}function Kh(d){var t,n;const r=(t=d.__r3f)==null||(n=t.root)==null||n.getState==null?void 0:n.getState();r&&r.internal.frames===0&&r.invalidate()}function Lb(d){d.onUpdate==null||d.onUpdate(d)}function LN(d,t){d.manual||(pR(d)?(d.left=t.width/-2,d.right=t.width/2,d.top=t.height/2,d.bottom=t.height/-2):d.aspect=t.width/t.height,d.updateProjectionMatrix(),d.updateMatrixWorld())}function H0(d){return(d.eventObject||d.object).uuid+"/"+d.index+d.instanceId}function DN(){var d;const t=typeof self<"u"&&self||typeof window<"u"&&window;if(!t)return Ym.DefaultEventPriority;switch((d=t.event)==null?void 0:d.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Ym.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Ym.ContinuousEventPriority;default:return Ym.DefaultEventPriority}}function xR(d,t,n,r){const i=n.get(t);i&&(n.delete(t),n.size===0&&(d.delete(r),i.target.releasePointerCapture(r)))}function BN(d,t){const{internal:n}=d.getState();n.interaction=n.interaction.filter(r=>r!==t),n.initialHits=n.initialHits.filter(r=>r!==t),n.hovered.forEach((r,i)=>{(r.eventObject===t||r.object===t)&&n.hovered.delete(i)}),n.capturedMap.forEach((r,i)=>{xR(n.capturedMap,t,r,i)})}function kN(d){function t(l){const{internal:u}=d.getState(),h=l.offsetX-u.initialClick[0],p=l.offsetY-u.initialClick[1];return Math.round(Math.sqrt(h*h+p*p))}function n(l){return l.filter(u=>["Move","Over","Enter","Out","Leave"].some(h=>{var p;return(p=u.__r3f)==null?void 0:p.handlers["onPointer"+h]}))}function r(l,u){const h=d.getState(),p=new Set,c=[],f=u?u(h.internal.interaction):h.internal.interaction;for(let g=0;g<f.length;g++){const x=Dm(f[g]);x&&(x.raycaster.camera=void 0)}h.previousRoot||h.events.compute==null||h.events.compute(l,h);function m(g){const x=Dm(g);if(!x||!x.events.enabled||x.raycaster.camera===null)return[];if(x.raycaster.camera===void 0){var b;x.events.compute==null||x.events.compute(l,x,(b=x.previousRoot)==null?void 0:b.getState()),x.raycaster.camera===void 0&&(x.raycaster.camera=null)}return x.raycaster.camera?x.raycaster.intersectObject(g,!0):[]}let y=f.flatMap(m).sort((g,x)=>{const b=Dm(g.object),w=Dm(x.object);return!b||!w?g.distance-x.distance:w.events.priority-b.events.priority||g.distance-x.distance}).filter(g=>{const x=H0(g);return p.has(x)?!1:(p.add(x),!0)});h.events.filter&&(y=h.events.filter(y,h));for(const g of y){let x=g.object;for(;x;){var v;(v=x.__r3f)!=null&&v.eventCount&&c.push({...g,eventObject:x}),x=x.parent}}if("pointerId"in l&&h.internal.capturedMap.has(l.pointerId))for(let g of h.internal.capturedMap.get(l.pointerId).values())p.has(H0(g.intersection))||c.push(g.intersection);return c}function i(l,u,h,p){const c=d.getState();if(l.length){const f={stopped:!1};for(const m of l){const y=Dm(m.object)||c,{raycaster:v,pointer:g,camera:x,internal:b}=y,w=new Oe(g.x,g.y,0).unproject(x),T=D=>{var j,N;return(j=(N=b.capturedMap.get(D))==null?void 0:N.has(m.eventObject))!=null?j:!1},R=D=>{const j={intersection:m,target:u.target};b.capturedMap.has(D)?b.capturedMap.get(D).set(m.eventObject,j):b.capturedMap.set(D,new Map([[m.eventObject,j]])),u.target.setPointerCapture(D)},C=D=>{const j=b.capturedMap.get(D);j&&xR(b.capturedMap,m.eventObject,j,D)};let P={};for(let D in u){let j=u[D];typeof j!="function"&&(P[D]=j)}let I={...m,...P,pointer:g,intersections:l,stopped:f.stopped,delta:h,unprojectedPoint:w,ray:v.ray,camera:x,stopPropagation(){const D="pointerId"in u&&b.capturedMap.get(u.pointerId);if((!D||D.has(m.eventObject))&&(I.stopped=f.stopped=!0,b.hovered.size&&Array.from(b.hovered.values()).find(j=>j.eventObject===m.eventObject))){const j=l.slice(0,l.indexOf(m));o([...j,m])}},target:{hasPointerCapture:T,setPointerCapture:R,releasePointerCapture:C},currentTarget:{hasPointerCapture:T,setPointerCapture:R,releasePointerCapture:C},nativeEvent:u};if(p(I),f.stopped===!0)break}}return l}function o(l){const{internal:u}=d.getState();for(const h of u.hovered.values())if(!l.length||!l.find(p=>p.object===h.object&&p.index===h.index&&p.instanceId===h.instanceId)){const c=h.eventObject.__r3f,f=c==null?void 0:c.handlers;if(u.hovered.delete(H0(h)),c!=null&&c.eventCount){const m={...h,intersections:l};f.onPointerOut==null||f.onPointerOut(m),f.onPointerLeave==null||f.onPointerLeave(m)}}}function s(l,u){for(let h=0;h<u.length;h++){const p=u[h].__r3f;p==null||p.handlers.onPointerMissed==null||p.handlers.onPointerMissed(l)}}function a(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>o([]);case"onLostPointerCapture":return u=>{const{internal:h}=d.getState();"pointerId"in u&&h.capturedMap.has(u.pointerId)&&requestAnimationFrame(()=>{h.capturedMap.has(u.pointerId)&&(h.capturedMap.delete(u.pointerId),o([]))})}}return function(h){const{onPointerMissed:p,internal:c}=d.getState();c.lastEvent.current=h;const f=l==="onPointerMove",m=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",v=r(h,f?n:void 0),g=m?t(h):0;l==="onPointerDown"&&(c.initialClick=[h.offsetX,h.offsetY],c.initialHits=v.map(b=>b.eventObject)),m&&!v.length&&g<=2&&(s(h,c.interaction),p&&p(h)),f&&o(v);function x(b){const w=b.eventObject,T=w.__r3f,R=T==null?void 0:T.handlers;if(T!=null&&T.eventCount)if(f){if(R.onPointerOver||R.onPointerEnter||R.onPointerOut||R.onPointerLeave){const C=H0(b),P=c.hovered.get(C);P?P.stopped&&b.stopPropagation():(c.hovered.set(C,b),R.onPointerOver==null||R.onPointerOver(b),R.onPointerEnter==null||R.onPointerEnter(b))}R.onPointerMove==null||R.onPointerMove(b)}else{const C=R[l];C?(!m||c.initialHits.includes(w))&&(s(h,c.interaction.filter(P=>!c.initialHits.includes(P))),C(b)):m&&c.initialHits.includes(w)&&s(h,c.interaction.filter(P=>!c.initialHits.includes(P)))}}i(v,h,g,x)}}return{handlePointer:a}}const bR=d=>!!(d!=null&&d.render),wR=Ot.createContext(null),ON=(d,t)=>{const n=hN((a,l)=>{const u=new Oe,h=new Oe,p=new Oe;function c(g=l().camera,x=h,b=l().size){const{width:w,height:T,top:R,left:C}=b,P=w/T;x.isVector3?p.copy(x):p.set(...x);const I=g.getWorldPosition(u).distanceTo(p);if(pR(g))return{width:w/g.zoom,height:T/g.zoom,top:R,left:C,factor:1,distance:I,aspect:P};{const D=g.fov*Math.PI/180,j=2*Math.tan(D/2)*I,N=j*(w/T);return{width:N,height:j,top:R,left:C,factor:w/N,distance:I,aspect:P}}}let f;const m=g=>a(x=>({performance:{...x.performance,current:g}})),y=new Ct;return{set:a,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(g=1)=>d(l(),g),advance:(g,x)=>t(g,x,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new Mw,pointer:y,mouse:y,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const g=l();f&&clearTimeout(f),g.performance.current!==g.performance.min&&m(g.performance.min),f=setTimeout(()=>m(l().performance.max),g.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:c},setEvents:g=>a(x=>({...x,events:{...x.events,...g}})),setSize:(g,x,b,w,T)=>{const R=l().camera,C={width:g,height:x,top:w||0,left:T||0,updateStyle:b};a(P=>({size:C,viewport:{...P.viewport,...c(R,h,C)}}))},setDpr:g=>a(x=>{const b=vR(g);return{viewport:{...x.viewport,dpr:b,initialDpr:x.viewport.initialDpr||b}}}),setFrameloop:(g="always")=>{const x=l().clock;x.stop(),x.elapsedTime=0,g!=="never"&&(x.start(),x.elapsedTime=0),a(()=>({frameloop:g}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:Ot.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(g,x,b)=>{const w=l().internal;return w.priority=w.priority+(x>0?1:0),w.subscribers.push({ref:g,priority:x,store:b}),w.subscribers=w.subscribers.sort((T,R)=>T.priority-R.priority),()=>{const T=l().internal;T!=null&&T.subscribers&&(T.priority=T.priority-(x>0?1:0),T.subscribers=T.subscribers.filter(R=>R.ref!==g))}}}}}),r=n.getState();let i=r.size,o=r.viewport.dpr,s=r.camera;return n.subscribe(()=>{const{camera:a,size:l,viewport:u,gl:h,set:p}=n.getState();if(l.width!==i.width||l.height!==i.height||u.dpr!==o){var c;i=l,o=u.dpr,LN(a,l),h.setPixelRatio(u.dpr);const f=(c=l.updateStyle)!=null?c:typeof HTMLCanvasElement<"u"&&h.domElement instanceof HTMLCanvasElement;h.setSize(l.width,l.height,f)}a!==s&&(s=a,p(f=>({viewport:{...f.viewport,...f.viewport.getCurrentViewport(a)}})))}),n.subscribe(a=>d(a)),n};let z0,FN=new Set,NN=new Set,UN=new Set;function Dx(d,t){if(d.size)for(const{callback:n}of d.values())n(t)}function Bm(d,t){switch(d){case"before":return Dx(FN,t);case"after":return Dx(NN,t);case"tail":return Dx(UN,t)}}let Bx,kx;function Ox(d,t,n){let r=t.clock.getDelta();for(t.frameloop==="never"&&typeof d=="number"&&(r=d-t.clock.elapsedTime,t.clock.oldTime=t.clock.elapsedTime,t.clock.elapsedTime=d),Bx=t.internal.subscribers,z0=0;z0<Bx.length;z0++)kx=Bx[z0],kx.ref.current(kx.store.getState(),r,n);return!t.internal.priority&&t.gl.render&&t.gl.render(t.scene,t.camera),t.internal.frames=Math.max(0,t.internal.frames-1),t.frameloop==="always"?1:t.internal.frames}function GN(d){let t=!1,n=!1,r,i,o;function s(u){i=requestAnimationFrame(s),t=!0,r=0,Bm("before",u),n=!0;for(const p of d.values()){var h;o=p.store.getState(),o.internal.active&&(o.frameloop==="always"||o.internal.frames>0)&&!((h=o.gl.xr)!=null&&h.isPresenting)&&(r+=Ox(u,o))}if(n=!1,Bm("after",u),r===0)return Bm("tail",u),t=!1,cancelAnimationFrame(i)}function a(u,h=1){var p;if(!u)return d.forEach(c=>a(c.store.getState(),h));(p=u.gl.xr)!=null&&p.isPresenting||!u.internal.active||u.frameloop==="never"||(h>1?u.internal.frames=Math.min(60,u.internal.frames+h):n?u.internal.frames=2:u.internal.frames=1,t||(t=!0,requestAnimationFrame(s)))}function l(u,h=!0,p,c){if(h&&Bm("before",u),p)Ox(u,p,c);else for(const f of d.values())Ox(u,f.store.getState());h&&Bm("after",u)}return{loop:s,invalidate:a,advance:l}}function SR(){const d=Ot.useContext(wR);if(!d)throw new Error("R3F: Hooks can only be used within the Canvas component!");return d}function Cc(d=n=>n,t){return SR()(d,t)}function HN(d,t=0){const n=SR(),r=n.getState().internal.subscribe,i=mR(d);return Kg(()=>r(i,t,n),[t,r,n]),null}const bA=new WeakMap;function MR(d,t){return function(n,...r){let i=bA.get(n);return i||(i=new n,bA.set(n,i)),d&&d(i),Promise.all(r.map(o=>new Promise((s,a)=>i.load(o,l=>{l.scene&&Object.assign(l,IN(l.scene)),s(l)},t,l=>a(new Error(`Could not load ${o}: ${l==null?void 0:l.message}`))))))}}function Qg(d,t,n,r){const i=Array.isArray(t)?t:[t],o=mN(MR(n,r),[d,...i],{equal:Yn.equ});return Array.isArray(t)?o:o[0]}Qg.preload=function(d,t,n){const r=Array.isArray(t)?t:[t];return gN(MR(n),[d,...r])};Qg.clear=function(d,t){const n=Array.isArray(t)?t:[t];return yN([d,...n])};const Tp=new Map,{invalidate:wA,advance:SA}=GN(Tp),{reconciler:n_,applyProps:Vh}=TN(Tp,DN),Wh={objects:"shallow",strict:!1},zN=(d,t)=>{const n=typeof d=="function"?d(t):d;return bR(n)?n:new UT({powerPreference:"high-performance",canvas:t,antialias:!0,alpha:!0,...d})};function VN(d,t){const n=typeof HTMLCanvasElement<"u"&&d instanceof HTMLCanvasElement;if(t){const{width:r,height:i,top:o,left:s,updateStyle:a=n}=t;return{width:r,height:i,top:o,left:s,updateStyle:a}}else if(typeof HTMLCanvasElement<"u"&&d instanceof HTMLCanvasElement&&d.parentElement){const{width:r,height:i,top:o,left:s}=d.parentElement.getBoundingClientRect();return{width:r,height:i,top:o,left:s,updateStyle:n}}else if(typeof OffscreenCanvas<"u"&&d instanceof OffscreenCanvas)return{width:d.width,height:d.height,top:0,left:0,updateStyle:n};return{width:0,height:0,top:0,left:0}}function WN(d){const t=Tp.get(d),n=t==null?void 0:t.fiber,r=t==null?void 0:t.store;t&&console.warn("R3F.createRoot should only be called once!");const i=typeof reportError=="function"?reportError:console.error,o=r||ON(wA,SA),s=n||n_.createContainer(o,Ym.ConcurrentRoot,null,!1,null,"",i,null);t||Tp.set(d,{fiber:s,store:o});let a,l=!1,u;return{configure(h={}){let{gl:p,size:c,scene:f,events:m,onCreated:y,shadows:v=!1,linear:g=!1,flat:x=!1,legacy:b=!1,orthographic:w=!1,frameloop:T="always",dpr:R=[1,2],performance:C,raycaster:P,camera:I,onPointerMissed:D}=h,j=o.getState(),N=j.gl;j.gl||j.set({gl:N=zN(p,d)});let O=j.raycaster;O||j.set({raycaster:O=new jT});const{params:W,...X}=P||{};if(Yn.equ(X,O,Wh)||Vh(O,{...X}),Yn.equ(W,O.params,Wh)||Vh(O,{params:{...O.params,...W}}),!j.camera||j.camera===u&&!Yn.equ(u,I,Wh)){u=I;const Y=I instanceof Ug,Z=Y?I:w?new Nu(0,0,0,0,.1,1e3):new yi(75,0,.1,1e3);Y||(Z.position.z=5,I&&(Vh(Z,I),("aspect"in I||"left"in I||"right"in I||"bottom"in I||"top"in I)&&(Z.manual=!0,Z.updateProjectionMatrix())),!j.camera&&!(I!=null&&I.rotation)&&Z.lookAt(0,0,0)),j.set({camera:Z}),O.camera=Z}if(!j.scene){let Y;f!=null&&f.isScene?Y=f:(Y=new ew,f&&Vh(Y,f)),j.set({scene:Jh(Y)})}if(!j.xr){var J;const Y=(B,U)=>{const K=o.getState();K.frameloop!=="never"&&SA(B,!0,K,U)},Z=()=>{const B=o.getState();B.gl.xr.enabled=B.gl.xr.isPresenting,B.gl.xr.setAnimationLoop(B.gl.xr.isPresenting?Y:null),B.gl.xr.isPresenting||wA(B)},ce={connect(){const B=o.getState().gl;B.xr.addEventListener("sessionstart",Z),B.xr.addEventListener("sessionend",Z)},disconnect(){const B=o.getState().gl;B.xr.removeEventListener("sessionstart",Z),B.xr.removeEventListener("sessionend",Z)}};typeof((J=N.xr)==null?void 0:J.addEventListener)=="function"&&ce.connect(),j.set({xr:ce})}if(N.shadowMap){const Y=N.shadowMap.enabled,Z=N.shadowMap.type;if(N.shadowMap.enabled=!!v,Yn.boo(v))N.shadowMap.type=qm;else if(Yn.str(v)){var ee;const ce={basic:qA,percentage:o_,soft:qm,variance:ul};N.shadowMap.type=(ee=ce[v])!=null?ee:qm}else Yn.obj(v)&&Object.assign(N.shadowMap,v);(Y!==N.shadowMap.enabled||Z!==N.shadowMap.type)&&(N.shadowMap.needsUpdate=!0)}const V=hR();V&&("enabled"in V?V.enabled=!b:"legacyMode"in V&&(V.legacyMode=b)),l||Vh(N,{outputEncoding:g?3e3:3001,toneMapping:x?kl:Fb}),j.legacy!==b&&j.set(()=>({legacy:b})),j.linear!==g&&j.set(()=>({linear:g})),j.flat!==x&&j.set(()=>({flat:x})),p&&!Yn.fun(p)&&!bR(p)&&!Yn.equ(p,N,Wh)&&Vh(N,p),m&&!j.events.handlers&&j.set({events:m(o)});const q=VN(d,c);return Yn.equ(q,j.size,Wh)||j.setSize(q.width,q.height,q.updateStyle,q.top,q.left),R&&j.viewport.dpr!==vR(R)&&j.setDpr(R),j.frameloop!==T&&j.setFrameloop(T),j.onPointerMissed||j.set({onPointerMissed:D}),C&&!Yn.equ(C,j.performance,Wh)&&j.set(Y=>({performance:{...Y.performance,...C}})),a=y,l=!0,this},render(h){return l||this.configure(),n_.updateContainer(Zt.jsx(XN,{store:o,children:h,onCreated:a,rootElement:d}),s,null,()=>{}),o},unmount(){AR(d)}}}function XN({store:d,children:t,onCreated:n,rootElement:r}){return Kg(()=>{const i=d.getState();i.set(o=>({internal:{...o.internal,active:!0}})),n&&n(i),d.getState().events.connected||i.events.connect==null||i.events.connect(r)},[]),Zt.jsx(wR.Provider,{value:d,children:t})}function AR(d,t){const n=Tp.get(d),r=n==null?void 0:n.fiber;if(r){const i=n==null?void 0:n.store.getState();i&&(i.internal.active=!1),n_.updateContainer(null,r,null,()=>{i&&setTimeout(()=>{try{var o,s,a,l;i.events.disconnect==null||i.events.disconnect(),(o=i.gl)==null||(s=o.renderLists)==null||s.dispose==null||s.dispose(),(a=i.gl)==null||a.forceContextLoss==null||a.forceContextLoss(),(l=i.gl)!=null&&l.xr&&i.xr.disconnect(),jN(i),Tp.delete(d)}catch{}},500)})}}n_.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:Ot.version});const Fx={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function YN(d){const{handlePointer:t}=kN(d);return{priority:1,enabled:!0,compute(n,r,i){r.pointer.set(n.offsetX/r.size.width*2-1,-(n.offsetY/r.size.height)*2+1),r.raycaster.setFromCamera(r.pointer,r.camera)},connected:void 0,handlers:Object.keys(Fx).reduce((n,r)=>({...n,[r]:t(r)}),{}),update:()=>{var n;const{events:r,internal:i}=d.getState();(n=i.lastEvent)!=null&&n.current&&r.handlers&&r.handlers.onPointerMove(i.lastEvent.current)},connect:n=>{var r;const{set:i,events:o}=d.getState();o.disconnect==null||o.disconnect(),i(s=>({events:{...s.events,connected:n}})),Object.entries((r=o.handlers)!=null?r:[]).forEach(([s,a])=>{const[l,u]=Fx[s];n.addEventListener(l,a,{passive:u})})},disconnect:()=>{const{set:n,events:r}=d.getState();if(r.connected){var i;Object.entries((i=r.handlers)!=null?i:[]).forEach(([o,s])=>{if(r&&r.connected instanceof HTMLElement){const[a]=Fx[o];r.connected.removeEventListener(a,s)}}),n(o=>({events:{...o.events,connected:void 0}}))}}}}function MA(d,t){let n;return(...r)=>{window.clearTimeout(n),n=window.setTimeout(()=>d(...r),t)}}function qN({debounce:d,scroll:t,polyfill:n,offsetSize:r}={debounce:0,scroll:!1,offsetSize:!1}){const i=n||(typeof window>"u"?class{}:window.ResizeObserver);if(!i)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[o,s]=Ot.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),a=Ot.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:o,orientationHandler:null}),l=d?typeof d=="number"?d:d.scroll:null,u=d?typeof d=="number"?d:d.resize:null,h=Ot.useRef(!1);Ot.useEffect(()=>(h.current=!0,()=>void(h.current=!1)));const[p,c,f]=Ot.useMemo(()=>{const g=()=>{if(!a.current.element)return;const{left:x,top:b,width:w,height:T,bottom:R,right:C,x:P,y:I}=a.current.element.getBoundingClientRect(),D={left:x,top:b,width:w,height:T,bottom:R,right:C,x:P,y:I};a.current.element instanceof HTMLElement&&r&&(D.height=a.current.element.offsetHeight,D.width=a.current.element.offsetWidth),Object.freeze(D),h.current&&!ZN(a.current.lastBounds,D)&&s(a.current.lastBounds=D)};return[g,u?MA(g,u):g,l?MA(g,l):g]},[s,r,l,u]);function m(){a.current.scrollContainers&&(a.current.scrollContainers.forEach(g=>g.removeEventListener("scroll",f,!0)),a.current.scrollContainers=null),a.current.resizeObserver&&(a.current.resizeObserver.disconnect(),a.current.resizeObserver=null),a.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",a.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",a.current.orientationHandler))}function y(){a.current.element&&(a.current.resizeObserver=new i(f),a.current.resizeObserver.observe(a.current.element),t&&a.current.scrollContainers&&a.current.scrollContainers.forEach(g=>g.addEventListener("scroll",f,{capture:!0,passive:!0})),a.current.orientationHandler=()=>{f()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",a.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",a.current.orientationHandler))}const v=g=>{!g||g===a.current.element||(m(),a.current.element=g,a.current.scrollContainers=ER(g),y())};return KN(f,!!t),JN(c),Ot.useEffect(()=>{m(),y()},[t,f,c]),Ot.useEffect(()=>m,[]),[v,o,p]}function JN(d){Ot.useEffect(()=>{const t=d;return window.addEventListener("resize",t),()=>void window.removeEventListener("resize",t)},[d])}function KN(d,t){Ot.useEffect(()=>{if(t){const n=d;return window.addEventListener("scroll",n,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",n,!0)}},[d,t])}function ER(d){const t=[];if(!d||d===document.body)return t;const{overflow:n,overflowX:r,overflowY:i}=window.getComputedStyle(d);return[n,r,i].some(o=>o==="auto"||o==="scroll")&&t.push(d),[...t,...ER(d.parentElement)]}const QN=["x","y","top","bottom","left","right","width","height"],ZN=(d,t)=>QN.every(n=>d[n]===t[n]);var $N=Object.defineProperty,eU=Object.defineProperties,tU=Object.getOwnPropertyDescriptors,AA=Object.getOwnPropertySymbols,rU=Object.prototype.hasOwnProperty,nU=Object.prototype.propertyIsEnumerable,EA=(d,t,n)=>t in d?$N(d,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):d[t]=n,TA=(d,t)=>{for(var n in t||(t={}))rU.call(t,n)&&EA(d,n,t[n]);if(AA)for(var n of AA(t))nU.call(t,n)&&EA(d,n,t[n]);return d},iU=(d,t)=>eU(d,tU(t)),CA,RA;typeof window<"u"&&((CA=window.document)!=null&&CA.createElement||((RA=window.navigator)==null?void 0:RA.product)==="ReactNative")?Ot.useLayoutEffect:Ot.useEffect;function TR(d,t,n){if(!d)return;if(n(d)===!0)return d;let r=d.child;for(;r;){const i=TR(r,t,n);if(i)return i;r=r.sibling}}function CR(d){try{return Object.defineProperties(d,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return d}}const PA=console.error;console.error=function(){const d=[...arguments].join("");if(d!=null&&d.startsWith("Warning:")&&d.includes("useContext")){console.error=PA;return}return PA.apply(this,arguments)};const rS=CR(Ot.createContext(null));class RR extends Ot.Component{render(){return Ot.createElement(rS.Provider,{value:this._reactInternals},this.props.children)}}function sU(){const d=Ot.useContext(rS);if(d===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const t=Ot.useId();return Ot.useMemo(()=>{for(const r of[d,d==null?void 0:d.alternate]){if(!r)continue;const i=TR(r,!1,o=>{let s=o.memoizedState;for(;s;){if(s.memoizedState===t)return!0;s=s.next}});if(i)return i}},[d,t])}function oU(){const d=sU(),[t]=Ot.useState(()=>new Map);t.clear();let n=d;for(;n;){if(n.type&&typeof n.type=="object"){const i=n.type._context===void 0&&n.type.Provider===n.type?n.type:n.type._context;i&&i!==rS&&!t.has(i)&&t.set(i,Ot.useContext(CR(i)))}n=n.return}return t}function aU(){const d=oU();return Ot.useMemo(()=>Array.from(d.keys()).reduce((t,n)=>r=>Ot.createElement(t,null,Ot.createElement(n.Provider,iU(TA({},r),{value:d.get(n)}))),t=>Ot.createElement(RR,TA({},t))),[d])}const lU=Ot.forwardRef(function({children:t,fallback:n,resize:r,style:i,gl:o,events:s=YN,eventSource:a,eventPrefix:l,shadows:u,linear:h,flat:p,legacy:c,orthographic:f,frameloop:m,dpr:y,performance:v,raycaster:g,camera:x,scene:b,onPointerMissed:w,onCreated:T,...R},C){Ot.useMemo(()=>EN(EO),[]);const P=aU(),[I,D]=qN({scroll:!0,debounce:{scroll:50,resize:0},...r}),j=Ot.useRef(null),N=Ot.useRef(null);Ot.useImperativeHandle(C,()=>j.current);const O=mR(w),[W,X]=Ot.useState(!1),[J,ee]=Ot.useState(!1);if(W)throw W;if(J)throw J;const V=Ot.useRef(null);Kg(()=>{const Y=j.current;D.width>0&&D.height>0&&Y&&(V.current||(V.current=WN(Y)),V.current.configure({gl:o,events:s,shadows:u,linear:h,flat:p,legacy:c,orthographic:f,frameloop:m,dpr:y,performance:v,raycaster:g,camera:x,scene:b,size:D,onPointerMissed:(...Z)=>O.current==null?void 0:O.current(...Z),onCreated:Z=>{Z.events.connect==null||Z.events.connect(a?CN(a)?a.current:a:N.current),l&&Z.setEvents({compute:(ce,B)=>{const U=ce[l+"X"],K=ce[l+"Y"];B.pointer.set(U/B.size.width*2-1,-(K/B.size.height)*2+1),B.raycaster.setFromCamera(B.pointer,B.camera)}}),T==null||T(Z)}}),V.current.render(Zt.jsx(P,{children:Zt.jsx(gR,{set:ee,children:Zt.jsx(Ot.Suspense,{fallback:Zt.jsx(RN,{set:X}),children:t})})})))}),Ot.useEffect(()=>{const Y=j.current;if(Y)return()=>AR(Y)},[]);const q=a?"none":"auto";return Zt.jsx("div",{ref:N,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:q,...i},...R,children:Zt.jsx("div",{ref:I,style:{width:"100%",height:"100%"},children:Zt.jsx("canvas",{ref:j,style:{display:"block"},children:n})})})}),uU=Ot.forwardRef(function(t,n){return Zt.jsx(RR,{children:Zt.jsx(lU,{...t,ref:n})})});function Db(){return Db=Object.assign?Object.assign.bind():function(d){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(d[r]=n[r])}return d},Db.apply(null,arguments)}const IA=d=>{let t;const n=new Set,r=(u,h)=>{const p=typeof u=="function"?u(t):u;if(!Object.is(p,t)){const c=t;t=h??(typeof p!="object"||p===null)?p:Object.assign({},t,p),n.forEach(f=>f(t,c))}},i=()=>t,a={setState:r,getState:i,getInitialState:()=>l,subscribe:u=>(n.add(u),()=>n.delete(u))},l=t=d(r,i,a);return a},cU=d=>d?IA(d):IA,fU=d=>d;function dU(d,t=fU){const n=Vx.useSyncExternalStore(d.subscribe,()=>t(d.getState()),()=>t(d.getInitialState()));return Vx.useDebugValue(n),n}const jA=d=>{const t=cU(d),n=r=>dU(t,r);return Object.assign(n,t),n},hU=d=>d?jA(d):jA;let km=0;const pU=hU(d=>($h.onStart=(t,n,r)=>{d({active:!0,item:t,loaded:n,total:r,progress:(n-km)/(r-km)*100})},$h.onLoad=()=>{d({active:!1})},$h.onError=t=>d(n=>({errors:[...n.errors,t]})),$h.onProgress=(t,n,r)=>{n===r&&(km=r),d({active:!0,item:t,loaded:n,total:r,progress:(n-km)/(r-km)*100||100})},{errors:[],active:!1,progress:0,item:"",loaded:0,total:0})),mU=parseInt(kg.replace(/\D+/g,""));function LA(d,t){if(t===AE)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),d;if(t===Gv||t===Jb){let n=d.getIndex();if(n===null){const s=[],a=d.getAttribute("position");if(a!==void 0){for(let l=0;l<a.count;l++)s.push(l);d.setIndex(s),n=d.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),d}const r=n.count-2,i=[];if(n)if(t===Gv)for(let s=1;s<=r;s++)i.push(n.getX(0)),i.push(n.getX(s)),i.push(n.getX(s+1));else for(let s=0;s<r;s++)s%2===0?(i.push(n.getX(s)),i.push(n.getX(s+1)),i.push(n.getX(s+2))):(i.push(n.getX(s+2)),i.push(n.getX(s+1)),i.push(n.getX(s)));i.length/3!==r&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const o=d.clone();return o.setIndex(i),o.clearGroups(),o}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",t),d}var gU=Object.defineProperty,yU=(d,t,n)=>t in d?gU(d,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):d[t]=n,vU=(d,t,n)=>(yU(d,t+"",n),n);class _U{constructor(){vU(this,"_listeners")}addEventListener(t,n){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[t]===void 0&&(r[t]=[]),r[t].indexOf(n)===-1&&r[t].push(n)}hasEventListener(t,n){if(this._listeners===void 0)return!1;const r=this._listeners;return r[t]!==void 0&&r[t].indexOf(n)!==-1}removeEventListener(t,n){if(this._listeners===void 0)return;const i=this._listeners[t];if(i!==void 0){const o=i.indexOf(n);o!==-1&&i.splice(o,1)}}dispatchEvent(t){if(this._listeners===void 0)return;const r=this._listeners[t.type];if(r!==void 0){t.target=this;const i=r.slice(0);for(let o=0,s=i.length;o<s;o++)i[o].call(this,t);t.target=null}}}var xU=Object.defineProperty,bU=(d,t,n)=>t in d?xU(d,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):d[t]=n,Tr=(d,t,n)=>(bU(d,typeof t!="symbol"?t+"":t,n),n);const V0=new Bd,DA=new Ru,wU=Math.cos(70*(Math.PI/180)),BA=(d,t)=>(d%t+t)%t;let SU=class extends _U{constructor(t,n){super(),Tr(this,"object"),Tr(this,"domElement"),Tr(this,"enabled",!0),Tr(this,"target",new Oe),Tr(this,"minDistance",0),Tr(this,"maxDistance",1/0),Tr(this,"minZoom",0),Tr(this,"maxZoom",1/0),Tr(this,"minPolarAngle",0),Tr(this,"maxPolarAngle",Math.PI),Tr(this,"minAzimuthAngle",-1/0),Tr(this,"maxAzimuthAngle",1/0),Tr(this,"enableDamping",!1),Tr(this,"dampingFactor",.05),Tr(this,"enableZoom",!0),Tr(this,"zoomSpeed",1),Tr(this,"enableRotate",!0),Tr(this,"rotateSpeed",1),Tr(this,"enablePan",!0),Tr(this,"panSpeed",1),Tr(this,"screenSpacePanning",!0),Tr(this,"keyPanSpeed",7),Tr(this,"zoomToCursor",!1),Tr(this,"autoRotate",!1),Tr(this,"autoRotateSpeed",2),Tr(this,"reverseOrbit",!1),Tr(this,"reverseHorizontalOrbit",!1),Tr(this,"reverseVerticalOrbit",!1),Tr(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),Tr(this,"mouseButtons",{LEFT:Yf.ROTATE,MIDDLE:Yf.DOLLY,RIGHT:Yf.PAN}),Tr(this,"touches",{ONE:qf.ROTATE,TWO:qf.DOLLY_PAN}),Tr(this,"target0"),Tr(this,"position0"),Tr(this,"zoom0"),Tr(this,"_domElementKeyEvents",null),Tr(this,"getPolarAngle"),Tr(this,"getAzimuthalAngle"),Tr(this,"setPolarAngle"),Tr(this,"setAzimuthalAngle"),Tr(this,"getDistance"),Tr(this,"getZoomScale"),Tr(this,"listenToKeyEvents"),Tr(this,"stopListenToKeyEvents"),Tr(this,"saveState"),Tr(this,"reset"),Tr(this,"update"),Tr(this,"connect"),Tr(this,"dispose"),Tr(this,"dollyIn"),Tr(this,"dollyOut"),Tr(this,"getScale"),Tr(this,"setScale"),this.object=t,this.domElement=n,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>h.phi,this.getAzimuthalAngle=()=>h.theta,this.setPolarAngle=be=>{let ke=BA(be,2*Math.PI),ot=h.phi;ot<0&&(ot+=2*Math.PI),ke<0&&(ke+=2*Math.PI);let Ce=Math.abs(ke-ot);2*Math.PI-Ce<Ce&&(ke<ot?ke+=2*Math.PI:ot+=2*Math.PI),p.phi=ke-ot,r.update()},this.setAzimuthalAngle=be=>{let ke=BA(be,2*Math.PI),ot=h.theta;ot<0&&(ot+=2*Math.PI),ke<0&&(ke+=2*Math.PI);let Ce=Math.abs(ke-ot);2*Math.PI-Ce<Ce&&(ke<ot?ke+=2*Math.PI:ot+=2*Math.PI),p.theta=ke-ot,r.update()},this.getDistance=()=>r.object.position.distanceTo(r.target),this.listenToKeyEvents=be=>{be.addEventListener("keydown",Be),this._domElementKeyEvents=be},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",Be),this._domElementKeyEvents=null},this.saveState=()=>{r.target0.copy(r.target),r.position0.copy(r.object.position),r.zoom0=r.object.zoom},this.reset=()=>{r.target.copy(r.target0),r.object.position.copy(r.position0),r.object.zoom=r.zoom0,r.object.updateProjectionMatrix(),r.dispatchEvent(i),r.update(),l=a.NONE},this.update=(()=>{const be=new Oe,ke=new Oe(0,1,0),ot=new ds().setFromUnitVectors(t.up,ke),Ce=ot.clone().invert(),it=new Oe,Xe=new ds,ut=2*Math.PI;return function(){const vt=r.object.position;ot.setFromUnitVectors(t.up,ke),Ce.copy(ot).invert(),be.copy(vt).sub(r.target),be.applyQuaternion(ot),h.setFromVector3(be),r.autoRotate&&l===a.NONE&&W(N()),r.enableDamping?(h.theta+=p.theta*r.dampingFactor,h.phi+=p.phi*r.dampingFactor):(h.theta+=p.theta,h.phi+=p.phi);let Rt=r.minAzimuthAngle,Dt=r.maxAzimuthAngle;isFinite(Rt)&&isFinite(Dt)&&(Rt<-Math.PI?Rt+=ut:Rt>Math.PI&&(Rt-=ut),Dt<-Math.PI?Dt+=ut:Dt>Math.PI&&(Dt-=ut),Rt<=Dt?h.theta=Math.max(Rt,Math.min(Dt,h.theta)):h.theta=h.theta>(Rt+Dt)/2?Math.max(Rt,h.theta):Math.min(Dt,h.theta)),h.phi=Math.max(r.minPolarAngle,Math.min(r.maxPolarAngle,h.phi)),h.makeSafe(),r.enableDamping===!0?r.target.addScaledVector(f,r.dampingFactor):r.target.add(f),r.zoomToCursor&&I||r.object.isOrthographicCamera?h.radius=B(h.radius):h.radius=B(h.radius*c),be.setFromSpherical(h),be.applyQuaternion(Ce),vt.copy(r.target).add(be),r.object.matrixAutoUpdate||r.object.updateMatrix(),r.object.lookAt(r.target),r.enableDamping===!0?(p.theta*=1-r.dampingFactor,p.phi*=1-r.dampingFactor,f.multiplyScalar(1-r.dampingFactor)):(p.set(0,0,0),f.set(0,0,0));let yr=!1;if(r.zoomToCursor&&I){let Bt=null;if(r.object instanceof yi&&r.object.isPerspectiveCamera){const Ut=be.length();Bt=B(Ut*c);const Yt=Ut-Bt;r.object.position.addScaledVector(C,Yt),r.object.updateMatrixWorld()}else if(r.object.isOrthographicCamera){const Ut=new Oe(P.x,P.y,0);Ut.unproject(r.object),r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/c)),r.object.updateProjectionMatrix(),yr=!0;const Yt=new Oe(P.x,P.y,0);Yt.unproject(r.object),r.object.position.sub(Yt).add(Ut),r.object.updateMatrixWorld(),Bt=be.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),r.zoomToCursor=!1;Bt!==null&&(r.screenSpacePanning?r.target.set(0,0,-1).transformDirection(r.object.matrix).multiplyScalar(Bt).add(r.object.position):(V0.origin.copy(r.object.position),V0.direction.set(0,0,-1).transformDirection(r.object.matrix),Math.abs(r.object.up.dot(V0.direction))<wU?t.lookAt(r.target):(DA.setFromNormalAndCoplanarPoint(r.object.up,r.target),V0.intersectPlane(DA,r.target))))}else r.object instanceof Nu&&r.object.isOrthographicCamera&&(yr=c!==1,yr&&(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/c)),r.object.updateProjectionMatrix()));return c=1,I=!1,yr||it.distanceToSquared(r.object.position)>u||8*(1-Xe.dot(r.object.quaternion))>u?(r.dispatchEvent(i),it.copy(r.object.position),Xe.copy(r.object.quaternion),yr=!1,!0):!1}})(),this.connect=be=>{r.domElement=be,r.domElement.style.touchAction="none",r.domElement.addEventListener("contextmenu",de),r.domElement.addEventListener("pointerdown",fe),r.domElement.addEventListener("pointercancel",Ke),r.domElement.addEventListener("wheel",ht)},this.dispose=()=>{var be,ke,ot,Ce,it,Xe;r.domElement&&(r.domElement.style.touchAction="auto"),(be=r.domElement)==null||be.removeEventListener("contextmenu",de),(ke=r.domElement)==null||ke.removeEventListener("pointerdown",fe),(ot=r.domElement)==null||ot.removeEventListener("pointercancel",Ke),(Ce=r.domElement)==null||Ce.removeEventListener("wheel",ht),(it=r.domElement)==null||it.ownerDocument.removeEventListener("pointermove",We),(Xe=r.domElement)==null||Xe.ownerDocument.removeEventListener("pointerup",Ke),r._domElementKeyEvents!==null&&r._domElementKeyEvents.removeEventListener("keydown",Be)};const r=this,i={type:"change"},o={type:"start"},s={type:"end"},a={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let l=a.NONE;const u=1e-6,h=new nb,p=new nb;let c=1;const f=new Oe,m=new Ct,y=new Ct,v=new Ct,g=new Ct,x=new Ct,b=new Ct,w=new Ct,T=new Ct,R=new Ct,C=new Oe,P=new Ct;let I=!1;const D=[],j={};function N(){return 2*Math.PI/60/60*r.autoRotateSpeed}function O(){return Math.pow(.95,r.zoomSpeed)}function W(be){r.reverseOrbit||r.reverseHorizontalOrbit?p.theta+=be:p.theta-=be}function X(be){r.reverseOrbit||r.reverseVerticalOrbit?p.phi+=be:p.phi-=be}const J=(()=>{const be=new Oe;return function(ot,Ce){be.setFromMatrixColumn(Ce,0),be.multiplyScalar(-ot),f.add(be)}})(),ee=(()=>{const be=new Oe;return function(ot,Ce){r.screenSpacePanning===!0?be.setFromMatrixColumn(Ce,1):(be.setFromMatrixColumn(Ce,0),be.crossVectors(r.object.up,be)),be.multiplyScalar(ot),f.add(be)}})(),V=(()=>{const be=new Oe;return function(ot,Ce){const it=r.domElement;if(it&&r.object instanceof yi&&r.object.isPerspectiveCamera){const Xe=r.object.position;be.copy(Xe).sub(r.target);let ut=be.length();ut*=Math.tan(r.object.fov/2*Math.PI/180),J(2*ot*ut/it.clientHeight,r.object.matrix),ee(2*Ce*ut/it.clientHeight,r.object.matrix)}else it&&r.object instanceof Nu&&r.object.isOrthographicCamera?(J(ot*(r.object.right-r.object.left)/r.object.zoom/it.clientWidth,r.object.matrix),ee(Ce*(r.object.top-r.object.bottom)/r.object.zoom/it.clientHeight,r.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),r.enablePan=!1)}})();function q(be){r.object instanceof yi&&r.object.isPerspectiveCamera||r.object instanceof Nu&&r.object.isOrthographicCamera?c=be:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function Y(be){q(c/be)}function Z(be){q(c*be)}function ce(be){if(!r.zoomToCursor||!r.domElement)return;I=!0;const ke=r.domElement.getBoundingClientRect(),ot=be.clientX-ke.left,Ce=be.clientY-ke.top,it=ke.width,Xe=ke.height;P.x=ot/it*2-1,P.y=-(Ce/Xe)*2+1,C.set(P.x,P.y,1).unproject(r.object).sub(r.object.position).normalize()}function B(be){return Math.max(r.minDistance,Math.min(r.maxDistance,be))}function U(be){m.set(be.clientX,be.clientY)}function K(be){ce(be),w.set(be.clientX,be.clientY)}function re(be){g.set(be.clientX,be.clientY)}function ae(be){y.set(be.clientX,be.clientY),v.subVectors(y,m).multiplyScalar(r.rotateSpeed);const ke=r.domElement;ke&&(W(2*Math.PI*v.x/ke.clientHeight),X(2*Math.PI*v.y/ke.clientHeight)),m.copy(y),r.update()}function pe(be){T.set(be.clientX,be.clientY),R.subVectors(T,w),R.y>0?Y(O()):R.y<0&&Z(O()),w.copy(T),r.update()}function ye(be){x.set(be.clientX,be.clientY),b.subVectors(x,g).multiplyScalar(r.panSpeed),V(b.x,b.y),g.copy(x),r.update()}function Re(be){ce(be),be.deltaY<0?Z(O()):be.deltaY>0&&Y(O()),r.update()}function Me(be){let ke=!1;switch(be.code){case r.keys.UP:V(0,r.keyPanSpeed),ke=!0;break;case r.keys.BOTTOM:V(0,-r.keyPanSpeed),ke=!0;break;case r.keys.LEFT:V(r.keyPanSpeed,0),ke=!0;break;case r.keys.RIGHT:V(-r.keyPanSpeed,0),ke=!0;break}ke&&(be.preventDefault(),r.update())}function xe(){if(D.length==1)m.set(D[0].pageX,D[0].pageY);else{const be=.5*(D[0].pageX+D[1].pageX),ke=.5*(D[0].pageY+D[1].pageY);m.set(be,ke)}}function ve(){if(D.length==1)g.set(D[0].pageX,D[0].pageY);else{const be=.5*(D[0].pageX+D[1].pageX),ke=.5*(D[0].pageY+D[1].pageY);g.set(be,ke)}}function ne(){const be=D[0].pageX-D[1].pageX,ke=D[0].pageY-D[1].pageY,ot=Math.sqrt(be*be+ke*ke);w.set(0,ot)}function Te(){r.enableZoom&&ne(),r.enablePan&&ve()}function Pe(){r.enableZoom&&ne(),r.enableRotate&&xe()}function Ae(be){if(D.length==1)y.set(be.pageX,be.pageY);else{const ot=De(be),Ce=.5*(be.pageX+ot.x),it=.5*(be.pageY+ot.y);y.set(Ce,it)}v.subVectors(y,m).multiplyScalar(r.rotateSpeed);const ke=r.domElement;ke&&(W(2*Math.PI*v.x/ke.clientHeight),X(2*Math.PI*v.y/ke.clientHeight)),m.copy(y)}function je(be){if(D.length==1)x.set(be.pageX,be.pageY);else{const ke=De(be),ot=.5*(be.pageX+ke.x),Ce=.5*(be.pageY+ke.y);x.set(ot,Ce)}b.subVectors(x,g).multiplyScalar(r.panSpeed),V(b.x,b.y),g.copy(x)}function Ue(be){const ke=De(be),ot=be.pageX-ke.x,Ce=be.pageY-ke.y,it=Math.sqrt(ot*ot+Ce*Ce);T.set(0,it),R.set(0,Math.pow(T.y/w.y,r.zoomSpeed)),Y(R.y),w.copy(T)}function Ge(be){r.enableZoom&&Ue(be),r.enablePan&&je(be)}function _e(be){r.enableZoom&&Ue(be),r.enableRotate&&Ae(be)}function fe(be){var ke,ot;r.enabled!==!1&&(D.length===0&&((ke=r.domElement)==null||ke.ownerDocument.addEventListener("pointermove",We),(ot=r.domElement)==null||ot.ownerDocument.addEventListener("pointerup",Ke)),ge(be),be.pointerType==="touch"?rt(be):$e(be))}function We(be){r.enabled!==!1&&(be.pointerType==="touch"?Ye(be):et(be))}function Ke(be){var ke,ot,Ce;ue(be),D.length===0&&((ke=r.domElement)==null||ke.releasePointerCapture(be.pointerId),(ot=r.domElement)==null||ot.ownerDocument.removeEventListener("pointermove",We),(Ce=r.domElement)==null||Ce.ownerDocument.removeEventListener("pointerup",Ke)),r.dispatchEvent(s),l=a.NONE}function $e(be){let ke;switch(be.button){case 0:ke=r.mouseButtons.LEFT;break;case 1:ke=r.mouseButtons.MIDDLE;break;case 2:ke=r.mouseButtons.RIGHT;break;default:ke=-1}switch(ke){case Yf.DOLLY:if(r.enableZoom===!1)return;K(be),l=a.DOLLY;break;case Yf.ROTATE:if(be.ctrlKey||be.metaKey||be.shiftKey){if(r.enablePan===!1)return;re(be),l=a.PAN}else{if(r.enableRotate===!1)return;U(be),l=a.ROTATE}break;case Yf.PAN:if(be.ctrlKey||be.metaKey||be.shiftKey){if(r.enableRotate===!1)return;U(be),l=a.ROTATE}else{if(r.enablePan===!1)return;re(be),l=a.PAN}break;default:l=a.NONE}l!==a.NONE&&r.dispatchEvent(o)}function et(be){if(r.enabled!==!1)switch(l){case a.ROTATE:if(r.enableRotate===!1)return;ae(be);break;case a.DOLLY:if(r.enableZoom===!1)return;pe(be);break;case a.PAN:if(r.enablePan===!1)return;ye(be);break}}function ht(be){r.enabled===!1||r.enableZoom===!1||l!==a.NONE&&l!==a.ROTATE||(be.preventDefault(),r.dispatchEvent(o),Re(be),r.dispatchEvent(s))}function Be(be){r.enabled===!1||r.enablePan===!1||Me(be)}function rt(be){switch(Se(be),D.length){case 1:switch(r.touches.ONE){case qf.ROTATE:if(r.enableRotate===!1)return;xe(),l=a.TOUCH_ROTATE;break;case qf.PAN:if(r.enablePan===!1)return;ve(),l=a.TOUCH_PAN;break;default:l=a.NONE}break;case 2:switch(r.touches.TWO){case qf.DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;Te(),l=a.TOUCH_DOLLY_PAN;break;case qf.DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;Pe(),l=a.TOUCH_DOLLY_ROTATE;break;default:l=a.NONE}break;default:l=a.NONE}l!==a.NONE&&r.dispatchEvent(o)}function Ye(be){switch(Se(be),l){case a.TOUCH_ROTATE:if(r.enableRotate===!1)return;Ae(be),r.update();break;case a.TOUCH_PAN:if(r.enablePan===!1)return;je(be),r.update();break;case a.TOUCH_DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;Ge(be),r.update();break;case a.TOUCH_DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;_e(be),r.update();break;default:l=a.NONE}}function de(be){r.enabled!==!1&&be.preventDefault()}function ge(be){D.push(be)}function ue(be){delete j[be.pointerId];for(let ke=0;ke<D.length;ke++)if(D[ke].pointerId==be.pointerId){D.splice(ke,1);return}}function Se(be){let ke=j[be.pointerId];ke===void 0&&(ke=new Ct,j[be.pointerId]=ke),ke.set(be.pageX,be.pageY)}function De(be){const ke=be.pointerId===D[0].pointerId?D[1]:D[0];return j[ke.pointerId]}this.dollyIn=(be=O())=>{Z(be),r.update()},this.dollyOut=(be=O())=>{Y(be),r.update()},this.getScale=()=>c,this.setScale=be=>{q(be),r.update()},this.getZoomScale=()=>O(),n!==void 0&&this.connect(n),this.update()}};function i_(d){if(typeof TextDecoder<"u")return new TextDecoder().decode(d);let t="";for(let n=0,r=d.length;n<r;n++)t+=String.fromCharCode(d[n]);try{return decodeURIComponent(escape(t))}catch{return t}}const ud="srgb",Gu="srgb-linear",kA=3001,MU=3e3;class nS extends qs{constructor(t){super(t),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(n){return new RU(n)}),this.register(function(n){return new PU(n)}),this.register(function(n){return new NU(n)}),this.register(function(n){return new UU(n)}),this.register(function(n){return new GU(n)}),this.register(function(n){return new jU(n)}),this.register(function(n){return new LU(n)}),this.register(function(n){return new DU(n)}),this.register(function(n){return new BU(n)}),this.register(function(n){return new CU(n)}),this.register(function(n){return new kU(n)}),this.register(function(n){return new IU(n)}),this.register(function(n){return new FU(n)}),this.register(function(n){return new OU(n)}),this.register(function(n){return new EU(n)}),this.register(function(n){return new HU(n)}),this.register(function(n){return new zU(n)})}load(t,n,r,i){const o=this;let s;if(this.resourcePath!=="")s=this.resourcePath;else if(this.path!==""){const u=Oc.extractUrlBase(t);s=Oc.resolveURL(u,this.path)}else s=Oc.extractUrlBase(t);this.manager.itemStart(t);const a=function(u){i?i(u):console.error(u),o.manager.itemError(t),o.manager.itemEnd(t)},l=new ca(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(t,function(u){try{o.parse(u,s,function(h){n(h),o.manager.itemEnd(t)},a)}catch(h){a(h)}},r,a)}setDRACOLoader(t){return this.dracoLoader=t,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(t){return this.ktx2Loader=t,this}setMeshoptDecoder(t){return this.meshoptDecoder=t,this}register(t){return this.pluginCallbacks.indexOf(t)===-1&&this.pluginCallbacks.push(t),this}unregister(t){return this.pluginCallbacks.indexOf(t)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(t),1),this}parse(t,n,r,i){let o;const s={},a={};if(typeof t=="string")o=JSON.parse(t);else if(t instanceof ArrayBuffer)if(i_(new Uint8Array(t.slice(0,4)))===PR){try{s[ln.KHR_BINARY_GLTF]=new VU(t)}catch(h){i&&i(h);return}o=JSON.parse(s[ln.KHR_BINARY_GLTF].content)}else o=JSON.parse(i_(new Uint8Array(t)));else o=t;if(o.asset===void 0||o.asset.version[0]<2){i&&i(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const l=new n4(o,{path:n||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(let u=0;u<this.pluginCallbacks.length;u++){const h=this.pluginCallbacks[u](l);h.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),a[h.name]=h,s[h.name]=!0}if(o.extensionsUsed)for(let u=0;u<o.extensionsUsed.length;++u){const h=o.extensionsUsed[u],p=o.extensionsRequired||[];switch(h){case ln.KHR_MATERIALS_UNLIT:s[h]=new TU;break;case ln.KHR_DRACO_MESH_COMPRESSION:s[h]=new WU(o,this.dracoLoader);break;case ln.KHR_TEXTURE_TRANSFORM:s[h]=new XU;break;case ln.KHR_MESH_QUANTIZATION:s[h]=new YU;break;default:p.indexOf(h)>=0&&a[h]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+h+'".')}}l.setExtensions(s),l.setPlugins(a),l.parse(r,i)}parseAsync(t,n){const r=this;return new Promise(function(i,o){r.parse(t,n,i,o)})}}function AU(){let d={};return{get:function(t){return d[t]},add:function(t,n){d[t]=n},remove:function(t){delete d[t]},removeAll:function(){d={}}}}const ln={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class EU{constructor(t){this.parser=t,this.name=ln.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const t=this.parser,n=this.parser.json.nodes||[];for(let r=0,i=n.length;r<i;r++){const o=n[r];o.extensions&&o.extensions[this.name]&&o.extensions[this.name].light!==void 0&&t._addNodeRef(this.cache,o.extensions[this.name].light)}}_loadLight(t){const n=this.parser,r="light:"+t;let i=n.cache.get(r);if(i)return i;const o=n.json,l=((o.extensions&&o.extensions[this.name]||{}).lights||[])[t];let u;const h=new nr(16777215);l.color!==void 0&&h.setRGB(l.color[0],l.color[1],l.color[2],Gu);const p=l.range!==void 0?l.range:0;switch(l.type){case"directional":u=new ww(h),u.target.position.set(0,0,-1),u.add(u.target);break;case"point":u=new bw(h),u.distance=p;break;case"spot":u=new xw(h),u.distance=p,l.spot=l.spot||{},l.spot.innerConeAngle=l.spot.innerConeAngle!==void 0?l.spot.innerConeAngle:0,l.spot.outerConeAngle=l.spot.outerConeAngle!==void 0?l.spot.outerConeAngle:Math.PI/4,u.angle=l.spot.outerConeAngle,u.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,u.target.position.set(0,0,-1),u.add(u.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return u.position.set(0,0,0),u.decay=2,Cu(u,l),l.intensity!==void 0&&(u.intensity=l.intensity),u.name=n.createUniqueName(l.name||"light_"+t),i=Promise.resolve(u),n.cache.add(r,i),i}getDependency(t,n){if(t==="light")return this._loadLight(n)}createNodeAttachment(t){const n=this,r=this.parser,o=r.json.nodes[t],a=(o.extensions&&o.extensions[this.name]||{}).light;return a===void 0?null:this._loadLight(a).then(function(l){return r._getNodeRef(n.cache,a,l)})}}class TU{constructor(){this.name=ln.KHR_MATERIALS_UNLIT}getMaterialType(){return sa}extendParams(t,n,r){const i=[];t.color=new nr(1,1,1),t.opacity=1;const o=n.pbrMetallicRoughness;if(o){if(Array.isArray(o.baseColorFactor)){const s=o.baseColorFactor;t.color.setRGB(s[0],s[1],s[2],Gu),t.opacity=s[3]}o.baseColorTexture!==void 0&&i.push(r.assignTexture(t,"map",o.baseColorTexture,ud))}return Promise.all(i)}}class CU{constructor(t){this.parser=t,this.name=ln.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(t,n){const i=this.parser.json.materials[t];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const o=i.extensions[this.name].emissiveStrength;return o!==void 0&&(n.emissiveIntensity=o),Promise.resolve()}}class RU{constructor(t){this.parser=t,this.name=ln.KHR_MATERIALS_CLEARCOAT}getMaterialType(t){const r=this.parser.json.materials[t];return!r.extensions||!r.extensions[this.name]?null:ka}extendMaterialParams(t,n){const r=this.parser,i=r.json.materials[t];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const o=[],s=i.extensions[this.name];if(s.clearcoatFactor!==void 0&&(n.clearcoat=s.clearcoatFactor),s.clearcoatTexture!==void 0&&o.push(r.assignTexture(n,"clearcoatMap",s.clearcoatTexture)),s.clearcoatRoughnessFactor!==void 0&&(n.clearcoatRoughness=s.clearcoatRoughnessFactor),s.clearcoatRoughnessTexture!==void 0&&o.push(r.assignTexture(n,"clearcoatRoughnessMap",s.clearcoatRoughnessTexture)),s.clearcoatNormalTexture!==void 0&&(o.push(r.assignTexture(n,"clearcoatNormalMap",s.clearcoatNormalTexture)),s.clearcoatNormalTexture.scale!==void 0)){const a=s.clearcoatNormalTexture.scale;n.clearcoatNormalScale=new Ct(a,a)}return Promise.all(o)}}class PU{constructor(t){this.parser=t,this.name=ln.KHR_MATERIALS_DISPERSION}getMaterialType(t){const r=this.parser.json.materials[t];return!r.extensions||!r.extensions[this.name]?null:ka}extendMaterialParams(t,n){const i=this.parser.json.materials[t];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const o=i.extensions[this.name];return n.dispersion=o.dispersion!==void 0?o.dispersion:0,Promise.resolve()}}class IU{constructor(t){this.parser=t,this.name=ln.KHR_MATERIALS_IRIDESCENCE}getMaterialType(t){const r=this.parser.json.materials[t];return!r.extensions||!r.extensions[this.name]?null:ka}extendMaterialParams(t,n){const r=this.parser,i=r.json.materials[t];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const o=[],s=i.extensions[this.name];return s.iridescenceFactor!==void 0&&(n.iridescence=s.iridescenceFactor),s.iridescenceTexture!==void 0&&o.push(r.assignTexture(n,"iridescenceMap",s.iridescenceTexture)),s.iridescenceIor!==void 0&&(n.iridescenceIOR=s.iridescenceIor),n.iridescenceThicknessRange===void 0&&(n.iridescenceThicknessRange=[100,400]),s.iridescenceThicknessMinimum!==void 0&&(n.iridescenceThicknessRange[0]=s.iridescenceThicknessMinimum),s.iridescenceThicknessMaximum!==void 0&&(n.iridescenceThicknessRange[1]=s.iridescenceThicknessMaximum),s.iridescenceThicknessTexture!==void 0&&o.push(r.assignTexture(n,"iridescenceThicknessMap",s.iridescenceThicknessTexture)),Promise.all(o)}}class jU{constructor(t){this.parser=t,this.name=ln.KHR_MATERIALS_SHEEN}getMaterialType(t){const r=this.parser.json.materials[t];return!r.extensions||!r.extensions[this.name]?null:ka}extendMaterialParams(t,n){const r=this.parser,i=r.json.materials[t];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const o=[];n.sheenColor=new nr(0,0,0),n.sheenRoughness=0,n.sheen=1;const s=i.extensions[this.name];if(s.sheenColorFactor!==void 0){const a=s.sheenColorFactor;n.sheenColor.setRGB(a[0],a[1],a[2],Gu)}return s.sheenRoughnessFactor!==void 0&&(n.sheenRoughness=s.sheenRoughnessFactor),s.sheenColorTexture!==void 0&&o.push(r.assignTexture(n,"sheenColorMap",s.sheenColorTexture,ud)),s.sheenRoughnessTexture!==void 0&&o.push(r.assignTexture(n,"sheenRoughnessMap",s.sheenRoughnessTexture)),Promise.all(o)}}class LU{constructor(t){this.parser=t,this.name=ln.KHR_MATERIALS_TRANSMISSION}getMaterialType(t){const r=this.parser.json.materials[t];return!r.extensions||!r.extensions[this.name]?null:ka}extendMaterialParams(t,n){const r=this.parser,i=r.json.materials[t];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const o=[],s=i.extensions[this.name];return s.transmissionFactor!==void 0&&(n.transmission=s.transmissionFactor),s.transmissionTexture!==void 0&&o.push(r.assignTexture(n,"transmissionMap",s.transmissionTexture)),Promise.all(o)}}class DU{constructor(t){this.parser=t,this.name=ln.KHR_MATERIALS_VOLUME}getMaterialType(t){const r=this.parser.json.materials[t];return!r.extensions||!r.extensions[this.name]?null:ka}extendMaterialParams(t,n){const r=this.parser,i=r.json.materials[t];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const o=[],s=i.extensions[this.name];n.thickness=s.thicknessFactor!==void 0?s.thicknessFactor:0,s.thicknessTexture!==void 0&&o.push(r.assignTexture(n,"thicknessMap",s.thicknessTexture)),n.attenuationDistance=s.attenuationDistance||1/0;const a=s.attenuationColor||[1,1,1];return n.attenuationColor=new nr().setRGB(a[0],a[1],a[2],Gu),Promise.all(o)}}class BU{constructor(t){this.parser=t,this.name=ln.KHR_MATERIALS_IOR}getMaterialType(t){const r=this.parser.json.materials[t];return!r.extensions||!r.extensions[this.name]?null:ka}extendMaterialParams(t,n){const i=this.parser.json.materials[t];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const o=i.extensions[this.name];return n.ior=o.ior!==void 0?o.ior:1.5,Promise.resolve()}}class kU{constructor(t){this.parser=t,this.name=ln.KHR_MATERIALS_SPECULAR}getMaterialType(t){const r=this.parser.json.materials[t];return!r.extensions||!r.extensions[this.name]?null:ka}extendMaterialParams(t,n){const r=this.parser,i=r.json.materials[t];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const o=[],s=i.extensions[this.name];n.specularIntensity=s.specularFactor!==void 0?s.specularFactor:1,s.specularTexture!==void 0&&o.push(r.assignTexture(n,"specularIntensityMap",s.specularTexture));const a=s.specularColorFactor||[1,1,1];return n.specularColor=new nr().setRGB(a[0],a[1],a[2],Gu),s.specularColorTexture!==void 0&&o.push(r.assignTexture(n,"specularColorMap",s.specularColorTexture,ud)),Promise.all(o)}}class OU{constructor(t){this.parser=t,this.name=ln.EXT_MATERIALS_BUMP}getMaterialType(t){const r=this.parser.json.materials[t];return!r.extensions||!r.extensions[this.name]?null:ka}extendMaterialParams(t,n){const r=this.parser,i=r.json.materials[t];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const o=[],s=i.extensions[this.name];return n.bumpScale=s.bumpFactor!==void 0?s.bumpFactor:1,s.bumpTexture!==void 0&&o.push(r.assignTexture(n,"bumpMap",s.bumpTexture)),Promise.all(o)}}class FU{constructor(t){this.parser=t,this.name=ln.KHR_MATERIALS_ANISOTROPY}getMaterialType(t){const r=this.parser.json.materials[t];return!r.extensions||!r.extensions[this.name]?null:ka}extendMaterialParams(t,n){const r=this.parser,i=r.json.materials[t];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const o=[],s=i.extensions[this.name];return s.anisotropyStrength!==void 0&&(n.anisotropy=s.anisotropyStrength),s.anisotropyRotation!==void 0&&(n.anisotropyRotation=s.anisotropyRotation),s.anisotropyTexture!==void 0&&o.push(r.assignTexture(n,"anisotropyMap",s.anisotropyTexture)),Promise.all(o)}}class NU{constructor(t){this.parser=t,this.name=ln.KHR_TEXTURE_BASISU}loadTexture(t){const n=this.parser,r=n.json,i=r.textures[t];if(!i.extensions||!i.extensions[this.name])return null;const o=i.extensions[this.name],s=n.options.ktx2Loader;if(!s){if(r.extensionsRequired&&r.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return n.loadTextureImage(t,o.source,s)}}class UU{constructor(t){this.parser=t,this.name=ln.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(t){const n=this.name,r=this.parser,i=r.json,o=i.textures[t];if(!o.extensions||!o.extensions[n])return null;const s=o.extensions[n],a=i.images[s.source];let l=r.textureLoader;if(a.uri){const u=r.options.manager.getHandler(a.uri);u!==null&&(l=u)}return this.detectSupport().then(function(u){if(u)return r.loadTextureImage(t,s.source,l);if(i.extensionsRequired&&i.extensionsRequired.indexOf(n)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return r.loadTexture(t)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(t){const n=new Image;n.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",n.onload=n.onerror=function(){t(n.height===1)}})),this.isSupported}}class GU{constructor(t){this.parser=t,this.name=ln.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(t){const n=this.name,r=this.parser,i=r.json,o=i.textures[t];if(!o.extensions||!o.extensions[n])return null;const s=o.extensions[n],a=i.images[s.source];let l=r.textureLoader;if(a.uri){const u=r.options.manager.getHandler(a.uri);u!==null&&(l=u)}return this.detectSupport().then(function(u){if(u)return r.loadTextureImage(t,s.source,l);if(i.extensionsRequired&&i.extensionsRequired.indexOf(n)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return r.loadTexture(t)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(t){const n=new Image;n.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",n.onload=n.onerror=function(){t(n.height===1)}})),this.isSupported}}class HU{constructor(t){this.name=ln.EXT_MESHOPT_COMPRESSION,this.parser=t}loadBufferView(t){const n=this.parser.json,r=n.bufferViews[t];if(r.extensions&&r.extensions[this.name]){const i=r.extensions[this.name],o=this.parser.getDependency("buffer",i.buffer),s=this.parser.options.meshoptDecoder;if(!s||!s.supported){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return o.then(function(a){const l=i.byteOffset||0,u=i.byteLength||0,h=i.count,p=i.byteStride,c=new Uint8Array(a,l,u);return s.decodeGltfBufferAsync?s.decodeGltfBufferAsync(h,p,c,i.mode,i.filter).then(function(f){return f.buffer}):s.ready.then(function(){const f=new ArrayBuffer(h*p);return s.decodeGltfBuffer(new Uint8Array(f),h,p,c,i.mode,i.filter),f})})}else return null}}class zU{constructor(t){this.name=ln.EXT_MESH_GPU_INSTANCING,this.parser=t}createNodeMesh(t){const n=this.parser.json,r=n.nodes[t];if(!r.extensions||!r.extensions[this.name]||r.mesh===void 0)return null;const i=n.meshes[r.mesh];for(const u of i.primitives)if(u.mode!==Pa.TRIANGLES&&u.mode!==Pa.TRIANGLE_STRIP&&u.mode!==Pa.TRIANGLE_FAN&&u.mode!==void 0)return null;const s=r.extensions[this.name].attributes,a=[],l={};for(const u in s)a.push(this.parser.getDependency("accessor",s[u]).then(h=>(l[u]=h,l[u])));return a.length<1?null:(a.push(this.parser.createNodeMesh(t)),Promise.all(a).then(u=>{const h=u.pop(),p=h.isGroup?h.children:[h],c=u[0].count,f=[];for(const m of p){const y=new Cr,v=new Oe,g=new ds,x=new Oe(1,1,1),b=new nw(m.geometry,m.material,c);for(let w=0;w<c;w++)l.TRANSLATION&&v.fromBufferAttribute(l.TRANSLATION,w),l.ROTATION&&g.fromBufferAttribute(l.ROTATION,w),l.SCALE&&x.fromBufferAttribute(l.SCALE,w),b.setMatrixAt(w,y.compose(v,g,x));for(const w in l)if(w==="_COLOR_0"){const T=l[w];b.instanceColor=new Ed(T.array,T.itemSize,T.normalized)}else w!=="TRANSLATION"&&w!=="ROTATION"&&w!=="SCALE"&&m.geometry.setAttribute(w,l[w]);pn.prototype.copy.call(b,m),this.parser.assignFinalMaterial(b),f.push(b)}return h.isGroup?(h.clear(),h.add(...f),h):f[0]}))}}const PR="glTF",Om=12,OA={JSON:1313821514,BIN:5130562};class VU{constructor(t){this.name=ln.KHR_BINARY_GLTF,this.content=null,this.body=null;const n=new DataView(t,0,Om);if(this.header={magic:i_(new Uint8Array(t.slice(0,4))),version:n.getUint32(4,!0),length:n.getUint32(8,!0)},this.header.magic!==PR)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const r=this.header.length-Om,i=new DataView(t,Om);let o=0;for(;o<r;){const s=i.getUint32(o,!0);o+=4;const a=i.getUint32(o,!0);if(o+=4,a===OA.JSON){const l=new Uint8Array(t,Om+o,s);this.content=i_(l)}else if(a===OA.BIN){const l=Om+o;this.body=t.slice(l,l+s)}o+=s}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class WU{constructor(t,n){if(!n)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=ln.KHR_DRACO_MESH_COMPRESSION,this.json=t,this.dracoLoader=n,this.dracoLoader.preload()}decodePrimitive(t,n){const r=this.json,i=this.dracoLoader,o=t.extensions[this.name].bufferView,s=t.extensions[this.name].attributes,a={},l={},u={};for(const h in s){const p=Bb[h]||h.toLowerCase();a[p]=s[h]}for(const h in t.attributes){const p=Bb[h]||h.toLowerCase();if(s[h]!==void 0){const c=r.accessors[t.attributes[h]],f=dp[c.componentType];u[p]=f.name,l[p]=c.normalized===!0}}return n.getDependency("bufferView",o).then(function(h){return new Promise(function(p,c){i.decodeDracoFile(h,function(f){for(const m in f.attributes){const y=f.attributes[m],v=l[m];v!==void 0&&(y.normalized=v)}p(f)},a,u,Gu,c)})})}}class XU{constructor(){this.name=ln.KHR_TEXTURE_TRANSFORM}extendTexture(t,n){return(n.texCoord===void 0||n.texCoord===t.channel)&&n.offset===void 0&&n.rotation===void 0&&n.scale===void 0||(t=t.clone(),n.texCoord!==void 0&&(t.channel=n.texCoord),n.offset!==void 0&&t.offset.fromArray(n.offset),n.rotation!==void 0&&(t.rotation=n.rotation),n.scale!==void 0&&t.repeat.fromArray(n.scale),t.needsUpdate=!0),t}}class YU{constructor(){this.name=ln.KHR_MESH_QUANTIZATION}}class IR extends jp{constructor(t,n,r,i){super(t,n,r,i)}copySampleValue_(t){const n=this.resultBuffer,r=this.sampleValues,i=this.valueSize,o=t*i*3+i;for(let s=0;s!==i;s++)n[s]=r[o+s];return n}interpolate_(t,n,r,i){const o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,l=a*2,u=a*3,h=i-n,p=(r-n)/h,c=p*p,f=c*p,m=t*u,y=m-u,v=-2*f+3*c,g=f-c,x=1-v,b=g-c+p;for(let w=0;w!==a;w++){const T=s[y+w+a],R=s[y+w+l]*h,C=s[m+w+a],P=s[m+w]*h;o[w]=x*T+b*R+v*C+g*P}return o}}const qU=new ds;class JU extends IR{interpolate_(t,n,r,i){const o=super.interpolate_(t,n,r,i);return qU.fromArray(o).normalize().toArray(o),o}}const Pa={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},dp={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},FA={9728:fs,9729:Ei,9984:l_,9985:ip,9986:td,9987:La},NA={33071:ia,33648:hp,10497:Hc},Nx={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Bb={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...mU>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Rc={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},KU={CUBICSPLINE:void 0,LINEAR:gp,STEP:mp},Ux={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function QU(d){return d.DefaultMaterial===void 0&&(d.DefaultMaterial=new qg({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Hl})),d.DefaultMaterial}function Xf(d,t,n){for(const r in n.extensions)d[r]===void 0&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[r]=n.extensions[r])}function Cu(d,t){t.extras!==void 0&&(typeof t.extras=="object"?Object.assign(d.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function ZU(d,t,n){let r=!1,i=!1,o=!1;for(let u=0,h=t.length;u<h;u++){const p=t[u];if(p.POSITION!==void 0&&(r=!0),p.NORMAL!==void 0&&(i=!0),p.COLOR_0!==void 0&&(o=!0),r&&i&&o)break}if(!r&&!i&&!o)return Promise.resolve(d);const s=[],a=[],l=[];for(let u=0,h=t.length;u<h;u++){const p=t[u];if(r){const c=p.POSITION!==void 0?n.getDependency("accessor",p.POSITION):d.attributes.position;s.push(c)}if(i){const c=p.NORMAL!==void 0?n.getDependency("accessor",p.NORMAL):d.attributes.normal;a.push(c)}if(o){const c=p.COLOR_0!==void 0?n.getDependency("accessor",p.COLOR_0):d.attributes.color;l.push(c)}}return Promise.all([Promise.all(s),Promise.all(a),Promise.all(l)]).then(function(u){const h=u[0],p=u[1],c=u[2];return r&&(d.morphAttributes.position=h),i&&(d.morphAttributes.normal=p),o&&(d.morphAttributes.color=c),d.morphTargetsRelative=!0,d})}function $U(d,t){if(d.updateMorphTargets(),t.weights!==void 0)for(let n=0,r=t.weights.length;n<r;n++)d.morphTargetInfluences[n]=t.weights[n];if(t.extras&&Array.isArray(t.extras.targetNames)){const n=t.extras.targetNames;if(d.morphTargetInfluences.length===n.length){d.morphTargetDictionary={};for(let r=0,i=n.length;r<i;r++)d.morphTargetDictionary[n[r]]=r}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function e4(d){let t;const n=d.extensions&&d.extensions[ln.KHR_DRACO_MESH_COMPRESSION];if(n?t="draco:"+n.bufferView+":"+n.indices+":"+Gx(n.attributes):t=d.indices+":"+Gx(d.attributes)+":"+d.mode,d.targets!==void 0)for(let r=0,i=d.targets.length;r<i;r++)t+=":"+Gx(d.targets[r]);return t}function Gx(d){let t="";const n=Object.keys(d).sort();for(let r=0,i=n.length;r<i;r++)t+=n[r]+":"+d[n[r]]+";";return t}function kb(d){switch(d){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function t4(d){return d.search(/\.jpe?g($|\?)/i)>0||d.search(/^data\:image\/jpeg/)===0?"image/jpeg":d.search(/\.webp($|\?)/i)>0||d.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const r4=new Cr;class n4{constructor(t={},n={}){this.json=t,this.extensions={},this.plugins={},this.options=n,this.cache=new AU,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let r=!1,i=!1,o=-1;typeof navigator<"u"&&typeof navigator.userAgent<"u"&&(r=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,i=navigator.userAgent.indexOf("Firefox")>-1,o=i?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||r||i&&o<98?this.textureLoader=new _T(this.options.manager):this.textureLoader=new TT(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new ca(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(t){this.extensions=t}setPlugins(t){this.plugins=t}parse(t,n){const r=this,i=this.json,o=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(s){return s._markDefs&&s._markDefs()}),Promise.all(this._invokeAll(function(s){return s.beforeRoot&&s.beforeRoot()})).then(function(){return Promise.all([r.getDependencies("scene"),r.getDependencies("animation"),r.getDependencies("camera")])}).then(function(s){const a={scene:s[0][i.scene||0],scenes:s[0],animations:s[1],cameras:s[2],asset:i.asset,parser:r,userData:{}};return Xf(o,a,i),Cu(a,i),Promise.all(r._invokeAll(function(l){return l.afterRoot&&l.afterRoot(a)})).then(function(){for(const l of a.scenes)l.updateMatrixWorld();t(a)})}).catch(n)}_markDefs(){const t=this.json.nodes||[],n=this.json.skins||[],r=this.json.meshes||[];for(let i=0,o=n.length;i<o;i++){const s=n[i].joints;for(let a=0,l=s.length;a<l;a++)t[s[a]].isBone=!0}for(let i=0,o=t.length;i<o;i++){const s=t[i];s.mesh!==void 0&&(this._addNodeRef(this.meshCache,s.mesh),s.skin!==void 0&&(r[s.mesh].isSkinnedMesh=!0)),s.camera!==void 0&&this._addNodeRef(this.cameraCache,s.camera)}}_addNodeRef(t,n){n!==void 0&&(t.refs[n]===void 0&&(t.refs[n]=t.uses[n]=0),t.refs[n]++)}_getNodeRef(t,n,r){if(t.refs[n]<=1)return r;const i=r.clone(),o=(s,a)=>{const l=this.associations.get(s);l!=null&&this.associations.set(a,l);for(const[u,h]of s.children.entries())o(h,a.children[u])};return o(r,i),i.name+="_instance_"+t.uses[n]++,i}_invokeOne(t){const n=Object.values(this.plugins);n.push(this);for(let r=0;r<n.length;r++){const i=t(n[r]);if(i)return i}return null}_invokeAll(t){const n=Object.values(this.plugins);n.unshift(this);const r=[];for(let i=0;i<n.length;i++){const o=t(n[i]);o&&r.push(o)}return r}getDependency(t,n){const r=t+":"+n;let i=this.cache.get(r);if(!i){switch(t){case"scene":i=this.loadScene(n);break;case"node":i=this._invokeOne(function(o){return o.loadNode&&o.loadNode(n)});break;case"mesh":i=this._invokeOne(function(o){return o.loadMesh&&o.loadMesh(n)});break;case"accessor":i=this.loadAccessor(n);break;case"bufferView":i=this._invokeOne(function(o){return o.loadBufferView&&o.loadBufferView(n)});break;case"buffer":i=this.loadBuffer(n);break;case"material":i=this._invokeOne(function(o){return o.loadMaterial&&o.loadMaterial(n)});break;case"texture":i=this._invokeOne(function(o){return o.loadTexture&&o.loadTexture(n)});break;case"skin":i=this.loadSkin(n);break;case"animation":i=this._invokeOne(function(o){return o.loadAnimation&&o.loadAnimation(n)});break;case"camera":i=this.loadCamera(n);break;default:if(i=this._invokeOne(function(o){return o!=this&&o.getDependency&&o.getDependency(t,n)}),!i)throw new Error("Unknown type: "+t);break}this.cache.add(r,i)}return i}getDependencies(t){let n=this.cache.get(t);if(!n){const r=this,i=this.json[t+(t==="mesh"?"es":"s")]||[];n=Promise.all(i.map(function(o,s){return r.getDependency(t,s)})),this.cache.add(t,n)}return n}loadBuffer(t){const n=this.json.buffers[t],r=this.fileLoader;if(n.type&&n.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+n.type+" buffer type is not supported.");if(n.uri===void 0&&t===0)return Promise.resolve(this.extensions[ln.KHR_BINARY_GLTF].body);const i=this.options;return new Promise(function(o,s){r.load(Oc.resolveURL(n.uri,i.path),o,void 0,function(){s(new Error('THREE.GLTFLoader: Failed to load buffer "'+n.uri+'".'))})})}loadBufferView(t){const n=this.json.bufferViews[t];return this.getDependency("buffer",n.buffer).then(function(r){const i=n.byteLength||0,o=n.byteOffset||0;return r.slice(o,o+i)})}loadAccessor(t){const n=this,r=this.json,i=this.json.accessors[t];if(i.bufferView===void 0&&i.sparse===void 0){const s=Nx[i.type],a=dp[i.componentType],l=i.normalized===!0,u=new a(i.count*s);return Promise.resolve(new wn(u,s,l))}const o=[];return i.bufferView!==void 0?o.push(this.getDependency("bufferView",i.bufferView)):o.push(null),i.sparse!==void 0&&(o.push(this.getDependency("bufferView",i.sparse.indices.bufferView)),o.push(this.getDependency("bufferView",i.sparse.values.bufferView))),Promise.all(o).then(function(s){const a=s[0],l=Nx[i.type],u=dp[i.componentType],h=u.BYTES_PER_ELEMENT,p=h*l,c=i.byteOffset||0,f=i.bufferView!==void 0?r.bufferViews[i.bufferView].byteStride:void 0,m=i.normalized===!0;let y,v;if(f&&f!==p){const g=Math.floor(c/f),x="InterleavedBuffer:"+i.bufferView+":"+i.componentType+":"+g+":"+i.count;let b=n.cache.get(x);b||(y=new u(a,g*f,i.count*f/h),b=new Hg(y,f/h),n.cache.add(x,b)),v=new zc(b,l,c%f/h,m)}else a===null?y=new u(i.count*l):y=new u(a,c,i.count*l),v=new wn(y,l,m);if(i.sparse!==void 0){const g=Nx.SCALAR,x=dp[i.sparse.indices.componentType],b=i.sparse.indices.byteOffset||0,w=i.sparse.values.byteOffset||0,T=new x(s[1],b,i.sparse.count*g),R=new u(s[2],w,i.sparse.count*l);a!==null&&(v=new wn(v.array.slice(),v.itemSize,v.normalized));for(let C=0,P=T.length;C<P;C++){const I=T[C];if(v.setX(I,R[C*l]),l>=2&&v.setY(I,R[C*l+1]),l>=3&&v.setZ(I,R[C*l+2]),l>=4&&v.setW(I,R[C*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return v})}loadTexture(t){const n=this.json,r=this.options,o=n.textures[t].source,s=n.images[o];let a=this.textureLoader;if(s.uri){const l=r.manager.getHandler(s.uri);l!==null&&(a=l)}return this.loadTextureImage(t,o,a)}loadTextureImage(t,n,r){const i=this,o=this.json,s=o.textures[t],a=o.images[n],l=(a.uri||a.bufferView)+":"+s.sampler;if(this.textureCache[l])return this.textureCache[l];const u=this.loadImageSource(n,r).then(function(h){h.flipY=!1,h.name=s.name||a.name||"",h.name===""&&typeof a.uri=="string"&&a.uri.startsWith("data:image/")===!1&&(h.name=a.uri);const c=(o.samplers||{})[s.sampler]||{};return h.magFilter=FA[c.magFilter]||Ei,h.minFilter=FA[c.minFilter]||La,h.wrapS=NA[c.wrapS]||Hc,h.wrapT=NA[c.wrapT]||Hc,i.associations.set(h,{textures:t}),h}).catch(function(){return null});return this.textureCache[l]=u,u}loadImageSource(t,n){const r=this,i=this.json,o=this.options;if(this.sourceCache[t]!==void 0)return this.sourceCache[t].then(p=>p.clone());const s=i.images[t],a=self.URL||self.webkitURL;let l=s.uri||"",u=!1;if(s.bufferView!==void 0)l=r.getDependency("bufferView",s.bufferView).then(function(p){u=!0;const c=new Blob([p],{type:s.mimeType});return l=a.createObjectURL(c),l});else if(s.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+t+" is missing URI and bufferView");const h=Promise.resolve(l).then(function(p){return new Promise(function(c,f){let m=c;n.isImageBitmapLoader===!0&&(m=function(y){const v=new ei(y);v.needsUpdate=!0,c(v)}),n.load(Oc.resolveURL(p,o.path),m,void 0,f)})}).then(function(p){return u===!0&&a.revokeObjectURL(l),Cu(p,s),p.userData.mimeType=s.mimeType||t4(s.uri),p}).catch(function(p){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),p});return this.sourceCache[t]=h,h}assignTexture(t,n,r,i){const o=this;return this.getDependency("texture",r.index).then(function(s){if(!s)return null;if(r.texCoord!==void 0&&r.texCoord>0&&(s=s.clone(),s.channel=r.texCoord),o.extensions[ln.KHR_TEXTURE_TRANSFORM]){const a=r.extensions!==void 0?r.extensions[ln.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const l=o.associations.get(s);s=o.extensions[ln.KHR_TEXTURE_TRANSFORM].extendTexture(s,a),o.associations.set(s,l)}}return i!==void 0&&(typeof i=="number"&&(i=i===kA?ud:Gu),"colorSpace"in s?s.colorSpace=i:s.encoding=i===ud?kA:MU),t[n]=s,s})}assignFinalMaterial(t){const n=t.geometry;let r=t.material;const i=n.attributes.tangent===void 0,o=n.attributes.color!==void 0,s=n.attributes.normal===void 0;if(t.isPoints){const a="PointsMaterial:"+r.uuid;let l=this.cache.get(a);l||(l=new b_,Qi.prototype.copy.call(l,r),l.color.copy(r.color),l.map=r.map,l.sizeAttenuation=!1,this.cache.add(a,l)),r=l}else if(t.isLine){const a="LineBasicMaterial:"+r.uuid;let l=this.cache.get(a);l||(l=new Ys,Qi.prototype.copy.call(l,r),l.color.copy(r.color),l.map=r.map,this.cache.add(a,l)),r=l}if(i||o||s){let a="ClonedMaterial:"+r.uuid+":";i&&(a+="derivative-tangents:"),o&&(a+="vertex-colors:"),s&&(a+="flat-shading:");let l=this.cache.get(a);l||(l=r.clone(),o&&(l.vertexColors=!0),s&&(l.flatShading=!0),i&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(a,l),this.associations.set(l,this.associations.get(r))),r=l}t.material=r}getMaterialType(){return qg}loadMaterial(t){const n=this,r=this.json,i=this.extensions,o=r.materials[t];let s;const a={},l=o.extensions||{},u=[];if(l[ln.KHR_MATERIALS_UNLIT]){const p=i[ln.KHR_MATERIALS_UNLIT];s=p.getMaterialType(),u.push(p.extendParams(a,o,n))}else{const p=o.pbrMetallicRoughness||{};if(a.color=new nr(1,1,1),a.opacity=1,Array.isArray(p.baseColorFactor)){const c=p.baseColorFactor;a.color.setRGB(c[0],c[1],c[2],Gu),a.opacity=c[3]}p.baseColorTexture!==void 0&&u.push(n.assignTexture(a,"map",p.baseColorTexture,ud)),a.metalness=p.metallicFactor!==void 0?p.metallicFactor:1,a.roughness=p.roughnessFactor!==void 0?p.roughnessFactor:1,p.metallicRoughnessTexture!==void 0&&(u.push(n.assignTexture(a,"metalnessMap",p.metallicRoughnessTexture)),u.push(n.assignTexture(a,"roughnessMap",p.metallicRoughnessTexture))),s=this._invokeOne(function(c){return c.getMaterialType&&c.getMaterialType(t)}),u.push(Promise.all(this._invokeAll(function(c){return c.extendMaterialParams&&c.extendMaterialParams(t,a)})))}o.doubleSided===!0&&(a.side=fl);const h=o.alphaMode||Ux.OPAQUE;if(h===Ux.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,h===Ux.MASK&&(a.alphaTest=o.alphaCutoff!==void 0?o.alphaCutoff:.5)),o.normalTexture!==void 0&&s!==sa&&(u.push(n.assignTexture(a,"normalMap",o.normalTexture)),a.normalScale=new Ct(1,1),o.normalTexture.scale!==void 0)){const p=o.normalTexture.scale;a.normalScale.set(p,p)}if(o.occlusionTexture!==void 0&&s!==sa&&(u.push(n.assignTexture(a,"aoMap",o.occlusionTexture)),o.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=o.occlusionTexture.strength)),o.emissiveFactor!==void 0&&s!==sa){const p=o.emissiveFactor;a.emissive=new nr().setRGB(p[0],p[1],p[2],Gu)}return o.emissiveTexture!==void 0&&s!==sa&&u.push(n.assignTexture(a,"emissiveMap",o.emissiveTexture,ud)),Promise.all(u).then(function(){const p=new s(a);return o.name&&(p.name=o.name),Cu(p,o),n.associations.set(p,{materials:t}),o.extensions&&Xf(i,p,o),p})}createUniqueName(t){const n=yn.sanitizeNodeName(t||"");return n in this.nodeNamesUsed?n+"_"+ ++this.nodeNamesUsed[n]:(this.nodeNamesUsed[n]=0,n)}loadGeometries(t){const n=this,r=this.extensions,i=this.primitiveCache;function o(a){return r[ln.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,n).then(function(l){return UA(l,a,n)})}const s=[];for(let a=0,l=t.length;a<l;a++){const u=t[a],h=e4(u),p=i[h];if(p)s.push(p.promise);else{let c;u.extensions&&u.extensions[ln.KHR_DRACO_MESH_COMPRESSION]?c=o(u):c=UA(new Wr,u,n),i[h]={primitive:u,promise:c},s.push(c)}}return Promise.all(s)}loadMesh(t){const n=this,r=this.json,i=this.extensions,o=r.meshes[t],s=o.primitives,a=[];for(let l=0,u=s.length;l<u;l++){const h=s[l].material===void 0?QU(this.cache):this.getDependency("material",s[l].material);a.push(h)}return a.push(n.loadGeometries(s)),Promise.all(a).then(function(l){const u=l.slice(0,l.length-1),h=l[l.length-1],p=[];for(let f=0,m=h.length;f<m;f++){const y=h[f],v=s[f];let g;const x=u[f];if(v.mode===Pa.TRIANGLES||v.mode===Pa.TRIANGLE_STRIP||v.mode===Pa.TRIANGLE_FAN||v.mode===void 0)g=o.isSkinnedMesh===!0?new rw(y,x):new Ti(y,x),g.isSkinnedMesh===!0&&g.normalizeSkinWeights(),v.mode===Pa.TRIANGLE_STRIP?g.geometry=LA(g.geometry,Jb):v.mode===Pa.TRIANGLE_FAN&&(g.geometry=LA(g.geometry,Gv));else if(v.mode===Pa.LINES)g=new gl(y,x);else if(v.mode===Pa.LINE_STRIP)g=new Vu(y,x);else if(v.mode===Pa.LINE_LOOP)g=new iw(y,x);else if(v.mode===Pa.POINTS)g=new sw(y,x);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+v.mode);Object.keys(g.geometry.morphAttributes).length>0&&$U(g,o),g.name=n.createUniqueName(o.name||"mesh_"+t),Cu(g,o),v.extensions&&Xf(i,g,v),n.assignFinalMaterial(g),p.push(g)}for(let f=0,m=p.length;f<m;f++)n.associations.set(p[f],{meshes:t,primitives:f});if(p.length===1)return o.extensions&&Xf(i,p[0],o),p[0];const c=new Du;o.extensions&&Xf(i,c,o),n.associations.set(c,{meshes:t});for(let f=0,m=p.length;f<m;f++)c.add(p[f]);return c})}loadCamera(t){let n;const r=this.json.cameras[t],i=r[r.type];if(!i){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return r.type==="perspective"?n=new yi(kE.radToDeg(i.yfov),i.aspectRatio||1,i.znear||1,i.zfar||2e6):r.type==="orthographic"&&(n=new Nu(-i.xmag,i.xmag,i.ymag,-i.ymag,i.znear,i.zfar)),r.name&&(n.name=this.createUniqueName(r.name)),Cu(n,r),Promise.resolve(n)}loadSkin(t){const n=this.json.skins[t],r=[];for(let i=0,o=n.joints.length;i<o;i++)r.push(this._loadNodeShallow(n.joints[i]));return n.inverseBindMatrices!==void 0?r.push(this.getDependency("accessor",n.inverseBindMatrices)):r.push(null),Promise.all(r).then(function(i){const o=i.pop(),s=i,a=[],l=[];for(let u=0,h=s.length;u<h;u++){const p=s[u];if(p){a.push(p);const c=new Cr;o!==null&&c.fromArray(o.array,u*16),l.push(c)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',n.joints[u])}return new zg(a,l)})}loadAnimation(t){const n=this.json,r=this,i=n.animations[t],o=i.name?i.name:"animation_"+t,s=[],a=[],l=[],u=[],h=[];for(let p=0,c=i.channels.length;p<c;p++){const f=i.channels[p],m=i.samplers[f.sampler],y=f.target,v=y.node,g=i.parameters!==void 0?i.parameters[m.input]:m.input,x=i.parameters!==void 0?i.parameters[m.output]:m.output;y.node!==void 0&&(s.push(this.getDependency("node",v)),a.push(this.getDependency("accessor",g)),l.push(this.getDependency("accessor",x)),u.push(m),h.push(y))}return Promise.all([Promise.all(s),Promise.all(a),Promise.all(l),Promise.all(u),Promise.all(h)]).then(function(p){const c=p[0],f=p[1],m=p[2],y=p[3],v=p[4],g=[];for(let x=0,b=c.length;x<b;x++){const w=c[x],T=f[x],R=m[x],C=y[x],P=v[x];if(w===void 0)continue;w.updateMatrix&&w.updateMatrix();const I=r._createAnimationTracks(w,T,R,C,P);if(I)for(let D=0;D<I.length;D++)g.push(I[D])}return new _p(o,void 0,g)})}createNodeMesh(t){const n=this.json,r=this,i=n.nodes[t];return i.mesh===void 0?null:r.getDependency("mesh",i.mesh).then(function(o){const s=r._getNodeRef(r.meshCache,i.mesh,o);return i.weights!==void 0&&s.traverse(function(a){if(a.isMesh)for(let l=0,u=i.weights.length;l<u;l++)a.morphTargetInfluences[l]=i.weights[l]}),s})}loadNode(t){const n=this.json,r=this,i=n.nodes[t],o=r._loadNodeShallow(t),s=[],a=i.children||[];for(let u=0,h=a.length;u<h;u++)s.push(r.getDependency("node",a[u]));const l=i.skin===void 0?Promise.resolve(null):r.getDependency("skin",i.skin);return Promise.all([o,Promise.all(s),l]).then(function(u){const h=u[0],p=u[1],c=u[2];c!==null&&h.traverse(function(f){f.isSkinnedMesh&&f.bind(c,r4)});for(let f=0,m=p.length;f<m;f++)h.add(p[f]);return h})}_loadNodeShallow(t){const n=this.json,r=this.extensions,i=this;if(this.nodeCache[t]!==void 0)return this.nodeCache[t];const o=n.nodes[t],s=o.name?i.createUniqueName(o.name):"",a=[],l=i._invokeOne(function(u){return u.createNodeMesh&&u.createNodeMesh(t)});return l&&a.push(l),o.camera!==void 0&&a.push(i.getDependency("camera",o.camera).then(function(u){return i._getNodeRef(i.cameraCache,o.camera,u)})),i._invokeAll(function(u){return u.createNodeAttachment&&u.createNodeAttachment(t)}).forEach(function(u){a.push(u)}),this.nodeCache[t]=Promise.all(a).then(function(u){let h;if(o.isBone===!0?h=new x_:u.length>1?h=new Du:u.length===1?h=u[0]:h=new pn,h!==u[0])for(let p=0,c=u.length;p<c;p++)h.add(u[p]);if(o.name&&(h.userData.name=o.name,h.name=s),Cu(h,o),o.extensions&&Xf(r,h,o),o.matrix!==void 0){const p=new Cr;p.fromArray(o.matrix),h.applyMatrix4(p)}else o.translation!==void 0&&h.position.fromArray(o.translation),o.rotation!==void 0&&h.quaternion.fromArray(o.rotation),o.scale!==void 0&&h.scale.fromArray(o.scale);return i.associations.has(h)||i.associations.set(h,{}),i.associations.get(h).nodes=t,h}),this.nodeCache[t]}loadScene(t){const n=this.extensions,r=this.json.scenes[t],i=this,o=new Du;r.name&&(o.name=i.createUniqueName(r.name)),Cu(o,r),r.extensions&&Xf(n,o,r);const s=r.nodes||[],a=[];for(let l=0,u=s.length;l<u;l++)a.push(i.getDependency("node",s[l]));return Promise.all(a).then(function(l){for(let h=0,p=l.length;h<p;h++)o.add(l[h]);const u=h=>{const p=new Map;for(const[c,f]of i.associations)(c instanceof Qi||c instanceof ei)&&p.set(c,f);return h.traverse(c=>{const f=i.associations.get(c);f!=null&&p.set(c,f)}),p};return i.associations=u(o),o})}_createAnimationTracks(t,n,r,i,o){const s=[],a=t.name?t.name:t.uuid,l=[];Rc[o.path]===Rc.weights?t.traverse(function(c){c.morphTargetInfluences&&l.push(c.name?c.name:c.uuid)}):l.push(a);let u;switch(Rc[o.path]){case Rc.weights:u=Cd;break;case Rc.rotation:u=Rd;break;case Rc.position:case Rc.scale:u=Pd;break;default:switch(r.itemSize){case 1:u=Cd;break;case 2:case 3:default:u=Pd;break}break}const h=i.interpolation!==void 0?KU[i.interpolation]:gp,p=this._getArrayFromAccessor(r);for(let c=0,f=l.length;c<f;c++){const m=new u(l[c]+"."+Rc[o.path],n.array,p,h);i.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(m),s.push(m)}return s}_getArrayFromAccessor(t){let n=t.array;if(t.normalized){const r=kb(n.constructor),i=new Float32Array(n.length);for(let o=0,s=n.length;o<s;o++)i[o]=n[o]*r;n=i}return n}_createCubicSplineTrackInterpolant(t){t.createInterpolant=function(r){const i=this instanceof Rd?JU:IR;return new i(this.times,this.values,this.getValueSize()/3,r)},t.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function i4(d,t,n){const r=t.attributes,i=new Ws;if(r.POSITION!==void 0){const a=n.json.accessors[r.POSITION],l=a.min,u=a.max;if(l!==void 0&&u!==void 0){if(i.set(new Oe(l[0],l[1],l[2]),new Oe(u[0],u[1],u[2])),a.normalized){const h=kb(dp[a.componentType]);i.min.multiplyScalar(h),i.max.multiplyScalar(h)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const o=t.targets;if(o!==void 0){const a=new Oe,l=new Oe;for(let u=0,h=o.length;u<h;u++){const p=o[u];if(p.POSITION!==void 0){const c=n.json.accessors[p.POSITION],f=c.min,m=c.max;if(f!==void 0&&m!==void 0){if(l.setX(Math.max(Math.abs(f[0]),Math.abs(m[0]))),l.setY(Math.max(Math.abs(f[1]),Math.abs(m[1]))),l.setZ(Math.max(Math.abs(f[2]),Math.abs(m[2]))),c.normalized){const y=kb(dp[c.componentType]);l.multiplyScalar(y)}a.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}i.expandByVector(a)}d.boundingBox=i;const s=new Cs;i.getCenter(s.center),s.radius=i.min.distanceTo(i.max)/2,d.boundingSphere=s}function UA(d,t,n){const r=t.attributes,i=[];function o(s,a){return n.getDependency("accessor",s).then(function(l){d.setAttribute(a,l)})}for(const s in r){const a=Bb[s]||s.toLowerCase();a in d.attributes||i.push(o(r[s],a))}if(t.indices!==void 0&&!d.index){const s=n.getDependency("accessor",t.indices).then(function(a){d.setIndex(a)});i.push(s)}return Cu(d,t),i4(d,t,n),Promise.all(i).then(function(){return t.targets!==void 0?ZU(d,t.targets,n):d})}const Hx=new WeakMap;class s4 extends qs{constructor(t){super(t),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(t){return this.decoderPath=t,this}setDecoderConfig(t){return this.decoderConfig=t,this}setWorkerLimit(t){return this.workerLimit=t,this}load(t,n,r,i){const o=new ca(this.manager);o.setPath(this.path),o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(t,s=>{const a={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(s,a).then(n).catch(i)},r,i)}decodeDracoFile(t,n,r,i){const o={attributeIDs:r||this.defaultAttributeIDs,attributeTypes:i||this.defaultAttributeTypes,useUniqueIDs:!!r};this.decodeGeometry(t,o).then(n)}decodeGeometry(t,n){for(const l in n.attributeTypes){const u=n.attributeTypes[l];u.BYTES_PER_ELEMENT!==void 0&&(n.attributeTypes[l]=u.name)}const r=JSON.stringify(n);if(Hx.has(t)){const l=Hx.get(t);if(l.key===r)return l.promise;if(t.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let i;const o=this.workerNextTaskID++,s=t.byteLength,a=this._getWorker(o,s).then(l=>(i=l,new Promise((u,h)=>{i._callbacks[o]={resolve:u,reject:h},i.postMessage({type:"decode",id:o,taskConfig:n,buffer:t},[t])}))).then(l=>this._createGeometry(l.geometry));return a.catch(()=>!0).then(()=>{i&&o&&this._releaseTask(i,o)}),Hx.set(t,{key:r,promise:a}),a}_createGeometry(t){const n=new Wr;t.index&&n.setIndex(new wn(t.index.array,1));for(let r=0;r<t.attributes.length;r++){const i=t.attributes[r],o=i.name,s=i.array,a=i.itemSize;n.setAttribute(o,new wn(s,a))}return n}_loadLibrary(t,n){const r=new ca(this.manager);return r.setPath(this.decoderPath),r.setResponseType(n),r.setWithCredentials(this.withCredentials),new Promise((i,o)=>{r.load(t,i,void 0,o)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const t=typeof WebAssembly!="object"||this.decoderConfig.type==="js",n=[];return t?n.push(this._loadLibrary("draco_decoder.js","text")):(n.push(this._loadLibrary("draco_wasm_wrapper.js","text")),n.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(n).then(r=>{const i=r[0];t||(this.decoderConfig.wasmBinary=r[1]);const o=o4.toString(),s=["/* draco decoder */",i,"","/* worker */",o.substring(o.indexOf("{")+1,o.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([s]))}),this.decoderPending}_getWorker(t,n){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const i=new Worker(this.workerSourceURL);i._callbacks={},i._taskCosts={},i._taskLoad=0,i.postMessage({type:"init",decoderConfig:this.decoderConfig}),i.onmessage=function(o){const s=o.data;switch(s.type){case"decode":i._callbacks[s.id].resolve(s);break;case"error":i._callbacks[s.id].reject(s);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+s.type+'"')}},this.workerPool.push(i)}else this.workerPool.sort(function(i,o){return i._taskLoad>o._taskLoad?-1:1});const r=this.workerPool[this.workerPool.length-1];return r._taskCosts[t]=n,r._taskLoad+=n,r})}_releaseTask(t,n){t._taskLoad-=t._taskCosts[n],delete t._callbacks[n],delete t._taskCosts[n]}debug(){console.log("Task load: ",this.workerPool.map(t=>t._taskLoad))}dispose(){for(let t=0;t<this.workerPool.length;++t)this.workerPool[t].terminate();return this.workerPool.length=0,this}}function o4(){let d,t;onmessage=function(s){const a=s.data;switch(a.type){case"init":d=a.decoderConfig,t=new Promise(function(h){d.onModuleLoaded=function(p){h({draco:p})},DracoDecoderModule(d)});break;case"decode":const l=a.buffer,u=a.taskConfig;t.then(h=>{const p=h.draco,c=new p.Decoder,f=new p.DecoderBuffer;f.Init(new Int8Array(l),l.byteLength);try{const m=n(p,c,f,u),y=m.attributes.map(v=>v.array.buffer);m.index&&y.push(m.index.array.buffer),self.postMessage({type:"decode",id:a.id,geometry:m},y)}catch(m){console.error(m),self.postMessage({type:"error",id:a.id,error:m.message})}finally{p.destroy(f),p.destroy(c)}});break}};function n(s,a,l,u){const h=u.attributeIDs,p=u.attributeTypes;let c,f;const m=a.GetEncodedGeometryType(l);if(m===s.TRIANGULAR_MESH)c=new s.Mesh,f=a.DecodeBufferToMesh(l,c);else if(m===s.POINT_CLOUD)c=new s.PointCloud,f=a.DecodeBufferToPointCloud(l,c);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!f.ok()||c.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+f.error_msg());const y={index:null,attributes:[]};for(const v in h){const g=self[p[v]];let x,b;if(u.useUniqueIDs)b=h[v],x=a.GetAttributeByUniqueId(c,b);else{if(b=a.GetAttributeId(c,s[h[v]]),b===-1)continue;x=a.GetAttribute(c,b)}y.attributes.push(i(s,a,c,v,g,x))}return m===s.TRIANGULAR_MESH&&(y.index=r(s,a,c)),s.destroy(c),y}function r(s,a,l){const h=l.num_faces()*3,p=h*4,c=s._malloc(p);a.GetTrianglesUInt32Array(l,p,c);const f=new Uint32Array(s.HEAPF32.buffer,c,h).slice();return s._free(c),{array:f,itemSize:1}}function i(s,a,l,u,h,p){const c=p.num_components(),m=l.num_points()*c,y=m*h.BYTES_PER_ELEMENT,v=o(s,h),g=s._malloc(y);a.GetAttributeDataArrayForAllPoints(l,p,v,y,g);const x=new h(s.HEAPF32.buffer,g,m).slice();return s._free(g),{name:u,array:x,itemSize:c}}function o(s,a){switch(a){case Float32Array:return s.DT_FLOAT32;case Int8Array:return s.DT_INT8;case Int16Array:return s.DT_INT16;case Int32Array:return s.DT_INT32;case Uint8Array:return s.DT_UINT8;case Uint16Array:return s.DT_UINT16;case Uint32Array:return s.DT_UINT32}}}let W0;const zx=()=>{if(W0)return W0;const d="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",t="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",n=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),r=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let i=d;WebAssembly.validate(n)&&(i=t);let o;const s=WebAssembly.instantiate(a(i),{}).then(p=>{o=p.instance,o.exports.__wasm_call_ctors()});function a(p){const c=new Uint8Array(p.length);for(let m=0;m<p.length;++m){const y=p.charCodeAt(m);c[m]=y>96?y-71:y>64?y-65:y>47?y+4:y>46?63:62}let f=0;for(let m=0;m<p.length;++m)c[f++]=c[m]<60?r[c[m]]:(c[m]-60)*64+c[++m];return c.buffer.slice(0,f)}function l(p,c,f,m,y,v){const g=o.exports.sbrk,x=f+3&-4,b=g(x*m),w=g(y.length),T=new Uint8Array(o.exports.memory.buffer);T.set(y,w);const R=p(b,f,m,w,y.length);if(R===0&&v&&v(b,x,m),c.set(T.subarray(b,b+f*m)),g(b-g(0)),R!==0)throw new Error(`Malformed buffer data: ${R}`)}const u={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},h={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return W0={ready:s,supported:!0,decodeVertexBuffer(p,c,f,m,y){l(o.exports.meshopt_decodeVertexBuffer,p,c,f,m,o.exports[u[y]])},decodeIndexBuffer(p,c,f,m){l(o.exports.meshopt_decodeIndexBuffer,p,c,f,m)},decodeIndexSequence(p,c,f,m){l(o.exports.meshopt_decodeIndexSequence,p,c,f,m)},decodeGltfBuffer(p,c,f,m,y,v){l(o.exports[h[y]],p,c,f,m,o.exports[u[v]])}},W0};let X0=null,jR="https://www.gstatic.com/draco/versioned/decoders/1.5.5/";function LR(d=!0,t=!0,n){return r=>{n&&n(r),d&&(X0||(X0=new s4),X0.setDecoderPath(typeof d=="string"?d:jR),r.setDRACOLoader(X0)),t&&r.setMeshoptDecoder(typeof zx=="function"?zx():zx)}}const Zg=(d,t,n,r)=>Qg(nS,d,LR(t,n,r));Zg.preload=(d,t,n,r)=>Qg.preload(nS,d,LR(t,n,r));Zg.clear=d=>Qg.clear(nS,d);Zg.setDecoderPath=d=>{jR=d};const a4=Ot.forwardRef(({makeDefault:d,camera:t,regress:n,domElement:r,enableDamping:i=!0,keyEvents:o=!1,onChange:s,onStart:a,onEnd:l,...u},h)=>{const p=Cc(R=>R.invalidate),c=Cc(R=>R.camera),f=Cc(R=>R.gl),m=Cc(R=>R.events),y=Cc(R=>R.setEvents),v=Cc(R=>R.set),g=Cc(R=>R.get),x=Cc(R=>R.performance),b=t||c,w=r||m.connected||f.domElement,T=Ot.useMemo(()=>new SU(b),[b]);return HN(()=>{T.enabled&&T.update()},-1),Ot.useEffect(()=>(o&&T.connect(o===!0?w:o),T.connect(w),()=>void T.dispose()),[o,w,n,T,p]),Ot.useEffect(()=>{const R=I=>{p(),n&&x.regress(),s&&s(I)},C=I=>{a&&a(I)},P=I=>{l&&l(I)};return T.addEventListener("change",R),T.addEventListener("start",C),T.addEventListener("end",P),()=>{T.removeEventListener("start",C),T.removeEventListener("end",P),T.removeEventListener("change",R)}},[s,a,l,T,p,y]),Ot.useEffect(()=>{if(d){const R=g().controls;return v({controls:T}),()=>v({controls:R})}},[d,T]),Ot.createElement("primitive",Db({ref:h,object:T,enableDamping:i},u))});function GA(d,t,n,r,i,o){let s=Math.PI/2*3,a=t,l=n,u=Math.PI/r;d.beginPath(),d.moveTo(t,n-i);for(let h=0;h<r;h++)a=t+Math.cos(s)*i,l=n+Math.sin(s)*i,d.lineTo(a,l),s+=u,a=t+Math.cos(s)*o,l=n+Math.sin(s)*o,d.lineTo(a,l),s+=u;d.lineTo(t,n-i),d.closePath(),d.fill()}function HA(d,t,n,r){d.beginPath(),d.moveTo(t,n+r/4),d.bezierCurveTo(t-r/2,n-r/2,t-r,n+r/4,t,n+r),d.bezierCurveTo(t+r,n+r/4,t+r/2,n-r/2,t,n+r/4),d.closePath(),d.fill()}function l4({brushColor:d,brushSize:t,brushShape:n,outerShellColor:r,innerShellColor:i,buttonColors:o,setIsLoaded:s}){const a=Zg("tamagotchi.glb"),{progress:l}=pU();Ot.useEffect(()=>{l===100&&s(!0)},[l]);const u=[];a.scene.children.forEach(x=>{u[x.name]=x});const[h,p]=Ot.useState(!1),[c,f]=Ot.useState(null),m=Ot.useRef(null),y=Ot.useRef();Ot.useEffect(()=>{const x=document.createElement("canvas");x.width=1024,x.height=1024,m.current=x,y.current=x.getContext("2d"),y.current.fillStyle=r,y.current.fillRect(0,0,x.width,x.height);const b=new JE(x);b.colorSpace=Es,f(b)},[r]);const v=x=>{var I;if(!c)return;const b=(I=x.intersections[0])==null?void 0:I.uv;if(!b)return;const{width:w,height:T}=m.current,R=b.x*w,C=(1-b.y)*T,P=y.current;P.fillStyle=d,P.beginPath(),n==="round"&&(P.arc(R,C,t,0,Math.PI*2),P.fill()),n==="square"&&P.fillRect(R-t/2,C-t/2,t,t),n==="star"&&GA(P,R,C,5,t,t/2),n==="heart"&&HA(P,R,C,t),c.colorSpace=Es,c.needsUpdate=!0},g=x=>{var I;if(!h||!c)return;const b=(I=x.intersections[0])==null?void 0:I.uv;if(!b||x.buttons!==1)return;const{width:w,height:T}=m.current,R=b.x*w,C=(1-b.y)*T,P=y.current;P.fillStyle=d,P.beginPath(),n==="round"&&(P.arc(R,C,t,0,Math.PI*2),P.fill()),n==="square"&&P.fillRect(R-t/2,C-t/2,t,t),n==="star"&&GA(P,R,C,5,t,t/2),n==="heart"&&HA(P,R,C,t),c.colorSpace=Es,c.needsUpdate=!0};return Zt.jsxs(Zt.Fragment,{children:[Zt.jsx("primitive",{object:u.outershell,onPointerDown:()=>p(!0),onPointerUp:()=>p(!1),onPointerMove:g,onClick:v,children:c&&Zt.jsx("meshStandardMaterial",{map:c,roughness:.2,metalness:.5,clearcoat:.8,clearcoatRoughness:.1})}),Zt.jsx("primitive",{object:u.innershell,children:Zt.jsx("meshStandardMaterial",{color:i,roughness:.2,metalness:.5,clearcoat:.8,clearcoatRoughness:.1})}),Zt.jsx("primitive",{object:u.screen}),Zt.jsx("primitive",{object:u.ring,children:Zt.jsx("meshStandardMaterial",{color:r,roughness:.2,metalness:.5})}),Zt.jsx("primitive",{object:u.leftbutton,children:Zt.jsx("meshStandardMaterial",{color:o.left,roughness:.2,metalness:.5})}),Zt.jsx("primitive",{object:u.rightbutton,children:Zt.jsx("meshStandardMaterial",{color:o.right,roughness:.2,metalness:.5})}),Zt.jsx("primitive",{object:u.centerbutton,children:Zt.jsx("meshStandardMaterial",{color:o.center,roughness:.2,metalness:.5})})]})}function u4({screenTexture:d,brushColor:t,brushSize:n,brushShape:r,outerShellColor:i,innerShellColor:o,buttonColors:s,setIsLoaded:a}){const[l,u]=Ot.useState(!0);return Zg.preload("tamagotchi.glb"),Ot.useEffect(()=>{if(!l)return;const h=setTimeout(()=>{u(!1)},2e3);return()=>clearTimeout(h)},[l]),Zt.jsxs(Zt.Fragment,{children:[Zt.jsx("ambientLight",{intensity:4}),Zt.jsx("directionalLight",{}),Zt.jsx(a4,{minDistance:0,maxDistance:10,mouseButtons:{RIGHT:0}}),Zt.jsx(l4,{screenTexture:d,brushColor:t,brushSize:n,brushShape:r,outerShellColor:i,innerShellColor:o,buttonColors:s,setIsLoaded:a})]})}function c4({screenTexture:d,color:t,setColor:n,size:r,setSize:i,shape:o,setShape:s,outerShellColor:a,setOuterShellColor:l,innerShellColor:u,setInnerShellColor:h,buttonColors:p,setButtonColors:c,isLoaded:f,setIsLoaded:m,isCustomizeFocused:y}){const v=Ot.useRef(null),g=()=>{const x=v.current.toDataURL("image/png"),b=document.createElement("a");b.href=x,b.download=`tamagotchi-${Date.now()}.png`,document.body.appendChild(b),b.click(),document.body.removeChild(b)};return Zt.jsxs("div",{className:"h-screen flex justify-center items-center relative",children:[Zt.jsx("div",{className:"spriteLayer absolute z-10",children:Zt.jsx(lN,{className:"absolute z-10",isLoaded:f})}),Zt.jsxs("div",{className:`r3fLayer absolute inset-0 transition-opacity duration-500 ${y?"opacity-100":"opacity-0"}`,children:[Zt.jsx("div",{className:"absolute top-5 left-1/2 transform -translate-x-1/2 text-center",children:Zt.jsx(oN,{text:"Customize your Tamagotchi"})}),Zt.jsxs("div",{className:"fixed bottom-5 right-5  p-4 rounded-2xl shadow-lg space-y-3 z-10",children:[Zt.jsxs("div",{children:[Zt.jsx("label",{className:"block font-semibold",children:"Brush Color"}),Zt.jsx("div",{className:"flex items-center space-x-2",children:Zt.jsx("input",{type:"color",className:"w-8 h-9",value:t,onChange:x=>n(x.target.value)})})]}),Zt.jsxs("div",{children:[Zt.jsx("label",{className:"block font-semibold",children:"Brush Size"}),Zt.jsx("input",{type:"range",min:"1",max:"50",value:r,onChange:x=>i(parseInt(x.target.value)),className:"w-full appearance-none h-3 rounded-lg",style:{background:t,"--brush-color":t,"--brush-radius":`${r}px`}})]}),Zt.jsxs("div",{children:[Zt.jsx("label",{className:"block font-semibold mb-2",children:"Brush Shape"}),Zt.jsx("div",{className:"flex space-x-2",children:[{value:"round",label:""},{value:"square",label:""},{value:"star",label:""},{value:"heart",label:""}].map(({value:x,label:b})=>Zt.jsx("button",{onClick:()=>s(x),className:`shapeButton w-10 h-10 flex items-center justify-center rounded-lg transition-all 
                  text-[color:var(--brush-color)] font-sans
                  ${o===x?"border scale-110":"hover:border"}`,style:{"--brush-color":t},children:Zt.jsx("span",{className:"text-lg",children:b})},x))})]}),Zt.jsx("div",{className:"space-y-2",children:[{label:"Outer Shell",value:a,setter:l},{label:"Inner Shell",value:u,setter:h},{label:"Left Button",value:p.left,setter:x=>c({...p,left:x})},{label:"Center Button",value:p.center,setter:x=>c({...p,center:x})},{label:"Right Button",value:p.right,setter:x=>c({...p,right:x})}].map(({label:x,value:b,setter:w},T)=>Zt.jsxs("div",{className:"flex items-center justify-between",children:[Zt.jsx("label",{className:"font-semibold",children:x}),Zt.jsx("div",{className:"flex items-center space-x-2",children:Zt.jsx("input",{type:"color",className:"w-8 h-9",value:b,onChange:R=>w(R.target.value)})})]},T))})]}),Zt.jsx(uU,{ref:v,className:"absolute inset-0",camera:{fov:45,near:.1,far:2e3,position:[-3,1.5,8]},gl:{preserveDrawingBuffer:!0},children:Zt.jsx(u4,{screenTexture:d,brushColor:t,brushSize:r,brushShape:o,outerShellColor:a,innerShellColor:u,buttonColors:p,setIsLoaded:m})}),Zt.jsx("div",{className:"info absolute bottom-15 not-only-of-type:left-1/2 transform -translate-x-1/2",children:"right-click to rotate"}),Zt.jsx("button",{onClick:g,className:"info absolute bottom-5 left-1/2 transform -translate-x-1/2",children:" click here to take a Picture"})]})]})}ml.registerPlugin(Ud,qr);const f4=dP.createRoot(document.querySelector("#root")),d4=()=>{const[d,t]=Ot.useState(null),[n,r]=Ot.useState("#85A3FF"),[i,o]=Ot.useState(10),[s,a]=Ot.useState("round"),[l,u]=Ot.useState(!1),[h,p]=Ot.useState("#75fffd"),[c,f]=Ot.useState("#ffe957"),[m,y]=Ot.useState({left:"#ffa8a8",right:"#aa99ff",center:"#52ff94"}),[v,g]=Ot.useState(!1);return Zt.jsxs(Zt.Fragment,{children:[Zt.jsx(SP,{sketch:MP}),Zt.jsx("div",{className:"absolute inset-0 z-0 pointer-events-none",children:Zt.jsx(aN,{})}),Zt.jsx("div",{className:"absolute inset-0 z-10",children:Zt.jsx(c4,{screenTexture:d,color:n,setColor:r,size:i,setSize:o,shape:s,setShape:a,isCustomizeFocused:l,outerShellColor:h,setOuterShellColor:p,innerShellColor:c,setInnerShellColor:f,buttonColors:m,setButtonColors:y,isLoaded:v,setIsLoaded:g})})]})};f4.render(Zt.jsx(d4,{}));
//# sourceMappingURL=index-DXE4LYyf.js.map
